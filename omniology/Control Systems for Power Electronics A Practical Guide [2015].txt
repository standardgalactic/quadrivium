SPRINGER BRIEFS IN 
APPLIED SCIENCES AND TECHNOLOGY
Mahesh Patil
Pankaj Rodey
Control Systems 
for Power 
Electronics
 A Practical Guide 

SpringerBriefs in Applied Sciences
and Technology

More information about this series at http://www.springer.com/series/8884

Mahesh Patil
• Pankaj Rodey
Control Systems for Power
Electronics
A Practical Guide
123

Mahesh Patil
Secunderabad
India
Pankaj Rodey
Embedded Control Systems
Hyderabad
India
ISSN 2191-530X
ISSN 2191-5318
(electronic)
SpringerBriefs in Applied Sciences and Technology
ISBN 978-81-322-2327-6
ISBN 978-81-322-2328-3
(eBook)
DOI 10.1007/978-81-322-2328-3
Library of Congress Control Number: 2015934946
Springer New Delhi Heidelberg New York Dordrecht London
© The Author(s) 2015
This work is subject to copyright. All rights are reserved by the Publisher, whether the whole or part
of the material is concerned, speciﬁcally the rights of translation, reprinting, reuse of illustrations,
recitation, broadcasting, reproduction on microﬁlms or in any other physical way, and transmission
or information storage and retrieval, electronic adaptation, computer software, or by similar or
dissimilar methodology now known or hereafter developed.
The use of general descriptive names, registered names, trademarks, service marks, etc. in this
publication does not imply, even in the absence of a speciﬁc statement, that such names are exempt
from the relevant protective laws and regulations and therefore free for general use.
The publisher, the authors and the editors are safe to assume that the advice and information in this
book are believed to be true and accurate at the date of publication. Neither the publisher nor the
authors or the editors give a warranty, express or implied, with respect to the material contained
herein or for any errors or omissions that may have been made.
MATLAB® and Simulink® are registered trademarks of The MathWorks, Inc. All other trademarks are
the property of their respective owners. For MATLAB and Simulink product information, please
contact: The MathWorks, Inc. 3 Apple Hill Drive Natick, MA, 01760-2098 USA, Tel: 508-647-7000,
Fax: 508-647-7001, E-mail: info@mathworks.com, Web: http://www.mathworks.com
Printed on acid-free paper
Springer (India) Pvt. Ltd. is part of Springer Science+Business Media (www.springer.com)

Foreword
It has been a few years since I have been working with the authors of this book on
the ﬁeld of control systems and power electronics. We have executed challenging
programs together and during our conversations we often touched upon a
requirement for a practical text on this subject. It gives me immense pleasure to
write the foreword for this book and seeing a thought converted into productive
action.
This book is different from existing books on Control Systems for Power
Electronics in a way that it is not scholarly, but is a practical-oriented compilation,
replete with simple industry case studies. The illustrations are lucid and supported
with simulations for various conditions and topologies adding a lot of value for the
reader. The simulations and the accompanying colored illustrations make the
complicated concepts easy to understand giving the reader a comprehensive
understanding of the subject. The visual insights are extremely helpful and do not
make it necessary for the reader to be extensively engaged on mathematics of
control theory. I recommend this book for all readers in this domain across research,
academics, and industry.
I enjoyed this book and hope you enjoy it too!
Anusheel Nahar, CEO
Controltrix Corp
v

Preface
The scope of the book covers most of the aspects as a primer on power electronics
starting from a simple diode bridge to a DC–DC convertor using PWM control. The
thyristor-bridge and the mechanism of forming a closed-loop system are discussed
in Chaps. 1–3. The concepts are applied in Chap. 4 as a case study for buck
converter which uses MOSFETs as switching devices and the closed-loop system is
elaborated in Chap. 5. Chapter 6 is focused on the embedded system basics and the
implementation of controls in the digital domain. The reader will ﬁnd it easy to
work on the practical control systems with microcontroller implementation.
The primary intent of this book is to help the reader gain an accelerated learning
path to practical control system engineering and transform control theory to an
implementable control system through electronics. Illustrations are provided for
most of the examples with fundamental mathematics along with simulations of the
systems with their relevant equations and stability calculations.
There are books elaborating on power electronics devices, power electronics
applications, microcontrollers, and control system theory which can be used as a
reference by the reader. The difference between specialized books and this book is
that this book focuses on building practical blocks leveraging a basic understanding
of electronic devices, simulations, and microcontrollers.
After reading this book, engineers will have a sound understanding of practical
control system engineering. This will help them apply their domain knowledge to
real product development.
vii

Acknowledgments
This book is an on the job approach to implementing control system theory to a
practical control system for various applications. It has been an arduous effort to
translate our learning to development of practical control systems in the analog and
digital world and the prime motive of this book is the thought that some of the
learnings can be consolidated to give a head start to a practicing engineer.
We have learned much through our experience in various organizations over the
years, working with brilliant colleagues and facing technical challenges in our
everyday work.
Our sincere thanks to our colleagues at Crompton Greaves, General Electric,
Emerson with whom our decades of association enlightened us on various aspects
of this subject. Our special thanks to Shijin Krishna, who meticulously worked on
the equations and helped through the proofreading with all his patience.
Our special thanks to Somachand Kattige and Rathish Gangadharan, who spent
their precious time reviewing the text and suggesting improvements.
To our family and friends who had enormous patience to stand by us during this
period of writing during weekends and late nights and encouraging us to go the last
mile in making the book as ﬂawless as possible.
ix

Contents
1
Uncontrolled Rectiﬁer. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
1
Rectifier Configurations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
1
2
Controlled Rectiﬁer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
9
Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
9
The Thyristor Rectifier . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
10
3
Thyristor Rectiﬁer in Closed Loop . . . . . . . . . . . . . . . . . . . . . . . .
15
An Introduction to Closed-Loop Control. . . . . . . . . . . . . . . . . . . . . .
15
Power Circuit Explanation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
16
4
Buck Converter in Open Loop . . . . . . . . . . . . . . . . . . . . . . . . . . .
21
An Introduction to Open Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . .
21
Mathematical Modeling of the Power Converter . . . . . . . . . . . . . . . .
24
The Control of the Buck Converter . . . . . . . . . . . . . . . . . . . . . . . . .
25
Voltage Mode Control of Buck Converter. . . . . . . . . . . . . . . . . . . . .
26
5
Buck Converter in Closed Loop . . . . . . . . . . . . . . . . . . . . . . . . . .
29
An Introduction to Closed Loop . . . . . . . . . . . . . . . . . . . . . . . . . . .
29
6
Design of Embedded Control . . . . . . . . . . . . . . . . . . . . . . . . . . . .
39
Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
39
Analog and Digital Control. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
39
Developing an Embedded Controller . . . . . . . . . . . . . . . . . . . . . . . .
41
A Brief Introduction to Model-Based Design. . . . . . . . . . . . . . . . . . .
44
xi

7
Case Study of an Embedded Control System Design . . . . . . . . . . .
45
Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
45
Application Overview. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
46
Measurement of Speed of the Motor . . . . . . . . . . . . . . . . . . . . . . . .
46
Hall Effect Sensor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
46
Opto Coupler . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
47
Controlling the Speed with PWM . . . . . . . . . . . . . . . . . . . . . . . .
48
Subsystem Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
48
PCB Layout for the System . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
50
Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
51
References. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
53
xii
Contents

Figures
Fig. 1.1
Three-phase bridge rectifier . . . . . . . . . . . . . . . . . . . . . . . . . .
2
Fig. 1.2
Phase voltages for three-phase bridge rectifier . . . . . . . . . . . . .
4
Fig. 1.3
Line to line voltages for three-phase bridge rectifier . . . . . . . . .
4
Fig. 1.4
Diode bridge with resistive load (R = 100 Ω, L = 0 H) . . . . . . .
5
Fig. 1.5
Diode bridge with resistive inductive load
(R = 100 Ω, L = 0.1 H). . . . . . . . . . . . . . . . . . . . . . . . . . . . .
5
Fig. 1.6
Diode bridge with resistive inductive load
(R = 100 Ω, L = 1 H) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
6
Fig. 2.1
Power scheme in a typical industrial application . . . . . . . . . . . .
10
Fig. 2.2
Three-phase thyristor bridge. . . . . . . . . . . . . . . . . . . . . . . . . .
10
Fig. 2.3
The waveform for input voltage firing sequence, output
voltage and output current for R = 100 Ω, L = 0 H, firing
angle of 45°. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
12
Fig. 2.4
The waveform for input voltage firing sequence, output
voltage and output current for R = 100 Ω, L = 0.1 H, firing
angle of 45°. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
12
Fig. 2.5
The waveform for input voltage firing sequence, output
voltage and output current for R = 100 Ω, L = 1 H, firing
angle of 45°. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
13
Fig. 3.1
Block diagram representation of a closed-loop
control system . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
16
Fig. 3.2
Three-phase thyristor rectifier in closed loop . . . . . . . . . . . . . .
17
Fig. 3.3
VDC and LDC waveform for P–I gains (P = 100, I = 0). . . . . .
17
Fig. 3.4
VDC and LDC waveform for P–I gains (P = 100, I = 50). . . . .
18
Fig. 4.1
The buck converter circuit. The arrow represents
the power switch which is switched ON and OFF at very
high frequency. The direction of the arrow is the direction
of flow of current when the switch is turned ON . . . . . . . . . . .
22
Fig. 4.2
The buck converter circuit when the switch is switched ON. . . .
22
Fig. 4.3
The buck converter circuit when the switch
is switched OFF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
23
Fig. 4.4
Mathematical model of the open-loop buck converter . . . . . . . .
26
Fig. 5.1
The buck converter in voltage mode control. . . . . . . . . . . . . . .
30
xiii

Fig. 5.2
The buck converter in voltage mode control.
For P = 0.05, I = 0, D = 0, the ‘Error’ between the
reference (80 V) and actual voltage is *72 V, thus the
output voltage is 8 V, far off from the desired
80 V reference . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
31
Fig. 5.3
Output DC voltage of the buck converter. A large ripple is
seen in the output voltage for a significantly large P gain
of Kp = 100, Ki = 0, Kd = 0. . . . . . . . . . . . . . . . . . . . . . . . . .
31
Fig. 5.4
The buck converter in voltage mode control
for Kp = 10, Ki = 0, Kd = 0 . . . . . . . . . . . . . . . . . . . . . . . . . .
32
Fig. 5.5
Simulink oscilloscope for output voltage. For Kp = 100,
Ki = 0, Kd = 0, there is a steady-state error of 4 V
in the output voltage of the converter . . . . . . . . . . . . . . . . . . .
33
Fig. 5.6
The buck converter in voltage mode control for Kp = 10,
Ki = 3, Kd = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
33
Fig. 5.7
Simulink® oscilloscope for output voltage. For Kp = 100,
Ki = 3, Kd = 0, the steady-state error in the output voltage
progressively decreases and becomes zero after *9 s . . . . . . . .
34
Fig. 5.8
Output voltage of the converter. Plot of the output voltage
of the converter in the conditions, same as in Fig. 5.4. The
transience in the system is more pronounced at start-up, as
shown in the marked section in the plot . . . . . . . . . . . . . . . . .
35
Fig. 5.9
Plot of the output voltage of the converter with the initial
25 ms zoomed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
35
Fig. 5.10
The buck converter in voltage mode control
for Kp = 10, Ki = 3, Kd = 0.0001 . . . . . . . . . . . . . . . . . . . . . .
36
Fig. 5.11
Plot of the output voltage of the converter with Kp = 10,
Ki = 3, Kd = 0.0001. Due to the integrating effect
of the I controller, the steady-state error progressively
decreases and also the initial transient response
is improved, as shown in the next plot. . . . . . . . . . . . . . . . . . .
36
Fig. 5.12
Plot of the output voltage of the converter initial 20 ms
zoomed. It is evident that the voltage stabilizes faster, in
about 14 ms, compared to *25 ms as shown in Fig. 5.8,
without the D controller. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
37
Fig. 6.1
Buck converter block diagram with analog controller . . . . . . . .
40
Fig. 6.2
Buck converter block diagram with digital controller. . . . . . . . .
41
Fig. 6.3
First-order low pass filter. . . . . . . . . . . . . . . . . . . . . . . . . . . .
42
Fig. 7.1
Speed control of DC motor using PWM technique with
Hall effect sensor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
46
Fig. 7.2
Hall effect sensor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
47
Fig. 7.3
Opto coupler MCT2E . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
47
Fig. 7.4
Opto coupler details . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
48
Fig. 7.5
Pin out of ATtiny2313 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
49
Fig. 7.6
System schematic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
50
Fig. 7.7
PCB layout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
51
xiv
Figures

Learn from the Experts
This book is intended for beginners in control systems and also for professional
engineers who work on controlling machines using the blend of power electronics
and embedded control. Having gone through the learning curve and not found any
concise material we decided to put together our limited learnings for our own
reference and also for the larger forums.
The primary intent of this material is to get expertise in practical control system
engineering with a motive of transforming control theory to an implementable
control system in a microcontroller and electronics.
xv

About the Authors
Mahesh Patil is a technopreneur and has led teams
focusing on cutting edge technologies working for
Multinational
companies
like
General
Electric,
Crompton Greaves and has his own startup. He has built
high performing start-up teams for electric vehicles,
embedded services, expertise in building strategic alli-
ances with high-tech companies. His experiences
include product development for Industrial, Energy, and
Automotive sectors working for large MNCs and also
his own start-up organization. He is six sigma certiﬁed
and has published papers in various international jour-
nals. He holds a Master’s in Technology from NIT Nagpur and a management
qualiﬁcation from XLRI.
Pankaj Rodey is a technical specialist in Embedded
Control Systems domain. He has vast experience in the
ﬁeld of control systems for power generation and power
electronics. He is an expert in model-based virtual
prototyping and design of embedded controls for power
electronics and power generation products. He holds six
sigma certiﬁcates and a Bachelor’s degree in Electrical
Engineering from NIT Nagpur.
xvii

Chapter 1
Uncontrolled Rectiﬁer
Abstract This chapter discusses the basic power electronics switch and the various
conﬁgurations of the diode bridge forming the foundation for the control systems
application for power electronics. The resulting waveforms and the equations are
elaborated which will form the basis for a detailed understanding of controllable
power devices and implementation of control strategies.
Keywords Diode  Thyristor  MOSFET  IGBT  Rectiﬁer  Commutation 
Resistance  Inductance
The diode forms the ﬁrst semiconductor device we come across in academics and
applied in product development life cycles and is the fundamental two terminal
semiconductor switch, ubiquitous in electronics applications. Though the diode is a
simple two-terminal device, a detailed understanding of the diode rectiﬁer appli-
cation is a prerequisite for understanding more complex semiconductor switches
like Thyristors, MOSFETS, and IGBTs. A majority of our everyday applications
like the power supplies in our computers, home appliances, and automobile elec-
tronics have these devices.
A rectiﬁer is classiﬁed based on the conﬁguration of these diodes in an electronic
circuit and the classiﬁcation depends on the number of diodes. The term rectiﬁer is
referred to the operation of converting an AC voltage to a DC voltage or an AC
current to a DC current.
We will explore the most commonly used rectiﬁer conﬁgurations.
Rectiﬁer Conﬁgurations
We will work on the three-phase diode bridge as our ﬁrst application. The key
attributes to study in a three-phase bridge rectiﬁer are instants at which the diode
turns ON and turns OFF. The impact of the load on the rectiﬁer, which can be a
purely resistive load, an inductive load, or a combination of both, will be studied.
The source resistance and inductance also form a very important parameter for the
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_1
1

behavior of the bridge. The nature of the load on the bridge rectiﬁer governs the
proﬁle of the output current of the rectiﬁer, ripple on the dc voltage, and current.
Figure 1.1 gives the detailed circuit diagram of a three-phase bridge rectiﬁer
using diodes.
Figure 1.1 shows a three-phase diode bridge rectiﬁer. The input to the rectiﬁer is
a balanced three phase.
AC voltage source denoted by Va, Vb, Vc.
For simpliﬁcation we assume the source impedance to be zero and the diodes as
ideal switches. The load on the rectiﬁer is a combination of resistive load and
inductive load.
We will explore the behavior of the circuit for
1. Resistive load
2. Resistive-Inductive load
The current waveforms and the voltage waveforms for various values of R and
L will be studied. To begin with the values are taken as R = 100 Ω and L = 0.1 H.
Table 1.1 shows the sequence of commutation of the diode bridge. The ﬁrst
column is the Line to Line voltages of the conduction legs of the bridge and the
corresponding devices which are conducting on the legs. As is evident from the
Fig. 1.1 Three-phase bridge rectiﬁer
2
1
Uncontrolled Rectiﬁer

table and the attached waveforms, the positive excursions of voltages mentioned in
column 1 of the table forward bias the TOP devices. For example, the Vab positive
excursion at zero crossing forward biases Diode D1 and the negative excursion for
the same forward biases Diode D4 ON. Behavior of the other diodes can be
explained on the same lines based on line voltages of Vbc and Vca.
The inductance on load governs the time constant of the system.
This switching pattern as explained and depicted in the waveforms forms the
basis of understanding the diode bridge commutation.
The input three-phase voltage of the diode rectiﬁer is represented mathematically
as:
Va ¼ Vm  sinðxtÞ;
ð1:1Þ
Vb ¼ Vm  sinðxt  120Þ;
ð1:2Þ
Vc ¼ Vm  sinðxt þ 120Þ
ð1:3Þ
where Vm is the peak voltage from the utility supply. The line to line voltages are
represented as:
Vab ¼ Va  Vb;
Vbc ¼ Vb  Vc;
Vca ¼ Vc  Va
ð1:4Þ
We will now see how the three-phase AC voltage is converted to DC by this six
pulse rectiﬁer. For simpliﬁcation, consider a peak voltage Vm of 1 V. The plot of the
phase voltages Van, Vbn, Vcn is shown in Fig. 1.2.
A plot of the line to line voltages for the source is shown in Fig. 1.3
From this ﬁgure of phase to neutral voltages of the input, it is evident that during
the interval of 30°–150°, the phase to neutral voltage of phase a that is Van is greater
in value than phase to neutral voltages, Vbn and Vcn. So, during this interval, diode
D1 will be forward biased.
Looking closely at the 20° time instant, Vab is approximately 1.25 V and
increasing in magnitude, Vca is approaching 0 V and moving towards negative, Vbc
is reducing in magnitude from −1.6 V to −1.5 V. Now, looking at the line to line
voltages, it can be seen that during the interval of 30°–90°, voltage Vab is greater
than the other line voltages Vbc and Vca. So, during this interval, both diodes D1 and
D6 will be forward biased and produce the rectiﬁed pulse across the load.
Table 1.1 Sequence of
conduction of diodes for the
three-phase diode rectiﬁer
L-L
Devices
Vab
1, 6
Top device ON
Vca
1, 2
Bottom device ON
Vbc
2, 3
Top device ON
Vba
3, 4
Bottom device ON
Vac
5, 4
Top device ON
Vcb
5, 6
Bottom device ON
Rectiﬁer Conﬁgurations
3

From the waveforms of line to line voltages, it can be seen that during the
interval of 90°–150°, line voltage Vca is at a negative extreme. This means (Va −Vc)
is greater than the other line voltages Vab and Vbc. So, during this interval both
diodes D1 and D2 will be forward biased and produce the rectiﬁed pulse across the
load.
As seen above, for the interval 30°–150°, two rectiﬁed pulses will be produced
across the load by pair D1, D6, and pair D1, D2. This is shown by the ﬁrst two rows
in Table 1.1.
On similar lines, from the table it can be seen how each pair of diodes produces a
rectiﬁed pulse across the load.
Fig. 1.2 Phase voltages for three-phase bridge rectiﬁer
Fig. 1.3 Line to line voltages for three-phase bridge rectiﬁer
4
1
Uncontrolled Rectiﬁer

Thus, for each 360° cycle of the line to line voltage, six rectiﬁed pulses are
produced across the load and hence the name ‘six pulse rectiﬁer’.
This is also shown in Figs. 1.4, 1.5 and 1.6, where the rectangular pulse at the
bottom represents the instant at which the indicated pair of diodes starts to conduct.
Fig. 1.4 Diode bridge with resistive load (R = 100 Ω, L = 0 H)
Fig. 1.5 Diode bridge with resistive inductive load (R = 100 Ω, L = 0.1 H)
Rectiﬁer Conﬁgurations
5

An inherent phenomenon in a power electronics system is the deviation of the
output of the system from the desired value, alternating above and below the
desired output. This undesired phenomenon is called ‘ripple’.
Next, we will observe the effect of the inductance on the current proﬁle. For
three different values of inductances the ripple in output current will be measured.
As noted in Table 1.2 and also seen from the waveforms, the increase in
inductance causes a reduction in the ripple and a corresponding increase in the rise
time. The time constant of the current is based on the ratio of inductance to
resistance and is evident from the table.
The parameters of time constant, ripple, and the sequence of the conduction of
the diode pairs form the basis for bridge control with thyristors which will be
studied in the next chapter.
Figure 1.4 show the proﬁle of output current when the inductance value is 0. The
proﬁle of the current follows the DC voltage and is in phase with the voltage.
Fig. 1.6 Diode bridge with resistive inductive load (R = 100 Ω, L = 1 H)
Table 1.2 Variation of current ripple with inductance
Inductance
H
Current
min
Current
max
Ripple
Time constant
(L/R) (μs)
Rise
time
0.01
3.1
3.52
0.42
100
0
0.1
3.25
3.34
0.09
10
0.004
1
3.35
3.35
0
1
0.04
6
1
Uncontrolled Rectiﬁer

In Fig. 1.4 the input three phase voltages are shown as:
Yellow: Vab
Light Green: Vbc
Pink: Vca
The ‘Firing Sequence’ waveform shows the instance at which a particular pair of
diodes is forward biased.
Figure 1.5 shows the proﬁle of output current when the inductance value is 0.1 H
and the ripple in the current is reduced and the current lags the DC voltage.
Figure 1.6 shows that the current rise is further delayed when the inductance
value is 1 H and the ripple in the current is almost zero forming a pure DC
waveform.
The output voltage of the rectiﬁer is expressed in terms of the input voltage as:
Vo ¼ 3 
ﬃﬃﬃ
3
p
 Vm
p
ð1:5Þ
where:
Vo
Average voltage output from the converter
Vm
Peak of the input voltage
The uncontrolled rectiﬁer topologies with equations discussed in this chapter
form the foundation for the controlled rectiﬁer discussions in the next chapter.
Rectiﬁer Conﬁgurations
7

Chapter 2
Controlled Rectiﬁer
Abstract This chapter discussed the variants of thyristor based power electronics
for different ﬁring angles and the different combinations of the load like the
resistance and the Inductance. The illustrations of the topologies with waveforms in
Simulink® are demonstrated.
Keywords Firing angle  Ripple
Introduction
In the last chapter, we studied the uncontrolled bridge rectiﬁer. The parameters for
R and L were varied and the effect of this variation on output voltage and current of
the rectiﬁer was studied. In practical applications it is required to control the voltage
and current at the DC link.
The block diagram (Fig. 2.1) represents a typical system in an industrial
application. As discussed in the previous chapter, AC voltage source from a utility
supply is rectiﬁed to DC using power electronics devices (diodes as explained
chapter) and connected to a load that requires DC voltage and current. The utility
generator generates a voltage that is not constant and varies in a certain range.
According to Eq. (1.5) in the previous chapter, a change in AC voltage would cause
a proportional change in the DC voltage.
A load in an industrial application is generally designed such that it requires a
constant DC voltage and any change in DC voltage will cause undesired behavior
of the load. Since the load and the AC utility are not controllable and the load
requires a constant DC voltage, the only way to maintain the voltage for the load
constant is to control the Power Electronics devices, such that the output from the
circuit consisting of these devices can be controlled to a value required by the load.
Such devices that can be controlled to maintain the voltage required by the load are
called ‘controlled devices’. A thyristor forms the very basic of controlled device.
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_2
9

The Thyristor Rectiﬁer
Figure 2.2 shows the three-phase Thyristor Bridge. The circuit is similar to the
diode bridge described in Chap. 1, with the diodes replaced with Thyristors. A
thyristor is a three-terminal device, somewhat similar to a junction transistor. When
a small current ﬂows into the Gate terminal, a current ﬂow is established from
anode to cathode. This is called the ON condition of the thyristor. When the AC
voltage across the device is negative, the current from anode to cathode stops. This
is called OFF condition of the thyristor. There are other techniques to have a better
control on the instance at which the thyristor turns OFF. Such techniques are called
‘Commutation techniques’, which will not be discussed in this book.
In the 360° of the sine wave of the input AC voltage, the Firing Angle is the
instance (in terms of degrees) when the device is turned ON. This instance is
typically in the positive half of the AC voltage across the device. In most literatures,
this angle is denoted by the Greek letter alpha and generally varies from 0° to 180°.
AC voltage source
from utility 
generator
AC – DCrectifier 
using Power 
electronics 
devices
Load
Fig. 2.1 Power scheme in a typical industrial application
Fig. 2.2 Three-phase thyristor bridge
10
2
Controlled Rectiﬁer

Figure 2.2 shows a three-phase thyristor bridge with an R-L load.
Table 2.1 shows the details of a design of experiments performed with the circuit
shown in Fig. 2.2 for a variation of Firing angle and the load. The variation of load
is expressed in terms of the ratio L/R, shown as ‘Time Constant’.
As mentioned in Chap. 1, an inherent phenomenon in a power electronics system
is the deviation of the output of the system alternating above and below the desired
output. This undesired phenomenon is called ‘ripple’. The table also shows the
effect of inductance and ﬁring angle on the peak to peak ripple of the output current.
A model is shown in Fig. 2.2, created using MATLAB®, and Simulink® and the
parameters mentioned in this table are measured from the Simulink® model
(Figs. 2.3, 2.4 and 2.5).
From Table 2.1, it can be seen that the DC voltage Vdc and the DC current Idc
change with the ﬁring angle alpha. The magnitude of the DC link voltage and
current reduces as the ﬁring angle increases and the ripple in DC voltage and
current increases due to the discontinuity in the current. As the inductance increases
the ripple decreases due to the increased time constant.
Mathematically, for a three-phase thyristor converter, the output voltage is
related to input voltage and the ﬁring angle, expressed as:
Vo ¼ 3  p3  ðVm=pÞ  cos a
ð2:1Þ
Table 2.1 Table for design of experiments for studying effect of ﬁring angle on the operation of
the thyristor rectiﬁer. The Discontinuous term mentioned in the table indicates the DC link current
Idc is zero
VL-L
Firing angle degree
Cosine
Vdc
Idc
Current ripple
Time constant = 0
250
0
1
336
3.36
0.48
250
30
0.866158
296
2.96
2
250
45
0.707388
249
2.49
2.5
250
59
0.515485
194
1.95
3.01
250
60
0.50046
194
0
Discontinuous
E
Firing degree
Cosine
Vdc
Idc
Current ripple
Time constant = 0.001
250
0
1
336
3.35
0.18
250
30
0.866158
296
2.915
0.7
250
45
0.707388
296
2.92
0.95
250
60
0.50046
190
1.7
1.15
250
75
0.25946
132
0.94
1.2
250
76
0.242574
0
0
Discontinuous
E
Firing degree
Cosine
Vdc
Idc
Current ripple
Time constant = 0.1
250
45
0.707388
296
2.92
0
The Thyristor Rectiﬁer
11

Fig. 2.3 The waveform for input voltage ﬁring sequence, output voltage and output current for
R = 100 Ω, L = 0 H, ﬁring angle of 45°
Fig. 2.4 The waveform for input voltage ﬁring sequence, output voltage and output current for
R = 100 Ω, L = 0.1 H, ﬁring angle of 45°
12
2
Controlled Rectiﬁer

where:
Vo
Average voltage output from the converter
Vm
Peak of the input voltage
α
Firing angle
The observations in the DoE are also further detailed in terms of the waveforms
of output voltage, output current, and the input voltage are shown in Figs. 2.3, 2.4
and 2.5.
Thus, the primary purpose of the inductance in the power circuit of the thyristor
converter is to reduce the ripple in the output voltage and current.
A typical industrial Power Electronic system consists of two major parts, i.e., the
Power circuit and the Control circuit. In this chapter the power circuit of the
thyristor rectiﬁer was explained with the DoE and instantaneous waveforms of the
input and output.
The next chapter will deal with the basics of closed loop control and the Control
circuits used in power electronics systems.
Fig. 2.5 The waveform for input voltage ﬁring sequence, output voltage and output current for
R = 100 Ω, L = 1 H, ﬁring angle of 45°
The Thyristor Rectiﬁer
13

Chapter 3
Thyristor Rectiﬁer in Closed Loop
Abstract This chapter discusses the closed-loop control system for a thyristor
bridge. It has the step response demonstrated using a thyristor-based model and the
corresponding waveforms are illustrated. This forms the basis for the next chapters
on the elaborated control design using P, I, and D parameters.
Keywords Reference  Plant  Laplace  Controller  Feedback  Steady state 
Integrator
An Introduction to Closed-Loop Control
The block diagram of Fig. 3.1 represents a control system in closed loop in terms of
Laplace transform.
The ﬁgure shows a basic block diagram for a closed-loop control system. The
purpose of a closed-loop control is to set the Output of the system equal to the
Reference input. In the literature, the control system is represented as a block
diagram with the terminology as follows:
Plant: The physical system, represented as a mathematical model. The Laplace
transform is the standard transform used for representing the physical system.
Controller: This is the mechanism that controls the control parameters such that
the output is equal to the reference input.
Feedback: The mechanism that differentiates the open-loop system from closed-
loop control system. Feedback is the mechanism that connects the scaled output
back to the input.
• R(s): Reference input represented as a Laplace Transform. Ideally, the output
should be equal to the reference at all instances
• E(s): Error. This is the difference between the reference and feedback
• G(s): Forward transfer function. This is the transfer function of the plant and the
controller in cascade
• H(s): Feedback path transfer function
• C(s): The controller output, represented as a Laplace transform
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_3
15

The blocks in the block diagram represent a mathematical Gain. Thus, the output
of each block is the multiplication of the input to the block and the gain of the
block. Thus, from the block diagram:
CðsÞ ¼ GðsÞ  EðsÞ
CðsÞ ¼ GðsÞ  RðsÞ  CðsÞ  HðsÞ
½

CðsÞ ¼ GðsÞ  RðsÞ  GðsÞ  CðsÞ  HðsÞ
CðsÞ
RðsÞ ¼ GðsÞ  RðsÞ
RðsÞ
 GðsÞ  CðsÞ  HðsÞ
RðsÞ
CðsÞ
RðsÞ  ½1 þ GðsÞ  HðsÞ ¼ GðsÞ
CðsÞ
RðsÞ ¼
GðsÞ
1 þ GðsÞ  HðsÞ
ð3:1Þ
This equation is called the ‘Closed-loop transfer function’ of the control system.
Power Circuit Explanation
Figure 3.2 shows a Simulink® model for six pulse Thyristor bridge converter with a
three-phase input voltage. The three-phase input voltages are denoted by Va, Vb, and
Vc. The six pulse thyristor bridge is denoted by block ‘Thyristor Converter’. This
block is the representation of six thyristors connected to the three-phase input
Output
Controller
Plant
Feedback
Reference Input
G (s)
H (s)
R (s)
C (s)
E (s)
Fig. 3.1 Block diagram representation of a closed-loop control system
16
3
Thyristor Rectiﬁer in Closed Loop

voltage (conﬁguration detailed in Fig. 2.2). The output of this block is DC voltage
that is connected across a motor load, denoted by a DC source, a resistor, and an
inductor in series.
Fig. 3.2 Three-phase thyristor rectiﬁer in closed loop
Fig. 3.3 VDC and LDC waveform for P–I gains (P = 100, I = 0)
Power Circuit Explanation
17

In accordance with the description of closed-loop system, the ‘plant’ here is the
thysistor converter. This plant is represented as a Simulink® block, which abstracts
the mathematical model of the block. The feedback and control blocks are repre-
sented as Laplace transform blocks.
The control parameter here is the output DC current. The block of Id_Reference is
the reference current that the converter should source to the R-L-E DC motor load
shown. This reference current is changed from initial value of 15 A to 40 Å after 50 ms.
The dynamic and steady-state response of the system is governed by the con-
troller parameters, that is, the gains of the P, I, and D controllers. The detailed study
of the effect of P, I, and D gains is carried out in the following chapters.
To get a glimpse of the effect of the P and I gains on the overall behavior of the
system, let us reduce the Integrator gain to 0, so that the controller is Proportional-
only controller.
Figure 3.3 shows the DC current of the converter against the reference. As seen
in the response, at 5 ms, the reference (Green waveform) changes from 15 to 40 Å
and the DC current (Blue waveform) also changes. But the steady-state value of the
current is 37 Å (approximate average), just below 40 Å. The difference between the
steady-state value of the current and the desired reference current is called ‘Steady
State Error’.
Now let us add the ‘integrator’ effect. The ‘I’ gain is now set to 50 and the ‘P’
gain is unchanged.
Figure 3.4 shows the DC current of the converter against the reference. As seen
in the response, at 5 ms, the reference changes from 15 to 40 Å and the DC current
Fig. 3.4 VDC and LDC waveform for P–I gains (P = 100, I = 50)
18
3
Thyristor Rectiﬁer in Closed Loop

also changes. Now, the steady-state value of the current is just about 40 Å, close to
the desired reference.
A detailed analysis of the performance of the system with a change in the P, I,
and D gains of the controller is performed in the following chapters.
Power Circuit Explanation
19

Chapter 4
Buck Converter in Open Loop
Abstract This chapter discusses the widely used power supply buck converter
topology using BUCK converter and the device used in this conﬁguration is the
MOSFET. The equations governing the open-loop system is discussed in detail and
the corresponding block diagrams, topologies, and circuit diagrams are elaborated.
Keywords BUCK  Step down  Differential  Kirchoff  Freewheel  Chopper 
Mathematical  PWM
An Introduction to Open Loop
In the previous chapters, we saw the basics of diode rectiﬁer and Thyristor rectiﬁer.
These circuits are used in industrial applications when AC power is to be converted
into DC power.
Another major application of power electronics devices is as power supplies
used in electronic devices and as charger for batteries used in industrial application.
For such applications, DC–DC converter is used. In this converter, the input is DC
voltage and the output is also a DC voltage, transformed to a value, lower or higher
than the input using switching power electronics devices like MOSFET. The power
device is switched ON and OFF at a high frequency to generate the desired output
voltage. One such DC–DC converter used in industrial application is the buck
converter also known as step down chopper.
In this chapter, we will study the basics and the closed-loop control of the buck
converter.
Figure 4.1 is the buck converter, also known as the ‘Step down chopper’. This
power circuit consists of a power switch such as a MOSFET, represented as an
arrow. This power switch is switched ON and OFF at a high switching frequency.
The behavior of this system changes based on the ON or OFF positions of the
power switch. The behavior of the buck converter can be modeled by differential
equations or the circuit when the power switch is ON or OFF.
Sample Circuit (Fig. 4.1):
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_4
21

Switch ON:
Let us consider the state when the power switch is in ON condition. This connects
the positive end of the power supply to the cathode of the diode. So, the diode D is
reverse biased. During the ON time of the switch, the DC source causes a current
i to ﬂow through the inductor, capacitor, and resistor (Fig. 4.2).
Considering the output voltage of the converter across the resistor to be Vo, apply
Kirchoff’s voltage law to the circuit:
Vdc  L di
dt  Vo ¼ 0
L di
dt ¼ Vdc  Vo
di
dt ¼ Vdc  Vo
L
ð4:1Þ
Fig. 4.1 The buck converter circuit. The arrow represents the power switch which is switched ON
and OFF at very high frequency. The direction of the arrow is the direction of ﬂow of current when
the switch is turned ON
Fig. 4.2 The buck converter
circuit when the switch is
switched ON
22
4
Buck Converter in Open Loop

Switch OFF:
Now let us consider the state when the power switch is in OFF condition. When the
switch is turned OFF, the inductor does not allow a sudden change in current. So,
effectively, the polarity of the charge on the inductor is reversed to oppose this
change in current. This causes a negative potential to develop at the cathode end of
the diode. This forward biases the diode. This causes the current to freewheel
through the diode, inductor, and the load resistor (Fig. 4.3).
Applying Kirchoff’s voltage law, the differential equation that governs the
system in the OFF time of the switch is thus:
L di
dt  Vo ¼ 0
di
dt ¼ Vo
L
ð4:2Þ
From (4.1) the change in inductor current during the ON time of the switch.
DION ¼ Vo þ Vdc
L
 TON
ð4:3Þ
From (4.2) the net change in the inductor current during the OFF time of the
switch is
DIOFF ¼ Vo
L  TOFF
ð4:4Þ
According to the inherent property of the inductor, the net current in the inductor
during the complete cycle should be zero. Thus,
DION ¼ DIOFF
ð4:5Þ
Fig. 4.3 The buck converter
circuit when the switch is
switched OFF
An Introduction to Open Loop
23

From (4.3) and (4.4):
Vo þ Vdc
L
 TON ¼ Vo
L  TOFF
ðVo þ VdcÞ  TON ¼ Vo  TOFF
) Vo TON þ TOFF
ð
Þ ¼ Vdc  TON
Vo
Vdc
¼
TON
TON þ TOFF
ð4:6Þ
The duty cycle of the power switch is deﬁned as the effective ON time of the
switch. So the duty cycle of switch is deﬁned as:
D ¼
TON
TON þ TOFF
ð4:7Þ
From (4.6) and (4.7), for the buck converter (step down chopper):
Vo
Vdc
¼ D
or
Vo ¼ D  Vdc
ð4:8Þ
From the equations, it is obvious that duty cycle (D) is always less than 1 and the
maximum value is 1 (Switch is ON for 100 % of the time).
Thus from (4.8) it is clear that
Vo\Vdc
ð4:9Þ
Thus, the circuit of the Buck converter produces an average output voltage that
is less than the input voltage.
Mathematical Modeling of the Power Converter
Equations (4.1) and (4.2) are the very basic power equations that give the infor-
mation about the buck converter.
Combining Eqs. (4.1) and (4.2), the generic equation for the rate of change of
induction current is:
di
dt ¼ x  Vin  Vo
L
ð4:10Þ
where x = 1 when switch is ON and x = 0 when switch is OFF.
24
4
Buck Converter in Open Loop

The current in the circuit can be integrated over the duty cycle as:
i ¼
Z di
dt dt
ð4:11Þ
Current capacitor C is given by *
i ¼ C  dVo
dt :
ð4:12Þ
Thus
Vo ¼ 1
C 
Z
ic dt
ð4:13Þ
Applying Kirchoff’s current law:
ic ¼ iL  i0
ð4:14Þ
where iL is the current inductor, i0 = output current in load, and ic is the capacitor
current.
Also,
i0 ¼ Vo
R :
ð4:15Þ
Thus,
ic ¼ iL  Vo
R
ð4:16Þ
Equations (4.7), (4.9), (4.10), and (4.11) can be combined together to develop
the mathematical model the buck converter (Fig. 4.4):
Setting Vin to 100 V and duty cycle at 80 %, the output should be
Vo = D * Vin = 0.8 * 100 = 80 V.
The Control of the Buck Converter
The buck converter is used in different applications that involve conversion of a
higher voltage to a lower voltage DC, such as small SMPS power supplies, inverter
batteries, etc.
Mathematical Modeling of the Power Converter
25

Assuming that such buck converter is used for charging a battery in UPS, the input
to the buck converter will be a DC voltage, coming from an uncontrolled full bridge
diode rectiﬁer. The input to the diode rectiﬁer will be from a utility power station.
Since the supply from utility power is not a steady supply, there will be varia-
tions in the input AC for the rectiﬁer. This would change the DC input to the buck
converter. Thus, according to Eq. (4.6), the output voltage of the converter will
change according to the conﬁgured duty cycle. This would change the charging
voltage of the battery and may damage the battery, even resulting in an explosion.
Thus, it is required to maintain the output voltage of the buck converter constant,
even if the input voltage from the utility power changes.
One way to maintain the charging voltage to the battery constant is to connect a
variable tap transformer at the input of the diode bridge and monitor the voltage
from utility. If there is a rise in the utility voltage, the transformer turn ratio is
manually reduced to maintain the input voltage to the bridge rectiﬁer the same as
before the increase in utility voltage. Similarly, the turn ratio is increased if there is
a fall in the utility voltage. Such a manual control is called Open-Loop Control. An
open-loop control system does not involve any automatic feedback mechanism.
Another mechanism that maintains the output voltage of the buck converter
constant for any changes in the input involves a self-adjusting system, where the
controlled parameter is changed automatically for changes in the input, using a
feedback mechanism. Such control is called Closed-Loop Control and is the most
widely used control mechanism in all practical systems.
Voltage Mode Control of Buck Converter
In the DC–DC buck converter a DC voltage at one level is converted into a DC
voltage at another level by switching a power switch like a MOSFET. Such
switching mechanism is called Pulse Width Modulation (PWM). In such system, the
frequency of the switching is constant, but duty cycle is variable.
Fig. 4.4 Mathematical model of the open-loop buck converter
26
4
Buck Converter in Open Loop

Consider the buck converter circuit modeled above with the parameters L, C, and
R set to the values shown in the ﬁgure. This is an open-loop model of the converter.
It can be seen from Eq. (4.6) that the output voltage is proportional to the input and
the proportionality factor is the duty cycle D.
Thus, due to change in the utility supply, if the DC voltage input Vin to the
converter changes from 100 to 150 V, the output can be maintained constant to
80 V if the duty cycle is changed from 80 % to 53.33 %.
Also, due to change in the utility supply, if the DC voltage input Vin to the
converter changes from 100 to 90 V, the output can be maintained constant to 80 V
if the duty cycle is changed from 80 to 88.88 %.
So now we have a parameter in duty cycle that can be changed to maintain the
output voltage of the buck converter constant for changes in the input voltage. This
parameter is called control parameter.
The desired voltage at output of the converter is 80 V. The desired value is
known as the reference. Under ideal conditions, when the output is equal to the
reference, the system is said to be in a steady-state condition.
When the input or load on the converter undergoes a change, the output voltage
tends to change and follow the change in the input. This creates a difference
between the reference and the output. This difference is called the error.
In the next chapter, we will see how the control parameter is automatically
adjusted using a feedback mechanism.
Voltage Mode Control of Buck Converter
27

Chapter 5
Buck Converter in Closed Loop
Abstract This chapter discusses the closed-loop control of the open loop BUCK
converter discussed in the earlier chapter. The closed-loop design is illustrated with
the Simulink® model and the corresponding waveforms for different control
parameters of proportional, integral, and differential gains.
Keywords PID  PI  PWM  UPS  Instability
An Introduction to Closed Loop
In the previous chapter, we saw the basics of the buck converter and converted the
power circuit of the buck converter into mathematical equations using the differ-
ential equations governing the system.
In this chapter, we will study the closed-loop control of the buck converter
(Fig. 5.1).
A scaled down output voltage is used as a Feedback. This is the closed-loop
model of buck converter with the PID controller. The reference voltage is 80 V and
input voltage is variable.
The prime purpose of the so-called ‘PID controller’ is to adjust the duty cycle of
the power switch such that for changes in input voltage and load, the output voltage
is controlled to 80 V.
A study of the effect of the gains of the P, I, and D controllers on the overall
dynamics of the closed-loop system is described below.
In order to maintain the output voltage constant, the controller should adjust the
duty cycle of the power switch when the input voltage or the load changes. This is
achieved by the PI controller. A usual challenge in control engineering is to decide
upon the starting gains for the P and I controller, which can be changed later to
ﬁne-tune the system performance.
The difference between the reference (80 V) and the feedback is called ‘Error’.
For the DC–DC converter, this error is a DC value. To generate a PWM pulse for
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_5
29

the power switch, this error is compared with a saw-tooth voltage pulse, as indi-
cated by the ‘Repeating Sequence’ block in Fig. 5.1, using an electronic compar-
ator action. In an analog PWM controller chip, such saw-tooth voltage is generated
at ﬁxed amplitude. For demonstration purpose, the peak of this voltage in the
simulation is assumed to be 50.
Since the comparator will give a zero output for any ampliﬁed error value above
50, the gains of the PID controller should be such that the ampliﬁed error is below
50. This is the starting point to decide the controller gains.
Let us start with a very small proportional (P) gain of 0.05 and the I and D gains
as zero (Fig. 5.2).
Experimentally, it is seen that for this gain value, the ‘error’ is 72 V, and the
output voltage is nearly 8 V DC, which is far off from the reference of 80 V. This is
expected, because the ampliﬁed error after multiplication by the P gain of 0.05 is
3.63 and when compared with a saw-tooth voltage of 50 would result in very less
ON time for the switch and thus, very low duty cycle. Thus, intuitively, it can be
seen that if the P gain is increased, the ON time of the switch would increase,
resulting in an output that is close to the reference of 80 V.
Now, if the P gain is set to a sufﬁciently high value, say 100, it is expected that
we would reach the reference of 80 V without any further adjustments in the gains.
Figure 5.3 shows the output voltage of the system with a P gain of 100 and the
I and D unchanged at 0.
From Fig. 5.3, it is seen that the output is close to the reference of 80 V, but there
is a large ripple in the voltage of close to 6 V. Such ripple is an undesired effect of
the control system. This phenomenon is seen because a very large P gain causes the
DC input of the comparator to momentarily shoot above 50 and then returns below
Fig. 5.1 The buck converter in voltage mode control
30
5
Buck Converter in Closed Loop

Fig. 5.2 The buck converter in voltage mode control. For P = 0.05, I = 0, D = 0, the ‘Error’
between the reference (80 V) and actual voltage is *72 V, thus the output voltage is 8 V, far off
from the desired 80 V reference
Fig. 5.3 Output DC voltage of the buck converter. A large ripple is seen in the output voltage for
a signiﬁcantly large P gain of Kp = 100, Ki = 0, Kd = 0
An Introduction to Closed Loop
31

50 to a very low value due to the closed-loop control action. So, there is a con-
tinuous change from very less to very high duty cycle, thus causing a ripple in the
output voltage.
From this experimentation it can be seen that a very low P gain, below 10 causes
a very large error and deviation from the reference voltage and a large P gain of
above 50 causes a large ripple in the output voltage. Thus, a starting gain of 10 for
the P controller is a reasonable starting point for the control system (Fig. 5.4).
Let us assume that the closed-loop system consists only of a proportional ‘P’
controller. This means that the gains for the ‘I’ and ‘D’ controller are zero as shown
in the above ﬁgure. Let us study the response of the controller with only ‘P’
controller.
Figure 5.5 shows the Simulink® oscilloscope for output voltage of the buck
converter with only the proportional controller. As seen in this ﬁgure, for reference
voltage of 80 V, the output voltage with the ‘P’ controller stabilizes at about 76 V.
This difference of 4 volts from the reference is a typical behavior of the ‘P’ con-
troller. This difference is called the ‘Steady-State Error’ of the system.
The steady-state error is a phenomenon that may be acceptable for some systems
but may not be acceptable for other systems. For example, in an application like a
UPS battery charger, a difference of a few volts from the desired reference may
cause the system to draw excess current causing overheating of the battery.
In systems where the steady-state error is not acceptable, this ‘error’ between
actual output and reference can be eliminated completely by integrating the dif-
ference between reference and feedback over a period of time. This integration
effect in the closed-loop parlance is called the ‘PI controller’. The effect of the PI
controller is described below.
Fig. 5.4 The buck converter in voltage mode control for Kp = 10, Ki = 0, Kd = 0
32
5
Buck Converter in Closed Loop

Figure 5.6 shows the PI controller where the proportional gain is 10 and integral
gain is 3. The reference is set to 80 V and input is variable.
The response of the PI controller on the output voltage is shown in Fig. 5.7.
Fig. 5.5 Simulink oscilloscope for output voltage. For Kp = 100, Ki = 0, Kd = 0, there is a steady-
state error of 4 V in the output voltage of the converter
Fig. 5.6 The buck converter in voltage mode control for Kp = 10, Ki = 3, Kd = 0
An Introduction to Closed Loop
33

As seen in the Simulink® oscilloscope, the output voltage of the converter after
about 10 s reaches 80 V. Effectively, the ‘error’ between reference and feedback
output voltage is integrated to zero and the output voltage reaches the reference
voltage of 80 V. Thus, in effect, the PI controller in the closed loop will reduce the
steady-state error to zero.
Another obvious effect of the PI controller is that the response of the system is
slower than that with only P controller. Thus, whereas the output voltage reaches
the ﬁnal value of 76 V in less than 200 ms with P controller, it takes about 9 s for
the voltage to reach the ﬁnal value of 80 V with the PI controller.
Let us take a closer look at the transient behavior of the PI controller (Fig. 5.8).
As seen in the above plot of the output voltage, just when the buck converter is
started, the voltage goes through an overshoot and undershoots from the reference.
Shown below is the zoomed voltage waveform in the initial 30 ms.
From Fig. 5.9 it can be seen that the initial overshoot is 110 V and takes about
20 ms before the voltage reaches the ﬁnal value of 76 V. This time is called the
Settling Time. In some applications, the settling time of 20 ms is too much.
In order to reduce the settling time, the error (difference between reference and
feedback voltage) is differentiated over a period of time. This effect is called the
differential controller or the D controller. This differentiation action has the effect
of reducing the settling time, thus making the dynamic response of the system
faster. Let us introduce a very small ‘D controller’ in out buck converter controller
and see the effect.
Fig. 5.7 Simulink® oscilloscope for output voltage. For Kp = 100, Ki = 3, Kd = 0, the steady-state
error in the output voltage progressively decreases and becomes zero after *9 s
34
5
Buck Converter in Closed Loop

120
Output Voltage of Buck Converter
100
80
60
40
20
00
Time offset:  0
1
2
3
4
5
6
7
8
9
10
Fig. 5.8 Output voltage of the converter. Plot of the output voltage of the converter in the
conditions, same as in Fig. 5.4. The transience in the system is more pronounced at start-up, as
shown in the marked section in the plot
Fig. 5.9 Plot of the output voltage of the converter with the initial 25 ms zoomed
An Introduction to Closed Loop
35

Figure 5.10 shows the closed-loop buck converter with the P gain of 10, I gain of
3 and a D gain of 0.0001, thus in effect forming the so-called ‘PID controller’.
Figure 5.11 shows the output voltage waveform with the PID controller. Let us
zoom again in the initial 30 ms region.
Fig. 5.10 The buck converter in voltage mode control for Kp = 10, Ki = 3, Kd = 0.0001
Fig. 5.11 Plot of the output voltage of the converter with Kp = 10, Ki = 3, Kd = 0.0001. Due to the
integrating effect of the I controller, the steady-state error progressively decreases and also the
initial transient response is improved, as shown in the next plot.
36
5
Buck Converter in Closed Loop

From Fig. 5.12 it can be seen that the initial overshoot is 105 V and it takes
about 12 ms before initial transience is reduced and voltage starts reaching toward
the ﬁnal value of 80 V. Thus, by introducing the differentiation action in the loop,
the initial dynamic response is improved and settling time is reduced from 20 to
12 ms.
However, the ‘D’ controller may further introduce instability in the system
depending on the plant to be controlled. For this reason, generally, the differential
controller is not required and a ‘PI control’ should be enough to stabilize the
system.
Thus, it can be seen that a stable control system that meets the speciﬁed design
criterion can be designed by properly adjusting the P, I and D gains of the
controller.
Fig. 5.12 Plot of the output voltage of the converter initial 20 ms zoomed. It is evident that the
voltage stabilizes faster, in about 14 ms, compared to *25 ms as shown in Fig. 5.8, without the
D controller
An Introduction to Closed Loop
37

Chapter 6
Design of Embedded Control
Abstract This chapter discusses the implementation of the analog controller dis-
cussed in the earlier chapter as a digital controller. The conversion is mathematically
represented and translated into implementable code for microprocessors.
Keywords Analog  Digital  Discrete  Intelligence  Embedded  Sampling 
z-transform
Introduction
In Chap. 5, we saw a simple controller with P, I, and D controllers in which the
gains of the P, I, and D controllers are designed so as to achieve the speciﬁed design
criterion for the system. This example is derived from applications based on the
MATLAB® and Simulink® technical computing environment-based modeling. In
this chapter, we will see how such controller is designed in a physical system. The
control action, as mentioned in the previous chapter can be achieved by either an
Analog or a Digital controller.
With the evolution of integrated circuits (ICs), the initial control systems were
developed using Analog controllers. An analog controller typically is an IC that
implements the P, I, and D control action along with analog interface devices that
are linear ampliﬁers.
Analog and Digital Control
Figure 6.1 shows the block diagram representation of the buck converter explained
in Chap. 5 when the controller is Analog. The analog controller shown here is a part
of an IC. The controlled variable (output voltage) is connected to a sensor that
scales down the high voltage from the plant with IC-speciﬁc low voltage. The
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_6
39

output voltage is generated according to Equation Vo = D * Vin, where D is the duty
cycle that is changed by the controller to get the output close to the reference
voltage.
In the Analog controller shown here, any change in the output will be sensed by
the sensor and connected to the feedback instantaneously, thus adjusting the duty
cycle. Thus, intuitively, the Analog controller is fast and good enough to meet our
design criterion. However, the analog controller like the one shown here suffers
from certain drawbacks.
Consider for example if you have to change the P, I, or D controller gains for
tuning the controller. For changing the gains, some resistor in the analog circuit
needs to be de-soldered and replaced with a new resistor to get a proper gain. This
involves signiﬁcant skills, time, and resources. Also, since resistors are available
only for certain values, an exact gain will be difﬁcult to achieve.
Consider another case when the controller, instead of a simple PID controller is a
complicated third-order transfer function. To implement such complex transfer
function, a large circuit consisting of combinations of ICs, operational ampliﬁers,
and many discrete electronics components will be required. This will require a
signiﬁcant space on the circuit board and will add to the cost of the system.
The drawbacks mentioned above can be overcome using a digital controller
instead of the traditional analog controller.
With the progress and advancement in computer technology, it has become
possible to build in intelligence in an industrial system using microcontrollers and
high speed Digital Signal Processors (DSPs). An electronic circuit with a built-in
intelligence using a microcontroller or DSP along with analog and digital interface
circuits and an on-chip system-speciﬁc embedded software (ﬁrmware) is called as
an ‘Embedded System’.
Figure 6.2 shows the block diagram representation of the Buck converter with a
Digital controller instead of the Analog controller. The Digital controller implies
that the controller is developed as embedded software instead of the traditional
method of discrete electronic circuit components.
The embedded software is developed in a microcontroller. Since the micro-
controller, which is a small computer, will need all the information in the computer
Controller
(Analog)
Plant
(Buck Converter)
Sensor
Controlled variable (Voltage)
Reference (Setpoint) 
Voltage
Fig. 6.1 Buck converter block diagram with analog controller
40
6
Design of Embedded Control

speciﬁc (digital) format, the output from the sensor is converted from analog
(continuous) into digital (sampled). This transformation of data is performed by the
semiconductor device called Analog to Digital Converter. In the process of A to D
conversion, the values of the continuous signal are measured at discrete intervals.
Each of these measurements is called as sample and the process is called sampling.
The interval between successive samples is called sampling time (Ts) and the
inverse of the sampling time is called sampling frequency.
In certain industrial systems, an actuator may be required to drive the controlled
output. For example, if the controlled variable is the precision position of a Robotic
arm, the motor controlling the position of the arm requires voltage of a particular
magnitude and for a particular time to position the robot arm. In such case, the
digital output of the controller needs to be converted into continuous (Analog)
voltage. This is performed by the semiconductor device called Digital to Analog
Converter.
Developing an Embedded Controller
In Chap. 5 we saw the modeling of the DC–DC buck converter using differential
equations and converting these equations into Simulink® block-based model. Laplace
transform is the best and the most popular method of such type of analog modeling.
Electronic circuits that implement the PID controller can be mathematically modeled
using Laplace transform. Now, we will see the basics of designing a digital controller
that is converting the controller logic into a piece of embedded software.
The Laplace transform forms the basis of modeling any physical system. However,
this transform is fundamentally based on the assumption that the system to be
modeled is continuous (analog). To design a digital controller, the system equations
Fig. 6.2 Buck converter block diagram with digital controller
Analog and Digital Control
41

based on Laplace transform need to be further transformed into a discrete (digital)
domain. Such transform that helps to convert the Laplace transform based system
model equations into sample-based (digital) equations is the z-transform.
Let us take the example of converting a transfer function from Laplace to
z transform, such that the transfer function can be implemented as embedded
software.
Figure 6.3 shows a simple ﬁrst-order low pass R-C ﬁlter. In terms of Laplace
transform, the transfer function of this circuit is expressed as:
Vo
Vin
¼
1
Cs
R þ 1
Cs
Vo
Vin
¼
1
RC
s þ 1
RC
ð6:1Þ
The Laplace transform is used to analyze signals in continuous time systems.
The discrete–time equivalent of the Laplace transform is the z-transform. The
Laplace transform plane or the so called s-plane is related to the so called z-plane by
the equation:
z ¼ est
ð6:2Þ
Converting this exponential into Taylor’s series and rearranging the equation,
the relation between the ‘s’ domain and ‘z’ domain can be expressed in the simplest
form as:
s ¼ 1  z1
Ts
ð6:3Þ
where Ts is the sampling time.
Fig. 6.3 First-order low pass
ﬁlter
42
6
Design of Embedded Control

From Eqs. (6.1) and (6.3),
Vo
Vin
¼
1
RC
1z1
Ts
þ 1
RC
Denoting the RC time constant by T = RC
Vo
Vin
¼
1
T
1z1
Ts
þ 1
T
Solving this equation further,
Vo  T þ Ts  T  z1


¼ Ts  Vin
Rearranging further,
Vo ¼
T
Ts þ T Voz1 þ
Ts
Ts þ T Vin
ð6:4Þ
The z-transform is the discrete-time equivalent of the Laplace transform. From
Eq. (6.2), the ‘z’ operator represents a single sample. Thus, the present sample of
the signal, multiplied with z, represents the next sample and the present sample
multiplied with z1 represents the previous sample of the signal. Thus, if the nth
sample (present sample) of the input and output voltage of the RC ﬁrst-order circuit
are denoted by Vin(n) and Vo(n), respectively, and the previous samples of the
signals are denoted by Vin(n −1) and Vo(n −1), respectively, then in terms of the ‘z’
operator, Voðn  1Þ ¼ Vo  z1 and Vinðn  1Þ ¼ Vin  z1.
Thus Eq. 6.4 can be represented in terms of the samples as:
Vo n
ð Þ ¼ A  Vo n  1
ð
Þ þ B  VinðnÞ
ð6:5Þ
where
A ¼
T
Ts þ T
and
B ¼
Ts
Ts þ T
Equation of the form (6.5) is called a difference equation.
This difference equation is a simpliﬁed digital representation of the ﬁrst order
RC ﬁlter circuit. The difference equation can be used to convert this system into the
embedded software. Consider that the sampled input voltage is available in the
microcontroller in the form of a C code variable as an array Vin[SIZE] and the
sampled output is available as an array Vo[SIZE]. A C code that implements this
ﬁrst-order low pass ﬁlter will look like this:
Developing an Embedded Controller
43

For (i=0; i<SIZE; i++)
{
Vo[i] = A * Vo[i−1] + B * Vin[i];
}
Thus, starting from an analog circuit shown in Eq. (6.3), we have written a C
code that implements the low pass ﬁlter action.
In a practical industrial control system, a similar approach is followed to convert
the transfer function of the controller available in Laplace transform equation for-
mat into z-transform, reducing the z-domain equation to difference equation and
then converting the difference equation into embedded software code.
A Brief Introduction to Model-Based Design
In this chapter we saw how the development of control systems is simpliﬁed with
digital control using embedded control processors. Due to the advent of embedded
systems and high speed microprocessors, the development time for industrial
control systems has reduced. However, development of embedded control systems
requires talent with expertise not only in the engineering aspects of the controlled
systems but also in electronics and embedded software development.
Industries are under pressure to reduce the development time and optimize costs
while still using advanced control systems and being innovative. Model-based
design is an approach that helps industry by facilitating the development of
advanced control systems faster.
In the Model-Based Design approach, graphical tools are used for design of
complex control systems. MATLAB® and dSpace® are some such software that
offer model-based development tools.
The primary steps in Model-Based Development are:
1. Modeling the plant
2. Modeling and designing the controller
3. Simulating and optimizing the simulation of the combined plant and controller
together
4. Prototyping and validation of the prototype systems
The model-based development approach is different from the traditional design
approach. Using this approach, engineers can design advanced control systems
using graphical simulation software tools. Using this approach, the engineering
skills and resources can be used for design and optimization of advanced control
systems, prototyping and veriﬁcation. The embedded software for the controller is
automatically generated by the model-based design tools, thus facilitating rapid
prototyping. More information about Model-Based Design can be found in the
referenced literature at the end of this book.
44
6
Design of Embedded Control

Chapter 7
Case Study of an Embedded Control
System Design
Abstract This chapter has a case study of control systems for power electronics for
a DC motor. The application is developed with a power device, a speed mea-
surement sensor, isolation between control and power electronics, and the control
algorithm. All the mentioned subsystems are applied in the system design and the
schematic of the system is depicted.
Keywords Hall effect  Opto coupler  Schematic  Layout  ATtiny2313
Introduction
The electric drive systems used in many industrial applications require higher
performance, reliability, and variable speed for ease of controllability. The speed
control of DC motor is crucial in applications where precision and protection are of
importance. The purpose of a motor speed controller is to take a signal representing
the required speed and to drive a motor at that speed. Microcontrollers can provide
easy control of a DC motor. Microcontroller-based speed control systems consist of
electronic component, microcontroller, and the LCD. In this study, implementation
of speed control of DC motor fed by a DC chopper has been investigated. The
chopper is driven by a high frequency PWM signal. Controlling the PWM duty
cycle is equivalent to controlling the motor terminal voltage, which in turn adjusts
the motor speed. In this work, development of hardware and software of the closed-
loop DC motor speed control system have been explained and illustrated. The
objective is to design a system with constant speed at any load condition. This
means the motor will run at a ﬁxed speed instead of varying with amount of load.
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3_7
45

Application Overview
Brushed DC (Direct Current) motors are most commonly used in easy to drive,
variable speed, and high start-up torque applications. They are available in a wide
range of power from large horsepower to fractional horsepower. The speed and
torque of the motor depend on the strength of the magnetic ﬁeld generated by the
energized windings of the motor, which depend on the current through them.
Therefore adjusting the voltage to the motor (and current) will change the motor
speed. In this project, speed control is based on generating and varying a PWM
signal by the ATtiny2313 microcontroller.
The block diagram in Fig. 7.1 depicts all the subsystems in a motor speed control
system.
The speed is generally measured using opto interrupters or Hall effect sensors.
For low cost applications opto interrupters are used, but their reliability and life are
low. Meanwhile Hall effect sensors are more reliable with higher life and higher
cost. Hall effect sensors are transducers that measure ﬂux and convert it into a
voltage. They are placed to measure the rotor position which in turn gives the speed
of the machine.
Measurement of Speed of the Motor
Hall Effect Sensor
A Hall sensor has been used to measure the speed of motor. The sensor gives a
pulse every time a magnetic ﬁeld passes through it. It requires signal conditioning
to make the output usable for most applications which would be an ampliﬁer and a
compensation circuit.
Figure 7.2 shows a typical Hall effect sensor application circuit.
The Hall sensor has to be mounted in a way to sense the magnetic ﬁeld of the
rotor poles. The output of the sensor after ampliﬁcation is connected to the
microcontroller interrupt. Depending on the number of pulses in a given time
period, the calculations are carried out to estimate the speed of the motor.
Fig. 7.1 Speed control of DC motor using PWM technique with Hall effect sensor
46
7
Case Study of an Embedded Control System Design

Opto Coupler
An opto coupler is a simple device which consists of a phototransistor and a LED
inside the same package.
The opto coupler used in our circuit is MCT2E.
This device is extremely important in a power electronics system to isolate the
control system from the power devices. The primary side of the circuit has a diode
and the secondary has a transistor. The diode is a light emitting diode and the light
is used as the base current for the transistor. The transistor switching on powers up
the power electronics circuit and the current passes through the high current
equipment. This high current equipment could be a 12 V motor or a power device
like a MOSFET whose gate is connected to this transistor.
Figure 7.3 shows the opto coupler MCT2E pin out diagram.
This opto controller photodiode is switched at PWM frequency from the mi-
crocontroller and based on the duty cycle, the power output to the devices is
controlled. The microcontroller output is generally at 5 V with a duty cycle from 0
to 100 %.
The isolation provided by the opto coupler keeps the ATtiny2313 chip is safe
from destruction.
Fig. 7.2 Hall effect sensor
Fig. 7.3 Opto coupler
MCT2E
Measurement of Speed of the Motor
47

The opto interrupter works on the same principle of primary and secondary, the
only difference being that the primary signal is kept on for the LED and the path of
the light is interrupted by the interrupter simulating the magnets and hence the
transistor switches ON/OFF. These signals will determine the speed of the motor.
Controlling the Speed with PWM
Adjusting the drive voltage to the motor would control the speed of the motor. The
voltage applied to the armature of the motor can be changed by changing the duty
cycle of the power switch (MOSFET). The higher the average duty cycle the higher
the speed and vice versa.
The controlled parameter in this control system is the motor speed. The desired
speed of the motor is set as the control set-point and the feedback for speed is taken
from the speed sensor as described in the previous sections.
When there is an increased load on the motor, the speed of the motor will tend to
fall. Based on the speed feedback from the speed sensor, the PWM duty cycle will
be increased by the control system which increases the voltage to the armature,
which in turn will increase the speed. Thus, the feedback control system will act in
closed loop to get the motor speed to the desired set-point.
Subsystem Design
Figure 7.4 is the opto coupler internal and the PWM pulse generated by the AT-
tiny2313 microcontroller is connected to this Pin 1 of this opto coupler.
Fig. 7.4 Opto coupler details
48
7
Case Study of an Embedded Control System Design

Figure 7.5 shows the pin out diagram of the ATtiny2313.
In this scheme, the 5 V signal from microcontroller is connected to the LED side
of the opto coupler. The collector of the transistor on the Opto coupler is connected
to 12 V DC. When the signal from the microcontroller goes logic High (5 V), the
transistor is turned ON, which connects the 12 V DC supply to the armature of the
motor and also to the base of the MOSFET. This will turn the MOSFET ON and the
12 V DC will be connected across the armature of the motor. Thus, the 5 V logic
signal from the microcontroller is converted to 12 V for the motor.
The output of the Hall effect sensor is a pulse. When the magnetic north pole of
the magnet comes in proximity to the Hall effect sensor the output of the Hall effect
sensor becomes low. (Default output state of the Hall effect sensor is high).
The measured speed is displayed on the hyperterminal of the PC. This has been
achieved by interfacing ATtiny2313 with PC using USART.
The system schematic with the MOSFET, Opto Coupler, and the Hall effect
sensors is depicted in Fig. 7.6.
Two peripheral interfaces of the microcontroller are used in our scheme.
1. The external interrupt (INT1) of the microcontroller is connected to the output
of the Hall effect sensor which is a pulse. On the rising edge of the signal on this
pin, which is on every pulse from the Hall effect sensor, an interrupt service
routine (ISR) is called. The PI controller is implemented in this ISR function.
2. PWM pin of the microcontroller is connected to the diode side of the opto
coupler. As described in the section, the duty cycle required for the MOSFET
will be calculated based on the difference between set-point speed and actual
speed (in terms of counts as calculated in the ISR).
Fig. 7.5 Pin out of ATtiny2313
Subsystem Design
49

PCB Layout for the System
As seen in the layout diagram in Fig. 7.7, POWER connector is connected to an
external DC (12 V) supply.
The connector marked USART is the Universal Synchronous and Asynchronous
Receiver Transmitter. This is the serial communication feature of the microcon-
troller and the chip MAX232 is used for interfacing the USART from microcon-
troller a PC. In our scheme, the USART is used for monitoring the actual speed of
the motor on a PC.
In our scheme, the sampling rate for speed is 20 μs. In the ISR described above,
the speed set-point is compared with the actual speed and the difference between the
desired and actual speed is called error.
Fig. 7.6 System schematic
50
7
Case Study of an Embedded Control System Design

The PI controller is implemented in the ISR. The preliminary C code for the PI
controller is given below for reference:
error ¼ setpoint speed  measured speed;
integral ¼ integral þ error  DeltaT;
output ¼ kp  error þ ki  integral;
where
kp
is the proportional gain
ki
is the integral gain
DeltaT
is the sampling time
The variable output is used for calculating the duty cycle of PWM for the
MOSFET.
Conclusion
This chapter detailed the design of a closed-loop control of a DC motor using
microcontroller ATtiny2313, a sensing device based on the Hall effect and the opto
coupler, control of PWM duty cycle, and the power switch IRF640, thus giving the
reader a complete experience on control system for power electronics application.
The simulations of the control system in the earlier chapters using MATLAB® can
be used as a starting point to develop these applications from a virtual prototyping
perspective, thus enabling the engineer to reduce cost and iterations during the
hardware implementation stage. The engineer can experiment different control
algorithms based on the hardware platform described here.
Fig. 7.7 PCB layout
PCB Layout for the System
51

References
1. Mohan N, Undeland T, Robbins W (2003) Power electronics converters, applications and design.
ISBN 9814-12-692-6
2. Ramamoorty M (1991) An Introduction to thyristors and their applications. ISBN 81-85336-67-9
3. All the simulation models are developed using SimPowerSystems ToolBox from Math Works®
© The Author(s) 2015
M. Patil and P. Rodey, Control Systems for Power Electronics,
SpringerBriefs in Applied Sciences and Technology,
DOI 10.1007/978-81-322-2328-3
53

