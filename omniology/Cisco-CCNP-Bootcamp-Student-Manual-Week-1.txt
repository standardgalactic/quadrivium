CCNP™ CERTIFICATION
BOOT CAMP
STUDENT MANUAL
WEEK 1
   
   
CPC1-STMN-0054A
 
Wave Technologies International, Inc. is an independent entity from Cisco Systems, Inc. and is not affiliated with
Cisco Systems, Inc. in any manner.  This study guide and/or material is not sponsored by, endorsed by, or affiliated
with Cisco Systems, Inc.  Cisco®, Cisco Systems®, CCDA™, CCNA™, CCDP™, CCNP™, CCIE™, CCSI™,
the Cisco Systems logo and the CCIE logo are trademarks or registered trademarks of Cisco Systems, Inc. in the
United States and certain other countries.  All other trademarks are trademarks of their respective owners.

CCNP™ Certification Boot Camp Student Manual
Week 1
CPC1-STMN-0054A
©1988-2000 Wave Technologies International, Inc., 
a Thomson Learning company.  
Thomson Learning™ is a trademark used herein under license. 
All rights reserved.
Printed in the United States of America.  No part of this book may be used or reproduced in
any form or by any means, or stored in a database or retrieval system, without prior written
permission of the publisher.  Making copies of any part of this book for any purpose other than
your own personal use is a violation of United States copyright laws.  For information, contact
Wave Technologies International, Inc., 10845 Olive Blvd., Suite 250, St. Louis, Missouri
63141.
This book is sold as is, without warranty of any kind, either express or implied, respecting the
contents of this book, including, but not limited to, implied warranties for the book’s quality,
performance, merchantability, or fitness for any particular purpose.  Neither Wave
Technologies International, Inc., nor its dealers or distributors shall be liable to the purchaser
or any other person or entity with respect to any liability, loss, or damage caused or alleged to
be caused directly or indirectly by this book.  
Wave Technologies International, Inc. is an independent entity from Cisco Systems, Inc. and
is not affiliated with Cisco Systems, Inc. in any manner.  This study guide and/or material is
not sponsored by, endorsed by, or affiliated with Cisco Systems, Inc.  Cisco®, Cisco Systems®,
CCDA™, CCNA™, CCDP™, CCNP™, CCIE™, CCSI™, the Cisco Systems logo and
the CCIE logo are trademarks or registered trademarks of Cisco Systems, Inc. in the United
States and certain other countries.  All other trademarks are trademarks of their respective
owners.
Trademarks
Trademarks and registered trademarks of products mentioned in this book are held by the
companies producing them.  Use of a term in this book should not be regarded as affecting the
validity of any trademark or service mark.
The Wave logo is a registered trademark of Wave Technologies International, Inc., St. Louis,
Missouri.
Copyrights of any screen captures in this book are the property of the software’s manufacturer.
Mention of any products in this book in no way constitutes an endorsement by Wave
Technologies International, Inc.
10  9  8  7  6  5  4  3  2  1

B O O T  C A M P
TABLE OF CONTENTS
Table of Contents    iii
The Boot Camp Schedule
1
CCNP™ Certification Boot Camp Schedule—Week 1 ................................................1
Unit 1—CCNP™ Certification Exam Criteria Matrix
3
Exam 640-503: Routing ...............................................................................................3
Exam 640-504: Switching...........................................................................................10
Unit 2—Routing Presentation
21
Unit 3—Switching Presentation
159
Unit 4—Routing and Switching Labs
289
Overview ...................................................................................................................289
IP Addresses for Routing and Switching Labs ............................................................290
Lab 1: OSPF.............................................................................................................293
Lab 2: EIGRP...........................................................................................................295
Lab 3: BGP...............................................................................................................297
Lab 4: VLANs...........................................................................................................299
Lab 5: Trunking .......................................................................................................305
Unit 5—Routing and Switching Labs–Network Diagrams
315
Overview ...................................................................................................................315
Lab 1: OSPF.............................................................................................................316
Lab 2: EIGRP...........................................................................................................317
Lab 3: BGP...............................................................................................................318
Lab 4: VLANs...........................................................................................................319
Lab 5: Trunking .......................................................................................................320
Unit 6—CCNP™ Certification Test-Taking Tips
321
Test Tips for the CCNP™ Exams.............................................................................321

iv    Table of Contents

B O O T  C A M P
The Boot Camp Schedule    1
THE BOOT CAMP SCHEDULE
CCNP™ CER T IFI CATION  BO OT CAMP SCHE DUL E—
WE EK  1
Day 1
Routing
Day 2
Routing
8:00 - 12:00
PM
Introductions, Expectations, and Outline of Boot Camp
Routing Principles
Extending IP Addresses
Prefix Routing and VLSM
12:00 -
5:00
PM
Configuring OSPF in a Single Area
Challenge! Questions
Lab 1:  OSPF
Interconnecting Multiple OSPF Areas
Configuring EIGRP
Challenge! Questions
IT Skills Obstacle Course
 8:00 - 12:00
PM
Configuring Basic Border Gateway Protocol
Implementing BGP in Scalable Networks
Lab 2:  EIGRP
12:00 -
 5:00
PM
Challenge! Questions
IT Skills Obstacle Course:  Tire Run
Optimizing Routing Update Operations
IT Skills Obstacle Course:  Target Practice
Lab 3:  BGP

2    The Boot Camp Schedule
Day 3
Routing
Day 4
Switching
Day 5
Switching
 8:00 - 12:00
PM
Implementing Scalability Features in Your Internetwork
Challenge! Questions
Review IP Addressing, EIGRP, and BGP
Exam 640-503
12:00 -
5:00
PM
Bridging and Switching
Challenge! Questions 
Lab 4:  VLANs
 8:00 - 12:00
PM
OSI Reference Model and Layered Communication
Network Fundamentals
Challenge! Questions 
12:00 -
5:00
PM
Standards Definitions
Cisco Fundamentals
IT Skills Obstacle Course
 8:00 - 12:00
PM
Network Protocols
Challenge! Questions
Lab 5:  Trunking
12:00 -
5:00
PM
Routing
IT Skills Obstacle Course
Exam 640-504

   
B O O T  C A M P
Exam 640-503: Routing    3
1
CCNP™ CERTIFICATION EXAM 
CRITERIA MATRIX
EX AM 640- 503:
RO UTIN G
The following table maps the course materials to each of the exam objective 
topics.  Criteria specific to each topic is listed as well as a reference to the specific 
area in the book(s) and media that cover it.
For the most current test objectives, access the following Web site: 
http://www.cisco.com
Topic
Criteria
Course Manual
Multiple-
Media Resources
Routing 
Principles
List the key information routers 
needed to route data. 
Advanced Cisco Router 
Configuration
Chapter 6
• What is Routing?
Exam Cram:  Advanced 
Cisco Router Configuration
Chapter 5
• Routing as a Process
Challenge! Interactive
• Routing Principles
Describe classful and classless 
routing protocols. 
Advanced Cisco Router 
Configuration
Chapter 7
• Variable-Length Subnet 
Masks
Challenge! Interactive
• Routing Principles
Describe Interior and Exterior 
routing protocols.
Advanced Cisco Router 
Configuration
Chapter 7
• Variable-Length Subnet 
Masks
Challenge! Interactive
• Routing Principles

4    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Routing 
Principles
Compare distance-vector and 
link-state protocol.
Advanced Cisco Router 
Configuration 
Chapter 6
• Comparing Routing 
Protocols
Challenge! Interactive
• Routing Principles
Describe the use of the fields in a 
routing table. 
Advanced Cisco Router 
Configuration
Chapter 6
• What is Routing?
Exam Cram:  Advanced 
Cisco Router Configuration
Chapter 5
• Routing as a Process
Challenge! Interactive
• Routing Principles
Given a preconfigured 
laboratory network, discover the 
topology, analyze the routing 
table, and test connectivity using 
accepted troubleshooting 
techniques.
Advanced Cisco Router 
Configuration
Chapter 6
• What is Routing?
Exam Cram:  Advanced 
Cisco Router Configuration
Chapter 5
• Routing as a Process
Challenge! Interactive
• Routing Principles
Extending IP 
Addresses
Given an IP address range, use 
VLSMs to extend the use of the IP 
addresses. 
Advanced Cisco Router 
Configuration
Chapter 7
• Variable-Length Subnet 
Masks
Challenge! Interactive
• Extending IP Addresses
Given a network plan that 
includes IP addressing, explain if 
route summarization is or is not 
possible. 
Advanced Cisco Router 
Configuration
Chapter 7
• Route Summarization 
Overview
Challenge! Interactive
• Extending IP Addresses
Configure an IP helper address to 
manage broadcasts. 
Advanced Cisco Router 
Configuration
Chapter 3
• Traffic Management  
Techniques
Challenge! Interactive
• Extending IP Addresses
Configuring 
OSPF in a 
Single Area
Explain why OSPF is better than 
RIP in a large internetwork. 
Exam Cram:  Advanced 
Cisco Router Configuration
Chapter 7
• OSPF vs. RIP
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Explain how OSPF discovers, 
chooses, and maintains routes. 
Advanced Cisco Router 
Configuration
Chapter 8
• Steps to OSPF Operation
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-503: Routing    5
N O T E S
Configuring 
OSPF in a 
Single Area
Explain how OSPF operates in a 
single-area NBMA environment. 
Advanced Cisco Router 
Configuration
Chapter 8
• Steps to OSPF Operation
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Configure OSPF for proper 
operation in a single area. 
Advanced Cisco Router 
Configuration
Chapter 8
• Configure OSPF on Routers 
in a Single Area
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Verify OSPF operation in a single 
area. 
Advanced Cisco Router 
Configuration
Chapter 8
• Verify OSPF Operation
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Given an addressing scheme and 
other laboratory parameters, 
configure a single-area OSPF 
environment and verify proper 
operation (within described 
guidelines) of your routers.
Advanced Cisco Router 
Configuration
Chapter 8
• Configure OSPF on Routers 
in a Single Area
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Given an addressing scheme and 
other laboratory parameters, 
configure a single-area OSPF in 
an NBMA environment and 
verify proper operation (within 
described guidelines) of your 
routers. 
Advanced Cisco Router 
Configuration
Chapter 8
• Configure OSPF on Routers 
in a Single Area
Challenge! Interactive
• Configuring OSPF in a 
Single Area
Interconnecting 
Multiple OSPF 
Areas
Describe the issues with 
interconnecting multiple areas 
and how OSPF addresses each. 
Advanced Cisco Router 
Configuration
Chapter 9
• Creating Multiple OSPF 
Areas
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Explain the differences between 
the possible types of areas, 
routers, and LSAs. 
Advanced Cisco Router 
Configuration
Chapter 9
• Creating Multiple OSPF 
Areas
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Explain how OSPF supports the 
use of VLSM. 
Advanced Cisco Router 
Configuration
Chapter 9
• Using and Configuring 
OSPF Multi-Area 
Components
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Explain how OSPF supports the 
use of route summarization in 
multiple areas. 
Advanced Cisco Router 
Configuration
Chapter 9
• Using and Configuring 
OSPF Multi-Area 
Components
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Topic
Criteria
Course Manual
Multiple-
Media Resources

6    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Interconnecting 
Multiple OSPF 
Areas
Explain how OSPF operates in a 
multiple area NBMA 
environment. 
Exam Cram:  Advanced 
Cisco Router Configuration
Chapter 7
• Learning Initial Database 
Information
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Configure a multiarea OSPF 
network. 
Advanced Cisco Router 
Configuration
Chapter 9
• Using and Configuring 
OSPF Multi-Area 
Components
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Verify OSPF operation in multiple 
areas. 
Advanced Cisco Router 
Configuration
Chapter 9
• Verify OSPF Operation
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Given an addressing scheme and 
other laboratory parameters, 
configure a multiple-area OSPF 
environment and verify proper 
operation (within described 
guidelines) of your routers.
Advanced Cisco Router 
Configuration
Chapter 9
• Using and Configuring 
OSPF Multi-Area 
Components
Challenge! Interactive
• Interconnecting Multiple 
OSPF Areas
Configuring 
EIGRP
Describe Enhanced IGRP features 
and operation. 
Advanced Cisco Router 
Configuration
Chapter 10
• Enhanced IGRP Overview
Challenge! Interactive
• Configure EIGRP
Explain how EIGRP discovers, 
chooses, and maintains routes.  
Advanced Cisco Router 
Configuration
Chapter 10
• Enhanced IGRP Operation
Challenge! Interactive
• Configure EIGRP
Explain how EIGRP supports the 
use of VLSM. 
Advanced Cisco Router 
Configuration
Chapter 10
• Enhanced IGRP Overview
Challenge! Interactive
• Configure EIGRP
Explain how EIGRP operates in 
an NBMA environment. 
Advanced Cisco Router 
Configuration
Chapter 10
• Enhanced IGRP Operation
Challenge! Interactive
• Configure EIGRP
Explain how EIGRP supports the 
use of route summarization. 
Advanced Cisco Router 
Configuration
Chapter 10
• Configuring EIGRP
Challenge! Interactive
• Configure EIGRP
Describe how EIGRP supports 
large networks. 
Advanced Cisco Router 
Configuration
Chapter 10
• Enhanced IGRP Overview
Challenge! Interactive
• Configure EIGRP
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-503: Routing    7
N O T E S
Configuring 
EIGRP
Configure Enhanced IGRP.  
Advanced Cisco Router 
Configuration
Chapter 10
• Configuring EIGRP
Challenge! Interactive
• Configure EIGRP
Verify Enhanced IGRP operation. 
Advanced Cisco Router 
Configuration
Chapter 10
• Verifying Enhanced IGRP 
Operation
Challenge! Interactive
• Configure EIGRP
Given a set of network 
requirements, configure an 
Enhanced IGRP environment and 
verify proper operation (within 
described guidelines) of your 
routers.
Advanced Cisco Router 
Configuration
Chapter 10
• Configuring EIGRP
Challenge! Interactive
• Configure EIGRP
Given a set of network 
requirements, configure 
Enhanced IGRP in an NBMA 
environment and verify proper 
operation (within described 
guidelines) of your routers.
Advanced Cisco Router 
Configuration
Chapter 10
• Configuring EIGRP
Challenge! Interactive
• Configure EIGRP
Configuring 
Basic Border 
Gateway 
Protocol
Describe BGP features and 
operation.  
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Describe how to connect to 
another autonomous system 
using an alternative to BGP static 
routes. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Explain how BGP policy-based 
routing functions within an 
autonomous system. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Describe BGP communities and 
peer groups.  
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Describe and configure external 
and internal BGP. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Topic
Criteria
Course Manual
Multiple-
Media Resources

8    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Configuring 
Basic Border 
Gateway 
Protocol
Describe BGP synchronization. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Given a set of network 
requirements, configure a BGP 
environment and verify proper 
operation (within described 
guidelines) of your routers.
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Configuring Basic Border 
Gateway Protocol
Implementing 
BGP in Scalable 
Networks
Describe the scalability problems 
associated with internal BGP. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Implementing BGP in 
Scalable Networks
Explain and configure BGP route 
reflectors. 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Implementing BGP in 
Scalable Networks
Describe and configure policy 
control in BGP using prefix lists.  
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Implementing BGP in 
Scalable Networks
Explain the use of redistribution 
between BGP and Interior 
Gateway Protocols (IGPs). 
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Implementing BGP in 
Scalable Networks
Given a set of network 
requirements, configure a 
multihomed BGP environment 
and verify proper operation.
Advanced Cisco Router 
Configuration
Chapter 12
• BGP and ISP Basics
Classroom Presentation
Challenge! Interactive
• Implementing BGP in 
Scalable Networks
Optimizing 
Routing Update 
Operations
Select and configure the different 
ways to control routing update 
traffic. 
Advanced Cisco Router 
Configuration
Chapter 11
• Controlling Routing Update 
Traffic
Challenge! Interactive
• Optimizing Routing 
Update Operations
Confugure route redistribution in 
a network that does not have 
redundant paths between 
dissimilar routing processes.  
Advanced Cisco Router 
Configuration
Chapter 11
• Using and Configuring 
Redistribution
Challenge! Interactive
• Optimizing Routing 
Update Operations
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-503: Routing    9
N O T E S
Optimizing 
Routing Update 
Operations
Configure route redistribution in 
a network that has redundant 
paths between dissimilar routing 
processes. 
Advanced Cisco Router 
Configuration
Chapter 11
• Using and Configuring 
Redistribution
Challenge! Interactive
• Optimizing Routing 
Update Operations
Resolve path selection problems 
that result in a redistributed 
network. 
Advanced Cisco Router 
Configuration
Chapter 11
• Using and Configuring 
Redistribution
Challenge! Interactive
• Optimizing Routing 
Update Operations
Verify route redistribution. 
Advanced Cisco Router 
Configuration
Chapter 11
• Verifying Redistribution 
Operation
Challenge! Interactive
• Optimizing Routing 
Update Operations
Configure policy-based routing 
using route maps. 
Advanced Cisco Router 
Configuration
Chapter 12
• Policy Drives BGP 
Requirements
Classroom Presentation
Challenge! Interactive
• Optimizing Routing 
Update Operations
Given a set of network 
requirements, configure 
redistribution between different 
routing domains and verify 
proper operation (within 
described guidelines) of your 
routers. 
Advanced Cisco Router 
Configuration
Chapter 11
• Using and Configuring 
Redistribution
Chapter 12
• Policy Drives BGP 
Requirements
Classroom Presentation
Challenge! Interactive
• Optimizing Routing 
Update Operations
Given a set of network 
requirements, configure policy-
based routing within your pod 
and verify proper operation 
(within described guidelines) of 
your routers. 
Advanced Cisco Router 
Configuration
Chapter 11
• Using and Configuring 
Redistribution
Chapter 12
• Policy Drives BGP 
Requirements
Classroom Presentation
Challenge! Interactive
• Optimizing Routing 
Update Operations
Implementing 
Scalability 
Features in 
Your 
Internetwork
Given a set of network 
requirements, configure various 
routing features and verify 
proper operation (within 
described guidelines) of your 
routers.
Advanced Cisco Router 
Configuration
Chapter 1
Chapters 6 - 12
Classroom Presentation
Challenge! Interactive
• Implementing Scalability 
Features in Your 
Internetwork
Topic
Criteria
Course Manual
Multiple-
Media Resources

10    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
EX AM 640- 504:
SWITCHI NG
The following table maps the course materials to each of the exam objective 
topics.  Criteria specific to each topic is listed as well as a reference to the specific 
area in the book(s) and media that cover it.
For the most current test objectives, access the following Web site: 
http://www.cisco.com
Topic
Criteria
Course Manual
Multiple-
Media Resources
Bridging and 
Switching
Broadcast:  describe the impact of 
broadcast traffic on a network.
Building Cisco Multilayer 
Switched Networks 
Chapter 1
• Campus Network Overview
Challenge! Interactive
• Bridging and Switching
Broadcast:  identify components 
used to control broadcast traffic.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Campus Network Overview
Challenge! Interactive
• Bridging and Switching
Broadcast:  identify the 
differences between unicast, 
broadcast, and multicast traffic.
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Introduction to Multicasting
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  identify the 
layers of the OSI model that 
relate to multilayer switching.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Multilayer Switching
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  describe 
the components of the 
hierarchical model.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• The Hierarchical Model
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  select the 
correct switch for each layer of 
the hierarchical model.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Choosing a Cisco Product
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  describe 
performance improvements 
possible with MLS.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Multilayer Switching 
Fundamentals
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  describe 
MLS components.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• MLS Components
Challenge! Interactive
• Bridging and Switching

Exam 640-504: Switching    11
N O T E S
Bridging and 
Switching
Multilayer Switching:  configure 
MLS on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Configuring the Multilayer 
Switch Router Processor
Challenge! Interactive
• Bridging and Switching
Multilayer Switching:  describe 
the various types of flow masks.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Applying Flow Masks
Challenge! Interactive
• Bridging and Switching
Fast Ethernet:  compare Fast 
Ethernet to Ethernet and Gigabit 
Ethernet.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Cable Media Types
Challenge! Interactive
• Bridging and Switching
Fast Ethernet:  describe a Fast 
Ethernet deployment strategy.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Fast Ethernet
Challenge! Interactive
• Bridging and Switching
Fast Ethernet:  detail the 
differences between full-duplex 
and half-duplex circuits.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Fast Ethernet
Exam Cram: Switching
Chapter 5
• Ethernet
Challenge! Interactive
• Bridging and Switching
Fast Ethernet:  describe 
autonegotiation and its shortfalls.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Fast Ethernet
Exam Cram: Switching
Chapter 5
• Fast Ethernet
Challenge! Interactive
• Bridging and Switching
Static VLAN:  compare Static 
VLANs to Dynamic VLANs.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Establishing VLAN 
Memberships
Challenge! Interactive
• Bridging and Switching
Trunking:  define access links.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Identification
Challenge! Interactive
• Bridging and Switching
Trunking:  define trunk links.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Identification
Challenge! Interactive
• Bridging and Switching
Topic
Criteria
Course Manual
Multiple-
Media Resources

12    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Bridging and 
Switching
Trunking:  define hybrid links.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Identification
Challenge! Interactive
• Bridging and Switching
Trunking:  define native VLAN in 
a trunk link.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Identification
Challenge! Interactive
• Bridging and Switching
Trunking:  use the show 
command to determine trunking 
capabilities.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Identification
Challenge! Interactive
• Bridging and Switching
Trunking:  describe frame tagging 
and encapsulation.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Bridging and Switching
VTP:  define the VLAN Trunking 
Protocol (VTP). 
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Trunking Protocol
Challenge! Interactive
• Bridging and Switching
VTP:  describe VTP modes of 
operation.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Trunking Protocol
Challenge! Interactive
• Bridging and Switching
VTP:  describe the precautions you 
must take to add a new switch to 
an existing VTP network. 
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Adding a Switch to an 
Existing Domain
Challenge! Interactive
• Bridging and Switching
VTP:  identify the various types of 
VTP advertisements.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Advertisements
Challenge! Interactive
• Bridging and Switching
VTP:  describe the importance of 
the VTP revision number.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Configuration Revision 
Number
Challenge! Interactive
• Bridging and Switching
VTP:  configure VTP on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Configuration Tasks and 
Guidelines
Challenge! Interactive
• Bridging and Switching
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-504: Switching    13
N O T E S
Bridging and 
Switching
VTP:  configure VTP pruning on a 
Catalyst switch.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Pruning
Challenge! Interactive
• Bridging and Switching
Routing:  identify issues 
associated with routing between 
VLANs.
Building Cisco Multilayer 
Switched Networks
Chapter 5
• Inter-VLAN Routing Issues 
and Solutions
Challenge! Interactive
• Bridging and Switching
Routing:  configure RMSs on a 
switch.
Building Cisco Multilayer 
Switched Networks
Chapter 5
• Distribution Layer Topology
Challenge! Interactive
• Bridging and Switching
Routing: configure external route 
processors to route VLANs.
Building Cisco Multilayer 
Switched Networks
Chapter 5
• Configuring an Interface
Challenge! Interactive
• Bridging and Switching
Routing:  identify the methods 
used to locate a host’s default 
router.
Building Cisco Multilayer 
Switched Networks
Chapter 7
• Routing Issues in a 
Redundant Network
Challenge! Interactive
• Bridging and Switching
Multicast:  describe multicast 
traffic.
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Multicast Traffic
Challenge! Interactive
• Bridging and Switching
Multicast:  describe the 
characteristics of IP multicasting.
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Addressing in an IP 
Multicast Environment
Challenge! Interactive
• Bridging and Switching
Multicast:  map a MAC address to 
the multicast address. 
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Addressing in an IP 
Multicast Environment
Challenge! Interactive
• Bridging and Switching
Multicast:  describe improvements 
in IGMPv2. 
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Subscribing and 
Maintaining Groups
Challenge! Interactive
• Bridging and Switching
Multicast:  describe how switches 
use the CGMP protocol. 
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Routing Multicast Traffic
Challenge! Interactive
• Bridging and Switching
Topic
Criteria
Course Manual
Multiple-
Media Resources

14    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Bridging and 
Switching
Multicast:  describe the TTL 
assignment process.
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Managing the Scope of 
Delivery
Challenge! Interactive
• Bridging and Switching
Multicast:  identify the types of 
trees associated with routing 
multicast traffic. 
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Routing Multicast Traffic
Challenge! Interactive
• Bridging and Switching
Multicast:  define the difference 
between dense mode and sparse 
mode. 
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Multicast Routing Protocols
Challenge! Interactive
• Bridging and Switching
Multicast:  identify the 
requirements that must be in 
place to support multicasting. 
Building Cisco Multilayer 
Switched Networks
Chapter 9
• Planning for Multicasting
Challenge! Interactive
• Bridging and Switching
Multicast:  configure IP multicast 
routing on a Cisco multicast-
capable switch. 
Building Cisco Multilayer 
Switched Networks
Chapter 9
• Configuring IP Multicast 
Routing
Challenge! Interactive
• Bridging and Switching
Multicast:  configure debug for 
multicast packets.
Building Cisco Multilayer 
Switched Networks
Chapter 9
• Verifying Multicast 
Configuration
Challenge! Interactive
• Bridging and Switching
PIM:  describe the PIM protocol.
Building Cisco Multilayer 
Switched Networks
Chapter 9
• Planning for Multicasting
Challenge! Interactive
• Bridging and Switching
PIM:  configure PIM on a router 
interface in both dense and 
sparse modes.
Building Cisco Multilayer 
Switched Networks
Chapter 9
• Configuring IP Multicast 
Routing
Challenge! Interactive
• Bridging and Switching
Quality of Service:  define Quality 
of Service.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Layer 4 Switching
Challenge! Interactive
• Bridging and Switching
Security:  implement access lists 
and passwords on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Limiting Switch Access Using 
Passwords
Challenge! Interactive
• Bridging and Switching
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-504: Switching    15
N O T E S
Bridging and 
Switching
Security:  configure a switch to 
limit remote accessibility.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Configuring Switch Remote 
Accessibility
Challenge! Interactive
• Bridging and Switching
Security:  assign passwords at 
every entry point on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 10
• Assigning Passwords
Challenge! Interactive
• Bridging and Switching
OSI Reference 
Model and 
Layered 
Communication
Fault Tolerance:  identify routing 
issues common in a redundant 
network.
Building Cisco Multilayer 
Switched Networks
Chapter 7
• Routing Issues in a 
Redundant Network
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Fault Tolerance:  describe how 
HSRP can provide fault tolerance 
for routers.
Building Cisco Multilayer 
Switched Networks
Chapter 7
• HSRP Overview
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Fault Tolerance:  configure a 
router to use HSRP.
Building Cisco Multilayer 
Switched Networks
Chapter 7
• Configuring HSRP
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Fault Tolerance:  configure debug 
for HSRP.
Building Cisco Multilayer 
Switched Networks
Chapter 7
• Displaying the Status of 
HSRP
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Switch Component:  identify the 
layers of the OSI model that 
apply to multilayer switching.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Switching Technologies
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Switch Component:  describe the 
methods for controlling multicast 
traffic in Layer 2 switches.
Building Cisco Multilayer 
Switched Networks
Chapter 8
• Handling Multicast Traffic in 
a Switch
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
RMON:  describe the RMON 
groups that are supported on 
Cisco switches.
Exam Cram: Switching
Chapter 7
• Other Troubleshooting 
Features
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Policy Management:  describe 
policies typically implemented at 
the Access layer.
Building Cisco Multilayer 
Switched Networks
Chapter 10
• Applying Policies in a 
Hierarchical Model
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Topic
Criteria
Course Manual
Multiple-
Media Resources

16    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
OSI Reference 
Model and 
Layered 
Communication
Policy Management:  describe 
policies typically implemented at 
the Distribution layer.
Building Cisco Multilayer 
Switched Networks
Chapter 10
• Applying Policies in a 
Hierarchical Model
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Policy Management:  describe 
policies typically implemented at 
the Core layer.
Building Cisco Multilayer 
Switched Networks
Chapter 10
• Applying Policies in a 
Hierarchical Model
Challenge! Interactive
• OSI Reference Model and 
Layered Communication
Network 
Fundamentals
Cabling:  select the correct CAT5 
cable to connect switch-to-switch 
Ethernet ports.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Connecting to an Ethernet 
Port
Challenge! Interactive
• Network Fundamentals
Cabling:  select the correct CAT5 
cable to connect switch-to-
workstation over Ethernet.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Connecting to an Ethernet 
Port
Challenge! Interactive
• Network Fundamentals
Standards 
Definitions
IEEE Standards:  identify the IEEE 
standards for VLAN frame 
identification.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Standards Definitions
IEEE Standards:  identify the IEEE 
standard for Gigabit Ethernet 
over fiber.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Gigabit Ethernet
Challenge! Interactive
• Standards Definitions
IEEE Standards:  identify the IEEE 
standard for Gigabit Ethernet 
over copper.
Exam Cram: Switching
Chapter 5
• Gigabit Ethernet
Challenge! Interactive
• Standards Definitions
Debug:  create a line diagram of 
a typical hierarchical switch 
network.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Case Study:  Connecting the 
Switch Block
Challenge! Interactive
• Cisco Fundamentals
IOS CLI Switch:  use set command-
based commands to configure 
line modes and speeds.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Maximizing Data 
Transmission
Challenge! Interactive
• Cisco Fundamentals
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-504: Switching    17
N O T E S
Cisco 
Fundamentals
IOS CLI Switch:  use IOS 
command-based commands to 
configure line modes and speeds.
Building Cisco Multilayer 
Switched Networks
Chapter 2
• Maximizing Data 
Transmission
Challenge! Interactive
• Cisco Fundamentals
Cisco TAC/CCO:  describe 
assistance available from Cisco’s 
TAC and CCO.
Building Cisco Multilayer 
Switched Networks
Chapter 1
• Choosing a Cisco Product
Challenge! Interactive
• Cisco Fundamentals
Network 
Protocols
ATM and LANE:  identify the 
method used by Cisco switches to 
identify VLAN frames over ATM.
Building Cisco Multilayer 
Switched Networks
Chapter 13
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Network Protocols
Switching:  describe the ISL 
protocol.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Network Protocols
Switching:  define the ISL frame 
format.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Network Protocols
Switching:  define the IEEE 
802.1Q frame identification 
format.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Network Protocols
Switching:  describe the modes of 
operation for the VTP protocol.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Modes of Operation
Challenge! Interactive
• Network Protocols
Switching:  describe the functions 
of STP.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Introduction to the 
Spanning Tree Protocol
Challenge! Interactive
• Network Protocols
Switching:  describe the root 
bridge election process.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Introduction to the 
Spanning Tree Protocol
Challenge! Interactive
• Network Protocols
Topic
Criteria
Course Manual
Multiple-
Media Resources

18    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Network 
Protocols
Switching:  define root port.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Forming an Association with 
the Root Bridge
Challenge! Interactive
• Network Protocols
Switching:  identify the Spanning 
Tree port states.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Spanning Tree Port States
Challenge! Interactive
• Network Protocols
Switching:  manually configure a 
root bridge.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Establishing the Root Bridge
Challenge! Interactive
• Network Protocols
Switching:  implement Fast 
EtherChannel on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• EtherChannel
Challenge! Interactive
• Network Protocols
Switching:  configure PortFast.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Implementing PortFast
Challenge! Interactive
• Network Protocols
Switching:  configure STP 
UplinkFast on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Configuring UplinkFast
Challenge! Interactive
• Network Protocols
Switching:  configure 
BackboneFast.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Configuring BackboneFast
Challenge! Interactive
• Network Protocols
Switching:  configure CBMP on a 
set-based switch.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Enabling CGMP on the 
Switch
Challenge! Interactive
• Network Protocols
Switching Modes/Methods: 
outline the methods used to 
identify VLAN frames.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VLAN Frame Identification 
Methods
Challenge! Interactive
• Network Protocols
Switching Modes/Methods: 
describe autonegotiating 
requirements in trunk 
negotiation.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Trunk Negotiation
Challenge! Interactive
• Network Protocols
Topic
Criteria
Course Manual
Multiple-
Media Resources

Exam 640-504: Switching    19
N O T E S
Network 
Protocols
Trunking:  identify the trunk 
protocol used between two 
Catalyst switch ports.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Trunk Negotiation
Challenge! Interactive
• Network Protocols
Trunking:  configure a trunk link.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Configuring a Trunk Link
Challenge! Interactive
• Network Protocols
Port Configuration:  enable Inter-
VLAN routing on a router.
Building Cisco Multilayer 
Switched Networks
Chapter 5
• Inter-VLAN Routing
Challenge! Interactive
• Network Protocols
Port Configuration:  configure a 
trunk link with set-based 
commands.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• Configuring a Trunk Link
Challenge! Interactive
• Network Protocols
Port Configuration:  configure VTP 
with set-based commands.
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Configuration Tasks and 
Guidelines
Challenge! Interactive
• Network Protocols
Port Configuration:  configure VTP 
Pruning on a switch
Building Cisco Multilayer 
Switched Networks
Chapter 3
• VTP Pruning
Challenge! Interactive
• Network Protocols
Port Configuration:  enable 
Spanning Tree on a switch.
Building Cisco Multilayer 
Switched Networks
Chapter 4
• Enabling Spanning Tree
Challenge! Interactive
• Network Protocols
Port Configuration:  configure the 
Default Gateway on a switch and 
router.
Building Cisco Multilayer 
Switched Networks
Chapter 5
• Defining the Default 
Gateway
Challenge! Interactive
• Network Protocols
Port Configuration:  assign an 
MLS management interface.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Assigning an MLS 
Management Interface
Challenge! Interactive
• Network Protocols
Port Configuration:  assign a 
VLAN ID to an interface.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Assigning a VLAN ID to an 
Interface on an External 
Router
Challenge! Interactive
• Network Protocols
Topic
Criteria
Course Manual
Multiple-
Media Resources

20    Unit 1—CCNP™ Certification Exam Criteria Matrix
N O T E S
Network 
Protocols
Port Configuration:  explain what 
happens when an output access 
list is applied to an interface with 
an MLS flow mask.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Output Access Lists and Flow 
Masks
Challenge! Interactive
• Network Protocols
Port Configuration:  explain what 
happens when an input access list 
is applied to an interface with an 
MLS flow mask.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Input Access Lists and Flow 
Masks
Challenge! Interactive
• Network Protocols
Port Configuration:  configure the 
multilayer switch switching 
engine on a Catalyst switch.
Building Cisco Multilayer 
Switched Networks
Chapter 6
• Configuring the Multilayer 
Switch Switching Engine
Challenge! Interactive
• Network Protocols
Port Configuration:  apply a 
standard access list on a router 
interface for outbound traffic.
Building Cisco Multilayer 
Switched Networks
Chapter 10
• Controlling Information 
with Filters
Challenge! Interactive
• Network Protocols
Topic
Criteria
Course Manual
Multiple-
Media Resources

   
B O O T  C A M P
    21
2
ROUTING PRESENTATION

22    Unit 2—Routing Presentation

Routing
CCNP™ Certification Boot Camp
Page 23
Welcome to Boot Camp!
Wave Technologies International, Inc.
Wave Technologies International, Inc. is an independent entity from Cisco Systems, Inc. and is
not affiliated with Cisco Systems, Inc. in any manner.  This study guide and/or material is not
sponsored by, endorsed by, or affiliated with Cisco Systems, Inc.  Cisco®, Cisco Systems®,
CCDA™, CCNA™, CCDP™, CCNP™, CCIE™, CCSI™, the Cisco Systems logo and the CCIE
logo are trademarks or registered trademarks of Cisco Systems, Inc. in the United States and
certain other countries.  All other trademarks are trademarks of their respective owners.

Routing
CCNP™ Certification Boot Camp
Page 24
Course Introduction
and Overview

Routing
 Page 25
Student Introductions
✦What experience do you have with routing and
switching?
✦What experience do you have with classes in
 routing and switching?
✦Do you have specific projects in mind?
✦What is your main objective for attending this course?

Routing
 Page 26
Exam 640-503
Routing
Exam 640-504
Switching
Exam 640-505
Remote Access
WEEK 1
WEEK 2
Refer to http://www.cisco.com for additional information.
Exam 640-506
Support
CCNP Certification
Point out that this boot camp will prepare students to pass four of the CCNP exams:
• Week 1
640-503 and 640-504
• Week 2
640-505 and 640-506

Routing
CCNP™ Certification Boot Camp
Page 27
Routing
Exam 640-503
The below graphic appears in the notes section for pages containing information that will be
helpful in preparing for the certification exams.  The note will indicate whether the pertinent
information is contained on the Slides, in the Notes, or on the entire page (Content).
Also included on many slides is a reference to the manuals for additional information.

Routing
 Page 28
Routing
Exam Topics
✦Routing Principles
✦Extending IP Addresses
✦Configuring OSFP in a Single Area
✦Interconnecting Multiple OSFP Areas
✦Configuring EIGRP
✦Configuring Basic Border Gateway Protocol
✦Implementing BGP in Scalable Networks
✦Optimizing Routing Update Operation
✦Implementing Scalability Features in Your
Internetwork

Routing
 Page 29
Routing Principles
Exam Objectives
✦List the key information routers needed to route data.
✦Describe classful and classless routing protocols.
✦Describe Interior and Exterior routing protocols.
✦Compare distance-vector and link-state protocol
operation.
✦Describe the use of the fields in a routing table.
✦Given a preconfigured laboratory network, discover
the topology, analyze the routing table, and test
connectivity using accepted troubleshooting
techniques.

Routing
 Page 30
Routing Principles
✦List the key information routers needed to route data.
• How the route was learned
• Logical destination address
• Administrative distance
• Metric
• Address of the next hop router
• The amount of time the information has been in the routing
table
• The interface the packet will leave the router through
Routing tables are maintained by all routing protocols.  Individual tables are maintained for
each routable protocol.  Routing protocols discussed in this boot camp are IP RIP, OSPF,
IGRP, EIGRP, and BGP.  The only routable protocol that will be discussed is TCP/IP.
How the route was learned–Dynamic or manual entries
Logical destination address–Usually expressed as a major network or subnetwork
Administrative distance–A measure of trustworthiness
Connected interface = 0
IGRP = 100
Static route next hop = 1
OSPF = 110
EBGP = 20
RIP = 120
Internal EIGRP = 90
IBGP= 200
Metric–A measure of cost.  Distance vector – may be a hop count – or link state – cost via
complex metrics
Address of the next hop router
Amount of time the information has been in the routing table–This information is refreshed
periodically
Interface through which the packet will leave the router–The interface to the next hop router
Content

Routing
 Page 31
Routing Principles
✦Describe classful and classless routing protocols.
• Classful Routing:  Routing masks are not carried within
routing updates.  Examples are RIP v1 and IGRP.
• Classless Routing:  Routing masks are carried within routing
protocols.  Examples are RIP v2, EIGRP, OSPF, and BGP.
✦Describe Interior and Exterior routing protocols.
• Interior Gateway Protocol (IGP) – functions within a single
autonomous system.  Interior Border Gateway Protocol
(IBGP) is an example of IGP.
• Exterior Gateway Protocol (EGP) – functions between
autonomous systems.  Exterior BGP (EBGP) is an example
of EGP.
Classful routing is bound by the designations of A, B, and C network classes.
A starts with 0, B starts with 10, and C starts with 110.  Classful routing protocols have
automatic classful summarization only if both networks have the same mask or can use the
same default mask.
Classless routing protocols carry route mask information.  This enables them to be
configured manually for summarization in cases of contiguous networks.
Classless routing is also called prefix routing.
Content

Routing
 Page 32
Routing Principles
✦Compare distance-vector and link-state protocol
operation.
• Distance-vector routing protocols
✔Use hop count as the metric
✔Periodic updates
• Link-state routing protocols
✔Use complex metrics
✔Triggered updates
Link-state protocols:  OSPF is the only one discussed in this boot camp.  The metric is cost
defined by 10e8/bandwidth.
Distance-vector protocols:  RIP, IGRP, EIGRP, and BGP are the only ones discussed.
IGRP and EIGRP use composite metrics consisting of bandwidth, delay, reliability, loading,
and MTU.  IGRP and EIGRP are considered advanced distance-vector routing protocols.
See the charts on the next few slides.
Load balancing of equal cost links is enabled by default for all IP routing protocols.
Cisco’s materials say that distance-vector protocols use hop count as their metric.
Content

Routing
 Page 33
Complex
Complex
Hops
Hops
Metric
X
X
Variable Length
Subnet Mask
(VLSM )
X
X
X
X
Triggered and/or
periodic updates
X
X
X
Hold-down timer
EIGRP
IGRP
RIP v2
RIP v1
Characteristic
Routing Principles
✦Compare distance-vector and link-state protocol
operation (cont’d):  Distance Vector
EIGRP does not use a hold down timer; however, it does use route poisoning.  Note that
only EIGRP and RIP v2 support Variable Length Subnet Mask (VLSM ) and can, therefore,
support manual classless route summarization.

Routing
 Page 34
Routing Principles
✦Compare distance-vector and link-state protocol
operation (cont’d):  Link State
Complex
Cost
Metric
X
X
VLSM
X
Hierarchical topology
required
X
Route Summarization
Automatic
EIGRP
OSPF
Characteristic
This chart shows the comparison between OSPF, the only link-state protocol listed as an
objective, and EIGRP, an advanced distance-vector protocol.  Note that the OSPF requires a
hierarchical topology to provide summarization; however, none of the distance-vector
routing protocols require this.  If the protocol supports VLSM, then it supports manual
summarization.  All of the distance-vector routing protocols support automatic classful
summarization.  This can be seen in the next slide.

Routing
 Page 35
Routing Principles
✦Compare distance vector and link-state protocol
operation (cont’d).
X
X
Proprietary
X
X
X
Classless (VLSM)
X
X
X
X
Classful (auto
summary)
X
Link State
X
X
X
X
Distance Vector
OSPF
EIGRP
IGRP
RIP v2
RIP v1
Characteristic
If the protocol supports VLSM, then it supports manual summarization.  All of the distance-
vector routing protocols support automatic classful summarization.  Both IGRP and EIGRP
are proprietary and only work with Cisco products.  RIP is for small networks.  IGRP,
EIGRP, and OSPF are for large network implementations.
Distance-vector protocols send periodic announcements and send their entire routing table
(i.e., RIP is every 30 seconds by default).  The router’s view of the network is from the
neighbor’s perspective.  The sending of the whole routing table takes up considerable
bandwidth; however, very little processor resources are used to calculate routes.
Link-state protocols use triggered updates to send changes to the routing table.  These
updates are only sent when there are changes.  OSPF also sends a periodic update (every 30
minutes by default) to make sure routing information is synchronized.  These updates are
propagated to all devices on the network by flooding the network.  These triggered updates
save bandwidth; however, they are more processor intensive than distance-vector updates.

Routing
 Page 36
Routing Principles
✦Describe the use of the fields in a routing table.
• Fields are entries in the routing table.
• Entries are listed to make searching more efficient.
• Multiple routes to a destination can be listed.
• To display the routing table, use the show ip route
command in User EXEC mode.
• To refresh entries, use the clear ip route command in
Privileged EXEC mode.
An asterisk (*) used as a wildcard with the clear ip route command will clear all routes in
the routing table.
Content

Routing
 Page 37
Routing Principles
✦Describe the use of the fields in a routing table
(cont’d).
• Typical fields contain information necessary for routing:
✔How the route was learned
✔Logical destination address
✔Administrative distance
✔Metric
✔Address of the next hop router
✔Amount of time the information has been in the routing table

Routing
 Page 38
Routing Principles
✦Given a preconfigured laboratory network, discover
the topology, analyze the routing table, and test
connectivity using accepted troubleshooting
techniques.
The previous sections have prepared you for this task.

Routing
 Page 39
Extending IP Addresses
Exam Objectives
✦Given an IP address range, use VLSMs to extend the
use of the IP addresses.
✦Given a network plan that includes IP addressing,
explain if route summarization is or is not possible.
✦Configure an IP helper address to manage broadcasts.

Routing
 Page 40
Extending IP Addresses
✦Given an IP address range, use VLSMs to extend the
use of the IP addresses.
• Hierarchical design
✔Reduces the number of routing table entries
✔Allocation of addresses is more efficient
• Route summarization
✔Classless:  Routing mask is advertised
✔Classful:  Summarization only works if working with the same
mask
Hierarchical design is likened to a phone number of a friend in San Jose, California, whose
telephone number is (408) 555-1212:  408 is long distance to an area in California,
555 summarizes a smaller area in California to the local office in San Jose, 1212 designates
your friend’s number in San Jose, California.

Routing
 Page 41
Extending IP Addresses
✦Given a network plan that includes IP addressing,
explain if route summarization is or is not possible.
• Route summarization
✔Classless:  Routing mask is advertised
✔Classful:  Summarization only works if working with the same
mask
Route summarization is only possible if all of the routes being summarized can fit in the
summary address.
To determine the summary route, the router determines the number of highest-order number
of bits that match all of the addresses.  To allow the router to aggregate the most number of
addresses, the topology should be hierarchical.  Simply match the highest-ordered shared
bit.
Example:  Summarize 172.16.168.0/24, 172.16.169.0/24, 172.16.170.0/24,
172.16.171.0/24
Answer:  172.16.168.0 /21 Classless
Answer:  172.16.168.0 /24 Classful and does not summarize
X.X.168.X = X.X.10101000.X = X.X.1010  1  000.X
X.X.170.X = X.X.10101111.X = X.X.1010  1  111.X
Create a mask that allows two hosts on the link 172.16.168.132.
Answer:  30 bits
Content

Routing
 Page 42
Extending IP Addresses
✦Configure an IP helper address to manage broadcasts.
• Commands necessary to use helper addresses:
ip helper-address address
ip forward-protocol {udp [port] | nd | sdns}
no ip forward-protocol udp port
• Why use a helper address?
✔Clients do not know the server address.
✔Helper addresses map broadcasts of certain ports to unicasts.
✔It may map to unicast or directed broadcast addresses.
Default ports forwarded automatically:  TFTP(69), DNS(53), Time(37), NetBIOS name
service(137), NetBIOS datagram service(138), BootP server(67), BootP client(68), and
TACACS(49).
In the command ip forward-protocol {udp [port] | nd | sdns}, the abbreviation nd stands
for network disk and the sdns abbreviation stands for secure data network service.
Content

Routing
 Page 43
Configuring OSPF in a Single Area
Exam Objectives
✦Explain why OSPF is better than RIP in a large
internetwork.
✦Explain how OSPF discovers, chooses, and maintains
routes.
✦Explain how OSPF operates in a single-area NBMA
environment.
✦Configure OSPF for proper operation in a single area.
✦Verify OSPF operation in a single area.
NBMA (Non-Broadcast Multi-Access) relates to some Frame Relay configurations.

Routing
 Page 44
Configuring OSPF in a Single Area
Exam Objectives (cont’d)
✦Given an addressing scheme and other laboratory
parameters, configure a single-area OSPF
environment and verify proper operation (within
described guidelines) of your routers.
✦Given an addressing scheme and other laboratory
parameters, configure a single-area OSPF in an
NBMA environment and verify proper operation
(within described guidelines) of your routers.

Routing
 Page 45
✦Explain why OSPF is better than RIP in a large
internetwork.
Quick convergence,
scales to larger networks
Slow convergence,
limited to small networks
Updates incrementally as
required and periodically
every 30 minutes
Periodic full updates
every 30 seconds
Virtually unlimited size
network (metric may be
defined manually)
Limited to 15-hop
network
Supports VLSM
Does not support VLSM
Provides security with
MD5 specification
No security
OSPF
RIP v1
Configuring OSPF in a Single
Area
Note that this is RIP v1.  RIP v2 supports VLSM.  OSPF link cost is associated with link
speed.  1,000 MB/BW = Cost.
Cisco recommends letting the system calculate the cost in a Cisco environment.  Other
vendors may calculate costs differently, and you may need to manually calculate costs in a
multivendor environment.
Content

Routing
 Page 46
✦Explain how OSPF discovers, chooses, and maintains
routes.
• OSPF terminology
✔Interface:  The connection between the router and its attached
networks
✔Link state:  The status of a link between two routers
✔Cost:  Based on the speed of the media
✔Autonomous system:  A grouping of routers using the same
routing protocol
✔Area:  A collection of routers having the same area identification
✔Neighbors:  Two routers that have interfaces that share a
common network
Configuring OSPF in a Single
Area
Content

Routing
 Page 47
✦Explain how OSPF discovers, chooses, and maintains
routes (cont’d).
• OSPF terminology (cont’d)
✔Hello:  Protocol used by OSPF to establish and maintain
neighbor relationships
✔Neighborship database:  A listing of all of the neighbors a router
has established communication to
✔Link-state database:  Topology database, a listing of the link-
state entries of the other routers in the network
✔Routing table:  The routing table is generated by running the
SPF algorithm on the topology table
Configuring OSPF in a Single
Area
OSPF is an IGP.
Content

Routing
 Page 48
✦Explain how OSPF discovers, chooses, and maintains
routes (cont’d).
• OSPF topologies
✔Broadcast Multi-Access – Ethernet
✔Point to Point – T1
✔Non-Broadcast Multi-Access (NBMA) – Frame Relay
Configuring OSPF in a Single
Area
These are the only three topologies necessary for this course.
Content

Routing
 Page 49
✦Explain how OSPF discovers, chooses, and maintains
routes (cont’d).
• Broadcast Multi-Access
✔Hello protocol is sent multicast to discover neighbors.
✔Designated Router (DR) and Backup Designated Router (BDR)
are elected.  Priority is configured on the individual routers.  The
default is 1, and 0 sets the router to be ineligible to become DR
or BDR.
> DRs and BDRs control update traffic.
> Every segment has a DR and a BDR.
Configuring OSPF in a Single
Area
This is an Ethernet environment.
Step 1:  Establishing adjacencies–Hello packets are sent out of each interface using IP
multicast addresses.  Hello packets contain Router ID, Hello and dead intervals, neighbors
that adjacency has been established for, Area ID, router priority for electing DR and BDR,
DR and BDR addresses if known, authentication password for area, and Stub flag.
Adjacencies will only be established if the routers have the same Hello and dead intervals,
area, network, and subnet mask.
• Router is enabled on the LAN and is in an OSPF down state before it establishes
communication with other routers.
• All OSPF routers receive the Hello and add the router to their Adjacencies database
(Multicast 224.0.0.5).
• All routers send a unicast ACK.
• When the initial router receives the ACK, it puts the other routers in its own
Adjacencies database.
• The router then determines which routers are the DR and BDR.
• By default, every 10 seconds, routers in the network exchange Hello packets to ensure
communication is still working.
Electing the DR and BDR:
DR and BDR reduce routing update traffic by acting as the central point of contact for
routing updates.
Content

Routing
Content
 Page 50
✦Explain how OSPF discovers, chooses, and maintains
routes (cont’d).
• Broadcast Multi-Access
✔Once DR and BDR are elected, the routers are in EXSTART
state and are ready to discover the network.
✔The process of discovering the network uses the EXCHANGE
protocol and is used to get the routers in FULL state of
communication.  EXCHANGE database descriptors packets
from adjacent neighbors.
✔Once the router has a complete link-state database, it creates
the routing table and Updates DRs (and BDRs) by way of
multicast packets, which flood to the rest of the network using
Link-State Updates (LSUs).
✔Note that OSPF routers won’t use these routes until they are in
FULL state.
Configuring OSPF in a Single
Area
Discovering routes:
After the DR and BDR have been elected, the routers are in the EXSTART state.  They are
ready to discover the link-state information about the network.  They use the EXCHANGE
protocol.
• In the EXSTART state, the BDR and DR establish adjacencies with each router in the
network.  This is where a master/slave relationship is developed between each router
and its BDR/DR.
• The master slave routers exchange one or more database descriptors packets.  This is
the EXCHANGE state.  The database descriptor packet contains the LSA entries.
• When the slave receives the database descriptor packet, it acknowledges the receipt
and compares the information with information it already has.  If the slave has a
newer entry, it sends it back to the master.
• All routers add the new link entries into their link-state databases.
• After all of the routers have been satisfied, the adjacent routers are considered to be in
a FULL state.  All routers must be in the FULL state to use the routes.
Choosing routes:
• Routes are chosen, based on link speed, with the Dijkstra algorithm.
• Maintaining routing information:
When there is a change in the link-state database, the router floods the network with a
multicast address to notify the DR and BDR of the change.  The DR acknowledges
the changes and floods the LSU to the other routers in the network.  After the other
routers receive the LSU, they send an LSAack to the DR.

Routing
 Page 51
✦Explain how OSPF discovers, chooses, and maintains
routes (cont’d).
• Point to Point
✔Routers dynamically detect neighbors using the Hello protocol.
✔There is no election of DR or BDR, and adjacency is automatic.
✔OSPF link-state packets are sent multicast.
Configuring OSPF in a Single
Area
Routers are directly connected and only see each other as neighbors on that link.
Content

Routing
 Page 52
✦Explain how OSPF operates in a single-area NBMA
environment.
• Modes of operation
✔Non-Broadcast Multi-Access (NBMA)
> Simulates a broadcast environment using multicast
> DR or BDR are elected
> Requires full mesh
> Neighbors are statically configured
> One IP segment
Configuring OSPF in a Single
Area
In nonbroadcast environments, protocols can only communicate by multicast and unicast.
Note that both of these nonbroadcast environments are seen as one IP segment.
Frame Relay is the only NBMA environment discussed.
Content

Routing
 Page 53
✦Explain how OSPF operates in a single-area NBMA
environment (cont’d).
• Modes of operation
✔Point to Multipoint
> Simulates point-to-point links and may use subinterfaces
> No DR or BDR elected
> Fully meshed or partially meshed
> Neighbor relationships are automatic
> One IP subnet
> May use multipoint subinterfaces
Configuring OSPF in a Single
Area
In nonbroadcast environments, protocols can only communicate by multicast and unicast.
Note that both of these nonbroadcast environments are seen as one IP segment.
Frame Relay is the only NBMA environment discussed.
Content

Routing
 Page 54
✦Configure OSPF for proper operation in a single area.
• Summary of commands
✔Router(config)# router ospf process-id
> Configures OSPF on the router
✔Router(config-router)# network address wild-card area area-id
> Defines which networks are associated with areas
✔Router(config)# interface loopback number
> OSPF is more reliable if configured to use the loopback (it cannot go
down like a real interface)
✔Router(config-if)# ip ospf priority number
> Dictates the election of DRs and BDRs (default is 1; 0 restricts the
interface from being elected as a DR or BDR)
✔Router(config-if)#ip address address mask
> Assigns an IP address to the loopback interface
Configuring OSPF in a Single
Area
The process ID is only locally significant.
Area IDs are the same for all routers in the defined area.
The loopback interface is defined for the OSPF participating interface.  The loopback
interface actually uses the available interface that will connect the route.
The ip ospf priority interface configuration command is used to set the router priority,
which helps determine the designated router for this network.  To return to the default value,
use the no form of this command.
Once the loopback interface is created, you must assign it an IP address.
Content

Routing
 Page 55
✦Configure OSPF for proper operation in a single area
(cont’d).
• Summary of commands
✔Router(config-if)# ip ospf cost cost
> Reassigns the cost associated with a link
✔Router(config-if)# ip ospf network non-broadcast
> Defines the link as an NBMA
✔Router(config-if)# ip ospf network point-to-multipoint [non-
broadcast]
> Defines the link as a Point to Multipoint
✔Router(config-router)# neighbor ip-address
> Statically configures neighbors in nonbroadcast media
Configuring OSPF in a Single
Area
The following slides explain the commands that are necessary in order to use these
commands in context to configure OSPF.
Content

Routing
 Page 56
✦Configure OSPF for proper operation in a single area
(cont’d).
• Broadcast mode
✔Router(config)# router ospf process-id
✔Router(config-router)# network address wild-card area area-id
✔Router(config)# interface ethernet 0
✔Router(config-if)#ip ospf network broadcast
Configuring OSPF in a Single
Area
Note that in the first line, the broadcast parameter defines the mode of operation as
broadcast.  This would be for an Ethernet environment.
Content

Routing
 Page 57
✦Configure OSPF for proper operation in a single area
(cont’d).
• Point-to-multipoint mode
✔Router(config)# router ospf process-id
✔Router(config-router)# network address wildcard area area-id
✔Router(config)# interface serial 0/0
✔Router(config-if)#ip ospf network point-to-multipoint
Configuring OSPF in a Single
Area
This configuration is for a nonbroadcast environment like Frame Relay.  Point-to-multi-
point configurations use subinterfaces and are seen as multiple point-to-point links.
Content

Routing
 Page 58
✦Configure OSPF for proper operation in a single area
(cont’d).
• NBMA mode
✔Router(config)#router ospf process-id
✔Router(config-router)#network address wild-card area area-id
✔Router(config-router)#neighbor ip-address
✔Router(config)#interface serial 0/0
✔Router(config-if)#ip ospf network non-broadcast
Configuring OSPF in a Single
Area
Note the nonbroadcast element in the first line.  This specifies a nonbroadcast environment
for NBMA.
Since this is a single area, the area-id will be 0 (zero).
Content

Routing
 Page 59
✦Verify OSPF operation in a single area.
• show ip ospf database
✔Displays the link-state database
• show ip ospf neighbor detail
✔Displays information about DR, BDR, and neighbors
• show ip ospf
✔Displays OSPF timers and statistics
• show ip ospf interface
✔Displays area ID and adjacency information
• show ip route
✔Displays all routes learned by the router
• show ip protocols
✔Verifies that OSPF is configured
Configuring OSPF in a Single
Area
Memorize these because this is the only information given in the course and is sufficient for
the particular attention status.
Content

Routing
 Page 60
✦Given an addressing scheme and other laboratory
parameters, configure a single-area OSPF
environment and verify proper operation (within
described guidelines) of your routers.
Configuring OSPF in a Single
Area
The information presented in the previous section is sufficient to complete this task.

Routing
 Page 61
✦Given an addressing scheme and other laboratory
parameters, configure single-area OSPF in an NBMA
environment and verify proper operation (within
described guidelines) of your routers.
Configuring OSPF in a Single
Area
This information is covered in the section on Multi-Area NBMA.

Routing
 Page 62
✦Describe the issues with interconnecting multiple
areas and how OSPF addresses each.
✦Explain the differences between the possible types of
areas, routers, and LSAs.
✦Explain how OSPF supports the use of VLSM.
✦Explain how OSPF supports the use of route
summarization in multiple areas.
Interconnecting Multiple OSPF Areas
Exam Objectives
The listing of this section’s objectives are continued on the next slide.

Routing
 Page 63
✦Explain how OSPF operates in a multiple-area NBMA
environment.
✦Configure a multiarea OSPF network.
✦Verify OSPF operation in multiple areas.
✦Given an addressing scheme and other laboratory
parameters, configure a multiple-area OSPF
environment and verify proper operation (within
described guidelines) of your routers.
Interconnecting Multiple OSPF Areas
Exam Objectives (cont’d)

Routing
 Page 64
✦Describe the issues with interconnecting multiple
areas and how OSPF addresses each.
• OSPF supports hierarchical routing to solve the following
issues:
✔Frequent Shortest Path First (SPF) algorithm calculations
> Detailed routing information is kept within areas; it is not necessary
to flood all link-state changes to other areas.
> While SPF is running, the router is not routing.
✔Large routing tables
> Detailed routing entries for specific networks are kept within the
area.
✔Large link-state tables and Link-State Update (LSU) overhead
> LSUs can contain many types of LSA.  Routes can be summarized
between areas to reduce the overhead associated with LSUs when
crossing areas.
Interconnecting Multiple
OSPF Areas
OSPF requires a hierarchical topology.  This means that addressing will be summarized
easily.

Routing
 Page 65
✦Explain the differences between the possible types of
LSAs, routers, and areas.
• Routers
✔Internal Router
✔Backbone Router(Area 0) – All other areas must connect to
area 0, either directly or through virtual links.
✔Area Border Router (ABR) – Connects two or more areas
✔Autonomous System Border Router (ASBR) – Connects an area
in one AS to an external AS
Interconnecting Multiple
OSPF Areas
Routing from stub areas is based on default routes because stub areas have only one exit
point.  Stub areas also have no ASBR, which means no router that connects to external
routes or another Autonomous System (AS).
Content

Routing
 Page 66
✦Explain the differences between the possible types of
LSAs, routers, and areas (cont’d).
• Link-State Advertisements (LSAs)
✔Type 1:  Router link entry
✔Type 2:  Network link entry
✔Type 3 and 4:  Summary link entry
✔Type 5:  AS external link entry
Interconnecting Multiple
OSPF Areas
Routing from stub areas is based on default routes because stub areas have only one exit
point.  Stub areas have no ASBR.
Types 3, 4, and 5 are the most important to know.  These are not allowed in stub (type 5)
and totally stub areas (types 3, 4, and 5).
The router link states all of the links to the router sending out the LSA.  The list is of all of
the attached neighbors.
The network link is sent out by the destination router and lists all of the routers on the
segment it is the designated router for and has a neighbor relationship.  This LSA is flooded
to the whole area.
The summary link (ABR) is sent between areas and summarizes the IP network.  This LSA
is generated by the ABR.
The summary link (ASBR) is sent to a router that connects to the outside world.  This LSA
contains the cost from the ABR to the ASBR.
The external link is originated by the ASBR and flooded throughout the AS.
Content

Routing
 Page 67
✦Explain the differences between the possible types of
LSAs, routers, and areas (cont’d).
• Areas
✔Standard Area (accepts all LSAs)
✔Backbone Area (designated Area 0 and accepts all LSAs)
✔Stub Area (no LSA type 5)
✔Totally Stubby Area (no LSA types 3, 4, or 5)
Interconnecting Multiple
OSPF Areas
Link-State Advertisements (LSAs):
Type 1:  Router link entry
Type 2:  Network link entry
Type 3 and 4:  Summary link entry
Type 5:  AS external link entry
A Not-So-Stubby area creates type 7 LSAs to send across WAN links where they are
converted to type 5 LSAs.
Content

Routing
 Page 68
✦Explain how OSPF supports the use of VLSM.
• OSPF carries routing mask information within its updates
and supports summarization in all areas except totally stub
areas.
• Interarea route summarization is done on ABRs and applies
to routes within each area.  It does not apply to external
routes injected into OSPF through redistribution.
• Commands to perform OSPF route summarization:
✔Router(config-router)#area area-id range address-mask
> Consolidates intra-area routes on ABR
✔Router(config-router)#summary-address address mask
> Consolidates external routes on an ASBR
Interconnecting Multiple
OSPF Areas
The area range command is used only with Area Border Routers (ABRs).  It is used to
consolidate or summarize routes for an area.  The result is that a single summary route is
advertised to other areas by the ABR.  Routing information is condensed at area boundaries.
External to the area, a single route is advertised for each address range.  This is called route
summarization.
Multiple area router configuration commands, specifying the range option, can be
configured.  Thus, OSPF can summarize addresses for many different sets of address ranges.

Routing
 Page 69
✦Explain how OSPF supports the use of route
summarization in multiple areas.
• Route summarization is supported in all areas except totally
stub areas.  The hierarchical design of OSPF makes
summarization simple.
• Two types of summarization
✔Inter-area route summarization – Performed on ABR’s and
applies to routes from with in each area
✔External route summarization – Performed on routes that are
injected into OSPF via redistribution
Interconnecting Multiple
OSPF Areas
External route summarization – Redistribution of an external route is generally done from
an EGP (i.e. BGP) to the IGP (OSPF).
Inter-area route summarization – This is done between areas, for example, Area 1 to
Area 0.
Content

Routing
 Page 70
✦Explain how OSPF operates in a multiple-area NBMA
environment.
• This operation is similar to single-area NBMA.
• Two common configurations
✔Area 0 can be configured as the cloud that all other areas
connect through.
✔Area 0 can be configured as one of the areas connected to the
Frame Relay cloud that all other areas connect to.
Interconnecting Multiple
OSPF Areas
To configure OSPF in an NBMA environment:
Router(config-if)# ip ospf network non-broadcast
Router(config)#router ospf process-id
Router(config-router)# network address wild-card area area-id
If you want the area to be stub or totally stub, add the following command:
Router(config-router)#area area-id  [stub | stub no-summary]

Routing
 Page 71
✦Configure a multiarea OSPF network.
• ABRs
✔Router(config)#router ospf process-id
✔Router(config-router)#network address wildcard-mask area
area-id
✔Router(config-router)#area area-id virtual-link router-address
> Creates a virtual link(optional)
Interconnecting Multiple
OSPF Areas
Virtual links are used to connect areas not directly connected to Area 0 through another
area.
Router(config-if)# ip ospf network [non-broadcast | point-to-multipoint | point-to-point]
Router(config)#router ospf process-id
Router(config-router)# network address wild-card area area-id
If you want the area to be stub or totally stub, add the following command:
Router(config-router)#area area-id  [Stub | stub no-summary]
If it needs to go through another area to get to Area 0 (the backbone), add the following
command:
Router(config-router)#area area-id virtual-link router-address
Content

Routing
 Page 72
✦Configure a multiarea OSPF network (cont’d).
• Stub area
✔Router(config-router)#area area-id stub
> Creates a stub area
✔Router(config-router)#area area-id default-cost cost
> Specifies cost for default route sent into stub area
• Totally stub area
✔Router(config-router)#area area-id stub no-summary
Interconnecting Multiple
OSPF Areas
Content

Routing
 Page 73
✦Verify OSPF operation in multiple areas.
• Router#show ip ospf database
✔Displays the contents of the OSPF tables
• Router#show ip ospf process-id
✔Displays statistics about each area the router is connected to
• Router#show ip ospf virtual-links
✔Displays the status of the virtual links
• Router#show ip ospf border-routers
✔Lists the ABRs in the autonomous system
Interconnecting Multiple
OSPF Areas
Memorize these.
Content

Routing
 Page 74
✦Given an addressing scheme and other laboratory
parameters, configure a multiple area OSPF
environment and verify proper operation (within
described guidelines) of your routers.
Interconnecting Multiple
OSPF Areas
The information presented in the previous section is sufficient to complete this task.
This is covered in the OSPF lab.

Routing
CCNP™ Certification Boot Camp
Page 75
Lab 1
OSPF

Routing
 Page 76
Configuring EIGRP
Exam Objectives
✦Describe Enhanced IGRP features and operation.
✦Explain how EIGRP discovers, chooses, and
maintains routes.
✦Explain how EIGRP supports the use of VLSM.
✦Explain how EIGRP operates in an NBMA
environment.
✦Explain how EIGRP supports the use of route
summarization.
✦Describe how EIGRP supports large networks.
✦Configure Enhanced IGRP.
The remainder of the objectives for this section are continued on the next slide.

Routing
 Page 77
✦Verify Enhanced IGRP operation.
✦Given a set of network requirements, configure an
Enhanced IGRP environment and verify proper
operation (within described guidelines) of your
routers.
✦Given a set of network requirements, configure
Enhanced IGRP in an NBMA environment and verify
proper operation (within described guidelines) of your
routers.
Configuring EIGRP
Exam Objectives (cont’d)

Routing
 Page 78
Configuring EIGRP
✦Describe Enhanced IGRP features and operation.
• Features
✔Rapid convergence – EIGRP uses the Diffusing Update
Algorithm (DUAL).
✔Reduced bandwidth usage – EIGRP does not make periodic
updates.  Instead, it sends partial updates when paths or
metrics change.
Slide Content

Routing
 Page 79
Configuring EIGRP
✦Describe Enhanced IGRP features and operation
(cont’d).
• Features
✔Classless routing
✔Supports VLSM
✔Manual route summarization
✔Protocol independent
✔Uses multicast rather than broadcast
✔Unequal cost load balancing
✔Supports Multi-Access, point-to-point, and NBMA topologies
✔Supports integrated multiprotocol routing
Equal cost load balancing is enabled by default for all IP routing protocols.  Note that
EIGRP also provides unequal cost load balancing.  The configuration of load balancing is
not covered by the objectives.
Although EIGRP supports IP, IPX, and AppleTalk, IP is the only one most emphasized for
this exam.
Content

Routing
 Page 80
Configuring EIGRP
✦Describe Enhanced IGRP features and operation
(cont’d).
• Features (cont’d)
✔Uses complex metrics:
> Bandwidth
> Delay
> Reliability
> Loading
> Maximum Transmission Unit  (MTU)
The order of these metrics is important for setting seed metrics when performing
redistribution.
Content

Routing
 Page 81
Configuring EIGRP
✦Describe Enhanced IGRP features and operation.
• Operation
✔The Hello packets are used for neighbor discovery.
✔The Neighbor table lists adjacent routers.
✔The Topology table is created from the Neighbor table and
maintains a map of the network topology.
✔The Routing table is created by running DUAL on the Topology
table, which chooses the best routes to a destination network.
✔The successor is the primary route used to reach a destination.
✔The feasible successor is a backup route.
✔The feasible distance is the metric or cost from the router.
Slide Content

Routing
 Page 82
Configuring EIGRP
✦Explain how EIGRP discovers, chooses, and
maintains routes.
• Neighbors
✔Two routers become neighbors when they see each other’s
Hello packets.
> Hello address is 224.0.0.10.
> Hellos are sent every 5 seconds on WAN links with bandwidth
greater than T1 speeds.
> Hellos are sent every 60 seconds on WAN links with bandwidth less
than T1 speeds.
Slide Content

Routing
 Page 83
Configuring EIGRP
✦Explain how EIGRP discovers, chooses, and
maintains routes (cont’d).
• Neighbors (cont’d)
✔Neighbor table includes:
> Neighbor address
> Queue – Indicates the number of packets waiting to be sent
> Smooth Round Trip Timer (SRTT)
> Hold time
Neighbor address is the network address of the neighbor router.
Queue indicates the number of packets waiting to be sent.
Smooth Round Trip Timer (SRTT) indicates the average time it takes to send and receive
packets from the neighbor.
Hold time indicates the interval to wait without receiving anything from a neighbor before
defining the link as unavailable.
The show ip eigrp neighbors command provides the neighbor information.
Three missed Hellos starts the hold timer.
Content

Routing
 Page 84
Configuring EIGRP
✦Explain how EIGRP discovers, chooses, and
maintains routes (cont’d).
• Topology table is created from the Neighbor table.  The
Topology table holds primary and backup routes (successors
and feasible successors), up to six per destination.
• Routing table is compiled from the Topology table by running
DUAL to determine the best routes using the composite
metric.
EIGRP composite metrics are:
• Bandwidth
• Delay
• Reliability
• Loading
• Maximum Transmission Unit  (MTU)
Content

Routing
 Page 85
Configuring EIGRP
✦Explain how EIGRP discovers, chooses, and
maintains routes (cont’d).
• EIGRP DUAL finite state machine
✔Tracks all routes advertised by neighbors
✔Selects a loop-free path using a successor and remembers any
feasible successor
✔Uses the feasible successor if a successor is lost
✔Queries the neighbors and recomputes the new successor if
there is no feasible successor
DUAL is used to determine routes that are used as the Successor route.
Successor is the route selected as the primary route to a destination.
Feasible successor is the backup route that is kept in the topology table.
The routing information path is as follows:
• Hellos are exchanged with neighbors.
• Neighbors are put into the neighbor table.
• The router makes a topology table from the neighbor table.
• The router runs DUAL on the topology that holds both the successors and the feasible
sucessors table to determine the successors that are to be put into the routing table.
• The routing table is composed of successor routes.

Routing
 Page 86
Configuring EIGRP
✦Explain how EIGRP supports the use of VLSM.
• EIGRP supports manual route summarization using VLSM.
• EIGRP carries mask information so that masks can be
applied differently based on the requirements of those
subnets.
• EIGRP does not require a hierarchical topology and can
summarize discontiguous networks.
Slide Content

Routing
 Page 87
Configuring EIGRP
✦Explain how EIGRP operates in an NBMA
environment.
• EIGRP uses multicasts to communicate between routers for
both discovery and updates.

Routing
 Page 88
Configuring EIGRP
✦Explain how EIGRP supports the use of route
summarization.
• EIGRP supports manual route summarization using VLSM.
• EIGRP carries mask information so that masks can be
applied differently based on the requirements of those
subnets.
• EIGRP supports classful autosummarization by default.
EIGRP supports both classless and classful route summarization.
Content

Routing
 Page 89
Configuring EIGRP
✦Describe how EIGRP supports large networks.
• EIGRP uses complex metrics that scale to 255 hops.
• EIGRP uses complex metrics to take into account loading
and bandwidth on slower links.
• EIGRP provides autonomous systems, which help contain
update traffic.
• EIGRP provides for summarized routes.
• EIGRP provides for redistribution of routes.
EIGRP supports both classless and classful route summarization.
EIGRP also provides both equal cost and unequal cost load balancing.
All IP routing protocols support equal cost load balancing.

Routing
 Page 90
Configuring EIGRP
✦Configure Enhanced IGRP.
• EIGRP command summary
✔Router(config)#router eigrp autonomous-system-number
> Enables EIGRP and defines the AS
✔Router(config-router)#network network-number
> Assigns the network as part of the AS
✔Router(config-if)#bandwidth kilobits
> Defines the link speed to allocate a percentage for EIGRP traffic
The bandwidth command sets an informational parameter to communicate the current
bandwidth on the interface or subinterface.  EIGRP uses the minimum path bandwidth to
determine a routing metric.  The value is used in EIGRP updates and in computing load with
the ip bandwidth-percent eigrp command.  This is a routing parameter only; it does not
affect the physical interface.
Content

Routing
 Page 91
Configuring EIGRP
✦Configure Enhanced IGRP (cont’d).
• EIGRP command summary (cont’d)
✔Router(config)#ip bandwidth-percent eigrp as-number percent
> Allocates a percentage of the defined link bandwidth for EIGRP
traffic
> For Frame Relay on point-to-point interface, set the bandwidth to the
Committed Information Rate (CIR)
> For Frame Relay point-to-multipoint connections, set it to the sum of
all CIRs
✔Router(config-router)#no auto-summary
> Turns off classful automatic summarization (it is on by default)
✔Router(config-if)#ip summary-address eigrp as-number
address mask
> Defines a manual summary address for the link
EIGRP, by default, uses up to 50 percent of the bandwidth of a link.  The bandwidth
interface configuration command is used if some other fraction of the bandwidth is desired.
Note that values greater than 100 percent may be used; this may be useful if the bandwidth
is set artificially low for other reasons.
For Frame Relay on point-to-point interface, set the bandwidth to the Committed
Information Rate (CIR).
For Frame Relay on point-to-multipoint connections, set it to the sum of all CIRs.
Example of enhanced IGRP to use up to 75 percent of a 56-Kbps serial link:
interface serial 0  bandwidth 56  
ip bandwidth-percent eigrp 209 75
Content

Routing
 Page 92
Configuring EIGRP
✦Verify Enhanced IGRP operation.
• Router#show ip eigrp neighbors
✔Displays the neighbors discovered by IP EIGRP
• Router#show ip eigrp topology
✔Displays the IP EIGRP topology table
• Router#show ip route eigrp
✔Displays current EIGRP entries in the routing table
• Router#show ip protocols
✔Displays the parameters and current state of the active routing
protocol process
• Router#show ip eigrp traffic
✔Displays the number of IP EIGRP packets sent and received
Memorize these commands.
Content

Routing
 Page 93
Configuring EIGRP
✦Verify Enhanced IGRP operation (cont’d).
• Router#show ip eigrp events
✔Displays the different categories of EIGRP activity, including
route calculations
• Router#debug eigrp packet
✔Displays all types of EIGRP packets, both sent and received
• Router#debug eigrp neighbor
✔Displays the EIGRP neighbor interaction
Memorize these commands.
Content

Routing
 Page 94
Configuring EIGRP
✦Verify Enhanced IGRP operation (cont’d).
• Router#debug ip eigrp route
✔Displays advertisements and changes EIGRP makes to the
routing table
• Router#debug ip eigrp summary
✔Displays a brief report of the EIGRP routing activity
Memorize these commands.
Content

Routing
 Page 95
Configuring EIGRP
✦Verify Enhanced IGRP operation (cont’d).
• Stuck-in-Active(SIA) – If any neighbor fails to reply to a
query, the route stays active at the query router.
✔One way to help avoid the SIA condition is to limit the scope of
query propagation through the network.
These are additional reasons a router could be SIA:
• The router is too busy to answer the query, generally due to high CPU utilization.
• The router is having memory problems and cannot allocate the memory to process the
query or build the reply packet.
• The circuit between the two routers is not stable enough to support the
communications.  Packets are getting through to keep the neighbor relationship up,
but some queries or replies are getting lost between the routers.
Content

Routing
 Page 96
Configuring EIGRP
✦Given a set of network requirements, configure an
Enhanced IGRP environment and verify proper
operation (within described guidelines) of your
routers.
The information presented in the previous section is sufficient to complete this task.

Routing
 Page 97
Configuring EIGRP
✦Given a set of network requirements, configure
Enhanced IGRP in an NBMA environment and verify
proper operation (within described guidelines) of your
routers.
The information presented in the previous section is sufficient to complete this task.

Routing
CCNP™ Certification Boot Camp
Page 98
Lab 2
EIGRP

Routing
 Page 99
✦Describe BGP features and operation.
✦Describe how to connect to another autonomous
system using an alternative to BGP, static routes.
✦Explain how BGP policy-based routing functions
within an autonomous system.
✦Describe BGP communities and peer groups.
✦Describe and configure external and internal BGP.
✦Describe BGP synchronization.
✦Given a set of network requirements, configure a
BGP environment and verify proper operation
(within described guidelines) of your routers.
Configuring Basic Border Gateway Protocol
Exam Objectives

Routing
 Page 100
Configuring Basic Border
Gateway Protocol
✦Describe BGP features and operation.
• BGP is an Exterior Gateway Protocol (EGP).
• BGP is used between autonomous systems.
• BGP is an advanced distance-vector protocol.
• There is no hierarchy required.
• VLSM and CIDR are supported.
BGP is an EGP, and BGP is redistributed into an IGP, for example, RIP, OSPF EIGRP, or
IGRP.
BGP is used for the Core layer and the Internet.
Redistribution of BGP and EGP is generally performed into an IGP (OSPF, IGRP, EIGRP,
RIP).

Routing
 Page 101
✦Describe BGP features and operation (cont’d).
• When should BGP be used?
✔An AS allows packets to transit through it to reach other
autonomous systems.
✔An AS has multiple connections to other autonomous systems.
✔The flow of traffic entering and leaving the AS must be
manipulated.
Configuring Basic Border
Gateway Protocol

Routing
 Page 102
✦Describe BGP features and operation (cont’d).
• When should BGP not be used?
✔A single connection to the Internet or other AS
✔Routing policy and route selection are not a concern
✔Lack of memory or processor power on BGP routers to handle
constant updates
✔Limited understanding of route filtering and BGP path selection
process
✔Low bandwidth between autonomous systems
Configuring Basic Border
Gateway Protocol

Routing
 Page 103
Configuring Basic Border
Gateway Protocol
✦Describe BGP features and operation (cont’d).
• Internal BGP (IBGP)
✔BGP neighbors belonging to the same AS use IBGP.
✔Neighbors do not have to be directly connected.
• External BGP (EBGP)
✔This is used when neighbors belong to different AS.
✔Neighbors should be directly connected.
Slide Content

Routing
 Page 104
✦Describe BGP features and operation (cont’d).
• Policy-based routing
✔BGP allows administrators to define policies for how data will
flow through the AS.
✔BGP routers can advertise to its peers in neighboring AS only
those routes that it uses.  This must conform to the hop-by-hop
paradigm.
✔BGP does not enable one AS to send traffic to a neighboring
AS, intending that the traffic take a different route from that
taken by traffic originating in the neighboring AS.
• Peers
✔Peers are any two routers that have formed a TCP connection in
order to exchange BGP routing information.
Configuring Basic Border
Gateway Protocol
Policies are implemented using routing maps.  This is covered later in the course.
Hop-by-hop paradigm is the same as by hop count.
Content

Routing
 Page 105
✦Describe BGP features and operation (cont’d).
• The Metric is network reachability called path vectors or
attributes:
✔Next-hop
✔Weight
✔Local preference
✔AS-path
✔Origin
✔Multi-exit-discriminator (MED)
✔Community
• BGP has its own table in addition to the IGP routing protocol.
Information can be exchanged between the two tables.
Configuring Basic Border
Gateway Protocol
BGP is an EGP.
BGP is used for the Core layer and the Internet.
Mandatory attributes:
• AS-path – When a route update passes through, an AS number is added as a prefix to
that update.  This attribute is actually the list of AS numbers that a route has traversed
in order to reach the destination.
• Next-hop – This indicates the next hop necessary to reach the destination.
• Local preference (discretionary) – This indicates to routers in the AS which is the
preferred exit in the AS.  A path with a higher preference is preferred.
• Origin – The origin defines the origin of the path information.  It can be IGP (Internal
BGP), EGP (External BGP), or Incomplete.  Incomplete is a route learned via
redistribution or is unknown.
Optional attributes:
• Multi-exit-discriminator (MED) – This indicates a preferred path into an AS.  This is
just the opposite of the local preference attribute.
• Community – This defines a way of filtering incoming and outgoing routes.

Routing
 Page 106
✦Describe how to connect to another autonomous
system using an alternative to BGP, static routes.
Router(config)#ip route prefix mask {address | interface}
[distance]
Configuring Basic Border
Gateway Protocol
Static routes should be used when dynamic manipulation is not necessary:
• A single connection to the Internet or other AS
• Routing policy and route selection are not a concern
• Lack of memory or processor power on BGP routers to handle constant updates
• Limited understanding of route filtering and BGP path selection process
• Low bandwidth between autonomous systems
Router(config)#ip route prefix mask {address | interface} [distance]
• Prefix–IP route prefix for the destination
• Mask–Prefix mask for the destination
• Address– IP address of the next hop that can be used to reach that network
• Interface–Network interface to use
• Distance–(Optional) An administrative distance

Routing
 Page 107
✦Explain how BGP policy-based routing functions
within an autonomous system.
• BGP allows policy decisions at the AS level to be enforced:
✔BGP allows administrators to define policies for how data will
flow through the AS.
✔BGP routers can advertise to its peers in neighboring AS only
those routes that it uses, i.e., those in its routing tables.  This
must conform to the hop-by-hop paradigm.
Configuring Basic Border
Gateway Protocol

Routing
 Page 108
✦Describe BGP peer groups and communities.
• Peers (peering)
✔Peers are any two routers that have formed a TCP connection in
order to exchange BGP routing information.
✔Peers are the same as neighbors and are also called speakers.
• Peer groups
✔A BGP peer group is a group of BGP neighbors with the same
update policies.
✔Rather than separately defining the same policies for each
neighbor, a peer group can be defined assigning these policies.
Configuring Basic Border
Gateway Protocol
BGP neighbors are also called speakers.
Content

Routing
 Page 109
✦Describe BGP peer groups and communities (cont’d).
• Configuring peer groups
✔Neighbor group-name peer-group
> Defines a peer group
✔Neighbor address peer-group group-name
> Defines address of neighbors in peer group
Configuring Basic Border
Gateway Protocol
Slide Content

Routing
 Page 110
✦Describe BGP peer groups and communities (cont’d).
• Communities
✔A community is formed using the Community attribute:
> set community command
✔A community is a grouping of peer groups.
✔A community has ways of tagging routes to ensure consistent
filtering or route-selection policy.
✔Any BGP router can tag routes in incoming and outgoing routing
updates or during redistribution.
✔Any BGP router can filter routes in incoming or outgoing
updates, or select preferred routes based on communities.
✔By default, the community attribute is stripped in outgoing BGP
updates.
Configuring Basic Border
Gateway Protocol
The community attribute provides a way of grouping destinations that routing decisions can
be applied to.
These attributes are set with route maps through policies.
The community attribute is an optional attribute.
Content

Routing
 Page 111
✦Describe BGP peer groups and communities (cont’d).
• Communities
✔Set community no-export
>  Do not advertise this route to EBGP peers.
✔Set community no-advertised
>  Do not advertise this route to any peer.
✔Set community internet
> Advertise this route to the Internet community.
Configuring Basic Border
Gateway Protocol
Memorize these.
• The community attribute provides a way of grouping destinations that routing
decisions can be applied to.
• Set community no-export – Do not advertise this route to EBGP peers.
• Set community no-advertised – Do not advertise this route to any peer.
• Set community internet – Advertise this route to the Internet community.
Content

Routing
 Page 112
✦Describe and configure external and internal BGP.
• Internal BGP (IBGP)
✔When BGP neighbors belong to the same AS
✔Neighbors do not have to be directly connected
• External BGP (EBGP)
✔When neighbors belong to different AS
✔Neighbors should be directly connected
Configuring Basic Border
Gateway Protocol
Configuration of EBGP and IBGP is very similar.
Content

Routing
 Page 113
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands
✔Router(config)#router bgp autonomous-system
> Enables BGP routing
Configuring Basic Border
Gateway Protocol
Slide Content

Routing
 Page 114
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router(config-router)#network network-number mask
> Allows BGP to advertise an IGP route if it is already in the IP table
✔Router(config-router)#neighbor {ip-address|peer-group-name}
remote-as autonomous-system
> Activates a BGP session with another router, used for either IBGP or
EBGP
Configuring Basic Border
Gateway Protocol
These two commands are necessary to minimally configure BGP:
Router(config)#router bgp autonomous-system
Router(config-router)#neighbor {ip-address|peer-group-name} remote-as autonomous-system
Content

Routing
 Page 115
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router#clear ip bgp *
> Clears all BGP connections
Configuring Basic Border
Gateway Protocol
This command resets all BGP sessions.  Once all of them are reset, they have to go about re-
establishing communications from the beginning with respect to that router.
Use this command whenever any of the following changes occur:
• Additions or changes to the BGP-related access lists
• Changes to BGP-related weights
• Changes to BGP-related distribution lists
• Changes in the BGP timer’s specifications
• Changes to the BGP administrative distance
• Changes to BGP-related route maps
Content

Routing
 Page 116
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router(config-router)#no synchronization
> Disables BGP synchronization so that a router will advertise routes
in BGP before learning them in IGP
Configuring Basic Border
Gateway Protocol
By default, a BGP speaker does not advertise a route to an external neighbor unless that
route is local or exists in the IGP.  The no synchronization command allows the IOS
software to advertise a network route without waiting for the IGP.  This feature allows
routers and access servers within an autonomous system to have the route before BGP
makes it available to other autonomous systems.
BGP synchronization rule:  Do not use or advertise an external neighbor, a route learned by
IBGP, until a matching route has been learned from an IGP.
Content

Routing
 Page 117
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router(config-router)#neighbor {ip-address | peer-group-name}
next-hop-self
> Forces all updates for this neighbor to be advertised with this router
as the next hop
Configuring Basic Border
Gateway Protocol
Example for next–hop-self command:
This command is used with Frame Relay where a destination is not connected by a full mesh
and for routing update packets to get from, for example, routerA to routerC, it must go
through routerB.
The following example on routerB would have the following configuration.  It forces all
updates destined for 172.100.1.1 (routerC) to advertise this routerB as the next hop to
routerC:
router bgp 109
neighbor 172.100.1.1 next-hop-self
Content

Routing
 Page 118
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router(config-router)#aggregate-address ip-address mask
[summary-only]
> Creates an aggregate or summary address entry in the BGP table
Configuring Basic Border
Gateway Protocol
Using the aggregate-address command with no arguments will create an aggregate entry in
the BGP routing table if there are anymore specific BGP routes available that fall in the
specified range.  The aggregate route will be advertised as coming from your autonomous
system.
Content

Routing
 Page 119
✦Describe and configure external and internal BGP
(cont’d).
• Basic BGP commands (cont’d)
✔Router#show ip bgp [summary | neighbors]
> Displays information about BGP
✔Router#debug ip bgp
> Displays BGP events as they happen
Configuring Basic Border
Gateway Protocol
Memorize these commands.
Content

Routing
 Page 120
✦Describe BGP synchronization.
• BGP synchronization rule:  Do not use or advertise an
external neighbor, a route learned by IBGP, until a matching
route has been learned from an IGP.
✔This rule ensures consistency of information throughout the AS.
✔It is safe to turn off synchronization when all routers in the AS
are running BGP.
Configuring Basic Border
Gateway Protocol
Slide Content

Routing
 Page 121
✦Given a set of network requirements, configure a BGP
environment and verify proper operation (within
described guidelines) of your routers.
Configuring Basic Border
Gateway Protocol
The information presented in the previous section is sufficient to complete this task.
This is covered in the BGP lab at the end of the next section, “Implementing BGP in
Scalable Networks.”

Routing
 Page 122
Implementing BGP in Scalable Networks
Exam Objectives
✦Describe the scalability problems associated with
internal BGP.
✦Explain and configure BGP route reflectors.
✦Describe and configure policy control in BGP using
prefix lists.
✦Explain the use of redistribution between BGP and
Interior Gateway Protocols (IGPs).
✦Given a set of network requirements, configure a
multihomed BGP environment and verify
proper operation (within described
guidelines) of your routers.

Routing
 Page 123
✦Describe the scalability problems associated with
internal BGP.
• IBGP uses split horizons; routes learned via IBGP are never
propagated to other IBGP peers.
• Therefore, a full mesh is required for IBGP peers.
• Scalability quickly diminishes because the number of IBGP
sessions grows exponentially with the number of routers.
• Solution: Route reflectors
Implementing BGP in
Scalable Networks
Scalability quickly diminishes because the number of IBGP sessions = n(n-1)/2, where n is
the number of routers.

Routing
 Page 124
✦Explain and configure BGP route reflectors.
• Route reflectors modify the BGP split horizon rule by
allowing the router configured as the route reflector to
propagate routes learned by IBGP to other IBGP peers.  This
solves the full mesh requirement.
Implementing BGP in
Scalable Networks

Routing
 Page 125
✦Explain and configure BGP route reflectors (cont’d).
• Route reflector terminology
✔Route reflector – A router configured to be a router that is
allowed to advertise routes learned via IBGP to other IBGP
peers called clients
✔Client – A directly attached neighbor to the reflector (done by
designating the client as the client on the reflector with the
route-reflector-client command)
✔Nonclient – A neighbor in a different AS
✔Cluster – The combination of the route reflector and its clients
✔Cluster ID – Allows route reflectors to recognize updates from
other route reflectors in the same cluster
✔Originator-ID – An optional local BGP attribute that is created by
the route reflector
Implementing BGP in
Scalable Networks
Slide Content

Routing
 Page 126
✦Explain and configure BGP route reflectors (cont’d).
• Configuring BGP reflectors
✔Router(config)#router bgp autonomous-system
✔Router(config-router)#neighbor ip-address remote-as
autonomous-system
✔Router(config-router)#neighbor ip-address route-reflector-
client
Implementing BGP in
Scalable Networks
The route-reflector-client must be in the same AS as the reflector.
By default, all IBGP speakers in an autonomous system must be fully meshed, and
neighbors do not readvertise IBGP learned routes to neighbors.  This prevents a routing
information loop.
If you use route reflectors, all IBGP speakers do not need to be fully meshed.  In the route
reflector model, an internal BGP peer is configured to be a route reflector responsible for
passing IBGP learned routes to IBGP neighbors.  This scheme eliminates the need for each
router to talk to every other router.
Use the neighbor route-reflector-client command to configure the local router as the route
reflector and the specified neighbor as one of its clients.  All of the neighbors configured
with this command will be members of the client group, and the remaining IBGP peers will
be members of the nonclient group for the local route reflector.
Content

Routing
 Page 127
✦Describe and configure policy control in BGP using
prefix lists.
• To restrict routing information to and from neighbors, use
prefix lists.
✔Filtering with prefix lists:
> Empty prefix lists permit all routes.
> Permit is equivalent to use this route.
> Router begins the search at the statement at the top of the prefix
list, with the lowest sequence number.
> When there is a match, the rest of the list is ignored.
> Implicit deny is assumed at the end of the prefix list.
Implementing BGP in
Scalable Networks
Distribute list (using access lists) are made obsolete by prefix lists in IOS 12.
Content

Routing
 Page 128
✦Describe and configure policy control in BGP using
prefix lists (cont’d).
• Configuring prefix lists
✔Router(config)#ip prefix-list [seq seq-value] {deny | permit}
network/len [ge ge-value] [le le-value]
> Creates a prefix list
✔Router(config-router)#neighbor {ip-address | peer-group-name}
prefix-list prefix-listname {in | out}
> Configures the router to distribute BGP neighbor information as
specified in the prefix list
✔Router(config)#no ip prefix-list list-name
> Deletes a prefix list
Implementing BGP in
Scalable Networks
Prefix sequence numbers are automatically generated.

Routing
 Page 129
✦Describe and configure policy control in BGP using
prefix lists (cont’d).
• This prefix list only permits the route 172.0.0.0/8 to be sent
to the router (neighbor) with address 10.10.10.2 in AS 50:
✔RouterA(config)#router bgp 45
✔RouterA(config-router)#network 192.168.1.0
✔RouterA(config-router)#neighbor 10.10.10.2 remote-as 50
✔RouterA(config-router)#neighbor 10.10.10.2 prefix-list super
out
✔RouterA(config)#ip prefix-list super permit 172.0.0.0/8
Implementing BGP in
Scalable Networks

Routing
 Page 130
✦Describe and configure policy control in BGP using
prefix lists (cont’d).
• To verify the prefix list:
✔Router#show ip prefix-list
✔Router#show ip prefix-list detail
> Shows the hit count and the description
• To clear the hit count of the prefix list:
✔Router#clear ip prefix-list
Implementing BGP in
Scalable Networks
Memorize these commands.

Routing
 Page 131
✦Explain the use of redistribution between BGPs and
Interior Gateway Protocols (IGPs).
• BGP has its own table in addition to IGP routing table
(information can be exchanged between them)
• Redistribution of dynamic IGP routes into BGP
✔Not recommend for unstable routes
✔Include only local routes
• Redistributing static routes into BGP
✔Use the aggregate-address command
• Redistribution of BGP into an IGP with the following
command:
✔redistribute protocol [process-id] {level-1 | level-1-2 | level-2}
[metric metric-value]
Implementing BGP in
Scalable Networks
You can implement aggregate routing in BGP either by redistributing an aggregate route
into BGP or by using this conditional aggregate routing feature.
• aggregate-address address mask [as-set] [summary-only] [suppress-map map-
name] [advertise-map map-name] [attribute-map map-name]
• Address - Aggregate address
• Mask - Aggregate mask
• as-set - (Optional) Generates autonomous system set path information
• summary-only - (Optional) Filters all more specific routes from updates
• suppress-map map-name - (Optional) Name of route map used to select the
routes to be suppressed
• advertise-map map-name - (Optional) Name of route map used to select the
routes to create AS-SET origin communities
• attribute-map map-name - (Optional) Name of route map used to set the
attribute of the aggregate route
• redistribute protocol [process-id] {level-1 | level-1-2 | level-2} [metric metric-value]
The levels are optional and used for IS-IS (not used for this course).  By
default, route redistribution is disabled.

Routing
 Page 132
✦Explain the use of redistribution between BGPs and
Interior Gateway Protocols (IGPs) (cont’d).
• Advertising from BGP into IGP
✔Done with redistribution
> For ISP AS connection:
– Redistribution is not done.
– Use the no synchronization command.
✔For other AS
> Redistribution can be done, but it is best to filter them.
> Redistribution into BGP is required if:
– Not all routers run BGP.
– It requires external route knowledge.
> Use default routes instead.
Implementing BGP in
Scalable Networks
In default configuration, a BGP speaker does not advertise a route to an external neighbor
unless that route is local or exists in the IGP.  The no synchronization command allows the
Cisco IOS software to advertise a network route without waiting for the IGP.  This feature
allows routers and access servers within an autonomous system to have the route before
BGP makes it available to other autonomous systems.
For redistribution, use the redistribute command:
redistribute protocol [process-id] {level-1 | level-1-2 | level-2} [metric metric-value]
The levels are optional and used for IS-IS (not used for this course).
By default, route redistribution is disabled.

Routing
 Page 133
✦Given a set of network requirements, configure a
multihomed BGP environment and verify proper
operation (within described guidelines) of your
routers.
• What is multihoming?
✔Connecting to two or more ISPs
• Types of multihoming:
✔Default routes from all providers
✔Customer routes and default routes from all providers
✔Full routes from all providers
Implementing BGP in
Scalable Networks

Routing
 Page 134
✦Given a set of network requirements, configure a
multihomed BGP environment and verify proper
operation (within described guidelines) of your routers
(cont’d).
• Commands necessary to configure BGP path preferences:
✔Router(config-router)#neighbor {ip-address | peer-group-name}
weight weight
> Assigns a weight to a neighbor connection
✔Router(config-router)#bgp default local-preference value
> Changes the default local preference value
Implementing BGP in
Scalable Networks
The information presented in the previous section is sufficient to complete this task.
This is covered in the BGP lab.
neighbor {ip-address | peer-group-name} weight weight
• ip-address – Neighbor’s IP address
• peer-group-name – Name of a BGP peer group
• weight – Weight to assign (acceptable values are 0 to 65,535)
All routes learned from this neighbor will have the assigned weight initially.  The route with
the highest weight will be chosen as the preferred route when multiple routes are available
to a particular network.
The weight can also be configured with router maps with the set command or matched with
the match command.
bgp default local-preference value
no bgp default local-preference value
• Value – Local preference value from 0 to 4,294,967,295.  Higher is preferred.
• default – Local preference value of 100
Generally, the default value of 100 allows you to easily define a particular path as less
preferable than paths with no local preference attribute.  The preference is sent to all routers
and access servers in the local autonomous system.
The following example raises the default local preference value from the default of
100 to 210:
router bgp 200
bgp default local-preference 210

Routing
CCNP™ Certification Boot Camp
Page 135
Lab 3
BGP

Routing
 Page 136
Optimizing Routing Update Operation
Exam Objectives
✦Select and configure the different ways to control
routing update traffic.
✦Configure route redistribution in a network that does
not have redundant paths between dissimilar routing
processes.
✦Configure route redistribution in a network that has
redundant paths between dissimilar routing processes.
✦Resolve path selection problems that result in a
redistributed network.
The list of objectives is completed on the next slide.

Routing
 Page 137
✦Verify route redistribution.
✦Configure policy-based routing using route maps.
✦Given a set of network requirements, configure
redistribution between different routing domains and
verify proper operation (within described guidelines)
of your routers.
✦Given a set of network requirements, configure
policy-based routing within your pod and verify
proper operation (within described guidelines) of your
routers.
Optimizing Routing Update Operation
Exam Objectives (cont’d)

Routing
 Page 138
✦Select and configure the different ways to control
routing update traffic.
• Route filtering – Uses access lists to filter route update traffic
about specific networks:
✔Router(config-router)#distribute-list {access-list-number | name
} out [interface-name | routing-process | autonomous-system
number]
✔Router(config-router)#distribute-list {access-list-number | name
} in [type number]
Optimizing Routing
Update Operation
Valid access-list number values are 1 through 199 and 1300 through 2699.

Routing
 Page 139
✦Select and configure the different ways to control
routing update traffic (cont’d).
• Changing administrative distance
✔Router(config-router)#distance weight [address mask [access-
list-number | name]][ip]
• Passive interfaces
✔Router(config-router)#passive-interface type number
> Prevents routing protocol updates from being generated on the
interface (however, updates can be received)
Optimizing Routing
Update Operation
An administrative distance is an integer between 0 and 255.  The higher the value, the lower
the trust rating.  An administrative distance of 255 means the routing information source
cannot be trusted at all and should be ignored.
When the optional access list number is used with this command, it is applied when a
network is being inserted into the routing table.  This behavior allows filtering of networks
according to the IP address of the router supplying the routing information.  This could be
used as an example to filter out possibly incorrect routing information from routers not
under your administrative control.
Weight values are also subjective; there is no quantitative method for choosing weight
values.
For BGP, the distance command sets the administrative distance of the External BGP route.
passive-interface type number
• type – Interface type
• number – Interface number
For OSPF, routing information is neither sent nor received through the specified router
interface.  The specified interface address appears as a stub network in the OSPF domain.
Enhanced IGRP is disabled on an interface that is configured as passive, although it
advertises the route.

Routing
 Page 140
✦Select and configure the different ways to control
routing update traffic (cont’d).
• Default routes
✔Router(config)#ip default-network network-number
> Defines a default route
✔IP route 0.0.0.0 0.0.0.0 next-hop-router
> Defines gateway of last resort
> Special form of static route
Optimizing Routing
Update Operation

Routing
 Page 141
✦Select and configure the different ways to control
routing update traffic (cont’d).
• Static routes
✔Router(config)#ip route prefix mask address [distance] [tag tag]
[permanent]
> Defines a path using a next-hop address
> Use if you have a route to a defined address
> Requires redistribution
✔Router(config)#ip route prefix mask interface [distance] [tag
tag] [permanent]
> Defines a path using an interface
> Use if you do not have a route to the next-hop address
> Automatically redistributed in some cases
Optimizing Routing
Update Operation
Prefix:  IP route prefix for the destination
Mask:  Prefix mask for the destination
Address:  IP address of the next hop that can be used to reach that network
Interface:  Network interface to use
Distance:  (Optional) An administrative distance
tag tag:  (Optional) Tag value that can be used as a match value for controlling
redistribution via route maps
Permanent:  (Optional) Specifies that the route will not be removed, even if the interface
shuts down
Using a next-hop address defaults to an administrative cost of 1 so that the route must be
redistributed.
Using an interface number defaults to an administrative cost of 0, and these routes are
treated as directly connected.

Routing
 Page 142
✦Configure route redistribution in a network that does
not have redundant paths between dissimilar routing
processes.
• Router rip
✔Redistribute igrp 1
✔Passive-interface serial0.2
✔Passive-interface tokenring0
✔Passive-interface tokenring1
✔Network 172.16.0.0
✔Default-metric 3
• Router igrp 1
✔Redistribute rip Passive-interface serial0.1
✔Default-metric 10 100 255 1 1500
Optimizing Routing
Update Operation
EXAMPLE
See how the passive interface prevents routes from a particular routing protocol from being
forwarded needlessly on links when the remote router cannot understand or is not using the
protocol.
Redistribution is done with the following command:
redistribute protocol [process-id] {level-1 | level-1-2 | level-2} [metric metric-value]
Note that the levels for IS-IS are not necessary for this course.
Notice in the default metric command that this sets a seed metric for IGRP.  This is covered
later in the course.  The order of the values is as follows:
Bandwidth
Delay
Reliability
Loading
Maximum Transmission Unit  (MTU)

Routing
 Page 143
Optimizing Routing
Update Operation
✦Configure route redistribution in a network that has
redundant paths between dissimilar routing processes.
• Router rip
✔Redistribute igrp 1
✔Network 172.16.0.0
✔Default-metric 3
• Router igrp 1
✔Redistribute rip
✔Network 172.16.0.0
✔Default-metric 10 100 255 1 1500
✔Redistribute ospf 10 metric 128 120 255 1 1500
✔Distance 13 0.0.0.0 255.255.255.255 1
✔Access-list 1 permit 172.16.9.0
✔Access-list 1 permit 172.16.10.0
✔Access-list 1 permit 172.16.6.0
EXAMPLE
Notice in the third and fourth line from the bottom, the connection between the access list
number 1.  If there are routes from both routing protocols, the distance command is used,
along with the access list, to assign administrative distances to certain routes so they will be
redistributed differently.
Content

Routing
 Page 144
✦Resolve path selection problems that result in a
redistributed network.
• Seed metrics
✔Use the Default-metric command to establish the seed metric
for the route.
✔Once a compatible metric is established, the metric will
increment just like any other route.
✔Set the default metric larger than the largest native metric.
Optimizing Routing
Update Operation

Routing
 Page 145
✦Resolve path selection problems that result in a
redistributed network (cont’d).
• Commands for setting seed metrics:
✔Router(config-router)#default-metric bandwidth delay reliability
loading mtu
> For redistributing into IGRP and EIGRP
✔Router(config-router)#default-metric number
> For redistributing into OSPF, RIP, or BGP
Optimizing Routing
Update Operation
Note the order of the seed metrics.  IGRP and EIGRP seed metrics:  bandwidth, delay,
reliability, loading, and mtu

Routing
 Page 146
✦Verify route redistribution.
• Router#show ip route
✔Displays the contents of the IP routing table
• Router#traceroute [protocol] [destination]
✔Traces the path a packet takes
Optimizing Routing
Update Operation

Routing
 Page 147
✦Configure policy-based routing using route maps.
• Policies
✔Applied to incoming packets
✔Implemented using route maps
• Route maps are complex access lists.
Optimizing Routing
Update Operation

Routing
 Page 148
✦Configure policy-based routing using route maps
(cont’d).
• Overview of format for route-maps:
✔Route-map example permit 10
> Match xyz
> Match a
> Set b
> Set c
✔Route-map example permit 20
> Match w
> Set d
Optimizing Routing
Update Operation
For the Route-map named “example”, if the condition matches x, y, or z and matches a, the
set command will perform b and c.  If not, then if w is matched, d will be set.  If there is no
match, nothing will be done, and the route-map will perform as though it was not
configured.

Routing
 Page 149
✦Configure policy-based routing using route maps
(cont’d).
• Route map configuration (basic form)
✔Router(config)#route-map map-tag [permit | deny] [sequence-
number]
> Defines the condition for policy routing
✔Router(config-route-map)#match {condition}
> Defines the condition to match
✔Router(config-route-map)#set {actions}
> Defines the action to be taken when there is a match
✔Route(config-if)#ip policy route-map map-tag
> Specifies a route map to use for policy routing on an interface
Optimizing Routing
Update Operation

Routing
 Page 150
✦Configure policy-based routing using route maps
(cont’d).
• Route map configuration
✔Router(config-route-map)#match ip address
{access-list-number | name}
> Matches IP address for policy routing
✔Router(config-route-map)#match community number
> Uses the community attribute as a criteria for a match condition
✔Router(config-route-map)#match length min max
> Matches Layer 3 length of packet for policy routing
Optimizing Routing
Update Operation

Routing
 Page 151
✦Configure policy-based routing using route maps
(cont’d).
• Route map configuration (cont’d)
✔Router(config-route-map)#set ip next-hop ip-address
> Defines next hop to output packets for
✔Router(config-route-map)#set interface type number
> Defines the interface to output packets to
Optimizing Routing
Update Operation

Routing
 Page 152
✦Configure policy-based routing using route maps
(cont’d).
• Route map configuration (cont’d)
✔Router(config-route-map)#set interface type number
> Defines the interface to output packets to
✔Router(config-route-map)#set ip default next-hop ip-address
> Defines the next hop to output packets for that have no explicit route
to the destination
✔Router(config-route-map)#set default interface type number
> Defines the interface to output packets to that have no explicit route
to the destination
Optimizing Routing
Update Operation

Routing
 Page 153
✦Configure policy-based routing using route maps
(cont’d).
• Route map configuration (cont’d)
✔Set community no-export
>  Do not advertise this route to EBGP peers.
✔Set community no-advertised
>  Do not advertise this route to any peer.
✔Set community internet
> Advertise this route to the Internet community.
Optimizing Routing
Update Operation

Routing
 Page 154
✦Configure policy-based routing using route maps
(cont’d).
• To verify policy-based routing
✔Router#show ip policy
> Displays route maps configured on interfaces
✔Router#show route-map [map-name]
> Displays a route map
Optimizing Routing
Update Operation

Routing
 Page 155
✦Given a set of network requirements, configure
redistribution between different routing domains and
verify proper operation (within described guidelines)
of your routers.
Optimizing Routing
Update Operation
This has been covered in the course.

Routing
 Page 156
✦Given a set of network requirements, configure
policy-based routing within your pod and verify
proper operation (within described guidelines) of your
routers.
Optimizing Routing
Update Operation
This has been covered in the course.

Routing
 Page 157
Implementing Scalability Features in Your Internetwork
Exam Objectives
✦Given a set of network requirements, configure many
of the features discussed in the course and verify
proper operation (within described guidelines) of your
routers.
This section contains information that was previously introduced in this course:
• Routing Principles
• Extending IP Addressing
• Route Redistribution
• Connecting ISPs

Routing

   
B O O T  C A M P
    159
3
SWITCHING PRESENTATION

160    Unit 3—Switching Presentation

Switching
CCNP™ Certification Boot Camp
Page 161
Switching
Exam 640-504

Switching
 Page 162
Switching
Exam Topics
✦Bridging and Switching
✦OSI Reference Model and Layered Communication
✦Network Fundamentals
✦Standards Definitions
✦Cisco Fundamentals
✦Network Protocols
The course covers the materials in the Cisco Press book, Building Cisco Multilayer Switched
Networks, written by Karen Webb.
Supporting information and sample test questions can be found in the Coriolis Exam Cram
book, Switching, written by Richard Deal.
This course deals with the concepts of multilayer switching in an Ethernet environment.
High-level information about the Cisco Catalyst switch series will be needed, but you won’t
need to know detailed information about the switches.

Switching
 Page 163
Bridging and Switching
Exam Objectives
✦Broadcast
✦Multilayer Switching
✦Fast Ethernet
✦Static VLAN
✦Trunking
✦VTP
✦Routing
✦Multicast
✦PIM
✦Quality of Service
✦Security
These are the subheadings of the Bridging and Switching objectives section.

Switching
 Page 164
✦Describe the impact of broadcast traffic on a network.
✦Identify the components used to control  broadcast
traffic.
✦Identify the differences between Unicast, Broadcast,
and Multicast traffic.
Bridging and Switching
Broadcast
These Broadcast objectives will be discussed in the next series of slides.

Switching
 Page 165
Bridging and Switching
Broadcast
✦Describe the impact of broadcast traffic on a network.
• Broadcast traffic grows as the network grows
• Reduces bandwidth availability
• Broadcast storm can bring down network
• Directed and local broadcasts
The topic of multilayer switched networks primarily centers around Ethernet circuits.
Collisions are a major consideration on Ethernet networks but can be managed by using
switches, among other devices.  Full-duplex Fast Ethernet circuits eliminate collisions.
Broadcasts cannot be fully eliminated.  Broadcasts are used to advertise and locate services
available on the network.
Local broadcasts use the destination address of FFFF.FFFF.FFFF.  These packets are not
routed and must be read by every device on the local subnet that causes an interruption on
every device while it determines what to do with the packet.
Directed broadcasts have destination addresses like 155.23.44.255.  It is being directed to a
specific subnet or group of hosts on a subnet.  Directed broadcasts are routable.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p 4-8.

Switching
 Page 166
✦Identify components used to control broadcast traffic.
• Routers
• VLANs
Bridging and Switching
Broadcast
VLANs or Virtual LANs help reduce broadcast traffic by consolidating hosts and the
services they need, on one VLAN.  Broadcasts can then be restricted to the individual
VLAN.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 4-8.

Switching
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 287-292.
 Page 167
✦Identify the differences between Unicast, Broadcast,
and Multicast traffic.
• Unicast
✔Application sends one copy of each packet to every client
✔Multiple streams to multiple clients
• Broadcast
✔Application sends one copy of each packet to broadcast
address
✔One stream to all clients
• Multicast
✔Application sends one copy of each packet to special multicast
address
✔One stream to multiple clients
Bridging and Switching
Broadcast
Particular attention should be paid to the nature of the data streams and the intended targets
for each of the traffic types.
We’ll talk about Multicast in much more detail later on.

Switching
 Page 168
✦Identify the layers of the OSI model that relate to
multilayer switching.
✦Describe the components of the hierarchical model.
✦Select the correct switch for each layer of the
hierarchical model.
✦Describe performance improvements possible with
MLS.
✦Describe MLS components.
✦Configure MLS on a switch.
✦Describe the various types of flow masks.
Bridging and Switching
Multilayer Switching
These Multilayer Switching objectives will be discussed in the next series of slides.

Switching
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 14-19.
 Page 169
✦Identify the layers of the OSI model that relate to
multilayer switching.
• Layer 2
✔Workgroup connectivity and network segmentation
✔ASICs provide frame forwarding
✔Hardware-based bridging
• Layer 3
✔Hardware-based routing
✔ASICs provide packet forwarding
✔Layer 3 switch performs routing tasks on a packet
Bridging and Switching
Multilayer Switching
All switching schemes require Layer 1 intervention.  You should pay particular attention to
the fact that Layer 2 switching is hardware-based bridging.  You should also know that
Layer 2 devices are usually switches or bridges.
The mnemonic “All People Seem To Need Data Processing” is an easy way to memorize
the order of the OSI reference model layers from Layer 7, application, to Layer 1, physical.
Layer 2 is the Data Link layer, which relates to hardware-based bridging.
ASIC (Application-Specific Integrated Circuit) is a processor designed to handle a limited
range of functions.

Switching
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 14-19.
 Page 170
✦Identify the layers of the OSI model that relate to
multilayer switching (cont’d).
• Layer 4
✔Layer 3 hardware-based routing that considers the application
✔Protocol types and port numbers used for switching
✔Access lists may be used for control
✔Quality of Service may be applied at this layer
✔Requires large cache areas
Bridging and Switching
Multilayer Switching

Switching
 Page 171
✦Describe the components of the hierarchical model.
• Access layer
✔Provides entry point into switched networks
✔Defines VLAN membership
✔Filters based on MAC addresses
✔Solves bandwidth problems
✔Typically 10-Mbps Ethernet service
✔Switch to desktop and servers
✔100-Mbps and 1,000-Mbps Ethernet if required
Bridging and Switching
Multilayer Switching
The Access layer provides connectivity for client hosts and servers to the network.  This
layer provides collision domain separation and VLAN capability.
The Access layer is typically concerned with low-cost, high-port density devices.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 20-22.

Switching
 Page 172
Bridging and Switching
Multilayer Switching
✦Describe the components of the hierarchical model
(cont’d).
• Distribution layer
✔Layer 3 switching/routing
✔Policy enforcement
✔Implements VLANs
✔Addressing and summarization
✔Translates between media types
✔Typically 100-Mbps service or gigabit speeds
✔Aggregates Access layer devices
✔Connects to Core layer devices
✔Supports router modules
• Core layer
✔Provides high-speed Layer 2 switching
✔Connects Distribution layer devices
✔Large, fast pipes (fast/gigabit Ethernet or ATM)
The Distribution layer normally provides connectivity between Access layer switching.
VLAN routing and encapsulation begins here.  Access lists may be used here to control
traffic.
The Core layer is designed to move large amounts of data very quickly between Distribution
layer devices.  Nothing should impede the data flow.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 20-22.

Switching
 Page 173
✦Select the correct switch for each layer of the
hierarchical model.
• Access layer
✔Catalyst 1900 and 2820 – Low-end 10 Mbps
✔Catalyst 2900 – Gigabit capability – 50 users
✔Catalyst 4000 – 96 users – 36-Gb  ports possible
✔Catalyst 5000 – More than 100 users
Bridging and Switching
Multilayer Switching
Pay particular attention to which switches are normally used at each layer.  Know which
switches provide Gigabit Ethernet support and how many ports they provide.
You should know that the Catalyst 1900 can have up to 24, 10Mbps ports and 2, 100Mbps
ports.  The 1900 does not have user-replaceable modules.
The 2820 is similar to the 1900 but has modules that can provide extended Fast Ethernet
capabilities.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 22-24.

Switching
 Page 174
✦Select the correct switch for each layer of the
hierarchical model (cont’d).
• Distribution layer
✔Catalyst 2926G – Works with external router
✔Catalyst 5000 – Supports RSM
✔Catalyst 6000 – Up to 130-Gb ports
• Core layer
✔Catalyst 6500 and 8500
Bridging and Switching
Multilayer Switching
Pay particular attention to each of the questions in Task 3 on Page 43 of the Cisco Press
book.  Know which switch to pick for each layer and why.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 22-24.

Switching
 Page 175
✦Describe performance improvements possible with
MLS.
• Provides framework for 20/80 network design rule
✔20% of network traffic remains on local subnet
✔80% of network traffic must cross Layer 3 device
• MLS moves Layer 3 function to switch hardware
✔Frame forwarding and rewrite processes
✔High speed, Layer 3 switching
Bridging and Switching
Multilayer Switching
Early network design was based on the premise that 80% of the network traffic would be
destined for devices on the local subnet.  Only 20% of the traffic would need to be routed
off of the local network.
The Internet changed all of that and caused the rule to flip-flop.  Designers are now aware
that up to 80% of the traffic in a network is destined for places not on the local network.
The challenge is to route that traffic as quickly as possible.
MLS moves some functions, like frame forwarding and the rewrite processes, to the switch.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 217-221.

Switching
 Page 176
✦Describe MLS components.
• Multilayer Switching Switch Engine (MLS-SE)
✔Operates on the switch itself
✔Moving and rewriting packets
• Multilayer Switching Route Processor (MLS-RP)
✔Operates on an RSM or external router
✔MLS configuration information and updates
• Multilayer Switching Protocol (MLSP)
✔Operates between the MLS-RP and an MLS-SE
Bridging and Switching
Multilayer Switching
Pay particular attention to the three components of Multilayer Switching, MLS-SE,
MLS-RP, and MLSP.
MLS-RP sends MLSP multicast hello advertisement to all network switches every
15 seconds containing the MAC of the MLS-RP; access list information, and additions and
deletions of routes.  MLSP uses the CGMP protocol.
MLS-SE receives the hello message and stores the MAC address of the RP in MLS cache.
Multiple RPs are distinguished by using an XTAG.
The MLS cache entries are unidirectional and specify both target IP and host IP.
When the MLS-SE does not find a cached entry for a packet, it sends the packet to the
MLS-RP for resolution.  The MLS-RP then sends the packet back to the switch (if it belongs
there) and the MLS-SE of the switch records a cache entry for the route.  Subsequent
packets are then switched without going to the RP.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 217-221.

Switching
 Page 177
✦Configure MLS on a switch.
• Configure MLS-RP:
✔Enable MLS (global):
> Mls rp ip
✔Assign MLS interface to VTP domain:
> Interface vlan 10
> Mls rp vtp-domain domainname
✔Enable MLS on an interface:
> Interface vlan 10
> Mls rp ip
Bridging and Switching
Multilayer Switching
This is the meat of MLS.  Pay particular attention to configuring the two components,
MLS-RP and MLS-SE.  Know the commands mls rp ip and set mls enable.
These commands are all issued from the enable prompt.  The command interface vlan 10
initially creates the VLAN10 interface, then allows for configuration of the interface.  Don’t
forget the no shutdown command on the initial configuration.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 227-233.

Switching
 Page 178
✦Configure MLS on a switch (cont’d).
• Configure MLS-RP (cont’d)
✔Assign an MLS Management Interface:
> Interface vlan 10
> Mls rp management-interface
✔Verify the configuration:
> Show running-config
> Show mls rp
• Configure MLS-SE:
✔Set mls enable
✔Show config
Bridging and Switching
Multilayer Switching
This is the meat of MLS.  Pay particular attention to configuring the two components,
MLS-RP and MLS-SE.  Know the commands mls rp ip and set mls enable.
One interface on the MLS-RP must be a management interface.  It must be specified as such
with the mls rp management-interface command.  If you do not set up a management
interface, no MLSP messages will be sent.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 227-233.

Switching
 Page 179
✦Describe the various types of flow masks.
• Destination-IP (default) – Least specific
• Source-Destination-IP
• IP-Flow – Most specific
• Output access lists
✔Application causes MLSP message to clear cache
✔Subsequent entries are relearned
• Input access lists
✔Application on an interface causes the MLS-SE to clear cache
✔All subsequent packets that may utilize that RP are routed and
will not be cached
Bridging and Switching
Multilayer Switching
The flow mask determines the information stored in the MLS cache.  It is dynamically
created (but may be manually set) based on access lists used on the MLS-RP.  Any changes
to the flow mask flush the cache entries and they must be relearned.
Destination-IP – This is the least-specific flow mask. The MLS-SE maintains one MLS
entry for each destination IP address. All flows to a given destination IP address use this
MLS entry. This mode is used if there are no access lists configured on any of the MLS-RP
interfaces.
Source-Destination-IP – This is the MLS-SE maintains one MLS entry for each source and
destination IP address pair. All flows between a given source and destination use this MLS
entry regardless of the IP protocol ports. This mode is used if there is a standard access list
on any of the MLS-RP interfaces.
IP-Flow – This is the most-specific flow mask. The MLS-SE creates and maintains a
separate MLS cache entry for every IP flow. An ip-flow entry includes the source IP address,
destination IP address, protocol, and protocol ports. This mode is used if there is an
extended access list on any of the MLS-RP interfaces
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 233-237.

Switching
 Page 180
✦Compare Fast Ethernet to Ethernet and Gigabit
Ethernet.
✦Describe a Fast Ethernet deployment strategy.
✦Detail the differences between full-duplex and half-
duplex circuits.
✦Describe autonegotiation and its shortfalls.
Bridging and Switching
Fast Ethernet
These Fast Ethernet objectives will be discussed in the next series of slides.

Switching
 Page 181
✦Compare Fast Ethernet to Ethernet and Gigabit
Ethernet.
• Ethernet – 100 meters 10BaseT – 5/90/5
• Fast Ethernet – 100 meters 100BaseTX
• Gigabit Ethernet – 100 meters 1000BaseTX
Bridging and Switching
Fast Ethernet
Particular attention should be paid to the 5/90/5 cabling rule.
5 meters – Switch to patch panel
90 meters – Patch panel to office punch-down block
5 meters – Office punch-down block to desktop connection.
Pay particular attention to the IEEE 802.3z standard which defines Gigabit Ethernet over
fiber optic cable.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 50-56.

Switching
 Page 182
✦Describe a Fast Ethernet deployment strategy.
• Access Layer
✔High-performance workstations
✔Applications requiring large bandwidth
• Distribution Layer
✔Connect Access to Distribution layers
✔Connect Distribution to Core layers
✔Connect Server Block to Core layer
• Core Layer
✔Interswitch connectivity
Bridging and Switching
Fast Ethernet
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 50-56.

Switching
 Page 183
✦Detail the differences between full-duplex and half-
duplex circuits.
• Half-duplex cannot simultaneously send and receive.
• Full-duplex can simultaneously send and receive.
• Full-duplex has separate transmission paths for transmit and
receive.
• Full-duplex disables collision detection and loopback
functions.
• Full-duplex with flow control allows the receiver to throttle the
data stream.
Bridging and Switching
Fast Ethernet
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 53-54 and Exam Cram Switching, Chapter 5, p. 76-79.

Switching
 Page 184
✦Describe autonegotiation and its shortfalls.
• Fast Ethernet standard to negotiate speed and duplex mode
• Chooses 100Base over 10Base and full- over half-duplex
• Loose standard and a possible compatibility issues
• Recommendation is to always configure speed and duplex
mode manually
Bridging and Switching
Fast Ethernet
Cisco recommends that you manually configure the line speed and duplex mode settings at
both ends of Fast Ethernet connections.  Pay particular attention to that.  Autonegotiation is
not well standardized and problems may occur.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 53-54 and Exam Cram Switching, Chapter 5, p. 76-79.

Switching
 Page 185
✦Compare Static VLANs to Dynamic VLANs.
• Static VLAN
✔Created by assigning a port to a VLAN
✔New devices assume the port’s VLAN
✔Administrator must manually make port-to-VLAN assignments
as devices are moved
• Dynamic VLAN
✔Uses CiscoWorks for Switched Internetworks (CWSI)
✔Base VLAN membership on MAC
✔New device queries database for VLAN membership
Bridging and Switching
Static VLAN
Dynamic VLANs are not addressed in the two books used for this course.  You should
know they exist, but don’t expend much effort on them.
Static VLANs allow you to configure one or more ports on a switch to be a member of a
specific VLAN.  Configuring a Static VLAN is easy.  For example, on the Catalyst 5000
switch, you would use these commands:
• Create the VLAN:
set vlan vlan_num [name name] [type type] [mtu mtu]
• Then assign it to a port:
set vlan vlan_num mod_num/port_list
You can enter groups of ports as individual entries (for example, 3/2, 3/3, 4/5, 4/8), or you
can use the hyphenated format (5/3-10).
You should pay particular attention to the fact that all Ethernet ports are assigned to
VLAN 1 by default.  VLAN 1 is normally used for management and troubleshooting and
cannot be deleted.
Once a port has been configured to belong to a VLAN, every device attached to that port
becomes a member of that VLAN.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 93-95.

Switching
 Page 186
Bridging and Switching
Trunking
✦Define Access Links.
✦Define Trunk Links.
✦Define Hybrid Links.
✦Define Native VLAN in a Trunk Link.
✦Use the show command to determine trunking
capabilities.
These Trunking objectives will be discussed in the next series of slides.

Switching
 Page 187
✦Define Access Links.
• Access lists are used to allow a single VLAN to span across
multiple switches
• Port must be routed to send and receive to or from other
VLANs
• Switch-to-switch
• Not routable
Bridging and Switching
Trunking
These three link types (access, trunk, and hybrid on the next slide) relate to the topic of
VLAN transportation between switches or between switches and routers.  When
transporting multiple VLANs across a link, there must be a way to identify which packets
belong to which VLAN.  Tagging and encapsulation protocols accomplish that goal by
imprinting each VLAN packet with specific information about the VLAN.
Access links don’t carry VLAN identification.  The switch strips any VLAN information
from the frame before sending it across the link.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 96-97.

Switching
 Page 188
✦Define Trunk Links.
• Can carry multiple VLANs
• Connect switches to switches or switches to routers
• Cisco supports on Fast Ethernet and Gigabit Ethernet ports
• Transports VLANs but does not belong to one
• VLAN ID protocols:  ISL and IEEE 802.1Q (tagging)
Bridging and Switching
Trunking
Pay particular attention to the fact that a Trunk Link transports VLANs and does not belong
to one.
You also need to pay particular attention to the two types of VLAN frame identification
protocols used on Ethernet circuits, ISL and IEEE 802.1Q (sometimes referred to as
Q-tagging).
Trunk links and hybrid links require some type of frame identification for each VLAN they
carry.  ISL is Cisco’s proprietary method.  IEEE 802.1Q is the industry standard.  Some
Catalyst switches do not support ISL.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 96-97.

Switching
 Page 189
✦Define Hybrid Links.
• Link is both trunk and access
• Carries both tagged and untagged frames
✦Define Native VLAN in a Trunk Link.
• VLAN trunk used if trunk link fails
Bridging and Switching
Trunking
Particular attention should be paid to the definition of a native VLAN on a Trunk Link,
which is the VLAN a trunk uses if the trunk link fails.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 97-98.

Switching
 Page 190
✦Use the show command to determine trunking
capabilities.
• show port capabilities
Bridging and Switching
Trunking
Console> (enable) show port capabilities 1/1
Model 
WS-X5530
Port 
1/1
Type 
10/100BaseTX
Speed 
auto,10,100
Duplex 
half,full
Trunk encap type 
802.1Q,ISL
Trunk mode 
on,off,desirable,auto,nonegotiate
Channel 
1/1-2,1/1-4
Broadcast suppression 
percentage(0-100)
Flow control 
receive-(off,on),send-(off,on)
Security 
yes
Membership 
static,dynamic
Fast start 
yes
QOS scheduling 
rx-(none),tx-(none)
CoS rewrite 
yes
ToS rewrite 
IP-Precedence
Rewrite 
yes
UDLD 
Capable
Voice vlan 
no
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 97-98.

Switching
 Page 191
✦Describe frame tagging and encapsulation.
• Methods for identifying (tagging) VLAN packets
• IEEE 802.1Q
✔Modifies Ethernet frame with VLAN identification
✔Adds user priority, CFI, and VLAN ID
✔Frame tagging
Bridging and Switching
Trunking
You should pay particular attention to:
• The VLAN frame identification method for ATM is LANE.
• The VLAN frame identification method for FDDI is 802.10.
• In 802.10, the VLAN identification information is written to the SAID (Security
Association Identifier) portion of the frame.
• 802.1Q modifies 4 bytes of an Ethernet frame.
CIF (Canonical Format Indicator) is used in Token Ring and Source-Routed FDDI.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 99-103.

Switching
 Page 192
✦Describe frame tagging and encapsulation (cont’d).
• ISL
✔Cisco proprietary method
✔Encapsulates Ethernet frame with 26-byte header and
4-byte FCS trailer
✔Works only with ISL-aware devices
✔Adds destination address, frame type, user priority, source
address, length, VLAN ID, and more to the packet
Bridging and Switching
Trunking
You should pay particular attention to:
• ISL is used on trunk links between switches.
• ISL adds 30 bytes to an Ethernet frame.
FCS stands for Frame Check Sequence.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 99-103.

Switching
 Page 193
✦Define the VLAN Trunking Protocol (VTP).
✦Describe VTP modes of operation.
✦Describe the precautions that you must take to add a
new switch to an existing VTP network.
✦Identify the various types of VTP advertisements.
✦Describe the importance of the VTP revision number.
✦Configure VTP on a switch.
✦Configure VTP pruning on a Catalyst switch.
Bridging and Switching
VTP
These VTP objectives will be discussed in the next series of slides.

Switching
 Page 194
✦Define the VLAN Trunking Protocol (VTP).
• Maintains VLAN configuration consistency throughout the
network
• Messaging protocol using Layer 2 trunk frames
• Manages addition, deletion, and rename of VLANs
• Centralized changes communicated to all switches
• Dynamic reporting of added VLANs
• Mapping scheme for trunking over mixed media
• “Plug-and-play” configuration for new VLANs
Bridging and Switching
VTP
Pay particular attention to the dynamic reporting ability of VTP.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 106-109.

Switching
 Page 195
✦Describe VTP modes of operation.
• Catalyst family switches can operate in these modes
• VTP Server Mode
✔Default mode
✔Create, modify, and delete VLANs
✔Advertise VLAN configuration to other switches in the
same VTP domain
✔Sync VLAN configuration with other switches
Bridging and Switching
VTP
You should pay particular attention to the capabilities available in each mode.
The switch must be in Server Mode to create, modify, or delete VLANs.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 109.

Switching
 Page 196
✦Describe VTP modes of operation (cont’d).
• VTP Client Mode
✔Same as Server except that it cannot create, modify, or delete
VLANs
• VTP Transparent Mode
✔Can create, modify, and delete VLANs
✔Propagates VLAN information but does not use it
Bridging and Switching
VTP
You should pay particular attention to the fact that Transparent Mode devices do not
participate in VTP but may forward VTP advertisements.
The switch must be in Server Mode to create, modify, or delete VLANs.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 109.

Switching
 Page 197
✦Describe the precautions that you must take to add a
new switch to an existing VTP network.
• Issue the clear config all command.
• Power-cycle the switch, which clears VTP NVRAM and sets
rev num to 0.
• Determine VTP mode of operation, most likely Client mode
(Server is the default mode).
• Configure VTP domain and other parameters.
Bridging and Switching
VTP
Pay particular attention to the requirement to issue the clear config all command and
power-cycle the switch when adding a new switch to an existing VTP network.  This forces
the revision number to be reset to 0 and minimizes the possibility of overwriting VTP
information on all switches in the network.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 109-111.

Switching
 Page 198
✦Identify the various types of VTP advertisements.
• Management domain name
• Configuration revision number
• Known VLANs
• VLAN parameters
• Advertisements sent as multicast frames
✔Not forwarded by normal bridging
Bridging and Switching
VTP
A VTP management domain is created when two or more switches are configured on the
same VTP domain.
Switches that participate in VTP (server and client), share the VTP advertisements with each
other.  Transparent mode switches may be set up to forward advertisements, but will not
generate or preserve the information contained within.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 109-111.

Switching
 Page 199
✦Describe the importance of the VTP revision number.
• Incremented with each VTP database modification by a
server
• Highest revision number is data used by all VTP devices
• Two databases with the same revision number are
assumed equal
• Critical that new switches have revision number set to zero
Bridging and Switching
VTP
Pay particular attention to the fact that VTP version 2 has enhancements over version 1 and
that among them are Token Ring Support.
Be aware that the VTP revision number plays a significant role in the synchronization of
VTP information on all of the switches in a network.  Introducing a new switch into the
network that may have a higher revision number than any other switches in the network
causes that switch’s data to be taken as the most current and all other switches will assume
its properties.  Be sure to go through the clear config all command and power-cycle routine
before adding a new switch to an existing VTP domain.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 111-115.

Switching
 Page 200
✦Configure VTP on a switch.
• Set version (v2 is the default):  set vtp v1 enable
• Set domain:  set vtp domain domainname password helper
• Set mode:  set vtp domain domainname mode server
• Useful show commands
✔Show vtp domain
✔Show vtp statistics
Bridging and Switching
VTP
Pay particular attention to the set vtp domain command.  It allows you to create a domain,
set a password, and set the VTP mode for a switch.  It is a global command.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 111-115.

Switching
 Page 201
✦Configure VTP pruning on a Catalyst switch.
• Pruning drops VLAN broadcasts if no members of VLAN
exist on a switch port.
• Set vtp pruneeligible 2-500
Bridging and Switching
VTP
Pruning enhances network performance by eliminating VLAN broadcasts on to those ports
that do not have any active members of that VLAN.  BPDU (Bridge Protocol Data Units)
broadcasts will still occur on the pruned circuits in order to maintain the Spanning-Tree
Protocol properly.  A more effective method of eliminating VLAN broadcast traffic might
be to eliminate the unused VLAN from the switch port.  That would also eliminate the STP
BPDU broadcast traffic.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 115-118 and Chapter 5, p. 187.

Switching
CCNP™ Certification Boot Camp
Page 202
Lab 4
VLANs

Switching
 Page 203
✦Identify issues associated with routing between
VLANs.
✦Configure RSMs on a switch.
✦Configure External Route Processors to route VLANs.
✦Identify the methods used to locate a host’s default
router.
Bridging and Switching
Routing
These Routing objectives will be discussed in the next series of slides.

Switching
 Page 204
✦Identify issues associated with routing between
VLANs.
• VLANs isolate traffic
• Need route processor to communicate between VLANs
• Need default gateway established for each switch
• ISL and 802.1Q provide packet tagging:
✔Allows multiple VLANs to be routed over the same port
✔Router or Route Switch Module
Bridging and Switching
Routing
Isolated Broadcast Domains – One of the primary reasons for deploying VLANs is also
one of its bigger problems.  VLANs often need to communicate between each other.  Route
Processors provide that capability.
Finding the Route – The switch needs to be configured with a default gateway so that the
switch knows where to find the nearest route processor.
Supporting Multiple VLAN Traffic – Each VLAN that traverses over a trunk link must
terminate at a separate interface on the RP.  While that is not always physically possible, the
use of sub-interface numbers allows this assignment to happen.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 115-118 and Chapter 5, p. 187.3

Switching
 Page 205
✦Configure RSMs on a switch.
• Specify VLAN interface on the RSM.
✔Interface vlan10
• Specify an IP address for the interface.
✔Ip address 177.15.14.122 255.255.255.0
• Remove the administrative shutdown on the interface.
✔No shutdown
• Additional notes
✔An RSM has 512 MAC addresses available.
✔One MAC address is selected and used by all VLANs on the
RSM.
✔An RSM can support up to 253 VLANs.
Bridging and Switching
Routing
Pay particular attention to the number of MAC addresses available on an RSM and how
many of them are used.
RSM stands for Route Switch Module.
The interface vlan10 command will create the vlan10 interface if it does not exist.  If it
exists, the command will put you in the (config-if) mode where you can modify settings for
the VLAN interface.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 5, p. 192-201.

Switching
 Page 206
✦Configure External Route Processors to route VLANs.
• Identify the interface – Specify physical and logical interface.
✔Interface fastethernet 0/1.1
• Define the VLAN encapsulation for the VLAN ID.
✔encapsulation isl 10
• Specify an IP address for the interface.
✔Ip address 177.15.14.132 255.255.255.0
• Remove the administrative shutdown on the interface.
✔No shutdown
Bridging and Switching
Routing
The interface fastethernet 0/1.1 command establishes the f0/1.1 sub-interface, if it does not
already exist, and is a global command.  All of the other commands are interface-level
commands.
Encapsulation may be “isl” or “dot1q”, depending on the capabilities of the switch.
The number “10” in the encapsulation command is the VLAN number.  You must create a
separate subinterface for each VLAN you need to route.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 5, p. 201-202.

Switching
 Page 207
✦Identify the methods used to locate a host’s default
router.
• Default gateways
• Proxy ARP
• Routing protocol
Bridging and Switching
Routing
ARP stands for Address Resolution Protocol.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 7, p. 260-263 and Chapter 10, p. 369.

Switching
 Page 208
✦Describe Multicast traffic.
✦Describe the characteristics of IP multicasting.
✦Map a MAC address to the multicast address.
✦Describe improvements in IGMPv2.
✦Describe how switches use the CGMP protocol.
✦Describe the TTL assignment process.
Bridging and Switching
Multicast
These Multicast objectives will be discussed in the next series of slides.

Switching
 Page 209
✦Identify the types of trees associated with routing
multicast traffic.
✦Define the difference between dense mode and sparse
mode.
✦Identify the requirements that must be in place to
support multicasting.
✦Configure IP multicast routing on a Cisco multicast-
capable switch.
✦Configure debug for multicast packets.
Bridging and Switching
Multicast
These Multicast objectives will be discussed in the next series of slides.

Switching
 Page 210
✦Describe Multicast traffic.
• Source host sends single data stream to multiple clients
• Client device decides whether to listen or not
• Saves bandwidth by controlling traffic
• Packets are resent only when necessary
• Uses UDP at the Transport layer
Bridging and Switching
Multicast
Pay particular attention to these items:
• Multicast traffic is a single data stream directed to a single multicast address.
• The client host decides whether it should listen to the traffic.
• Packets are re-sent only when necessary – conserving bandwidth.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 291-292.

Switching
 Page 211
✦Describe the characteristics of IP multicasting.
• Transmits IP data frame to host group defined by a
single IP address
• Same best-effort delivery reliability as broadcast (UDP)
• Dynamic host group membership
• Supports all groups (location or membership size doesn’t
matter)
• Member host may belong to one or more multicast groups
• Multiple data streams for a single group address
Bridging and Switching
Multicast
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 293-294.

Switching
 Page 212
✦Map a MAC address to the multicast address.
• Class D range:  224.0.0.0 through 239.255.255.255
• Reserved list of well-known and administrative addresses
• Mapping IP Multicast to MAC address
✔MAC is 48 bits
✔High-order is always 25 bits:  00000001 00000000 11011110 0
✔Low-order 23 bits = Low-order 23 bits of IP multicast address
✔32-to-1 ratio of IP Class D to valid MAC
✔MAC address is always displayed in Hex notation
✔IP is displayed in decimal notation
Bridging and Switching
Multicast
Pay particular attention to the multicast address range and mapping an IP address to a MAC
address.
• MAC is always written in Hex.
• IP is normally written in decimal.
• MAC is 48 bits or 6 octets.
• The first 3 octets are always the same:  01-00-5E.
• The 5th and 6th octets always match IP (remember to convert to Hex from decimal).
• The 4th octet high-order bit is always 0.
• The 4th octet low-order 7 bits match IP 2nd octet low-order 7 bits.
• Remember to convert decimal to hex!
Review the table in Task 2 on page 319 and convert some of the addresses.  You can use the
Windows calculator to convert decimal to hex.
Multicast range 244.0.0.0 - 244.0.0.255 is reserved for local purposes.
Multicast range 239.0.0.0 - 239.255.255.255 is reserved for administrative scoping.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 292-295 and Task 2 on p. 319.

Switching
 Page 213
✦Describe improvements in IGMPv2.
• Changes improve leave/join latencies
• Provides for group-specific queries
• Determine which version in use
show ip igmp interface e0
Ip igmp version 1
Bridging and Switching
Multicast
IGMP (Internet Group Management Protocol):
• Controls and limits the flow of multicast traffic
• Queries messages to discover which devices belong to each multicast group
• Reports messages (response from host to query message)
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 296-307.

Switching
 Page 214
✦Describe how switches use the CGMP protocol.
• Cisco Group Management Protocol – Cisco Proprietary
• Lets switches learn about multicast clients.
• Disabled by default
✔Router:  ip cgmp
✔Switch:  set cgmp enable
Bridging and Switching
Multicast
CGMP:
• Switches store multicast group membership information in the Content Addressable
Memory (CAM) table.
• Routers and Layer 3 switches act as servers and the Layer 2 switches act as clients.
Pay particular attention to the commands used to enable CGMP on both the router (or RSM)
and the switch.  Be aware that CGMP is also disabled by default.
The show ip igmp interface mod_num/port_num command will show the status of CGMP
on the port.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 296-307.

Switching
 Page 215
✦Describe the TTL assignment process.
• Configure on border routers only
• TTL may be set per router interface:
ip multicast ttl-threshold 16
• TTL thresholds:
0
Restricted to same host
1
Restricted to same subnet
15
Restricted to same site
63
Restricted to same region
127
Worldwide
191
Worldwide; limited bandwidth
255
Unrestricted
Bridging and Switching
Multicast
TTL is the Time-to-Live field in the IP packet.  This field manages the propagation of
multicast packets through the border routers.  The TTL is set by the application.
Pay particular attention to TTL values of 1, 15, and 255.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 310-312.

Switching
 Page 216
✦Identify the types of trees associated with routing
multicast traffic.
• Source Distribution Tree – Shortest path from the sender to
the receiver
• Shared Distribution Tree – Single multicast tree
Bridging and Switching
Multicast
A distribution tree is a unique forwarding path between the source’s subnet and each subnet
containing members of the multicast group.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 306-309 and p. 312-317.

Switching
 Page 217
✦Define the difference between dense mode and sparse
mode.
• Dense Mode:  Almost all routers distribute multicast traffic to
each group.
✔DVMRP (Distance Vector Multicast Routing Protocol)
✔MOSPF (Multicast Open Shortest path First)
✔PIM DM (Protocol-Independent Multicast Dense Mode)
• Sparse Mode:  There are few routers involved in
multicasting.
✔CBT (Core-Based Trees)
✔PIM SM (Protocol-Independent Multicast Sparse Mode)
Bridging and Switching
Multicast
PIM is the important concept from this slide.  PIM may be used in either dense or sparse
modes of operation.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 306-309 and p. 312-317.

Switching
 Page 218
✦Identify the requirements that must be in place to
support multicasting.
• Server/client IP stack must support multicasting
• Server/client require applications that support multicasting:
✔Audio Broadcast
✔Video Broadcast
✔Videoconferencing
• Multicast-enabled NICs
• Layer 2 or 3 switched connection to sender and receiver
• Multicast ready switches
Bridging and Switching
Multicast
Pay particular attention to all of these requirements.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 327-329.

Switching
 Page 219
✦Configure IP multicast routing on a Cisco multicast-
capable switch.
• Router:
global:
ip multicast-routing
interface:
ip pim sparse-mode
interface:
ip pim rp-address 199.155.155.1
interface:
ip multicast ttl-threshold 16
interface:
ip igmp join-group group-address
interface:
ip igmp version 2
interface:
ip cgmp
• Switch:
global:
set cgmp enable
global:
set cgmp leave enable
Bridging and Switching
Multicast
Pay particular attention to the commands used to enable CGMP on a router interface or
switch.
Enabling IP multicast routing on Catalyst switch:
• Enable IP multicast routing.
• Enable PIM in the correct mode.
• Configure a rendezvous point for PIM sparse-mode.
• Configure the TTL threshold.
• Join a multicast group.
• Change the IGMP version.
• Enable CGMP.
• Enable CGMP fast-leave processing on the switch for IGMPv2.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 330-349.

Switching
 Page 220
✦Configure debug for multicast packets.
• Debug ip mpacket [detail] [acl] [group]
✔Detail is the IP header and MAC address.
✔Acl monitors are the only sources identified by access list.
✔Group monitors packets from a single group.
Bridging and Switching
Multicast
You should pay particular attention to the debug ip mpacket command.
Additionally, you should know the command used to display console information from the
debug and other commands if you are not at the console (terminal monitor).
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 342-343 and Chapter 7, p. 279.

Switching
 Page 221
✦Describe the PIM protocol.
✦Configure PIM on a router interface in both dense and
sparse modes.
Bridging and Switching
PIM
These PIM objectives will be discussed in the next series of slides.

Switching
 Page 222
✦Describe the PIM protocol.
• Multicast routing protocol
• Works in both dense and sparse modes
• Works with RIP, IGRP, EIGRP, and OSPF
• Supports dense and sparse modes simultaneously
✦Configure PIM on a router interface in both dense and
sparse modes.
• Router(config-if)# ip pim dense-mode
• Router(config-if)# ip pim sparse-mode
Bridging and Switching
PIM
PIM stands for Protocol-Independent Multicast.
The sparse-mode version of PIM requires the establishment of one or more rendezvous
points.  A rendezvous point is a router that is the central point of the tree for all multicast
traffic.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p. 314-317 and Chapter 9, p. 331-335.

Switching
 Page 223
✦Define Quality of Service.
• QoS is a guarantee of service
• Certain applications guaranteed certain bandwidth
✔Videoteleconferencing
✔Voice
• Layer 4 activity
Bridging and Switching
Quality of Service
Quality of Service and HSRP are topics that may be reserved for last if time is a
consideration.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 19 and Chapter 7, p. 259-271.

Switching
 Page 224
✦Implement access lists and passwords on a switch.
✦Configure a switch to limit remote accessibility.
✦Assign passwords at every entry point on a switch.
Bridging and Switching
Security
These security objectives will be discussed in the next series of slides.

Switching
 Page 225
✦Implement access lists and passwords on a switch.
• Set password – Asks for old and new passwords
• Set enablepass – Asks for old and new passwords
• Access list
✔Access-list 50 permit 143.192.240.16
✔Access-list 50 permit 143.192.240.23
✔Line vty 0 4
✔Access-class 50 in
Bridging and Switching
Security
IOS command-based switch:
• enable password level 1 yourpassword – Normal access
• enable password level 15 yourpassword – Enable level password
Pay particular attention to the commands used to enable the passwords on a set-based
switch.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 64-66.

Switching
 Page 226
✦Configure a switch to limit remote accessibility.
• In-band and out-of-band management
✔In-band management
> TFTP
> HTTP
> Management Software (CiscoWorks)
> Virtual Terminals (vty 0-4) – telnet
✔Out-of-band management
> Console Port
> Auxiliary Port
Bridging and Switching
Security
TFTP stands for Trivial File Transfer Protocol.
HTTP stands for Hypertext Transfer Protocol.
Pay particular attention to knowing what the terms in-band management and out-of-band
management mean.  Be aware of the methods used to access the Cisco device using each
type of management technique.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 67-68.

Switching
 Page 227
✦Configure a switch to limit remote accessibility
(cont’d).
• In-band and out-of-band management
✔Security on con, aux, and vty ports
> Login – Requires a login for the port
> Password yourpassword – Sets the login password
> Access-class 1 in – Enables an access list on the port
✔HTTP Access Control
> Ip http access-class 1 – Enables an access list on the port
> Ip http authentication enable – Sets login and which password to
use
Bridging and Switching
Security
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 67-68.

Switching
 Page 228
✦Assign passwords at every entry point on a switch.
• User and Privileged modes
✔Set password
✔Set enablepass
• Con 0, Aux 0, Vty 0-4
✔Login
✔Password password
✔Access-class 50 in
• HTTP
✔Ip http access-class 50
✔Ip http authentication enable
Bridging and Switching
Security
Pay particular attention to the set password and set enablepass commands used for setting
the user-level and privileged-level access passwords.  These two commands are interactive
and require the switch administrator to enter the old password and the new password with
new password verification.
You should set login and password restrictions on the various physical and virtual ports of
the switch.  Don’t forget about HTTP.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 10, p. 369-370.

Switching
 Page 229
OSI Reference Model & Layered Communication
Exam Objectives
✦Fault Tolerance
✦Switch Components
✦RMON
✦Policy Management
These are the subheadings of the OSI Reference Model & Layered Communication
objectives section.

Switching
 Page 230
✦Identify routing issues common in a redundant
network.
✦Describe how HSRP can provide fault tolerance for
routers.
✦Configure a router to use HSRP.
✦Configure debug for HSRP.
OSI Reference Model & Layered Communication
Fault Tolerance
These Fault Tolerance objectives will be discussed in the next series of slides.

Switching
 Page 231
✦Identify routing issues common in a redundant
network.
• Default gateway fails
✔Traffic restricted to local network only
✔Workstation cannot select alternate router
• Proxy ARP
✔Workstation learns router MAC
✔Router fails
✔Workstation continues to send packets to failed router until ARP
cache is refreshed
• Workstation RIP
✔Slow to adapt to changes
• HSRP offers solutions to these three problems
OSI Reference Model & Layered Communication
Fault Tolerance
The Hot Standby Router Protocol (HSRP) offers a solution to these three problems in a
redundant network.
HSRP requires:
• An active router
• A standby router
• A virtual router
• Other routers
The virtual router advertises an IP address and a MAC address.  If the active router fails, the
client system still sends traffic to the virtual address, which then gets processed by the
standby router.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 7, p. 260-266.

Switching
 Page 232
✦Describe how HSRP can provide fault tolerance for
routers.
• Allows standby router to immediately take over for failed
active router
• Virtual router advertises consistent IP and MAC address
• HSRP states
✔Initial
✔Learn
✔Listen
✔Standby
✔Active
OSI Reference Model & Layered Communication
Fault Tolerance
Quality of Service and HSRP are topics that may be reserved for last if time is a
consideration.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 19 and Chapter 7, p. 259-271.

Switching
 Page 233
✦Configure a router to use HSRP.
• Active router
✔router(config)# interface VLAN10
✔router(config-if)# ip address 177.34.22.14
✔router(config-if)# standby 23 ip 177.34.22.142
✔router(config-if)# standby 23 priority 150
✔router(config-if)# standby 23 preempt
• Standby router(s)
✔router(config)# interface VLAN10
✔router(config-if)# ip address 177.34.22.24
✔router(config-if)# standby 23 ip 177.34.22.142
✔router(config-if)# standby 23 priority 100
✔router(config-if)# standby 23 preempt
OSI Reference Model & Layered Communication
Fault Tolerance
Reference:  Building Cisco Multilayer Switched Networks, Chapter 7, p. 272-279.

Switching
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 342-343 and Chapter 7, p. 279.
 Page 234
✦Configure debug for HSRP.
• Debug standby
✔Debug standby monitors HSRP state changes and packet
information.
OSI Reference Model & Layered Communication
Fault Tolerance
You should pay particular attention to the debug ip mpacket command.
Additionally, you should know the command used to display console information from the
debug and other commands if you are not at the console (terminal monitor).

Switching
 Page 235
✦Identify the layers of the OSI model that apply to
multilayer switching.
✦Describe the methods for controlling multicast traffic
in Layer 2 switches.
OSI Reference Model & Layered Communication
Switch Components
These Switch Component objectives will be discussed in the next series of slides.

Switching
 Page 236
✦Identify the layers of the OSI model that apply to
multilayer switching.
• Data Link
✔Layer 2
✔Frames
✔Switches/bridges
• Network
✔Layer 3
✔Packets
✔Routers and RSMs
• Transport
✔Layer 4
✔TCP segments
✔TCP Ports
OSI Reference Model & Layered Communication
Switch Components
Layer 2 is hardware-based bridging.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p. 13-20.

Switching
 Page 237
✦Describe the methods for controlling multicast traffic
in Layer 2 switches.
• VLANs can be defined to correspond to multicast group
boundaries
✔Requires additional administrative effort
✔Not dynamic to membership changes
• Snoop IGMP queries to learn port mappings
✔Allows dynamic tracking of group membership
✔Consumes switching capacity
✔May degrade performance
• Cisco Group Management Protocol (CGMP)
✔Catalyst switches learn of multicast clients from routers and
Layer 3 switches
OSI Reference Model & Layered Communication
Switch Components
When a router sees an IGMP (Internet Group Management Protocol) multicast group join or
leave messages, it creates a CGMP packet.
The CGMP packet contains the request type (join or leave), the multicast address, and the
actual MAC address of the client.
The CGMP packet is sent to all switches via a well-known address that all switches listen to.
Each switch checks the packet content and creates the proper entries in its forwarding CAM
(Content Addressable Memory) table.
The switch now knows how to switch traffic intended for a specific multicast group.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 8, p 305-306..

Switching
 Page 238
✦Describe the RMON groups that are supported on
Cisco switches.
• Statistics Group
✔Port Utilization
✔Error Statistics
• History Group
✔Periodic Statistics
• Alarm Group
✔Alarm Thresholds
> Rising Threshold
> Falling Threshold
OSI Reference Model & Layered Communication
RMON
Pay particular attention to the four RMON (Remote Monitoring) groups that Cisco switches
support:
•
Statistics
•
History
•
Alarm
•
Event
RMON uses SNMP configuration commands.  It is disabled by default.  These are typical
commands used with RMON:
•
set snmp rmon enable
•
set snmp community read-only public
•
set snmp community read-write private
•
set snmp trap enable all
•
set snmp trap #.#.#.# public
Note Content
Reference:  Exam Cram Switching, Chapter 7, p. 128-129.

Switching
 Page 239
✦Describe the RMON groups that are supported on
Cisco switches (cont’d).
• Event Group
✔Monitor logging events
• SPAN (with probe or protocol analyzer)
✔Can capture the other five RMON groups
> Host Group
> HostTopN Group
> Matrix Group
> Filters Group
> Packet Capture Group
OSI Reference Model & Layered Communication
RMON
Pay particular attention to the fact that SPAN (Switched Port Analyzer), in conjunction with
a probe or protocol analyzer, can capture the other five RMON groups.
Note Content
Reference:  Exam Cram Switching, Chapter 7, p. 128-129.

Switching
 Page 240
✦Describe policies typically implemented at the Access
layer.
✦Describe policies typically implemented at the
Distribution layer.
✦Describe policies typically implemented at the Core
layer.
OSI Reference Model & Layered Communication
Policy Management
These Policy Management objectives will be discussed in the next series of slides.

Switching
 Page 241
✦Describe policies typically implemented at the Access
layer.
• Entry point to the network
• Port security and passwords
• TACACS and RADIUS
OSI Reference Model & Layered Communication
Policy Management
TACACS  stands for Terminal Access Controller Access Control System.
RADIUS stands for Remote Authentication Dial-In User Service.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 10, p. 366-367.

Switching
 Page 242
✦Describe policies typically implemented at the
Distribution layer.
• Primary location of access policy (access lists)
• Ensures only necessary traffic passed to core or other
switches
• Advertises correct routing and services to core
• May restrict who gets what and how it gets delivered
OSI Reference Model & Layered Communication
Policy Management
Reference:  Building Cisco Multilayer Switched Networks, Chapter 10, p. 366-367.

Switching
 Page 243
✦Describe policies typically implemented at the Core
layer.
• Little or no policy control
• Should be as unrestricted as possible
OSI Reference Model & Layered Communication
Policy Management
Reference:  Building Cisco Multilayer Switched Networks, Chapter 10, p. 366-367.

Switching
 Page 244
Network Fundamentals
Exam Objectives
✦Cabling

Switching
 Page 245
Network Fundamentals
Cabling
✦Select the correct CAT5 cable to connect switch-to-
switch Ethernet ports.
• Use crossover cable
✦Select the correct CAT5 cable to connect switch-to-
workstation over Ethernet.
• Straight-through cable
• Used for switch to server or router
Pay particular attention to what type of cable is required for each of these connection types:
• Switch-to-switch – Use crossover cable
• Switch-to-workstation – Use straight-through cable
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 62.

Switching
 Page 246
Standard Definitions
Exam Objectives
✦IEEE Standards

Switching
 Page 247
Standard Definitions
IEEE Standards
✦Identify the IEEE standards for VLAN frame
identification.
✦Identify the IEEE standard for Gigabit Ethernet over
fiber.
✦Identify the IEEE standard for Gigabit Ethernet over
copper.
These IEEE Standards objectives will be discussed in the next series of slides.

Switching
 Page 248
✦Identify the IEEE standards for VLAN frame
identification.
• IEEE 802.1Q – Frame tagging
• LANE (LAN Emulation) – Transports VLANs over ATM
• Cisco proprietary:
✔ISL – Frame encapsulation
✔802.10 – Transports VLANs over FDDI
Standard Definitions
IEEE Standards
You should pay particular attention to understanding what each of these is used for:
IEEE 802.1Q
VLAN ID
Tagging
ISL
VLAN ID
Encapsulation
LANE
VLAN ID
ATM
IEEE 802.10
VLAN ID
FDDI
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 99-104.

Switching
 Page 249
✦Identify the IEEE standard for Gigabit Ethernet over
fiber.
• IEEE 802.3z combines IEEE 802.3 (Ethernet) and ANSI X3T
11 (FiberChannel)
✦Identify the IEEE standard for Gigabit Ethernet over
copper.
• IEEE 802.3ab
Standard Definitions
IEEE Standards
You should pay particular attention to the fact that Gigabit Ethernet over fiber optic cable
was defined in the IEEE 802.3z standard.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 55 and Exam Cram Switching, Chapter 5 p, 79.

Switching
 Page 250
Cisco Fundamentals
Exam Objectives
✦Debug
✦IOS CLI
✦Cisco TAC/CCO
These are the subheadings of the Cisco Fundamentals objectives section.

Switching
 Page 251
✦Create a line diagram of a typical hierarchical switch
network.
Cisco Fundamentals
Debug
Module/Port
Module/Port
Module/Port
Layer 2
Core Switch
# 1
Layer 2
Core Switch
# 2
Fast Ethernet
Links
Fast Ethernet
Links
Distribution Switch
54
Distribution Switch
55
Access Switch 154
1/1
1/5-1/6
1/7-1/8
1/7-1/8
1/5-1/6
1/1
1/12-1/15
1/12-1/15
Backup
Fast Ethernet
Link
Primary
Fast Ethernet
Link
0/4
0/26
0/25
Access Switch
Name ASW54
IP Address
144.143.5.154
PC Name
PC 22
IP Address
144.143.154.22
Distribution
Switch
IP Address
144.143.4.55
Distribution
Switch
IP Address
144.143.4.54
Ethernet Link
Pay particular attention to the format of this typical network diagram.  Be able to add VLAN
information and identify where access links and trunk links might be applied.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 2, p. 75.

Switching
 Page 252
✦Use set command-based commands to configure line
modes and speeds.
✦Use IOS command-based commands to configure line
modes and speeds.
Cisco Fundamentals
IOS CLI Switch
These IOS CLI Switch objectives will be discussed in the next series of slides.

Switching
 Page 253
✦Use set command-based commands to configure line
modes and speeds.
• Set port duplex 1/3 full
• Set port speed 100
✦Use IOS command-based commands to configure line
modes and speeds.
• Interface 1/3
• Duplex full
• Speed 100
Cisco Fundamentals
IOS CLI Switch
Particular attention should be given to the commands used to set duplex mode and line
speed on a switch and RSM.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 113 and Chapter 2, p. 70-71.

Switching
 Page 254
✦Describe assistance available from Cisco’s TAC and
CCO.
• TAC (Technical Assistance Center)
✔Provides tracking and feedback for open tickets
• CCO (Cisco Connection Online)
✔Pictures
✔Technical specifications
✔Explanation of options
Cisco Fundamentals
Cisco TAC/CCO
Reference:  Building Cisco Multilayer Switched Networks, Chapter 1, p 22..

Switching
 Page 255
Network Protocols
Exam Objectives
✦ATM and LANE
✦Switching
✦Switching Modes/Methods
✦Trunking
✦Port Configuration
These are the subheadings of the Network Protocols objectives section.

Switching
 Page 256
✦Identify the method used by Cisco switches to identify
VLAN frames over ATM.
• LANE is the protocol used
• IEEE standard
• LANE is an encapsulation method
Network Protocols
ATM and LANE
Reference:  Building Cisco Multilayer Switched Networks, Chapter 13, p. 99.

Switching
 Page 257
✦Describe the ISL protocol.
✦Define the ISL frame format.
✦Define the IEEE 802.1Q frame identification format.
✦Describe the modes of operation for the VTP protocol.
✦Describe the functions of STP.
✦Describe the root bridge election process.
Network Protocols
Switching
These Switching objectives will be discussed in the next series of slides.

Switching
 Page 258
✦Define root port.
✦Identify the Spanning Tree port states.
✦Manually configure a root bridge.
✦Implement Fast EtherChannel on a switch.
✦Configure PortFast.
✦Configure STP UplinkFast on a switch.
✦Configure BackboneFast.
✦Configure CGMP on a set-based switch.
Network Protocols
Switching (cont’d)
These Switching objectives will be discussed in the next series of slides.

Switching
 Page 259
✦Describe the ISL protocol.
• VLAN frame encapsulation protocol
• Cisco proprietary
• Multiplexes VLANs over trunk links
• Supported on Catalyst switches
Network Protocols
Switching
Pay particular attention to the fact that ISL maintains VLAN information over trunk links
between switches.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 99-102.

Switching
 Page 260
✦Define the ISL frame format.
• Encapsulates Ethernet frame
• 26-byte header and 4-byte trailer
• Header contains:
✔Destination address
✔Frame type
✔Source address
✔VLAN ID
✔Additional fields
Network Protocols
Switching
ISL recomputes the CRC for each frame.

Switching
 Page 261
✦Define the IEEE 802.1Q frame identification format.
• Frame tagging (dot1q)
• Modifies Ethernet frame to include:
✔Protocol identifier
✔VLAN ID
✔User priority
Network Protocols
Switching
Particular attention should be given to knowing that the 802.1Q frame-tagging protocol
works on both access and trunk links.
On any given link, the native VLAN numbers must be the same at each end.  If not, a
condition known as “Leaky Frames” could develop if 802.1q were to drop.  If the native
VLANs are different in that instance, the switches will not know how to deliver the frames.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 103-104 and p. 109.

Switching
 Page 262
✦Describe the modes of operation for the VTP protocol.
• Server
✔Full control
✔Full participation in VTP
• Client
✔Cannot create, change, or delete VLANs
✔Full participation in VTP
• Transparent
✔VTPV1 does not forward advertisements
✔VTPv2 forwards advertisements
Network Protocols
Switching
Pay particular attention to the VTP modes of operation.  Know that the client mode cannot
create, modify, or delete VLANs.  Know that transparent mode does not participate in VTP
but may forward VTP advertisements.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 103-104 and p. 109.

Switching
 Page 263
✦Describe the functions of STP.
• Avoids and eliminates loops in the network
• Determines where loops exist
• Blocks redundant links
• Root bridge brings up previously closed links in case of
failure
• STP is enabled by default on every port on a switch
Network Protocols
Switching
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 134 and 137.

Switching
 Page 264
✦Describe the root bridge election process.
• All switches advertise their root ID.
✔2-byte priority (always 0x8000 for Cisco switches)
✔6-byte MAC
• The lowest root ID becomes root bridge.
• All switches then advertise that device as the root bridge.
Network Protocols
Switching
Particular attention should be given to the components that make up a root ID.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 134 and 137.

Switching
 Page 265
✦Define root port.
• Root port is the port which provides the best path to root
switch.
✦Identify the Spanning Tree port states.
• Blocked – Initial state
• Listen – Looking for additional paths to root bridge
• Learn – Same as listen except can update address table
• Forward – May send and receive data
• Disabled – Hardware problems, deletion of native VLAN,
administrative
Network Protocols
Switching
Pay particular attention to the Spanning-Tree states and the normal transition time from
blocking to forwarding states.  Fifty (50) seconds is the normal time, based on this chart:
Blocking to Listening
20 seconds
Listening to Learning
15 seconds
Learning to Forwarding
15 seconds
You should also pay particular attention to the recommendation that the only time you
should modify Spanning Tree timers is during periods of instability.  They should be
increased to allow the network to stabilize.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p.139-141 and p.151-153.

Switching
 Page 266
✦Manually configure a root bridge.
• It should be near the center of the network
• Typically, this is a distribution layer switch
• The set spantree root command sets the primary root.
• The set spantree secondary command sets the backup
root bridge.
Network Protocols
Switching
set spantree root is a global command that reduces the bridge priority to 0x2000, which
allows it to win the root election process.
set spantree secondary reduces the bridge priority to 0x4000, which puts it in second place
on the election hierarchy.  0x8000 is the default on Cisco switches.
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 139-141 and p. 151-153.

Switching
 Page 267
✦Implement Fast EtherChannel on a switch.
• This allows parallel links to be treated as one physical link.
• The set port channel 1/1-3 on command is a set-based
switch.
• The port-channel mode on command is an IOS-based
switch that creates a virtual channel on the switch.
Network Protocols
Switching
Particular attention should be given to knowing what EtherChannel and PortFast do and the
commands needed to implement them.
The EtherChannel commands are both global commands.  The IOS-based command creates
a virtual port channel.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 159-165..3

Switching
 Page 268
✦Configure PortFast.
• Decreases time for listen and learn states
• Begins forwarding almost immediately
• Should implement only for server or workstation connections
• Switch> (enable) set spantree portfast 3/1
• Router(config-if)# spantree start-forwarding
Network Protocols
Switching
Particular attention should be given to knowing what EtherChannel and PortFast do and the
commands needed to implement them.
The PortFast commands are global or interface specific depending on whether the switch is
set-based or IOS-based.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 159-165.

Switching
 Page 269
✦Configure STP UplinkFast on a switch.
• Enables fast switchover to alternate ports when a direct link
to the root bridge fails
• Enabled on access switches
• Each switch must have redundant links
• Switch> (enable) set spantree uplinkfast enable
• Router(config)# uplink-fast
Network Protocols
Switching
You should pay particular attention to the descriptions of UplinkFast and BackboneFast,
know which switches they are typically implemented on, and the commands necessary to
configure them on a switch.
The set spantree uplinkfast enable command has optional keywords available that let you
control how quickly the cutover happens.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 165-170.

Switching
 Page 270
✦Configure BackboneFast.
• Enables switch to select new root port when an indirect link
to the root bridge fails or becomes blocked
• Must be enabled on all switches in network if used
• Switch> (enable) set spantree backbonefast
Network Protocols
Switching
You should pay particular attention to the descriptions of UplinkFast and BackboneFast,
know which switches they are typically implemented on, and the commands necessary to
configure them on a switch.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 165-170.

Switching
 Page 271
✦Configure CGMP on a set-based switch.
• Set cgmp enable
Network Protocols
Switching
Pay particular attention to the set cgmp enable command.  You’ve seen it on other slides.
CGMP is disabled by default.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 346-349 and Chapter 3, p. 99.

Switching
 Page 272
✦Outline the methods used to identify VLAN frames.
✦Describe autonegotiating requirements in trunk
negotiation.
Network Protocols
Switching Modes/Methods
These Switching Modes/Methods objectives will be discussed in the next series of slides.

Switching
 Page 273
✦Outline the methods used to identify VLAN frames.
• Frame tagging modifies the field in the Ethernet frame.
• Frame encapsulation surrounds the Ethernet frame with a
header and trailer.
Network Protocols
Switching Modes/Methods
Pay particular attention to these:
ISL
Encapsulation
Ethernet
IEEE 802.1Q
Frame Tagging Ethernet
LANE
ATM
802.10
FDDI
Frame Tagging does not alter the format of an Ethernet frame.  That fact allows the altered
frame to be sent anywhere as normal Ethernet traffic.
Frame Encapsulation, on the other hand, creates a completely new frame that requires the
same protocol on the other end of the link to be able to de-encapsulate the original frame.
ISL is Cisco proprietary and works well between switches.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 9, p. 346-349 and Chapter 3, p. 99.

Switching
 Page 274
✦Describe autonegotiating requirements in trunk
negotiation.
• VLAN trunk links on Fast Ethernet and Gigabit Ethernet
ports.
• Ports must be in the same VTP domain.
• One port is set to “auto” and is the default mode.
• The other port is set to “desirable”.
Network Protocols
Switching Modes/Methods
You should also pay particular attention to the requirements for the autonegotiation of
VLANs.  The ports must be in the same VTP domain.  Know the five possible trunking
modes and what they do in the autonegotiation process.
on
Sets port for permanent trunking
off
Sets port for permanent nontrunking
desirable
Negotiates trunk with another port set to on, 
desirable, or auto
auto
Cisco default which makes port willing to 
negotiate
nonegotiate
Sets port for trunking but neighbor port must be
manually configured
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 104.

Switching
 Page 275
Network Protocols
Trunking
✦Identify the trunk protocol used between two Catalyst
switch ports.
• Dynamic Trunking Protocol (DTP)
✔Point-to-point protocol
✔Operates between two Catalyst switch ports or between a
Catalyst switch and a router
✔Supports autonegotiation of ISL and IEEE 802.1Q trunks
✦Configure a trunk link.
• Set trunk 3/1 desirable 100-200 isl
Pay particular attention to the requirement that to autonegotiate trunking, both ports must be
in the same VTP domain.
Be sure to pay particular attention to the trunking modes available.  On, desirable, and auto
are the modes that work to autonegotiate a trunk.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 104-105.

Switching
 Page 276
✦Enable Inter-VLAN routing on a router.
✦Configure a trunk link with set-based commands.
✦Configure VTP with set-based commands.
✦Configure VTP Pruning on a switch.
✦Enable Spanning Tree on a switch.
✦Configure the Default Gateway on a switch and router.
✦Assign an MLS management interface.
Network Protocols
Port Configuration
These Port Configuration objectives will be discussed in the next series of slides.

Switching
 Page 277
✦Assign a VLAN ID to an interface.
✦Explain what happens when an output access list is
applied to an interface with an MLS flow mask.
✦Explain what happens when an input access list is
applied to an interface with an MLS flow mask.
✦Configure the multilayer switch switching engine on a
Catalyst switch.
✦Apply a standard access list on a router interface for
outbound traffic.
Network Protocols
Port Configuration (cont’d)
These Port Configuration objectives will be discussed in the next series of slides.

Switching
 Page 278
✦Enable Inter-VLAN routing on a router.
• Router(config)# interface ethernet 3/1.15
• Router(config-subif)# encapsulation isl 15
• Router(config-subif)# ip address 165.123.44.180
255.255.255.0
✦Configure a trunk link with set-based commands.
• Set trunk 3/1 desirable 2-300 isl
Network Protocols
Port Configuration
For ease of implementation, the subinterface number can be the same as the VLAN number.
This keeps things neat.
The encapsulation type can be either isl or dot1q, depending on the capabilities of the
switch.
Pay particular attention to the optional modes of the trunk link configuration, which are on,
off, desirable, auto, and nonegotiate.  The modes on, auto, and desirable are the modes that
allow autonegotiation to function.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 5, p. 199-202 and Chapter 3, p. 104-105.

Switching
 Page 279
✦Configure VTP with set-based commands.
• Create or join a management domain:
✔Set vtp domain domainname password password
• Configure the mode:
✔Set vtp domain domainname mode client
✦Configure VTP Pruning on a switch.
• Set vtp pruneeligible 55-100
Network Protocols
Port Configuration
Pay particular attention to the command used to establish the VTP mode for the switch.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 3, p. 113-118.

Switching
 Page 280
✦Enable Spanning Tree on a switch.
• Spanning-Tree Protocol is enabled by default on every port.
• If it becomes disabled for some reason:
✔Set spantree enable 3/1
• Additional commands:
✔Set spantree disable 3/1
✔Show spantree 15
Network Protocols
Port Configuration
You should pay particular attention to the spantree commands.  Know how to enable
(default) and disable Spanning-Tree on a port.  You should also know how to display port-
specific Spanning-Tree information with the show command.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 144 and Chapter 5, p. 203-205.

Switching
 Page 281
✦Configure the Default Gateway on a switch and router.
• Switch
✔set ip route default 177.240.110.1
• Router or IOS-based switch
✔ ip default-gateway 177.240.110.1 (global command)
Network Protocols
Port Configuration
Pay particular attention to the global command used to establish the default-gateway for a
Cisco IOS-based switch.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 4, p. 144 and Chapter 5, p. 203-205.

Switching
 Page 282
✦Assign an MLS management interface.
• One interface must be configured as the management-
interface in order to send MLSP messages
• Router(config-if)# mls rp management-interface
✦Assign a VLAN ID to an interface.
• Router(config)# interface 3/1
• Router(config-if)# mls rp vlan-id 15
Network Protocols
Port Configuration
Pay particular attention to the commands required to assign a VLAN ID to an interface on
an external router.
This topic relates to multilayer switching, which is inter-VLAN routing.  Switches and
internal route processors inherently use VLAN IDs to identify interfaces.  MLS requires that
each external router processor interface has an assigned VLAN ID.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 230-233.

Switching
 Page 283
✦Explain what happens when an output access list is
applied to an interface with an MLS flow mask.
• Extended output access list causes MLS-RP to tell the
MLS-SE to purge cached entries.
• Entries are then relearned.
✔They are sent through the access list to the route processor.
✔They are cached in the MLS cache when returned from the RP.
Network Protocols
Port Configuration
You should pay particular attention to the fact that the application of an extended access list
to the output of a router interface causes the MLS-RP to send a message to the MLS-SE
requesting that it purge all cache entries.  The entries will be relearned.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 235-238.

Switching
 Page 284
✦Explain what happens when an input access list is
applied to an interface with an MLS flow mask.
• Extended input access list causes MLS to purge cache
entries.
• Entries are not relearned.
• All subsequent packets must be routed.
Network Protocols
Port Configuration
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 235-238.

Switching
 Page 285
✦Configure the multilayer switch switching engine on a
Catalyst switch.
• Enabled by default on RSM
• Must be configured if an external router is used
✔Set mls enable
✔Set mls disable
Network Protocols
Port Configuration
Pay particular attention to the commands used to enable and disable MLS on a Catalyst
5000 or better switch.
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p. 238-244 and Ch 10, p. 379-382.

Switching
 Page 286
✦Apply a standard access list on a router interface for
outbound traffic.
• Develop the access list (implicit deny all at the end of the
list).
• Standard lists are numbered 1-99.
• Apply the list to the interface:
✔Router(config)# interface fastethernet 1/0
✔Router(config-if)# ip access-group 1 out
Network Protocols
Port Configuration
The other information you need to pay particular attention to is the command that applies an
access-list on an interface, ip access-group group_number out.  Build the access list, then
apply the group.  This command is an interface-level command.
MLS Flow Control depends on the application of an access list on the MLS-RP interface,
and on the type of access list applied.
• No access list
Destination-IP flow mask
• Standard access list
Source-Destination flow mask
• Extended access list
IP-flow mask
Note Content
Reference:  Building Cisco Multilayer Switched Networks, Chapter 6, p 238-244 and Chapter 10, p. 379-382.

Switching
CCNP™ Certification Boot Camp
Page 287
Lab 5
Trunking

Switching

   
B O O T  C A M P
Overview    289
4
ROUTING AND SWITCHING 
LABS
OVE R V IEW
The labs you will be using for this boot camp are designed to provide real-world 
examples for the configuration and management of Cisco routers.  These labs 
will also guide you through many of the commands and syntax needed to 
complete the CCNP exam.
Each lab contains a network diagram.  These diagrams are included in Unit 5.  
Study the diagram until you feel comfortable with the hardware and protocols 
used.  After you have studied the network diagram, complete the list of 
procedures.  
Each lab also includes a list of commands.  Study the command list to ensure 
you are comfortable with the syntax used to execute each command.  If you need 
help with the labs, review the study material or ask your Instructor for assistance. 

290    Unit 4—Routing and Switching Labs
N O T E S
IP  A DDRE SS ES  FOR  RO UTING  AND 
SWITCHI NG LABS
Pod1R1
Interface Name
IP Address
Subnet Mask
Area
S0
10.101.1.2
 /24
1
LO0
10.11.4.1
/24
1
LO1
10.11.5.1
/24
1
LO2
10.11.6.1
/24
1
LO3
10.11.7.1
/24
1
Pod1R2
Interface Name
IP Address
 Subnet Mask
Area
S0
10.101.2.2
/24
2
LO0
10.12.4.1
/24
2
LO1
10.12.5.1
/24
2
LO2
10.12.6.1
/24
2
LO3
10.12.7.1
/24
2
Pod1R3
Interface Name
IP Address
Subnet Mask
Area
S0/0
10.101.1.1
/24
1
S0/2
10.101.2.1
/24
2
E0
10.1.1.1
/24
0
Pod2R1
Interface Name
IP Address
Subnet Mask
Area
S0
10.102.1.2
/24
3
LO0
10.21.4.1
/24
3
LO1
10.21.5.1
/24
3
LO2
10.21.6.1
/24
3
LO3
10.21.7.1
/24
3
Pod2R2
Interface Name
IP Address
Subnet Mask
Area
S0
10.102.2.2
/24
4
LO0
10.22.4.1
/24
4
LO1
10.22.5.1
/24
4
LO2
10.22.6.1
/24
4
LO3
10.22.7.1
/24
4

IP Addresses for Routing and Switching Labs    291
N O T E S
Pod2R3
  
Interface Name
IP Address
Subnet Mask
Area
S0/0
10.102.1.1
/24
3
S0/2
10.102.2.1
/24
4
E0
10.1.1.2
/24
0
Pod3R1
Interface Name
IP Address
Subnet Mask
Area
S0
10.103.1.2
/24
5
LO0
10.31.4.1
/24
5
LO1
10.31.5.1
/24
5
LO2
10.31.6.1
/24
5
LO3
10.31.7.1
/24
5
Pod3R2
Interface Name
IP Address
Subnet Mask
Area
S0
10.103.2.2
/24
6
LO0
10.32.4.1
/24
6
LO1
10.32.5.1
/24
6
LO2
10.32.6.1
/24
6
LO3
10.32.7.1
/24
6
Pod3R3
Interface Name
IP Address
Subnet Mask
Area
S0/0
10.103.1.1
/24
5
S0/2
10.103.2.1
/24
6
E0
10.1.1.1
/24
0
Pod4R1
Interface Name
IP Address
Subnet Mask
Area
S0
10.104.1.2
/24
7
LO0
10.41.4.1
/24
7
LO1
10.41.5.1
/24
7
LO2
10.41.6.1
/24
7
LO3
10.41.7.1
/24
7

292    Unit 4—Routing and Switching Labs
N O T E S
Pod4R2
Interface Name
IP Address
Subnet Mask
Area
S0
10.104.2.2
/24
8
LO0
10.42.4.1
/24
8
LO1
10.42.5.1
/24
8
LO2
10.42.6.1
/24
8
LO3
10.42.7.1
/24
8
Pod4R3
Interface Name
IP Address
Subnet Mask
Area
S0/0
10.104.1.1
/24
7
S0/2
10.104.2.1
/24
8
E0
10.1.1.2
/24
0

Lab 1: OSPF    293
N O T E S
LAB  1:
OS PF
1.
Configure HyperTerminal to connect to your router using the Direct to 
Com1 or Direct to Com2 option.  Ensure that the settings are 8,1,N 
with no flow control.

Connect R3’s W0 Serial0(DCE) to R1’s Serial0 (DTE).

Connect R3’s W1 Serial0 (DCE) to R2’s Serial0 (DTE).

Ensure that R3 has Ethernet connectivity to HQCOR1.
2.
Start with the network diagram to identify which routers you will be 
configuring and carry out the following configuration.
3.
Address Serial and Loopback interfaces and test.

Using the ip address command, assign an IP address to Serial0.  (See 
address table.)

Using the Loopback interface # command, create loopback 0, 1, 2, 
and 3.

Assign IP addresses to your Loopback interfaces.  (See address table.)

Using ping, test connectivity to R3.

Using show ip route, look at your route table.  You should only see 
connected networks.

From global configuration mode, use the router ospf 1 command to 
create ospf router process 1.  You should now be in router config.

Type “network 10.0.0.0 0.255.255.255 area #”, using the area 
number in the address table.
4.
Exit configuration mode.  Use the show ip route command to see the 
new routes learned via OSPF.  You should see an entry for each network 
in the classroom.

What does the “O” indicate next to some of the entries in the routing 
table?

What is the purpose of the time value within a routing table?

What is the administrative distance and metric?  How was the metric 
calculated?
5.
Type the show ip protocols command.

How often are updates sent?

What is the holdtime?

What is the administrative distance?
6.
Type the show ip ospf neighbor command.

What is your neighbor router’s priority?

What is the significance of this number?

In which state do OSPF routers start exchanging routing  
information?

Are your routers in this state?

Why is there no DR or BDR on this link?

294    Unit 4—Routing and Switching Labs
N O T E S
7.
Type the show ip ospf interface serial 0 command.

What is your router ID?

Where did this number come from?

How many neighbor routers do you have?
8.
Look at the output of the show ip ospf database command.

What is the router ID?

What is the process ID?
9.
Type the show ip ospf command.

How many areas is this router configured for?

How many times has the SPF algorithm been executed for your area?
10.
Telnet to R3.  Go into router ospf 1 configuration mode.  (Note that the 
process ID of 1 does not need to be the same for the routers, it is just the 
same here for simplicity.)  
Use the area # range network_address subnet_mask command to set up 
summarization for the four loopback networks you created in step 3.  For 
example, area 3 range 10.1.4.0 255.255.252.0 would summarize 
10.1.4.0, 10.1.5.0, 10.1.6.0, and 10.1.7.0 into area 3.
11.
Exit configuration mode.  Looking at your route table, notice that you 
now have fewer routes and some of them are using a /22 mask instead of a 
/24.  These are the summarized routes.

Lab 2: EIGRP    295
N O T E S
LAB  2:
EIG RP
1.
Physical connectivity.  (This should already be in place from the OSPF 
lab.)

Connect R3’s W0 Serial0 (DCE) to R1’s Serial0 (DTE).

Connect R3’s W1 Serial0 (DCE) to R2’s Serial0 (DTE).

Ensure that R3 has Ethernet connectivity to HQCOR1.
2.
Address Serial and Loopback interfaces and test.  (This should already be 
in place from the OSPF lab.)

Using the ipaddress command, assign an IP address to Serial0.  (See 
address table.)

Using the Loopback interface # command, create Loopback 0, 1, 2, 
and 3.  Assign IP addresses to your Loopback interfaces.  (See      
address table.)

Using ping, test connectivity to R3.
3.
From global config, issue the no router ospf 1 command.  This will 
remove the OSPF process.
4.
Telnet to R3. 
From global config, type “no router ospf 1”.  Return to your router.
5.
Using show ip route, look at your route table.  You should only see 
connected networks.
6.
From global config, use the router eigrp 1 command to create EIGRP 
router process on Autonomous System 1.  You should now be in router 
config.  Type “network 10.0.0.0”.  Telnet to R3.  Type “router eigrp 1”, 
then type “network 10.0.0.0”.
7.
Return to your router.  Use the show ip route command to see the new 
routes learned via EIGRP.  Auto-summarization at the classfull boundary 
is not a problem in this case because all routers are subnetting 10.0.0.0 
with a 24-bit mask.
What does the D indicate next to some of the entries in the routing table?
Answer
This route was learned from EIGRP.
8.
Type the show ip protocols command.
What metric components are being used by default?
Answer
Bandwidth and reliability.  The values 
are:  default-metric, bandwidth, delay, 
reliability, loading, and mtu.
What is the default administrative distance?
Answer
90
9.
Disable automatic summarization with the no auto-summary command 
from router config.
10.
From interface config for Serial0, type “ip summary-address eigrp 1 
10.pr.0.0 255.255.0.0” (pr is your pod and router number).  For 
example, Pod3R2 would use 10.32.0.0.
11.
Telnet to R3 and use the no auto-summary command in router config to 
disable automatic summarization

296    Unit 4—Routing and Switching Labs
N O T E S
12.
Return to your router.  Use the show ip route command to see the new 
routes.
13.
Use the show ip eigrp neighbor command to answer the following 
question.
How long will the router wait to hear from the neighbor before declaring 
it down?
Answer
Value of the hold timer
14.
Use the show ip eigrp topology to answer the following questions.
What is meant by a Passive entry?  
Answer
The entry is stable
What is meant by the term Feasible Distance?
Answer
The cost to the destination through the 
router in this entry

Lab 3: BGP    297
N O T E S
LAB  3:
BG P
1.
On Router 3, use the passive-interface command in the EIGRP process 
to keep your EIGRP router from sending BGP information out the 
FastEthernet port to other pods.
2.
On Router 3, use the show ip route command.  You should only see 
routes in your EIGRP AS (your pod).
3.
Still on Router 3, from global config, type the router bgp 6500x 
command, where x is your pod number.  For example, pod 3 would type 
“router bgp 65003”.  This creates the BGP process on Router 3.  Type the 
neighbor 10.1.1.100 remote-as 65000 command on Router 3.  If the 
HQCOR router has BGP enabled, you should soon see BGP routes in 
your route table and BGP table.
Type “show ip bgp” and “show ip bgp neighbors”.  You should now see 
HQCOR1 as your neighbor and should see new routes in your tables.
4.
Return to your router.  Look at your route table and note that the routes 
learned from HQCOR1 are not present.
Why are these new routes not in the route table on R1 and R2?
5.
Return to Router 3.  Go into the EIGRP router process. 
Type “redistribute bgp 6500x metric 100 1 255 1 1500”, where x is your 
pod number.  For example, pod 2 would type 
“redistribute bgp 65002 metric 100 1 255 1 1500”.  This tells Router 3 
to take what it learns from BGP and inject it into EIGRP, so now R1 and 
R2 should be able to get those routes.
6.
Go back to your router.  Type the show ip route command.  You should 
now see the networks from HQCOR1.
Lab 3:  BGP
The Instructor should 
download the hqcor1-
lab3.txt file to the 
HQCOR1 router.  This 
will load several Loopback 
interfaces and set up OSPF, 
redistributing these 
networks into BGP.

298    Unit 4—Routing and Switching Labs
N O T E S
Commands to Understand for this Exercise

interface type number 

interface loopback number

ip address ip-address mask

neighbor ip-address remote-as as

network ip-address

network ip-address wild-card mask area

ping ip-address

redistribute bgp

remote-as as

router eigrp

router bgp

router ospf

router rip

show ip bgp

show ip bgp neighbors

passive-interface

show ip route

ip summary-address eigrp 

show ip eigrp topology 

no auto-summary 

Lab 4: VLANs    299
N O T E S
LAB  4:
V LANS
The company you work for has been adding systems and services to their 
network at a regular pace.  You and several of your co-workers have noticed a 
decrease in response from a database server that resides in a different switch 
group.  You decide to implement a VLAN to cut down on broadcast traffic.  
Your VLAN will be number 30 and will be named PodxGroup1.  You and some 
of your co-workers are on ports 1, 2, and 3 of switch PodxS1.  The server and 
two other co-workers are on ports 1, 2, and 3 of switch PodxS2.  Using the 
diagram for this lab, set up the VLAN for your group and verify the set up.
NOTE:
Instructor Setup—Obtain two Catalyst 1912 switches (labeled 
PodxS1 and PodxS2), one Catalyst 2926 XL switch (labeled 
PodxS3), two computers (PodxPC1 and PodxPC2), two UTP 
CAT5 crossover cables, two Cisco rollover cables, and two RJ-45-to-
DB-9 female DTE adapters (labeled TERMINAL).  Using a CAT5 
crossover cable, connect FastEthernet port Ax on PodxS1 to 
FastEthernet port 0/1 on PodxS3.  Connect the other CAT5 crossover 
cable from FastEthernet port Ax on PodxS2 to FastEthernet port 0/2 
on PodxS3.  Using the rollover cables and the DTE adapters, connect 
the PCs to the console port on the 1720 router and to the Com1 
interface on the PC.  Be sure that the PCs are configured with 
HyperTerminal.
1.
Configure VLAN 30 on ports 1, 2, and 3 of switches PodxS1 and 
PodxS2.  (For the following steps, PodxPC1 will perform these steps on 
switch PodxS1.  PodxPC2 will perform the same steps on switch PodxS2.)  
Click on Start | Programs | Accessories | Hyperterminal | Cisco.
Press ENTER a couple of times to bring up the router Command-Line 
Interface (CLI).
Type the IP address for PodxS1 (10.x.21.10) and press ENTER to telnet 
to the switch.  (Use 10.x.22.10 for PodxS2.)
At each of the following prompts, enter the information provided:
Enter Selection: k
Enter Password: ccnp <enter>
PodxS1>enable <enter>
Enter Password: ccnp <enter>

300    Unit 4—Routing and Switching Labs
N O T E S
a.
Examine the current configuration of PodxS1 for VLAN commands. 
PodxS1#show running-config <enter>
PodxS1#show vlan <enter>
PodxS1#show vlan-membership <enter>
What global VLAN entries exist?
Answer
None
What two entries exist for each interface?
Answer
None
What is the default VLAN number?
Answer
1
Which port is it enabled on?
Answer
 A
What other default VLANs exist?
Answer
FDDI, Token Ring, FDDInet, and 
Trnet
What membership type is in use on all ports?
Answer
Dynamic
b.
Add the new VLAN.
PodxS1#config t 
PodxS1(config)#vlan 30 name PodxGroup1 <enter>
(where x is your pod number)
PodxS1(config)#<ctrl+z>
c.
Examine the current configuration for VLAN commands. 
PodxS1#show running-config <enter>
PodxS1#show vlan  <enter>
What global VLAN entry exists?
Answer
vlan 30 name "Pod1Group1" sde 
100030 state Operational mtu 1500
What new VLAN exists?
Answer
30
What is its status?
Answer
Enabled
d.
Add VLAN 30 to ports 1, 2, and 3.  
PodxS1#config t <enter>
PodxS1(config)#interface ethernet 0/1 <enter>
PodxS1(config-if)#vlan-membership static 30 <enter>
PodxS1(config-if)#interface ethernet 0/2 <enter>
PodxS1(config-if)#vlan-membership static 30 <enter>
PodxS1(config-if)#interface ethernet 0/3 <enter>
PodxS1(config-if)#vlan-membership static 30 <enter>
PodxS1(config-if)#<ctrl+z>

Lab 4: VLANs    301
N O T E S
e.
Examine the current configuration for VLAN commands.
PodxS1#show running-config <enter>
PodxS1#show vlan <enter>
PodxS1#show vlan-membership <enter>
What entries exist for interface e0/1?
Answer
duplex full, vlan-membership static 30
What ports is VLAN 30 assigned to?
Answer
1, 2, and 3
What membership type is now in use on ports 1-3?
Answer
Static
2.
Configure VLAN 30 on the uplink ports of switches PodxS1 and PodxS2.  
Insure that the port’s duplex settings are correct.
a.
Select the FastEthernet port to configure.  Add this interface to 
VLAN 30.
PodxS1#config t <enter>
PodxS1(config)#interface fastethernet 0/26 <enter>
PodxS1(config-if)#vlan-membership static 30 <enter>
PodxS1(config-if)#duplex full <enter>
PodxS1(config-if)#<ctrl+z>
b.
Examine the current configuration for VLAN commands.
PodxS1#show running-config <enter>
PodxS1#show vlan <enter>
PodxS1#show vlan-membership <enter>
What entries exist for interface 0/26?
Answer
duplex full, vlan-membership static 30
Which ports use VLAN 30?
Answer
1-3 and A
What membership type is in use on port A?
Answer
Static

302    Unit 4—Routing and Switching Labs
N O T E S
3.
Configure VLAN 30 on the appropriate ports of switch PodxS3 to 
provide connectivity for VLAN 30 between switches PodxS1 and PodxS2.  
(For the following steps, PodxPC1 will perform these steps on the 
connection to PodxS1.  PodxPC2 will perform the same steps on the 
connection to PodxS2.)
PodxS1#exit <enter>
(to exit the Telnet session)
Type the IP address for PodxS3 (10.x.23.10) and press ENTER to telnet 
to the switch.
At each of the following prompts, enter the information provided:
Password: ccnp <enter>
PodxS3> enable <enter>
Password: ccnp <enter>
a.
Examine the current configuration of PodxS3 for VLAN commands.
PodxS3#show config <enter>
PodxS3#show vlan <enter>
What is the duplex setting for port 0/1?
Answer
Full
What is the VLAN membership status for port 0/1?
Answer
None
What is the default VLAN number?
Answer
1
Which port is it enabled on?
Answer
All ports
What other default VLANs exist?
Answer
FDDI, Token Ring, FDDInet, and 
Trnet
b.
Add the new VLAN.
PodxS3#vlan database <enter>
PodxS3(vlan)#vlan 30 name PodxGroup1 <enter>
(where x is your pod number)
PodxS3(vlan)#exit <enter>

Lab 4: VLANs    303
N O T E S
c.
Examine the current configuration for VLAN commands.
PodxS3(config)#show vlan <enter>
PodxS3#show vlan name PodxGroup1 <enter>
What new VLAN exists?
Answer
30
What is its status?
Answer
Active
What is the SAID value for the new VLAN?
Answer
100030
d.
Select the FastEthernet port to configure.  Add this interface to 
VLAN 30.
PodxS3#config terminal <enter>
PodxS3(config)#interface fastethernet 0/1 <enter>
Use port 0/2 from PodxPC2.
PodxS3(config-if)#switchport mode access <enter>
PodxS3(config-if)#switchport access vlan 30 <enter>
PodxS3(config-if)#end <enter>
e.
Examine the current configuration for VLAN commands.
PodxS3#show vlan <enter>
PodxS3#show interface fastethernet 0/1 switchport 
<enter>
Which ports use VLAN 30?
Answer
0/1 and 0/2
What is the operational mode of the interface?
Answer
Static access
What is the access mode VLAN value?
Answer
30 (PodxGroup1)
f.
Save your configuration changes, exit the Telnet session, and close 
Telnet.
PodxS3#copy running-config startup-config <enter>
PodxS3#exit <enter>
4.
Connect a workstation to port E0/1 on Pod1S1 and another to port E0/1 
on Pod1S2.  Change the IP address of the workstation on Pod1S1 to 
10.X.21.100/8 and the one on Pod1S2 to 10.X.22.100/8.  Is the VLAN 
working properly?
Open a DOS window on each workstation.  From the workstation on 
Pod1S1, use the ping 10.X.22.100 command.  From the workstation on 
Pod1S2, use the ping 10.X.21.100 command.  Each of these pings 
should succeed.
Now disconnect the workstation from E0/1 on Pod1S2 and connect it to 
E0/10 on Pod1S2.  This should remove the workstation from the VLAN.  
Now repeat the two ping attempts from the previous step.  The pings 
should both fail.  If the first pings succeeded and the second pings failed, 
that shows that the new VLAN is working properly.  

304    Unit 4—Routing and Switching Labs
N O T E S
Commands to Understand for this Exercise

1900 Switch commands (IOS Command-based switch):

config [terminal]

enable [access-level]

interface type module/port

show interfaces [type module/port] [basic | secondary]

show running-config

show vlan [vlan]

show vlan-membership

vlan vlan [name vlan-name] [sde said-value] [state {operational | 
suspended}] [mtu mtu-size] [{ethernet | fddi | tokenring} ring-
number ring-no parent-vlan parent-vlan | {fddi-net | tr-net} bridge-
number bridge-number stp-type {ibm | ieee}] [tlb-1 vlan1 tlb-2 vlan2]

vlan-membership {static {vlan} | dynamic}

2900 Switch commands (IOS Command-based switch):

config [terminal]

enable

interface type slot/port | vlan number

show interface interface-id | vlan number [switchport [allowed-vlan | 
prune-elig]]

show running-config

show vlan [brief | id vlan-id | name vlan-name]

switchport access vlan {vlan-id | dynamic}

vlan vlan-id [name vlan-name] [media {ethernet | fddi | fdi-net | 
tokenring | tr-net}] [state {suspend | active}] [said said-value] [mtu 
mtu-size] [ring ring-number] [bridge bridge-number | type {srb | srt}] 
[parent parent-vlan-id] [stp type {ieee | ibm | auto}] [are are-number] 
[ste ste-number] [backupcrf {enable | disable}] [tb-vlan1 tb-vlan1-id] 
[tb-vlan2 tb-vlan2-id]

vlan database

Lab 5: Trunking    305
N O T E S
LAB  5:
TR UNK IN G
Your experiment with VLANs was so successful that another work group that 
shares the same switches as your group wants to do the same thing.  Because 
your two VLANs will be sharing the same path through the switches, you will 
need to implement trunking.
You select 40 as the number for the new VLAN and name it PodxGroup2.  The 
new work group resides on ports 4, 5, and 6 of switches PodxS1 and PodxS2.  
You need to establish a VTP domain and select the name Podx.  Complete the 
steps necessary to add the new VLAN.
NOTE:
Instructor Setup—Obtain two Catalyst 1912 switches (labeled 
PodxS1 and PodxS2), one Catalyst 2926 XL switch (labeled 
PodxS3), two computers (PodxPC1 and PodxPC2), two UTP 
CAT5 crossover cables, two Cisco rollover cables, and two RJ-45-to-
DB-9 female DTE adapters (labeled TERMINAL).  Using a CAT5 
crossover cable, connect FastEthernet port Ax on PodxS1 to 
FastEthernet port 0/1 on PodxS3.  Connect the other CAT5 crossover 
cable from FastEthernet port Ax on PodxS2 to FastEthernet port 0/2 
on PodxS3.  Using the rollover cables and the DTE adapters, connect 
the PCs to the console port on the 1720 router and to the Com1 
interface on the PC.  Be sure that the PCs are configured with 
HyperTerminal.
Use the configuration you established in Lab 4 as the starting point 
for this lab.
1.
Configure VLAN 40 on ports 4, 5, and 6 of switches PodxS1 and 
PodxS2.  Establish the VTP domain on each switch.  Enable auto 
trunking on the FastEthernet uplink port.  (For the following steps, 
PodxPC1 will perform these steps on switch PodxS1.  PodxPC2 will 
perform the same steps on switch PodxS2.)
Click on Start | Programs | Accessories | Hyperterminal | Cisco.
Press ENTER a couple of times to bring up the router CLI.
Type the IP address for PodxS1 (10.x.21.10) and press ENTER to telnet 
to the switch.  (Use 10.x.22.10 for PodxS2.)
At each of the following prompts, enter the information provided:
Enter Selection: k
PodxS1>enable <enter>
Enter Password: ccnp <enter>

306    Unit 4—Routing and Switching Labs
N O T E S
a.
Examine the current configuration for VTP or Trunking commands.
PodxS1#show running-config <enter>
PodxS1#show trunk a <enter>
PodxS1#show vtp <enter>
What global VTP entries exist?
Answer
None
What is the DISL state?
Answer
Off
What is the Trunking state?
Answer
Off
What is the Encapsulation type?
Answer
Unknown
What is the VTP domain name?
Answer
Blank
What is the VTP operating mode?
Answer
Server
How many VLANs currently exist?
Answer
6
b.
Add the new VTP domain to the switch.  Add VLAN 40.  
PodxS1#config t 
PodxS1(config)#vtp domain Podx <enter>
(where x is your pod number)
PodxS1(config)#vlan 40 name PodxGroup2 <enter>
(where x is your pod number)
PodxS1(config)#<ctrl+z>
c.
Examine the current configuration for VLAN, VTP, or Trunking 
commands.
PodxS1#show running-config <enter>
PodxS1#show vtp <enter>
PodxS1#show vlan <enter>
What global VTP and VLAN entries exist?
Answer
vtp domain "Pod1"
vlan 30 name "Pod1Group1" sde 
100030 state Operational mtu 1500
vlan 40 name "Pod1Group2" sde 
100040 state Operational mtu 1500
What is the VTP domain name?
Answer
Podx
How many VLANs currently exist?
Answer
7

Lab 5: Trunking    307
N O T E S
What new VLANs exist?
Answer
30 and 40
What is their status?
Answer
Enabled
d.
Add VLAN 40 to interfaces 0/4, 0/5, and 0/6.
PodxS1#config t <enter>
PodxS1(config)#interface ethernet 0/4 <enter>
PodxS1(config-if)#vlan-membership static 40 <enter>
PodxS1(config-if)#interface ethernet 0/5 <enter>
PodxS1(config-if)#vlan-membership static 40 <enter>
PodxS1(config-if)#interface ethernet 0/6 <enter>
PodxS1(config-if)#vlan-membership static 40 <enter>
PodxS1(config-if)#<ctrl+z>
e.
Examine the current configuration for VLAN, VTP, or Trunking 
commands.
PodxS1#show running-config <enter>
PodxS1#show vlan <enter>
PodxS1#show vlan-membership <enter>
What entries exist for interface e0/4?
Answer
duplex full, vlan-membership static 40
What ports are VLAN 30 assigned to?
Answer
1-3 and A
What ports are VLAN 40 assigned to?
Answer
4-6
What membership type is now in use on ports 1 and 4?
Answer
Static
f.
Select the FastEthernet port to configure.  Set DTP Trunking to 
nonegotiate mode on this interface.
PodxS1#config t <enter>
PodxS1(config)#interface fastethernet 0/26 <enter>
PodxS1(config-if)#trunk nonegotiate <enter>
PodxS1(config-if)#<ctrl+z>
g.
Examine the current configuration for VLAN, VTP, or Trunking 
commands.
PodxS1#show running-config <enter>
PodxS1#show trunk a <enter>
What entries exist for interface f0/26?
Answer
duplex full, trunk nonegotiate, vlan-
membership static 30
What is the DISL state?
Answer
nonegotiate

308    Unit 4—Routing and Switching Labs
N O T E S
What is the Trunking state?
Answer
On
What is the Encapsulation type?
Answer
ISL
2.
Configure the VTP domain and VLAN 40 on switch PodxS3.  Enable 
trunking (use the desirable mode) on the FastEthernet ports connecting 
to switches PodxS1 and PodxS2.  (For the following steps, PodxPC1 will 
perform these steps on the connection to PodxS1.  PodxPC2 will perform 
the same steps on the connection to PodxS2.)
PodxS1#exit <enter>
(to exit the Telnet session)
Type the IP address for PodxS3 (10.x.23.10) and press ENTER to telnet 
to the switch.
At each of the following prompts, enter the information provided:
Password:ccnp <enter>
PodxS3> enable <enter>
Password:ccnp <enter>
a.
Examine the current configuration for VTP or Trunking commands.
PodxS3#show interface fastethernet 0/1 switchport 
<enter>
PodxS3#show vtp status  <enter>
What is the administrative mode for interface 0/1?
Answer
Static access
What is the access mode VLAN entry for interface 0/1?
Answer
30 (Pod1Group1)
What is the Operational Trunking Encapsulation for interface 0/1?
Answer
ISL
What is the VTP domain name?
Answer
Blank
What is the VTP operating mode?
Answer
Server
How many VLANs currently exist?
Answer
6
b.
Add the new VTP domain to the switch.  Add VLAN 40.
PodxS3#vlan database  <enter>
PodxS3(vlan)#vtp domain Podx  <enter>
(where x is your pod number)
PodxS3(vlan)#vlan 40 name PodxGroup2 <enter>
(where x is your pod number)
PodxS3(vlan)#exit  <enter>

Lab 5: Trunking    309
N O T E S
c.
Examine the current configuration for VLAN, VTP, or Trunking 
commands.
PodxS3#show vtp status  <enter>
PodxS3#show vlan  <enter>
What is the VTP domain name?
Answer
Podx
How many VLANs currently exist?
Answer
7
What new VLANs exist?
Answer
30 and 40
What is their status?
Answer
Active
d.
Select the FastEthernet port to configure.  Enable ISL Trunking on 
this interface.
PodxS3#configure terminal  <enter>
PodxS3(config)#interface fastethernet 0/1 <enter>
(Use fastethernet 0/2 from PodxPC2.)
PodxS3(config-if)#switchport mode trunk  <enter>
PodxS3(config-if)#switchport trunk encapsulation isl 
<enter>
PodxS3(config-if)#end  <enter>
e.
Examine the current configuration for Trunking commands.
PodxS3#show interface fastethernet 0/1 switchport  
<enter>
PodxS3#show vtp status  <enter>
What is the administrative mode for interface 0/1?
Answer
Trunk
What is the access mode VLAN entry for interface 0/1?
Answer
0 (inactive)
What is the Operational Trunking Encapsulation for interface 0/1?
Answer
ISL
What is the VTP domain name?
Answer
Podx
What is the VTP operating mode?
Answer
Server
How many VLANs currently exist?
Answer
7

310    Unit 4—Routing and Switching Labs
N O T E S
f.
Save your configuration changes, exit the Telnet session, and close 
Telnet.
PodxS3#copy running-config startup-config
PodxS3#exit <enter>
Connect > Disconnect
Connect > Exit
3.
Connect a workstation to port E0/1 on Pod1S1 and another to port E0/1 
on Pod1S2.  Change the IP address of the workstation on Pod1S1 to 
10.X.21.100/8 and the one on Pod1S2 to 10.X.22.100/8.  Is VLAN 30 
working properly?
Open a DOS window on each workstation.  From the workstation on 
Pod1S1, use the ping 10.X.22.100 command.  From the workstation on 
Pod1S2, use the ping 10.X.21.100 command.  Each of these pings 
should succeed.
Now disconnect the workstation from E0/1 on Pod1S2 and connect it to 
E0/10 on Pod1S2.  This should remove the workstation from the VLAN.  
Now repeat the two ping attempts from the previous step.  The pings 
should both fail.  If the first pings succeeded and the second pings failed, 
that shows that the new VLAN is working properly.  
4.
Connect a workstation to port E0/4 on Pod1S1 and another to port E0/4 
on Pod1S2.  Change the IP address of the workstation on Pod1S1 to 
10.X.21.100/8 and the one on Pod1S2 to 10.X.22.100/8.  Is VLAN 40 
working properly?
Open a DOS window on each workstation.  From the workstation on 
Pod1S1, use the ping 10.X.22.100 command.  From the workstation on 
Pod1S2, use the ping 10.X.21.100 command.  Each of these pings 
should succeed.
Now disconnect the workstation from E0/4 on Pod1S2 and connect it to 
E0/10 on Pod1S2.  This should remove the workstation from the VLAN.  
Now repeat the two ping attempts from the previous step.  The pings 
should both fail.  If the first pings succeeded and the second pings failed, 
that shows that the new VLAN is working properly.  
5.
Configure inter-VLAN routing between switch PodxS3 and router 
PodxR3.  (For the following steps, each student will take turns 
configuring the switch and router.)
Type the IP address for PodxS3 (10.x.23.10) and press ENTER to telnet 
to the switch.
Password: ccnp <enter>
PodxS3> enable <enter>
Password: ccnp <enter>
a.
Examine the current configuration for VTP or Trunking commands.
PodxS3#show interface fastethernet 0/24  switchport 
<enter>
What is the administrative mode for interface 0/24?
Answer
Static access
What is the access mode VLAN entry for interface 0/24?
Answer
1 (default)

Lab 5: Trunking    311
N O T E S
What is the Operational Trunking Encapsulation for interface 0/24?
Answer
ISL
What trunking VLANs are enabled for interface 0/24?
Answer
None
What trunking VLANs are active for interface 0/24?
Answer
None
b.
Configure ISL trunking on interface 0/24.  Save the configuration 
changes you make.
PodxS3#configure terminal  <enter>
PodxS3(config)#interface fastethernet 0/24  <enter>
PodxS3(config-if)#switchport mode trunk  <enter>
PodxS3(config-if)#switchport trunk encapsulation isl  
<enter>
PodxS3(config-if)#end  <enter>
PodxS3#copy running-config startup-config <enter>
c.
Examine the current configuration for VTP or Trunking commands.
PodxS3#show interface fastethernet 0/24  switchport 
<enter>
What is the administrative mode for interface 0/24?
Answer
Trunk
What is the access mode VLAN entry for interface 0/24?
Answer
1 (default)
What is the Operational Trunking Encapsulation for interface 0/24?
Answer
ISL
What trunking VLANs are enabled for interface 0/24?
Answer
All
What trunking VLANs are active for interface 0/24?
Answer
1, 30, and 40
d.
Examine the FastEthernet interface of PodxR3 for trunking 
configuration.
PodxS1#exit <enter>
(to exit the Telnet session)
Type the IP address for PodxR3 (10.10X.1.1) and press ENTER to 
telnet to the router.
Password: ccnp <enter>
PodxR3> enable   <enter>
Password: ccnp <enter>
PodxR3#show vlans <enter>
What VLANs are configured on the router?
Answer
No Virtual LANs configured

312    Unit 4—Routing and Switching Labs
N O T E S
e.
Configure VLAN trunking for VLANs 30 and 40 on the 
FastEthernet interface of PodxR3.
PodxR3#configure terminal  <enter>
PodxR3(config)#interface fastethernet 0/0  <enter>
PodxR3(config-if)#no ip address <enter>
PodxR3(config-if)#interface fastethernet 0/0.30 <enter>
PodxR3(config-subif)#encapsulation isl 30 <enter>
PodxR3(config-subif)#ip address 10.X1.30.1 
255.255.255.0 <enter>
PodxR3(config-subif)#interface fastethernet 0/0.40 
<enter>
PodxR3(config-subif)#encapsulation isl 40 <enter>
PodxR3(config-subif)#ip address 10.X1.40.1 
255.255.255.0 <enter>
PodxR3(config-subif)#end <enter>
f.
Examine the router for trunking and VLAN configurations and 
information.
PodxR3#show vlans <enter>
PodxR3#show interface fastethernet 0/0.30 <enter>
What VLANs are configured on the router?
Answer
30 and 40
What is the status of the subinterface that was created for VLAN 30?
Answer
FastEthernet0/0.30 is up, line protocol 
is up
What encapsulation is active on the subinterface that was created for 
VLAN 30?
Answer
Encapsulation ISL
What number is associated with the descriptive word Color?
Answer
Virtual LAN, Color 30
g.
Save your configuration changes, exit the Telnet session, and close 
Telnet.
PodxS3#copy running-config startup-config
PodxS3#exit <enter>
Connect > Disconnect
Connect > Exit

Lab 5: Trunking    313
N O T E S
Commands to Understand for this Exercise

1900 Switch commands (IOS Command-based switch):

config [terminal]

delete vtp

enable [access-level]

interface type module/port

show interfaces [type module/port] [basic | secondary]

show running-config

show trunk {A | B | port-channel} [allowed-vlans | prune-eligible | 
joined-vlans | joining-vlans]

show vlan [vlan]

show vlan-membership

show vtp

trunk [on | off | desirable | auto | nonegotiate]

trunk-vlan vlan-list

no trunk-vlan vlan-list

vlan vlan [name vlan-name] [sde said-value] [state {operational | 
suspended}] [mtu mtu-size] [{ethernet | fddi | tokenring} ring-
number ring-no parent-vlan parent-vlan | {fddi-net | tr-net} bridge-
number bridge-number stp-type {ibm | ieee}] [tlb-1 vlan1 tlb-2 vlan2]

vlan-membership {static {vlan} | dynamic}

vtp [server | transparent | client] [domain domain-name] 
[trap {enable | disable}] [password password] [pruning {enable | 
disable}]

314    Unit 4—Routing and Switching Labs
N O T E S

2900 Switch commands (IOS Command-based switch):

config terminal

copy running-config startup-config

enable

interface type slot/port | vlan number

show interface interface-id | vlan number [switchport [allowed-vlan | 
prune-elig]]

show running-config

show vlan [brief | id vlan-id | name vlan-name]

show vtp {counters | status}

switchport access vlan {vlan-id | dynamic} 

switchport mode {access | multi | trunk}

switchport trunk encapsulation {isl | dot1q}

vlan vlan-id [name vlan-name] [media {ethernet | fddi | fdi-net | 
tokenring | tr-net}] [state {suspend | active}] [said said-value] [mtu 
mtu-size] [ring ring-number] [bridge bridge-number | type {srb | srt}] 
[parent parent-vlan-id] [stp type {ieee | ibm | auto}] [are are-number] 
[ste ste-number] [backupcrf {enable | disable}] [tb-vlan1 tb-vlan1-id] 
[tb-vlan2 tb-vlan2-id]

vlan database

vtp {server | client | transparent}

vtp domain domain-name


2620 Router commands:

config terminal

copy running-config startup-config

enable

encapsulation isl vlan-number

interface type slot/port [.subinterface-number]

ip address address mask

show interface type slot/port [.subinterface-number]

show vlans

   
   
B O O T  C A M P
Overview    315
5
ROUTING AND SWITCHING 
LABS–NETWORK DIAGRAMS
OVE R V IEW
This section contains the network diagram for each of the labs used this week.  
Study the diagram until you feel comfortable with the hardware and protocols 
used.  After you have studied the network diagram, complete the list of 
procedures.  

316    Unit 5—Routing and Switching Labs–Network Diagrams
LAB  1:
OSP F
Routing
Lab 1 - OSPF
PODXR3
FastEthernet0/0 =10.1.1.X
Serial0/0 = 10.10X.1.1
Serial0/2 = 10.10X.2.1
PODXR1
Serial0 = 10.10X.1.2
Loopback0=10.X1.4.1
Loopback1= 10.X1.5.1
Loopback2=10.X1.6.1
Loopback3=10.X1.7.1
PODXR2
Serial0 = 10.10X.2.2
Loopback0=10.X2.4.1
Loopback1=10.X2.5.1
Loopback2= 10.X2.6.1
Loopback3= 10.X2.7.1
s0
s0
b0
b0
s0/2
s0/0
b1/1
b1/0
Frame
Relay
Frame
Relay
ISDN BRI
ISDN BRI
In equipment descriptions and IP addresses, X refers to the POD number.  Use a
24-bit subnet mask for all.

Lab 2: EIGRP    317
LAB  2:
EIG RP
Routing
Lab 2 - EIGRP
PODXR3
FastEthernet0/0 =10.1.1.X
Serial0/0= 10.10X.1.1
Serial0/2 =10.10X.2.1I
PODXR1
Serial0 = 10.10X.1.2
Loopback0=10.X1.4.1
Loopback1=10.X1.5.1
Loopback2=10.X1.6.1
Loopback3=10.X1.7.1
PODXR2
Serial0 = 10.10X.2.2
Loopback0=10.X2.4.1
Loopback1=10.X2.5.1
Loopback2=10.X2.6.1
Loopback3=10.X2.7.1
s0
s0
b0
b0
s0/2
s0/0
b1/1
b1/0
Frame
Relay
Frame
Relay
ISDN BRI
ISDN BRI
In equipment descriptions and IP addresses, X refers to the POD number.  Use a
24-bit subnet mask for all.

318    Unit 5—Routing and Switching Labs–Network Diagrams
LAB  3:
BG P
Routing
Lab 3 - BGP
PODXR3
FastEthernet0/0 =10.1.1.X
Serial0/0 =10.10X.1.1
Serial0/2 =10.10X.2.1
PODXR1
Serial0 = 10.10X.1.2
Loopback0=10.X1.4.1
Loopback1=10.X1.5.1
Loopback2=10.X1.6.1
Loopback3=10.X1.7.1
PODXR2
Serial0 =10.10X.2.2
Loopback0=10.X2.4.1
Loopback1=10.X2.5.1
Loopback2=10.X2.6.1
Loopback3=10.X2.7.1
s0
s0
b0
b0
s0/2
s0/0
b1/1
b1/0
Frame
Relay
Frame
Relay
ISDN BRI
ISDN BRI
In equipment descriptions and IP addresses, X refers to the POD number.  Use a
24-bit subnet mask for all.

Lab 4: VLANs    319
LAB  4:
V LANS
Switching
Lab 4 -VLANs
PODXS3
IP Address = 10.X.23.10
FastEthernet0/1 =VLAN 30
FastEthernet0/2 = VLAN 30
PODXS1
IP Address = 10.X.21.10
Ethernet0/1 = VLAN 30
Ethernet0/2 = VLAN 30
Ethernet0/3 = VLAN 30
FastEthernet0/26 = VLAN
PODXS2
IP Address = 10.X.22.10
Ethernet0/1= VLAN 30
Ethernet0/2 = VLAN 30
Ethernet0/3 = VLAN 30
FastEthernet0/26 = VLAN 30
f0/2
f0/1
f0/26
f0/26
FastEthernet
FastEthernet
In equipment descriptions and IP addresses, X refers to the POD number.  Use an
8-bit subnet mask for the management IP addresses.

320    Unit 5—Routing and Switching Labs–Network Diagrams
LAB  5:
TR UNK IN G
Switching
Lab 5 - Trunking
PODXS3
IP Address = 10.x.23.10
FastEthernet0/1= VLAN 30,Trunking
FastEthernet0/2 = VLAN 30,Trunking
VLAN Database = VTP Domain (PodX)
VLAN Database = VLAN 30 and VLAN 40
PODXS1
IP Address = 10.X.21.10
Ethernet0/1 = VLAN 30
Ethernet0/2 = VLAN 30
Ethernet0/3 = VLAN 30
Ethernet0/4 = VLAN 40
Ethernet0/5 = VLAN 40
Ethernet0/6 = VLAN 40
FastEthernet0/26 = VLAN 30,Trunking
VTP Domain= PodX
f0/26
f0/2
f0/1
f0/26
FastEthernet
FastEt
In equipment descriptions and IP addresses, X refers to the POD number.  Use an
8-bit subnet mask for the management IP addresses.
PODXS2
IP Address = 10.X.22.10
Ethernet0/1 = VLAN 30
Ethernet0/2 = VLAN 30
Ethernet0/3 = VLAN 30
Ethernet0/4 = VLAN 40
Ethernet0/5 = VLAN 40
Ethernet0/6 = VLAN 40
FastEthernet0/26 = VLAN 30,Trunking
VTP Domain = PodX

   
B O O T  C A M P
Test Tips for the CCNP™ Exams    321
6
CCNP™ CERTIFICATION 
TEST-TAKING TIPS
TE S T  T I PS  FOR  T H E C C N P™ EX AMS

Make sure you’re not hungry when you go into the exam.

Review key points about subject areas you find difficult immediately 
before going into the exam.

Use any memory-jogging trick you know.  If making up silly phrases (as a 
mnemonic) helps you remember things, do it.

Make sure to ask for white paper when you sign in.

Write down facts you’re inclined to forget as soon as you sit down in the 
testing center.  If the question isn’t clear when you read it, try drawing a 
picture.

If you cannot answer a question at first glance, try to eliminate the 
answers one at a time.

Don’t allow failure on one question to affect your performance on 
subsequent questions.  Very few people indeed get all of the questions 
correct.

If the question has to do with a command, and you’ve never heard of the 
command, don’t panic.  It could be a decoy or “none of the above”.

On the Routing, Switching, and Remote Access exams, you will not be 
allowed to go back and change an answer, so be sure of the answer you 
select before moving on.  You will be allowed to go back and change an 
answer on the Support exam.

If you are familiar with, or have extensive experience on a particular 
concept, don’t waste time reviewing what you already know.  Study 
harder on your weak areas.

The allotted time is 75 minutes for the Routing, Switching, and Remote 
Access exams and 90 minutes for the Support exam.

322    Unit 6—CCNP™ Certification Test-Taking Tips

