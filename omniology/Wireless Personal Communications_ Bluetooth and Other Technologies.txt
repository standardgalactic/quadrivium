
WIRELESS
PERSONAL COMMUNICATIONS
BLUETOOTH AND
OTHER TECHNOLOGIES

THE KLUWER INTERNATIONAL SERIES
IN ENGINEERING AND COMPUTER SCIENCE

WIRELESS
PERSONAL COMMUNICATIONS
BLUETOOTH AND
OTHER TECHNOLOGIES
edited by
William H. Tranter
Brian D. Woerner
Jeffrey H. Reed
Theodore S. Rappaport
Max Robert
Virginia Polytechnic Institute & State University
KLUWER ACADEMIC PUBLISHERS 
NEW YORK, BOSTON, DORDRECHT, LONDON, MOSCOW

eBook ISBN:
0-306-46986-3
Print ISBN:
0-792-37214-X
©2002 Kluwer Academic Publishers
New York, Boston, Dordrecht, London, Moscow
Print  ©2000 Kluwer Academic / Plenum Publishers
New York
All rights reserved
No part of this eBook may be reproduced or transmitted in any form or by any means, electronic,
mechanical, recording, or otherwise, without written consent from the Publisher
Created in the United States of America
Visit Kluwer Online at:  
http://kluweronline.com
and Kluwer's eBookstore at:
http://ebooks.kluweronline.com

TABLE OF CONTENTS
PREFACE
ix
I. FRONTIERS IN PROPAGATION
1.
2.
3.
4.
5.
6.
Statistics of the Temporal Variations in the Wireless Transmission
Channel in Indoor Environment
Marin Stoytchev and Hugo Safar
UHF-Radio Propagation Predictor for Temporal Variations In
Populated Indoor Environments
F. Villanese, W. G. Scanlon, and N. E. Evans
An Improved Approach for Performance Evaluation of the Downlink of
DS-CDMA PCS Indoor Systems with Distributed Antennas
M.R. Hueda, C. E. Rodriguet, and C. A. Marques
Fast and Enhanced Ray Optical Propagation Modeling for Radio
Network Planning in Urban and Indoor Scenarios
R. Hoppe, P. Wertz, G. Wölfle, and F. M. Landstorfer
Indoor Propagation Analysis Techniques for Characterisation of
Ultra-Wideband RF Environments
David J. Hall
Propagation Signatures to Characterize Wideband Environments
Gregory Martin
1
11
23
35
45
57
67
77
89
II. SPATIAL PROCESSING
7.
8.
9.
Smart Antennas for CDMA Cellular and PCS Networks
Scot Gordon, Marty Feuerstein, Donn Harvey, and Michael Zhao
Key Techniques Realizing Smart Antenna Hardware for Microcell
Communication Systems
Keizo Cho, Kentaro Nishimori, Yasushi Takatori, and Toshikazu Hori
Downlink Capacity Enhancement in GSM System Using Multiple
Beam Smart Antenna and SWR Implementation
Wei Wang, Mohamed Ahmed, Samy Mahmoud, and Roshdy H. M. Hafez

vi
10.
11.
12.
13.
14.
Generalized Equations for Spatial Correlation for Low to Moderate
Angle Spread
R. Michael Buehrer
Exploitation of Internode MlMO Channel Diversity in
Spatially-Distributed Multipoint Communication Networks
Brian G. Agee
Design of 16-QAM Space-Time Codes for Rapid Rayleigh Fading Channels
Salam A. Zummo and Saud A. Al-Semari
Transmit Diversity With More Than Two Antennas
R. Michael Buehrer, Robert A. Soni, and Quinn Li
Reduced Complexity Space-Time Optimum Processing
Jens Jelitto, Marcus Bronzel, and Gerhard Fettweis
101
109
121
131
145
III. NETWORK SYSTEM DESIGN
15.
16.
17.
18.
19.
Wireless Personal Communications System Planning Using
Combinatorial Optimisation
Joseph K. L. Wong, Michael J. Neve, and Kevin W. Sowerby
Frequency Planning and Adjacent Channel Interference in a
DSSS Wireless Local Area Network (WLAN)
D. Leskaroski and W. B. Mikhael
Modeling and Simulation of Wireless Packet Erasure Channels
Günther Liebl, Thomas Stockhammer, and Frank Burkert
Reducing Handover Probability Through Mobile Positioning
Stamatis Kourtis and Rahim Tafazolli
Multi-user Detection Using the Iteration Algorithm in
Fast-Fading Channels
Sun-Jin Yeom and Yong-Wan Park
157
169
181
193
205

vii
IV.   NEXT GENERATION   AND   BEYOND
20.
21.
22.
FPGA DSP for Wireless Communication
Chris Dick and fred harris
Signal Processing Requirements of the TDD Terminal
Stamatis Kourtis, Patrick McAndrew, and Phil Tottle
Frame Quality-Based Versus 
Forward Power Control
Methods for the cdma2000 Third Generation Standard
Steven P. Nicoloso, Mike Mettke, and R. Michael Buehrer
217
229
239
V. BLUETOOTH: A SHORT TUTORIAL
Max Robert
Introduction
Bluetooth Overview
Technical Overview
Critical Perspective
Conclusion
Appendices
A – Packet Format
B – Packet Description
INDEX
249
249
250
264
265
266
267
271

This page intentionally left blank

PREFACE
The papers presented in this book were originally presented at the 10th Virginia Tech/MPRG
Symposium on Wireless Personal Communications, which was held on the Virginia Tech campus
June 14-16, 2000. This year’s Symposium was sponsored by Virginia Tech’s Mobile and Portable
Radio Research Group (MPRG), the Virginia Tech Division of Continuing Education, and the
MPRG Industrial Affiliates Program. The IEEE Virginia Mountain Section and the Virginia
Tech Joint Student Chapter of the IEEE Communications and Vehicular Technology Societies
provided technical co-sponsorship.
Much of the success of our annual symposium, as well as the success of MPRG’s research and
education program, are directly due to the support of our industrial affiliates. The support that is
provided by the industrial affiliates program allows MPRG to serve the wireless community
through research, education, and outreach activities. MPRG’s industrial affiliates include the
following organizations: Analog Devices, Inc., Anaren Microwave, Inc., the Army Research
Office, AT&T Corporation, BAE Systems, BellSouth Cellular Corporation, Comcast Cellular
Communications, Inc., Datum, Inc., Ericsson, Inc., Grayson Wireless, Hughes Electronics
Corporation, ITT Industries, LGIC, Inc., Lucent Technologies, Inc., Motorola, Inc., Nokia, Inc.,
Nortel Networks, Qualcomm, Inc., Raytheon Systems Company, Samsung Advanced Institute of
Technology, Southwestern Bell, Tantivy Communications, Inc., Tektronix, Inc., Telcordia
Technologies, Texas Instruments, and Wavtrace, Inc.
In 1999, the Wireless Symposium was expanded to include a tutorial course. This activity proved
popular and was continued in 2000. This year’s tutorial was targeted on the emerging technology
known as Bluetooth. A summary of the tutorial notes follow and is included as the last section of
this book.
Twenty-two papers were presented at the 2000 symposium and are divided into five groups. The
first group of six papers deals with propagation, both indoor and outdoor. The first paper,
Statistics of the Temporal Variations in the Wireless Transmission Channel in Indoor
Environments by Martin Stoytchev and Hugo Safar, examines the temporal behavior of an indoor
channel at 2.8 GHz. They find that the received power is well defined by a Ricean model and
that an unexpected increase in the received SNR occurs when people are present in the building.
The second paper, UHF-Radio Propagation Predictor for Temporal Variations in Populated
Indoor Environments by F. Villanese, W. G. Scanlon, and N. E. Evans, implements an
improvement in site-specific ray-tracing models by including the presence of moving human
bodies in the model. They found large temporal variations due to human body movement. If
antennas are close to the body, such as one finds in Bluetooth applications, a reduction in
received power occurs due to antenna-body interaction. The third paper, An Improved Approach
for Performance Evaluation of the Downlink of DS-CDMA PCS Indoor Systems with Distributed
Antennas by M. R. Hueda, C. E. Rodriguez, and C. A. Marques, examines the performance of the
forward link of a DS-CDMA system having distributed antennas in an indoor channel
environment. They show the inadequacies of the Gaussian approximation for interference and
propose a more accurate model to describe the effect of IPI (interpath interference) on the bit
error rate and the frame error rate. The fourth paper in the propagation group, Fast and Enhanced
Ray Optical Propagation Modeling for Radio Network Planning in Urban and Indoor Scenarios
by R. Hoppe, P. Wertz, G. Wolfle, and F. M. Landstorfer, describe a computationally efficient ray
optical model. The model is implemented for both indoor and urban environments, and the
model performance is compared against measurements. 
The next contribution, Indoor
Propagation Analysis Techniques for Characterization of Ultra-Wideband RF Environments by
David J. Hall, presents a number of statistics for ultra-wideband RF environments. The path loss

and the delay spread are characterized, and the performance gain as a function of the number of
correlators, is discussed. The last paper, Propagation Signatures to Characterize Wideband
Environments by Gregory Martin, introduces the concept of the propagation signature for
summarizing the large quantity of data collected in a wideband propagation measurement
program.
The second set of papers deals with the techniques and applications of spatial processing. Scot
Gordon, Many Feuerstein, Donn Harvey, and Michael Zhao contribute the first of these papers,
Smart Antennas for CDMA Cellular and PCS Networks. 
The authors point out how a smart
antenna for CDMA equalizes loading across sectors, which improves sectorization efficiency by
balancing traffic load and decreasing handoff overhead. The following paper, Key Techniques
Realizing Smart Antenna Hardware for Microcell Communication Systems by Keizo Cho,
Kentaro Nishimori, Yasuhi Takatori, and Toshikazu Hori, summarizes techniques for selecting
the number of antenna elements, simplifying hardware, reducing cost, and establishing system
calibration. The next paper, Downlink Capacity Enhancement in GSM System Using Multiple
Beam Smart Antenna and SWR Implementation by Wei Wang, Mohamed Ahmed, Samy
Mahmoud, and Roshdy H. M. Hafez, demonstrates that smart antennas can significantly increase
the network capacity of a CDMA cellular system. This paper is followed by a paper contributed
by R. Michael Buehrer entitled Generalized Equations for Spatial Correlation for Low to
Moderate Angle Spread. The focus of this paper is the development of generalized expressions
approximating the spatial correlation for three angular wavefront distributions. The next paper in
this section, Exploitation of Internode MIMO Channel Diversity in Spatially-Distributed
Multipoint Communication Networks by Brian G. Agee, demonstrates that multiple-input,
multiple-output (MIMO) networks can provide significant improvements in capacity over point-
to-point links. This paper is followed by Design of 16-QAM Space-Time Codes in Rapid Rayleigh
Fading Channels by Salam A. Zummo and Saud A. Al-Semari, which explores the use of space-
time codes, based on a 16-QAM signal set, for performance enhancement in a fast fading
environment. Two different code design techniques are provided, trellis encoding and I-Q
encoding. Coding gains of approximately 3dB are achieved. A new diversity technique, referred
to as space-time spreading, is investigated in the paper Transmit Diversity With More Than Two
Antennas by R. Michael Buehrer, Robert A. Soni, and Quinn Li. Their results show that potential
benefits are achieved by increasing the number of antennas at the mobile station. The last paper
in this group, Reduced Complexity Space-Time Optimum Processing by Jens Jelitto, Marcus
Bronzel, and Gerhard Fettweis, analyzes spatial correlation properties and investigates the signal
processing requirements for designing space-time optimum receivers.
The next set of contributions, consisting of five papers, treats system design and networking
issues. The first of these papers, Wireless Personal Communications System Planning Using
Combinatorial Optimization, by Joseph K. L. Wong, Michael J. Neve, and Kevin W. Sowerby,
considers combinatorial optimization techniques for system design. A simple test problem,
consisting of system deployment on a single floor of a building, is presented. The suggested
optimization technique produces useful results. 
The next paper, Frequency Planning and
Adjacent Channel Interference in a DSSS Wireless Local Area Network (LAN) by D. Leskaroski
and W. B. Mikhael, illustrates a theoretical model of 802.11 DS channelization given that
channels are arranged in a staggered and overlapped fashion. Emphasis is on the 2.4 GHz ISM
frequency band. The proposed technique results in improved capacity while maintaining minimal
interference. The third paper in this group, Modeling and Simulation of Wireless Packet Erasure
Channels by Gunther Liebl, Thomas Stockhammer, and Frank Burkert, presents a model for
wireless packet erasure channels. The model can be used for both theoretical analysis and for
real-time simulation of network protocol performance. The fourth paper, Reducing Handover
Probability Through Mobile Positioning by Stamatis Kourtis and Rahim Tafazolli, examines the
x

xi
mechanism by which unnecessary handovers occur and proposes a technique for combating
unnecessary handovers. The final paper in this group is by Sun-Jin Yeom and Yong-Wan Park
and is entitled Multi-user Detection Using the Iteration Algorithm in Fast-Fading Channels. This
contribution introduces a new interference cancellation scheme for multi-user DS/CDMA. They
show improved performance with reduced complexity.
The last group of papers consists of three contributions. These treat a variety of implementation,
signal processing, and third-generation issues. The fust of these papers, FPGA DSP for Wireless
Communication by Chris Dick and fred hams, focuses on reconfigurable software defined radios
developed using FPGA architectures. Particular attention is paid to the implementation of digital
filters, including multi-rate filters and carrier recovery loops. The second paper in this group,
contributed by Stamatis Kourtis, Patrick McAndrew, and Phil Tottle, is titled Signal Processing
Requirements for the TDD Terminal. The authors of this paper consider technology requirements
for the 30 PP-TDD terminal. The architecture is described and complexity issues are discussed.
The last paper in this group, Frame Quality-Based Versus Eb/No-Based Forward Power Control
Methods for the cdma2000 Third Generation Standard by Steven P. Nicoloso, Mike Mettke, and
R. Michael Buehrer, shows that forward loop power control provides substantial capacity gains at
low speeds where forward error control provides only moderate gains. They also consider the
difficult problem of time correlated shadowing.
The final section of this volume consists of a brief tutorial on Bluetooth, a standard defining an
infrastructure for wireless devices with a very short operating range. The tutorial discusses the
application potential of Bluetooth and the general environment in which Bluetooth is designed to
operate. The protocol stack, the software interface, the RF specification, and Bluetooth’s
interoperability with other communication standards is also discussed.
A successful symposium, and consequently the papers contained herein, result from the
significant efforts of a dedicated team of people. Our first thanks go to those who submitted
papers and those who attended the symposium. Without a strong technical program, the
symposium could not continue to prosper. The MPRG staff and graduate students also deserve
special thanks. The efforts of Jenny Frank, who year-after-year takes the lead for organizing the
symposium, keeping the faculty on schedule, and tending to the vast quantity of details associated
with the symposium, are gratefully appreciated.
The editors also wish to thank Jennifer Evans of Kluwer Academic Publishers for her support in
bringing this book to press.
Blacksburg, VA
 William H. Tranter
Brian D. Woerner
Jeffrey H. Reed
Theodore S. Rappaport
Max Robert

This page intentionally left blank

Statistics of the Temporal Variations in the Wireless Transmission
Channel in Indoor Environments
Marin Stoytchev and Hugo Safar
Bell Labs, Lucent Technologies, 700 Mountain Avenue, Murray Hill, NJ 07974
Abstract
The temporal behavior of a single transmission channel inside buildings is
studied in a series of  CW experiments at a frequency of  2.8 GHz. Measurements of  the
received power show that its fluctuations are well described by a Ricean distribution.
Measurements of  the electric  field, however, show a more complex picture that does not
lie within the limits of  the Recean model. The joint probability distribution of  the real and
imaginary parts of  the transmission coefficient shows numerous well-distinguished peaks
associated with quasi-static transmission channels that dominate the signal over different
time intervals. Nevertheless, we find that the phasor associated with the transmitted field
remains confined in a particular region of  the complex plane preserving the character of
the speckle pattern.
I. Introduction
The temporal behavior of the wireless transmission has long been a subject of
intensive studies. The statistics of the received power in a dynamically changing
environment in many cases has been found to be well described by the Ricean model. To
the best of our knowledge, however, these studies have been mostly focused on
investigating the power associated with the transmitted field and not the field itself. In
efforts to increase the information capacity using multiple-antenna arrays have been
suggested to exploit the spatial diversity of the richly scattering environment. Recent
theoretical studies suggest a linear increase in capacity with the number of transmit and
receive antenna elements in the case of Rayleigh scattering environment [1,2], which
imposes upper bounds on the transmission bit rate per unit bandwidth. Subsequently, the
possibility of increased information capacity was demonstrated experimentally in an

2
indoor propagation environment by employing layered space-time architecture, known as
BLAST (Bell Laboratories Layered Space-Time) [3,4].
These studies have brought the focus on the complex electric field as the
fundamental quantity of interest. In the case of n transmit and m receive antennas the
transmission is characterized by the complex transmission matrix H, which is of order n x
m and relates the m-component receive vector 
to the n-component
transmit vector 
The i-th component of the received field vector is given
by 
where 
denote the field radiated from the j-th transmit antenna and 
 is
the complex transmission coefficient between the two antennas. 
In this case the
information capacity is given by 
where 
is a unitary
matrix of rank m and 
is the average signal-to-noise-ratio (SNR) for an individual
channel. Clearly, in order to estimate the capacity, knowledge of the individual matrix
elements (magnitude and phase of the transmitted electric field between each pair of
transmit and receive antennas) is required.
In this paper we present experimental studies of the temporal behavior of a single
transmit wireless channel inside buildings. Measurements of the received power and of
the received electric field were performed in metal-wall and in brick-wall environments.
The experiments were carried out during different time of the day, when no people were
present in the building and with people present. Using these measurements we study the
statistics of both the transmitted power and the electric field detected. We find that the
statistics of long-term variations of the received power is well described by a Ricean
model. Measurements of the field, however, reveal a more complex behavior that cannot
be described by such a model.
II. Experiment
We have made CW measurements of the microwave field and its intensity/power
transmitted through a single channel in buildings with metal and with brick walls. The
frequency of radiation is 2.8 GHz. In these measurements we use identical ground-plane
quarter-wavelength monopoles as transmit and receive antennas (TA and RA,

3
respectively). The antennas were placed so as to have parallel polarization. We first
performed power measurements using a HP 83732B signal synthesizer as a source of
radiation and a HP E418 power meter with HP 8481A/D power sensors for detection.
The values of the signal power observed in these measurements are well within the
dynamic range, 10 pW - 300 mW, provided by the equipment. For some of the locations,
independent measurements of the transmitted field have been made using a HP8722D
vector network analyzer. The experimental setup of the measurements performed with
the vector network analyzer are presented in Fig. 1.
In order to insure an adequate dynamic range of  the measurements, we use a low
noise RF amplifier at the transmit end, and, in cases of separation between TA and RA
greater than 10 m, we use an identical amplifier at the receive end as well. Low-loss
cables with attenuation of 0.07 dB/ft are used to connect the antennas to the signal
generating and measuring equipment. Regular measurements of  the received signal with
the transmit end terminated, which gives the noise level in the local environment, were
performed to give an average SNR of 30 dB in the power measurements and of
approximately 60 dB in the measurements of the electric field. In the power
measurements, the output power has been monitored by recording a reference signal

4
using a directional coupler connected to the output of the amplifier on the transmit end.
No fluctuations greater than 0.1 % of  the output power were observed. All measurements
have been carried out in the main building of Lucent Technologies, Bell Labs at Murray
Hill, NJ. To characterize the propagation channel in different environments, we have
performed measurements at two different locations of the building, one of which has
entirely metal walls (location A) and the other has brick walls (location B). Schematic
representation of location A is given in Fig. 1. The positions of the TA and RA are
denoted by full circles. All measurements are made with constantly open doors of the
rooms, in which the antennas were located. Both, the transmit and the receive antennas
are placed at approximately 150 cm above the ground and in all cases no direct line of
sight exists. To insure that the measurements provide an adequate picture of the changes
in the transmission channel we use two identical receive antennas, which are separated by
a distance of 20 cm. Their positions are chosen so that they appear, correspondingly, in a
local maximum (“bright” spot) and a local minimum (“dark” spot) of the speckle pattern
determined by the geometry of the building in the absence of people. For simplicity, in
the text that follows we will use the notations RA1 and RA2 to denote the antenna located
at a spatial maximum and at a minimum of the electric field, respectively. The two RA
are connected to a two-input switch that allows independent sampling of the antennas.
III. Results and discussions
III. 1. Power measurements
First, we concentrate on the temporal variations of the transmitted power. The
power of the received signal is monitored in 24-hour periods. Data is taken every two
hours for duration of eight minutes for each antenna individually. We measure the signal
using RA1 first and then RA2 for another eight-minute interval. Typical time traces of
the received power during day and night are shown in Fig. 2. In the absence of people the
channel is completely stationary within the limits of instrumental response. Daytime
measurements reveal considerably large rapid temporal fluctuations, which are associated

RA2
5
with the activities of people present in the building. The characteristic time, in which the
channel changes appreciably, is estimated to be approximately 0.1 ms.
We would like to note also the long-term variation of the average received power.
Surprisingly, we find that in both, metal- and brick-wall, environments the power level
during daytime is on average greater than the power level at night. In some instances,
this increase was found to be as large as 10 dB. We emphasize that such an increase in
the average power is observed for both RA1 and RA2 simultaneously. This observation
excludes a simple explanation considering shadowing effects due to a change in the local
configuration of scatterers that could affect the signal received at a particular point in
space. We associate the increase of  the average power level with the presence of people
in the building, who play the role of scattering objects. In the scattering environment of
the building with no people present, only certain number of paths that are determined by
the geometry of the local environment reach the point of detection. The presence of
scatterers increases the probability of having more partial waves reaching the point of
detection, including waves that originally would have escaped without contributing to the

6
received signal. Taking into account that there is no direct line of sight in these
measurements, it is then natural to expect that increasing the number of scatterers would
lead to higher energy levels detected. Studies at wavelengths comparable to the
wavelength of radiation used in our measurements show that, in general, the human body
has a reflection coefficient of more than 0.5 [5], which supports the plausibility of the
scenario suggested above.
The power measurements performed allow us to study not only the behavior of
the average power, but to obtain also the full distribution functions of the instantaneous
received power. In Fig. 3 we present the probability density and the cumulative
distribution function of the relative power P/<P> with respect to the ensemble average
value <P> obtained from measurements carried at location A. The results show that, in
the absence of people, the probability density is delta-like, as expected for a stationary
transmission channel. When people are present in the building, we find that the power
statistics is well described by a Ricean model with a K-factor of approximately 10. This
suggests that the presence of people give relatively small random contributions to the
predominant static phasor determined by the geometry of  the local environment. We note
that the statistics of relative power obtained from measurements at all locations is found
to be consistent with the results presented in Fig. 3.

7
III.2. Field measurements
The power measurements presented in the previous section provide a simple way
of studying the characteristics of the transmission channel in a multiply scattering
environment. However, such measurements do not provide complete information about
the transmitted field. Since the information capacity is determined by the product
involving products of the complex transmission coefficients, it is necessary to measure
both the magnitude and the phase of the transmitted field. 
For an adequate
characterization of the transmission channel, we have performed independent field
measurements. In these measurements, we measure the received field alternating RA1
and RA2, as data is taken with one antenna for a time interval of 8 s with a time delay
between points of 10 ms and the same sequence is repeated with the second antenna. The
positions of the two receive antennas are again chosen so that one of them appears in a
bright spot of the speckle pattern and the other one in a dark spot, respectively.
From the measured field, we calculate the joint probability density function
of the real and imaginary parts of the complex transmission coefficient,
and 
where 
is the complex field measured at the receive
antenna and 
is a correction factor, which is obtained by means of a through calibration
and accounts for the instrumental response of the system. As expected, the joint
probability density in the absence of people is a sharp delta-like function in the two-
dimensional complex plane. However, when people are present in the building the
behavior of the detected field appears more complex than what is assumed in a Ricean
model. In Fig. 4, we present the results obtained from measurements over a three-hour
period during daytime. The distributions appear to be comprised of various number of
well defined peaks. Such picture is not consistent with the Ricean statistical model, which
assumes that the channel has a single static component and a random component due to
moving objects. The results of the measurements presented here could rather be
associated with a time-varying modification of the Ricean model. This is related to the
pattern, in which the local environment changes. To simplify the physical picture, we can
assume that the dominant static channel is determined by the position and orientation of
all large objects in the vicinity of the transmit and the receive antennas. It is clear that, for

8
the most part, these objects do not change their position in a completely random pattern
in space and time. As a simple example, one can consider a person working in the
vicinity of either of the antennas for certain duration of time and then changing his/her
location/position (moving to another part of the room, or leaving it). Thus, for these
particular time spans one would observe different static phasors associated with waves
traversing different paths that reach the point of detection due to the different
surrounding. This would give a picture consistent with the one observed here.
A more illustrative picture of the evolution of the complex phasor associated with
the transmitted field is given by the contour maps of the distributions as shown in Fig. 5.
There are several distinct features that we would like to draw attention to. First, there are
distinct “focal” points that indicate the position of the peaks in the distribution function,
which could be associated with changes in the static channel in support with the
suggestion made above. It is worth noting that the focal points are visibly shifted away
from the origin, which indicates well-defined non-zero static component even for the
“dark” spot. Second, and more importantly in our opinion, the complex field at both local
maxima and local minima is confined within finite regions of the complex plane, which

9
do not overlap. This indicates that, although the presence of people in the building affects
the spatial field distribution, the speckle pattern is not changed in a fundamental way, i. e.
the “bright” and “dark” spots remain “bright” and “dark”, respectively. In addition to this,
we find that the average magnitude of the field observed in both “bright” and “dark”
spots, when people are present, is greater than that in the absence of people (data
surrounded by small rectangles in Fig. 4), which is consistent with the results of our
power measurements. Close examination of all data acquired shows that the increase of
average power level during daytime is higher in the dark spots compared to the increase
in bright spots. This suggests that scattering of people in the building provides a
contribution to the field energy that is comparable and even greater to the average energy
detected in local minima, leading to a substantial increase of energy in these spots. Yet,
this contribution is small compared to the field at local maxima, and, as a result, the
bright spots are less affected.
IV. Summary
We have made independent measurements of the field and of the power
transmitted through a single channel inside buildings with metal and brick walls. We
find that, while the received power is described by a Ricean distribution, the distribution
of the complex transmission coefficients shows a rather complex pattern determined by

10
the static geometry of the local environment. We also find an unexpected increase of the
average SNR, which is observed when people are present in the building. In addition, the
presence of people in the building brings short-term fluctuations in the transmission
channels with a characteristic time of approximately 0.1 s. Despite these changes,
however, it appears that the nature of the speckle pattern of microwaves propagating in
indoor environments is not fundamentally affected by human activities.
We thank H. U. Baranger, S. H. Simon, A. L. Moustakas, P. W. Wolniansky, A.
M. Sengupta, R. A. Valenzuela, M. R. Andrews, and P. L. Gammel for valuable and
stimulating discussions.
References:
[1] G. J. Foschini and M. Gans, “On Limits of Wireless Communications in a Fading
Environment when Using Multiple Antennas,” Wireless Personal Communications 6, 311
(1998).
[2] A. L. Moustakas, H. U. Baranger, L. Balents, A. M. Sengupta, and S. H. Simon,
“Communication through a Diffusive Medium: Coherence and Capacity,” Science 287,
287 (2000).
[3] P. W. Wolniansky, G. J. Foschini, G. D. Golden, R. A. Valenzuela, “V-BLAST: An
Architecture for Realizing Very High Data Rates Over the Rich-Scattering Wireless
Channel,” Proc. ISSSE, Pisa, Italy (1998); G. D. Golden, G. J. Foschini, R. A.
Valenzuela, P. W. Wolniansky, “Detection Algorithm and Initial Laboratory Results
using the V-BLAST Space-Time Communication Architecture,” Electronics Letters 35,
14 (1999).
[4] M. Stoytchev and H. Safar, “Indoor Measurements of the Information Capacity of
Multiple-Antenna Arrays,” unpublished work, Bell Labs internal technical memorandum,
Nov. 1999.
[5] J. C. Lin, “Microwave Noninvasive Sensing of Physiological Signatures,” in
Electromagnetic Interaction with Biological Systems, ed. J. C. Lin, Plenum Press, New
York (1989), pp. 3-26.

UHF-Radio Propagation Predictor For Temporal Variations
In Populated Indoor Environments
F. Villanese, W. G. Scanlon & N. E. Evans
Centre for Communications Engineering, School of Electrical & Mechanical Engineering,
University of Ulster, Shore Road, Newtownabbey, Co. Antrim, N. Ireland, UK, BT37 0QB.
Contact: Dr. W. G. Scanlon. w.scanlon@ulst.ac.uk. Tel: +44 28 90368054, Fax: +44 28 90366863.
1. Abstract
Ray-tracing is often used for site-specific propagation predictions, but current methods generally  fail to
accommodate shadowing and reflections caused by the movement of people: these represent significant
effects in indoor radio environments. The method presented here improves site-specific indoor
propagation predictions by including multiple, moving human bodies. The model, based on a hybrid
image and ray-shooting approach, alto takes into account electromagnetic antenna-tissue interaction for
body-worn terminals found in personal communications applications. The signal fading caused by
pedestrians is demonstrated through simulations of a small-area (150 m2) open-plan office environment
at 2.45 GHz. For a fixed point-to-point link, temporal variations in the received signal were observed
over a wide range of ~38dB and were caused solely by the movement of pedestrians. The situation
becomes worse when a mobile terminal is considered: a ~58dB variation in received signal power was
observed. This variation was caused by combination of three distinct effects: spatial fading, temporal
variations and antenna-body interaction. It was noted that, for antennas in close proximity to the user’s
body (as may be found in personal applications using technology such as Bluetooth), a reduction in
average received power of 15 dB occurred, directly due to antenna-body interaction.
2. Introduction
Interest in wireless communications has grown extremely rapidly in recent years. The advantages of
wireless systems over cabled networks, such as mobility of users and infrastructural flexibility have
ensured that wireless remains at the forefront of communications technology. The requirement for higher
capacity and the limited spectrum available has focused attention on the development of systems with
smaller cells (Picocells) and operation at higher frequencies. Within the indoor environment, both current
and emerging Picocell systems are intended for very high traffic density or high bandwidth applications.
Practical systems, which often combine voice and data transmission, include Bluetooth, PCS, W-LAN
(Wireless Local-Area Networks), W-PBX (Wireless Private-Branch Exchange), and parasitic-cellular.
The indoor environment has unique radio propagation properties that are not encountered with more
conventional, outdoor mobile or fixed-access scenarios. Multipath propagation is a key characteristic of
the indoor channel and either statistical or deterministic models can be used to describe the variation in

12
received signal strength caused by fading. The existence of multiple propagation paths, each with a
distinct time delay, attenuation and phase, gives rise to a highly complex transmission channel. The
complex baseband channel impulse response can be represented as:
where, k is the path index, 
is the path gain, 
is the phase shift and 
is the time delay of the 
path.
The transmitted impulse is described by a Dirac function and the received signal h(t) is formed from the
vector addition of an infinite number of time delayed rays, each represented by an attenuated and phase-
shifted version of the original Dirac waveform. The channel response can also be represented in the
frequency domain by applying a Fourier transform.
Signal fading caused by multipath propagation can be either spatial or temporal. Spatial fading (or
fast fading) depends on both the relative locations of transmit and receive antennas within the
environment and the nature of the environment itself (resulting in wave reflection and diffraction). In
spatial fading, significant variations occur as the receiver moves over distances that are more than a half-
wavelength. Temporal fading (or slow fading), however, results from changes in the local environment
itself; this effect therefore also applies to stationary terminals. In populated indoor environments such as
offices and retail premises, the movement of people is the main cause of temporal fading. In both classes
of fading the parameters 
and 
of (1) are functions of time. However, for a determinate observation
time, the channel can be assumed stationary [1]. With spatial fading, the direct correlation with
wavelength means that wideband transmissions will suffer from frequency-selective fading and dispersion
of the information signal. However, a changing local environment often leads to strong variations in line-
of-sight (LOS) wave propagation due to geometrical obstruction. This results in temporal variations that
are independent of frequency, i.e., flat fading, even when considering wideband signals.
At UHF and above, the movement of people within the indoor environment leads to strong variations
in the propagation channel: critical fading may occur in otherwise adequate systems as contributory ray-
paths are created or blocked [2]. The influence of the human body itself may also become a limiting
factor in the performance of a radio system when the terminal antennas are placed in close proximity to it,
for example in the case of a personal digital assistant (PDA) [3].
The site-specific propagation predictor described below is based on a hybrid ray-image / ray-shooting
algorithm that incorporates temporal fading due to pedestrian movement. Section 3 describes a simplified
human body model that accounts for ray transmission, diffraction and reflection. Where appropriate,
antenna-tissue interaction effects can be incorporated using a full three-dimensional radiation pattern: an
example for the 2.45 GHz ISM-band is described in Section 4. The hybrid method itself is outlined in

13
Section 4 and in Section 5 results are presented for representative fixed-link and moving-terminal
scenarios.
3. Human Body Model
In electromagnetic scattering, the human body is often represented as a simplified geometric form with
homogeneous dielectric parameters. This approach reduces the complexity of the overall problem and
facilitates rapid simulation of environments with multiple moving bodies. In the simulations presented
below, tissue dielectric properties are presumed to tend towards values representing human muscle.
However, as frequency increases, wave penetration into biological bodies decreases and tissue parameters
should be adjusted to reflect this. Each human body, whether moving or stationary, is incorporated within
the ray-tracing model as part of the site-specific topology. Represented as finite length, homogeneous,
lossy dielectric cylinders, the bodies are located within the indoor environment at specific co-ordinates
and have an associated (individual) speed and direction of movement.
Figure 1 illustrates the three wave phenomena occurring when there is an interaction between a
dielectric cylinder and a high frequency electromagnetic wave. The high frequency ray approximation
model must take account of reflections, diffraction around the body, and ray-transmission.
For example, at 2.45 GHz a body can  be approximated as a lossy dielectric cylinder 1.8 m tall, 0.3 m
in diameter with the electromagnetic characteristics of muscle 
The attenuation
constant, 
 for an electromagnetic wave traveling in lossy media, and the skin depth, 
 for the body
model can be obtained by using the above values and equation (2).
.

14
At 2.45 GHz the theoretical wave penetration depth in muscle is extremely low (22.3 mm), resulting
in an attenuation of more than 39 dB after 10 cm of travel. The role of 
in (2) ensures that greater
attenuation will occur as frequency increases. The scale of direct-ray absorption means that rays
transmitted through the body may be neglected without incurring significant errors; such rays are
considered ‘blocked’ by the body.
Incident waves will also be diffracted by the cylinder model; these ‘creeping’ waves are modeled by
implementing a uniform GTD solution [4, 5]. Investigation of this phenomenon suggested that the
diffracted waves will suffer significant levels of attenuation, which will increase with frequency
(specifically: 12.3 dB at 2.45 GHz, 16.0 dB at 5.7 GHz and 26.5 dB at 62 GHz). They are therefore only
calculated when a body is placed in the direct path between the transmitter and receiver. In all other cases,
the amplitudes of diffracted rays are negligible when compared to either direct or reflected rays.
Another important propagation mechanism in indoor environments is ray-reflection from the moving
bodies within the environment. The reflection coefficient will depend on polarization, frequency and
tissue-parameters. Considering the 2.45 GHz cylinder model described earlier, Figure 2 shows the
reflection coefficient as a function of the incidence angle for both perpendicular and horizontal
polarization. The values relate to specular reflection only; they were calculated by considering a plane-
wave incident on a reflecting surface tangential to the incident point. With coefficients ranging from 0.77
to 0.99 for the TE case (vertical polarization), reflection from moving bodies is an important mechanism
to consider when modeling indoor UHF-radio propagation.

15
4. Antenna-Body Interaction
Personal communications devices are designed to operate in close proximity to the human body. This can
result in a strong interaction between the terminal antenna and the body itself leading to reduced
efficiency and severe radiation pattern fragmentation. These effects depend on parameters such as the
relative position between devices and the body, the operating frequency and the subject’s dimensions. In
many indoor scenarios, pattern fading can lead to degraded link quality, particularly when the direct-ray is
blocked by the body itself (i.e., where multipath reflections become dominant). Numerical techniques
such as FDTD can be used at lower frequencies (below 10 GHz) to generate full three-dimensional
radiation patterns for the coupled antenna-body system. At higher frequencies, the model size becomes
prohibitively large; here partial body models or GTD solutions must be used.
Consider a 2.45 GHz radio transceiver proximate to the user’s chest and equipped with a
monopole antenna, the RF unit acting as a counterpoise (Figure 3). A whole-body adult-male tissue model
was constructed, incorporating the transceiver and a full three-dimensional radiation pattern was obtained
using FDTD simulation. Using an outdoor, elevated range, comparison measurements were made for the
azimuthal plane. The radiation efficiency was 49.0% for the FDTD case, and 51.3% for the measurements
(calculated using PAG – pattern averaged gain). Within the propagation model, the effects of antenna-
body interaction were taken into consideration by substituting the original pattern with the simulated
radiation pattern of the entire antenna-body system. Each calculated ray associated with transmitting or
receiving devices placed in close proximity to the body is then weighed by the coefficients of the
modified three-dimensional radiation pattern.

16
5. Hybrid method
A ray-tracing algorithm was developed that was capable of supporting single three-dimensional room
scenarios with both transmitting and receiving located inside. An unlimited number of pedestrians (i.e.,
cylinders representing human bodies) can be simulated within the room. Each pedestrian can be moved in
all parts of the room in order to simulate temporal variations in received power. For maximum flexibility,
the information about the position and the movement of each body present is supplied to the program via
a text file. Any areas with different electromagnetic properties, such as windows and doors, can be
included in the model.
The algorithm initially determines all possible propagation paths between transmitter and receiver
using the image technique. Rays that intersect obstructing bodies are deleted according to the
approximations outlined in Section 3. When the direct ray is blocked (NLOS case) the program evaluates
the contribution from waves diffracted around the body. Additional paths between the transmitter and
receiver may be created due to body reflection; these are calculated using an efficient ray-shooting
algorithm (see Figure 4). Ray shooting is inherently computationally expensive, particularly for
complicated indoor environments. In the hybrid model developed, however, rays are only shot towards
the part of the cylinder surface visible from the transmitter and then only the rays subsequently arriving at
receiver are considered. The method is capable of modeling bodies with variable position co-ordinates
(moving cylinders), by recalculating using ray shooting and updating the list of blocked rays for each time
step; note that the image calculations are not repeated. The algorithm also considers the full radiation
pattern of both antennas. To incorporate antenna-body interaction effects, a suitably modified radiation
pattern can be passed to the program.

17
6. Representative Simulations
The algorithm was applied to a typical 150m2 open-plan office environment. In the first scenario, shown
in Figure 5, a 2.45 GHz link connects a stationary terminal (STA) to an access point (AP) in the presence
of moving pedestrians (shown as A, B, C and D). Each pedestrian is represented as a dielectric cylinder of
diameter 0.3 m and height 1. 8 m. The area was modeled as a regular cuboid with windows and doors
included but all other items of furniture were neglected. Pedestrians B and C are both moving at 0. 8 ms-1,
A and D have speeds of 1 ms-1 and 1.1 ms-1 respectively. These conditions are intended to represent a
worst-case scenario within an open-plan office, with four people moving at the same time. The AP was
fixed close to the wall at 2.5 m above the floor, and simulated as an ideal vertical dipole antenna
(+2.1 dBi) fed from a matched 0 dBm source. The STA, equipped with a +0 dBi vertical monopole, was
placed in a desk-top position as shown in Figure 5.
The instantaneous received power at the stationary terminal was calculated at 0.01 s intervals as the
pedestrians move as indicated in Figure 5. The resulting temporal variation in received power is shown in
Figure 6 and, in spite of the fixed position of the terminal, the movement of people causes significant
fading. The reduction of the mean power observable between 5 and 7 s (points (i) and (ii)) is due to the
blocking of the direct ray by the pedestrian bodies when they pass close to the STA.

18
The received signal fluctuates over a range of ~38 dB, with average power of –50.8 dBm. Statistical
analysis of the events shown in Figure 6 revealed that the temporal fading was Rayleigh in nature. The
received signal varies within –31.8 dB and +10 dB of the median with a practical range of ~25 dB for a
cumulative probability lying between 1% and 99%. In addition, a FFT (Fast Fourier Transform) was
applied to the 13 s time series of power values shown in Figure 6 in order to analyze the frequency
spectrum of the fading. The bandwidth of the fading variation was found less than 2 Hz; hence, fading
induced by moving people about can be considered extremely slow.
The link quality within the indoor environment can be improved using ceiling-mounted access point
instead of wall-mounted antennas located at center of the room. This was investigated by repeating the
simulation of Figure 5 with a typical ceiling-mounted indoor antenna with +8 dBi gain. As expected, due
to the change in physical layout, the effect of the moving personnel was reduced in this situation. Fades
now occur in bursts of 0.5–2 s duration and with ~27 dB maximum range, separated by periods during
which the received signal remained almost constant.
The goal of many new indoor radio systems is to guarantee continuous wireless connectivity
regardless of the specific operating conditions to support mobile applications such as body-worn
computing and PDA networks. However, when one terminal is moving the indoor radio channel suffers
from more than one source of channel variation. The algorithm was therefore applied to the case in which
the STA is in motion. A body-worn terminal, such as PDA in a pocket moving at a speed of 1 ms-1 along
the path shown in Figure 7 was simulated. The PDA was considered as being worn close to the body at
chest level and facing the direction of travel, representing the worse-case conditions for a personal
communication device. The three-dimensional radiation pattern of the receiving antenna was modified

19
according to the position of the PDA, considering both the antenna-body interaction described in Section
4 and the orientation of the body. In the posterior body direction, the modified pattern presents antenna
gains of between –40 dBi and –50 dBi, despite having an overall antenna-body system efficiency close to
50%.
The instantaneous received power at the mobile terminal is shown in Figure 8. In this simulation the
pedestrians (A, B & C) were excluded in order to investigate the variation of the channel related only with
the movement of the receiver. A LOS situation exists until 6 s since the body, and therefore the mobile
terminal, is facing the transmitter. The power fluctuates over a range of ~16 dB and the channel statistics
were observed to be Rician with a Rice factor of –13 dB. Due to the change of the orientation of the body
carrying the terminal after 6 s, when the host changes direction, an OBS situation is created. Here the
body itself represents an obstruction for the direct ray. Spatial fades are observed with a dynamic range of
~38 dB and the channel statistics become Rayleigh in nature. The average value of the received power
drops distinctly from –56.9 dBm (LOS case) to –71.7 dBm (OBS case).

20
Additional pedestrians (moving as shown in Figure 7) were added in the simulation to determine the
temporal variation of the channel when both receiver position and the environment are changing. The
effect of the moving pedestrians is shown in Figure 9; for the LOS case the signal now has a dynamic
range of ~25 dB. Despite the existence of a direct ray in the LOS situation, it was observed that the
channel now follows a Rayleigh distribution for the entire (LOS and OBS) observation time. This is due
to the additional reflections and obstruction caused by the presence of the pedestrians. In this case, the
average power drops from -54.5 dBm (LOS case) to –68 dBm (OBS case). The total dynamic range is
about 58 dB.
7. Discussion and Conclusions
In the fixed-link, temporal variations in the received signal envelope, caused by the movement of
pedestrians, were observed. The signal fluctuates over a wide range of  ~38 dB. In [1] Bultitude reported a
typical dynamic range of 30 dB for 900 MHz indoor fixed-link measurements. However, the channel
characteristics are strongly dependent on the topology of the environment and the density of pedestrian
traffic. Further work in this project will aim to explore channel variations associated with a range of
different environments and traffic conditions.
The observed fading is extremely slow with a bandwidth of ~2 Hz. The effects of such slow fading
upon a digital link are related with the transmission rate and the burst duration. The burst duration has to
be short enough to consider the channel constant over the burst. Further work is required to understand
the effect of this slow fading upon a system operating with specific transmission characteristics. Despite
the existence of a direct ray between an access point and a terminal (except for instances where body
shadowing occurs), the observed cumulative distribution of the channel was Rayleigh. If we assume that
the process is stationary (in the widest sense) and ergodic, it is possible to use the values on abscissa as

21
additional attenuation that have to be considered in a radio link budget design with a desired quality of
transmission. For a Rayleigh channel the additional attenuation for a reliability of 95% is 12 dB. It is
possible to counteract these effects; for example, ceiling-mounted distributed antennas can be used in
order to increase both range and reliability [6]. Distributed antennas split the transmission power among
several elements separated in space, in this way less power is wasted in shadow losses and the line-of-
sight channel will be present more frequently.
Three main effects must be considered for mobile, body-worn terminals: spatial fading, channel
variations due to the movements of others and antenna-body interaction. As shown in Figure 8,
obstruction by the user’s body itself results, for the scenario described, in a reduction of average received
power by ~15 dB. This is an additional loss that must be taken into account when determining coverage
for personal communications devices. In the OBS situation, the spatial fading distribution is emphasized
due of the lack of a strong direct-ray: fades of more than 35 dB were observed. The addition of pedestrian
traffic into the simulation (Figure 9) results in a combination of two stochastic processes: the PDA moves
through the spatial fading determined by the environment, but at the same time the propagation
environment continually changes because of the pedestrian motion. However, analysis of the results
indicated that the fading was still Rayleigh in nature.
In conclusion, the combined effects of pedestrian movement, a moving receiver and antenna-body
interaction can strongly impair the quality of wireless communication system. The model developed
offers a reliable solution to determine the impact of moving pedestrians for a site-specific indoor radio
channel.
7. References
[1] R. J. C. Bultitude, “Measurement, characterization and modeling of indoor 800/900 MHz radio channels for
digital communications,” IEEE Communication Magazine, vol. 25, 6, June 1987, pp. 5–12.
[2] F. Villanese, W. G  . Scanlon, N. E. Evans & E. Gambi, “A hybrid Image/Ray-Shooting UHF radio propagation
predictor for populated environment,” Electronics Litters, vol. 35, 21, 1999, pp. 1804–1805.
[3] W. G. Scanlon, “Body-coupled antennas for medical device communications,” URSI National Radio Science
Meeting, York, UK, p. 18, 1999.
[4] P. E. Hussar, “A uniform GTD treatment of surface diffraction by impedance and coated cylinders,” IEEE on
Antennas and Propagation, Vol. 46, N. 7, July 1998, pp. 998–1008.
[5] D. A. McNamara, C. W. I. Pistorius & J. A. G. Malherbe, Introduction to the uniform theory of diffraction,
Norwood, Massachusetts, Artech House, 1990.
[6] S. R. Saunders, Antennas and propagation for wireless communication systems, Guildford, UK, John Wiley &
Sons, 1999.

This page intentionally left blank

An Improved Approach for Performance Evaluation of the Downlink
of DS-CDMA PCS Indoor Systems with Distributed Antennas
MARIO R. HUEDA, CARMEN RODRIGUEZ and CARLOS MARQUES
Centro de Comunicaciones Digitales - F.C.E.F. y Naturales - Universidad Nacional de Córdoba. Casilla de Correo 755 –
Correo Central - Córdoba (5000) - Argentina Tel./Fax : 54-351-4334147 (ext. 15) - Email :mhueda@com.uncor.edu
Abstract. This paper studies the performance of the forward link of a DS-CDMA system with distributed antennas
over indoor radio channels. The interference component caused by the same cell-site users, or interpath
interference (IPI), is a dominant factor in the performance of these systems. In their analysis it is typically
assumed that the probability density function (pdf) of the IPI can be approximated by the Gaussian distribution.
This is called the Gaussian approximation (GA). We show that the GA for the IPI does not provide an accurate
characterization of the performance of the downlink of DS-CDMA PCS indoor systems with distributed antennas.
The bit error rate (BER) at the output of a practical RAKE receiver is computed using an accurate description for
the pdf of the IPI. We show that when the IPI density is thus modeled, the signal to noise ratio (SNR) at the output
of the combiner is well approximated by a random variable with a Weibull distribution. We also propose an
analytical expression for the frame error rate (FER) of convolutional codes (CC) over slowly fading channels.
Results based both on the analytical model and computer simulations for cases involving different numbers of
antenna elements and different levels of interference from other cells are presented. The analytical model is shown
to be highly efficient in terms of computational cost while preserving excellent accuracy. Comparison of the FER
obtained by the new approach for the IPI with those obtained by the GA show that the latter method incurs
considerable error when used to evaluate performance of DS-CDMA PCS indoor systems with distributed
antennas.
Keywords: CDMA, PCS, convolutional codes, diversity combining.
1. 
Introduction
RAKE receivers are used to optimally combine multipath components in direct sequence code
division multiple access (DS-CDMA) systems [1]. These receivers can resolve individual paths with
temporal resolution 
(with W equal to the bandwidth of the spread spectrum signal), thus
providing path diversity. For example, the DS-CDMA IS-95 standard with 1.23MHz bandwidth [2] was
originally designed for an outdoor cellular system where the delay spread is usually in the range of
However, the mean delay spread for indoor environments is typically around 100ns. Therefore diversity

24
gain through multipath fading cannot be achieved by a CDMA receiver with an 813ns chip interval. In
these situations a distributed antenna system improves performance by providing multipath diversity [3].
A large body of literature exists on the analysis of CDMA systems operating in a fading multipath
environment [4][5]. Particularly, the performance of the forward link of DS-CDMA systems has been
analyzed in several works [6]-[9]. E. Sousa and V. Da Silva [6] studied the effect of multipath propagation
on the performance of the forward link of a CDMA cellular system. Yang [7] analyzed the performance of
the forward traffic channel of the IS-95 standard using a modified maximal ratio diversity receiver with a
search engine. Yun et. al. [8] derived the bit error rate in a synchronous (downlink) indoor DS-CDMA
system over a Rician multipath channel, while Weerackody [9] examined the effects of the channel fade
rate on the performance of the downlink of the IS-95 system.
In most of the previous works, the interference component from the same cell-site users (interpath
interference, or IPI) has been assumed to be describable by a Gaussian probability density function (pdf).
This assumption is justified by the central limit theorem when the number of multipath components is large
[9]. The resulting approximation is called "the Gaussian approximation" (GA). Although the GA is
adequate for the different situations analyzed in those works, it is not appropriate for the case of the
forward link of a DS-CDMA PCS indoor system with moderately large bandwidth (e.g., 1.23MHz) and a
distributed antenna system. In this situation, the number of multipath components resolved by the receiver
is limited to the number of antenna elements, which is usually small, therefore the central limit theorem is
not applicable.
Furthermore, low-rate convolutional coding with interleaving is typically the error correction
method used in transmission over fading channels (e.g., IS-95 uses a rate ½, constraint length 9,
convolutional code (CC) with interleaving in its forward link). In this case it is difficult to obtain good
estimates of the bit and frame error rate (BER and FER) for CC owing to temporal variations in the signal
strength and the presence of interleaving. For this reason, in most previous studies performance evaluation
has been done via computer simulations. Recent work has proposed techniques to estimate FER for CC
over fading channels with interleaving [10][11]. Tralli [10] proposed semi-analytic methods which have
been found much more efficient than simulation for the accurate evaluation of small error probabilities. The
efficiency improves as fading samples become less correlated, therefore this technique is attractive in
transmission over fast fading channels. S. Nanda and K. Rege [11] described an analytic technique that
provides good estimates of FER for CC over fading channels with interleaving. Although this method
seems promising, its application in transmissions over slowly fading channels employing diversity
techniques has not been reported so far.
This paper studies the forward link of a DS-CDMA system with distributed antennas over indoor
radio channels. IPI dominates the performance of these systems, and we show that the GA for the IPI does

25
not provide an accurate characterization of the performance of them. We propose a more accurate model to
describe the effect of IPI on BER and FER, and show that when the IPI density is modeled as proposed
here, the signal to noise ratio (SNR) at the output of the combiner is well approximated by a random
variable with a Weibull distribution. We also propose an analytical expression for the FER of
convolutional codes (CC) over slowly fading channels. FER of the forward traffic channel of an IS-95
system are then computed by computer simulation and by exact integration of the analytic expressions
using the Weibull approximation to the pdf. The latter method is shown to be the most efficient in terms of
computational cost while preserving excellent accuracy. Comparison of the FER estimates obtained by the
Weibull approximation with those obtained by complete system simulation reveals that they provide a
much more accurate result than the GA. In Section 2 we derive expressions for the signal statistics at the
output of the RAKE. Section 3 presents the performance evaluation techniques which are the subject of this
paper for the case of uncoded channels, whereas Section 4 extends these techniques to coded channels.
Finally, concluding remarks are given in Section 5.
2. 
The Received Signal at the Mobile
Let 
be the transmitted signal from the base station (baseband signal):
where K is the number of users (k = 0 denotes the pilot signal), 
and 
are the voice activity factor and
the signal amplitude, respectively; 
is the impulse response of the transmitter
(receiver) filter, which corresponds closely to the chip pulse shape used in the IS-95 standard [2]. 
is
complex chip sequence for the kth user. 
is the information sequence, where
is the data symbol, N is the processing gain and 
elsewhere.
The signal received at the mobile station (baseband signal) can be written as
where L is the total number of multipaths, 
and 
are the amplitude and the delay of the l
th multipath,
respectively. In this work we assume that 
are independent zero-mean complex Gaussian random
variables. The delays 
are assumed to be constants for a particular channel model. z(t) represents the
complex noise (thermal noise + interference from other cells), which is modeled as zero- mean AWGN with
(the superscript * indicates complex conjugation and E{ }denotes the expectation
operator).

26
At the receiver, r(t) is filtered and sampled each 
seconds (i.e.. M = 2, 4, 8). Then, the
samples are processed by synchronization stages (code acquisition, alignment and tracking) and by the
RAKE fingers (despreaders) [12]. After the searching process, the output of the  j
thfinger at mth instant
for the 
user is (see Fig. 1)
where J is the total number of RAKE fingers 
is the signal at the receiver filter
output (the operator * denotes convolution), 
is the chip sequence of the 
user, 
is the
sampling instant and 
with 
is the sampling phase. Note that
with 
is the time delay corresponding to the j
th finger. The proper values of 
and
are determined by synchronization stages.
Since the chip interval is 813ns in IS-95 and the mean delay spread for indoor environments if
around 100ns, only one path is resolved for each antenna element, thus we can assume
Moreover we consider that the average energy received from each element is equal
(i.e., 
and the chip timing is perfect. Then the signal at the output of the j
th finger reduces
to (see [14] for more details):
The first term on the right in (5) is the desired signal component for the 
user at the m
th instant
is the signal energy of the traffic channel); next is the interference due to the AWGN noise
generated from thermal noise and noise from adjacent cell-site base stations. The third term is the
interference from the same cell-site users due to the presence of the multipaths and imperfect chip timing. It

27
is possible to verify from [14] that 
and 
can be well modeled as zero mean gaussian processes, with
and 
for
is the pilot signal amplitude) is the average transmitted power from the base
station.
Most previous works have approximated the last term on the right of (5) by a Gaussian process.
This results from assuming large values of L and using the central limit theorem (CLT) [9]. In this case, the
finger output results in
where 
is zero-mean AWGN with
For the system analyzed in this work, the number of multipath components “seen” by the receiver
is practically the same as the number of antenna elements (e.g., L=2,3 or 4), therefore the CLT is not
applicable. For this reason, we will use the last term of (5) without approximations to model the
interference from the same cell-site users; this provides the improved approach for the estimation of the IPI
(IA-IPI). As we will show in next sections, the results obtained from the IA-IPI (5) are significantly better
than those resulting from the GA-IPI (6).
3. 
Performance Analysis
In practical systems, the pilot signal is used by the mobile receiver to demodulate the fingers
outputs (pilot-signal aided demodulator). Then, the demodulated signals are added to obtain the decision
variable. In this section we obtain the average bit-error-rate at the output of a RAKE receiver with pilot-
signal aided demodulation, considering both approximations (i.e., the IA-IPI and the classical GA-IPI).
3.1 
Performance Analysis Using the GA-IPI
The decision variable at the combiner output of a J-branch RAKE receiver using the GA-GPI is
given by (for simplicity, the time indexes are omitted)

28
where 
is the finger output given by (6) and 
is the path gain estimated by means of the pilot signal.
In this paper we assume perfect estimation of the channel parameters, that is, 
Then it can be
verified that for a given set of fade values, the decision variable (8) is Gaussian with
and
The SNR per bit at the combiner output for the GA-IPI results in
where 
is the average SNR per branch defined by
In this case, the pdf of 
is given by [ 1 ]
while the average bit-error-rate results in
where 
and
3.2 
Performance Analysis Using the IA-IPI: the Weibull Aproximation
Similar to the above analysis, it can be verified that the SNR per bit at the combiner output results
in
Then, the average bit error rate at the output of the RAKE receiver can be obtained from

29
where 
is the pdf of 
Since 
does not have a closed-form, neither does (16).
However we have verified that for several cases of interest, the SNR given in (15) can be accurately
approximated by a random variable with Weibull 
distribution, that is
Fig. 2 compare the cumulative distributions of 
resulting from the Weibull approximation
with equivalent cumulative distributions obtained from computer simulations. Parameters 
and 
are
computed by fitting (17) to the pdf obtained from simulations [13]. We consider N=64 and several values
of the relative interference factor f , which is defined as the ratio of the noise power due to other cell-site
base stations to the interference from the users in the same cell-site, that is, 
where
[9] (thermal noise is neglected in this work). Results for L=2 and 3 with J=L are presented
(i.e., number of fingers = number of multipath components). Note that the Weibull approximation shows
excellent accuracy when compared to the simulation results (we have found similar results for other
simulation conditions not presented in this work (e.g., J=3 and L=4,5)).
3.3 
Comparison between 
and
Fig. 3 shows the cumulative distribution function (cdf) for both approximations and several values
of  J, L and f. We can see that the behavior of 
improves respect to 
at low values of 
(this
effect is more important when f decreases). This behavior of 
is due mainly to the correlation

30
between the signal power at the output of a given finger with the IPI power at the outputs of the other
fingers.
To explain this result, we consider a simple example of a RAKE receiver with two fingers and two
multipaths  (J=L=2)  with 
In this case, the finger outputs can be expressed as (see (5)
and (6))
Note that the average power of the IPI (underline terms) is the same for both approximations (i.e.,
Then, when 
and 
are in a deep fading we see that:
a) for the GA-IPI, the signal power at 
and 
is small thus 
is seriously
deteriorated;
b) for the IA-IPI, not only the signal power at 
and 
is small but also the IPI power. Thus
the overall SNR at the combiner output will be larger than one obtained with the GA-IPI (i.e.,
Then, from a) and b) it is possible to understand the better behavior obtained with the IA-IPI
respect to the GA-IPI at low values of 
From Fig. 3 note that the improvement obtained with the IA-IPI

31
decreases as 
grows. This is because when 
and 
are large, not only the signal power at
and 
is large but also the IPI power, which tends to deteriorate 
(note that variations of 
or
do not affect the IPI power at 
and 
Nevertheless, since the error probability is strongly
influenced by the behavior of the pdf at low values of 
the overall system performance predicted by the
IA-IPI is significantly better than that derived from the GA-IPI (this will be verified in the next subsection).
3.4 
Numerical Results and Discussion
Next we compare the system performance using the IA-IPI and the GA-IPI. The processing gain is
N =64. Several values of number of antenna elements, RAKE fingers and relative interference factor f are
considered.
The theoretical and simulated BER at the combiner output for different signal levels 
(16) are
shown in Fig. 4. For the GA-IPI, the theoretical results are derived from (14). For the IA-IPI the theoretical
results are obtained by numerical integration of the (16) using the Weibull approximation (17) to the pdf.
In all cases presented in Fig. 4, we can verify that the theoretical and simulated results are very close. It can
be seen that performance predicted by the IA-IPI is much better than that derived from the GA-IPI, as
discussed in subsection 3.3. Thus, we conclude that the GA-IPI incurs considerable error when used to
evaluate performance of DS-CDMA PCS indoor systems with distributed antennas; the inaccuracy gets
even larger when the relative interference factor/decreases. Similar results will be obtained in next section,
where performance of the error correction code adopted in the forward link of IS-95 is analyzed.

32
4. 
Performance Evaluation of Convolutional Codes over Slow Fading
Channels
Low-rate convolutional coding and interleaving is the error correction method typically used in
transmissions over fading channels. For example, the IS-95 standard employs a rate ½, constraint length 9,
convolutional code (CC) with interleaving in its forward link. In this section we present analytical
expressions to evaluate the bit and frame error rate for convolutional codes over very slow fading channels.
Let 
be the frame error probability of a CC over AWGN channels. Since in indoor
environments the channel varies slowly, the SNR can be considered constant over the duration of all error
events (the effect of interleaving is neglected). In this case, the average frame error rate can be well
approximated by
where 
is the SNR at the combiner output and 
is its pdf. For the GA-IPI the pdf 
is given by
(13) while for the IA-IPI we use the Weibull approximation (17). We approximate the decoder performance
over gaussian channels 
using direct interpolation from the values derived from simulations.
Then expression (20) is easily evaluated by numerical integration. As we will show in next section, results
obtained from (20) show good agreement with values derived from system simulations, even when the
interleaver is included (interleaving is not effective when the channel varies slowly).
4.1 
Numerical Results
Next we study the performance of the forward link of the IS-95 standard using distributed
antennas. The information bits are framed every 20 ms, and then convolutionally coded with rate R=½,
constraint length 9. Interleaving as specified in the IS-95 standard and soft-decision decoding are used. The
data rate is set to full voice rate of 9600 bps 
and the symbol rate of 
is 19200 symbols/s.
Carrier frequency is 1800 MHz and Doppler frequency is 
The processing gain is N=64.
Different number of antenna elements and values of the relative interference factor f are considered.
Fig. 5 shows the FER at the output of the Viterbi decoder for different signal levels. Since
and a rate ½ code is used, the SNR per bit is defined by
where J is the
number of RAKE fingers and 
is the average SNR per branch given by (12). We present simulations
results (with and without interleaving) and theoretical results obtained from (20). In this case, the
theoretical results for the GA-IPI and IA-IPI are obtained by numerical integration of (20) using the pdf
given in (13) and (17), respectively. As in the subsection 3.4, it is possible to verify that the performance

33
obtained from the IA-IPI is much better than that derived from the GA-IPI. Note that in all cases analyzed
the theoretical values show excellent accuracy when compared to the simulation results. Also note that
since the channel varies very slowly, the effect of interleaving is not very important at practical values of
FER (e.g., 
Thus we conclude that the analytical expression (20) can be used to obtain
accurate estimates of the performance of CC over slowly fading channels including diversity and
interleaving.
5. 
Concluding Remarks
This paper has investigated the performance of the forward link of a DS-CDMA system with
distributed antennas in indoor environments. We have shown that the classical Gaussian approximation for
the interference component caused by the same cell-site users incurs considerable error when used to
evaluate performance of these systems. We have proposed a more accurate model to describe the effect of
IPI on BER and FER, and showed that when the IPI density is modeled as proposed here, the signal to
noise ratio (SNR) at the output of the combiner is well approximated by a random variable with a Weibull
distribution. We have also proposed an analytical expression for the FER of convolutional codes (CC) over
slowly fading channels. FER’s for the CC used in the IS-95 standard were then obtained by computer
simulation and by exact integration of the analytic expressions using the Weibull approximation to the pdf.
The latter method has shown to be the most efficient in terms of computational cost while preserving
excellent accuracy (we have verified that with the Weibull approximation the computation time is reduced

34
by about 1 ½ orders of magnitude compared to the simulation of the complete system!). Comparison of the
FER estimates obtained by either numerical integration or the Weibull approximation with those obtained
by complete system simulation reveals that they provide a much more accurate result than the GA.
References
[1] J. G. Proakis, Digital Communications, McGraw-Hill, Third Edition. 1995.
[2] TIA/EIA/IS-95, “Mobile Station-Base Station Compatibility Standard for Dual-Mode Wide-band Spread
Spectrum Cellular Systems,” Telecommunication Industry Association, July 1993.
[3] J. Yang, “Analysis and Simulation of a CDMA PCS Indoor System with Distributed Antennae,” Proceedings of
PIMRC’95, pp. 1123-1127, Toronto, Canada.
[4] K. S. Gilhousen. I. M. Jacobs, R. Padovani, A. J. Viterbi, L. A. Weaver ans C. E. Wheatly, “On the Capacity of
Cellular CDMA System,” IEEE Trans, on Veh. Technol., Vol. 40, pp. 303-312, May 1991.
[5] A. Salsami and K. S. Gilhousen, “On the System Design Aspects of a Code Division Multiple Access (CDMA)
applied to Digital Cellular and Personal Communications Networks,” in Proc. IEEE Conf. Veh. Technol., St.
Louis, MO, May 1991.
[6] V.M DaSilva, E.S. Sousa and V. Jovanovic, “Effect of Multipalh Propagation on the Forward Link of a CDMA
Cellular System,” Wireless Personal Communications, Vol. 1, Nol, pp. 33-41, Kluwer Academic Publishers,
1994.
[7] J. Yang, “Diversity Receiver Scheme and System Performance Evaluation for a CDMA System,” IEEE Tram.
on Commun., Vol. 47, pp. 272-280, Feb. 1999.
[8] L. C. Yun, M. Couture, J. Camagna and J.P Linnartz, “BER for QPSK DS-CDMA Downlink in an Indoor
Ricean Dispersive Pico-Cellular Channel,” Proc. 27th IEEE Asilomar Conf. On Signals, Systems and
Computers, pp 1417-21, Nov. 1993.
[9] V. Weerackody, “Effect of Time Diversity on the Forward Link of the DS-CDMA Cellular System,” Wireless
Personal Communications, Vol. 7, Issue 2/3, pp. 81-109, Kluwer Academic Publishers, August 1998.
[10] V. Tralli, “Efficient Simulation of Frame and Bit Error Rate in Wireless Systems with Convolutional Codes
and Correlated Fading Channels,” Proc. IEEE WCNC’99, New Orleans, Sept. 1999.
[11] S. Nanda and K. Rege, “ Frame Error Rates for Convolutional Codes on Fading Channels and the Concept of
Effective Eb/No,” IEEE Trans. on Vehicular Techn., Vol. 47, pp. 1245-1250, Nov. 1998.
[12] A. Viterbi, Principles of Spread Spectrum Communication, Addison -Wesley, 1995.
[ 13] K. Pahlavan and A. Levesque, Wireless Information Networks, John Wiley & Sons, 1995.
[14] M. Hueda, G.C. Briones, C. Rodriguez and C. Marques, “MMSEC-RAKE Receivers with Resolution
Reduction of the Diversity Branches: Analysis, Simulation and Applications,” Proc. of IEEE Globecom’99, Rio
de Janeiro, Dec. 1999.

Fast and Enhanced Ray Optical Propagation Modeling
for Radio Network Planning in Urban and Indoor Scenarios
R. Hoppe, P. Wertz, G. Wölfle, and F. M. Landstorfer
Institut für Hochfrequenztechnik, University of Stuttgart,
Pfaffenwaldring 47, 70550 Stuttgart, Germany
e-mail: hoppe@ihf.uni-stuttgart.de
WWW: http://www.ihf.uni-stuttgart.de
With the increasing number of subscribers in mobile communications there is a growing interest
in propagation models for the mobile radio channel in urban scenarios and inside buildings.
Because of the increasing transmission rates propagation models should be able to predict the
field strength coverage as well as the wideband properties for these scenarios.
Ray optical modeling of wave propagation is often used for the prediction of the field strength
(and delay spread) in wireless mobile communication networks. However, the practical use of
these deterministic models is limited due to their high computational demands. For large areas
in urban or indoor scenarios the computation times are in the range of hours which is too long
for the planning of mobile radio networks.
A new method for the acceleration of ray optical models is presented in this paper. It is based
on a single intelligent preprocessing of the database in which the mutual visibility relations
between the walls and the edges of the buildings are determined. Therefore the computation
time is reduced to a few minutes on standard PCs. The propagation model is implemented  for
urban and indoor scenarios and comparisons with measurements show the gain in computation
efficiency as well as in achieved prediction accuracy [1].
1. Introduction
The increasing number of subscribers in mobile communications forces network operators to utilize economical
frequency planning. An adequate solution to cope with the growing capacity demands is the reduction of the cell size.
Especially in densely built up areas with high traffic rates microcellular or picocellular networks are used very often.
The planning of these networks requires highly sophisticated propagation models. Depending on the parameters
of the base station (location, frequency, transmitting power and characteristic of the antenna) the propagation models
give information about the quality of service in the area taken into account. The field strength level is still considered
as the most significant parameter for describing the coverage. However, with the increasing number of digital com-
munications other parameters that characterize the radio channel, such as delay spread and impulse response, become
more and more important.

36
The basis for any propagation model is a database which describes the propagation environment. As microcells are
planned to increase the network capacity in cities, it is obvious to use building oriented databases for urban areas. In
order to get a more accurate description of wave propagation, the building data are stored in a vector format. Every
building is modelled as a vertical cylinder with polygonal ground plane and an uniform height above street level. With
this approach only vertical walls and horizontal flat roofs are considered. Additionally, the material properties of the
building surfaces can be taken into account. Figure 1 shows an example of a building database for urban areas.
For indoor sceanrios the building data are stored in a 3D-vector format including all walls, doors, and windows.
All elements inside the building are described in terms of plane elements. Every wall is represented by a plane and
its extent and location is defined by its corners. As mentioned above, for each element individual material properties
can be taken into account With respect to an efficient use it is also possible to import dxf-files, a very common data
format of CAD–software used in architecture.
2. Propagation Models
There are basically two approaches to the prediction of wave propagation in urban and indoor environments which
differ in computational effort and accuracy of the prediction [2].
The so called empirical models (e.g. the model according to Walfisch/Ikegami for urban areas or the Multi–Wall–
Model for indoor [3]) consider only the propagation in a vertical plane which contains transmitter and receiver (see
fig. 2). For the field strength prediction significant parameters have to be extracted from this vertical section (e.g.
average building height or number of penetrated walls). Finally equations containing these parameters have to be
optimised and fined to numerous measurements in order to get a prediction model which is applicable in different
propagation environments. The main advantage of empirical models is their short computation time. However, their
prediction accuracy is limited due to the fact that only a small number of parameters is taken into account and the
influence of the distance from the transmitter is over-emphasised. Additionally, waveguiding effects in streets or along
floors cannot be considered with this empirical approach.
Ray optical 3D propagation modeling has become a widely discussed technique for the prediction of the field
strength (and also of the delay spread) in indoor and urban scenarios [4]. This kind of wave propagation modeling is
very accurate because it considers waveguiding effects in street canyons (urban) or corridors (indoor) and additionally
includes diffraction around corners.

37
There are two basic approaches to searching ray optical propagation paths in an arbitrary vector oriented building
database: ray tracing and ray launching [5]:
Both of them have their individual advantages and disadvantages. Ray tracing computes valid rays for each receiver
point individually and guarantees the consideration of each wall as well as a constant resolution. This individual com-
putation is more time-consuming than the ray launching approach, where the rays are launched from the transmitter
into all relevant directions discretized into small angular increments. There are problems, however, with considering
diffracted rays. In ray launching an edge could be neglected because it is located in the middle between two rays, ad-
ditionally the diffraction multiplicates the number of launched rays. Different approaches to solve the problems with
ray launching were presented in the last years [6], but the ray launching has still kept the disadvantage of a variable
resolution depending on the distance to the transmitter.
Generally the field strength is computed using Fresnel equations for the reflection and transmission and GTD/UTD
for the diffraction [7]. On the other side empirical diffraction models are available, because they can be calibrated with
measurements [8].
Ray optical models are very time–consuming, because all possible rays must be determined and therefore many
reflections, transmissions and diffractions have to be computed. Especially 3D models generate a large number of
rays, but only few of them deliver an important contribution to the received electromagnetic energy. Therefore imple-
mentations for 2D are also available, but they have a limited accuracy and the computation times are still in the range
of hours on a standard PC. Several approaches to accelerating these models were presented in the last years and lead to
acceleration factors up to 10 [8]. But the computation times of these ray optical models (2D and 3D) are currently still
in the range of hours if many prediction points (large prediction areas) and many interactions are taken into account.

38
3. Intelligent Preprocessing of the Building Database
The visibility relations between walls and edges of the buildings stored in the database an independent of the
position of the basestation. Based on this consideration it is possible to accelerate the time consuming process of
path finding by a single intelligent preprocessing of the database. This preprocessing is the basic idea of our new
approach. For this purpose all walls of the database are subdivided into tiles, all edges of the database are subdivided
into segments and also the prediction area is subdivided into a grid of receiver points as shown in figure 4.
The discretization of the database leads to a reduction of identical operations, because the ray tracing algorithm
determines nearly the same rays for neighboring prediction points and for all these points the same computations are
necessary (reflection and diffraction points lie on the same walls and edges [5]).
After discretizing the database, the visibility relationships between all tiles, segments and receiver points an deter-
mined in the preprocessing. The visibility relations an given by the line of sight criterion between the centers of the
tiles (or segments). This leads to a simplification of the path finding problem, i.e. possible interaction points an the
centers of the tiles and segments, only.
If then is e.g. line of sight between a tile and a receiving point (see figure 4), the four connecting straight lines
from the receiving point to the corners of the tile an considered. By projecting these four lines into two perpendicular
planes, four angles an determined which give an adequate description of the visibility relation. Similar computations
for the visibility relations between tiles and tiles, tiles and segments, segments and segments and between segments
and receiving points are performed in the following steps and an also stored in a file.
The projection of the connecting straight lines is very important, because by this operation a range of possible
reflection (or diffraction) angles for the illuminated tile (or segment) is defined. Also the angles continue on the
neighboring tile respectively segment, so a very accurate compulation of the rays is possible even if the tiles or
segments are large (up to 5 or 10 meters, depending on the database) [5].
Tables 1 and 2 show the memory requirements and computation times for different urban scenarios and different
sizes of the tiles and segments. The computation times are smaller than the computation time needed for a single
prediction for the same area with the standard ray tracing (see table 3), because each visibility relation is only computed

39
once in the preprocessing while in the prediction the visibility relation might be considered and be computed several
times for different prediction points.
4. Prediction after Database Preprocessing
The result of the preprocessing of the building database is a tree structure containing tiles, segments and receiving
points of the prediction area, as indicated in fig. 5. In this tree every branch symbolizes a visibility relationship between
two elements. For the prediction only the tiles, segments and receiving points, which are visible from the base station
have to be determined. Additionally, the angles of incidence for the visible tiles and segments have to be calculated.
Subsequently path finding can be done similar to the Ray Launching algorithm by recursively processing all visible
elements and checking if the specific conditions for reflection or diffraction are fulfilled. The ray search is stopped, if
a receiving point or a given maximum number of interactions is reached. Finally the field strength is summed up at all
potential receiving points. Preprocessing the building database reduces the time consuming path finding to the search
in a tree structure. A comparison between the number of branches in the first layer (determined in the prediction)
with the number of branches in the remaining layers (determined in the preprocessing) in the tree structure given
in fig. 5 indicates the relation between the computational effort in the prediction and the computational effort in the
preprocessing.
Figure 6 shows the situation of a single reflected ray between the base station and an arbitrary receiving point.
Both the transmitter and the indicated receiving point are visible from the center of the bright tile. Therefore, only the
conditions expressed in equations (1) and (2) for the different angles have to be verified (see fig. 6). If they are fulfilled,
a single reflected ray between the base station and the receiving point exists and its interaction point is assumed to lie
in the centre of the tile considered.
The stored visibility relations in the tree structure (all layers except the first layer) are independent of the transmitter

40
location and can be used for all predictions with the same database. Only the relations in the first layer of the tree
are depending on the location of the transmitter and must be computed in the prediction process for each transmitter
location.
The number of interactions influences the computation time because each new interaction corresponds to a fur-
ther layer in the visibility tree. Very good results are achieved with a maximum of six interactions (reflections and
diffractions in different combinations with a maximum of two diffractions in each ray).

41
In contrast to the urban propagation model, the indoor model considers also the penetration of walls. For this
purpose the path loss of each tile is stored together with the visibility relation in the preprocessed file, so the algorithms
for the prediction in the two different scenarios are nearly similar.
The computation times for different urban scenarios in comparison with a conservative 3D model [8] are presented
in table 3. They are gained with a maximum of 4 interactions (all combinations of reflections and diffractions with a
maximum of two diffractions). Indoor scenarios are computed with similar acceleration factors.
The new approach combines the accuracy of ray tracing with the idea of ray launching. Like with ray launching, the
new model follows all rays from the transmitter to the receiver points. But in contrast to ray launching, the accuracy
and the resolution are very high, because all rays and their points of interaction are determined in the preprocessing
similar to ray tracing.
5. Transition between urban and indoor models
When different databases are used for the indoor and urban scenarios, a very simple interface can be implemented
for the prediction model, because the tiles of the walls surrounding the building can be used as interface between the
two databases.
If the transmitter is placed outside the buildings, all rays and their angles of incidence are stored for each tile on the
surrounding walls of the building. The following computation of the indoor propagation is very easy with the indoor
tool, because it uses the information of the incident rays on the surrounding tiles and follows these rays on their way
through the indoor visibility tree.
If the transmitter is placed inside the building, all rays reaching the tiles of the surrounding walls are stored and
followed up later with the urban tool on their way through the urban visibility tree.
6. Comparison to measurements
In order to show the accuracy of the new prediction approach, comparisons with field strength measurements are
presented. As underlying test scenario, part of the city center of Stuttgart is chosen with two transmitting stations
operating at 900 MHz. The transmitter antennas were mounted at 6 m respectively 5 m height, well below rooftops,
which is a typical microcellular environment. Different measurement routes with both LOS and NLOS conditions are
considered (see fig. 7 and fig. 9).
Figure 7 shows the differences between prediction and measurement for the first transmitter. The distribution of
the differences shown in fig. 7 is presented in fig. 8. The mean error is 0.3 dB and the standard deviation is 5.8 dB.
The prediction considers all classes of ray paths shown in table 4. For the discretization of the building database the

42
parameters shown in table 5 have been selected.
In fig. 9 the differences between prediction and measurement for another transmitting station are presented. Figure
10 shows the distribution of these differences. The prediction has been calculated with identical parameters. In this

43
case the mean error is -3.5 dB and the standard deviation is 7.4 dB.
These first comparisons between the new prediction approach and field strength measurements indicate that the
same accuracy as with the standard 3-D Ray Tracing can be obtained. With this new approach the delay spread and
the impulse response can also be predicted.
For indoor environments different benchmarks with measurement campaigns were used in different types of  build-
ings. New office buildings like those of the University of Stuttgart [9], and other kinds of office buildings were used
for the comparison. The results concerning accuracy and performance are similar to those of the urban scenarios.

44
7. Conclusions
In this paper a fast and efficient ray optical propagation model for the planning of wireless communication networks
is presented. The new approach consists of a single preprocessing of the building database. Therefore, the database
must be discretized first and then the visibilitiy relations between the resulting elements must be computed and stored
in a file. This process reduces the computational effort of the deterministic path finding considerably. The comparison
to measurements shows a good agreement of the new model. The new deterministic approach with intelligent prepro-
cessing of the database combines the short computation times of empirical models with the accuracy of ray optical
modelling. Additionally, it is possible to define a very simple interface between indoor and urban propagation models
by using the visibility information of the preprocessed databases.
References
[1] WINPROP, Software tool (Incl. demo-version) for the Planning of Mobile Communication Networks and for the
Prediction of  the Field Strength In Urban and Indoor Environments. http://www.winprop.de, Jan. 2000.
[2] E. Damosso, ed., Digital Mobile Radio: COST 231 View on the Evolution towards 3rd Generation Systems.
Bruxelles: Final Report of the COST 231 Project, published by the European Comission, 1998.
[3] A. J. Motley and J. M. Keenan, “Radio coverage in buildings,” Belt System Technical Journal (BTSJ), vol. 8, pp. 19
– 24, Jan. 1990.
[4] K. Rizk, R. Valenzuela, S. Fortune, D. Chizhik, and F. Gardiol, “Lateral, Full and Vertical Plane Propagation in
Microcells and Small Cells,” in 48th IEEE International Conference on Vehicular Technology (VTC), (Ottawa),
pp. 998–1003, May 1998.
[5] R. Hoppe, G. Wölfle, and F. M. Landstorfer, “Fast 3D Ray Tracing for the Planning of  Microcells by Intelligent
Preprocessing of the Database,” in 3rd European Personal and Mobile Communications Conference (EPMCC),
(Paris), Mar. 1999.
[6] G. Durgin, N. Patwari, and T. S. Rappaport, “An Advanced 3D Ray Launching Method for Wireless Propagation
Prediction,” in 47th IEEE International Conference on Vehicular Technology (VTC), (Phoenix, AZ), pp. 785 –
789, May 1997.
[7] O. Landron, M. J. Feuerstein, and T. S. Rappaport, “A Comparison of Theoretical and Empirical Reflection
Coefficients for Typical Exterior Wall Surfaces in a Mobile Radio Environment,” IEEE Transactions on Antennas
and Propagation, vol. 44, pp. 341–351, Mar. 1996.
[8] G. Wölfle, B. E. Gschwendtner, and F. M. Landstorfer, “Intelligent Ray Tracing – A new Approach for the
Field Strength Prediction in Microcells,” in 47th IEEE International Conference on Vehicular Technology (VTC),
(Phoenix, AZ), pp. 790 – 794, May 1997.
[9] G. Wölfle, F. M. Landstorfer, R. Gahleitner, and E. Bonek, “Extensions to the Field Strength Prediction Tech-
nique based on Dominant Paths between Transmitter and Receiver in Indoor Wireless Communications,” in 2nd
European Personal and Mobile Communications Conference (EPMCC), (Bonn), pp. 29 – 36, Nov. 1997.

Indoor Propagation Analysis Techniques for Characterization
of Ultra-Wideband RF Environments
by: David J. Hall
Time Domain Corporation
6700 Odyssey Drive Huntsville, AL 35806 USA
Email: david.hall@tdsi.com
Abstract
Models of the propagation channel of Time-Modulated Ultra-wideband (TM-UWB) RF
transmissions were developed using a specially built receiver with two independent receive
channels. One channel was used to track the incoming signal, demodulate data, and collect
statistics on a bit error test pattern of length 32768. The second channel synchronized with the
first channel and scanned through time to obtain a time domain representation of the incoming
waveform. This scanned waveform is representative of the actual distortion of the transmitted
Gaussian waveform after being  filtered by the environment.
Simple statistics such as 
path loss as a function of distance in several test
environments are discussed. This paper also characterizes the delay spread and shows
performance gain as a function of the number of  correlators in the system. The optimal relative
placement in time of multiple correlators, and the marginal energy gained by adding more
correlators are discussed.
1.0 Overview
This document develops models of the propagation channel of  Time Modulated Ultra-Wideband
(TM-UWB) RF transmissions. A specially built receiver with two independent receive channels was used
to collect data [1]. One channel was used to track the incoming signal, demodulate data, and collect
statistics on a bit error test pattern of length 32768. The second channel synchronized with the first
channel and scanned through time to obtain a time domain representation of the incoming waveform.
This scanned waveform is representative of the actual distortion of the transmitted Gaussian waveform
after being filtered by the environment. By using this technique, precision measurement of the impulse
response of the channel was limited only by the maximum communication range of the system.
Simple statistics such as 
path loss as a function of distance in several test environments are
discussed. Examples of this are given for data captured (1) down long hallways, (2) in classrooms and
offices, and (3) through walls of various materials such as drywall. cinderblock, etc. This paper also
characterizes the delay spread and shows performance gain as a function of the number of correlators in
the system.

46
2.0 Test Design
2.1 Environment
Data was collected in at least nine distinct environments characteristic of typical conditions found
in representative buildings.
Specific locations were selected with representative characteristics to provide a wide range of
environmental conditions.
2.2 
Equipment
The test equipment consisted of a transmitter, receiver, two antennas, a laptop computer, and
speakers. Figure 1 shows a block diagram of the test configuration. Figure 2 shows the full equipment
setup in operation.

47
The transmitter transmitted a known pseudo random bit error test pattern of length 32768. 
A
specially built scanning receiver with two independent receive channels was used to collect data. One
channel was used to track the incoming signal, demodulate data, and collect statistics on a bit error test
pattern of length 32768. The second channel synchronized with the first channel and scanned through
time to obtain a time domain representation of the incoming waveform. This scanned waveform is
representative of the actual distortion of the transmitted Gaussian waveform after being filtered by the
environment and receiver processing. By using this technique, precision measurement of the impulse
response of the channel was limited only by the maximum communication range of the system.
Figure 3 is a block diagram of the scanning receiver. Figures 4 and 5 show the receiver in
operation in two different environments.

48
2.2.1 Calibration
An experiment was performed to investigate correlation of the output of the correlator to the
received power of the system to determine if this correlation was linear throughout the entire dynamic
range of the receiver. Also, once the correction factors relating the energy in the scan waveform to the

49
known received power were identified, it could be established for a given uncalibrated received waveform
exactly how much received power was represented.
Calibration was based on establishing a link with a scanning receiver/transmitter pair inside an
anechoic chamber. 
The power spectrum of the transmitter was measured using an average power meter
and spectrum analyzer in averaging mode. All component insertion and VSWR parameters were
measured and taken into account during post processing of the data. The received power was determined
by measurement with a preamplifier and spectrum analyzer in averaging mode. The measured received
power was compared to the predicted received power using Friis' transmission equation. Correlation
between theoretical and measured was within an average 2.9 dB. In addition to the external
measurements, received time domain waveforms were processed and saved by the scanning receiver and
post processed by the computer program. Once the average power correction factor was entered into the
program the time domain waveforms were processed and the difference between predicted average power
and measured was plus or minus 0.6 dB. The mean error was -0.0025 dB and the standard deviation was
0.48 dB, establishing that the author’s algorithm for calculating received power was accurate throughout
the dynamic range of the receiver.
3.0 
Data Collection
The data collected was a collected in a series of files containing header information and two
columns of data. The headers contain information such as position, pulses per bit, time window, number
of samples, transmit and receive attenuations, etc.) 
The first column contains the demodulated data
channel data, and the second column contains the scan waveform data.
One channel was used to track the incoming signal, demodulate data, and collect statistics on a bit
error test pattern of length 32768. The second channel synchronized with the first channel and scanned
through time to obtain a time domain representation of the incoming waveform.
4.0 
Test Results
4.1 Data Analysis
Each file of data collected from each location is a time domain fingerprint of the RF environment
at that location. It reveals the different paths taken by the various RF reflections between the transmitter
and the receiver. Figure 6 shows typical waveforms in three different environments.

50

51
4.2 Approximate Path Loss Coefficients
The path loss coefficient (denoted by n) is the number describing the decrease in received power
in dB when plotted as a function of the ratio of the distance between the transmitter and receiver, and
some arbitrary reference distance.
PL(d) is the mean path loss in dB at some distance d between the transmitter and the receiver. 
is
the mean path loss in dB at reference distance 
and n is the empirical quantity – the “path loss
exponent”.[2] In calculating power, the author assumed 40 correlators were available.
Figure 7 plots all data from all locations, showing the received power in dBm as a function of distance in
meters. The heavy line is a best logarithmic fit to the data points. It corresponds to an n of 1.271. Notice
that the goodness of fit is low because the data is all sampled locations, irrespective of attenuating barriers
or environment. When all the data is divided into classes based on environment, much better curve fits
result.

52
4.3 Root Mean Square Delay Spread
Root mean square (RMS) delay is a metric of the “ringing time” of the pulse 
It is described as
follows:
where
n=1,2  [3], [4]

53
Figure 8 plots all data from all locations. The best linear curve fit (y = -0.0005x + 11.567) would
typically increase, but the standard deviation of this fit is so much larger that no definite conclusions can
be drawn for the data taken as a whole. RMS delay spread doesn’t appear to be a function of distance.
However, further analysis will be conducted to see if there is a relationship to number of walls or material
properties.
4.4 Typical Attenuation through Barriers
A major concern is the effect of various barriers on the signal power. Readings were taken in
environments with a number of different barriers. The author formed rough estimates based on
observations of applicable power vs. distance plots.

54
4.5 Marginal Value of Correlators
Another issue is identifying the number of correlators needed to capture a specific amount of
energy in the received waveform. Figure 9 shows the amount of energy captured by some number of
correlators divided by the amount of energy captured by 40 correlators. The correlators have already
been sorted so that the first correlator captures the most energy, the second correlator captures the second
most energy, etc. An attempt was made to perform an exponential fit to the following equation:
is a decay constant, approximately equal to the number of correlators required to capture 1-1/e = 63%
of the energy available in the waveform. Generally, the fit was quite good. The typical function for the
average 
plus one standard deviation of 
and minus one standard deviation of 
are plotted below.
Figure 9 is a plot of how much available waveform energy is captured as a function of the number of
correlators used to capture it. For example, considering the average values, about 6 correlators are
required to get to within 3 dB of the total available energy (illustrated by the square series in figure 9).
However, 68% of the samples fall between plus one sigma and minus one sigma of the values samples .
(These would fall between the diamond series and the triangle series in Figure 9). They will capture
within 1.3 to 4.5 dB of the available energy.

55
Figure 10 shows the 
discussed in section 4.3 plotted as a function of RMS Delay Spread. The
fit is quite linear, confirming that the more ringing there is in the waveform, the more correlators are
required to capture a specific fraction of the available energy.
4.6 
Issues
to near the ambient noise level. In the future, at least 100 – 150 nS of data should be captured. Also,
longer records will allow better comparisons to narrowband propagation models.
• 
Distances didn’t vary greatly. 
A wider range of classroom data at varying distances and
locations, not just about a circular pattern around the edge of the room, would have allowed better curve
fitting.
5.0 
Conclusions
The test results provided a high level description of the overall stochastic properties of an ultra-
wideband environment using such common metrics as RMS Delay Spread and Path Loss Coefficients, as
well as newer metrics such as the marginal correlator coefficient
Test results that were identified by specific environments enabled the construction of a much
more accurate stochastic model.
•            The longest waveform captured was 70 nS.  Sometimes, the ringing still had not decreased down 

56
6.0 Acknowledgements
Many thanks to James Mann and his numerous assistants for their patient efforts collecting the
data, Bill Beeler for his assistance in the calibration procedures, Paul Withington and Rachel Reinhardt
for their insights into propagation and UWB in general, and Susan Phelan for her assistance in not only
the technical writing but a prodigious amount of number crunching. Also Bill Beeler for his patience with
the calibration procedure and giving me extra help on the spreadsheet minutiae.
7.0 
References
[1] Withington, Reinhardt and Stanley, “Preliminary Results of an Ultra-wideband (Impulse) Scanning
Receiver”, Paper S38P3, Milcom 1999, Atlantic City, NJ, November, 1999
[2] Greg Durgin, Theodore S. Rappaport, and Hao Xu, “5.85 GHz Radio Path Loss and Penetration Loss
Measurements In and Around Homes and Trees,” IEEE Communications Letters, Vol 2. No. 3, March
1998, pp 70-72
[3] Theodore S. Rappaport, Keith Blankenship, and Hao Xu, “Propagation and Radio System Design
Issues in Mobile Radio Systems for the GloMo Project” Mobile and Portable Radio Research Group.
Bradley Department of Electrical and Computer Engineering. 
Virginia Polytechnic Institute and State
University. Revised January 31, 1997.
[4] Kaveh Pahlavan & Rajmani Ganesh & Steven J. Howard, “Wideband Frequency and Time Domain
Models for the Indoor Radio Channel,” IEEE Global Telecommunications Conference Globecom , 1991,
p 1135-1140 Vol.2.

Propagation Signatures to Characterise Wideband Environments
Gregory Martin
Victoria University of Technology
Mobile Communications & Signal Processing Group
PO Box 14428MC, Melbourne City, 8001
Victoria, Australia
email: greg@cabsav.vu.edu.au
Abstract
A propagation signature is introduced to summarise wideband propagation measurements. The
display indicates the probability of rays occurring in a matrix of excess delay and power bins, and
using a contrasting sequence of colours on a two-dimensional plot, provides a vivid visual sum-
mary of propagation conditions in a particular environment.
1. 
Introduction
Presentation of the large amount of data collected during wideband propagation mea-
surement sessions poses a dilemma. Each environment area may be characterised by a large num-
ber of power delay profiles (PDPs), which show wide individual variations, but overall represent
the propagation statistics for the area. While individual PDPs are interesting to examine, these
scarcely convey the overall statistical picture. On the other hand, an average PDP over an area
loses a lot of the available information. Single parameter measures, such as rms delay spread,
average delay, delay window and K factor {Ref. 1}, provide useful summaries of signal time dis-
persion. Distribution plots of these single parameter measures give a valuable quantitative picture
of the area statistics, and show the spreads, and maximum values, of these measures. But in addi-
tion, there remains a need to present a concise picture of multipath activity.
A novel summary of the distribution of multipath rays over power and excess delay
bins is proposed, providing a vivid and graphic fingerprint of the multipath propagation excess
delay statistics for a particular environment. (Note: the method relies crucially on the use of
colour to convey information; when restricted to grey-scale, much of the impact is lost).
2. 
The Propagation Signature
A novel graphic summary of the distribution of multipath rays over power and excess
delay bins is introduced in this section. This gives a vivid pictorial signature or fingerprint of the
multipath propagation excess delay statistics for a particular environment. Akin to a contour map,
and plotted as a two-dimensional graph using colour and position to convey propagation parame-
ters, an example of the Propagation Signature is shown in Figure 1.

58
Normalised PDPs are analysed to identify individual rays, which are then sorted into
both power and excess delay bins. The time bins are 50 samples wide, or 
in outdoor mode,
and range from 
to 
 ranging from 
to 
for indoor mode).
Power bins are 2dB wide, and extend from 0dB to -24dB. Thus there are 59 time bins
and 12 power bins, giving a matrix of 708 bins. Because the dynamic range of individual PDPs
varies, the power range is chosen as large as possible, consistent with the desire to minimise the
number of PDPs discarded on the basis of inadequate dynamic range. Profiles with less than 24dB
dynamic range are discarded.
The total number of rays in each bin is divided by the total number of PDPs , giving the
average number of rays per PDP in each bin. Previously each PDP has been normalised to the
strongest ray, which furnishes the origin for power (0dB) and excess delay time
Of course the strongest ray may not be the first to arrive, so the normalisation scheme
can result in rays with negative excess delays. Remember that the time scale is relative to the
strongest ray, not the direct path. By definition, the [0 to 
 0 to -2dB] bin will have an aver-
age number of rays/bin of 
 The average number of rays/bin can be interpreted as the probabil-
ity of a ray occurring in the bin. If the ‘probability’ exceeds 1, this implies more than 1 ray/bin on
average. Even though the channel sounder allows up to twelve resolvable rays per 
 time bin,

59
apart from the origin bin, probabilities >1 have seldom been found.
A three-dimensional (3D) mesh plot of ray probability (z axis) versus the power, time
bin matrix (xy axes) is generated, with z ranges depicted with a diffused colour (replaced by grey-
scale in this printing) band legend. The graph-plotting software performs linear interpolations
between bins, and colour diffusion effectively provides further interpolation. Data for power bin
[0 to -2dB] is labelled “0dB” etc., with the final [-22 to -24dB] bin labelled “-22dB”.
A conventional oblique 3D view always obscures part of the mesh plot, no matter
which viewing angles are chosen. However, viewing the plot from vertically above, with perspec-
tive turned off, results in the contour map style presentation shown in Figure 1. Colour banding is
assigned on a non-linear scale, to show more detail for low ray probabilities. The result is a dis-
tinctive, informative and aesthetically pleasing signature of the propagation environment. Some
examples of the propagation signature follow, based on a selection of outdoor propagation mea-
surements in the Australian cities of Adelaide, Melbourne and Sydney, and an indoor propagation
example.
A description of the VUT channel sounder is given in Ref.2, and more details of the
outdoor measurements may be found in Ref.3.
3. 
Adelaide
Adelaide signatures are shown in Figure 2. From the Adelaide Hotel transmitter loca-
tions, tall city buildings are from 1.4 km to 3.5 km 
to 
to the south. With the
antenna on the roof, measurements were made to the north of the hotel, moving away from the
city, and also in the city itself. The strong direct path predominates, with no powerful paths at
large excess delays. Some activity occurs at 
-10dB, some at 
-16 to -22dB, and at
-12 to -24dB. All these excess delays may be explained by reflections from tall city buildings.
Locating the transmitter antenna protruding from a 1st floor window on the south (city
facing) side of the hotel, and with the receiver moving through the Torrens River valley below,
and into the city area, shows strong multipath activity at excess delays of 
and 10 to
The long excess delays range between -2 to -24dB, and could occur in the Torrens valley
with a reflection from the north edge of the city. Some paths at 
are also present.
The final measurement location, with a low transmitter antenna in Victoria Square in
the centre of the city, is notable for negative excess delay paths, some at relatively high power
levels, up to 0dB. These range from 
to 
and represent the first arriving ray, showing
that the strongest ray is arriving by a more indirect path. There is only slight low power activity at
excess delays greater than

60

61
4. 
Melbourne
Inner suburban measurements based in Delbridge Street gives a signature with little
dispersion and no large excess delays using the below-rooftop low transmitter antenna (balcony).
Raising the transmitter antenna above rooftop level increases time dispersion markedly. Rays are
present at 
(-8dB), equivalent to an excess path of 2.9 km, and at 
and 
The
straight line distance from the Delbridge Street transmitter to the comer of Lonsdale and Swan-
ston Streets in the city area, is 3.1 km. For a receiver location on Johnston Street, the excess path
to city buildings in Lonsdale Street is 3.3 km, equivalent to 
 Excess paths across the whole
city may produce excess delays over a range of approximately 
 to 
The city skyline (see
Figure 4) is thus at the correct distance to explain rays at long delays in the Delbridge Street roof
signature.

62
5. 
Indoor Measurements
Using a channel sounder with 10ns resolution {Ref.l}, measurements were made
inside a large seven storey concrete university building called D block {Ref.4}. The transmitter
was located on the top floor (Level 7), not far from an outside window which gave views of other
campus buildings. One set of measurements was made on the same floor as the transmitter, mov-
ing down a long central corridor (about 70 metres in length). The other set was taken two floors
lower, on Level 5, while the transmitter remained in the same position on Level 7.
The signature for Level 7 shows activity up to 
and some activity at excess delays
of about 
and 
The longer delays indicate reflections from external structures. Below
on Level 5, a lot of rays are arriving up to 
before the strongest rays, and many rays are
present, sometimes at high power levels, up to 
after the strongest rays, which is about
after the first arriving signals. 
excess path corresponds to 300 metres, or a a reflector 150
metres distant, and several other campus buildings lie within this range. On Level 5, the most
direct paths are suffering floor and wall attenuation, and the strongest signals arrive after reflec-
tion from outside buildings.

63
6. 
Sydney
The McMahons signature comprises measurements clustered around Blues Point on the
north side of Sydney Harbour, shadowed below cliffs from the elevated 4th floor McMahons
Point transmitter location. Because of the heavy shadowing, many of the reflected paths are as
strong or stronger than the direct ray. Specular reflectors abound, including the metal Sydney
Harbour bridge structure, Luna Park across Lavender Bay, and high-rise city buildings on the
south shore of the harbour. The signature shows strong rays between 0 and 
with the longer
delays corresponding to the north end of the bridge, about 700 metres distant. There are other rays
at 
(-1dB to-6dB), 
and
The excess path corresponding to the northern edge of the high-rise city on the south
side of the harbour is approximately 
The south edge of the city (University of Technology
Sydney building, just south of the downtown city area) could give excess paths ranging up to
about 
so any rays with excess paths in the range
 to 
may be caused by high-rise

64
city buildings. This environment is the most dispersive of any measured in Australia, and there is
considerable evidence that in many cases, the strongest ray is not the first arrival.
7. 
Results Summary
Results are summarised in Tables 1 and 2, which give rms delay spread, and mean
delay values, not exceeded in 25%, 50% and 90% of cases, and also the maximum values of these
parameters observed during the tests. The maximum straight line separation between transmitter
and receiver for each transmitter location is listed. Any power delay profiles not exhibiting at least
20 dB signal above the noise floor were discarded prior to calculation of the results presented in
the tables.
While the tables provide a quantitative summary of propagation statistics, the propaga-
tion signatures allow a rapid visual comparison of the different propagation environments.

65
8. 
References
[1] Theodore S.Rappaport, “Wireless Communications Principles and Practice”, IEEE Press, Prentice-
Hall, New Jersey, 1996.
[2] G.T. Martin and M. Faulkner, “Delay Spread Measurements at 1890 MHz in Pedestrian Areas of the
Central Business District in the City of Melbourne”. Published in the Proceedings of the IEEE 44th.
Vehicular Technology Conference (VTC’94), Stockholm, Sweden, June 8-10, 1994. Volume 1, pages
145-149.
[3] G.T. Martin and M. Faulkner, “Wide Band PCS Propagation Measurements in Four Australian
Cities”. Published in the Proceedings of the 10th.International IEE Conference on Antennas and
Propagation (ICAP’97), Edinburgh UK, 14-17 April, 1997, Volume 2, pages 199-203.
[4] G.T. Martin and M. Faulkner, “PCS Ray Characteristics Between Multiple Floors of a Concrete
Building”. Published in the Proceedings of the 47th. International IEEE Conference on Vehicular
Technology (VTC’97), Phoenix USA, May 1997, Volume 3, pages 1400-1404.

This page intentionally left blank

Smart Antennas for CDMA Cellular and PCS Networks
Scot Gordon, Marty Feuerstein, Donn Harvey, Michael Zhao
Metawave Communications
10735 Willows Road, NE
Redmond, WA 98052
Abstract
Smart antennas have been in existence for some time, but only in the past few years have
they gained acceptance in commercial cellular and PCS networks. For CDMA, the
commercial smart antenna is non-traditional as it synthesizes sectors of varying azimuths
and beamwidths to equalize loading and improve sectorization efficiency. This can be
conceived as beamforming over an aggregate of users which is unlike a more traditional
smart antenna which may beamform or beam-switch on a per user basis. 
This paper
presents the uses and advances of this form of smart antenna. Specifically, it looks at its
ability to support an increasing number of sectors due to the extra degrees of freedom,
and large aperture that an antenna array provides. Further, it outlines how the smart
antenna supports continuous optimization by dynamically adjusting the sector sizes and
orientations based on traffic loading estimates.
1. 
Introduction
Explosive growth in the cellular and PCS industry has left operators in a challenging
position; keeping network capacity in line with consumer demand. 
Recently,
unprecedented demand for data services, such as internet browsing and email, has led to a
new paradigm in cellular and PCS; wireless data services. This shift from voice-centric
networks to both voice and data accentuates operators’ difficulty in meeting network
capacity needs. One solution to this dilemma is the smart antenna. Smart antennas have
been around for many years for military applications but only recently have gained
acceptance for cellular and PCS applications. Traditional cellular and PCS networks are
static, configured so that the network cannot adjust to the ever changing traffic patterns
and interference environment. Smart antennas, in all forms, control interference in some

68
way. This is typically done through the adjustment of radiation patterns. For example,
the smart antenna may switch from a set of fixed beams or adaptively form beams. The
beamforming or beam switching decision has traditionally been done on a per user basis
maximizing a specific mobiles carrier to interference ratio.
However, recently a new
breed of smart antennas for CDMA networks, referred to as sector synthesis [1], forms
beams that optimally define sectors. This “beamforming” across an aggregate of users
maximizes the sectorization efficiency by controlling interference, managing handoff
overhead and equally dividing the load across sectors. Further, this beamforming can be
dynamic, reconfiguring itself based on the changing traffic conditions. As another benefit
the increased flexibility provided by a smart antenna provides the cell with a smooth
transition to increased sectorization, which, if configured appropriately, primarily through
software changes, can support three, four, five or six sectors. This paper explores these
benefits by summarizing results of a four, five and six sector deployment and detailing
the method of dynamic sectorization.
2. 
Sector Synthesis
The majority of all cells in a cdmaOne network are sectorized in an effort to increase the
capacity of the cell. In fact, going from an omni cell to a three sector cell may offer
nearly a three fold capacity improvement. 
However, rarely is this near three-fold
increase realized because of unequal and ever changing traffic distributions, and large
handoff regions between sectors. 
Optimal sectorization efficiency requires that traffic
load is evenly distributed across sectors and handoff overhead is minimized. 
In the
worst case, the traffic distribution would be such that one sector carries 100% of the load
while the other two sectors remain completely idle providing no increase in capacity
associated with sectorizing the cell. Although this scenario is unreaslistic, it is very likely
that a sectorized cell will have large traffic imbalances across sectors. 
Further,
traditional deployments use sector antennas with beamwidths on the order of 80 or 90
degrees. These somewhat small aperture antennas have a slow rolloff of the mainlobe
causing energy to bleed into adjacent sectors increasing both interference and handoff
overhead.

69
The sector synthesis concept [1] uses three panel antennas each consisting of an antenna
array. The phase and amplitude of the array elements are software controlled allowing
the operator to change the beamwidths and azimuths of each sector. So, unlike some
more traditional smart antennas where beams are formed on a per user basis, the sector
synthesis approach beamforms across an aggregate of users. For CDMA, the benefit of
this approach is the beamforming is done at RF, allowing the smart antenna to be
implemented as a non-invasive add on to an existing base station. Other approaches,
such as beam switching and adaptive beamforming, require the smart antenna to be more
tightly coupled to the base station because most of the smart antenna functions must be
implemented at the baseband level.
The flexibility offered by the sector synthesis enables the site to be configured so that
traffic loads are evenly distributed. Further, the antenna array has a large aperture with
respect to traditional sector antennas improving the rolloff of the mainlobe and hence
decreasing adjacent sector interference and softer handoff activity. 
The result is
improved sectorization efficiency. 
Capacity improvements differ depending on the
characteristics of the cell, however, the average is about a 40% improvement. Table 1
lists some examples from different networks. Detailed capacity calculations and results
are presented in [2].

70
3. 
Flexible Sectorization
Load balancing is an effective means of improving the capacity of a cell site given that
the site is imbalanced to begin with. Although this is most often the case, there are
instances where the cell is reasonably well balanced. In such instances increasing the
sectorization of the cell is a viable alternative. Historically,
moving beyond a three
sector cell has been problematic. Pilot pollution is exascerbated and handoff activity
increases reducing the capacity improvement and while increasing the optimization
effort. Further, installations where analog and CDMA systems share antennas makes re-
orienting and installing additional antennas to support the increased sectorization
impractical.
The smart antenna is a natural enabler of increased sectorization. Because their exists an
antenna array with the ability to form narrow beams, implementing four, five or six sector
configurations is generally a straightforward change done through software. Further,
with the added ability to sculpt the patterns by phasing and weighting the elements in the
antenna, pilot pollution is minimized.
As an example, we look at a recent deployment where a three sector cell was converted to
a four, five and six sector cell. The cell of interest is located in a busy network and is
configured with two CDMA carriers. Users on the cell are assigned the first CDMA
carrier unless the first carrier, F1, is determined to be overloaded, in which case a user is
assigned the second carrier, F2. Thus, any call completions that occur on the F2 are
blocked by the F1 carrier. This provides a convenient mechanism to measure the
capacity improvements offered by the different sectorization schemes. Defining 
as
calls completed on F1 and 
 as call completed on F2 the Grade of Service (GOS) is
A low GOS for a given traffic level indicates that most of the traffic is carried by F1 and
little blocking would exist if a second carrier were not present. Likewise, a high GOS

71
indicates much heavier loading on the second carrier and a large level of blocking would
exist if the second carrier were not present.
By trending the GOS versus call completions we get a indication of the efficiency of the
cell under the baseline three sector scenario and the smart antenna implementation of
four, five and six sectors. A trend line is computed by assuming the blocking rates follow
the Erlang B model,
where C is the number of trunked channels offered by a trunked radio system and A is the
total offered traffic in Erlangs. COMA is not a fixed trunk air interface as the number of
available traffic channels varies dependent on, among other things, the forward link
power requirements and handoff state of those mobiles currently served by the cell.
However, over time there should be an average number of “available” traffic channels
and hence the Erlang B provides an approximate GOS measure for CDMA. The number
of trunked channels in the Erlang B model, C, is selected in order to minimize the
squared error between the observed GOS values at a given traffic level and the predicted
GOS of the Erlang B model at that same traffic level. The offered traffic, A, is obtained
by equating it to the number of call completions in a given hour, 
and assuming
each call completions lasts 90 seconds, i.e.,
Figure 1 displays both the observed data and the corresponding trends. Using the
computed trends, the capacity improvement offered by the four, five, and six sector
configurations over that of the baseline three sectors configuration is computed and
displayed in figure 2. 
Using this figure, we see the four, five, and six sector
configurations have improved the capacity handling capabilities of the F1 carrier. The
capacity improvement of the six sector ranges from nearly 85% at a 0% GOS and 70% at
a 5% GOS. At a reasonable GOS of 2% we see a 73.6% increase in capacity. Likewise,
at a 2% GOS the the four and five sector configuration demonstrate a 48.7% and 53.7%
increase in capacity respectively.

72

73
Another important measure of performance are quality metrics. Poor performance in the
form of access failures or lost call rate is an indicator of pilot pollution, which may
become more problematic as the number of sectors increases. Table 2 displays these two
metrics for the various configurations along with the handoff overhead, which is another
indicator of pilot pollution. Both lost call rates and access failure rates remain consistent
with the baseline levels with only the five sector configuration showing a slight increase
in the lost call rate. Further, the handoff overhead increased only a modest amount in the
five and six sector configurations despite the presence of additional handoff boundaries.
These factors combined lead to the conclusion that the smart antenna provides enough
configuration flexibility and sector-to-sector isolation to keep pilot pollution under
control.
3. 
Continuous Optimization
Optimal CDMA capacity for a given cell requires that the traffic load be evenly
distributed across all available sectors. Doing so equalizes the utilization of each sector
and maximizes the sectorization efficiency. The static approach of synthesizing sector
sizes and orientations is effective especially when optimized for a particular time of day
(i.e. busy hour) when traffic loads tend to be more predictable from day to day.
However, the dynamic nature of mobile traffic can lead to changing sector loads on both
short and long term time scales. In such cases a fixed optimization strategy will be sub-
optimal. A CDMA smart antenna provides the capability to adjust its sectorization based
on measurements of traffic loading.

74
These measurements of load include uplink received signal strength and downlink pilot to
interference ratio. 
The uplink received signal measurements are converted to a
loading estimate by comparing the levels to the thermal noise floor providing a noise rise
estimate from which the percent loading of pole capacity is
where N is the noise rise [3]. Each panel antenna contains a four element array and hence
four nearly disjoint 30 degree beams can be formed on the uplink through a butler matrix.
Because the smart antenna consists of three panel antennas, twelve beams are formed that
span the circumference of the cell on the uplink. This provides twelve noise rise
estimates with 30 degrees of resolution. On the downlink the pilot to interference ratio is
measured on a per sector basis and hence the resolution of each sector is dependent on the
current size of that sector.
Figure 3 displays the noise rise versus beam number. Reverse link load is highest on
beams 2 and 3. If a single sector is currently serving this region a decision is made to
reconfigure the site so that a single sector is either serving only beams two and three or
alternatively, a sector boundary is placed between beams two and three sharing the load
between two sectors. In this way, we continually optimize the site so the load is evenly
distributed.
In almost all cases, CDMA cells are forward link limited and hence, load balancing
based on a reverse link metric may produce sub-optimal results. The alternative is to use
a forward link measure. The pilot to interference ratio is the most appropriate candidate
as it provides a direct forward link measure of loading on each sector. Further, some
basestation types will block calls on a particular sector when the 
falls below some
threshold. By configuring the sectors so that the minimum pilot to interference ratios of
the available sectors is maximized produces an optimal sectorization scheme and
minimizes blocking. Figure 4 shows a temporal plot of filtered 
samples, indicating
time periods of heavy traffic and sector-to-secotr imbalance. In this case, the gamma
sector exhibits heavy loading and presents an opportunity to offload traffic into adjacent

75
sectors by adjusting its sector size. Doing this improves the capacity of the cell by
reducing the air-interface blocking that would be incurred on the gamma sector.

76
Conclusion
The CDMA smart antenna has proven itself capable of improving sectorization efficiency
by balancing the traffic load and decreasing handoff overhead. For cells which already
have good efficiency the smart antenna provides a seamless transition to four, five or six
sectors demonstrating a 74% capacity improvement over that of the existing (baseline)
three sector system. Further, as networks migrate to a more continuous optimization, the
smart antenna enables sector changes on the fly, responding to loading conditions as
measured either on the reverse link or the forward link.
References
[1] M. J. Feuerstein, J. T. Elson, M. A. Zhao, S. D. Gordon, “CDMA Smart Antenna
Performance”, 1998 Virginia Tech Symposium, June 1998, Blacksburg, VA.
[2] S. D. Gordon, M. J. Feuerstein, M. A. Zhao, “Methods for Measuring and Optimizing
Capacity in CDMA Networks Using Smart Antennas”, 9th Virginia Tech Wireless
Personal Communications Symposium, June 1999, Blacksburg, VA.
[3] K. S. Gilhousen, I. M. Jacobs, R. Padovani, L. A. Weaver and C. A. Wheatley, "On
the capacity of a cellular CDMA system," IEEE Trans. Veh. Tech. VT-40(2) 1991.
[4] M. J. Feuerstein, “Applications of Smart Antennas in Cellular Networks”, IEEE AP-S
International Symposium, Special Session on Wireless Antenna Systems &
Applications, July 1999, Orlando, FL.

Key techniques realizing smart antenna hardware
for microcell communication systems
Keizo Cho, Kentaro Nishimori, Yasushi Takatori, and Toshikazu Hori
Nippon Telegraph and Telephone Corporation
1-1 Hikarino-oka, Yokosuka, 239-0847 Japan
cho@ieee.org
Abstract
This paper summarizes key techniques in actualizing smart antenna hardware and  proposes a new
calibration technique as well as antenna and base station configurations. The effectiveness of the proposed
techniques are evaluated based on field tests employing a prototype of the smart antenna, which receives the
signals of  a Japanese commercial microcell system (PHS).
1. Introduction
Due to the recent popularity of multimedia and mobile communications, wireless
communication systems are required to push the limits towards higher data rates, greater reliability,
and greater channel capacity [1][2]. Smart antennas have shown great potential toward combating
co-channel interference [3] and increasing the channel capacity [4][5][6], as evidenced by the many
studies in this research area. Previous studies on smart antennas have been mainly focused on
algorithms for controlling antenna patterns [3][4][5][6][7]. Recently, some smart antenna testbeds
have been developed and measured results have been collected in actual propagation environments
[8][9]. However, there still exist problems that must be overcome to actualize the smart antenna
hardware for commercial wireless communication systems such as efficient calibration, element
arrangement, and effective base station configurations.
This paper first summarizes the design parameters for actualizing smart antenna hardware for
wireless communication systems. Then a new calibration technique, antenna arrangement, and
base station configuration are proposed that are suited to a base station adopting the smart antenna
technique for microcell communication systems. The effectiveness of the proposed techniques is
evaluated by measurements using a prototype of  the smart antenna and computer simulations.
2. Design parameters of smart antenna hardware
Figure 1 shows a typical configuration of the smart antenna hardware. The antenna comprises
a radiation part, transmitter and receiver part, and a digital signal processing part. Beam forming is
now usually carried out by digital signal processing due to the tremendous progress of the digital
signal processing devices and the flexibility of the beam control. The considered design parameters
of  the smart antenna hardware are listed below.

78
Radiation part
Element pattern
Inter-element spacing
Element arrangement
Number of elements
Transmitters and receiver parts
Characteristics of individual transmitter and receiver (Calibration)
Number of branches
Digital signal processing part
Beamforming algorithm
Synchronization
Calculation complexity
The radiation part should be designed by considering the propagation environment. Reducing the
number of elements or branches contributes to a decrease in the hardware complexity and cost.
Since propagation characteristics depend on the operating environment, an appropriate smart antenna
configuration should be based on the operating environment and systems. The individual
characteristics of the transmitter and receiver influence the error in tracking and nullifying
performance of the smart antennas. Moreover, the characteristics of  the transmitter in particular
change over time due to temperature variations [10]. Thus, the transmitter and receiver must be
frequently calibrated to equalize the characteristics. In the digital signal processing part, since the
minimum mean square error (MMSE) algorithm [11] is generally used for beam control, carrier
and timing synchronization are required before the beam control is initiated. However, establishing
synchronization is difficult when relatively strong interference is received at the antenna, for which

79
a smart antenna is generally required. To improve me synchronization performance, pre–beamforming
is generally adopted to improve the initial input signal-to-interference and noise ratio (SINR) 12].
Furthermore, an algorithm with fewer operations reduces the hardware complexity of the digital
signal processing devices and power consumption.
In the following section, some techniques are proposed for actualizing the smart antenna
hardware. First, antenna configurations are described that are suitable for base stations placed at
low and high locations on a street microcell. Next, an automatic calibration method using a
transmitting signal (ACT) is presented, which enables real-time calibration. Then, a new base
station configuration is described that is suited for elevated base stations in microcell systems and
the field test results of  the proposed configuration are presented for an actual microcell environment
Finally, an antenna arrangement is described that is suited to a smart antenna employing space–
divuion-multiple-access (SDMA) [13].
3. Techniques for actualizing smart antenna hardware
Commercial systems require a low cost and simple configuration while the performance
reducing the multipath waves depends on the number of elements and antenna configuration. A
configuration that is appropriate for an operating environment must be used, and hardware complexity
must be reduced. The number of elements can be determined by considering the propagation
environment.
Figure 2 shows measured angle of arrival (AOA) when a base station antenna was located at
low antenna height in a street microcell. Figures 2 (a) and 2 (b) represent the measurement scenario
and measured AOA, respectively. As can be seen in Fig. 2 (b), the long delayed waves that degrade
transmission performance propagate as shown in Fig 2 (a). In the environment, a broadside array is
placed perpendicular to the street, and approximately 2 wavelengths is selected as the element
spacing suitable for the antenna array of  the smart antenna. This configuration can discriminate the
3.1 Base station antenna arrangement for a street microcell

80
desired signal from the multipath waves with a small number of elements. Although the wide
element spacing produces a grating lobe in the radiation pattern, no ray with a long delay is received
by the grating lobe. Thus, the grating lobe does not degrade transmission performance. Figure 3
shows the bit error rate (BER) performance when using the smart antenna with a broadside array.
The cases in which the element spacing of  0.5 and 2 wavelengths are shown and the number of
elements is 3. The figure confirms improvement in the BER by the wide element spacing. Figure
4 shows the relationship between the element spacing and the input SNR improvement obtaining
the BER of         The improvement is based on the input SNR of  the antenna with a 0.5 wavelength
element spacing. As shown in Fig. 4, when the element spacing is more than 2 wavelengths, the
improvement is almost constant and about 4 to 5 dB. Since the antenna size becomes large as the
element spacing increases, the appropriate element spacing is about 2 wavelengths.
Figure 5 shows measured AOAs in the vertical plane when a base station was located on the
rooftop of a building in a street cell environment. Figure 5 (a) represents the measurement
environment, and Figs. 5 (b) and 5 (c) represent the measured AOAs when a terminal was located
at 50 m (Location A) and 300 m (Location B) from the base station antenna, respectively. As
shown in these figures, long delayed waves propagate when terminals are located near base stations.
The waves are reflected or diffracted by the surrounding buildings and arrive at the base station at
vertical angles between 0 (horizontal) to -10 degrees. When the terminals are located far from the
base stations, such long delayed waves does not reach the base stations. Therefore, controlling the
beam in the vertical plane can suppress long delayed waves without reducing the cell size. Figure
6 shows the effectiveness of  the proposed antenna configuration. Figure 6 (a) represents the delay
spread comparison when using an ordinary collinear antenna, a tilt beam antenna, and the proposed

81
smart antenna. Figure 6 (b) represents the relationship between the distance from the base station
and the propagation loss considering the antenna pattern. As Fig. 6(a) shows, the proposed antenna
obtains a similar degree of multipath reduction as the tilt beam antenna, while Fig. 6 (b) shows that
the proposed antenna enlarges the cell size 1.4 times greater than that of the tilt beam antenna.
3.2 Smart antenna calibration
Digital beamforming (DBF) configurations are generally used to form the smart antennas.
Thus, the difference in the characteristics of  the antenna, cables, and transceiver at each branch
varies the weights from those at the base band. Therefore, calibration to equalize the transmission
characteristics of all branches is required at the smart antenna. Figure 7 shows the proposed

82
configuration of ACT. The calibration method is suitable for a base station used in time-division-
and receiver, respectively. In this configuration, transmission signals are divided and circulated to
the receivers. Transmission characteristics 
and 
are obtained by the
loops shown in Figs. 7 (a) and 7 (b), respectively. By dividing 
 by
can be obtained, which is a calibration value required for the smart antenna of TDD
systems [14]. Since ACT uses transmission signals as a reference signal for the calibration, no
additional signal generator is needed for the calibration. In addition, since the receivers are idol
when transmitting signals in TDD systems, the calibration process can be performed without
interrupting services. Figure 8 shows the radiation pattern with and without using ACT. The
pattern was taken by using a prototype of a smart antenna in an anechoic chamber. The photograph
of the prototype is shown in Fig. 9. As Fig. 8 shows, ACT can direct the null toward the interference
and improve the desired signal to undesired signal ratio (DUR) to 30 dB greater than that without
duplex (TDD) systems.
and
represent the transmission characteristics of the i-th transmitter

83
calibration.
3.3  New  elevated  base  station configuration  for  a  microcell  system  using  TDD
In microcell systems, base stations are usually placed at a low height. In this case, however,
the cell formed by the base stations is mainly in the line-of-sight region along a street. Thus,
numerous base stations must be placed to cover large service areas. An elevated base station can
form a fairly large cell because propagation loss decreases when antennas are elevated. However,
since the propagation loss of interfering signals also decreases, co-channel interference becomes a
problem. It is well-known that smart antennas can effectively suppress such co-channel
interference[4][5]. On the other hand, base stations usually broadcast signals at a constant interval
to notify each terminal of the current cell, and the signals must be broadcast in a uniform direction.
However, smart antennas nullify the directions of  the interfering base stations, causing the base
station employing the smart antenna technique to lose its ability to cover the area of the null direction.
Furthermore, the null is automatically formed, making it a problem for cell planning. To overcome

84
this problem, we propose a new base station configuration for use in a TDMA system. Figure 10
shows the configuration of the proposed base station. This base station comprises two sets of
transceivers, and each works in a different time slot. The pattern of  both sets is controlled by a
common pattern control unit. The proposed base station first nullifies co-channel interference by
using a set of transceivers as shown in Fig. 11. Then, the other set of transceivers constrains its
beam direction to the null direction of the former transceiver and nullifies other co–channel
interference at different time slots from that nullified by the former transceiver. The latter transceiver
works at a different timing from the former one. Therefore, the proposed base station simultaneously
suppresses the interference and achieves a circular cell as shown in Fig. 11. Figure 12 shows the
effectiveness of increasing the channel capacity by the proposed base station measured in an actual
environment when applying it to a Japanese commercial microcell system (PHS). The prototype
shown in Fig. 9 was used for the measurement and the data was taken in Tokyo. As the figure
shows, the proposed base station obtains about 5 times the available time slots than that of an
ordinary base station (omnidirectional antenna). Figure 13 shows the measured radiation pattern of
the proposed base station configuration in the environment. We confirmed that the proposed
configuration achieves a circular cell while suppressing co-channel interference.
3.4 Antenna arrangement  for SDMA
SDMA is a promising candidate to improve channel capacity in future wireless communication
systems. Since the discrimination performance of the user in the spatial domain depends on the
array arrangement, an appropriate element arrangement for SDMA should be defined. We propose
an equation to determine an appropriate element spacing of a uniformly-spaced linear array (ULA)
for SDMA. The situation is illustrated in Fig. 14. The equation is based on the spatial coefficient
and is expressed below.
This is called ‘average squared spatial coefficent’ (ASSC) hereafter. The following define the
situation that satisfies the above equation.
The number of users is two.
The incoming waves are plane waves.
Perfect transmitting power control is assumed.
(This means the powers of  the incoming waves are identical.)
The direction of arrival of  the users is uniformly distributed.
Equation (1) represents the dependency of an ASSC on the element spacing of the linear array.
Figure 15 shows the dependency of the ASSC on the element spacing when the number of elements
is two or four. The dots in Fig. 15 represent the simulation results. The figure shows that the
simulation results of the ASSC agree with those calculated using Eq. (I). The minimum values
appear when the element spacing is 0.4 wavelengths and at intervals of  0.5 wavelengths. Figure 16

85
shows the relationship between Eq. (1) and the output SINR employing SDMA. The figure shows
that the element spacing giving the minimum ASSC obtains the maximum output SINR. Therefore,
we confirm that the element spacing of the linear array suited for a base station adopting SDMA can
be designed as the spacing giving the minimum value of Eq. (1).
4. Summary
This paper described the design parameters of smart antenna hardware for microcell
communication systems. As techniques for simplifying hardware and reducing cost to introduce
the smart antennas to commercial wireless systems, an efficient calibration method, as well as
antenna and base station configurations for microcellular communication systems were proposed.
The measured performance of the techniques using the smart antenna testbed confirmed the

86
effectiveness of the proposed techniques. Furthermore, an equation determining an antenna
arrangement of a uniformly-spaced linear array for a base station adopting SDMA was derived and
the effectiveness was evaluated by computer simulation.
Acknowledgment
The authors thank Dr. Hideki Mizuno of  Nippon Telegraph and Telephone Corporation (NTT)
for his constant encouragement.
References
[I] A. Iera, A. Molinaro, S. Marano, “Wireless broadband applications: The teleservice model and
adaptive QoS provisioning”, IEEE Commun. Mag., Oct. 1999 pp.71-75.
[2] G. V. Tsoulos, M. A. Beach, J. McGeehan, “Wireless personal communications for the 21st
century: European technological advances in adaptive antennas”, IEEE Commun. Mag., Sep. 1997,
pp. 102-109.
[3] J. H. Winters, “Optimum combining in digital mobile radio with cochannel interference”, IEEE
Trans. Veh. Technol., vol. 33, No.3, pp. 144-155..
[4] A. F. Naguib, A. Paulraj, T. Kailath, “Capacity improvement with base–station antenna arrays
in cellular CDMA”,IEEE Trans. Veh. Technol., vol. 43, No.3, pp. 691-698.
[5] T. Ohgane,”Spectral efficiency improvement by base station antenna pattern control for land
mobile cellular systems”,IEICE Trans. Commun., Vol. E77-B, No. 5, pp. 598-605.
[6] G. V. Tsoulos, M. A. Beach, S. C. Swales, “DS-CDMA capacity enhancement with adaptive
antennas”. Electron. Lett, Vol. 31. No. 16, pp. 1319-1320,1995.
[7] Y. Ogawa, Y. Nagashima, K. Itoh, “An adaptive antenna system for high-speed digital mobile
communications”,IEICE Trans. Commun., Vol. E75-B,No.5, pp.413-421.
[8] G. V. Tsoulos, J. McGeehan, M. A. Beach,“Space division multiple access(SDMA) field trials.
Part 1 : racking and BER performance”,IEE Proc. Radar, Sonar Navig., Vol. 145, No. 1, pp.73-78.
[9] S. Jeng, G. T. Okamoto, G. Xu, H. Lin, W. J. Vogel,“Experimental evaluation of smart antenna
system performance for wireless comunications”,IEEE Trans. Antennas Propagat., vol. AP-46, No.6,
pp.749-757.
[10] J. Litva, T. Lo, A Digital Beam Forming in Wireless Communication, Aretech House Publishers,
1996.
[11] S. Haykin, Adaptive Filter Theory Second Edition, Chapter 5, Prentice Hall, 1991.
[12] T. Tanaka, R. Miura, I. Chiba, Y. Karasawa,“An ASIC implementation scheme to realize a
beam space CMA adaptive array antenna”,IEICE Trans. Commun., Vol. E78-B, No. 11, pp. 1467-
1474.
[13] R. H. Roy, “Spatial division multiple access technology and its application to wireless
communication systems”, IEEE 47th Veh. Technol. Conf., vol. 2, pp. 730-734,1997.
[14] K. Nishimori, K. Cho, Y. Takatori, T. Hori, “A new calibration method of adaptive array for

87
TDD systems”, 1999 IEEE AP-S Dig., Orlando, FL, July 1999, pp.1444-1447, 1999.

This page intentionally left blank

Downlink Capacity Enhancement in GSM System Using
Multiple Beam Smart Antenna and SWR Implementation
Wei Wang, Mohamed Ahmed, Samy Mahmoud and Roshdy H.M. Hafez
Dept. of Systems and Computer Engineering
Carleton University
1125 Colonel By Dr.,
Ottawa, ON K1S 5B6, Canada
Ph: (613) 520-5653 Fax: (613) 520-5758
{mhahmed,wwei, mahmoud, hafez@sce.carleton.ca}
Abstract-Third-generation (3G) wireless systems need strategies to further improve performance,
increase data rates and at the same time provide flexible and affordable support for multi-services and
multi-standards. Software radio technology is promising to provide the required flexibility in radio fre-
quency (RF), intermediate frequency (IF) and baseband signal processing stages. Smart antenna can
greatly improve system performance, enhance system capacity by making use of spatial processing,
exploiting the spatial directivity and reducing co-channel interference. This paper addresses the down-
link capacity gain of the multiple beam smart antennas in GSM link Frequency Hopping (FH)-TDMA
system. The system capacity is studied. Analytical results are compared with the sectorization-only appli-
cation. Perfect power control and discontinuous transmission (using voice activity) are taken into consid-
eration in the analysis. One possible software radio architecture for a base station with smart antenna is
proposed. In this architecture, smart antenna algorithms might be dynamically reconfigured according to
different environment requirements and the baseband processing might also be dynamically reconfigured
according to different standard requirements. In this way, the need for flexibility is satisfied.
Index Terms- Software radio (SWR), capacity analysis, frequency Hopping, cellular system, and smart antennas

90
I. Introduction
Recent research interests in the field of personal mobile radio communications have been moving to the next
generation cellular system to meet the following two main growing demands: (i) higher capacity, quality and vari-
able transmission speed of multimedia information, (ii) higher flexibility support for multi-services and multi-stan-
dards. Smart antenna and software radio technology are the key solutions to satisfy these demands. Smart antenna
can greatly enhance system capacity by reducing co-channel interference, exploiting the spatial directivity of the
antenna and making use of spatial processing. Software radio may provide the required flexibility in radio fre-
quency (RF), intermediate frequency (IF) and baseband signal processing stages of the system.
A great deal of attention has been given to the performance analysis of smart antennas and software radio respec-
tively.([3]-[6], [12]-[15]). Few of the previous works discuss about the architecture synergies between the two tech-
niques. Moreover, most of the studies on smart antennas reported in the literature is mainly based on computer
simulation rather than analytical methods. which may need simplifications and/or approximations. However ana-
lytical methods are also important since they need much less computational time and processing loading compared
to the simulation techniques, in addition to their importance for the validation and verification of the simulation
methods. This make it interesting to study the performance of smart antenna in an analytical way and in the same
time study the synergies of the combination of the two technique.
Slow Frequency Hopping (SFH) is widely used in TDMA (especially in GSM) wireless networks because of its
advantages namely the interference averaging and the frequency diversity. Since SFH-TDMA systems have soft
capacity, a potential capacity enhancement can be achieved using an interference reductions techniques such as
Power Control (PC), DTX (Discontinuous Transmission), and smart antennas.In this paper we present the down-
link capacity enhancement of multiple beam smart antenna in GSM-like SFH-TDMA cellular system.
The paper is organized as follows: Section II presents the stochastic analysis of the estimation of the outage prob-
ability and the system capacity based on the system model. section III. In section IV, the analytical results using a
numerical example are presented and compared with simulation results in our previous work [l]-[2]. One possible
software radio architecture for the base station with smart antenna is proposed in section IV. Finally the conclu-
sions and future work are given in Section V.
II. Multiple Beam Smart Antenna Performance Analysis
In this section, analysis is based on the Cumulative Density Function (CDF) of the Carrier-to-Interference ratio
(CIR) in the down link at different loading factor. The maximum loading factor that keeps the outage probability
under a certain threshold value (e.g. 2%) is determined and used to estimate the maximum system capacity.
i) System and Propagation Model:
The propagation model used is given in (1):

91
where 
is the transmitted power, d is the distance between the BS and MS, 
 is a normal random variable corre-
sponding to the shadowing, F is the fading parameter, and 
 is the directive gain of the smart antenna. The effect
of the fading is assumed to be neglected due to slow frequency hopping and other techniques such as equalization
and interleaving etc. are employed.
A very tight frequency plan (1/3) is used for FH carriers. This tight frequency plan can be used without degrad-
ing the QoS provided that SFH and partial loading are employed. non-FH (BCCH) carriers are allocated using (4/
12). The carrier hopping is done using the GSM frequency hopping algorithm for the non BCCH channels only
Multiple beams smart antennas[9]-[11] with M-beam are used to cover the whole cell. The MS is connected to
the BS through beam which provides it with the best quality in terms of the received power or the Carrier to Inter-
ference Ratio (CIR). Switching from one beam to another is needed when the MS crosses the boundary between
two beams. Since it does not need neither complex hardware nor sophisticated weight computation algorithms as in
other techniques it is considered as the simplest one. We adopt multiple beams smart antennas because of its sim-
plicity and effectiveness with frequency hopping techniques.
ii) Theoretical Analysis
In order to estimate the system the capacity, the maximum loading (utilization) factor (Erlang/channel) is first
determined. Fig. 1 illustrates the downlink interference to a MS in sector 1 in cell 0 from the 11 cochannel interfer-
ing cells. The interference from the six first tier BSs (in cells 1-6) and five second tier BSs (in cells (7-11) is taken
into consideration. BSs facing sector 1 (with solid line cell plot) are introducing higher interference than other BSs
(with dashed line cell plot) since the former introduce interference from the main lobe while the latter introduce
interference from the side lobe.
1) Multiple beams antenna with no power control:
The interference power at the MS in cell 0 from the jth cell 
is determined from (1) and using Fig. 2 that
describes the problem geometry thus 
is expressed as
where
j is the cochannel interferes index (j=1,2,....
Aj is a Bernoulli random variable representing the activity of the jth interference mobile station. Aj=l with
probability q that is equal to the product of the loading factor (LF) with the discontinuous transmission fac-
tor (DTXF); 1j is the distance between the desired MS and the jth interferer BS;

92
is the shadowing parameter of the jth interferer;
is the antenna gain as a function of the interferer angle 
and beam angle 
,defined as
Because of the interference averaging property of the frequency hopping, we are interested in the mean value of
interference power rather than the instantaneous value. The mean value of the interference power from the jth cell
is expressed as:
Where 
is the PMF of the beam angle. It equals to 
if users are uniformly distributed,
are the possible values of 
. E[] is the mean value of the random variable. Thus it is straightforward to show that
is equal to 
where 
Rewriting

93
As shown in Figure 2, 
and 
are functions of 
and 
therefore the total interference 
is:
where 
is the distance between the MS and the desired BS and 
is the angle of the MS at the beam with cen-
tral angle 
The received carrier power at the MS in cell 0 from its BS is:
The outage probability (Pout) is defined as:
where C is the carrier power. By substituting for C from (6) the outage probability is expressed as:
Using the total probability law the outage probability is given by:
where:
Since 
is normally distributed it is straightforward to show that:
where:

94
Therefore the outage probability is given by:
The outage probability is determined from (10) by solving the double integration numerically at different loading
values to find the maximum loading factor and then the system capacity as presented in the next section.
2) Multiple beams antenna with perfect power control
With perfect power control, each mobile in the jth interfering cell receives a constant power (S) from its BS irre-
spective of its location. To keep the received power at each MS constant, the transmitted power at BS varies
according to each MS location within its cell accordingly the transmitted power is function of 
and 
(see figure
2) so that it is expressed as:
where 
is the shadowing factor of the downlink path;
In the similar analysis way, the final outage probability is given by [2]:
By computing the above integrals and summation numerically, we can solve for the maximum loading factor that
satisfies the outage probability condition. By determining the maximum loading factor (LFmax) the system capac-
ity defined as the number of users per unit area can be evaluated by
where 
is number of channels per cell, 
is the average traffic in Erlangs per user, and 
 is cell area.
III. Analytical Results
In this section a numerical example is used to apply the analysis presented above. Results are compared with the
simulation result of previous work [2]. The following parameters are used in the analysis and simulation: Cell

95
radius (R) = 2 km, Number of sectors per cell (s) = 3, Number of beams per sector 
 Discontinues Trans-
mission Factor (DTXF) = 0.5, Traffic per user in Erlang
Table (1) lists the outage probability for the different cases mentioned above and at loading values 10-60%. It is
apparent that the outage probability is highly reduced by using multiple beam antennas especially when it is com-
bined with power control, e.g. with MB Pout is reduced from 1.2x10-1 to 6.7x10-2 without PC and to 2.0x10-2
with PC. Table (2) lists the maximum loading factor at different maximum outage probability requirements
(pmax),e.g. when pmax=2% the maximum loading factor (with no PC) is increased from 7% to 20% (which is
almost three folds) by using MB without PC and by employing PC without MB it can be increased the maximum
loading factor to 18% which is more than 2.5 times the original loading factor. By combining both techniques the
maximum loading factor is jumped to 60% which is more than 8 folds gain. This high gain is achieved due to the
multiplicative effect of both technique MB and PC. However the capacity gain might be less than in reality because
of the difficulty to have such perfect power control. The gain due to PC is inversely proportional to the loading fac-
tor and it is shown that it can degrade the performance especially without MB, e.g. the maximum loading is
reduced.from 40% to 26% by using PC since the assumed perfect power control degrades the CIR
at high loading values.
The outage probability is evaluated by simulation and analytically using (11) and (12) at different loading values.
The CDF(CIR) with Multiple Beams (MB) or sectorization only (SC) with and without Power Control (PC) at

96
20%, 40% and 60% loading factor are given in [2].
Fig.3 show that significant enhancement in the performance can be achieved by employing multiple beam anten-
nas and power control. it can be shown that the outage probability can be reduced by 40-65% without PC while the
reduction is more than 95% with PC particularly at low and medium loading factor.

97
VI. Software radio architecture with smart antennas
One base station architecture with smart antenna is proposed here and served as a good example to illustrate the
great flexibility of software radio.
Here, we assume each channel can be shared by K users. K beams are formed, one for each user. Thus, for a sys-
tem with L physical channels, KL users can be supported. Figure 4 shows the function block diagram of the soft-
ware radio base station with smart antennas. Each antenna element has its own down converter and ADC. K similar
blocks are needed for the subsequent beamforming and demodulation, which implemented in software.
The beam formers for each channel is illustrated in Figure 5. The digital downconverter includes the function of
frequency translation and filtering.The received IF signals from each antenna element are translated to a complex
baseband signal by the quadrature multiplier. The digitally controlled oscillator (DCO) block generates the quadra-
ture signals for the multipliers. Then the complex baseband signal is low-passed filtered. Finally these signals are
adjusted by the weights generated by the smart antenna algorithms in beam former, and combined in the “com-
biner” block. The output of the demodulator would be the received signal from the desired user.
The smart antenna algorithm chosen to adjust the weights is depended on the environment. For GSM system, in
macrocell with low traffic, more noise than cochannel interference (CCI), high user mobility and low angular

98
spread. The preferred Algorithm, such as Direction of arrival based beam former (DOB), whose performance
depends on the ration of angular spread with the number of antenna elements M. For the microcell with high traffic,
high CCI, low user mobility, high angular spread and low delay spread, time reference based beamforming is suit-
able. The software implementation of the beam former provides the reconfiguration flexibility for the algorithms
chosen according to the environment requirement.
The a baseband processing functions are implemented on a common platform using a parameterized implementa-
tion method, which enables the air interface to be changed fast by only exchanging a set of parameters for the
reconfiguration, rather than download the whole software of a system. Figure 5 illustrate such a common baseband
processing platform for GSM and IS-54/136 TDMA systems. In both of the system, lot of functions like channel
coding, modulation and equalization, are used in a similar way and can be approximately implemented using the
same blocks with different parameters. This makes it possible for a parameterized software implementation. Share
one common transceiver architecture.
The proposed architecture provides the flexibility for smart antenna algorithms to be reconfigured according to
different environment requirements and for baseband processing functions to be reconfigured according to differ-
ent standards requirements.
V. Conclusions
Smart antennas are investigated and shown to be a powerful tool for increasing wireless network capacity of FH-
TDMA cellular systems. A multiple beam antenna combined with power control can dramatically enhance the sys-
tem capacity particularly at low and medium loading values. This may serve as an upper bound which can be
approached in reality as technology for perfect power control is improving.
One software radio base station architecture with smart antenna is proposed and serves as a good example to
illustrate the great flexibility provided by the software radio solution. In this architecture, the smart antenna algo-
rithms can be dynamically reconfigured according to different environment requirements and the baseband pro-
cessing can also be dynamically reconfigured according to different standards requirements.
As an extension of this work, SDMA where each channel can be reused in every beam will be addressed for FH-
TDMA. In addition, many detailed design issues related to software radio architecture are still open. These issues
include: the evolution of software radio architecture, the feasibility and efficiency evaluation of the integration
with smart antenna algorithms and the method to better evaluate the processing capacity of the whole architecture.

99
References
l-Mohamed Ahmed and Samy Mahmoud, "Capacity Analysis of GSM Systems using Frequency Hopping and Smart Anten-
nas," To be Published in IEEE VTC2000, Tokyo,Japan, May2000.
2.-Mohamed Ahmed, Wei Wang, and Samy Mahmoud, "Downlink Capacity Enhancement in GSM Systems with Frequency
Hopping and Multiple Beam Smart Antennas," To be Published in ICC2000.
3-T. Chebaro, “Capacity evaluation of a frequency hopped TDMA cellular radio system,” Annaels des Telecommunications,
vol. 51,Mar.-Apr. 1996
4-J. Johansen and B. Vejlgaard, “Capacity analysis of a frequency hopping GSM system,” Master thesis, Alborg University
1995.
5-G Tunnicliffe, A. Sathyendran and A. Murch, “Performance improvement in GSM networks due to slow frequency hop-
ping,” IEEE VTC 1997.
6-C.-C. Lee and R. Steele, “Signal-to-interference calculations for modern TDMA cellular communication systems,” IEE Pro-
ceedings-Communications, Vol. 142, No. 1 , Feb. 1995.
7-S. Channakeshu, A. Hassan, J. Anderson and B. Gudmundson. “Capacity analysis of a TDMA-based slow-frequency-
hopped cellular system,” IEEE Trans. on Vehicular Technology, Vol. 45, No. 3, Aug. 1996.
8-J. Dornstetter and D. Verhulst, “Cellular efficiency with slow frequency hopping: Analysis of the digital SFH900 mobile
system,” IEEE JSAC, Vol. 5, No. 5, June 1987.
9-L. Godara, “Applications of antenna arrays to mobile communications, Part I: Performance improvement, feasibility, and
system considerations,” Proc. of the IEEE, Vol. 85, No. 7, July 1997.
10-J. Winters, “Smart antennas for wireless systems,” IEEE Personal Communications, Feb. 1998.
11-M. Wells, “Increasing the capacity of GSM cellular radio using adaptive antennas,” IEEE Proceedings-Communications,
Vol. 143, No. 5, Oct. 1996
12-J. Mitola III, "Software Radio Architecture and Technology," Proc. 1998 Int'l. Symp. Adv. Radio Tech., Boulder, CO, Sept.
1998.
13-F. Riera-Palou, C. Chaikalis, J.M. Noras, "Reconfigurable mobile terminal requirements for third generation applications
", UMTS Terminals and Software Radio (Ref. No. 1999/055), IEE Colloquium, pp: 9/1 -9/6, 1999.
14-A.Wiesler, H. Schober, R. Machauer, F. Jondral, "Software radio structure for umts and second generation mobile com-
munication systems ", Vehicular Technology Conference, 1999. VTC 1999 - Fall. IEEE VTS 50th, Vol. 2, pp: 939 -942, 1999.
15-J. Kennedy, M.C. Sullivan, "Direction finding and smart antennas using software radio architectures" IEEE Communica-
tions Magazine, Vol. 33 5, pp: 62 -68. May 1995.
16-R. Kohno, " Software antenna and its communication theory for mobile radio communications ", Personal Wireless Com-
munications, 1997 IEEE International Conference, pp: 227 -233, 1997.
17-T. Turletti, D. Tennenhouse, "Complexity of a software GSM base station ", IEEE Communications Magazine, Vol. 37 2,
pp: 113-117, Feb. 1999.

This page intentionally left blank

Generalized Equations for Spatial Correlation for Low to
Moderate Angle Spread
R. Michael Buehrer
Bell Laboratories - Lucent Technologies
67 Whippany Rd. Room 3A-220
Whippany, NJ 07981
mbuehrer@bell-labs.com
Abstract In this paper we derive generalized formulas for three types of angular energy dis-
tributions: a Gaussian angle distribution, the angular energy distribution arising from a Gaussian
spatial distribution, and a uniform angular distribution. These generalized equations are param-
eterized by 
where d is the distance between antennas and 
is the standard deviation of the
angular energy distribution and approximate the true correlation with the approximation being
very good for angle spreads below approximately 25°.
1 
Introduction
Previous work on antenna correlation has relied on numerical integration or infinite series to evaluate
the spatial correlation between two points using the angular energy distribution [1, 2]. As a result,
separate curves must be generated for each distribution parameter of interest (e.g., each variance of
a Gaussian distribution). However, it was recently suggested by Chizhik and Gans [3] that when the
energy arriving at a linear array has a distribution in angle which is Gaussian, the spatial correlation
function can be parameterized by 
where d is the distance, 
is the carrier wavelength, and
is the standard deviation of the angular distribution. In other words, we can create a generalized
spatial correlation curve which would be useful for practical values of 
In this paper we show
that indeed for low values of 
we can derive a generalized equation which approximates
the spatial correlation for any central angle-of-arrival for a Gaussian angular energy distribution,
a uniform angular energy distribution, and a Gaussian spatial distribution.
2 Spatial Correlation
Consider a plane wave signal arriving at an array from angle with respect to the normal bisecting
two points of interest separated by d meters. The signals seen at the two points can be represented
as s1(t) = m(t) and 
If the power of the message signal m(t) is unity,
then 
Thus, if a signal of interest arriving at an array can be described
by the summation of plane waves arriving from angles with distribution 
then we know that
the spatial correlation between two points a distance d apart can be determined as [4]
where 
is defined relative to the normal.
First, let us assume a Gaussian distribution for angular energy which is common for spatial
channel modeling. Thus, the angular distribution function can be represented as

102
where 
is the standard deviation of the distribution in radians assumed to be small enough that
there is not significant energy beyond 
and 
is the central angle of arrival in radians. It is
shown in Appendix A that in the case of             defined by (2) the correlation can be approximated
by
where we now see that we can parameterize the spatial correlation by
In Figure 1 (a) we plot the spatial correlation versus 
using the integral in (1) as well (3) for
and several values of 
We can see that for 
up to 20°, (3) is a very good fit. Figure 1 (b)
presents the same results for 
As 
increases the fit is not as good for moderate values of
Figure 5 (a) plots (3) for four values of 
Using this single plot, we can determine the correlation
for almost any scenario, provided that the angular spread is Gaussian with a standard deviation
less than about 20° - 25°.
3 Antenna Separation
Using the above equation (3), we can easily show that the required distance to ensure a correlation
can be approximated by
The above equation is plotted for 
for four values of 
 in Figure (2). From this plot we see
that the classic rule-of-thumb of 
spacing holds for 
It can be shown that for
where sigma is in degrees provides a good approximation for required antenna separation
to achieve correlation values below 0.5.

103
4 Gaussian Spatial Distribution
A second model for a spatial channel which is commonly used is a Gaussian spatial distribution.
A Gaussian spatial distribution models the scatterers surrounding the mobile using a bi-variate
Gaussian distribution in space [5]. In other words, the scatterers have position [x, y] with probability
where     is the standard deviation in both the x and y directions and  
  is the center of
the distribution. We wish to find the distribution of the angle-of-arrival, i.e.,the angular energy
distribution in order to determine the spatial correlation. To do so we make the substitutions
and               into (5). Making this substitution and integrating
over r results in
Further if we define 
and 
we can show that
Thus for small values of 
this is nearly identical to a Gaussian distribution and thus we can
use a Gaussian distribution to model the angular energy distribution. Figure 3 (a) plots (6) with
and 
as well as a Gaussian angular energy distribution with 
and

104
(0.07 radians). Thus, we can see that we can approximate the angular energy distribution
for a Gaussian spatial distribution with a Gaussian angular energy distribution and thus use (3) to
approximate the correlation. To make the translation we can use the plot in Figure 3 (b) to convert
the spatial parameters to a standard deviation to use in (1). For example, if we assume a a Gaussian
spatial distribution of scatterers with 
and 
we find that
Using Figure 3 (b), we find that this corresponds to a standard deviation of approximately
Alternatively, we can see from (7) that for large 
and small 
we can approximate (7)
using a Gaussian with 
This corresponds to the linear region of Figure 3 (b). Thus, we can
use 
in equation (3) to approximate spatial correlation.
5 
Uniform Distribution
Another common assumption for angular energy distribution is a uniform distribution [2]. A
uniform distribution of angular energy is defined as
where 
is the range of angles about a central angle-of-arrival 
It is shown in Appendix B that
the spatial correlation in this case can be approximated by
In Figure 4 the spatial correlation is plotted using a numerical integration of (1) along with the
approximation in (9) for 
and 
Again, for low to moderate values of 
we find that
(9) is a very good approximation. Again, the approximation is less accurate for larger values of

105
If we substitute 
(the standard deviation of a uniform distribution) we can compare the
Gaussian and uniform distributions for several values of as shown in Figure 5 (a). As expected, the
Gaussian distribution decreases more slowly in the main lobe, but lacks the secondary correlation
peaks. Otherwise the approximate correlation functions are similar. Additionally, it can be shown
that as gets large, the Gaussian function approaches a uniform distribution due to a 
ambiguity
and the correlation function will develop secondary peaks.
As a final note, we compare the results presented here with results given in [6]. In [6] a
generalized correlation function was derived for general angular energy distributions. Specifically,
it is shown that
where 
is a measure of angular spread defined as
and 
is the nth complex Fourier coefficient
Using these definitions we can show that the correlation function for a Gaussian distribution can
be approximated as
In fact if the approximation 
then we arrive at

106
which is very nearly our approximation when we realize that 
Figure 5 plots this
approximation of the correlation function versus 
along with (3) and (9). As can be seen,
there is very good agreement down to correlation values of 0.5. The approximation of [6] is slightly
optimistic for a Gaussian distribution and would be more so for values of 
This makes sense
since 
is not directly involved in (13).
6 Conclusions
In this paper we have derived generalized (i.e.,for multiple values of ) correlation functions for
three distributions of angular energy. The generalized equations allow the correlation to be found
for any practical standard deviation and distance. We have shown that the approximations are
good for standard deviations of about 25° or less.
Acknowledgments
The authors would like to thank our colleagues at Lucent - Bell Laboratories including Dirck
Uptegrove, Jay Tsai, Dmitry Chizhik and Mike Gans.
References
[1] W.C.Y. Lee. Effects of correlation between two mobile radio base-station antennas. IEEE
Transactions on Communications, COM-21(11):1214–1223, November 1973.
[2] J. Salz and J.H. Winters. Effect of fading correlation on adaptive arrays in digital communi-
cations. In Proceedings of the International Conference on Communications, pages 1768–1774,
May 1993.

107
[3] D. Chizhik and M.J. Gans. Angular spread, antenna separation and correlation. Technical
report, Lucent Technologies - Bell Laboratories.
[4] W.C. Jakes. Microwave Mobile Communications. Wiley-Interscience, 1974.
[5] R. Ertel, P. Cardieri, K.W. Sowerby, T.S. Rappaport, and J.H. Reed. Evolution and applica-
bility of spatial channel models for wireless communications. IEEE Personal Communications
Magazine, 5(1): 10–22, February 1998.
[6] G.D. Durgin and T.S. Rappaport. Effects of multipath angular spread on the spatial cross-
correlation of received voltage envelopes. In Proceedings of IEEE Vehicular Technology Confer-
ence, pages 996–1000, 1999.
[7] I.S. Gradshteyn and I.M. Ryzhik. Table of Integrals, Series, and Products. Academic Press,
second edition, 1980.
Appendix A: Derivation of Generalized Equation for Gaussian
Distribution
First, let us assume a Gaussian distribution for angular energy such that the angular distribution
function can be represented as
where 
is the standard deviation of the distribution in radians and 
is the central angle of arrival
in radians.
Then we know that the spatial correlation can be determined as [4]
Now, substituting (2) into (16) and making a change of variables we get
Now, assuming that 
is small over the range where 
is significant, we can approximate
the above with
Evaluating the integral [7] then gives

108
Appendix B: Derivation of Generalized Equation for Uniform
Distribution
In this appendix we wish to show that the spatial correlation function for a uniform angular
energy distribution can be approximated according to (9). First we assume that the angular
energy is distributed according to
Now for small 
we can approximate 
 and 
which gives
Evaluating the integral [7] then gives
Q.E.D

Exploitation of Internode MIMO Channel Diversity in
Spatially Distributed Multipoint Communication Networks
Brian G. Agee, Ph.D., P.E.
1596 Wawona Drive, San Jose, CA 95125
Telephone: 408.269.3218, E-mail: bgagee@pacbell.uet
Abstract
The multiple-input, multiple-output (MIMO) channel exploitation concept, advanced to date for ro-
bust and efficient diversity communication in point-to-point links, it extended here to spatially-distributed
multipoint networks. The approach exploits the inherent MIMO diversity of multipoint networks to allow
data transport at high efficiency and low aggregate network complexity relative to point-to-point links,
without the need for opportunistic multipath between nodes in the network. A general mathematical
framework for the networks it presented, and developed in depth for small networks where all nodes are
visible to each other. Network capacity is then analyzed for a ring and star network, and it it shown that
the approach can provide significant (factors of 3-to-6) improvements in network and node capacity over
equal-cost point-to-point links. Results are germane to commercial applications in wireless LANs, picocell
networks, and wireless Internet appliances, and to military applications in secure internode systems.
1 Introduction
Distributed networks possess compelling attributes for both commercial and military applications. In the
commercial arena, the emergence of the Internet (itself a highly distributed network) as the first new
mass medium since television, combined with the ongoing convergence of communication and computer
applications and services, has fueled development of a wide range of products to deliver broadband data
services over the “last mile” (via wired or wireless media) to businesses and residences. At the same
time, the explosive demand for mobile and portable data services, and the emerging market for wireless
appliances, has fueled the development of low cost (and so far low capacity) wireless devices to both
connect “conventional” untethered platforms (handsets, laptops, and PDAs) to themselves and the wired
infrastructure, and to supervise, monitor, and control distributed networks of embedded processors in
emerging “smart appliance” products. In all of these applications, distributed networks can provide strong
advantages over conventional systems, by exploiting the inherent advantages of connectionless data service,
or by reducing the power required to communicate to laptops and PDAs at data rates competitive with
tethered devices.
Distributed networks also provide multiple advantages in military applications, including collection,
analysis, and collation/dissemination of reconnaissance data from beyond the front-line of troops (PLOT);
intruder detection and location behind the FLOT; and distributed communication of command, control,
and voice/video data between the FLOT and rear echelons. By allowing data transfer through nearby
nodes and over “flat” network topologies, distributed networks can reduce an adversaries’ ability to identify,
target, or even detect high priority nodes in the network, greatly enhancing their security and survivability
relative to conventional point-to-multipoint networks.
This paper describes means for further extending the capabilities and applications of distributed net-
works, by exploiting the multiple-input, multiple-output (MIMO) channel structure of the network. MIMO
channel exploitation has recently been advanced as a means for enhancing performance of point-to-point
communication links, by exploiting opportunistic spatial, spectral, or polarization diversity (significant
propagation paths) present in those links [2, 3]. Advantages of these systems include near-optimal capacity

110
relative to nondiverse links; robust operation in severe multipath environments, and robust, high-capacity
backhaul over non-LOS transmission paths.
However, these approaches have demonstrated limitations in practice, due primarily to the high marginal
cost of exploiting lesser modes of the MIMO channel response matrix. In particular, the approaches de-
scribed in [2, 3] require an additional antenna at each of the link to exploit each diversity path, implying
a linear growth in cost for each path exploited by the network. However, the capacity added by that
additional transceiver pair adds “piecewise linearly” as a function of transceiver power, i.e., the diversity
path can only be exploited at power levels high enough to overcome the higher pathless on that path. In
many practical systems, this pathloss is much higher than the loss on the dominant path(s), e.g., 20-to-
30 dB, in fixed outdoor communication systems. Exploitation of this multipath requires both high power
(to permit data transport over the weak path) and complex codecs (to permit data transport at high
information rates on the dominant path). Moreover, the existence and strength of these diversity paths
can vary widely as a function of time and/or node location, greatly complicating the design of networks
employing this technology.
Spatially distributed networks overcome this limitation, by exploiting the inherent diversity between
internode channel responses in the network. This diversity exists regardless of multipath present on any
individual path in the network, i.e., it does not require high levels of opprotunistic multipath to be ex-
ploitable-by the system. Moreover, this diversity can be designed into the network by careful choice of
network topologies during the deployment process, in order to provide truly linear growth in capacity as
transceivers are added to the network. As a side benefit, the network can also spatially excise transmissions
from compromised nodes and external emitters, allowing secure, high quality service in environments with
uncontrollable interference, e.g., Part 15 bands.
This paper provides a mathematical framework for exploiting MIMO diversity in distributed networks,
and analyses the network and link (node) capacity achievable for a ring and star topology. Section 2
reviews capacity attainable in point-to-point MIMO links, and establishes background for the extension
to multinode networks. Section 3 establishes a structurally constrained model for multinode networks,
and computes capacity for small networks where all of the nodes are visible to each other. Section 4
analyzes capacity of a four-node ring, five-star node, and two-node point-to-point link operating in the
same geographical area. It is shown that the network can double or triple the throughput of the equivalent
point-to-point link, at equivalent cost to deploy the links.
2 Background: Point to Point MIMO Links
The MIMO network model is motivated by MIMO model developed for spatially-diverse point-to-point
links. An example link is illustrated in Figure 1, showing generation and transmission of spatially-diverse
signal 
from node 1 to node 2 over 
propagation paths (e.g., a direct path and 2 reflection paths
in Figure 1). Assuming the nodes employ 
and 
spatially separated antennas, respectively, and the
inverse bandwidth of 
is much wider than the delay between antennas at each end of the link, the
uplink receive signal 
can be modelled by
where 
is the interference received at node 2, 
and 
are the 
and
transmit and receive spatial signature vectors for each propagation path, respectively, and
and 
are the pathloss and group delay over each propagation path. Equation (1) is expressed
more compactly (2), by defining group delay 
and subsuming the remaining channel response into

MIMO channel operator 
with frequency response
where 
and 
are 
and 
transmit and
receive signature matrices comprising the spatial signature vectors for each propagation path, respectively,
and 
If 
is an OFDM waveform with cyclic prefix greater than max
then the received signal can be expressed as OFDM tones and symbols,
where 
and 
are the transmit and receive data symbols, k is the OFDM tone index denoting
data transmitted at frequency 
and i is the OFDM symbol index denoting data transmitted within
time interval 
and where 
and 
are the OFDM symbol length (FFT
duration) and cyclic buffer length, respectively. If the group delays are also small relative to the Inverse
signal bandwidth and the interference is complex-Gaussian and temporally white over the signal passband,
then 
where 
is the center of the signal passband, and 
can be modelled
as an complex random process with covariance 
and mean 
 This assumption will
be used throughout this paper.
The capacity of the MIMO point-to-point link for-power constrained systems is given by [1, 2, 3]
for this channel, where 
is the modulation efficiency of the communication link, 
 are the num-
ber of information bearing tones in the uplink basspand, and 
are the nonzero eigenvalues
and 
is the fraction of power allocated to mode m of 
and where
and 
is the average power used at each transceiver. Optimizing
111

112
over feasibility region 
yields the “waterfilling” solution,
where 
satisfies 
In the absence of multipath, 
reduces to
a rank-1 matrix with nonzero mode 
and 
reduces to
where (10) results if 
is spatially white background noise 
and isotropic elements are
used at both ends of the link 
and
The modulation efficiency 
accounts for real-world inefficiencies in the airlink modulation format,
including filter shape factors, window inefficiencies, data retransmission events, interlink guard-times (in
TDD systems), cyclic prefixes, and security measures in military communication systems. A more useful
(I.e., achievable) capacity bound can also be developed by deflating 
by an SNR gap term in (5)
to account for inefficiency in the codec. A modulation efficiency of 
will be assumed here,
where 
is the duty cycle of the communications uplink.
The capacity can be approached in principle using the linear transceiver structure shown in Figure 2,
shown here for a duplex communication link. On the transmit path (node 1), the user encodes the transmit
data into a stream of 
complex symbol vectors 
and multiplies the symbol vectors by an
diversity transmit gain matrix 
to form 
output tone sequence
This signal is then passed to a vector airlink modulator and transmitted to the other end of the link.
On the receive path (node 2), the 
dimensional receive signal is demodulated and passed through an
diversity receive combiner matrix 
 to form estimated symbol vector
The symbol vector is then multiplied by a phase ramp to remove tuning error, and passed onto a vector
decoder to recover the transmitted bit stream. The optimum transmit and receive matrices used on the
uplink are given by
where 
is the inverse Cholesky factor of 
and where 
and 
are the right-side and
left-side eigenmodes of normalized MIMO channel transfer matrix
and where 
The data received from each combiner port is then given by
i.e., the combined processor and channel decomposes into 
independent channels, each of which trans-
ports a symbol stream with signal-to-interference-and-noise ratio (SINR) 
The encoder
distributes bits to each channel in accordance with SINR achieved on that channel.

113
As shown in [2, 3], the capacity of this link can be dramatically increased as additional transceivers are
added to the system, if the propagation modes exploited by these transceivers are strong relative to the
dominant mode. Conversely, this increase is small if the new modes are much weaker than the dominant
mode. Moreover, these modes can be unpredictable or time-varying, raising additional planning issues in
large network deployments. As a consequence, the cost required to achieve this gain (driven largely by the
number of RF transceiver chains in the network) is only justified where this high SNR can be achieved, e.g.,
indoor or dual polarized communication systems. These issues motivate extension of the MIMO concept
to networks of nodes.
3 Extension to Multipoint Networks
The mathematical structure provided in Section 2 can be extended to distributed networks, where
downlink nodes are attempting to communicate with 
uplink nodes. Example networks are shown in
Figure 3, depicting a ring network (Figure 3a) where four uplink and downlink nodes are connected in
a closed ring topology such that 
and a star network (Figure 3b) where a central node is
communicating with four outlying nodes such that 
In this analysis, it is assumed that
each node possesses a spatially diverse antenna array, allowing it to simultaneously communicate with every
node in its field of view. However, it is also assumed that nodes in each set cannot communicate directly
with themselves, i.e., independent information is transmitted from each node in set 1, and is independently
processed by each node in set 2.
3.1 Environment Model
Using notation developed in Section 2, node n2 receive signal 
 can be modelled by
where 
and 
are the group delays and 
MIMO transfer functions
between transmit and receive nodes 
and 
respectively, 
is the 
data set trans-

114
mitted from downlink node 
and 
is the 
interference vector received at node
and where 
and 
are the number of transceivers (antenna elements) employed at nodes
and 
 respectively. Equation (16) can be expressed in compact matrix notation by “stacking”
and 
into 
and 
dimensional vectors 
and
respectively, yielding network channel model
where 
is the 
MIMO transfer function for the uplink network.
Equation (16) has the same structure as the point-to-point link model given in (4). However,
has nonunity rank even in the absence of multipath. In this case, 
reduces to
where 
is the 
spatial signature vector from node 
to node 
and 
is
the 
spatial signature vector from node 
to node 
and where 
is the pathless
between nodes 
and 
Equation (18) has rank limited by min
The processor structure given in Figure 2 and (11)-(14) cannot be realized at the network level, since
nodes within a set cannot share information with each other. However, (7)-(8) can provide a useful
upper bound on the total capacity achievable by the network. In addition, Figure 2 motivates structurally
constrained networks that approach this upper bound, by-treating the transmit and receive weights in
Figure 2 as part of the channel. This network model is developed below.
3.2 Structurally Constrained Network Model
Consider a network employing the processor structure given in Figure 2 at each node in the network.
Assuming that each transmit node
    is (in general) communicating with (each) receive node 
using a
single symbol stream 
the node transmit signals are modelled by
where 
is the 
transmit gain matrix used at node 
and the decoder input
symbols are modelled by

115
where 
is the 
MIMO processor transfer function for the network and
are the total number of links in the network. Both 
and 
have the same
structural form as the point-to-point MIMO link described in Figure 2. except that 
and 
are
structurally constrained to prevent communication between nodes in the same set. If the interference is
temporally white over the signal passband, then 
can be expressed as
where 
is the inverse Cholesky transform of 
 and 
is the average power
transmitted from each transceiver, such that
Equations (25)-(27) can be expressed more compactly by defining 
and 
in terms of link
index q using network address table
where 
is the number of links deployed by the network and 
and 
are the transmit
and receive nodes used by link q. Using (28)-(31), the symbols recovered on link 
are
where 
is the system processing gain from link 
into link
Further defining 
and constraining 
the signal-to-interference-and-noise
ratio (SINK) on link 
can be expressed as
where 
is the cross-link SNR of link 
signal 
present after reception on link
Solving (33) for 
yields 
where

116
Equation (32) or (33)-(35) can be used to compute network capacity using information-theoretic or ad
hoc optimization criteria. A particularly useful ad hoc criterion suggested by this model is
This capacity measure provides a useful lower bound on performance of the structurally constrained net-
work. More powerful criteria can also be derived from the channel model given in (32).
A detailed analysis of capacity for general networks is beyond the scope of this paper; however, crite-
rion (36)-(37) admits a particularly simple form in small networks where each node may possess enough
transceivers to spatially resolve every node on the other side of the link.
3.3 Null Steering Solution for Small Networks
Consider the multipath-free environment where 
is given by (18), and assume that
and 
Then the off-diagonal terms in 
can be removed by setting 
and
equal to null-steering solutions
where 
and 
 are diagonal scaling matrices. Substi-
tuting (38)-(39) into (34) yields
where 
is the 
Euclidean basis vector, and 
The extension to environments
containing substantive multipath is straightforward.
Substituting (40)-(42) into (35) yields 
and (36)-(37) reduces to
where 
is the total number of links that can be established by the network under the
null-steering constraint. This criterion is optimized by the waterfilling solution given in (7)-(8),
where 
is deflated by an SNR gap term to account for codec inefficiency.

117
Note that this solution requires at least 
transceivers at each node in downlink set 1, and at least
transceivers at each node in uplink set 2, such that 
and 
and 
transceivers
are to implement the null-steered network. This number can become unacceptable for large networks.
However, the total capacity of this network can grow linearly with 
in many practical networks, i.e.,
the cost added by each transceiver can be offset by an equal improvement on capacity. Moreover, this
result can hold in environments with little or no multipath, as long as the spatial separation between nodes
is acceptably large.
The off-diagonal terms in 
can also be forced to zero if every downlink node can steer independent
nulls to uplink nodes in its field of view and vice verse. That is, if
 and
where 
is the number of uplink nodes visible to node 
and 
is the number of downlink
nodes visible to node 
then 
can be made diagonal and 
can be expressed as (46). This can
provide a simple extension of this result to wide area mesh and ring networks where each node may be
visible to a small number of other nodes.
3.4 Extension to Reciprocal Networks
This analysis extends easily to reciprocal networks where the uplink and downlink transmission channels
possess reciprocal symmetry, such that 
This condition can be obtained for
a variety of communication scenarios, including time-division duplex (TDD) networks, simplex networks,
and random access packet data networks where transmit and receive operations are all carried out on the
same frequency channel.
In particular, if the received interference is spatially white in both link directions, such that
where 
is the background noise at all receivers, and if the link duty cycles and number of
transceivers are equal in both link directions 
and 
then the structurally constrained
ad hoc network capacity measure defined in (36)-(37) can be made equal in both link directions, by setting
and 
at both ends of the link, where 
are the linear transmit
and receive weights used in the downlink.
This result is shown by defining structurally constrained downlink capacity
where 
is the inverse Cholesky product of 
and where 
is the average
downlink power/transceiver and 
are the number of active tones transmitted over the downlink. If the
interference is spatially white and the link responses are reciprocal, then 
 and

118
and 
and 
are related by
with equality holding in (54) if 
If 
and 
then
and 
Lastly, if 
and 
then 
and 
i.e., the ad
hoc uplink and downlink capacity measures should be identical.
If the received interference is not spatially white, then a reciprocal capacity measure can still be obtained
by constraining 
and 
to satisfy
where 
and 
are the average interference powers
over the network. Defining interference-normalized transmit gains
then cross-link SINRs 
and 
can be expressed as
in (35) and (49), respectively, where 
and 
and where 
and
are the doubly whitened MIMO link responses, given by
If 
then 
whenever the channel responses are reciprocal, and the
ad hoc uplink and downlink capacity measures are equal if 
and
4 Network Capacity Analyses
The capacity achievable by a this network is illustrated in Figure 4, for the four-node ring and star networks
shown in Figure 3, and for a baseline point-to-point link between the EW nodes in the network. Pathloss
between the EW nodes is set to 134 dB, corresponding to two-ray propagation between a pair of nodes
separated by 3 miles and operating at a 5.78 GHz carrier frequency (upper U-NII band) and 50 foot height
above average terrain (HAAT), with additional shadowing and path variation due to ground scattering
and with low (4 dB median) shadowing. Pathloss between the EW and NS nodes in the ring network,
and between all four of outlying nodes and the central node in the star network, ranges between 115 dB

119
118 dB, corresponding to propagation over a 1.4-to-2 mile range, within the first Fresnel zone of each node
at the 60 foot HAAT’s assumed here.
Each node employs a 12-element circular transmit/receive array with a 6 inch diameter (3 inch separa-
tion between antennas) and omnidirectional azimuthal response and 1.76 dBi (Hertzian dipole) elevation
gain on each antenna element, connected to a Butler matrix that extracts (or excites) the dominant spa-
tial modes of the array after the reception (or before the transmission) operations, and a bank of digital
transceivers that process the dominant Butler mode(s) using the procedure described In Section 2. The
digital transceiver is assumed to be TDD with a 40% duty cycle in each direction, an active bandwidth
of 1.6 MHz, a modulation efficiency of 32% (including the TDD duty cycle), and an SNR coding gap of
2.3 dB.
Capacity is calculated as a function of transceivers transmit powers 
 with the added constraint
that each network employ the same number of transceivers, distributed to satisfy 
 This
provides a “cost neutral” measure of capacity for each network, under the assumption that deployment cost
is driven by the number of RF transceivers employed in the network
1. In particular, each network employs
24 transceivers in Figure 4, distributed equally at all nodes in the point-to-point link (12 transceivers/node)
and ring network (6 transceivers/node), and concentrated at the central node in the star network (12
transceivers in the central node, 3 transceivers in the outer nodes). Capacity is presented both in aggregate
over the entire network, and separately at each outlying node. In the latter case, this is calculated both
for unloaded networks where the node has access to the entire network, and for fully loaded and balanced
networks where the node must share that bandwidth simultaneously with every other node in the network.
Data concentration is ignored, i.e., the node either has free access to the network (unloaded case), or
transmits, receives, and relays data to allow intemode communication at identical rates (loaded case).
As Figure 4 shows, the ring and star networks provide a dramatic increase in capacity over the point-
1This assumption ignores cost of site acquisition, providing a favorable bias towards network with larger numbers of nodes,
e.g., the star network In Figure 4, if these costs are high.

120
to-point link. For example, the ring and star networks possess 45 Mbps and 28 Mbps in aggregate capacity
if 30 dBm PA’s are employed in the network, while the point-to-point link only provides 7.8 Mbps of
capacity under similar conditions. That is, the star and ring networks provide 3-to-6 times the capacity
of the point-to-point link, using the same number of transceivers, and providing potential communication
with an additional 2-to-3 users!
Examination of the individual node capacities reveal further advantages for the unloaded ring network.
In the unloaded case, nodes in the star network and point-to-point links can communicate with other nodes
at roughly equal information rates. However, nodes in the ring network can communicate with other nodes
at almost three times this rate! This is due in part to the ring network’s ability to transport information
in multiple directions, effectively doubling its throughput rate when bandwidth is available and needed.
An additional advantage can be seen in loaded networks. If the capacity of each link is identical,
then every node in the four-node ring can simultaneously communicate with its three counterparts at a
continuous data rate of 
where 
is the rate achievable on a single link2. At the 30 dBm transceiver
power limit given above, for example, each node in the ring network can jointly communicate at 7.5 Mbps
under loaded conditions, as opposed to 22.4 Mbps in the unloaded environment. This rate is very close to
the 7.8 Mbps rate achievable by the point-to-point link.
In contrast, the rate achievable by nodes in the star network drops by a factor of three (in general a factor
of 
under loaded conditions, and only then if the base station is treated as a relay node that does
not contribute information to the network. At a 30 dBm transceiver power limit, for example, the nodes in
the star network can only jointly communicate at 2.4 Mbps. This result has serious implications for certain
applications, e.g., video teleconferencing, interactive games, and network backhaul, where continuous full-
rate communication between nodes may be desirable or even necessary to the intended purpose of the
network.
5 
Conclusions
The MIMO channel exploitation concept has been extended to spatially-distributed multipoint networks,
and illustrated via capacity analysis for a ring and star network. These analyses demonstrate that MIMO
networks can provide significant (factors of 3-to-6) improvements in network and node capacity over equal-
cost point-to-point links, both at the user end (node capacity) and over the entire network. These results
establish both a motivation and a framework for exploring applications of MIMO networks over wider
applications. It is expected that these networks will provide strong advantages in commercial applications
such as wireless LANs, picocell networks, and wireless Internet appliances where data is naturally shared
among many users, and in military applications where the ability to operate over flat and flexible network
topologies, without sacrificing network throughput, detectability, or security, or survivability is of high
importance.
References
[1] T. Cover, T. Joy, Elements of Information Theory, Wiley: 1991
[2]  G. Raleigh, J. Cioffi, “Spatio-Temporal Coding for Wireless Communication,” IEEE Trans. Comm.,
March 1998, Vol. 46, No. 3, pp. 357-366
[3]  G. Foschini, M. Gans, “On Limits of Wireless Communications in a Fading Environment When Using
Multiple Antennas,” Wireless Personal Comm., March 1998, Vol. 6, No. 3, pp. 311-335
2 This result generalizes to 
 where 
  is the total number of nodes in the network, if
 and each
link achieves the game capacity

Design of 16-QAM Space-Time Codes for Rapid Rayleigh Fading Channels
Salam A. Zummo and Saud A. Al-Semari
Electrical Engineering Department
King Fahd University of Petroleum & Minerals
Dhahran 31261, Saudi Arabia
Tel: +966-3-860-3315, Fax: +966-3-860-2215
E-mail: {sazummo, semari}@kfupm.edu.sa
ABSTRACT
This paper proposes Space-Time (ST) codes for rapid fading channels using the 16-QAM signal
constellation. The design of the proposed codes uses two different methods. The  first method uses a high
time diversity trellis encoder, and the second uses the I-Q encoding technique. Both encoding methods
are expected to produce ST codes that perform better than the codes presented in the literature. Optimal
and suboptimal decoding algorithms are used to decode the I-Q ST codes. The proposed codes were
simulated over independent and correlated Rayleigh fading channels. Coding gains up to 3 dBs have
been observed.
1. Introduction
Diversity is a popular method to improve the performance and throughput of wireless systems. Transmit
time diversity can be achieved by repeating the transmission of each symbol in different time slots [1]. It
can be viewed as a repetition code and consumes higher bandwidth [2]. Therefore, substantial
performance improvement can be achieved using more sophisticated codes, utilizing both space and time.
The concept of  ST codes had appeared first in [3] as the delay diversity system, where different symbols
are simultaneously transmitted via different transmit antennas. Later, ST codes were deigned explicitly
for quasi-static fading channels [4,5]. Moreover, the performance criteria of ST codes were derived for
quasi-static and rapid fading channels in [4,5]. In [6-8], the ST concept was applied to enhance the quality
of transmission at the same bit rate of systems using single transmit antenna. So, the same error
probability can be achieved at a lower signal-to-noise ratio (SNR). ST coded QPSK schemes are
presented in [9,10] for rapid fading channels.
In this paper, 16-QAM ST codes are proposed using two encoding schemes. The first scheme uses
conventional trellis encoders, where the second one uses the I-Q encoding technique. The general ST
system model is described in the next section. Then, the proposed codes are presented. After that, the
optimal and suboptimal decoding algorithms used to decode the I-Q 16-QAM ST codes are discussed.
The performance of the new codes is compared to that of the 16-QAM ST code presented in [4] for the
cases of rapid and correlated fading channels. Finally, conclusions are drawn from the obtained results.

122
2. System Model:
A typical system that employs ST coding uses N transmit and M receive antennas. In this work, N has
been set to 2. The received signal is a noisy superposition of all transmitted symbols over all transmit
antennas. The signal 
received at the 
antenna at time t is given by:
Where 
is an AWGN modeled as independent samples of a zero-mean Gaussian random process with
variance 
per dimension. The coefficient 
is the path gain from the 
transmit antenna to the
receive antenna at time instant t. The 
is the transmitted symbol from the 
transmit antenna.
The performance of ST codes having N transmit and M receive antennas is derived in [4] for rapid fading
channels. Consider a codeword 
 that has been transmitted
over l time intervals and was erroneously decoded as 
The conditional probability of deciding 
in
favor of  
 using maximum liklihood decoding is upper bounded as [4]:
where
and 
is the average signal energy at each transmit antenna. The pairwise error probability is found to be:
The parameter L, which is the length of the shortest error event with L time intervals, can be referred to as
the Space-Time Minimum Time Diversity (ST-MTD) of the code. It can be visualized as the “branch-
wise” Hamming distance (HD) or the MTD in conventional trellis codes, by considering the whole
codeword 
as one symbol. The quantity multiplied by the SNR term can be referred to as the Space-
Time Minimum Square Product Distance (ST-MSPD) and defined as:
The ST-MTD and ST-MSPD are referred to in [4] as Distance and Product criteria, respectively. So,
maximizing both of them yields good ST codes suitable for rapid fading channels. The proposed ST codes
are presented in the following.
3. The Proposed Codes:
Different ST codes were designed in [4] for the quasi-static fading channel. The ST coded QAM scheme,
referred to QAM1 here, uses a rate-4/8 trellis encoder to encode the incoming 4 bits to 8 output bits. The

123
8 bits at the output of the encoder are mapped onto two 16-QAM signals and transmitted over two
antennas. The ST-MTD of  this code is 2 and its ST-MSPD is 0.16.
The first proposed scheme, called QAM2, uses a rate-4/8 trellis encoder. However, it is designed so that
both the ST-MTD and the ST-MSPD of  the code are maximized. To be able to do this, the allowed pair of
16-QAM signals to appear at branches departing or emerging into the same state should be different in
both symbols. This can be done by applying the permutation method used for the 4-dimensional MPSK
signal space in [11] with slight modifications.
At the beginning, all the possible 16-QAM symbols are listed in order, starting by 
 and ending with
in a 
vector. Then a 
vector is formed by listing all the pairs of same first and second symbols
and denoted by 
The vector, that has the second column of 
shifted by i rows is denoted by
Similarly, when the vector 
is shifted by  j rows, it is denoted by 
Figure 1-a shows the vectors
and 
as examples of the permuted vectors. The labels of branches leaving each state are taken
as the rows of the vectors having the maximum HD from each other. The trellis diagram of the 16-state
QAM2 code is shown in Figure 1-b
Since the MTD of a trellis code is inversely proportional to the number of input bits of the encoder, then
using different encoders in parallel, such as I-Q encoding, can increase the ST-MTD. I-Q trellis codes
with different throughputs were presented in [12]. These codes show significant coding gains over
conventional trellis codes having the same complexity. The proposed structure of the encoder/decoder
employing the ST concept is shown in Figure 2. It uses two rate-2/4 encoders, where each one encodes
two bits per signaling interval. Each encoder outputs two 4-AM signals: the first symbols from both
encoders are mapped onto a 16-QAM signal to be transmitted over the first antenna. The second symbols
are mapped onto the second 16-QAM symbol and transmitted over the second antenna.
In order to design codes with the highest possible MTD and MSPD, the 2-dimensional 4-AM signal space
is partitioned. The partitioning process is done so that the HD and the squared product distance (SPD) in
the generated subsets are higher each time the partitioning is performed. The set partitioning of the 2-
dimensional 4-AM signal space is shown in Figure 3. The trellis diagrams of the 4 and 32-state codes are
shown in Figure 4. It can be observed that the labels of branches departing or emerging at the same state
differ in both symbols. This maximizes the ST-MTD of the 4, and 32-state codes to 2 and 3, respectively.
The ST-MSPD is 16.6 for the 4-state code and 106 for the 32-state code. The large difference in both the
ST-MTD and the ST-MSPD, compared to those of the previous two codes, and resulting from using the I-
Q encoding scheme is clearly observed.
The complexity of a trellis code is equal to the total number of branches leaving all states divided by the
associated information bits with each transition [12]. The complexity of the 16-state QAM1 and QAM2
codes is 64. The I-Q code that has a similar complexity is the 32-state code. So, for fair comparison, the

124

125

126
16-state QAM1 and QAM2 codes are compared to the 32-state I-Q code. The decoding algorithms used to
decode the I-Q ST codes are presented in the following.
4. Suboptimal Decoding Algorithm
Two decoding algorithms are used to decode the I-Q 16-QAM ST codes: the optimal and a sub-optimal
decoding algorithms. The suboptimal decoding algorithm was proposed in [9,13] to decode the I-Q ST
coded QPSK systems and is based on estimating the Q/I components in the I/Q decoders.
This is performed by partitioning the 2-dimensional signal space available at the output of the ST
encoder. The signal space to be partitioned is a 4-dimensional 16-QAM space that consists of 
 possible
signal pairs. The partitioning is performed so that all pairs in one subset have the same in-phase
components. In other words, they are caused by the same 4-AM symbol pair at the output of the I -
encoder. Hence, for each 4-AM symbol pair, there are 16 possible 16-QAM signal pairs that could be
transmitted from both transmit antennas.
The notation 
denotes the possible 16-QAM pairs that can appear at the output of the I-Q ST encoder
given that the 4-AM symbols at the output of the I-encoder are l and k. In addition, the signal 
 is the 16-
QAM signal whose label in the constellation is j, and is transmitted over the 
transmit antenna. The set
partitioning yields 16 subsets and one set is presented for illustration:
Now, the following 16 metrics are computed at the I-decoder before the trellis:
Where xi and  yi are the in-phase and quadrature components of the 16-QAM signal 
 In each 
16
metrics are compared and the minimum is found accordingly, ending with 16 different metrics. Each of
them is associated with one of the 4-AM signal pairs that may be at the I-encoder’s output. Since each
encoder has two input bits, there are four possible metrics to be compared at each state in the trellis of the
I-decoder. The same principle is applied to the Q-decoder case.
The results of the I-Q ST codes show that the suboptimal decoding algorithm used does not perform well
because it is trying to guess for the best Q/I components from the received signals in the I/Q decoder. For
a decision in the I-decoder, there are 16 different combinations of the Q component to be compared,
which is a large number. This algorithm is called suboptimal because the I-decoder uses sequence
decoding for the I components and symbol-by-symbol decoding for the Q components. In order to get the
maximum performance of the I-Q ST codes, an optimal but complex decoding algorithm is used and
discussed in the following section.

127

128
5. Optimal Decoding Algorithm
To mitigate for suboptimality of the suboptimal algorithm, the use of the super-trellis decoding is
proposed to decode the I-Q ST codes. In this algorithm, the I and Q components are decoded using one
trellis whose size is the square of that of the individual I and Q trellises.
The super-trellis is used to decode I-Q ST codes optimally by decoding (not guessing) the I and Q
components simultaneously using sequence decoding. The optimal decoding algorithm is used to decode
the 4-state 16-QAM I-Q ST code only. The resultant super-trellis decoding complexity of this code is 64,
which is the same as the complexities of the QAM1, QAM2 codes.
6. Results
The above ST codes are simulated over independent fading channels. Figure 5 shows the performance of
the 16-state QAM1, QAM2 and I-Q codes for the cases of one and two receive antennas. The 4-state I-Q
code with super-trellis decoding is the best followed by QAM2, QAM1 codes and the 32-state I-Q code
with suboptimal decoding. This is expected for the 4-state I-Q code since the main controlling parameter
of the code in rapid fading channels is the ST-MTD of the code that is highest in the I-Q code.
It can be seen that the 32-state I-Q code with suboptimal decoding does not perform well in the single
receive antenna case. Also, degradation decreases as the SNR in increased, because the guessing process
is done in a less noisy environment. This degradation becomes less in the case of two receive antennas,
where the 32-state I-Q with suboptimal decoding is the best. In the case of one receive antenna, the gains
of the I-Q code, decoded by the super-trellis method, over the QAM1 and QAM2 codes are 2.5 and 0.5
dBs, respectively. In the two receive antennas case, the above gains become around 2 and 0.3 dB,
respectively. On the other hand, gains of the 32-state I-Q code, using suboptimal decoding algorithm,
over QAM1, QAM2 and the 4-state code with super-trellis decoding are 2.5, 1 and 0.5, respectively.
The same codes are tested over a correlated fading channel with a fade rate 
 of  0.01, and the results
are shown in Figure 6. A 
block interleaver is used to break the memory of the channel. The same
trends observed in the rapid fading channel case are observed in this case. The gains of the best code over
worse codes are less in the one receive antenna case. In the two receive antennas case, they do not change
much because the presence of  two receive antennas makes it less dependent on the codes’ parameters.
Figure 7 shows the performance of the codes for a slower channel, with a fade rate 
of 0.005. The
above interleaver is used which is improper for this channel. The performance trends for the codes are the
same as the previous two channels with decreased gains.
7. Conclusions and Discussion
Two new ST codes based on the 16-QAM signal constellation for rapid fading channels are proposed.
The results showed that the new codes are better in terms of the design criteria. Also, they were tested

129

130
over different fading rates and they showed to be robust in such environments. The optimal and
suboptunal decoding algorithms were used to decode I-Q ST codes. Results indicated that the suboptimal
algorithm is less complex than the optimal one at the expense of degradation in the performance,
especially for the case of one receive antenna. More gains are expected from the I-Q ST codes if better
and simple decoding algorithms are used.
Acknowledgements:
The authors wish to acknowledge the support of King Fahd University of Petroleum and Minerals
provided to conduct this research.
REFERENCES
[1]       J. Poakis, Digital Communications. New York: McGraw-Hill, Inc., 1989.
[2] Sklar, “Rayleigh Fading Channels in Mobile Digital Communication Systems Part II: Mitigation,” IEEE Comm.
Magazine, September 1997.
[3] A. Wittneben, “A New Bandwidth Efficient Transmit Antenna Modulation Diversity Scheme for Linear Digital
Modulation,” Proc. IEEE ICC’93.
[4] V. Tarokh, N. Seshadri and A.R. Calderbank, “Space-Time Codes For High Data Rate Wireless
Communication: Performance Criterion and Code Construction,” IEEE Trans. Info. Theory, March 98.
[5] N. Seshadri, V. Tarokh and A.R. Calderbank, “Space-Time Codes For High Data Rate Wireless
Communication: Code Construction,” Proc. IEEE VTC’97.
[6] Siavash Alamouti, “A Simple Transmit Diversity Technique for Wireless Communications,” 1EEE JSAC, Oct.
98.
[7] V. Tarokh, S. Alamouti and P. Poon, “New Detection Schemes for Transmit Diversity with no Channel
Estimation,” Proc. IEEE Int. Conf. On Universal Personal Comm. ’98.
[8] S. Alamouti, V. Tarokh and P. Poon, “Trellis-Coded Modulation and Transmit Diversity: Design Criteria and
Performane Evaluation,” Proc. IEEE Int. Conf. On Universal Personal Comm. ’98.
[9] S. Zummo, “Performance and Design of Space-Time Trellis Codes for Wireless Channels.” M.S. Thesis, King
Fahd University of  Petroluem & Minerals, Dec. 1999.
[10] S. Zummo and S. Al-Semari, “Space-Time Coded QPSK for Rapid Fading Channels,” Submitted to the
PIMRC’2000.
[11] D. Divsalar and M. Simon, “The Design of Trellis Coded MPSK for Fading Channels: Set Partitioning for
Optimum Code Design,” IEEE Trans. On Comm., Sep. 1988.
[12] S. Al-Semari and T. Fuja, “I-Q TCM Reliable Communication Over Rayleigh Fading Channel Close to the
Cutoff Rate,” IEEE Trans. On Infor Theory, Jan 1997.
[13] S. Zummo and S. Al-Semari. “A Decoding Algorithm for I-Q Space-Time Coded Systems in Fading
Environments,” submitted to the IEEE Vehicular Technology Conference VTC’2000.

Transmit Diversity With More Than Two Antennas
R. Michael Buehrer, Robert A. Soni and Quinn Li
Bell Laboratories - Lucent Technologies
67 Whippany Rd. Room 3A-220
Whippany, NJ 07981
mbuehrer@bell-labs.com
Abstract Recently, a new form of transmit diversity has been developed and included for cdma2000 , the
third generation successor for IS-95 code division multiple access (CDMA) systems. This transmit diversity
scheme was developed by Bell Laboratories and uses Space-Time coding techniques. This paper presents
performance results of this new transmit diversity method, termed space-time spreading, and investigates
”open-loop” improvements to the scheme which use more than two antennas. Additionally, we investigate
the performance improvements possible with closed loop techniques.
1 Introduction
Recently, Phase II of the cdma2000 standardization process has been completed where a review of forward
link antenna techniques was completed. A few different schemes were proposed as possible enhancements for
the system. The standard originally supported a method of transmit diversity known as orthogonal transmit
diversity (OTD). This method offered significant performance gains for rate 1/4 convolutional codes at low
speeds, but did not offer the same types of gains for rate 1/2 codes. The scheme is open-loop, and makes no
use of user specific data such as location or condition of its channel, other than through user independent
power control.
Through the efforts of Bell Laboratories [1, 2, 3], an additional open-loop scheme was developed which
significantly improved performance of weaker convolutional codes or codes with higher rates. This scheme
which we will term “Space-Time Spreading” or STS can offer significant performance gains over the existing
form of open-loop transmit diversity. This scheme is similar in concept and performance to the schemes
proposed for the UMTS system (W-CDMA) [4], and by Tarokh et al. [5] for TDMA applications. This paper
discusses the performance of this scheme, and shows some of the performance results which were used to win
approval of this scheme in the cdma2000 standardization process. Additionally, we investigate methods of
improving the performance of Space-Time Spreading through the use of more than two transmit antennas
with and without feedback (i.e., closed loop techniques).
2 An cdma2000 System Model
For a system with K mobiles receiving signals from a common base station, the transmitted signal on a
single antenna can be modeled as:
where 
is the power transmitted to the ith mobile, 
and 
are the data signal and unique Walsh
function intended for the ith mobile respectively, 
is the power of the pilot signal which uses Walsh function
0, and p(t) is the covering code for the base station of interest. Further, the Walsh functions are orthogonal
and repeat every symbol time 
i.e.

132
where 
is the complex multiplicative distortion caused by the wireless channel and n(t) is thermal noise
and all other interference. Mobile i correlates the received signal with the ith Walsh function during the kth
symbol interval after uncovering to achieve the decision statistic
where 
represents the cumulative effect of the channel 
over the kth symbol interval, and 
is the
kth transmitted symbol for the ith mobile.
The transmitted symbol can be recovered by using an estimate of the channel distortion 
obtainable
from the pilot channel, i.e.,
where f(·) is an appropriate decision function. Alternately, in a coded system 
may be used directly
as a symbol metric. If the channel is a flat, slow Rayleigh faded channel, in the absence of fast, accurate
power control, the resulting performance of the link will be rather poor due to the lack of diversity. As
a result, it is desirable to have a second antenna at the receiver to allow diversity reception, improving
performance considerably. However, mobile handsets do not easily allow a second antenna to be added.
3 Transmit Diversity Methods
One method of achieving diversity performance is to transmit the same signals on multiple carriers. However,
this is wasteful of the one resource we cannot afford to waste in mobile communications, namely bandwidth.
As an alternative, re-transmitting the same waveform with a chip-level delay, also known as delay diversity,
can help performance in some instances, but it can also degrade performance in other instances as it increases
the amount of self-interference which degrades the performance of a typical Rake receiver.
Orthogonal transmit diversity (OTD) which is available in cdma2000 as an option transmits half of the
bits via one antenna and half of the bits via a second antenna spaced approximately 10 wavelengths away.
The received stream of coded bits will be
Using a Viterbi decoder, the link-level performance of the forward link becomes a function of the quality
of both channels. Transmissions via channels with slow fading conditions benefit greatly from this method.
However, this method offers less performance gain as the speed increases1 and the code rate decreases.
Specifically, with high rate codes, the performance gains are reduced since OTD relies on the decoder to
obtain the diversity. This problem is alleviated by a technique termed Space-Time Spreading or STS.
4 Space-Time Spreading
Based upon space-time block codes, attributed to Alamouti [6], a signal transmission scheme which utilized
the multiple orthogonal code structure already available in the standard was developed for cdma2000 [2, 3].
1The interleaver helps compensate for loss of bits during bursty errors, because at high speeds, the duration of the errors
tend to be shorter.
At the mobile the following signal is received on a single antenna

133
This method also uses two antennas spaced approximately 10 wavelengths apart. On the first antenna we
transmit
and on the second antenna we transmit,
where 
and 
represent the even and odd streams of bits, respectively. Note that a separate Walsh
code is required for each transmit antenna to support a pilot on each antenna. Since the data rate has been
reduced by a factor of two by this scheme for each stream of bits, it is possible to use double length Walsh
codes and not utilize additional bandwidth or Walsh resources. That is we can convert a single Walsh code
into two double length Walsh codes using the repetition pattern
At the receiver, we again uncover and correlate with the two Walsh codes. At the output of the two Walsh
correlations we obtain (dropping the dependence on symbol interval)
where 
and 
are the effects of the complex channel. This obviously introduces interference terms in the
decision statistics. However, if we have estimates of the channel distortions 
and 
from pilot signals 1
and 2, we can obtain a signal estimate for the even bits by

134
where we’ve assumed that the channel estimation is exact, 
and 
Similarly, we can estimate
the data for the odd stream of bits as
It can be easily shown that this is identical to the decision statistic for two-antenna diversity reception
(without the 3dB aperture gain) [7].
The performance of STS was simulated for the cdma2000 standard using a one path Rayleigh fading
channel model for the fundamental channel [8]. The transmit power fractions (i.e., the required fraction of
the base station power), 
for full-rate voice using radio configurations RC3 and RC4 [8] were derived
from simulation. 
represents the energy per chip, and 
represents the total transmit power spectral
density. The quantity, 
represents the ratio of the transmit power spectral density to the out of cell
interference plus any additional thermal noise. It is commonly referred to as “mobile geometry” with low
values associated with mobile locations near the edge of the cell and high values associated with mobiles close
to the base station. The geometry is directly related to the signal to noise ratio of the decision statistics.
The effects of power control, puncturing, and coding using the interleaver specified in the ballot version of
the proposal [8] were included. The major simulation parameters are summarized in Table 1.
The simulation results for the fundamental channel are summarized in Figure 1. For both RC3 and RC4,
it is clear that STS offers a significant performance advantage. Since RC3 uses 1/4 rate convolutional codes
while RC4 uses 1/2 rate codes, RC3 uses length 64 Walsh codes while RC4 uses length 128 Walsh codes.
Thus, RC4 is less likely to experience a capacity limit due to a Walsh code limitation and may be preferable
in situations where the number of Walsh codes is a concern.
As shown in Figure 1 for a geometry of 
STS offers up to 5 dB performance improvement

135
over OTD at low speeds, and a minimum of 1.5 dB improvement at high speeds for RC4. For RC3, the gains
of STS over OTD are smaller due to the stronger convolutional coding, with STS offering a minimum of 0.5
dB improvement over OTD and up to 1dB at low speeds. STS also provides significant improvement over
no diversity achieving gains of 1-5dB. Most importantly transmit diversity helps where the system needs it
most, at low speeds. This flattens out the performance curve versus speed and increases capacity.
5 Transmit Diversity with Four Antennas
We have seen that adding an additional antenna at the base station to provide transmit diversity is beneficial
for cdma2000 . The next question we must ask is “Can we improve upon this with additional antennas?”
In this section, we discuss three options for extending this diversity scheme to four antennas. Extension to
three antennas is also similar with one column of the transmission matrices being ignored. Note that this
extension is meant to increase diversity performance, that is we can achieve higher orders of diversity by
using more transmit antennas.
To allow four transmit antennas, we first extend the Walsh code for a particular user twice to obtain four
Walsh codes with four times the length, where the extension pattern is
This allows for no code sharing and can be compared to the STS case discussed previously.
To help describe the method of transmission, we define the concept of a transmission matrix. The
transmission matrix simply describes the way symbols are transmitted. The rows of the matrix determine
the Walsh codes used and the columns determine the antennas on which the symbols are transmitted. For
example, we can see that from equations (7) and (8) in STS the transmission matrix is
To obtain a transmission matrix for four transmit antennas, we require an orthogonal matrix with four
columns and thus at least four rows [9]. While a 4 × 4 orthogonal matrix with four complex variables does
not exist [5], we find that a 4 × 4 matrix with three complex variables does exist. One such transmission
matrix is
The received vector of Walsh outputs is then 
where is the vector of complex channel distortions.
This can be rearranged as 
To remove the self-interference we apply the channel matrix 
to
That is 
and 
Thus, we can achieve four-fold diversity.
However, in order to achieve this, we must reduce the data rate to 3/4 the original rate. This can be seen
by noticing that while we use four codes (i.e., the rows of T) we only transmit three symbols.
A second option for using four transmit antennas without reducing the data rate, is to use the transmission
matrix

136
Which guarantees orthogonality, but only achieves two-fold diversity before the decoder. However, if the
interleaving is done correctly, we see that going into the decoder the metrics are:
Thus, while two-fold diversity is achieved prior to decoding, the Viterbi decoder can see up to four-fold
diversity in the path metrics. Thus, while we rely on the decoder to achieve the diversity gain from 2 to 4,
we do not lose data rate.
The last option is similar to Option 1 and uses the orthogonal design from [5]. The transmission matrix
is
This option also achieves four-fold diversity prior to decoding, but also suffers from a 25% loss in data rate.
The main difference between this option and Option 1, is that this allows all four codes to be used on all
four antennas.
All three of these options essentially provide four-fold diversity performance although option 2 will suffer
some degradation when puncturing is included on higher rate codes just as in OTD. However, we should
note two things. First consider Figure 2 (a). This figure plots the theoretical performance of several options
for four transmit antennas. Included are the theoretical performance of four branch diversity, two-branch
diversity with two-branch aperture gain, four-branch aperture, and four-branch diversity and aperture gain.
The theoretical performance is well known to be
where L is the degree of diversity and 
is the SNR per branch without any aperture gain,
and N is the amount of aperture gain being achieved. Also shown in Figure 2 (a) for comparison purposes
are no diversity and two-branch diversity. We can see that going from two-branch to four-branch diversity
does not provide huge gains particularly at high BER’s. Additionally, we see that two-branch diversity with
two-branch aperture gain provides better performance in the region of 1% BER than four-branch diversity.
As a second note, consider Figure 1. Notice that at high speeds the advantage of diversity is diminished
compared to the gains at low speeds. This is due to the diversity obtained in the decoder due to fast fading
and interleaving. Additionally, the benefits of additional diversity in frequency selective fading are much less
than in flat fading. This suggests that increased diversity performance is not necessarily the best option.
However, in order to implement the methods shown in Figure 2 (a) which are more than pure diversity,
either feedback or uplink-based estimation is needed. We will discuss this next.
6 Methods which Require Feedback
The preceding discussion of higher order diversity was based on the premise that we wished to improve
performance without requiring mobile feedback or uplink estimation. In this section we discuss the perfor-
mance improvements when mobile feedback is allowed. There are essentially three options for performance
improvement with four antennas when feedback is allowed. They are
• Four element fully adaptive transmit diversity
• Four element steered beam

137
• Combined transmit diversity and steering (Steered STS)
The first option has the largest potential gains and constitutes using a four element array with large element
spacing. Relying on mobile feedback the transmitter would dynamically adjust the phase and gains of each
antenna to ideally coherently combine all four transmit antennas. This would ideally provide both diversity
and aperture gain but obviously requires fast accurate mobile feedback. Such feedback would be limited by
inherent delays and would need to be added to the current standard. The second option does not necessarily
require a standards change but does not achieve any diversity gain and might be susceptible to deep fades.
A steered beam solution achieves approximately a 6dB aperture gain, although the gains could be less in a
rich scattering environment. This would require either mobile feedback (i.e., a standards change) or uplink
direction-of-arrival (DOA) estimation. The third option also does not necessarily require feedback and thus
would not require a standards change. It provides two branch diversity as well as two times aperture gain.
To provide some feel for the performance of the above options, simulations were run without power control
or coding and a 1.25ms average pilot filter providing a pilot 
The DOA for the S-STS
case was estimated over one frame at the mobile and fed back to the base. Figure 2 (b) plots the results
of these simulations for no diversity, STS, combined STS and beam-steering (called Steered STS or STS-
Feedback), and a fully adaptive array with four diversity branches. The STS and Steered STS results assume
two independently faded Rayleigh channels, while the fully adaptive array assumes four independently faded
Rayleigh channels. Feedback is perfect, i.e., full precision, no delay and no feedback error. The results
match well with theory. STS provides two-branch diversity gain over the no diversity case (4-5dB at 1%
BER). Steered STS provides a 3dB gain over STS and the fully adaptive array achieves both a 3dB aperture
improvement and a diversity improvement over Steered STS.
The preceding simulations assumed that feedback was perfect. In Figure 3 (a) we remove this constraint
and allow the feedback to be quantized by 4 bits and bit errors to occur in the feedback process. Further we
examine the performance as the feedback error rate increases from zero to 20%. Of course the performance
of no diversity and STS remains unchanged. Surprisingly, the performance of S-STS also remains unchanged

138
over the error rate of interest. However, we see that the performance of the fully adaptive array degrades
significantly as the feedback error increases. In fact the fully adaptive approach loses all of its advantage
over S-STS if the feedback error is 10% or higher. Note that in order to keep the delay to a reasonable level
the feedback will have to be uncoded (i.e., we cannot wait for the Viterbi decoding of the entire frame to
obtain feedback bits). Thus, the error rate on the bits could be fairly high.
The reason that S-STS is relatively immune to the feedback error is that the range of phases required to
steer antennas over 
is fairly small and thus any error perturbs the beam only a small amount. On the
other hand with the fully adaptive approach the antennas require a much larger range of phase adjustments.
This makes the range of phase error larger as well as the resulting degradation. Note that the fully adaptive
approach also requires three times the feedback.
A second major degradation in a feedback system is due to delay. In cdma2000 there is a minimum
2.5ms delay (equivalent to two power control groups). This will obviously be a problem for the fully adaptive
approach as the fading rate increases. Figure 3 (b) presents the performance of the schemes with 4% feedback
error as the Doppler rate increases from 10Hz to 180Hz. We can see that when feedback error and delay
are considered, the fully adaptive approach suffers dramatically. Note that the performance of the fully
adaptive approach degrades beyond that of the no diversity approach due to the feedback errors combined
with improper weighting. The receiver relies on correct knowledge of the feedback bits in order to correctly
phase the pilot. Thus, feedback error can cripple performance. Note that all suffer degradation at high
speeds due to the pilot filter length.
7 Steered Space-Time Spreading
Results from the previous section lead us to consider the use of STS with beam-steering, i.e., combined
diversity and aperture gain. In this section we describe this idea more fully. Consider a linear antenna
arrangement as shown in Figure 4. The base station transmits on M antennas divided into two groups. Group

139
A has 
antennas2 with inter-element spacing of approximately
where 
is the carrier wavelength.3
Group B is separated from Group A by a distance large enough to insure that the two groups experience
uncorrelated fading and contains 
elements.
On antennas within Group A the transmitted signal (ignoring other users) is
where i represents the antenna index which is 
for Group A, 
represents the transmit power for
the data from antenna i, 
and 
are the data stream divided into even and odd streams respectively, 
is
the power in the dedicated pilot on each antenna, 
is the Walsh code used for the pilot on that antenna4,
is a complex weight to be described later, 
and 
are extended Walsh codes as described earlier,
and p(t) is a pseudo-random sector-specific covering code.
On antennas within group B the transmitted signal (ignoring other users) is
where 
Note that for M = 2 we have Space-Time Spreading [3]. At the receiver we have
a single signal
where 
and 
are the time-varying multiplicative distortion due to Rayleigh fading seen from groups
A and B respectively, 
is the distance of the ith antenna from an arbitrary reference,
is the angle formed between a line drawn from the base to the mobile and the array baseline, and n(t) is
temporally and spatially white complex Gaussian noise. By correlating the received signal (after removing
the long code) with 
and 
and assuming that the channel is static over the integration period, we
obtain the following correlation outputs:
2 [x] is defined as the largest integer less than or equal to x.
3 Note that the exact element spacing is not crucial. However, it must be small enough so that the signals transmitted from
all elements experience highly correlated fading. Additionally, a spacing of much greater than 
will introduce grating lobes
which is generally undesirable.
4 As we will discuss later, a pilot per antenna is only necessary if mobile feedback is being used to steer the array. If uplink
estimation is used to steer the array, only one pilot per group is necessary.

140
Now, using the pilots we can obtain estimates for 
and 
We can then use the estimates to create decision
statistics for the even and odd streams as
where f{·} is an appropriate decision function. Expanding the first equation and assuming perfect channel
knowledge for simplicity’s sake results in
From this equation we can see two things: (1) we wish 
and (2) we must set the transmit
powers such that 
For an even number of antennas, the second condition is
satisfied by giving all antennas equal power. The first condition however, must be accomplished by either (a)
using information from the uplink to estimate 
or (b) using mobile feedback. We will discuss the options
for mobile feedback in a moment.
Assuming that the two above conditions are met, the decision statistic for 
is
Defining the SNR as 
and for the moment assuming that M is even (i.e., 
we can see
that the SNR is a Chi-Square random variable with 4 degrees of freedom (i.e., two-fold diversity) and an
expected value of
where we have assumed that 
Thus, we have an improvement of 
in SNR when compared to
the case of standard STS which sees no aperture gain but merely a diversity gain.

141
7.1 Calculating Weights
7.1.1 
Using an Uplink Array
A key to the scheme is the set of weights 
To maximize SNR we must set 
One method
of setting the weights is to attempt to estimate 
from uplink information. In the presence of this uplink
array we can estimate 
by measuring 
and using the relation 
After estimating 
the
weights are set to
However, this assumes that the distance between elements is known, the elements are phase matched, and
there is symmetry between the uplink angle-of-arrival and downlink angle-of-arrival. All of these are either
reasonable to assume or could be obtained through calibration. In this case, if the main pilot is put on the
first antenna of each group and the other elements are phased with respect to it, the transmit signals per
group will arrive at the mobile in phase and thus only one pilot per group is necessary. The mobile station
in such a system would not need to know that beam-steering was being used.
7.1.2 Feedback Options
A second means of calculating the set of weights 
is to rely on mobile feedback. Since the weights depend
ultimately on the angle-of-arrival, 
they must only be updated at the rate at which 
changes which is
likely very slow compared to channel fading rate. There are several possible methods of employing feedback.
The most straightforward method of feedback is to transmit a dedicated pilot on each antenna and feed
back the phase of the received pilots. One pilot per group could be used as a reference and the phase of
the other pilots with respect to the reference pilots are then fed back. This requires M – 2 phase values be
fed back per update. For q bit quantization and F Hz feedback rate, this method requires 
bps
feedback. This method makes no assumptions about the array spacing and is thus robust to imperfect
knowledge of the inter-element spacing.
Another method which requires less feedback is to feedback a single value for the entire array. If the
inter-element spacing within each group of elements is the same, the elements should differ by a constant
phase 
While the method is simpler and requires less feedback, it is more sensitive to
non-ideal element spacing. The feedback rate would be qFbps. For small array sizes (eg., M=4) this may
not be a significant savings.
7.2 Performance
To investigate the detailed performance of Steered STS in cdma2000 , simulations were run using the
cdma2000 standard. The simulation assumptions are given in Table 1 and with the exception that S-
STS uses two groups of two antennas, /ie M = 4, only RC3 is simulated and 
Note that
the geometry assumed is much worse (i.e., lower 
) than in Figure 1 thus the higher required power
fraction than the previous case. The array assumed had four antennas (i.e., two pairs).
We can see that Steered-STS provides significant performance improvement over both STS (approxi-
mately 3dB) and no diversity. An important point about S-STS is that even at high mobile speeds, the
scheme still achieves significant gains over the baseline, which is not true of transmit diversity in general.
That is the gains are not speed dependent. However, we see that the performance of S-STS is fairly flat with
respect to speed.

142
8 
Conclusion
In this paper we have investigated several possible extensions of transmit diversity to four antennas for
the Third Generation standard cdma2000 . It is clear that there are potential benefits from increasing the
number of antennas at the mobile station. These benefits to the cdma2000 downlink will be significant as
data becomes more predominant.
Acknowledgments
The authors wish to express their appreciation to their colleagues at Lucent-Bell Labs who have contributed
to the work in this paper including Roger Benning, Steve Nicoloso, Nallepilli Ramesh, Steve Allpress, Con-
stantinos Papadias, Bert Hochwald and Tom Marzetta.
References
[1] C. Papadias, B. Hochwald, T. Marzetta, R.M. Buehrer, and R. Soni , “Space-time spreading for CDMA
systems,” Stanford Sixth Workshop on Smart Antennas for Mobile Communications, July 22-23 1999.
[2] Lucent Technologies, “Performance of Space Time Spreading (STS) for IS-2000,” Contribution 3GPP2-
C30-19990914-013, September 1999.
[3] R. Soni, R. Buehrer, and J.-A. Tsai, “Open-loop transmit diversity methods in IS-2000 systems,” in
Proceedings of the Asilomar Conference on Signals, Systems and Computers, October 1999.
[4] Texas Instruments, “Space time block coding improvements,” ETSI - UMTS Contribution, December
1998.

143
[5] V. Tarokh, H. Jafarkhani, and A. Calderbank, “Space-time block codes from orthogonal designs,” IEEE
Transactions on Information Theory, vol. 45, pp. 1456–1467, July 1999.
[6] S. M. Alamouti, “A simple transmitter diversity scheme for wireless communications,” IEEE J. Select.
Areas Commun., vol. 16, October 1998.
[7] J. Proakis, Digital Communications. New York, NY: McGraw-Hill, third ed., 1995.
[8] TR45.5, Physical Layer Standard for cdma2000 Spread Spectrum Systems. TIA/EIA/IS-2000.2, 1999.
(Ballot Version).
[9] B. Hochwald and T. Marzetta, “Unitary space-time modulation for multiple-antenna communications in.
rayleigh flat fading,” IEEE Transactions on Information Theory, vol. 46, pp. 543–564, March 2000.

This page intentionally left blank

Reduced Complexity Space-Time Optimum Processing
Jens Jelitto, Marcus Bronzel, Gerhard Fettweis
Dresden University of Technology, Germany
Abstract
New emerging space-time processing technologies promise a significant performance increase
of wireless communication systems. The particular application and scenario strongly influences
the amount of possible performance and capacity increase if antenna arrays are deployed at the
basestation (BS) and/or at the mobile terminal (MT). The achievable gain is mainly determined
by the spatial correlation properties of the underlying physical transmission channel.
This paper analyzes the spatial correlation properties for various scenarios and investigates
the procuring requirements for designing apace-time optimum receivers. One aim is to reduce
the spatial signal dimension to the information bearing components applying orthogonal trans-
formation techniques. It will be shown that even for virtually uncorrelated spatial channels which
are characterized by high delay and angular spread, the spatial dimension can be reduced sig-
nificantly. 
This enables less complex receiver structures and more robust channel estimation
techniques.
1 
Introduction
Multiple antenna concepts are commonly regarded as a promising technology to increase the perfor-
mance of wireless communication systems. The concept of Space Division Multiple Access (SDMA)
enables higher user capacity within a cell if the users can be separated spatially. Furthermore, spa-
tial filtering and cancellation of undesired users results in reduced interference. Other multiple
antenna concepts include the steadily growing research fields of beamforming, spatial diversity
combining and space-time processing.
This paper investigates the performance of a single link between a MT and a BS and does not
target on system capacity issues. Depending on the given wireless channel conditions the different
concepts such as beamforming, space-diversity combining or fully armed space-time processing
will be more or less suitable. The multipath situation has to be considered in order to select
the appropriate algorithm. If for instance a strong Line-of-Sight (LOS) component is present
with only weak temporal and spatial spreading, pure beamforming provides an efficient approach.
Space diversity combining would not be appropriate in this scenario since the antenna signals are
essentially phase shifted copies of each other and therefore highly correlated. In a scenario with
considerable multipath delay and angular spread space-time processing promises optimum results.
The degree of signal correlation between different antenna elements influences the possible gain
which can be achieved with such a receiver concept. We investigate the spatial correlation properties

at the receiving antennas for various scenarios, which determine the additional information that can
be gained by every additional spatial dimension (or antenna) and can be used as a measure of the
required spatial receiver complexity. We introduce a linear transformation based on singular value
decomposition (SVD) [1] in order to reduce the potentially correlated M antenna signal streams
to an uncorrelated signal stream of lower order D, which is then fed into a reduced complexity
space-time receiver (Figure 1). An example will show the potential gains of this approach.
2 Signal Model
This section introduces a signal model for a single input multiple output (SIMO) system [2] using
one transmit antenna and M receive antennas including the channel characteristics. In order to
simplify the discussion linear modulation is assumed. The basic system model is shown in Figure 2.
A binary data stream is mapped onto complex symbols 
The continuous-time representation
of the symbol stream can be written as
with 
as symbol duration. This signal is band-limited by a transmitter (Tx) pulse shaping
filter 
The complex baseband representation of the filtered transmit signal results in
The band-limited signal s(t) is transmitted over a linear time-variant channel. Wireless communi-
cation channels are affected by multipath propagation with a possible LOS component and indirect
paths resulting from reflection, scattering and diffraction at several objects in the propagation
environment. This channel can be modeled by a physical channel impulse response (CIR) [3]
146

147
with P as the number of propagation paths, each of which is characterized by a delay 
and a
complex weight 
Both parameters are generally time-variant, but changes in the path delays
are usually slow compared with the symbol duration.
The received signal x(t) can be obtained from the convolution of the transmitted signal (2) with
the physical CIR (3) as
where n(t) is the additional noise term. Interference i(t) from other users as indicated in Figure 2
will not be considered in this paper. From (4) an effective CIR 
can be derived, including
transmitter filter and physical channel characteristics with fractional delays 
[3].
Applying multiple antennas with M elements at the receiver effectively introduces M separate
channels. Here, it is assumed that the multipath components at the antenna elements differ only
in the path length relative to a reference antenna element resulting in additional path delays
for every receive antenna m. The overall path delay at antenna m is given by
which results in an effective CIR 
at antenna m
If the rate of change of the received signal envelope is slow compared to the propagation time across
the array (narrowband assumption), which applies for most wireless systems, as long as the signal
bandwidth is small relative to the carrier frequency f, the additional delays 
can be regarded
as pure phase shifts,
where 
The effective CIR 
at antenna m can then be written as
where the path weights 
of the P elementary rays are assumed to be identical for all antennas.
Combining the M impulse responses 
of the SIMO channel

148
and collecting the phase shifts 
in an array response vector
leads to the reformulation of the SIMO CIR 
in matrix notation,
A is the array response matrix of dimension 
containing the P vectors 
as columns. The
matrix 
is a 
diagonal matrix containing the values of the pulse shaping filter for all
paths as elements, 
Finally, c(t) contains the P path weights at time
t. Using (4) and (11) the resulting M-dimensional received signal vector can now be written as
3 Spatial Correlation of the Received Signal
The spatial correlation properties of the received signal are strongly influenced by the parameters of
the effective CIR 
This includes the effects of the pulse shaping filter as well as the multipath
characteristics of the physical channel. Additionally, the spatial correlation of the received signal
at the antenna array is influenced by the temporal correlation properties of the transmitted symbol
sequence 
The spatial correlation matrix 
of the received signal x(t) can with (12) be
defined as
The transmitted sequence is i.i.d,
and zero-mean. Furthermore, we assume the noise terms 
at the antenna elements m to be
zero mean, uncorrelated with 
and temporally and spatially white. With these assumptions
the spatial correlation matrix as defined in (14) can be simplified to
with the noise covariance matrix 
and a constant scaling factor 
determined by 
and the
mean symbol energy. This factor can be neglected, since it doesn’t influence the matrix properties.
With the assumption of constant path delays and AOA’s the array response matrix and pulse

149
shaping matrices are deterministic, which simplifies (16) to
The signal part of the correlation matrix is determined by the matrix form 
where P
represents the inter-signal coherence matrix of dimension 
corresponding to the number of
multipath components. The properties of the inter-signal coherence matrix are influenced by the
complex path weights c(t), which are basically determined by the attenuation of the multipath
components, and the characteristics of the pulse shaping filter
Following the P-matrix will be analyzed in more detail for different multipath scenarios with
respect to mobility and delay spread to gain some insight into its structure. The reason is that,
besides the influence of angular path distribution represented in the array response matrix A, the
inter-signal coherence matrix determines the rank of the spatial correlation matrix and therefore
is important for determining the possible dimension reduction. One limiting case of the P-matrix
occurs when the signal copies arriving over P multipaths are coherent which implies identical path
delays
P will in this case be a rank one matrix. The other limiting case occurs with P
mutually uncorrelated signals, where P will have full rank. In realistic scenarios the rank of  P may
vary between these values.
Scenario 1: no Mobility, no Delay Spread    A static environment with multipath propagation
but negligible delay spread 
results in space-selective fading. The complex path weights
can be considered as constant due to the stationary environment. For every delay
the entries of 
for all paths are identical. Therefore, the pulse shaping matrix 
 can be
replaced by a scalar value 
for every k, which leads to a P-matrix of the form
Clearly, the inter-signal coherence matrix P has rank one independent from the length of the pulse
shaping filter, since the outer product 
has rank one and 
is a scalar. In this case,
the received signal vector x(t) defined in (12) can be written as
where a(t) defines the spatial signature, which is the weighted sum of the array response vectors,
The spatial correlation matrix 
for space-selective channels is then given as

150
In the noise-free case this matrix will be of rank one according to P, independent of the angular
multipath distribution. This suggests a beamforming or optimum combining approach to weight
the antenna signals according to the spatial signature, which reduces the signal dimension from M
to 1.
Scenario 2: no Mobility, Delay Spread    For scenarios with considerable delay spread,
the channel is considered to be space-frequency-selective. This is typically the case for excess
delays of 
The different path delays 
cause the pulse shaping matrix
to contain independent entries, which
results in the inter-signal-coherence matrix
The rank of this matrix is now determined by the number of multipath components and
their respective delays as well as by the length of the pulse shaping filter. Every sub-matrix
in (22) has rank one. However, the summation of k rank one matrices leads
to a matrix with a rank not higher than k. For filters of finite length 
the rank of P is
limited to min(P, L). Figure 3 shows the magnitudes of a typical P-matrix. Here, the path delays
are uniformly distributed in 
The weights 
 have random phases and decay
linearly with increasing path delay. The pulse shaping filter was modeled as a root-raised cosine
filter with roll-off factor 0.5. The gray levels indicate the amount of inter-signal coherence between
the delayed paths, where black indicates total coherence and white no coherence. In most cases
it has been observed, that this matrix has full rank or some rank deficiency. The degree of the

151
rank reduction depends on the given multipath situation. This also holds for the received signal
correlation matrix
where in the noise free case the rank of this matrix is less or equal to min(M, rank(P)). However,
since in most cases this information is not sufficient to be applied efficiently as a dimension reduction
criterion, analyzing the eigenvalue properties of the spatial correlation matrix will provide a valuable
tool for estimating the effective signal dimension, as will be shown later.
Scenario 3: Mobility, Delay Spread    In this most general case the wireless channel is selective
with respect to space, frequency, and time. The space-time correlation function for two antenna
elements 
and 
is defined as
The analysis of this correlation function can only be simplified for particular scenarios. One impor-
tant special case occurs when the temporal correlation is decoupled from the spatial correlation.
Then the matrix of space-time correlation functions can be written as
with a separable matrix of spatial correlation functions
1 
and a temporal correlation factor
The P- and 
matrices can be determined from (17).
4 Subspace Methods and Spatial Dimension Reduction
As stated earlier, the rank of the spatial signal correlation matrix is often not a sufficient measure
to determine the appropriate spatial dimension of the receiver. Therefore, an eigenanalysis of the
spatial correlation matrices is conducted using SVD [1]. The 
matrix can be decomposed into
with U and V as left- and right-hand side eigenvalue matrices of 
Since 
 is hermitian,
it follows
  is a diagonal matrix containing eigenvalues of 
 sorted in descending
order,
An important property of the normalized eigenvalues is, that
their magnitudes represent a measure of signal energy contained in the signal components after
an orthogonal coordinate transformation (OT). If the spatial correlation matrix has full rank, the
signal energy is distributed across all components. However, applying an OT concentrates the
signal energy within the first components.
1The matrix of spatial correlation functions 
is related to the spatial correlation (covariance) matrix 
through
due to the differences in the definitions for complex valued autocorrelation functions and complex valued
correlation matrices for vector processes [4].

152
Usually in array signal processing the performance gain in noise-limited environments can be
determined by the SNR gain per antenna branch. With the assumptions of identical average
SNR’s at the M antenna elements and spatially uncorrelated noise, the SNR gain is 10 log M.
Figure 4 shows the average SNR performance gain depending on the number of signal branches
considered. These results are normalized with respect to the average SNR in each branch. Applying
an orthogonal transform to the received signal shows that the first signal components already
provide most of the possible SNR gain, although the corresponding spatial correlation matrix has
full rank. The maximum possible SNR gain is the same as without transformation, if all signal
dimensions are used. Commonly applied criteria for rank estimation in noisy environments such as
the Akaike information-theoretic criterion (AIC) or Minimum description length criterion (MDL)
[5] will not provide a sufficient estimate for the required signal dimension.
The simulation of several scenarios with different numbers of multipath components P, delay
spread 
and angular spread 
for an antenna array with M = 8 elements has shown that using
more than 3 signal branches does not provide any significant SNR improvement, as indicated in
Figure 4. Basic results from these simulations are:
• for scenarios with small angular spread 
the signal dimension after OT can be
reduced to 3 or less with negligible loss of SNR gain independent of the respective delay
spread,
• for scenarios with limited excess delay 
the signal dimension after OT can be
reduced to 3 or less with negligible loss of SNR gain independent of the respective angular
spread,

153
• for arbitrary scenarios with unrestricted angular spread and large excess delay
more than 82% of the available signal energy after OT is contained in the first 3 components
resulting in a loss of SNR gain of less than 0.9 dB.
The results from simulations using arbitrary parameter combinations have been verified using
tap delays and average relative path powers from the GSM and ITU channel models [6, 7] as
parameters. The delays have been normalized to the GSM symbol period 
for
the GSM models and to a chip period of 
for the ITU models. The
channel parameters delay spread 
maximum excess delay 
and their normalized values are
summarized in Table 1. For each tap of the different channel models, a path angle 
has been
selected which is uniformly distributed within 
with 
varying from 
to
180°. The resulting eigenvalues from 100 trials have been averaged for each value of 
Table 1
shows the corresponding loss of SNR gain for the smallest sum of the 3 largest eigenvalues, which is
considered the worst case (*). The last column of this table shows the required receiver dimension,
for a maximum loss of 0.25 dB SNR gain. The results obtained for the GSM HT and TU scenarios
with a restricted angular spread are even more promising as apparent from Table 1.
These results suggest, that it makes sense to remove the partial coherence properties of multi-
path channels through spatial dimension reduction to simplify space-time receiver structures and
to improve channel estimation techniques.
5 Reduced Dimension Space-Time Receiver
As an example for the potential benefits of the dimension reduction approach we will discuss channel
estimation and space-time MLSE using antenna
arrays. An equalizer structure using an space-time
Viterbi algorithm (VA) combined with reduced rank channel estimation (RRCE) was presented in

154
[8]. Starting from the received signal vector in (12) we can define a discrete time signal vector
sampled at symbol rate 
with unknown timing error 
as
assuming that the channel remains constant during one time frame. Using further the assumptions,
that 
is i.i.d (15) and zero mean and that the noise is spatially and temporally white and
uncorrelated with 
and that the CIR is of finite duration 
we can reformulate (27) with
for notational convenience as
Here, 
is the channel matrix and
is the input symbol sequence which affects x(l). Considering a block of data of N symbol intervals
the received signal in matrix notation can be written as
with
As discussed in [8], under the assumption of white noise samples the VA can be implemented as a
distance measure with the corresponding branch metric being
The performance of the VA depends on the estimate of H. If S defined in (32) contains known
training sequence symbols, the least-squares estimate of H is given by
with 
as the Moore-Penrose pseudo-inverse of S. In [8] it was proposed to replace this estimate
by a subspace based approach. Using the decomposition of the spatial correlation matrix (26),
the M-dimensional space is divided into a 
-dimensional signal subspace and a noise subspace by
splitting the eigenvector matrix as 
The signal

155
subspace dimension 
is determined using the AIC or MDL criterion. Applying this decomposition
a subspace estimate of the channel matrix was proposed as
with
The main advantage of this estimate is the usage of additional knowledge about the signal subspace
in 
which is estimated from the entire frame and does not rely on the training sequence alone.
However, analyzing (35) and (36) of the RRCE receiver suggests a reduced dimension (RD) receiver
structure with the same performance at lower receiver complexity. The received signals are first
transformed to reduced-dimensional data 
using the signal subspace eigenvector matrix
where the dimension is now truncated to 3 instead of using the AIC or MDL criteria. All the
remaining processing can then be performed with reduced complexity. The channel estimation
based on the reduced data set is given by
which provides the same estimates as obtained with (36). The resulting receiver structure is shown
in Figure 5(a). In Figure 5(b) the performance of a full space-time receiver (dashed line) and the RD
receiver (solid line) is compared. The usage of signal subspace information results in a performance
advantage of the RD receiver depending on the training sequence length. The performance is

156
identical to the RRCE receiver in [8], but at significantly lower receiver complexity. If interference
is considered the RD receiver may even outperform the RRCE receiver since truncation of the
non-signal components will also reduce interference. However, this depends on the interference
characteristics and further research is needed.
6 Conclusion
The spatial correlation properties of the received signal at an antenna array using a signal model
which includes the transmit filter have been investigated. The rank of the spatial correlation matrix
doesn’t provide a sufficient measure for determining the possible dimension reduction in scenarios
with partially coherent multipath signals. Here, analyzing the eigenvalue strength associated with
the signal energy distribution after orthogonal transformation is more appropriate. The main
advantages of the dimension reduction are the reduced spatial receiver complexity and the more
robust channel estimation. However, further research needs to be carried out in order to replace
the SVD by numerically less complex algorithms to derive the reduced dimension transformation
matrix.
References
[1] Gene H. Golub and Charles F. van Loan, Matrix Computations, The Johns Hopkins University
Press, third edition, 1996.
[2] Arogyaswami Paulraj and Constantinos B. Papadias, “Space-time processing for wireless com-
munications,” IEEE Signal Processing Magazine, vol. 14, no. 6, pp. 49–83, Nov. 1997.
[3] Heinrich Meyr, Marc Moeneclaey, and Stefan A. Fechtel, Digital Communication Receivers:
Synchronization, Channel Estimation, And Signal Processing, John Wiley & Sons, Inc., 1998.
[4] Steven M. Kay, Fundamentals of Statistical Signal Processing, Volume II: Detection Theory,
Prentice Hall, 1993.
[5] Mati Wax and Thomas Kailath, “Detection of signals by information theoretic criteria,” IEEE
Transactions on Acoustics, Speech and Signal Processing, vol. 33, no. 2, pp. 387–392, Apr. 1985.
[6] ETSI EN 300 910, “Digital cellular telecommunications system (phase 2+); Radio transmission
and reception,” Tech. Rep. GSM 05.05 version 7.1.0 Release 1998, ETSI, 1999.
[7] Radio Communications Study Group, “Guidelines for evaluation of radio transmission tech-
nologies for IMT-2000/FPLMTS,” Tech. Rep. 8/29-E, ITU, 1996.
[8] Ayman F. Naguib, Babak Khalaj, Arogyaswami Paulraj, and Thomas Kailath, “Adaptive chan-
nel equalization for TDMA digital cellular communications using antenna arrays,” in Proceed-
ings of the 1994 IEEE International Conference on Acoustics, Speech, and Signal Processing,
1994, vol. IV, pp. 101–104.

Wireless personal communications system planning
using combinatorial optimisation
Joseph K. L. Wong, Michael J. Neve and Kevin W. Sowerby
Department of Electrical & Electronic Engineering, The University of Auckland,
Private Bag 92019, Auckland, NEW ZEALAND
Joseph.wong@auckland.ac.nz
Summary
This paper reports an investigation into the use of combinatorial optimisation techniques in the design of
wireless communication systems. The formulation of an optimisation strategy appropriate to wireless
indoor communication system design is identified. A simple single-floor test problem is proposed and
investigated to illustrate the feasibility of the approach. Results show that the optimisation strategy is
capable of delivering meaningful solutions with an appropriate balance between system performance and
cost. 
A number of issues (such as the formulation of cost function and optimisation strategy) are
identified which will require additional research in order to realise a planning tool useable by system
planners.
1. Introduction
The emerging standards in personal wireless communications require new systems to have large capacity
and high efficiency [1-3]. Generally, system deployment is specified by numerous design parameters
(such as the number of base stations to be used, the base station locations and the transmission powers),
each of which can be regarded as a different dimension in a multi-dimensional design problem. The
interrelationships between these parameters must be considered if a successful deployment is to be
realised. As systems become more complex and operational margins become tighter, ‘traditional’ design
techniques that rely mainly on an engineer’s experience are likely to become less effective. This is
primarily due to the sequential nature of the traditional design process, in which design parameters are
usually considered in isolation. Consequently, there is a need for alternative planning strategies that
explicitly consider the interrelationships between the parameters.
This paper proposes an alternative strategy in which the design problem is viewed as a multi-dimensional
combinatorial optimisation problem. This approach inherently accounts for the interrelationships between
different dimensions and may be better suited to wireless systems design than the ‘traditional’

approaches. The optimisation process includes three primary components: 1) a set of decision variables;
2) a cost function; and 3) an optimisation  algorithm.
The decision variables are system parameters such as the number of base stations to be used, the base
station locations and the transmission powers. The specific values assigned to these parameters constitute
the ‘output’ of the optimisation process.
The cost function is a function of the decision variables, the output of which is a number representing the
cost (or penally) of a particular wireless system configuration.
Finally, the optimisation algorithm is an iterative procedure that searches for a solution by repeatedly
evaluating the cost function for different combinations of decision variable values.
In this paper, the key decision variables and cost functions associated with the deployment of a wireless
communication system are investigated. A Guided Simulated Annealing based algorithm [8,9], is used to
determine the optimum deployment of base stations in a simple DS-CDMA system. The results indicate
the feasibility of the proposed approach to wireless system design.
2. Choosing the Decision Variables
In wireless system design, the decision variables are parameters that have an effect on the performance of
a system – both in terms of the quality of communication and the operational cost. Sets of decision
variables can be used to specify both the hardware configuration and the selection of operational
strategies (such as handoff and discontinuous transmission). The optimisation of a complete wireless
communication system requires a very large number of decision variables. Computational practicalities
require that the problem be resolved into more manageable portions. Accordingly, the optimisation
process is tackled in stages. Groups of closely interrelated decision variables should be considered
together. Largely independent decision variables can be dealt with separately. For example, only the
decision variables influencing the physical configuration of the wireless system hardware need to be
considered initially. The decision variables relating to operational processes, such as handoff, can be dealt
with subsequently. In this paper, only the base station configuration stage of the complete system
optimisation process is considered.
 
 
 
158

159
3. Selection a Cost Function
The cost function is an important component of the optimisation strategy as it quantifies system
performance. In general, the cost function accepts an n-dimensional trial solution (generated by the
optimisation algorithm) and returns a ‘cost’ as an indication of the relative ‘goodness’ of the trial.
Although the choice of a cost function is likely to vary from one system type to another (each of which
may require different performance measures), a generic cost function for optimising the design of a
wireless communication system will likely contain both technical and commercial components.
3.1 Cost Function - Technical Component
The momentary signal-to-interference ratio (SIR) on the forward link is generally regarded as an
indication of the quality of a wireless CDMA system [4, 5]. The outage probability is derived from the
SIR and is one of the most important parameters as it is indicative of the actual system capacity [4, 5]. In
addition to outage probability, the minisum function and the minimax function of the interference-to-
signal ratio can also be used as measures of performance since they correspond to the average and
minimum value of the SIR of the population, respectively.
Outage probability is defined as the fraction of users in a service region with an SIR below a certain
threshold. As the capacity of a CDMA system is limited by interference, this threshold corresponds to the
minimum SIR level that provides acceptable quality for communications. In general, for a population of n
users, the outage probability can be expressed as
The term minisum generally means minimisation of the sum of the cost [6]. Optimisation using the
minisum function tends to lower the overall cost of the system. For the current problem, it can be
interpreted as maximising the average SIR for the whole system. However, as the cost is examined
collectively, a small portion of the population may suffer from extremely low SIR. The minisum function
for SIR can be formulated as

160
In contrast to minisum, the minimax function optimises the system in a worst case scenario [6]. It
effectively improves the worst of the population but at the expense of the average service quality. Such a
strategy may fail to provide an acceptable SIR level for the entire population even when there are
sufficient resources available. The minimax function is given by
During the optimisation process, as the SIR level changes, the amount of improvement achieved is
dependent on which of these measures is used to quantify the change. As an illustration. Fig. 1 shows the
changes for sets of five users’ SIR levels. The dotted line in Fig. 1 indicates an outage threshold of 9dB.
The improvement achieved in each of the three performance measures is listed in Table I.

161
3.2 Cost Function - Commercial Component
Besides the technical component, there are other costs associated with installation, maintenance and
operation of the physical equipment. In this paper, the fixed installation cost of the base station is
assumed to vary according to the number of base stations required, namely
In addition to the fixed cost associated with each base station, there is a marginal operational cost. In this
paper, it is assumed that this operational cost is directly proportional to the transmission power, that is
Consequently, a first-order cost function for optimising the design of a wireless communication system
can be proposed as
where 
are used to weight the various cost components.1
1 This ‘first-order’ cost function is in its most primitive form. The identification of additional cost components, the
selection of component weights and the formulation of alternative cost functions are areas requiring further research.

162
4. Choosing an Optimisation Algorithm
In general, an optimisation algorithm is an iterative method that searches for the minimum in the cost
function within the solution space [7]. In this paper, the optimisation algorithm chosen consists of two
search methods, namely, a brute force search and guided simulated annealing [8, 9].
These two search methods are implemented in two stages. The first (outer) stage of the optimisation
process searches for the optimal number of base stations while the second (inner) stage aims to determine
the optimal combination of this number of base stations, in terms of their locations and transmitter power
levels. Because the problem of finding the optimal number of base stations is one-dimensional, and with
an appropriate selection of limits, the search space is therefore likely to be small, ‘brute force’ searching
is used in preference to a global search technique. ID contrast, the combinatorial optimisation problem of
determining base station locations and transmission powers is much more complex. The corresponding
search space is likely to contain multiple local minima and therefore a global search algorithm (the guided
simulated annealing algorithm in this case) should be used. The algorithm for the proposed optimisation
algorithm can be expressed in pseudocode as
1. FOR n = 1 t o maximum number of base stations allowed
(a) WHILE Xmin > minimum defined
i. FOR m = 1 to maximum number of trials
X(m) = trial generated by the Guided Simulated Annealing algorithm
for n base stations
FX(m) = evaluate cost function(X(m))
ii. Xmin = min (FX)
5. A Test Problem
A simple test problem has been formulated to examine the feasibility of the proposed algorithm by
considering the deployment of base stations into a room with 25 regularly spaced users. The target
system employs DS-CDMA modulation with a spreading gain of 128. All the antennas are omni-
directional and free space radio signal propagation is assumed [10, p. 71]. In this simple problem, the
effect of shadowing and multi-path fading are ignored. A user experiences outage when its SIR (after
applying the processing gain) falls below 9dB.
The optimisation process searches for the most favourable base station configuration. In this problem, the
base station configuration is quantified by the number of base stations to be used, the transmission power

163
of each base station (relative to the weakest transmitter power) and their respective coordinates on the xy-
plane, as listed in Table 2 (a). The upper and lower limits are chosen to constrain the search within the
‘likely’ solution space and to avoid unrealistic solutions. The cost function used in this example is given
by equation (7), with weights as listed in Table 2 (b) (Note that for this ‘first-order’ problem, the minisum
and minimax components are not considered.)
The weights for Case 1 are chosen so that all cost components of interest have roughly the same influence
on the search. This case acts as a benchmark for comparison with the two other cases considered later in
this paper. The inclusion of Case 2 and Case 3 permits the examination of the effect of varying the
weighting of a single cost component (in this case 
which represents the base station fixed cost).
6. Results and Discussion
6.1 Base station configuration
Because base station transmissions influence the reception in the cells (service areas) of other base
stations, the identification of a globally ‘optimal’ configuration is a non-trivial exercise – even for this
simple scenario. Traditionally, wireless system design has focused on achieving adequate coverage.
With such an objective, the base stations are likely to be placed in a regular and/or symmetric topology to
simplify the design process. In relation to the current scenario, the periphery of the room would be a
common choice for locating base station(s) [11]. Two possible ‘traditional’ configurations, with two and
three base stations, are shown in Fig. 2 (a) and 2 (b), respectively. The relative performance of these
configurations is summarised in Table 4 along with the performance of the configurations generated by

164
the optimisation algorithm. (Note that the optimised transmission power levels are all within 0.8 dB of
each other. In calculating the cost associated with the transmission power, the lowest base station
transmission power has been arbitrarily assumed to be 1mW.)
Fig. 3 presents the configurations of two and three base station systems determined using the optimisation
algorithm with the relative transmission power summarised in Table 3. (The dotted lines indicate the

nominal cell boundaries.) The results presented in Table 4 show that the regular and symmetric
topologies in Fig. 2 result in higher outage probabilities than those from optimised base station
deployments. An optimised deployment leads to better performance because it minimises the areas in
which users suffer high interference levels from other base stations.
6.2 Defining the number of base stations
The result set marked with ‘+’ in Fig. 4 (a) illustrates the cost performance of the solution generated by
the optimisation algorithm for a fixed base station cost weighting of 0.02. (The other two sets of results
in Fig. 4 (a) are for fixed base station costs of 0.04 and 0.01. These results will be discussed in section
6.3.) The outage probability component of the total cost tends to decrease as more base stations are added
(see Fig. 4 (b)), so the outage probability component is at a maximum when there is only one base station.
(The cost value of 0.2 corresponds to an outage probability of 100%.) The inclusion of a second base
station decreases the outage probability to 24% of the value for a single base station. Further reduction in
outage probability is achieved by adding more base stations and the outage probability cost component
eventually reaches zero.
In contrast, both the base station fixed cost component and the transmission power cost component
increase linearly with the number of base stations deployed. As a result, these costs drive up the total cost
of the system when the number of base stations is increased beyond three. In essence, the improvement in
reception quality (decrease in outage probability) is achieved at a financial cost (more base stations and
 
 
 
165

166
higher transmission power). The optimisation algorithm arrives at a good compromise between
performance and operational expense by selecting the three base station configuration as the solution. Of
course, this selection has been influenced by the pre-determined relative importance of the various costs,
as represented by the cost weights used.
6.3 Influence of weight variations
To assess the influence of cost component weights on the final cost, an experiment has been performed in
which the fixed base station cost weight is varied. The results are shown in Fig. 4 (a), 4 (c) and 4 (d).
The data set marked with ‘X’ and ‘O’ in Fig. 4 (a) represent the cases with doubling and halving the
weights, respectively.

167
When the weighting for the base station cost is doubled, the ‘optimal’ base station configuration contains
only two base stations, rather than the three base stations for the original scenario (see Fig. 4 (a)). The
data set shows a much steeper climb in cost as the number of base stations is increased – indicating that it
is undesirable to use more base stations. The additional outage probability cost associated with using two
base stations rather than three, is more than offset by the (financial) cost advantage.
In contrast, when the weighting for the base station cost is halved, the ‘optimal’ base station configuration
remains at three base stations. Note that the corresponding cost curve in Fig. 4(a) is flatter, indicating that
there is less emphasis on reducing the number of base stations. In essence, the emphasis has been
transferred to other cost components (such as outage probability and transmission power).
7. Ongoing Development
The optimisation approach presented in this paper appears promising. However, a number of issues must
be addressed before a practical planning tool can be realised. The formulation of the cost function and the
selection of the optimisation algorithm are of primary concern.
The cost function used in this paper is a simple first-order model that was. designed to demonstrate the
feasibility of the optimisation approach. In reality, a practical cost function must contain realistic cost
components (in terms of performance measures such as customer satisfaction level) and cost weights
appropriate to the planner’s design objectives. Attention is currently being directed at formulating a
guideline for the selection and prioritisation of performance measures.
Although the current optimisation algorithm has demonstrated an ability to deliver sensible solutions, it
must be realised that the problem has been significantly simplified. If the optimisation algorithm is to be
practically useful, it must be augmented to be able to deal with considerably more complex scenarios,
such as the three-dimensional indoor environment.
8. Conclusions
This paper has addressed the problem of optimising the design of a wireless communication system. A
combinatorial optimisation procedure is used to specify the optimal system configuration such as the
number of base stations to be used, their locations and their relative transmission power levels. A simple

168
cost function accounts for the outage probability, operational and installation costs associated with any
particular system configuration. The technique has been demonstrated to be capable of delivering
meaningful solutions for a simplistic two-dimensional environment.
Attention is now being focused on formulating a guideline for specifying cost functions and selecting an
optimisation algorithm. Of particular interest is the applicability and sensitivity of the optimisation
technique to a range of complex three-dimensional indoor environments.
References
[1] 
D. Grillo, S. T. S. Chia, and E. N. Rouelte, “Special Issue on the European Path Towards Mobile
Systems,” IEEE Personal Comms. Mag., vol. 2, No.l, Feb 1995.
[2] 
M. H. Callendar, “Special Issue on IMT2000: Standards Efforts of the ITU,” IEEE Personal
Comms. Mag., vol. 4, No. 4, Aug 1997.
[3] 
E. Buracchini, R. D. Gaudenzi, G. Gallinaro, H. H. Lee, and C. G. Kang, “Satellite
UMTS/IMT2000 W-CDMA Air Interfaces,” IEEE Communications Magazine, vol. 39, No. 9,
pp. 116-126. Sept 1999.
[4] 
R. Prasad, CDMA for wireless personal communications, Boston: Artech House, Chapter 5, 1996.
[5] 
S. G. Glisic, Spread spectrum CDMA systems for wireless communications, Boston: Artech
House, Chapter 6, 7, 1997.
[6] 
H. D. Sherali, C. M. Pendyala, and T. S. Rappaport, “Optimal Location of Transmitters for
Micro-Cellular Radio Communication System Design,” IEEE Journal on Selected Areas in
Communications, vol. 14, No. 4, pp. 662-673, 1996.
[7] 
B. D. Bunday, Basic Optimisation Methods, Edward Arnold, Chapter 1, 1984.
[8] 
P. P. C. Yip and Y. H. Pao, “Guided evolutionary simulated annealing approach to the quadratic
assignment problem,” IEEE Transactions on Systems, Man and Cybernetics, vol. 24, No. 9,
pp. 1383-1387, Sept 1994.
[9] 
P. P. C. Yip and Y. H. Pao, “Combinatorial optimization with use of guided evolutionary
simulated annealing,” IEEE Transactions on Neural Networks, vol. 6, No. 2, pp. 290-295, Mar
1995.
[10] 
T. S. Rappaport, Wireless communications - Principles and Practice, Prentice-Hall Inc, 1996.
[11] 
M. J. Neve and K. W. Sowerby, “Optimising The Performance of Indoor Wireless
Communication Systems,” IEEE Vehicular Technology Conference, vol. 2, pp. 968-972, May
1999.

Frequency Planning and Adjacent Channel Interference
in a DSSS Wireless Local Area Network (WLAN)
D. Leskaroski, W. B. Mikhael
Electrical and Computer Engineering Department, University of Central Florida, Orlando, FL 32816
dl375l6@pegasus.cc.ucf.edu
Research Sponsored by: Nortel Networks and Harris/Intersil Corporation
ABSTRACT
The new communications standard for wireless local networks is the IEEE 802.11 standard.
802.11b specifies that we use the ISM band at 2.4GHz. The ISM band at this frequency is 83MHz wide.
For North America, under FCC regulations, the 83MHz of bandwidth is divided into 11 channels. Every
channel has a frequency bandwidth of 22 MHz [1]. In North America, channels 1 through 11 are used
and only Ch1, Ch6, and Ch11 physically do not have any overlapping frequency ranges. Therefore, it
follows that  frequency planning has been done using only these three channels. This greatly reduces the
capacity and utilization of  a given Wireless LAN.
This paper will deal with and answer the question of how far attenuated the signal has to be so
that it will not interfere with another adjacent or overlapping channel. The goal of the research was to
generate a theoretical model of the 802.11 DS channelization (frequency re-use and interference profile)
given that the 11 channels are arranged in a staggered overlapped  fashion.
The result of the research shows how a set of overlapping channels (1 through 6) can be
positioned/attenuated in order to increase user capacity yet remain with minimal channel interference. In
addition, the paper will provide sufficient evidence that will show that frequency planning can be done
using four channels instead of three channels.
INTRODUCTION
Wireless products provide a mobile solution to various network configurations. A WLAN is an
on-premise data communication system that reduces the need for wired connections and makes new
applications possible, thereby adding new flexibility to networking. Mobile WLAN users can access
information and network resources as they attend meetings, collaborate with other users, or move to other
campus locations.
With the availability of cost-effective, standards-based products, use of wireless networking is
rapidly expending from the factory floor, warehouse and retail stores, to hospital wards, university
campuses and now too corporate offices. The various environments call for different wireless networking
requirements in terms of coverage area, user density, traffic patterns, and interference.

170
When speaking about interference regarding wireless communications in many instances it is
understood to be interference such as multipath, reflection, and scattering. This paper on the other hand
will deal with the interference that occurs between two adjacent or overlapping signals.
FREQUENCY CHANNEL ASSIGNMENT
The IEEE802 LAN committee has created a wireless data communication standard that allocates
a given frequency range in the 2.4GHz ISM band for different parts of the world. As shown in table I
one can see the different frequency ranges assigned for North America, Europe, and Japan.
The total bandwidth allocated is of significant importance because it defines the number of
channels that can be utilized at each geographical area. Every region has its specified authority that
monitors and regulates the use and division of this bandwidth. For the United States, this acting authority
is the Federal Communications Commission (FCC). The FCC has divided the 2.400-2.4835 GHz range,
or the 83MHz band, into 11 channels [1]. The table below will show the frequency channels that are
defined for North America, as well as the channel allocations for Europe and Japan.

171
Table 2 above shows only the center frequency of each channel, and as shown there is 5MHz
spacing between every center frequency. A power spectral density function of one of these channels
(Channel 1) is shown below.
Every channel has bandwidth of 22MHz, so for example channel 1 will spread from 2401MHz to
2423Mhz. As imagined there will be an overlap between the channels. In fact, Channel 1 overlaps all the
way to channel 5. The figure below shows what is actually happening between the channels.

172
So, as shown Channel 6 is the first channel that Channel 1 does not overlap with. This is where
frequency planning using non-overlapping channels comes in place. Channels 1, 6, and 11 are used for
frequency planning since that is the only combination of three channels that do not overlap each other.
As shown in the figure above there needs to be a 5 channel separation so that the channels will not
interfere with each other.
PROBLEM STATEMENT
Channel 1 will stretch from 2401-2423MHz. This means channel 1 will interfere with all the
channels up to Channel 6. As it follows, Channel 1 will have the biggest interference with Channel 2, not
counting Channel 1 itself where interference will be over the entire 22MHZ of bandwidth. One of the
objectives of this research is to calculate the interference between two adjacent channels given that they
are one on top of the other.
The first step is to find the overlapping area between two interfering channels. For example, we
can calculate a SNR between the curve area of Channel 1 and the overlap area of any other given channel
(CH2…CH5). This way we can find the interference of a given channel with respect to Channel 1. The
calculation will give us a result that looks similar to the following:
Note: These numbers are not actual calculations. They are just provided to better explain the
approach.
None of these overlaps (interference) is acceptable. We will have to set a threshold of overlap
(interference) that will be acceptable (for example, 0.05). Now we can "play" with the power spectral
density function of Channel 1 in order to get below the desired threshold level. The power of Channel 1
will be reduced (attenuated) until desired results are achieved.

173
The final result will be a table as follows:
CHl: -xdb
CH2: -ydb
CH3: -zdb
CH4: -adb
CHS: -bdb
CH6: 0db
x, y, z, a, b will be values in db that will show how much given AP needs to be attenuated so it would not
interfere with another AP. (Note: x, y, z, a, b are not yet determined)
There are two different ways to decrease the overlap between the interfering channels.
1. Reduce the output power of the AP itself, or
2. Increase the distance between the two interfering APs.
The above results (x, y, z, a, b) will give you the values of how much attenuation is needed,
however reducing the power of a given AP may not be desired. Another way of reducing the overlap is to
calculate the distance between two adjacent APs so that there is no interference. The equations and
comments given below will help us create a valid theoretical model.
Free Space Path Loss(FSPL) in indoor environment.
Where d is the distance in meters between the transmitter and receiver, and λ(lambda) is the wavelength
in meters.
Line of Site Path Loss (PL)
Where 
is the free space loss in dB determined in the far field of the antenna. 
 is the
distance between the transmitter and receiver [4]. The symbol n1 is an attenuation factor which depends
on the attenuation of the environment. For line of site application the n1 factor has been determined to be
close to 1.99. [5]
EXPERIMENTAL DATA AND MEASUREMENTS
The following section will deal with and discuss in detail the affects of the interference that
occurs between two overlapping channels. 
Even more important, this section will show how far
attenuated the signal has to be from a given adjacent channel so that the signals will not interfere. Over a
13 weeks period, I have completed numerous measurements and created a model that will show how far

174
attenuated overlapping channels need to be so they will not present interference to each other. The
equipment used for the experiment is listed below:
°
4 Lap Top Computers
°     2 10baseT Network Access Hubs
° 
2 Nortel AirSurfer Pro Wireless Access Points
° 
4 BayStack 660 Wireless PC Cards
°
2 10baseT PCMCIA Network Card Adapters
° 
2 Power BackUPS
° 
2 Mobile Carts
° 1 Measuring Tape
° 
Harris LAN Eval Software (used to measure the throughput)
The experiment was conducted in an outdoor environment, in a parking lot of the Engineering
building at the University of Central Florida. The measurements were performed between 12:00am to
5:00am. This time was chosen in order to reduce the unwanted interference of people, cars, and other
obstructions. The parking lot is approximately 600 feet by 600 feet making it the ideal place to perform
this experiment. A picture of the experiment is show in Figure 3.

175
As shown in the picture, there are two different sets of networks. Set A consisting of TX-A
(Transmitter), RX-A (Receiver), Hub A, and AP A constantly set on Channel 1. Set B consists of TX-B
(Transmitter), RX-B (Receiver), Hub B, and AP B that will be changing Channels from 1 to 6. AP A was
assigned a SSID called UCF1 and AP B was assigned a SSID called UCF2. This way mobile unit B2
(TX-B) can only connect to AP B, and mobile unit A2 (TX-A) can only connect to AP A. For this
experiment the distance between TX-A and RX-A, as well as the distance between TX-B and RX-B, was
set to be 30 feet. The entire set A was at all time stationary, only set B was being moved away from set
A. At every point the following things were recorded:
1. Distance between Set A and Set B (ft)
2. Throughput of Set A (Kbits/sec)
3. Throughput of Set B (Kbits/sec)
Table 3 and Table 4 show the throughput measured. (NT stands for Not Tested)

176
As shown in the tables, the throughput is presented in percentages. Before the measurements
began I measured the throughput of set A without any interference (458 Kbits/sec), and the throughput of
set B without any interference (461 Kbits/sec). The percentage shown in the tables shows a normalized
throughput performance of each system. As I mention earlier, set A was always set to CH1 and set B was
the one that was being changed to all six channels. Each table shows what happens to both sets when set
A is CH1 and set B is CH1, CH2, CH3, CH4, CH5, CH6. It is important to show both performances,
because at times the interference affects only one of the systems. When the two systems are close to each
other (they see each other), one of the systems takes over and starts transmitting and the other set is
waiting for a clear channel. The CCA (Clear Channel Assessment) will not let transmission occur when it
cannot find a clear channel to transmit.
The most important parts of the throughput tables 3 and 4 is where both systems are performing
above or close to 80% of their "maximum" throughput. I chose 80% as a threshold, but it is up to the user
to choose the performance of the two sets. Table 5 below is little more user friendly and it give a so-
called overall performance of the entire experiment with respect of distance. The numbers below are
calculated by finding the average of the tow corresponding numbers from Table 3 and Table 4.

177
The second column of the table above represents the attenuation in dB corresponding to the
distance given in column one. The formula given below was used to calculate the attentions:
Where:
° 
PL is the path loss (attenuation) in dB.
° 
D is the distance between set A and set B in ft, given in column one. (D is divided by
3.3 to be converted to meters)
° N1 is the attenuation factor. (Since the experiment was done outdoors and line of site,
a value of 1.99 was used for N1.
Using all the data shown above we can derive a more general attenuation table for channel 1
through channel 6. Assuming system A set on channel 1 is at location "0", another network (system B)
can be positioned with a given channel if attenuated at:
Now by knowing the actual attenuation values in dB we can calculate how far we can position
given APs for different values of N1. Using Equation 5, we have:
where the value of 
is in meters. Using equation 6 and using a value of 2.99 for N1 the values
of the last column in Table 5 were derived. Using equation 6, the user can enter a value for N1 that
corresponds to the environment where the APs will be placed. The equation will show how far apart they
need to be so they will not interfere with each other.
In order to give a better visual representation of how the performance of system A and B behaved
with respect of distance, I will present the performance graphs at the end of this paper. In reality, the
centerpiece of the entire research are the values given in Table 5, but using the graphs below it is easier to
see how the performance varies with respect of the distance between the transmitter and receiver. The
distance in the graphs is given in feet.

178

179

180
The graphs of Channel 1 vs. Channel 5 and Channel 1 vs. Channel 6 were not given in this paper
because the performance in this two cases was close to 100 percent throughput the experiment. In other
words, the graphs resembled a straight horizontal line at 100 percent for any given distance.
CONCLUSION
At the beginning of the paper it was said that only Channel 1, Channel 6, and Channel 11
physically did not overlap each other, so these three channels were the preferred when it came to
frequency planning. From observing all the given measurements in this paper one can see that other
channels such as Channel 5 and even Channel 4 performed with close to 100 percent throughput very
close to a system that was set on Channel 1. This paper has provided evidence that when it comes to
frequency planning we can use the combination of four (Ch1, Ch4, Ch7, and Ch11) instead of three (Ch1,
Ch6, and Ch11) different channels. Even further, this paper has given information on how it would be
possible to use the entire 11 channels arranged in some type of an overlapping fashion.
For this experiment all the testing has been done for channels 1 through 6. Additional
measurements can be done for the rest of the channels; however, at this point it is assumed that this model
is valid for any set of six consecutive channels.
LIST OF REFERENCES
1.   IEEE 802.11 Standard for Wireless LAN, Wireless LAN Medium Access Control (MAC) and
Physical Layer (PHY) Specifications, Jan. 1997.
2.   B. Garon, "PRISM 1KIT-EVAL Wireless LAN Evaluation Kit User’s Guide", Application Note
AN9790.1, Harris Semiconductors, November 1998.
3. "Frequency Hopping and Direct Sequence Spread Spectrum Radio Technologies", Nortel Networks,
September 1998.
4.   J.C. Stein, "Indoor Radio WLAN Performance -- Part II: Range Performance in a Dense Office
Environment", Harris Semiconductors, February 1998.
5. T. S. Rappaport, “Wireless Communications: Principles and Practice,” IEEE Press, Prentice-Hall.
New Jersey, 1996.

Modeling and Simulation of Wireless Packet
Erasure Channels
Günther Liebl, Thomas Stockhammer1, and ftank Burkert2
Abstract
We will present a new model for wireless packet erasure channels, which can be used for both theoretical
analysis and real-time simulation of  network protocol performance. The correlation between successive packet
losses will be described by a higher-order Markov process, which can be transformed into an equivalent first-
order Markov chain, such that all major performance measures can be derived from the model. Since our
approach belongs to the class of generative discrete channel models, it can also be used as a stochastic source
to reproduce an infinite sequence of erasure indicator values with desired stochastic properties. Thus, it can
be easily implemented into network simulation environments in terms of a lossy link element, where both
short-term and long-term fading on the mobile radio link are taken into account separately. Finally, we will
show some modeling results for a GSM GPRS system, which is a packet-oriented transmission service to be
launched in Europe in spring 2000. In addition, we will demonstrate the effects of different packet sizes and
channel coding rates on end-to-end throughput.
I. INTRODUCTION
N future cellular networks, packet-oriented transmission services will play a major role, since
they provide an efficient means to adapt to the highly varying data rate of different multimedia
applications. One possible scenario is comprised of a totally heterogeneous network environment,
where the current Internet serves as the backbone, and the wireless links provide access points
for mobile users. However, compared to the benign channel characteristics of wire-line broadband
networks, radio links suffer from severe distortions due to fading, noise, and interference. Hence,
despite many advances in channel coding and equalization over the last years, the residual bit error
rate is still a crucial factor: if only one single bit is corrupt, the whole packet must be declared
lost. This results in a significantly higher packet erasure rate than on today’s Internet, where
loss is mainly only due to buffer overflow. Since all common network protocols like TCP or UDP
have been optimized with respect to link congestion, they are extremely sensitive to a significant
increase in packet loss. Hence, a stochastic model is needed to analyze the detrimental effects
of wireless links on end-to-end packet transmission in heterogeneous network environments. In
addition to theoretical results, real-time system behavior has to be examined with respect to a
particular setting of timers and buffer sizes of the various network protocols. In contrast to already
1Institute for Communications Engineering, Munich University of Technology, Arciutr. 21, 80280 Munich, Germany,
email:{liebl,tom}@OLNT.EI.TUM.DE
2Siemens AG – Corporate Technology ZT IK 2, 80730 Munich, Germany, email: Frank.Burkert@MchP.Siemens.DE

182
existing approaches, we have developed a new model which can be implemented into a network
simulation environment.
We will start with a very general description of packet erasure channels in section II, where we
will also define all the necessary notation. Section III contains the various steps in developing
our model using the idea of higher-order Markov processes and their equivalent first-order Markov
chain. In section IV, we will explain why our model is well-suited for integration into existing
network simulation environments, and show one possible implementation strategy. After a short
introduction to GSM GPRS (section V) we will present some performance results for a GSM GPRS
system in section VI to prove the applicability of the proposed model.
II.  GENERAL DESCRIPTION OF A PACKET ERASURE CHANNEL
In the following, our packet erasure channel of interest shall contain all the components of
an arbitrary mobile radio system, i.e. logical channel structure, channel coding and modulation
schemes at the transmitter, demodulation and detection methods at the receiver, and the actual
characteristics of the underlying physical transmission channel, as depicted in Fig. 1. The input to
the channel is assumed to be a sequence of packets of fixed length, depending on the segmentation
and reassembly procedure. At the output, a delayed version of the input sequence is received, in
which all lost packets are replaced by an erasure indicator.
The reception of successive packets can therefore be described by a binary discrete-time stochastic
process, i.e. a family of binary random variables 
where 
is the denumerable set of
integers, and i denotes the position of a packet in a transmission sequence. Hence, the sequence
represents a particular realization of the erasure process, as shown in Fig. 2.
The binary random variable 
is often called an erasure indicator variable, and takes on a value

183
in {0,1} according to the following rule:
In general, the probability distribution of the random variable 
depends on an infinite number
of past events, due to the correlated fading process on typical mobile radio channels. However,
in most practical cases,
memory length 
If we furthermore assume our packet erasure process to be both stationary
and ergodic, it can be completely described via its conditional probability mass function (PMF):
In the following, we will show how Eq. 2 can be rewritten in terms of the state transitions of a
Markov chain, thus enabling us to apply all the well-known results in this field to our problem of
modeling packet erasure channels.
III. PROPOSED MODEL: THE MARKOV ERASURE CHANNEL (MEC)
In this section, we will develop a Markov model for our correlated packet erasure process of
memory order    which has an extended state space and a corresponding mapping function between
erasure indicator variables and states. For sake of compactness, only the major ideas of the approach
are mentioned. For a more detailed treatment of this topic, including all relevant proofs, the reader
is referred to [3].
A. The Higher-order Markov Erasure Process
Let us define a higher-order stationary and ergodic Markov process with binary state space
which has a memory of order 
Thus, the probability of making a transition from
state 
to state 
also depends on 
previous states. There exists now a set of
conditional probabilities for describing such a transition. Due to the assumed stationarity
of our process, the same set holds for all possible sequence indices 
and is denoted by
only a finite number of previous erasure events, say
have to be taken into account. Then, we usually speak of a channel of

184
with
Given the following (deterministic) mapping between erasure indicator values and states
we can rewrite Eq. 3 in terms of erasure indicator variables 
as
Based on the above definition of a higher-order Markov erasure process, we will now try to find
an equivalent first-order Markov chain, such that the computation of Eq. 2 only involves the two
successive states in the sequence.
B. The Equivalent First-order  Markov Chain
We will start by defining a first-order stationary and ergodic Markov chain with an extended
state space 
The probability of making a transition from state 
 to state
here only depends on these two states, and can be written as
If we furthermore apply the following modified (deterministic) mapping between erasure indicator
values and states
it can be proved [3], that the above combination results in the same stochastic properties as the
previously defined higher-order Markov erasure process.
Since the inverse relationship to Eq. 7 is given by
the conditional PMF of Eq. 2 can be represented in terms of a state transition probability:
C. Simplest Non-trivial Example: Markov Erasure Channel of Order 2
We will illustrate the idea behind our proposed model by giving a simple example. Let us consider
a Markov erasure channel with a total of four states. Fig. 3 shows a sample sequence of erasure
indicator values and the respective state transition diagram of the equivalent first-order Markov
chain. Suppose the first packet has been received correctly, whereas the second has been lost, i.e
the channel is currently in state 1. With probability 
it will switch into state 2 during the

185
next transmission, which results in the third packet being correctly received. If the channel then
switches into state 0 with probability 
the fourth packet will also pass un-erased.
Instead of the state transition diagram, we can also use the transition matrix of the underlying
first-order Markov chain to describe the stochastic properties of the Markov erasure channel:
As we can easily realize, there are only two entries in each row, corresponding to the two possible
transitions starting in each state. This is due to the binary nature of the erasure process and the
deterministic mapping between states and erasure indicator variables, and therefore holds for any
memory order
From the above example, two aspects of our proposed model can already be observed:
• Given a sufficiently long sequence of measured erasure indicator values for a specific mobile radio
link, we are able to parameterize the corresponding Markov model of desired memory order, i.e.
compute an approximation for the actual transition probabilities by using the inverse relationship
of Eq. 8.
• Once we have set up all (possibly) nonzero entries in the transition matrix, we can reproduce an
infinite sequence of erasure indicator values by cycling through the state transition diagram and
using Eq. 7.

186
IV. A REAL-TIME NETWORK SIMULATION ENVIRONMENT FEATURING A LOSSY WIRELESS LINK
When implementing our real-time network simulation environment, we made use of an existing
shareware tool developed by UC Berkeley, the so-called NS version 2.1b5 [1]. It is an object-oriented
simulation tool, for which various common protocol elements like agents, queues, or transmission
links already exist in a basic version, such that we do not have to worry about how to pass on
packets between entities, or perform synchronization between transmitter and receiver parts. One
major benefit of NS is the full support of almost any possible version of IP-based traffic, e.g.
protocols like TCP and UDP.
Since spring 1999, there also exists a real-time enhancement called NSE, which provides a simple
means to investigate interactive protocol behavior: Via regular network interface cards, external
IP-traffic from remote hosts can be fed into a virtual simulation scenario, where single packets can
be dropped or delayed, before they are passed back onto the fixed network. Thus, it is possible
to add a virtual wireless link at any point in a heterogeneous network, and analyze end-to-end
performance of common transmission protocols.
A. A new Lossy Link Element Based on the MEC Model
Fig. 4 shows a simple structure for an end-to-end link in the virtual network. The agents at both
sides are usually modified with respect to our desired system of interest, which will be described
later on. The queue is usually a fixed element of every transmission link in NS, and is responsible
for correctly spaced packet transmission according to the target bit rate and delay set for the
link. The NS specification already includes a general procedure for integrating lossy link behavior
into virtual networks. According to an underlying stochastic source, a binary random variable is
produced whenever a packet is transmitted over the link. If its value is “1”, the packet is marked as
lost, and the receiving agent can exactly tell which packets have to be dropped. But this mechanism
exactly corresponds to our previous definition of erasure indicator values in section II.
As we have mentioned in section III, our proposed MEC model has the property of being able to
reproduce a (possibly) infinite sequence of erasure indicator values, which has approximately the
same stochastic characteristics as the measured sequence on a wireless link. Hence, our approach
belongs to the class of generative channel models [2], based on which it is fairly easy to construct

187
a new stochastic source with desired properties.
B. Modeling of Different Fading Characteristics
An important new aspect of our simulation environment is the clear distinction between different
fading characteristics. We consider an interference-limited system, where the influence of short-term
fading is included in the statistical properties of the physical channel. Hence, for each target carrier-
to-interference-ratio (C/I), we can set up a corresponding stochastic description of the erasure
process. To take into account the long-term variations in the received signal, we can dynamically
switch our model parameters with respect to measured C/I-profiles during a simulation run. Thus,
the movement of a mobile terminal through a natural environment can be analyzed.
V. GSM GENERAL PACKET RADIO SERVICE (GPRS)
Against the background of the growth of both Internet and cellular phone users there is an
evident need for an efficient wireless access to packet switched data networks. Current so-called
2nd generation mobile communication systems, e.g. GSM, are not able to serve this purpose.
They have been designed on base of a circuit switched radio transmission for narrow band speech
communications. This results in two major drawbacks for data transmission. Firstly, the available
bandwidth per user is much too small to allow higher data rates and, secondly, data traffic in packet
switched networks, e.g. the Internet, is bursty by nature. Conveying bursty traffic over a circuit
switched bearer results in a highly inefficient utilization of the available radio channels and causes
unreasonable high costs for the user. Therefore, the Special Mobile Group (SMG) within the ETSI
standardization body launched in GSM phase 2+ the development of an efficient cellular packet
data service. At the end of 1998, ETSI specified GPRS as a new bearer service for GSM networks
to improve and simplify wireless access to packet data networks. It is build atop of the regular
GSM protocol stack to facilitate a low complex and easy integration into already established GSM
systems.
In the following, we will give a brief overview of the extended system architecture of a GSM GPRS
system, where we will solely focus on the air interface, i.e. we will not consider session setup and
tear down or the delivery and routing of packets between mobile stations and external packet data
networks (e.g the Internet). Our descriptions are mainly based on [4][5].
A. The GPRS Protocol Stack
The basic idea behind the development of the GPRS specification was to ensure the concurrent
existence of current voice transfer with future high-rate packet data transfer in common GSM
networks. Thus, the GPRS protocol can be considered as a set of extensions of the existing GSM
protocol stack. One important extension is related to channel allocation. In GRPS, a mobile
station (MS) may use multiple time slots of the same TDMA frame. The channel allocation is very

188
fast and flexible. The base station subsystem (BSS) assigns the available resources to the mobile
stations according to a so-called capacity-on-demand principle, i.e. multiple users in a cell share
a common physical channel. The allocation of the time slots may differ from TDMA frame to
TDMA frame. This enables the system to allocate a channel only when either the mobile station
or the BBS needs to send data packets. Moreover, downlink and uplink channels are assigned
independently (asymmetric transmission). Hence, for bursty traffic this results in a very efficient
usage of the valuable resource bandwidth.
The GPRS protocol stack can be gathered bom Fig. 5. On top of the network layer, any packet
data protocol can be applied. Most usually this will be the IP Protocol.
The Subnetwork Dependent Convergence Protocol (SNDCP) adapts the upper layer protocols to
the functionality of the underlying GRPS layers. It performs segmentation and reassembly of long
user data packets and provides means for header compression and data encryption on the mobile
link to ensure privacy of user communication.
The data link layer encompasses three sublayers. Logical Link Control (LLC) is used to establish
a logical link between MS and BBS and is based on LAPD, which is also part of the common GSM
protocol stack. It supports point-to-point as well as point-to-multipoint connections. Backward
error protection is provided in form of a Go-back-N retransmission protocol. The Radio Link
Control (RLC) layer performs segmentation of the LLC packet data units (PDUs) into short blocks
of fixed length according to one of the channel coding schemes described in subsection V-B. A
block check sequence is appended (in dependence on the applied coding scheme this is either a
Fire code or a CRC code), which allows in combination with sequence numbering the detection
of erroneous or lost packets. In addition, RLC provides an optional Automatic Request (ARQ)
protocol to achieve a reliable data transfer when needed. The Medium Access Control (MAC)
sublayer performs multiplexing of user data and signaling information.

189
The physical layer consists of two sublayers. The Physical Link Layer (PLL) provides means of
forward error correction (FEC) which will be described in more detail later. The Radio Frequency
Layer (RFL) equals the one specified for GSM.
Fig. 5 also depicts the hierarchical frame structure and the segmentation/reassembly according to
the GRPS protocol stack as described above.
B. Channel Coding Schemes for GSM GPRS
The purpose of channel coding is to protect the transmitted data against errors. For the original
full-rate GSM traffic channel for speech, the output bits of the speech encoder are expanded to a
total of 456 coded bits by use of a memory 4 rate 1/2 convolutional code. The encoded bits are
subsequently block-diagonally interleaved and mapped onto 8 successive radio bursts.
In GPRS, four different coding schemes (CS) have been defined each delivering 456 bits, since the
structure of the underlying interleaver and radio bursts have not been changed compared to GSM.
A procedure called link adaptation can be applied to dynamically switch between the CS after
every RLC block. This allows to adapt the level of error protection to the channel characteristics.
Tab. I details the parameters of the four CS, where data rate denotes the rate that is available per
GSM time slot .The convolutional code is the same code as used in the original GSM system.
That is, if CS-4 is applied and a single user can use all 8 time slots of a TDMA frame, then the
maximum data rate is 171.2 kbit/s. It is important to note that the term payload in this context
does not denote the amount of user data that can be mapped onto one RLC block, but the sum of
the RLC header and the RLC data field as shown in Fig. 6. Thus, for throughput calculations, we
have later to take into account the respective overhead.
VI. RESULTS
In order to verify our new modeling concept for packet erasure channels we applied it to the
GSM GPRS system. We will consider the packet transmission at the RLC layer. A RLC PDU
is declared as lost (erasure), when the block check sequence indicates an residual error in the
received packet. Since there exits no analytical means of describing the packet erasure process at

190
this level, the parameterization of the MEC depends on empirical data that can be gathered either
by measurements or simulations of the GPRS system. Thus, the parameterization involves three
steps. Firstly, we generate a sufficiently long sequence of erasure indicator values (such that the
assumption of ergodicity is valid) by simulation of the radio link. Then, we choose the memory
order for the Markov erasure process and set up the state transition diagram. Finally, by analysis
of the generated erasure indicator sequence we approximate the transition probabilities of the MEC
according to section III. It is important to note that this approach requires a very long sequence
of erasure indicator values, since it is impossible to determine all transition probabilities for an
arbitrary memory order from a finite set of empirical data. Furthermore, for very small transition
probabilities, the statistical uncertainty is very high due to the few events that can actually be
found in the simulated sample sequence. Note that increasing the memory order results only in a
better approximation of the model, if the data set is sufficiently long.
For our simulation of the radio link, we have chosen the following scenario. The fading model for the
channel is based on COST TU03, i.e. we consider a typical urban environment with a pedestrian at
a speed of 3 km/h. Frequency hopping after each TDMA frame is enabled and assumed to be ideal
and all eight time slots are occupied by a single GPRS user. Further, we assume an interference
limited system, where the received carrier signal is only disturbed by one co-channel interferer in a
distant cell. The state of the mobile radio channel can therefore be denoted by the actual carrier-
to-interference ratio (C/I) at the receiver.
We will verify the validity of our model by means of erasure and erasure free run distributions.
An erasure run of length 
is a sequence of 
successive erasures 
which
is delimited by both 
and 
i.e. the event 
Our statistic of interest is the
so-called erasure run distribution (ERD), which is the probability that an erasure run is longer
than 
packets. According to the same concept an erasure-free run of length 
is defined as a
sequence of 
successive non-erasures 
which is delimited by both
and 
i.e. the event 
The corresponding statistic of interest is the so-called
erasure-free run distribution EFRD. which is the probability that an erasure-free run is longer than
packets. We started with a MEC of memory oder 2, but found out that it is by far not sufficient
to approximate the GPRS packet erasure channel. By stepwise increasing the memory order of the

191
MEC we observed that we get a piecewise linear function (on a logarithmic scale) that successively
allows the approximation of one more point of the empirical run distributions. As Fig. 7 shows, a
MEC of order 9 yields a quite good approximation for both EFRD and ERD.
Once the MEC model has been parameterized, it can easily be applied to the network simulator for
further examinations of the link behaviour. In our case, we were mainly interested in optimizing
the system in terms of throughput maximization and in analyzing the end-to-end performance of
TCP/IP connections in a GPRS environment. Especially interesting is the throughput at the LLC
level. In GRPS, a LLC PDU is segmented into 
RLC PDU of fixed length. Let us assume
the system is operating without the optional link level ARQ. Then, a LLC frame is lost, if at least
one of the n RLC PDUs has been corrupted while being transmitted. Fig. 8 shows the blockwise
throughput at the LLC layer in dependence on n for a moderate channel with a C/I of 10 dB and
for all applicable coding schemes. The blockwise throughput refers to the payload of a LLC PDU,
i.e. LLC and RLC protocol overheads are taken into account. Again, it is presumed that a single
user can use all eight time slots. It can be seen that a proper choice of both n and the coding
scheme is required to achieve an optimum throughput. A false strategy may lead to a throughput
of less than 10kbit/s compared to the maximum achievable of about 70kbit/s at this operating
point. This clearly shows that such studies are crucial for a system optimization. At this point it
therefore cannot be too strongly emphasized that they would be impossible without an accurate
low-complexity abstract model of the wireless link like the proposed MEC model.

192
VII.
CONCLUSIONS
We have presented a new probabilistic model based on Markov chains for wireless packet era-
sure channels, that approximates the erasure characteristics of the underlying packet transmission
system with a high level of accuracy. Besides accuracy, the proposed MEC model limits the com-
plexity to a minimum, such that it is easy and efficient to implement and in addition mathematically
tractable. It has been detailed how the MEC model can be implemented in network simulation
environments. The validity of our approach has been verified by means of the GSM GPRS system.
As our simulation results have shown, the proposed MEC model has proved to be an adequate
model for wireless packet erasure channels according to GPRS. It can surely be expected that these
results do also hold for other kind of wireless packet erasure channels.
REFERENCES
[1] K. Fall and K. Varadhan, ns Notes and Documentation, The VINT Project, UC Berkeley, July 1999
[2] L. Kanal and A. R. K. Sastry, “Models for channels with memory and their applications to error control”, Proc.
IEEE vol. 66, no. 7, pp. 724–744, July 1978
[3] G. Liebl, Modeling, Theoretical Analysis, and Coding for Wireless Packet Erasure Channels, Diploma Thesis,
Inst. for Communications Engineering, Munich University of Technology, 1999
[4] J. Cai and D.J. Goodman, “General Packet Radio Service in GSM”, IEEE Communications Magazine vol. 35,
no. 10, pp. 122-131, October 1999
[5] C. Bettstetter, H.J. Vogel and J. Eberspaecher, “GSM Phase 2+ - General Packet Radio Service GPRS: Archi-
tecture, Protocols, and Air Interface”, IEEE Communications Surveys vol. 2, no. 3, 1999

Reducing handover probability through mobile positioning
Stamatis Kourtis 
Dr. Rahim Tafazolli
Motorola 
University of Surrey
69 Buckingham street, Aylesbury, 
CCSR, University of Surrey, Guidford,
HP20 2NF, UK 
GU2 5XH, UK
Stamatis.Kourtis@motorola.com 
R.Tafazzolli@ee.surrey.ac.uk
Abstract—Because of the two-dimensional layout of cellular networks unnecessary handovers (not
necessarily Ping-Pong handovers) could occur. Fact that has not been taken into consideration so far,
since handover algorithms found in the literature consider the simplified one-dimensional case of two
base stations. This paper examines in detail how these unnecessary handovers occur and proposes an
algorithm in order to combat them, which takes advantage of the future mobile positioning capabilities of
cellular networks. Simulation results are presented depicting the algorithm’s capacity in decreasing the
number of the performed handovers during an active call. In addition, the algorithm is largely unaffected
by the mobility behavior of the mobile stations and only at high speeds its performance seems to
substantially deteriorate.
Introduction
Provided that shadow fading was not existent, a mobile station (MS) travelling away from its serving base
station (BS) towards a neighboring BS, would perform only one handover. This handover would be
initiated at the instant when the received signal strength of  the neighboring BS would become stronger
than that of the serving BS. However, the reality of the shadow fading affects significantly this very
idealistic situation.
The shadow fading causes a long-term variation of the received signal strength, fact that results in the
initiation of several handovers, commonly known as “Ping-Pong” handovers, instead of just one. To

194
combat this phenomenon, numerous handover algorithms have been proposed in the literature [2]-[4]. All
of them consider the simplified case of two BSs and one MS travelling from one to the other, and they
introduce various techniques like averaging windows and handover margins in order to minimize the
number of the unnecessary handovers.
More or less these proposals succeed in their goal for the case of two BSs. Nevertheless, in real cellular
systems the handover initiation mechanism is dictated by a large number of BSs typically equal to the
number of BSs included in the neighboring list of the serving BS. Figure 1 illustrates a possible handover
initiation scenario where an MS located at point A near the cell edge, is heading towards 
  and is
currently being served by 
Furthermore, it is assumed chat at point A all the BSs can provide adequate
received signal strength with the strongest provided by 
and consequently, a handover will be
executed to 
The MS will continue towards 
and at point B it is probable that the received signal
of 
 will be weaker than that of  
or 
and a new handover will be initiated, where the MS could
be served by either 
or 
In the case that the MS would be served by 
then it is possible that
another handover to 
will be requested later. In conclusion, the existence of multiple BSs could result
in the execution of unnecessary handovers (not necessarily Ping-Pong handovers).
The rest of the paper is organized as follows. Initially, a detailed handover analysis is given which derives
formulas regarding the probability of the unnecessary handover. Then, these formulas are used to derive
the algorithm, which aims at minimizing the unnecessary handovers. The system model, which will help
to evaluate the performance of the proposed algorithm, is described and simulation results based on this
model are presented and discussed. Finally, some important conclusions are drawn.

195
Handover analysis
Part of the handover analysis presented here can be found in [6] but it is repeated here for the sake of
completeness. The analysis is formulated for the general case of an MS located at the point M travelling
with a velocity 
amid a number of BSs which are located at points 
respectively, and its serving BS is
at the point 
The MS measures the signal strength of the serving and N neighboring cells, where N is
equal to the size of the neighboring cell list, at constant time intervals (measurement period). Hence, at
the time instant 
the MS receives the signal levels:
where 
and 
are the parameters of the mean signal strength for the 
  link,
dist(M(m),
is the distance between the points M(m) and  
Furthermore, 
is the shadowing
factor, where 
and 
are jointly normally distributed, each with zero mean and with
autocorrelation 
where 
is the norm of the MS velocity and d is the decorrelation
length. Consequently, 
is normally distributed with mean 
and variance 
where
is the standard deviation of the shadow fading [1].
Assuming that during the time interval 
the velocity 
remains constant, then the next position of the
MS is given by:
Let the MS velocity be equal to 
at the instant 
Based on a widely used mobility model [1],
given a probability pvelocity for a velocity update, the MS velocity changes to 
whenever the MS has
managed to travel in the meantime a distance greater than a predetermined update distance d’:
The serving BS gathers K measurement reports and produces an average estimate of the received signal
strength of the various BSs. These estimates are used to calculate the  PBGT0,n decision variables:
Assuming that for the mean signal strength related parameters 
and 
then Eq. 4 can be written
as:

196
The sum 
is normally distributed with mean zero and variance equal to:
A handover is initiated if the relation
where 
 is the handover margin for a handover from the serving cell to the 
 neighbouring cell, is
satisfied for one neighboring BS. Therefore, the probability for a handover at the decision instance mK
equals:
where 
and erfc(x) is the complementary error function.
Assuming that at the time instant 0 an MS emerges and starts to be served by 
 (therefore
then the probability that a handover would be performed at the time instant 
  given
that the MS is continuously served by 
until then, is given by:
Let the cell residence time of a newly emerged MS be 
 (cell residence time of an MS from the moment
a call has been started until the first handover according to [5], [6]). Evidently, if 
 the previous
formula corresponds to the probability density function (pdf) 
(t) of
Typically, the duration of a voice call follows a negative exponential distribution i.e., the probability that
a call will end in time duration t is:
It can be easily seen [5] that the probability for a newly emerged MS to perform a handover during the
call is equal to:

197
Additionally, assuming that at the time instant 
an MS (already in a call process and served by the
is handed over to the 
which is located at the point 
 then Eq. 9 could be rewritten as:
where 
and 
(mK) is derived by Eq. 8 for
If the cell residence time of a handed over MS is 
(cell residence time between subsequent handovers),
then for 
the previous formula gives the pdf
(t) of
Lastly, the probability for a handed over MS to perform an additional handover during the call is equal to:
Evaluation of the unnecessary handover probability
For the calculation of the unnecessary handover probability, we leave the general case and focus on the
simplified network scenario depicted in Figure 1. An MS emerges at the position of 
(and
consequently served by 
moves right towards 
and at the time instant 
 a handover is initiated.
At that point, the MS will be handed over to either 
 or 
 instead of  
  if the received signal
strength of either of these BSs is greater than that of 
Following the same steps as in the handover
analysis section, it can be seen that the probability for the MS not to be handed over to 
is given by:
The overall probability that the MS would be handed over to an incorrect BS 
or 
 whilst being
active, is simply:

198
Minimizing the unnecessary handovers
Hereinafter it is assumed that the network has the ability to determine the exact position, speed and
direction of an MS whenever a handover occurs [7]. Continuing the analysis on the simplified network
scenario, it is assumed that actually at the time instant 
 a handover is initiated and therefore, the MS
will handed over to either 
or 
Furthermore, it is assumed that all of the potentially serving
BSs could provide an adequate signal strength (received signal power greater than the receiver
sensitivity). At this point, it is interesting to calculate the probability of a subsequent handover given that
the MS would be handed over to
(k = 1, 2, 3).
Under the hypothesis that until the end of the call the MS will not change its speed and direction, it is
possible to compute the
(mK), where 
 for all the BSs, and consequently from Eq. 12
the 
(t). Finally, from Eq. 13 the probability 
  of a subsequent handover after the MS has been
handed over to  
 can be calculated. Among the possible BSs, a handover towards the BS which
corresponds to
ensures that the probability for a future handover is minimum.
Interestingly, regarding the time until the end of the call (residual call time) it is worth noting here that
because of the memoryless property of the exponential distribution, it is independent of the time elapsed
since the start of the call. As a result, the probability distribution of the residual call time given the time
elapsed since the start of the call is the same as the original call duration
System model (I) – simplified network
For the simplified network of Figure 1 a cell radius of 1.5 km is assumed, resulting in a BSO – BS2 of
The network is deployed in urban or suburban areas which is characterized by macro-cellular
propagation, the path loss model of which is given by [1]:

199
where the distance d is in km. Also, the shadow fading standard deviation is set to 10 dB, the
decorrelation length equals 20 m. and an averaging window of 15 s is used. The handover margin is set to
0 dB. Lastly, voice calls have a duration which is exponentially distributed with mean equal to 120 s.
The probability of incorrect handover (MS is not handed over to 
 as given by Eq. 14 against the MS
speed is drawn in Figure 2. Interestingly, for MS speeds from 10 km/h up to 50 km/h there is a probability
for an incorrect handover greater than 6%, with a maximum of 10% at a velocity of about 25 km/h.
Figure 3 plots the min 
against all the possible handover decision instances for a MS with a
velocity of 50 km/h (apparently 
 As it was expected, by the time it is likely that a handover
will occur (peak of 
(t)), handover decisions based on Eq. 16 are capable of identifying the BS 
 in
this case), which is more probable to serve the BS until the very end of the ongoing call.

200
System model (II)
In order to test the ability of the algorithm in minimizing the number of performed handovers, two 17x17-
cell networks with a cell radius of 1.5 km and 0.5 km respectively are considered, which are deployed in
the same environment with the previously considered 4-cell network.
MS are randomly generated and distributed uniformly throughout the network. Again the mean call
duration is 120 s. According to the MS velocity two mobility patterns are considered: pedestrian (0 km/h
to 5 km/h) and vehicular (10 km/h to 200 km/h). More specifically, a pedestrian-type MS changes rapidly
its direction (±180°) at the position update, whereas a vehicular-type MS changes its direction to a
relative maximum of ±45°. In both cases, an MS has a 20% likelihood to change its direction at every
position update and a position update point is declared whenever an MS travels a distance equal to the
decorrelation length from the last position update [1]. Also, it is assumed that there is no error in the
determination of the MS position and mobility characteristics.
Lastly, the receiver sensitivity level is set to –100 dBm.
Simulation results
Simulations were run in order to test the relative performance characteristics of two handover algorithms:
Strongest received signal (SRS) and minimization of unnecessary handovers (MUH, Eq. 16).
Given that the fundamental assumption of the MUH algorithm is of an MS which does not change its
speed and direction until the end of the call, it is imperative to test the effectiveness of the MUH
algorithm under this assumption and to compare the results against a typically behaved MS. Table 1
quotes the expected number of handovers during a voice call, when the MS speed is 50 km/h.
Interestingly, the assumption regarding the invariability of the MS direction does not impact at all the
MUH algorithm. The location and mobility characteristics of the MS are used indirectly in the MUH
algorithm to calculate received signal strengths, since essentially this algorithm compares expected signal
strengths for a number of future positions of the MS. The application of shadow fading results in
decreasing the dependence of the signal strength calculation on the relative position of the MS with

201
respect the adjacent BSs. Consequently, the MUH algorithm tolerates effectively the mobility nature of
the MSs. As expected, the same is also observed for the SRS algorithm.
Performance curves of the RSR and the MUH algorithms are drawn in Figure 4 for a range of MS speeds.
From 0 km/h to 5 km/h an MS exhibits pedestrian mobility pattern behavior, whereas from 10 km/h up to
200 km/h it exhibits vehicular mobility pattern behavior. The cell radius is 1.5 km.
The results show that for a significant range of MS velocities, the handover algorithms do not actually
distinguish between the two mobility patterns. In essence, this indicates that all the handover algorithms
are quite tolerable against the mobility behaviors of the various MS.
At low pedestrian MS speeds (below 0.5 km/h), the RSR algorithm exhibits a substantial increase in the
number of performed handovers. This is due to the fact that at these speeds consecutive signal strength
measurements are highly correlated, therefore there is an increased likelihood for additional handovers. In
contrast, the MUH algorithm takes into consideration this correlation and manages to reach its best
performance at these low speeds.

202
At high vehicular MS speeds, all the algorithms perform more handovers. The substantial degradation of
the MUH performance is because of the fact that for a 200 km/h MS the mean traveled distance is about
6.6 km or almost 4.5 times the cell radius. Thus, after a few position updates BSs, which are supposed to
be in the MS’s locality, could be resulted in being far away from the MS and vice versa. Conversely, the
RSR algorithm appears to have a more graceful degradation of its performance. Nevertheless, the RSR
algorithm again performs a greater number of handovers per call than the MUH algorithm. Lastly, if  a
larger cell radius were chosen, then the performance degradation of all the algorithms at the high MS
speeds may appear smaller or even in some cases, it may not appear at all.
Essentially, the presented results of the MUH algorithm are optimal, since no errors are considered for the
determination of the MS position, speed and direction and the impact of such errors on its performance
worth investigation. Nonetheless, because of the depicted results in Figure 4, it is anticipated that the
algorithm should be largely unaffected from errors of the MS speed, since for a significant range of
speeds the algorithm gives virtually the same results. On the other hand, errors in the determination of the
position and the direction are quite difficult to understand how they degrade the performance of the
algorithm and detailed evaluation is required.
Conclusions
This paper examined the unnecessary handovers that could occur because of the two-dimensional layout
of a cellular network, fact that has not been taken into consideration so far, since handover algorithms
found in the literature consider the simplified one-dimensional case of two BSs. A detailed analysis of  the
phenomenon resulted in an algorithm (minimization of unnecessary handovers or MUH), which seems to
combat efficiently the problem of the unnecessary handovers. In short, this algorithm takes advantage of
the future ability of the cellular networks to know the position of the MSs, and makes the assumption that
from the handover decision instant and onwards until the end of the call the MS will not change its speed
and direction. Upon a handover request, an MS is handed over to the BS which gives the minimum
probability of a subsequent handover.
In comparison to the commonly used received signal strength (RSR) algorithm, the MUH algorithm
reduces the number of performed handovers by 20% and 50% when the cell radius is 0.5 km and 1.5 km
respectively. Moreover, its fundamental assumption does not effect whatsoever its capability in reducing
the handover probability. Lastly, the algorithm is not affected by the particular mobility characteristics of

203
the MS and its performance deteriorates only when the MS speed is quite high (with regards to the cell
radius).
Unfortunately, such an algorithm is difficult to implement since several parameters have to be estimated
beforehand including the path loss exponent, the shadow fading standard deviation and the decorrelation
length. As this algorithm would reside on every BS, and generally in real systems the various BSs are
located in different environments, different implementations (and hence parameter estimations) of the
algorithm have to be done. Consequently, in theory the MUH algorithm may give very good results,
however in practice its implementation has important difficulties.
Because of these limitations, two other algorithms are presently evaluated which overcome the
implementation difficulties of the MUH algorithm and perform equally well. This work is currently being
done and it will be presented in a future paper.
References
[1] 
ETSI TR 101 112, “Universal Mobile Telecommunications System (UMTS); Selection procedures
for the choice of radio transmission technologies of the UMTS”, V3.2.0, April 1998
[2]
Zonoozi M., Dassanayake P., “Handover delay and hysteresis margin in microcells and
macrocells”, 
 IEEE International Symposium on Personal, Indoor and Mobile Radio
Communications, Vol. 2, pp. 396-400, Helsinki, September 1997
[3]
Senadji B., Boashash B., “Estimation of the hysteresis value for handover decision algorithms
using Bayes criterion”, 1997 International Conference on Information, Communication and Signal
Processing, Vol. 3, pp 1771-1775, Singapore, September 1997
[4]
Benvenuto N., Santucci F., “A least squares path-loss estimation approach to handover algorithms”,
IEEE Transactions on Vehicular Technology, Vol. 48, No. 2, pp. 437-447, March 1999
[5]
Zonoozi M., Dassanayake P., “User mobility modeling and characterisation of mobility patterns”,
IEEE Journal on Selected Areas in Communications, Vol. 15, No. 7, pp. 1239-1252. September
1997
[6] 
(to be presented) Kourtis S., Tafazolli R., “Evaluation of handover-related statistics and the
applicability of mobility modelling in their prediction”, 
IEEE International Symposium on
Personal, Indoor and Mobile Radio Communication, London, September 2000
[7]
Reed J.H., Rappaport T.S., Woemer B.D., “Position location using wireless communications on
highways of the future”. IEEE Communications Magazine, Vol. 34, No. 10, pp. 33-41, October
1996

This page intentionally left blank

Multi-user Detection Using the Iteration Algorithm in Fast-Fading Channels
Sun-Jin Yeom, Yong -Wan Park
Department of Information & Communication Engineering, Yeungnam University
#214-1, Daedong, Kyung-San City, Kyungpook, Korea. 712-749
TEL: +82-53-810-3523, 810-1539 FAX : +82-53-814-5713, 812-8583
E-Mail:  ywpark@ynucc.yeungnam.ac.kr
Abstract
In this paper, we introduce a modified interference cancellation scheme for multi-user
detection in DS/CDMA. Among ICs(Interference Cancellers), PIC(Parallel Interference
Canceller) requires the more stages to have the better BER(Bit Error Rate), and SIC(Successive
Interference Canceller) faces the problems of power reordering and large delays. Most of all, the
adaptive detector achieves the good performance using the adaptive filter conducted iteration
algorithm. But it requires many iterations for convergence. To resolve those problems, we
propose a new hybrid interference cancellation scheme combining nonlinear detector and the
adaptive filter using CMA( Constant Modulus Algorithm). The proposed interference canceller
has improved the performance through the received signal applied ranking scheme is fed into the
adaptive filter. That is, its structure provides the same BER performance even though it iterates
the smaller than the conventional AD(adaptive detector) because the signal removed MAI is fed
into the adaptive filter. The proposed IC structure does extract the following characteristics. ; (1)
detector having adaptive filter requires less complexity than nonlinear detector.
I. 
INTRODUCTION
In the third generation system called IMT-2000, direct-sequence code division multiple
access(DS/CDMA) has been selected as the vital multiple access technique. To access users
simultaneously and independently, it is applied to the signature waveforms having orthogonality
it has the same BER performance only using smaller iterations than the conventional AD, (2) the

206
[1]. If the signature waveforms were perfectly orthogonal, a bank of single-user detectors would
achieve optimum demodulation and detection. But the wireless communication systems are
severely affected by MAI(Multiple Access Interference) and near-far problem where a high-
powered signal creates significant MAI for low-powered signals because in practice the system
design limitations is destroyed the orthogonality of assigned signatures; system complexity,
bandwidth limitation and others. To eliminate this problems, several techniques suppressed
interferences have been used in communication system, or investigated or proposed. Most of all,
the central mechanism for resource allocation and interference management is power control. It
is used basically as a mechanism to keep the received powers of users equal so that the nearby
users do not dominate over the far away users. But the power control can’t perfectly remove the
MAI because of the characteristics of DS/CDMA, and this adds complexity to the system, and
inaccuracies in power control have a detrimental impact on performance.
The multiuser detection schemes have the more fundamental potential of significantly
raising system capacity by removed MAI [2]~[4]. Among them, PIC and SIC appear to be
attractive for different reasons. PIC estimates and subtracts out all of the MAI for each user in
parallel [2]. And to have the better BER(Bit Error Rate) performance, it requires the more
stages. In contrast, SIC takes a serial approach to subtracting out the MAI [5]. By those
reasons, PIC requires more hardware, and SIC faces the problems of power reordering and large
delays. The adaptive detector may solve the assumed knowledge and complexity problems of
nonlinear detectors simultaneously [7],[8]. It realizes a filter that both is matched to the desired
user’s channel-affected signal and removes interference from other users. And it achieves the
good performance using the adaptive filter conducted iteration algorithm. But it requires many
iterations for convergence [9],[10].
In this paper, we propose a new hybrid interference cancellation combining nonlinear
detector(SIC & PIC) and the adaptive filter using CMA(Constant Modulus Algorithm) [11]. The
proposed interference canceller has improved the performance through the advanced form of
received signal applied ranking scheme is fed into the adaptive detector [12]. That is, it provides
the same BER performance even though it iterates the smaller than the conventional AD because
the signal removed MAI is fed into the adaptive filter. The paper is organized as follows : In
section II, we describe a simple DS/CDMA system. And in section III, we propose the modeling
of the modified interference canceller and its characteristics. Section IV compares the
performances between the proposed IC and the others. The conclusion is included in section V.

207
II. SYSTEM MODELING
We considered the reverse link of a asynchronous DS/CDMA system that K active users
transmit the modulated band-pass signals which are spread by the each pseudo noise
codes(PG=31). The modulated signals are transmitted over the channel which experience MAI,
Rayleigh fading(Jake model) and Additive White Gaussian Noise(AWGN). The channel model is
shown in Fig. 1. If the DS/CDMA system applied to the perfect power control, several effects
affected system capacity would be significantly reduced. But in recent because power control
technique isn’t perfect, it is assumed that power control can perfectly compensate about
variations of the received signal due to large scale fading, but the received signal is affected by
the effect of the fast Rayleigh fading. The received signal can be described as
where I is the total number of transmitted symbols, K is the total number of active users, L is the
total number of multipaths, P is transmitted chip power, b is transmitted binary information {+1,-
1}, n(t) is assumed AWGN to be zero mean and have variance of 
And S(t) is as follows
where s(t) is a spreading code of each user, T is the symbol interval, u(t) is a unit square pulse
shape spanning the interval 
 and c is a time delay and channel coefficient due to the
Rayleigh fading.

208
III. THE PROPOSED SYSTEM
In this paper, we propose a modified interference cancellation combining nonlinear detector
and the adaptive filter using CMA(Constant Modulus Algorithm). The proposed interference
canceller has improved the performance rather than the conventional AD through the received
signal applied ranking scheme is fed into the adaptive filter as shown in Fig. 2. First of all, the
system designer can randomly assign to user numbers composed each group. However, to get the
better performance, the system may require the assignment that followed the distribution of
signal strength because the ranking scheme is effectively applied. But in this paper we assumed
that the same user numbers(U = total users[K] / total groups[G]) is assigned in each group to the
simple application [6].
The key of the proposed system is “generation of the advanced input signal” in Fig. 2. To
improve the received signal, the system can be proceeded with the ranking scheme before the
process of adaptive filter. That is, each user signal is correlated with the received signal in a
matched filter. And total users based upon the strength is composed the each group. This
procedure is shown in Fig. 3. The user signals of each group are then mapped by HD(Hard
Decision) method and regenerated to generate the input signal of the adaptive filter. Each group
is fed into the equation (3) except for 1st group

209
where g is a specific group among total groups(G), U is users composed each group, f is the
mapped
signal. The correlated signal is given by:
where MAI is interference which is affected by both signals of different users and self-signal of
the different paths, N(t) is the correlated noise. The mapped signal is as follows
According to the equation (3)~(5), total users are grouped using the ranking scheme. To
generate the input signal of each group in the adaptive filter bank, the regeneration signal of f is
used. That is, the input signal subtracts the regeneration signals of the groups excluded self-
group from the total received signal. And it can be described as

210
After the advanced signal 
generates, it is fed into the each adaptive filter bank.
Because the blind algorithm doesn’t need the use of initial training and need only the signature
waveform of the desired user is known [10], we selected the blind algorithm in the proposed
system. The adaptive filter using CMA(Constant Modulus Algorithm) is shown in Fig. 4.
We define the cost function based on CM(Constant Modulus) criterion as
where the index k designates the k-th bit interval and 
is a positive constant. Invoking a
gradient search algorithm on J CM , we can obtain the weight vector update recursion as follows;
the detected signal of each adaptive filter is as follows;
The characteristics of the proposed IC are as follows; As the adaptive filter bank makes use
of the advanced input signal 
the proposed IC may has much better BER performance than
the conventional AD by fed into r(t). In particular the number of iterations is reduced rather than
the conventional AD on condition that they require the same BER performance because of the
advanced input signal to reduce MAI. In aspect of complexity, the drawback of nonlinear multi-
user detector is much complexity to do the cancellation.

211
But the proposed IC is composed to the simple hardware to implement the adaptive filter.
Furthermore, it can operate in a slow power control. That is to say, the fast power control is not
much needed for the implementation.
III. SIMULATION
In this section, we analyze the performance between the proposed IC and the other ICs. The
simulation environment is as follows. In the reverse link, the base station suppresses
interferences through the slow power control, which power of the active users is distributed from
0dB to 30dB. And we consider the synchronous system which the number of maximum users is
K = 28 and the processing gain is 25 
5
 –1. The channel model is assumed AWGN and the
Rayleigh fading that the Doppler frequency is 176Hz which corresponds to a mobile speed of
100km/h at 1.9GHz. And in the initial stage of the proposed IC, the number of groups is G=2 and
G=4 with the same number of users within each group.
First of all, we prove that the detector having the advanced signal 
has the better BER
performance than the detector having the received signal r(t). In Fig. 5, to confirm the
performance of only advanced signal we described the BER performance versus the number of
active users and the SNR between the proposed IC and the conventional detector on condition
that the number of iterations is 0. In (a), if the total active users are 20, the BER of the
conventional AD is 1.726×10-1, that of the proposed IC with G=2 is 1.359×10-1, and with
G=4 is 1.161×10-1 In Fig. 6, we described the BER performance versus the number of active
users and the SNR between the proposed IC and the other representative ADs, which are the
conventional blind detector(blind-LMS, CMA). In (a), if the total active users are 20 and the
number of iterations is 400, the BER of the blind-LMS detector is 1.706×10-1, that of the CMA
detector is 1.560×10-1, that of the proposed IC with G=2 is 1.036×10-1, and with G=4 is
8.74×10-2. The proposed IC has the better BER performance than the other ADs.
In Fig 7, MSE convergence profiles are shown for a system with spreading ratio of 31, four
active transmitters of unequal power, and 6dB. Because of the advanced signal 
removed
the MAI, the proposed IC has the faster convergence than the other ADs as the number of groups
is increased, and .the smaller vibration about iterations.

212

213
As we analyzed the above results, the proposed IC can be the better BER performance than
the conventional AD because of the application of cancellation scheme. And we can make certain
that the BER can be better as the number of groups is increased because the more interfered
signals can be cancelled as the system is designed for many groups.

214
IV. CONCLUSION
To do the fast convergence of the conventional adaptive detector, we evaluated the CMA
detector fed into the advanced signal 
in this paper. In the same simulation condition, the
BER performance of ICs was simulated to compare with each other. Through the pre-generated
signal of the group form, the adaptive detector of the proposed IC is fed into the input signal that
subtracts the regeneration signals of the groups excluded self-group from the received signal.
Consequently this procedure is efficient for the pre-reduction of  MAI before the adaptive filter is
processed. The characteristics of the proposed IC are as follows. Because MAI is reduced before
the adaptive filter, the proposed IC has the faster convergence than the other ADs. And The
number of iterations is reduced rather than the conventional AD on condition that they require
the same BER performance because of the advanced input signal to reduce MAI. And the
proposed IC is composed to the simple hardware to implement the adaptive filter.
REFERENCES
[1] S. G. Glisic, P. A. Leppanen, Code Division Multiple Access Communications, Kluwer Acade-
mic Publishers, 1995
[2] S. Moshavi, “Multi-User Detection for DS-CDMA Communications”, IEEE Communication
Magazine, Oct. 1996, pp. 124-136
[3] R. Lupas, S. Verdu, “Linear Multiuser Detectors for Synchronous Code-Division Multiple-
Access Channels”, IEEE Transaction on Information Theory, Vol. 35, No. 1, Jan. 1989,
pp.123-136
[4] S. Verdu, Multiuser Detection, CAMBRIDGE University Press, 1998
[5] P. Patel, J. Holtzman, “Analysis of a Simple Successive Interference Cancellation Scheme in
a DS/CDMA System”, IEEE Journal on Selected Areas in Communications, Vol. 12, No. 5,
June. 1994, pp.796-807
[6] S. Sun, L. K. Rasmussen, H. Sugimoto, T. J. Lim, “A Hybrid Interference Canceller in
CDMA”, IEEE fifth International Symposium on Spread Spectrum 
Technology &
Application., Vol. 1, Sep. 1998, pp. 150-154
[7] Simon Haykin, Adaptive Filter Theroy, Prentice Hall, 1996

215
[8] S. Verdu, Adaptive Multiuser Detection, Kluwer Academic Publishers, 1995
[9] G. Woodward, B. S. Vucetic, “Adaptive Detection for DS-CDMA”, Proceedings of  The IEEE,
Vol. 86, No. 7, July 1998, pp.1413-1434
[10] M. Honig, U. Madhow, S. Verdu, “Blind Adaptive Multiuser Detection”, IEEE Transactions
on Information Theory, Vol.41, No.4, July 1995, pp. 994-960
[11] W. Lee, B. R. Vojcic, “Constant Modulus Algorithm for Blind Multiuser Detection”, In
Proceeding of  the ISSSTA ’96, Germany, 1996, pp. 1262-1266
[12] Sunjin Yeom, Panjong Park, Yongwan Park, “Evaluation of Parallel Interference
Cancellation with the Advanced First-Stage in Rayleigh-Fading Channels”, VTC 2000, to
appear.

This page intentionally left blank

FPGA DSP for Wireless Communication
Chris Dick
Xilinx Inc., 2100 Logic Drive, San Jose, CA 95124, USA
chris.dick@xilinx.com
fred harris
College of Engineering, San Diego State University, San Diego
fred.harris@sdsu.edu
1 Introduction
Software defined radios (SDR) are highly configurable hardware platforms that provide the technology
for realizing the rapidly expanding third (and future) generation digital wireless communication
infrastructure. Figure 1 is a generic model of the signal processing subsystem in a SDR. As shown in the
figure, many sophisticated signal processing tasks are performed in a SDR, including advanced
compression algorithms, power control, channel estimation, equalization, forward error control (Viterbi,
Reed-Solomon and Turbo coding/decoding) and protocol management.
Digital filters are employed in a number of ways in DSP based transmitters and receivers. Polyphase
interpolators are used in the transmitter for upsampling a baseband signal to the digital IF (intermediate
frequency), to ensure compliance with the appropriate regulatory bodies spectral requirements, and to
match the signal's bandwidth to that of the channel. In the receiver section of the system multi-stage
polyphase filters are frequently used in a digital down converter (DDC) to perform channelization and
decimation. Complex filters are also required for estimating channel statistics and performing channel

218
equalization to compensate for multipath effects, and to correct for phase and amplitude distortion
introduced during transmission. Re-sampling filters are also an integral component in all-digital symbol
synchronization loops. Finite impulse response (FIR) differentiators are also commonly used during the
demodulation process, for example, in systems that use frequency modulated waveforms for channel
access.
While there is a plethora of silicon alternatives available for implementing the various functions in a
SDR, field programmable gate arrays (FPGAs) are an attractive option for many of these tasks for reasons
of performance, power consumption and configurability.
This paper provides a brief FPGA architecture review and then describes several signal processing
functions implemented using FPGA technology. Single-rate and multi-rate FPGA filter mechanizations
are presented. A QPSK carrier recovery circuit is described and its FPGA implementation is described.
2 FPGA Architecture
There are a rich range of FPGAs provided by many semiconductor vendors including Xilinx, Altera,
Atmel, AT&T and several others. The architectural approaches are as diverse as there are manufacturers,
but some generalizations can be made. Most of the devices are basically organized as an array of logic
elements and programmable routing resources used to provide the connectivity between the logic
elements, FPGA I/O pins and other resources such as on-chip memory. The structure and complexity of
the logic elements, as well as the organization and functionality supported by the interconnection
hierarchy, distinguish the devices from each other. Other device features such as block memory and delay
locked loop technology are also significant factors that influence the complexity and performance of an
algorithm that is implemented using FPGAs.
A logic element usually consists of 1 or more RAM (random access memory) n-input look-up tables,
where n is between 3 and 6, and 1 to several flip-flops. There may also be additional hardware support in
each element to enable high-speed arithmetic operations.
As a specific example, consider the Xilinx 
series of FPGAs [2]. The logic elements, called
slices, essentially consist of two 4-input look-up tables (LUTs), two flip-flops, several multiplexers and
some additional silicon support that allows the efficient implementation of carry-chains for building high-
speed adders, subtracters and shift registers. Two slices form a configurable logic block (CLB). The CLB
is the basic tile that is used to build the logic matrix. Some FPGAs supply on-chip block RAM. Figure 2
shows the CLB matrix that defines a Xilinx Virtex FPGA. Current generation Virtex silicon provides a
family of devices offering 768 to 32,448 logic slices, and from 8 to 280 variable form factor true dual-port
block memories.
Xilinx XC4000 and Virtex [2] devices also allow the designer to use the logic element LUTs as memory -
either ROM or RAM. Constructing memory with this distributed memory approach can yield access
bandwidths in the many tens of gigabytes per second range.
Typical clock frequencies for current generation devices are in the multiple tens of mega-Hertz (100 to
200+) range.
3 Digital Filters
The FIR filter is one of the basic building blocks common to nearly all digital signal processing systems.
In demanding applications that require a large filter order, high sample rate, or combination of both these
parameters, the arithmetic workload required can be quite substantial. For an O(N-l) filter, N

219
multiplications and N-1 additions are required to compute a single output sample. High-performance real-
time filter platforms are of great interest to the signal processing and digital communications community.
A common option for implementing real-time filters is a software programmable signal processing chip.
A higher performance, but less flexible alternative is an ASIC solution. A more recent design option is to
exploit the parallelism that an FPGA-based hardware system can provide.
3.1
Implementing Digital Filters Using FPGAs
There are numerous options for implementing FIR filters in an FPGA. The most obvious approach, and as
may be expected this is not always the most optimal solution, is to model the technique used in an ASIC
or instruction-set based DSP (ISDSP). This is to employ a scheduled multiply-accumulate (MAC) unit.
Since many signal processing engineers are familiar with these semiconductor technologies for realizing
filters, we will use this as the starting-point for examining FPGA realizations of FIR filters.
3.2 
The MAC Based Approach
An inner-product computation may be partitioned over 1 or several MAC units. And this is a common
approach used by current generation signal processors - both ASICs and ISDSPs. This same method can
obviously be used in an FPGA implementation. But in the FPGA environment the designer has virtually
complete control of the silicon and can decide how much of this resource is allocated to the inner-product
engine. As a reference point, a 16-by-16 MAC (32-bit precision result) occupies 174 logic slices, or 5.6%
of an FPGA like the XCV300 [2]. This unit will support a clock frequency of 162 MHz in a –6 speed
grade. This is a medium speed grade component in the context of FPGAs that are currently available: -8
being the fastest. One such functional unit provides good performance, but of course the flexible and
highly parallel nature of FPGAs allow for the construction of highly concurrent systems, and inner-
product engines with many MAC units may be constructed to produce very high-performance systems.

220
Instead of using functional unit concurreny to increase performance, fitter parallelism may be introduced
in a different manner by employing and alternative algorithm. Distributed arithmetic [1] provides one
such opportunity.
3.3 FIR Filters: An Alternative Approach Using Distributed Arithmetic
FPGAs can bring high-performance, power and bandwidth efficiencies, flexibility through re-
configuration, in addition to economic benefits to a design. 
One additional, and very exciting
characteristic that FPGAs provide, is access to the wide range of creative solutions to DSP tasks that have
been reported in the open literature over the last few decades. Because FPGAs are like miniature silicon
foundries with extremely short tum-around times, the system architect is free to explore a wide range of
potential solutions to a problem. This option is often not available using ISDSP. The ISDSP chip designer
must define a data-path that solves a large range of problems and provide an adequate level of
performance. Many novel signal processing algorithms just do not map well onto the pre-defined data-
path of a software programmable signal processor.
There are in fact many ways to compute an inner-product. One approach first published in the open
literature by Peled and Liu [1] is called distributed arithmetic (DA).
A generic model of a DA filter is shown in Figure 3. This technique has several characteristics that make
it well suited to implementation in distributed memory based FPGAs. For an excellent tutorial
presentation on distributed arithmetic based DSP for performing FIR, IIR (infinite impulse filter) and
FFTs (fast Fourier transforms), the reader is referred to the article by White [3].
Distributed arithmetic based calculations require a series of table look-up operations, additions and
subtractions. All of these functions are highly suitable to FPGA implementation. One interesting property
of DA filters is that the filter throughput is no longer coupled to the filter length, but instead has a
dependency on the input sample precision. This is indicated by the linear plots in Figure 4. The figure
says that in a DA FIR filter mechanization, for a given input sample precision B, the sample rate remains
constant independent of the number of filter taps. For example, for B= 12 and a 100 MHz system clock,
the filter sample rate is 8.333 MHz for filter lengths of 10, 20 100, 200,... and so on. For N=200, this is an
effective computation rate of one MAC every 0.6 microseconds, or 1.7 Giga-MACs per second.
For 24-bit input samples, the sample rate is 4.1666 MHz. For many applications the filter coefficient set is
symmetrical. Symmetry can be exploited to minimize the logic requirements of the filter implementation.
The filter rate is reduced slightly when this is done. For 24-bit input samples, and a 100 MHz clock, the
sample rate will be 4 MHz. For a 200-tap filter this still results in an impressive 800 Mega-MAC per
second computation rate.

221
3.4 Increasing the Speed of Multiplication - Parallel Distributed Arithmetic
In its most obvious and direct form, DA based computations are bit-serial in nature. Extensions to the
basic algorithm remove this potential throughput limitation. Processing the data serially, one-bit-at-a-
time, can result in modest computation rates. When the input variables are B bits in length, B clock cycles
are required to complete an inner-product calculation. Additional speed may be obtained in several ways.
One approach is to partition the input words into L subwords and process these subwords in parallel. This
method requires L-times as many memory look-up tables and so comes at a cost of a linear increase in
storage requirements. Maximum speed is achieved by factoring the input variables into single bit
subwords. The resulting structure is a fully parallel DA (PDA) FIR filter. With this factoring a new output
sample is computed on each clock cycle. PDA FIR filters provide exceptionally high-performance. For
example, consider an 80-tap filter using 12-bit precision for both the coefficients and input samples.
Using the Xilinx Core Generator [8] to produce the FPGA realization, the filter occupies 2864 logic slices
and comfortably supports a 150 MHz sample rate. This is equivalent to 12 billion multiply-accumulates
per second. The design floorplan is shown in Figure 5.

222
3.5 Why DA for FPGAs?
Several architectural features make DA filters well suited for implementing using Xilinx Virtex FPGA
technology. The function generators (FGs) in these FPGAs can be efficiently used as shift registers
(SRL16 [2]). This functionality is required to implement a bit-serial delay line, or time-skew buffer, that
keeps a history of the filter input samples. The time-skew buffer tap points are used as address inputs to
the DA look-up table (LUT). Function generators can also be configured as RAM and ROM. This
capability may be used to efficiently build very high-speed, and highly parallel (if required), DA look-up
tables.
An alternative to implementing the DA LUT in distributed memory is to employ the block memory
present in recent generation FPGAs. Consider building a 70-tap filter linear phase FIR filter. There are
only 35 unique filter coefficients. A simple single LUT approach requires storage for a prohibitively large
number of partial product terms. This becomes much more manageable if the 35 address lines are
partitioned in to 4 groups of 8 and a group of 3. Now only four 256-entry and one 8-entry LUTs are
required. These 5 tables can be stored in on-chip block memory and a simple adder tree employed to
combine their outputs.
3.6 
FPGA Multi-rate Filters
Having access to efficient single-rate FPGA FIR filters enables the construction of a wealth of multirate
filters. Polyphase interpolators and declinators like that shown in Figure 6 and Figure 7 respectively, can
be implemented using either a time shared MAC approach or distributed arithmetic.

223
3.6.1 Polyphase Decimators
One method suitable for implementing a polyphase decimator is to employ a distributed arithmetic
approach. Each polyphase segment could be implemented as a separate DA process. All of the segments
operate concurrently to produce a down-sampling filter that can support a very high input sample rate.
For example, consider an 8-to-l complex (real input samples, complex coefficients) decimating filter with
an input sample rate of 80 MHz and an output rate of 10MHz. Each of the filter segments is to have 32-
taps and support 10-bit input samples and 12-bit coefficients. Each polyphase sub-filter has a computation
rate of 320 MMACs (for a 100 MHz clock). The net performance for the complex filter is 5.12 Giga-
MACs. In addition to the raw performance provided by this structure, one other important dimension of
the problem to consider is the logic requirements. One of the 32-tap filters consumes 126 Virtex logic
slices. The complete filter occupies 2,200 Virtex logic slices. An XCV400 FPGA provides 4,800 slices,
and can accommodate two of these decimating structures and provide a performance in excess of 10
billion MACs per second. The system clock rate assumed in this example is 100 MHz. Current generation
FPGA technology can easily support this rate, and can in fact support 200 MHz clock frequencies for
certain arithmetic functions. One final point to note is that filter coefficient symmetry has not been
exploited. Doing so, if possible, would yield more compact realizations.
3.6.2 Polyphase Interpolators
A polyphase interpolator could be implemented in an FPGA using distributed arithmetic or a time-shared
MAC approach. The different mechanizations are appropriate for different problems. For example, in a
digital receiver many control loops must operate for carrier and symbol synchronization, as well as for
automatic gain control. In the timing recovery loop, an interpolator is required to adjust the signal sample
phase, and for driving the tracking loop itself. While the interpolator may need to support many phases, at
any one time only a small number of segments will typically be operational. In his case a conventional
scheduled MAC approach is appropriate. The full set of coefficients for all the filters would be stored in
block or distributed memory, and the required set of coefficients (corresponding to a polyphase arm)
would be directed to one or several MACs to form the inner-product calculation.
3.6.3 CIC Filters
There are many alternatives for realizing multirate filters in addition to the structures described above. For
example, the cascaded-integrator-comb approach first published by Hogenauer [4] is highly suitable for
FPGAs because its reliance on adders, registers and subtracters for performing the arithmetic: FPGAs are
extremely efficient for realizing these functions.
4 Carrier Recovery Using A QPSK Costas Loop
There are many options for implementing carrier phase and frequency synchronization in a digital
communication system. At the heart of all synchronizers is the phase-locked loop (PLL).
4.1 Phase Locked loops
The generic PLL is shown in Figure 8.

224
PLLs are servo control mechanisms whose controlled parameter is the phase of a locally generated replica
of the incoming carrier wave. Phase locked loops have three basic components: a phase detector, voltage
controlled oscillator (VCO) and a loop filter. The phase detector measures the difference between phase
of the local oscillator and the input carrier. This signal is fed to a loop filter that governs the response of
the PLL to variations in the error signal. The Loop filter is designed to track changes in the error signal,
but not be overly responsive to receiver noise. The loop filter determines the type of disturbances the PLL
can track, for example, a phase or frequency step. A detailed description of PLL operation can be found in
In an all-digital receiver a digital phase-locked loop (DPLL) like that shown in Figure 9 is required. This
DPLL employs a second order infinite impulse response (IIR) loop filter. The two filter coefficients ki and
kp control the filter comer frequency and damping ratio. In the digital implementation, the VCO in Figure
8 is replaced with a direct digital synthesizer (DDS). The phase detector is implemented using the arc-tan
functional unit in the figure.
4.2 
QPSK Costas Loop
Communication systems employing QPSK modulation are very common. The basic Costas loop [5] can
be enhanced to perform carrier recovery and symbol detection for a QPSK modulation scheme as shown
in Figure 10.
[5].

225
To understand the operation of this loop, consider the scenario when the loop is reasonably near lock. The
signal on the I processing arm (or rail) after the LPF is close to the data symbol value 
 and the signal
on the quadrature arm is close to 
The slicer enforces this by ignoring small perturbations in the
signal, which could be due to the opposite-rail symbol if the loop is not locked, or the shaping of the
pulse, or simply channel noise. The ±1 symbol decisions feed a network that produces from the received
baseband signals a phase difference signal. This signal, working with the loop filter and the VCO, operate
like the basic PLL shown in Figure 8.
4.3 
QPSK Costas Loop Implementation
To produce a fixed-point arithmetic realization of the QPSK Costas loop in Figure 10 a combination of
Matlab [6] and Simulink [7] where employed. After the quantized model was verified in the Simulink
domain, a conventional FPGA implementation flow using VHDL and
intellectual property cores (like optimized multipliers and gain blocks) is used to produce the final design.
To verify the operation of the loop a system level design was developed that modeled a simple transmitter
and channel that simulated a Doppler shift of the transmitter carrier wave. In practice, the Doppler shift is
associated with movement between the transmit and receive platforms, as might be the case with a
cellular handset user traveling in a car.
The transmitter generated a pseudo random complex sequence that was shaped by a multirate transmit
filter with an excess bandwidth 
and an interpolation factor of l-to-8. The channel model
introduced a small frequency translation of the carrier. Therefore, the receiver was presented with a signal
that had a frequency and phase offset compared to the nominal local oscillator. The purpose of the Costas
loop is to track the frequency and phase offset to allow coherent demodulation of the transmitted
waveform. The sequence of plots in Figure 11 provide some insight to the operation of the carrier
recovery loop. Figure 11(a) shows the QPSK constellation diagram after the matched filter. Figure 11(b)
is the corresponding eye diagram. The eye is clearly open and, in the absence of any channel impairments,
the receiver can easily make correct symbol decisions using this waveform. The frequency translation
applied to the transmitted signal causes the constellation to rotate as shown in Figure 11(c). The receiver
eye diagram shown in Figure 11(d) clearly shows the eye is closed, indicating that valid symbols
decisions cannot be made. The Doppler shift modeled in this experiment causes a frequency translation of
the carrier. The corresponding phase slope is linear, with a gradient that corresponds to the magnitude of
the frequency offset. One way to observe and quantify the performance of the carrier tracking loop is to

226
monitor the phase function of the interfering signal and that of the oscillator in the Costas loop. This is
shown in Figure 11(e) and Figure 11(f). We observe that the loop attains lock after a few hundred
samples. The difference between the two phase functions, or phase error, is presented in Figure 11(g).
Finally the de-rotated constellation is shown in Figure 11(h).
The quantized model was developed using the Simulink fixed-point blockset. This approach allowed a
high degree of design compression. After the Simulink floating-point model was completed and verified,
approximately 30 minutes was required to generate the quantized solution.
4.4 
FPGA Implementation
Several functional units are required to implement the carrier recovery loop. A complex heterodyne is
employed to down-convert the input signal. This is of course recognized as a complex multiplier. There
are two matched filters, one for each of the I and Q arms. The phase detector is straightforward,
consisting of two 1-bit slicers (sign detector), two 2's complementers and a subtracter. The second-order
loop filter is realized using two multipliers, an integrator and an adder. The local replica of the carrier
wave is generated by a DDS.
The complex multiplier is implemented using 4 multiplications and two additions. The ADC samples are
represented using 8-bits, while the heterodyning signal employs 12-bit samples. Each 8x12 multiplier
occupies approximately 81 logic slices. The complete multiplier occupies 344 slices. the recursive nature
of the Costas loop demands the use of purely combinatorial multipliers and adders.
Two matched filters are required. One for each of the I and Q processing arms. These filters are 97-tap
symmetrical FIR filters with 12-bit coefficients and support 9-bit precision input samples. The filters were
generated using the Xilinx Core Generator [8] filter compiler. The implementation employs serial
distributed arithmetic. Taking advantage of the symmetrical coefficient data, each filter occupies 248
Virtex FPGA logic slices. Using 9-bit precision input samples, the filter requires 10 clock cycles to
compute a new output. The bit-clock for the filter is a function of the FPGA speed grade. Typical values
are between 100 and 150 MHz. This translates to a sample throughput of 10 to 15 MSamples/sec.
The multipliers in the loop filter occupy most of the logic resources for this sub-system. The coefficient
parameters are represented using 16-bits while the input samples are carried with 8-bit precision. The
complete loop filter occupies 80 slices.
The DDS was implemented using a simple phase truncation architecture [9]. Using the quantized
Simulink model, a 1024-point sin/cos look-up table (LUT) with 12-bit precision samples was found to be
adequate for the application. Using quarter wave symmetry [9], the sin/cos LUT requires only a single
Virtex block RAM (BRAM). The dual-port nature of the BRAM permits both the I and Q samples to be
computed simultaneously. The DDS phase accumulator consists of a 28-bit adder and register. These
components occupy a modest 14 logic slices.

227
The complete QPSK Costas loop occupies approximately 1000 logic slices.
5 Conclusion
FPGA based signal processors are being employed in a diverse range of signal processing applications for
reasons of performance, economics, flexibility and power consumption.The telecommunication industry
has been quick to embrace FPGA technology. Nearly 50% of all FPGA production finds its way into
telecommunications and network equipment of one sort or another - wireless base stations, switches,

228
provided by FPGAs also allows designers to easily track evolving standards like MPEG, and provide a
methodology for dealing with fluid standards such as ADSL.
Even though FPGA DSP systems represent a significant faction of the signal processing arena, we are
witnessing an exponential growth in the insertion of FPGAs in DSP hardware. This explosive growth is
enhanced by access to FPGA intellectual property (IP) cores from all the major FPGA suppliers as well as
3rd-party IP designers. With these resources, the system implementor is able to focus on the design rather
than the details of  lower-level modules like filters and transforms.
The continuing evolution of communication standards and competitive pressure in the market place
dictate that communication system architects must start the engineering design and development cycle
while standards are still in a fluid state. Third and future generation communication infrastructure must
support multiple modulation formats and air interface standards. FPGAs provide the flexibility to achieve
this goal, while simultaneously providing high levels of performance. The SDR implementation of
traditionally analog and digital hardware functions opens-up new levels of service quality, channel access
flexibility and cost efficiency.
The software in a SDR defines the system personality, but currently, the implementation is often a mix of
analog hardware, ASICs, FPGAs and DSP software. The rapid uptake of state-of-the-art semi-conductor
process technology by FPGA manufacturers is opening-up new opportunities for the effective insertion of
FPGAs in the SDR signal conditioning chain. Functions frequently performed by ASICs and DSP
processors can now be done by configurable logic. This paper has provided an overview of  how several
signal processing functions can be implemented in an FPGA. The DA implementation of very high-
performance single-rate and multi-rate filters was described in addition to the FPGA implementation of a
QPSK Costas loop for carrier recovery.
References
[1] Peled and B. Liu, “A New Hardware Realization of Digital Filters”, IEEE Trans. on Acoust., Speech,
Signal Processing, vol. 22, pp. 456-462, Dec. 1974.
[2] Xilinx Inc., The Programmable Logic Data Book, 1999.
[3] S. A. White, “Applications of Distributed Arithmetic to Digital Signal Processing ”, IEEE ASSP
Magazine, Vol. 6(3), pp. 4-19, July 1989.
[4] E. B. Hogenauer, “An Economical Class of Digital Filters for Decimation and Interpolation”, IEEE.
Trans. Acoust., Speech Signal Processing, Vol. 29, No. 2, pp. 155-162, April 1981.
[5] B. Sklar, Digital Communications Fundamentals and Applications, Prentice Hall, Englewood Cliffs,
New Jersey, 1988.
[6] The Mathworks Inc, Matlab. Getting Started with Matlab, Natick, Massachusetts, U.S.A, 1999.
[7] The Mathworks Inc, Simulink, Dynamic System Simulation for Matlab, Using Simulink, Natick,
Massachusetts, U.S.A, 1999.
[8] Xilinx Core Generator System, http://www.xilinx.com/products/logicore/coregen/index.htm
[9] C. H. Dick and f. j. harris, “Direct Digital Synthesis - Some Options for FPGA Implementation”,
SPIE International Symposium On Voice Video and Data Communication: Reconfigurable
Technology: FPGAs for Computing and Applications Stream, Boston, MA, USA, pp. 2-10,
September 20-21 1999.

Signal Processing Requirements of the TDD Terminal
Stamatis Kourtis, Patrick McAndrew, Phil Tottle
Motorola Semiconductors
69 Buckingham street, Aylesbury, HP20 2NJ, UK
{Stamatis.Kourtis, P.Mcandrew, Phil.Tottle}@motorola.com
Abstract: This paper considers the signal processing requirements of 3GPP-TDD terminal and examines
the technology requirements for the implementation of the 3GPP-TDD mode, this is followed by a
discussion of how the terminal complexity of the TDD mode compares to that of the FDD mode.
The first part of the paper begins with a short explanation of how the 3GPP TDD mode fits into the ITU
family of standards, the specification of the TDD mode covering the frequency bands, the synchronous
nature, and the physical channel structure. The differences in the inner receiver implementation between
the TDD mode and the FDD mode are highlighted.
The second part of the paper identifies the key signal processing complexity issues that determine the
TDD terminal architecture. This section explains the requirement for terminal synchronisation to the
network in the synchronous TDD mode and asynchronous FDD mode. The baseband implementation
section briefly covers the inner receiver functions of the TDD mode: channel estimation, active code
detection and multi-user detection. The latter is basically examined from the joint detection point of view;
nevertheless other techniques are presented with particular interest in the single detection algorithms.
This leads to a brief comparison of the terminal architectures for the FDD and TDD modes, in particular
the suitability of the air interface to flexible implementation on a DSP.
I 
INTRODUCTION
The imminent arrival of the third generation cellular has resulted in the creation of many different usage
scenarios from video conferencing to Internet access in addition to conventional voice traffic. The TDD
mode of 3G potentially provides the flexibility and adaptability to support the different requirements of
latency, asymmetric and variable rate traffic in a single terminal architecture and hence offers many
advantages to service providers, operators, manufacturers and users.

230
II 
THE ITU FAMILLY
The ITU has identified 5 standards that are part of the IMT2000 family, the five are:
IMT-DS :- W-CDMA (UMTS & Japan CDMA, 3GPP-FDD)
IMT-MC:- CDMA2000 (North America CDMA, 3GPP2)
IMT-TC:- TD-CDMA (TDD version of UMTS, 3GPP-TDD)
IMT-SC:- EDGE (EDGE ETSI & UWC-136)
IMT-FT:- DECT
IMT-TC or TD-CDMA, the TDD mode of 3GPP, can efficiently support the asymmetric services, e-
commerce, web browsing, and email that are expected to drive revenue generation in 3G networks. TD-
CDMA has allocated spectrum in Europe and is expected to get more spectrum in the 2005 timeframe,
TD-CDMA has low regulatory and organisational barriers to obtaining future spectrum (it does not
require inflexible paired allocations). TD-CDMA is supported by China, is designed to inter-work
seamlessly with W-CDMA and is expected to fit on the Node-B and user equipment (UE) platforms with
little cost differential. TD-CDMA is still in development, Release 99 of the standard is available now and
there will be a new release at the end of 2000.
III 
3GPP-TDD TERMINAL
Although much commonality now exists between the TDD and FDD modes since the alignment within
3GPP, several important key differences remain. Since the outer transceiver functions (source and
channel coding-decoding) are identical between the TDD and FDD modes, the following discussion
focuses on the inner transceiver implementation (fading channel mitigation, modem, carrier
synchronisation) which employs disparate algorithms for the two different modes of the 3GPP standard.
This is addressed within the context of the frame structure, whilst the issues of complexity for the
physical layer algorithms is discussed in a later section.

231
The TD-CDMA mode fundamentally operates in a synchronous manner. This necessitates the use of both
BS-to-network synchronisation and time-slot synchronisation. Since the frequency allocation is within the
unpaired spectrum the uplink and downlink are multiplexed in a time division manner. Thus, users are
multiplexed in a time-slot manner similar to that of GSM. However, like W-CDMA, the spectrum of
each TD-CDMA user is also spread through the use of orthogonal codes. This allows multiple users to be
additionally grouped within a time-slot; each separated in the code domain.
Figure 2 shows the fundamental frame structure used. Each 10 ms frame consists of 15 time-slots, each
spread over the 5 MHz channel bandwidth by a variable spreading factor (SF=1..16). Each time-slot
carries both the data bits and a midamble sequence. The use of a 3.84 Mc/s chip rate allows the target of
2 Mb/s data services. Flexibility for support of asymmetric services is provided within a frame level by
the flexible allocation of uplink and downlink time-slots. Either use of multiple spreading factors and/or
multi-code operation or the use of multi-slot operation may accommodate higher data rate users.
More specifically, in the downlink where a fixed scrambling code of 16 is used (unless the total slot
capacity is assigned to one user and thus no spreading is used, SF=1), higher data rates are accommodated
only by multi-code or multi-slot transmission. The latter, however, should be avoided because of the
substantial increase in the required complexity and the reduction of the available time for measurements.
The utilisation of fixed spreading in the downlink was considered as a good solution, which could enable
the use of inexpensive detection schemes at the UE. In this way, only the codes associated with this
spreading factor are assumed as active at the UE receiver, otherwise all the possible codes from the
orthogonal variable spreading factor (OVSF) code tree from SF=2..16 would be taken into consideration.
Furthermore, in the uplink, higher data rates should be accommodated primarily by reduced spreading
factors or otherwise by multi-slot operation. Multi-code operation is highly discouraged due to the

232
resultant high peak-to-average-ratio transmitted signal, which causes the inefficient operation of the UE
power amplifier.
Since in general the spreading factors used are lower than that of W-CDMA, recovery of a user through
despreading (correlation of the received sequence against the known user’s code: the basic principal of
spread spectrum CDMA [2]) may limit system capacity due to the higher interference levels. (Actually, it
is worth noting here that the scrambling codes of W-CDMA have been especially designed having in
mind a Rake structure at the receiver and the respective scrambling codes of TD-CDMA have been
optimised for a joint detection structure at the receiver). To mitigate these effects, joint detection
techniques are utilised for multi-user interference cancellation. These techniques require the knowledge
of both other users codes and their corresponding channel impulse responses. In the case of the downlink,
since all transmissions are from one base-station, this may simplify to only one channel (unless transmit
diversity is employed). The implementation complexity of joint detection may be high, due to the
inversion of large matrices. In order to simplify the receiver design, an alternative technique has been
proposed for the case of stationary or pedestrian speed mobiles. This is termed joint predistortion and
basically works on the assumption that at low speeds channel reciprocity exists for adjacent time-slots.
This allows the base station to pre-equalise the downlink channel based upon measurements of the uplink.
Although, this increases the complexity at the base station, the mobile receiver may be implemented by
use of a single finger rake structure.
IV 
POWER CONTROL
The TDD mode of 3GPP differs from the FDD mode in the complexity of the power control that is used
to improve capacity. Power control is used to reduce the interference level due to other users transmitting
on the same frequency, in the FDD fast power control is used with measurements made on one time slot
signalled to the base station on the next transmit timeslot as shown in Figure 3.

233
3GPP-TDD is less sensitive to power control than the FDD mode due to the use of joint detection at the
Node-B and the terminal. The received level at the base station is maintained at a reference level through
open loop power control and no power control commands are transmitted by the base station. This is
possible because the mobile station is capable of performing accurate measurements of the path-loss since
the transmitted power of the beacon channel (channel used by the terminal for measurement purposes) is
signalled through the broadcast channel (BCH). In contrast, such measurements can not be performed by
the Node-B as the terminal does not have a relevant beacon function. Consequently, closed loop power
control is used in the downlink whereby a terminal makes signal-to-interference-ratio measurements of
the received dedicated channel, compares this ration to a predetermined threshold and accordingly it
sends the power control commands to the Node-B once per frame.
V 
INNER RECEIVER FUNCTIONALITY
The inner receiver of the 3GPP-TDD terminal basically performs two operations: channel estimation and
joint detection. Figure 4 depicts the flow chart of the inner receiver under two operation modes: normal
and transmit diversity (Tx diversity).

234
VI 
CHANNEL ESTIMATION
Under normal operation, all the codes transmitted from the BS experience the same radio channel and
consequently only single channel estimation is required at the UE, which can be easily performed by
matched filtering. However, if Tx diversity is employed at the BS, the various codes (corresponding to
different users) experience different radio conditions and as a result a multiple channel estimation has to
be performed, which can be very efficiently undertaken by operating in the frequency domain (using FFT
and IFFT).
VII 
JOINT DETECTION
The most power processing intensive function of the TDD terminal is the joint detection, which largely is
characterised by the inversion of the matrix:
where 
(N is the number of symbols within the data block either 61 or 69 (or twice these
numbers if both the data pans are considered), Q is the spreading factor which equals 16 for the downlink
(the case for Q=l is not examined as this does require only channel equalisation), W is the channel length
in chips and K the number of the active codes) is the channel convolution matrix, and 
is the conjugate
transpose of A. As a result, 
which implies that the complexity of this stage depends on K
which ranges from 1 to 16, although it is anticipated that no more than 8 to 10 codes would be
concurrently active at any instance. Lastly, it can be seen [3] that the total complexity of the joint
detection generally varies as a function of

235
In contrast to the uplink case, in the downlink the UE does not have any knowledge of the currently active
codes in the received slot, as this information does not be signalled by the network. This would result in
an always worst case joint detection processing of K equal to 16, if some signal pre-processing would not
take place, the objective of which is the determination of the active codes.
Because of the two different operation modes of the receiver, this pre-processing can be realised in two
totally different ways. Whilst in normal operation (only one midamble is used in the downlink), the
detection of the active codes can be performed from the output of the matched filter operation 
data(r),
as shown in Figure 4, where A’ is the full version of the channel convolution matrix (K=16) and data(r) is
the data pan of the received burst. This information enables the reduction of matrix A’ to the finally used
matrix A. On the other hand, given the utilisation of multiple midambles for the case of Tx diversity, the
output of the multiple channel estimation can clearly identify which codes are active and accordingly the
matrix A is created.
The comparison of these two approaches readily reveals the superiority of the latter both in terms of
complexity and performance, and as such an extension of the utilisation of multiple midambles even for
the case of non-Tx diversity is not precluded. At this point it must be mentioned that due to the non-ideal
autocorrelation properties of the midamble, some degradation in the channel estimation is expected.
Several algorithms can be used for the joint detection including the zero forcing block linear equalisation
(ZF-BLE), the minimum mean square error block linear equalisation (MMSE-BLE) and their
corresponding decision feedback realisations [4]. Comparatively, MMSE-BLE is reported to have slightly
better performance up to 0.5 dB than ZF-BLE, requiring, however, an estimate of the noise power
(indicated as other inputs in Figure 4). In addition, a significant performance improvement can be
achieved by the use of decision feedback equalisation schemes, although in bad channel conditions the
unavoidable error presence causes extensive error propagation, which results in rather poor performance.
Alternatively, other non-joint-detection techniques include interference cancellation and channel
equalisation algorithms as described in [5]. These techniques generally are lesser computational
demanding, albeit at a substantially worse error performance.
VIII SINGLE DETECTION ALGORITHMS
The desire to eliminate the pre-processing stage for the determination of the active codes has led to the
investigation of sub-optimum single detection schemes [6],[7]. In general, the proposed algorithms
perform worse than their joint detection (optimum) counterparts, although the performance differences
are reported to be up to 1 dB. Interestingly, the detection algorithm proposed in [7] introduces the concept

236
of  “spectral matching” and all the needed signal processing for the detection is performed in the
frequency domain (FFT and IFFT operations) without requiring any matrix inversion. In addition, this
algorithm apart from not requiring the knowledge of the other active codes, it does not even need a
channel estimation, thereby reducing substantially the required complexity at the UE receiver.
IX 
RADIO ARCHITECTURE
The radio implementation requires the development of integrated RF transceiver circuits which meet the
linearity and bandwidth needs of the different air interfaces or the re-use of existing components in a
“velcro” phone architecture. Current RF transceiver architectures typically comprise several devices of
different technologies chosen to optimally implement the power amplifier (PA), the low noise amplifier
(LNA), synthesiser and filtering operations. Package parasitics and thermal dissipation also constrain the
integration options.

237
Multiband radio implementations demand higher PA linearity over a wider bandwidth, higher resolution
wider-band synthesisers, and wide bandwidth LNA, each requiring novel implementation techniques,
demanding higher semiconductor performance and further constraining integration prospects [1].
The Figure 5 depicts a radio architecture for a TDD terminal that operates at low data rates (144 kb/s),
this terminal type could be used in unlicensed spectrum as a medium data rate terminal that is capable of
also operating in a GSM mode. The shaded blocks represent the RF & IF blocks that need to be added to
a GSM terminal to permit it to operate in TDD mode. The two receiver chains of unshaded blocks are
required for the two GSM frequency bands, the third receiver stage of band pass filter, followed by a low
noise amplifier and mixer is needed for the unlicensed frequency band. The data converter bandwidths
must be increased to cope with the 5 MHz bandwidth of TD-CDMA. The significant advantage of this
medium data rate terminal is that it may operate in unpaired spectrum and requires a lower power budget
than a W-CDMA teminal since an antenna switch may be used, as there is no simultaneous transmission
and reception.
A W-CDMA-TD-CDMA radio architecture that also supports GSM is shown in Figure 6. The shaded
blocks represent the RF and IF blocks that need to be added to a GSM terminal to permit it to operate in
W-CDMA mode. A duplexor is required where there is simultaneous reception and transmission from the
same antenna, the duplexor has losses (3dB receive, l.5dB transmit) that are large compared to a switch
that can be used in used in GSM. If slotted mode cannot be used for handover to GSM frequencies an
additional IF receiver chain and A-D are needed plus an additional synthesiser. One additional transmit
synthesiser may be needed because of the variable duplex distance in the FDD frequency bands. Also a

238
circulator may be required in the transmit chain depending on the implementation to allow small power
control steps needed in the UMTS FDD standard. In the baseband, the processor must operate on W-
CDMA and GSM data resulting in a peak load on the baseband processor that is higher than that of a
GSM terminal alone.
X 
CONCLUSIONS
This paper presented the TDD mode of the 3GPP, and in particular it showed the key important
differences with the FDD mode. From the terminal point of view, these differences are primarily focused
on the inner receiver of the terminal where functions such as channel estimation and multi-user detection
significantly impact its total complexity. Lastly, radio terminal architectures have been presented which
will allow the production of low cost TDD terminals.
REFERENCES
[ 1 ] 
Sheng S. and Brodersen R., 1998, “Low-Power CMOS wireless communications. A wideband
CDMA system design”, Kluwer Academic Publishers
[2] 
Peterson R. L, Ziemer R. E. and Borth D. E., 1995, “Introduction to Spread Spectrum
Communications”, Prentice-Hall
[3] 
Kourtis S., McAndrew P. and Tottle P., 1999, “Baseband Complexity of Software Defined Radio
for 2nd & 3rd Generation Air Interfaces”, 4th ACTS Mobile Communications Summit. Vol. 2, pp. 727-
732
[4] 
Klein A., Kaleh G. K. and Baier P. W., 1996, “Zero forcing and minimum mean-square-error
equalization for multiuser detection in code-division multiple-access channels”, IEEE Transactions on
Vehicular Technology, Vol. 45, No. 2, pp. 276-287
[5] 
Steiner B., 1997, “Interference cancellation vs. channel equalization and joint detection for the
downlink of C/TDMA mobile radio concepts”. Proceedings of EPMCC Conference together with 3. ITG-
Fachberichte, No. 145, pp. 253-260
[6] 
Klein A., 1997, “Data detection algorithms specially designed for the downlink of CDMA mobile
radio systems”, 47th IEEE Vehicular Technology Conference, Vol. 1, pp. 203-207
[7] 
ETSI TDoc SMG2 UMTS L1 362/98, 1998, “Low cost MMSE-BLE-SD algorithm for UTRA
TDD mode downlink”

Frame Quality-Based Versus 
Based Forward Power
Control Methods for the cdma2000 Third Generation Standard
Steven P. Nicoloso, Mike Mettke, and R. Michael Buehrer
Bell Laboratories - Lucent Technologies
67 Whippany Rd. Room 2A-277
Whippany, NJ 07981
spn@lucent.com
Abstract Fast forward link power control is one of several improvements offered by third
generation standard cdma2000 over the well-known second generation IS-95. This paper describes
each of the five forward power control methodsallowed in cdma2000, wherein the slow frame quality-
based algorithms are similar to those of IS-95. We examine the performance of frame quality-based
versus 
based (fast) power control for a typical voice traffic channel and a high data rate
traffic under various geometries and a wide range of mobile station velocities. We also consider the
impact of Space-Time Spreading (STS) transmit diversity along with power control. Forward link
power control proves itself to be a worthwhile addition to CDMA, providing substantial gains in
capacity where they are needed most, viz., at low speeds where FEC interleaving is weaker. The
effect of time-correlated shadowing is also considered and experimental results suggest that actually
may show additional gains hidden by conventional static (Rayleigh fading only) experiments.
1 Introduction
The third generation (3G) cdma2000 standard [1] provides backwards compatibility with IS-95 [2],
but also adds substantial evolutionary technical improvements that will increase system capacity
and enhance the reliability of service even during the first (1X) phase of deployment1. Technical
improvements include turbo codes for high data rate channels, the use of pilot-assisted BPSK
modulation on the reverse link, and, for the forward link, transmit diversity, lower traffic code
rates, and the addition of fast (up to 800 bps) power control. A realistic examination of the
improvements provided by fast forward link power control is the primary focus of this work.
We begin in section 2 by describing the various forward power control (FPC) methods provided
by cdma2000. Then in section 3, we describe the experimental environment in which the various
FPC methods are studied. Section 4 discusses the trends we see in our simulation study. Finally
in section 5, we summarize our findings. With very few exceptions we find that fast 
based
power control provides significant gains for the CDMA forward link and most importantly provides
capacity gains where they are needed most.
2 Forward Power Control Methods in cdma2000
Forward link power control is accomplished in cdma2000 by puncturing the Reverse Pilot Channel
with the Reverse Power Control Subchannel (RPCSC)2. One quarter (384 of 1536 chips at the IX
chip rate of 1.2288 Mcps) of the pilot is punctured with power control information. The standard
allows for five different methods of forward link power control, defined by stored mobile station
parameter FPC_MODEs 
We shall alternatively denote each of these via
FPC Modes 0 through 4. Modes 0 through 2 are based on receiver 
measurements and are
described in section 2.1. Modes 3 and 4 are based upon estimates of frame quality (usually whether
a frame error has occurred) and are quite similar to each other. These are outlined in section 2.2.
1The IX portion of cdma2000 uses the same 1.2288 Mcps chip rate as IS-95.
2This applies to the 3G proper portions of cdma2000, meaning radio configurations 3 and above. In the legacy
IS-95 portions of cdma2000, FPC remains unchanged.

240
2.1 Description of 
Based Power Control
Simply viewed, FPC Modes 0 through 2 are variations of 
  based power control methods
similar to those used on the IS-95 reverse link where during each 1.25 ms power control group
(PCG), the ratio 
is estimated by the receiver. The estimate, 
is then compared
with an internally saved threshold
setpoint). If 
is less than the
setpoint,
the power control bit is set to zero during the next PCG. Otherwise, it is set to one. The base
station interprets a zero as a request for more transmit energy, and a one as a request for less. This
type of 
based power control is often called “fast power control” since it operates at a rate of
up to 800 Hz and can in some circumstances actually invert the fading signal envelope seen by the
receiver. What is different between forward power control in cdma2000 and reverse power control
both in cdma2000 and IS-95 is that for reverse power control methods, the mobile is required to
comply with power control commands received from the base station. In the forward link case,
however, there is no such requirement for the base station to obey mobile commands. This is due
in part to the relatively tight dynamic range constraints that have to be placed on the portion of
the total sector transmit power given to forward traffic channels.
In 
based FPC Mode 0, all power control bits transmitted are based on measurements
of one and only one forward traffic channel, either the Forward Fundamental (FFCH) or Forward
Dedicated Control Channel (FDCCH). FFCHs are typically variable rate voice channels with max-
imum rates of 9.6 kbps in Radio Configurations 3 and 4 (RC3 and RC4) and 14.4 kbps in Radio
Configuration 5 (RC5). Similarly FDCCHs have rates of 9.6 kbps in RCs 3 through 5 and 14.4
kbps in RC5 only. Forward Supplemental channels (FSCHs), having rates as high as 307.2 kbps in
cdma2000 IX (1036.8 kbps in cdma2000 3X), are provided no power control feedback mechanism
in FPC Mode 0. This does not imply that FSCHs are not allowed in FPC Mode 0, but merely
suggests that control of FSCH transmit power is left to base station designers.
Direct feedback power control of (potentially high data rate) FSCH is provided by
based
FPC Modes 1 and 2. In each, the 800 Hz reverse power control subchannel is divided up into
primary and secondary portions. The primary power control subchannel transmits power control
bits based on 
measurements of either a FFCH or FDCCH. The secondary transmits power
control bits based on measurements of a FSCH. In FPC Mode 1, commands are alternated such
that the effective rate of power control for each of the channels is 400 bps. In FPC Mode 2, the
division is unequal. During each 20 ms epoch of 16 PCGs numbered 0 through 15, power control
bits sent during PCGs 1, 5, 9, and 13 are based on estimated
 of the FFCH/FDCCH. The
other 12 are reserved for measurements of the FSCH. This results in an effective 200 bps power
control stream for the low data rate channel and 600 bps for the (usually) higher data rate FSCH.
What we have described thus far in this section is only the “inner loop” portion of
based
power control. What happens with the 
setpoint is referred to as the “outer loop.” Its
behavior is illustrated in Figure 1. After every frame, the mobile receiver determines whether it
made an error in decoding or not via cyclic redundancy check (CRC) or some other method. If the
frame is in error, the mobile may raise its setpoint by some value. If the frame is not in error, the
mobile may lower its setpoint by some (usually smaller) value. In this manner, a target FER may
be maintained. If, for example, a y% FER is desired, the mobile should raise its setpoint by +A
dB when it records an error. The figure illustrates the behavior for a 1% target FER. Down step
a is given by
Over time, this raising and lowering of setpoint is intended to result in the desired target FER. The
only restriction on the mobile is that it may not raise its setpoint above mobile stored parameter
or reduce it  below                                             where chan       {FCH, DCCH, SCH} for
forward fundamental, dedicated control, and supplemental channels respectively. Maintenance of

241
a desired FER is crucial to the capacity of virtually any CDMA system since one mobile station’s
signal of interest is interference for the rest. Furthermore, power given on the forward link to one
user’s signal is power that cannot be given to another. Too low an FER is seen as a waste of base
station transmit power and (at least in cdma2000) constitutes a direct drain on capacity.
2.2 Description of Frame Quality-Based Power Control
FPC Modes 3 and 4 are not based on measurements of 
in the mobile receiver, but rather
on measures of frame quality. Each of 16 power control bits per 20 ms epoch on the Reverse Power
Control Subchannel are all set to the Erasure Indicator Bit (EIB) or Quality Indicator Bit (QIB)
for Modes 3 and 4 respectively. Thus frame quality-based power control methods in cdma2000 work
at an effective rate of 50 bps. Although this is much slower than the “fast” (800 bps) power control
methods described in section 2.1, we point out that the reliability of each bit is much higher. The
EIB is used specifically to indicate frame erasures (unrecoverable frame errors) detected for a FFCH
or FDCCH. The QIB is a somewhat relaxed version of the EIB, as it defined merely as indication
of detected signal quality on a FFCH or FDCCH. The cdma2000 standard does mandate, however,
that the QIB shall be equal to the EIB when a FFCH is present. For the purposes of this work,
QIB and EIB-based power control are considered equivalent.
There are no specific requirements in cdma2000 instructing the base station in how to respond
to quality indicators transmitted on the reverse power control subchannel. What is envisioned
however is something very much like the “outer loop” power control described in section 2.1. In
this case however, instead of an 
setpoint (or threshold) kept by the receiver, there is a target
transmitted energy per chip 
kept by the transmitter. 
is updated either up (A dB)
or down (a dB) depending upon the quality metric received during a frame. If
(i.e., it is within the dynamic range allowed for any one signal), then transmitted energy
per chip 
is equal to 
Otherwise, the minimum or maximum energy is transmitted.

242
Finally, we point out that in a manner similar to that of FPC Mode 0, there is no reporting
of frame quality for forward supplemental channels with FPC Modes 3 and 4 as the reporting
mechanisms are solely for FFCHs or FDCCHs. It is up therefore up to the base station designers to
determine how quality of service wilt be acheived for FSCHs when using these frame quality-based
forward power control methods. For example, base station designers might determine the ratio
power between a FSCH and FFCH such that the FSCH may be properly power controlled based
solely on feedback on the FFCH. An idealized version of just this assumption is used below in the
description of our simulation in section 3.
3 Simulation Methodology
Creation of simulation to accurately estimate forward system capacity required great effort on the
part of far more engineers than are named in this paper. In creating our simulation, we attempted
wherever possible to make no simplifying assumptions. In this section we describe the simulation of
the transmitted traffic and pilot channels, the mobile receiver, the implementation of the candidate
forward power control methods, and finally the simulated channel conditions.
3.1 Base Station Transmitter
In this study of the FPC methods available in cdma2000, we consider the performance of two forward
traffic channels: the 9.6 kbps FFCH channel and the 153.6 kbps FSCH under Radio Configuration
3 (RC3). Therein, rate r = 1/4 forward error correction (FEC) coding is used. The convolutional
encoder used for the FFCH and the FSCH has a constraint length of K = 9. For the FSCH, turbo
coding is examined along side convolutional. The turbo encoder consists of two K = 4 constituent
encoders, the outputs of which are interleaved and punctured according to the cdma2000 standard.
Two out of every 24 interleaved code symbols of the FFCH are pseudo-randomly punctured with the
Forward Power Control Subchannel (carrying reverse link power control information) as required
by the standard. No such puncturing is done on the FSCH. Walsh function lengths are 64 and 4
respectively for the FFCH and FSCH. We note that the Walsh function length is the spreading
factor applied after code symbol interleaving. The total spreading gain therefore applied to each
channel, i.e., the chip rate over the data rate 
 is 256 and 16 respectively.
Both single antenna transmission (no transmit diversity) and Space-Time Spreading (STS) are
examined. STS is an open loop transmit diversity scheme that uses two widely spaced transmit
antennas each transmitting a mutually orthogonal version of the same code symbols. Its design
and performance are detailed in [3] and [4]. Pilot energies per chip are 
and
for diversity antennas 0 and 1 respectively. 
is the maximum sustainable
average base station transmit power spectral density per sector, i.e., that transmit sector energy
required for fully loaded system. When simulating non-diversity mode, pilot 1 is not used. In STS,
pilot 0 is given a higher energy than pilot 1 due to the expected need of supporting legacy second
generation mobiles.
Dynamic range assumptions for transmitted traffic power are that 
 and
This means that the base station may devote up to one-half of its total
power to one traffic channel. It is not clear that in practice base stations would be able to support
such a high upper limit. Similarly, it is not clear that in practice such a low lower 
limit
would be used. We choose a large dynamic range for this study merely to provide as much “y-axis”
data as possible. For FSCH simulations, we assume perfect signaling layer and therefore do not
simulate the FFCH or FDCCH along side of it as this requirement has no bearing on the FSCH’s
performance.

243
3.2 Mobile Station Receiver
For the FFCH (low data rate voice channel) we compare the performance of           based FPC
Mode 0 and QIB-based FPC Mode 4. The target FER in both cases is 5%. For FPC Mode 0, the
outer loop step size is 1 dB (updated at 50 Hz) and the inner loop step (operating at 800 Hz) is
0.5 dB. Thus when a frame error is detected in the mobile receiver, the 
setpoint is raised by
A = 1 dB. When no frame error is detected, the setpoint is reduced by 
 as
given by (1). For Mode 4, we allow a wider transmit     step size of 3 dB since it is the only control
mechanism. Mobile station 
estimation for the FFCH is based solely on coherent estimation of
the bits on the Forward Power Control Subchannel. QIBs in FPC Mode 4 are based on the success
or failure of the 12 bit CRC as is the decision to move the 
setpoint up or down in FPC
Mode 0. No restrictions are placed upon the value of the mobile 
setpoint in our simulation.
For the FSCH (high data rate channel) we compare the performance of 
  based FPC Mode
2 (600 bps) and QIB-based FPC Mode 4 in a somewhat idealized manner. For Mode 2, due to the
difficulty of estimating 
non-coherently3 on FSCHs at high speeds, we make the assumption
that the the mobile receiver has genie-knowledge of its received            In a similarly idealized
manner, we implemented FPC Mode 4 for the FSCH by assuming that the base station transmitter
adjusts its power according to the success or failure of decoded FSCH frames. In practice, these
adjusments would be based on the CRC of the FFCH or FDCCH.
All other mobile receiver functionality is simulated in a realizable manner. Receiver channel
estimation is performed via moving average filter of the received common pilot channel(s). Channel
estimates are then used to create decoder metrics via maximal ratio combining (MRC). For turbo
decoding, an additional scale factor of
is required, where 
is the transmit energy per traffic chip, 
is the sum of pilot transmit energies
per chip, and is the double-sided spectral density of received noise plus interference. Each of the
components for the turbo scaling parameter is estimated by the mobile on a frame-by-frame basis.
Finally, for the 
based FPC methods, we assume a uniform 5% power control bit error rate
on the Reverse Power Control Subchannel. Since the frame quality-based methods have a much
higher reliability, we assume error free feedback of frame erasures.
3.3 Propagation Channel
Channel conditions in our experiments were assumed to be single-path Rayleigh fading. In cases of
transmit diversity, fully independent fading is applied to the transmitted signals from each antenna.
Mobile station velocities range from 0.1 km/h to 300 km/h in half-decade steps. Time-correlated
Rayleigh fading samples are taken from a standard uniformly spaced Jakes’ oscillator model. A
center carrier frequency of 1960 MHz is used.
For shadowing experiments, we assume log-normal shadow fading with a standard deviation,
The shadow fading is filtered log-domain noise tied to mobile velocity. Log-domain
samples of the shadow fading envelope are given by the recursion found in [5]
where 
and
3Recall that then is no forward power control puncturing for FSCHs and therefore no possibility of doing coherent
estimation. The issue of 
estimation for high data rate channels in cdma2000 is a rich topic for
investigation in and of itself..

244
where 
is the sample period (20 ms), 
is mobile velocity in m/s, and  is the correlation distance
for which we assumed 504 m.
Interference at the mobile is controlled by what is known as “geometry”. Geometry is denned by
the ratio of spectral densities of the received sector signal of interest (containing transmitted
traffic energy per chip 
and other orthogonal signals such as the pilot) and other cell (non-
orthogonal) interference plus noise. Non-orthogonal interference 
is simulated as additive white
Gaussian noise and is assumed to dominate the receiver noise floor (i.e., 
Geometries of
0 and 6 dB were examined for the FFCH. Slightly higher geometries of 3 and 9 dB were used for
the FSCH.
3.4 
Figures of Merit
Forward link CDMA system capacity is most clearly observed by consideration of 
or the
ratio of transmit sector energy per chip for one user’s channel to the total signal energy in that
sector. As mentioned in section 3.1, 
may be seen as the maximum sustainable average output
power per base station sector. Received 
(a familiar receiver figure of merit) may thus
be derived from relationship between 
and 
However, since forward link capacity
is determined by base station transmit power, transmitter figure of merit 
for a specific
geometry and achieved FER is used primarily in this work.
4 Analysis of Results
We begin our analysis by examining the behavior of FPC Modes 0 and 4 for the 9.6 kbps FFCH in
Figure 2. Average transmit 
is plotted versus mobile velocity ranging from 0.1 km/h to 300
km/h in half-decade steps. The geometry is 
with no shadow fading. Results with
single antenna transmission as well as Space-Time Spreading (STS) are shown. The propagation
channel is single-path Rayleigh fading. For STS, we assume zero correlation between transmit
antennas. Target FER for both FPC modes is 5%, and we assume a uniform error rate of 5%
individual power control bits for Mode 0 fast power control. We note that the target FER (printed
in tiny numbers by each point) was achieved for all cases. The largest gains with fast (Mode 0)
power control occur in non-diversity mode at lower speeds. In some cases (e.g., 0.3 and 1.0 km/h)
this improvement is around 5 dB. STS alone yields dramatic gains at lower speeds. Thus, the
incremental gains seen from fast power control are less dramatic but still substantial. At 1 km/h,
for example, FPC Mode 0 power control achieves 3 dB lower 
We see that in all cases
the quality of the link improves as velocity gets above about 3 km/h which is attributable to the
interleaver’s increased ability to span nulls in the Rayleigh fading envelope. Here the performance
differences between fast and slow power control begin to disappear.
We see in Figure 2 an actual crossover between 40 and 50 km/h where frame quality-based FPC
actually begins to works slightly better. This crossover behavior is quite interesting and merits
discussion. As noted above, at high mobile velocities, forward link cdma2000 receiver performance
can improve dramatically depending upon diversity mode. This improvement is due to several
factors. First and foremost, as speeds get higher the interleaver more perfectly randomizes the
observed fading events from the FEC decoder’s point of view. In addition, channel estimation
in fast fading is only slightly degraded since a very strong common pilot channel (typically much
stronger than the low data rate traffic) allows for very short integration periods. For example,
Figure 2 shows little or no degradation in performance in moving from 100 km/h to 300 km/h
velocities. In just such circumstances we begin to see the limitations of fast 
 based power
control. It simply cannot invert the fast fading envelope and the mechanism that gives it the ability
save so much transmit power in slow to moderating fading actually begin to cause a slight waste

245
of power.
In FPC Modes 0, 1, and 2, there is an irreducible delay 
between the time the mobile
sends its power control bit and the time that it receives additional power in its signal. In other
words, by the time the mobile receives the requested change in power, the coherence time of the
channel has potentially passed. This “drawback” is compounded by realities such as imperfect
estimation of 
and relatively high error rates on the feedback. Additionally, since the base
station transmit traffic power is either raised or lowered each PCG and never kept constant (as
long as 
is between its upper and lower limits), fast FPC induces additional variation and
thus added mismatch error in transmit power.
On the other hand, slow frame quality-based power control manages to avoid some of the pitfalls
encountered by fast power control at even faster speeds. What is desired ideally in such fast fading
conditions is for the transmitter to make no attempt at inverting the channel. The receiver will do
quite well (given a well designed interleaver and reasonably strong pilot) if the transmit power is
left constant. This is very nearly what slow power control provides. Its adjustments are much less
frequent, and, except in the case of a frame error, much smaller. This is why slow power control is
shown to perform slightly better than fast power control at high speeds.
However, we should note that the very features of fast FPC which cause the slight degradation
relative to slow FPC at high speeds save the base station a large amount of power at low speeds.
This corresponds to an equally large increase in system capacity exactly where it is most needed.
At high speeds, such a small 
is required anyway that the crossover is practically irrelevant
for most cell sites from a system capacity standpoint. Finally, we point out that when STS is
employed in conjunction with fast power control, the mobile receiver has very low sensitivity to
velocity. In Figure 2 little more than 2 dB separate the very best from very worse performance
over velocities spanning 
orders of magnitude.

246
We now turn our attention to the performance of a FSCH operating at 153.6 kbps in a 9 dB
geometry, shown in Figure 3. Simulation conditions are similar to those of Figure 2, except that
the Reverse Power Control Subchannel provides feedback at 600 bps (FPC Mode 2) and the FEC
turbo coded. We note first that the gain provided by fast power control is somewhat smaller than
that seen in for the FFCH, peaking at around 4 dB for mobile speeds of 1 and 3 km/h for both
non-diversity and STS. As expected, the high data rate FSCH requires a much larger 
than
did the FFCH. The spreading factor is 16 times smaller. For a non-diversity, FPC Mode 4 system,
this high data rate channel requires an 
of up to -4 dB (around 40% of total base station
sector transmit power) even at this favorable geometry. However, STS applied in conjunction with
fast power control alleviates the situation by bringing 
down to a more desirable -12 dB. The
gain of fast power control versus Mode 4 power control at very slow mobile speeds is somewhat
smaller for the high data rate FSCH than for the FFCH shown in Figure 2 for non diversity mode.
At very low speeds, even slow power control is able to track Rayleigh fading. STS gains roughly 4
dB over non diversity, especially for mobile speeds below 3 km/h. For very low mobile speeds, we
see a slight increase of 
with decreasing mobile velocity. The channel estimation averaging
period in the mobile (we use a moving average filter with a window size of 
0.26 ms) is much
shorter than Rayleigh fading period at low speeds. This is a mobile design choice, and behavior in
this region could be improved at the expense of high speed behavior.
Figure 4 shows the results from an experiment with shadow fading. Forward traffic is the 9.6
kbps FFCH described above with mobile velocity of 10 km/h with single antenna transmission. The
shadow fading can be seen as inducing changes in geometry during the life of a simulation, a delta
given by (3) relative to the mean geometry of 6 dB. In this case we ran 20000 FFCH frames of 20
ms duration. During each frame the average 
was measured and plotted as a point relative
to its correspondng effective geometry. To avoid an overburdened figure, only one out of every

247
hundred measurements are plotted. The lines represent a best (log-log) fit to the data. Here we see
an consistent 1.5 to 2 dB advantage for fast (FPC Mode 0) power control over slow (FPC Mode
4) power control. This is slightly more than the 1 dB advantage observed in Figure 2 at 10 km/h.
Although shadowing experiments are much more difficult to conduct via Monte Carlo simulation4,
this result is suggestive that fast power control may give even more gains than observed via static
fading (fast fading only) simulation experiments.
5 Conclusions
The fast forward link power control methods provided by the 3G standard cdma2000 form a very
important part of the set of improvements designed to increase CDMA system capacity over IS-95.
In this work, we compared the transmit power requirements of the RC3 9.6 kbps FFCH and 153.6
kbps FSCH with fast (FPC Mode 0 or 2 respectively) power control and slow (FPC Mode 4) power
control. This effectively isolates the differences in power control from other improvements (such as
lower rate FEC) provided by cdma2000 relative to IS-95. Therefore, for all results, 3G modes were
compared with other 3G modes. Almost without exception fast 
  based power control provides
significant gains over slow frame quality-based methods. This is especially dramatic at low speeds
where 
based FPC provides 2 to 5 dB gain. Moreover, it is just at these speeds where the
improvement is needed most. At very high speeds, where link performance is quite good anyway,
fast power control is shown to suffer minor degradation relative to slow. Experiments performed
4The forgetting factor suggested by (4) rapidly approaches unity for even moderate speeds. This creates a problem
of sampling the random shadow process. Here, all simulation runs were conducted with exactly the same shadow
fading samples.

248
with time-correlated shadow fading are suggestive of even greater gains. Quantifying such gains
via Monte Carlo simulation, however, is a difficult process and is left to future work. Finally, we
note that, combined with transmit diversity (STS), the gains of fast FPC over slow power control
with no diversity, are even more dramatic, promising equally dramatic capacity improvements for
cdma2000 systems.
Acknowledgements
The authors of this paper wish to acknowledge the support, assistance, guidance, and stimulating
witty banter provided by our colleagues at Lucent Technologies-Bell Labs. These include Roger
Benning, Robert Soni, Dirck Uptegrove, Stephen Allpress, Francis Domininque, and Hongwei Kong.
References
[1] TR45.5, Physical Layer Standard for cdma2000 Spread Spectrum Systems. TIA/EIA/IS-2000.2,
1999. (Ballot Version).
[2] EIA/TIA/IS-95A (Electronic Industries Assocation/Telecommunications Industry Associa-
tion/Interim Standard 95-A), Mobile Station-Base Station Compatibility Standards for Dual-
Mode Wideband Spread Spectrum Cellular System. March, 1995.
[3] R. Soni, R. Buehrer, and J.-A. Tsai, “Open-loop transmit diversity methods in IS-2000 systems,”
in Proceedings of the Asilomar Conference on Signals, Systems and Computers, October 1999.
[4] R. M. Buehrer, R. A. Soni, and Q. Li, “Transmit diversity with more than two antennas,” in
Proceedings of the 10th Annual Virginia Tech Symposium on Wireless Personal Communica-
tions, (Blacksburg, VA), June 2000.
[5] M. Gudmundson, “Correlation model for shadow fading in mobile radio systems,” Electronics
Letters, vol. 27, no. 23, pp. 2145–2146, 1991.

Bluetooth: A Short Tutorial
Max Robert
Mobile and Portable Radio Research Group
Bradley Department of Electrical and Computer Engineering
Virginia Tech
probert@vt.edu
Introduction
Bluetooth, a standard defining very short-range wireless communications, has been a
topic of considerable interest in the telecommunications industry since its release in the second
quarter of 1999. There has been considerable hype behind the initial release of the standard,
accompanied by high expectations for the performance of the devices.
Bluetooth is named after a 
-century Viking king known for his success in uniting
Denmark and Norway during his rule around 960 AD. Just as King Harald Bluetooth is known
for uniting different people, Bluetooth-enabled devices promise to unite different information
devices into a single information infrastructure.
Many publications about Bluetooth tout the revolutionary lifestyle Bluetooth will enable
while leaving technically oriented readers somewhat at a loss as to its true technical capabilities.
This short tutorial is intended to provide the reader with a technical overview of all the layers
defined in the Bluetooth standard.
Initially, a general technical description of the Bluetooth standard with details derived
from [1] is presented to the reader. The tutorials begins with a description of Bluetooth’s
application potential and the general environment in which it can operate; this explanation is
followed by a description of Bluetooth’s role in the protocol stack, its software interface, the RF
specification, the baseband radio specification, the logical link control, the services running over
Bluetooth, and Bluetooth’s interoperability with other communications standards. 
Unless
otherwise stated, all technical information presented in this tutorial was collected from [1].
Bluetooth Overview
Bluetooth’s origin and short-term market potential must be considered. 
Bluetooth
emerged through the efforts of a SIG (Special Interest Group) comprised of companies like
Ericsson and Motorola. The Bluetooth SIG in the beginning of the year 2000 was comprised of
more than 1400 members [2]. The expected semiconductor market potential for Bluetooth is
expected to top $3 billion by 2005 [3], while the production of devices is expected to reach 200
million by 2003. This market estimate does not take into account revenue from new markets
derived from new Bluetooth-enabled applications.
The Bluetooth specification describes radio devices designed to operate over very short
ranges – on the order of 10 meters. The original intent of these links was as a replacement to
cables connecting different information devices. The goals of the specification were to describe a
device that is simple and robust, consumes little power, and is very inexpensive to produce, with
a target price on the order of five dollars per device.
Bluetooth Capabilities
To cover most home and office short-range applications, a Bluetooth device must support
two general types of information: voice and data. The necessary link requirements for voice are
different from those for data. While voice can tolerate a certain number of errors in a link, it is

250
highly susceptible to timing errors, including latency and jitter. In order to support voice traffic,
Bluetooth needs to support a data stream on the order of tens of kilobits per second without the
strict requirement that the received data be error-free. On the other hand, data transfers, while
generally lacking the strict timing requirements posed by voice streams, require information to be
nearly error-free. Thus, Bluetooth needs the ability to use a strong error-recovery scheme, though
timing requirements may be loose.
Given the short ranges involved and the types of links expected, the number of users
capable of interfering with one another is relatively small. While a cellular system may be
required to support thousands of users, a 10-meter network will only support a handful of devices.
Bluetooth has been designed with a multiple-access scheme that, while only supporting a limited
number of devices, greatly simplifies the synchronization task required to support a single cell
(known within the Bluetooth specifications as a “piconet”).
Bluetooth Applications
Although the list of applications is limited only by a designer’s imagination, the
Bluetooth SIG suggests five applications that provide a good illustration of the capabilities of the
standard [4]: a three-in-one phone, an Internet bridge, an interactive conference, a headset, and an
automatic synchronizer.
The three-in-one phone is a phone that can operate over a fixed-line phone line when
within range, a mobile phone when outside the home, or as a walkie-talkie with another
Bluetooth-enabled device when within range.
The Internet bridge example allows a mobile computer to interact with another device
within Bluetooth range. The device the computer is interacting with has access to the Internet,
whether through a fixed line or a mobile phone.
The interactive conference example allows the sharing of documents among several
computers during a live conference. Bluetooth-enabled machines can interact with each other
regardless of the available information infrastructure.
A Bluetooth-enabled headset can connect to any Bluetooth-enabled device that requires
voice input or can provide sound, such as a wireline phone, mobile phone, or a music player.
An automatic synchronizer is an application that allows multiple devices, such as desktop
computers, laptops, PDAs, and/or mobile phones to synchronize with each other such that
appointments and contact information available in the different devices matches.
Beyond these five, the list of potential applications using this standard is practically
limitless. Bluetooth has the ability to simplify the wireless connection between two devices to a
level of complexity similar to that required today when connecting two devices using a simple
wire.
Technical Overview
Position in the Protocol Stack
The Bluetooth specification covers details of the physical and data layers of the
communications link. It should be noted that the strict partitioning of the different layers of the
typical protocol stack defined by the OSI model is losing its significance in wireless
implementations, since it is sometimes desired for the application to the underlying layers in
order to improve performance.
Figure 1 is a diagram of the layers described by the Bluetooth specifications.

251
Software/Interface Stack
Bluetooth devices are operated in a host, such as a PC, and communicate with that host
through a physical bus. Figure 2 described this configuration.

252
The Bluetooth Host is the machine that contains the application, which resides in some
sort of computer. The host contains the Host Controller Interface driver, which provides the APIs
that allow the communication between the Bluetooth Host and Bluetooth Device; the host also
contains the Physical Bus driver. This driver supports the operation of the data connection
between the host and the Bluetooth device.
To provide the connection between the host and the Bluetooth device, the Physical Bus is
used. The only software that resides in the bus is the firmware necessary to operate the bus.
The Bluetooth Hardware is the device that contains the Bluetooth communications
hardware; its software contains the Host Controller Interface firmware, providing the connectivity
between the Bluetooth device and the host. In the Bluetooth Hardware also resides the sofware
for the Baseband controller, allowing the implementation of the baseband radio, which is
explained in the following sections.
Host Controller Interface
The Host Controller Interface (HCI) provides connectivity between the application and
the Bluetooth device; it acts as a uniform interface to access all Bluetooth hardware capabilities.
To achieve this goal, the HCI contains a set of commands for the hardware, a handle to possible
events, and access to errors codes. 
Included in the HCI are commands such as
Create_Connection and Disconnect, events such as Encryption Change Event and Command
Complete Event, and errors handles such as Hardware Failure and Host Timeout. The HCI is an
outer layer around the connection between the device and the host – this layer operates over a
transport layer providing the actual connection between the Bluetooth device and the host.
Transport Layer
As mentioned in the previous section, the transport layer is the layer between host
controller driver and the host controller; an example of the transport layer is a PC card. The main
goal of this layer is transparency: the host controller driver does not care what the transport
method is. This transparency allows upgrades to the HCI or host controller without changes to
the transport layer. The transport can be performed over USB, RS232, or UART. USB
(Universal Serial Bus) is a serial bus that is typically available in computers such as latptops, the
RS232 serial bus is a common bus format that has been standard equipment of computers for
several years, and UART (Universal Asynchronous Receiver/Transmitter) is a generic serial bus
description that has been available for several years; UART can be set such that it conforms to
RS232 specifications.
The previous sections described the connection between a host and the Bluetooth device
and provided some general information on how commands are passed to the Bluetooth device.
The following sections describe the baseband device, its RF specification, and service protocols
that can be used by the application to easily access and control the Bluetooth device.
Physical layer/RF Specification
Bluetooth devices operate in the ISM (Industrial, Scientific, and Medical) band at 2.4
GHz. While the ISM band has been allocated throughout the world, its specific position is
country-dependent. However, the United States and most of Europe have allocated the space
between 2400 and 2483.5 MHz for this band. Bluetooth devices use 79 channels within this
band, each occupying 1 MHz; Japan, Spain, and France have enough bandwidth allocated for
only 23 channels.

253
Bluetooth uses a frequency-hopping, TDD scheme for each channel. The master device
determines the frequency-hopping scheme, whose nominal hopping rate is 1600 hops per second,
and also sets the piconet clock. In order to guarantee a uniformly-distributed hopping sequence,
it is determined by a cyclic code of length 
while this sequence is repetitive, in a short
window of time it looks like a uniform random variable.
Transmissions are performed in 
slots, with a single packet being transmitted per
slot. The frequency hops every time there is a new packet, matching the framing method to the
hopping sequence. The multiplexing methodology is tightly controlled by the device, where
TDD is implemented by alternating the master and slave transmission slots, with the master
transmitting in even-numbered slots, and slave(s) transmitting in odd-numbered slots.
In order to support asymmetric links, devices have the option of transmitting a single
packet lasting as much as five slots; the center frequency used for each packet does not change
until that packet has ended, regardless of the number of slots the packet occupies. This strong
link between the packet structure and the hopping scheme means that the frequency-hopping rate
may drop below 1600 hops per second.
The modulation used is a Gaussian-shaped, binary FSK modulation scheme, with a
symbol rate for the channel is 1 Msymbol per second, yielding a maximum raw bit rate of 1
Mbps. Since there is considerable overhead in each packet (discussed in later sections), and since
there is a window of time given to allow the oscillators to settle at the new frequency, the actual
data rate is significantly lower than 1 Mbps. Furthermore, the error-recovery scheme used by
Bluetooth, also discussed in later sections, performs re-transmissions of selected packets whose
errors are detected but not corrected, further lowering the data rate.
Baseband Specification
The baseband specification provides a description the inner workings of the Bluetooth
radio, including its connection format, error recovery, packet structure, and link parameters.
Connectivity
The basic Bluetooth network is called a piconet, defined as the set of at most seven active
devices operating under the control of a single device. Note that while the limit is seven active
devices, there can be many more devices in other, inactive or passive modes. A set of Bluetooth
piconets is called a scatternet; the piconets in a scatternet do not need to be integrated in any way.
The piconet is centered on a single Bluetooth device called a master, who controls a
channel and all the slave devices operating in that channel. To become a master, a device
requests a connection with another device: if the paged device accepts the link, the calling device
becomes a master for that link and the responding device becomes a slave.
Every Bluetooth device is exactly the same except for a 48-bit device identifier
(BD_ADDR). The application residing above Bluetooth is the part of the system that determines
which device is master or slave by the simple act of requesting a Bluetooth device to establish a
link.
As can be inferred from the simple manner in which a device can become a master or a
slave, the network layout for a set of Bluetooth devices is a dynamic environment. This dynamic
behavior is supported by the set of modes in which devices can operate. These modes allow the
sharing of devices across multiple piconets in a scatternet. These modes, discussed in a later
section, also give devices the freedom to enter power-saving states.
Figure 3 shows an example of the link style Bluetooth employs: a scatternet consisting of
two piconets, and a slave device shared between two different piconets in a scatternet.

254
Error Recovery
Bluetooth is intended to operate in very low quality channels, where the raw channel
BER is expected to be as high as          In order to operate reliably in such a channel, several
layers of error correction have been added to the standard, implemented in three forms of error
recovery: rate 1/3 FEC (Forward Error Correction), rate 2/3 FEC, and an ARQ scheme.
Rate 1/3 FEC
The rate 1/3 FEC is a 3-bit repetition of every field of the form:
This FEC scheme is used on all the packet headers and for the body of the HV1 packet type
(packet types are discussed at a later point in the tutorial). The decoding method for this type of
code is very simple, and can be implemented through a voting method with very little overhead.
This simplicity comes at a cost, adding data redundancy that is not bandwidth efficient.
Rate 2/3 FEC
The rate 2/3 FEC is a (15,10) shortened Hamming code with generator polynomial
This format is used on certain types of payloads; a detailed description of the
packets providing this level of protection is given in Appendix B. The payload of these packets is
broken up into 10-bit blocks, and a 5-bit redundancy set is inserted after each corresponding 10-
bit block, generating a 15-bit word. The decoding method for this type of code is considerably

255
more complex than the 1/3 rate code. This added complexity provides a very robust error-
correction code that is considerably more efficient than the repetition 1/3 rate code.
ARQ Scheme
Bluetooth uses an unnumbered ARQ scheme with an acknowledgement scheme based on
single ACK or NACK for each received packet. Each packet header contains a single bit, which
is used as an ACK flag.
Given the structured TDD scheme used by Bluetooth, the ARQ scheme can be easily
integrated; a slave will acknowledge the receipt of the packet from the master in the slot
immediately after the master’s send slot. To have a positive acknowledgement, the minimum
requirement is that HEC in the packet header be correct and the CRC (if present) must check.
Link Types
There are two link types available in Bluetooth, Synchronous Connection-Oriented
(SCO) and Asynchronous Connection-Less (ACL) links.
An SCO link is a symmetric, dedicated link between two devices; this dedicated channel
is a circuit-switched connection whose target application is voice. The ACL link is an
asynchronous link that uses those slots in a piconet that are not dedicated to an SCO link; the
target application for ACL is data. In ACL links, a slave is limited to transmitting to the master
only in the slot directly after the slot where the master addressed this particular slave.
Broadcast messages to the whole piconet are possible using ACL by addressing the all-
zeros device in the packet header. Another benefit of ACL is that if the master has no
information to send, and no polling is taking place, then the channel may be idle.
Link Management
The Link Manager Protocol (LMP) performs link management. The LMP performs link
configuration, including quality of service support, security, and establishment of the logical
channels. There are two primary states for Bluetooth supported by the LMP: Standby and
Connection. Apart from these states, there are seven states that are interim states designed to add
new slave devices to a piconet. These seven states are Page, Page Scan, Inquiry, Inquiry Scan,
Master Response, Slave Response, and Inquiry Response.
Standby State
The standby state is the default power-up state. If the device issues a page or inquiry
message and the message is replied to, then the device enters the Connection state as a master.
On the other hand, if the device scans a page or inquiry message and responds to it, then the
device enters the Connection state as a slave.
Inquiry, Inquiry Scan, and Inquiry Response States
The goal of the inquiry set of states is to allow a device to find out which devices are
available within transmit/receive range. The Inquiry Scan state is used to scan on a frequency
based on the inquiry access code; the length of time of the scan is a minimum of 18 time slots.
A device that wishes to query a slave scanning the Inquiry state frequencies does so from
within the Inquiry state. The frequencies over which the inquiry is broadcast are based on the
inquiry access code. The Inquiry state is used only to query the devices in the Inquiry Scan state,

256
so connection state cannot be reached from an inquiry state. The Inquiry Response state is a
transition from the Inquiry Scan state, and is only achieved by the slave device responding to the
request from the device in the Inquiry state.
Page Scan State
In this state, the device regularly scans a single hop frequency for at least 11.25ms, or 18
TDD slots; this state can be entered from either the Standby or Connection states. To enter the
Page Scan state from the Connection state, the device needs to free as much available scan time
as possible, preferably by entering the Hold or Park modes (these modes are discussed at a later
point in more detail). 
The scan frequency is derived from the Bluetooth device address
(BD_ADDR). To enter the Slave Response state, a correlation for the device access code is
performed – when the correlation threshold is passed, the device enters the transition in states
occurs.
Page State
The Page state is entered by a device that establish a connection with a particular slave.
Based on the slave’s BR_ADDR, the master determines on which frequency to transmit the page.
This state is best explained in the next section, where the paging process is shown.
Slave Response/Master Response States
Figure 4 shows the progression of messages and states while a page request is being
serviced. After receiving a page, the slave device transmits an ID packet (described in Appendix
A) 625 µs after the paging ID packet.

257
Upon receiving the ID packet from the slave, the master device enters the Master
Response state. In this state, it issues an FHS packet (FHS packet types are described in
Appendix A) to arrange the piconet hopping sequence for use in the channel and to synchronize
the clocks of the two devices. When the slave device receives the FHS packet, it issues another
slave ID packet to acknowledge the receipt of the FHS packet.
After issuing the ACK, the slave device switches to the master’s frequency hopping
sequence for the piconet and it enters the Connection state. The master cannot enter the
Connection state until the ACK is received from the slave device. Once the ACK has been
received, the master enters the Connection state and begins the transmission of data on the master
frequency-hopping scheme.
Through this process, a connection in a piconet is established between a master and a
slave.
Connection State
The Connection state is the state in which data is exchanged between the master and the
slave, and the final result of the transaction seen in Figure 4. The first packet sent by the master
is a POLL packet (explained in Appendix B) to make sure that the slave switched to the proper

258
frequency hopping scheme and that the clocks are synchronized. If the master does not receive
the slave’s response or if the slave does not receive the POLL packet from the master, then the
master/slave return to the Page/Page Scan states.
After the POLL packet, the master sends link details to the slave. These details include
the definition of the type of link and the sniff parameters (more details on sniff mode are shown at
a later point in the tutorial). After the details have been passed to the slave, the actual connection
begins with the TDD exchange of packets between the master and the slave.
The Connection state is exited through either a “detach” or “reset” command. The
“detach” command terminates the connection but maintains the link parameters, while the reset
command performs a hard reset of the device, eliminating all the existing configuration
information.
The Bluetooth device modes, some of which were mentioned above, are shown in the
following sections.
Active Mode
In this mode, the slave participates actively on the channel – the master schedules all the
traffic use between the different devices in the piconet. To conserve batteries, slave devices have
the option of sleeping while the master is not addressing them.
Sniff Mode
While in normal ACL operation, the slave needs to listen during every single slot in
which the master is transmitting; the sniff mode allows the slave to listen to only a specific subset
of the slots in which the master is transmitting. This reduction in duty cycle for the listen mode
of the slave can be used to listen to transmissions in another piconet in which the slave device is
also a slave.
Hold Mode
The ACL link to a slave can be placed on hold, allowing the slave to scan, page, inquire,
or handle another piconet. During hold mode, it is also possible for the slave device to sleep,
conserving power. During hold mode, the slave remains part of the piconet, so it does not lose its
active member address, a 3-bit address that is used to address each of the active slave members in
the piconet.
Park Mode
In the park mode, the slave remains synchronized to the channel, but it does not actively
participate in it. The slave receives two addresses after it has parked. PM_ADDR is an 8-bit
parked member address, which can be used by the master to un-park the slave. AR_ADDR is the
8-bit access request address, which is used by the slave to perform a slave-initiated un-park. In
the park mode, it is possible for a slave device to remain a member of a piconet while not taking
up an active member address. As mentioned in the previous sub-section, the active member
address is a 3-bit address used to identify each of the seven active slave devices in a piconet.
Because of this 3-bit limit, it is important to be able to manage the active member list, and allow
inactive devices to temporarily cease their active participation in the piconet.

259
Packets
Data sent across a piconet is sent in packet format. While the packets take the general
format shown in Figure 5, there are several types that are used to support a variety of services.
As shown in figure 5, packets are broken up into three pieces, an Access Code, and
Header, and the packet Payload. Appendix A describes the content of each section of the packet.
All packets in Bluetooth Mow this general format.
Packet Types
In order to provide different quality of service (QoS) guarantees to the application,
Bluetooth can support a wide variety of packet types. These packet types are broken up into three
classes: packets supporting the link types SCO, ACL, and both. A description of each available
packet is presented in Appendix B. In general, the common packets are used to perform control
and general maintenance functions. These packets are primarily used for housekeeping.
The SCO and ACL packets are used for data transport, where different packet formats are
used to support various service loads as well as multiple levels of QoS. The required support of
asymmetric loads and different levels of error correction/detection in this system means that
multiple packet formats need to be supported.
Since different types of information can be sent over a Bluetooth link, the format of the
payload needs to change to satisfy each of these payload needs. This format is used to support
either voice or data.
The voice field is available in only SCO packets. The voice field length 240 bits for the
HV packet series and 80 bits for the DV packet. There is no payload header in voice fields.
The data field contains a payload header, payload body, and, with the exception of the
AUX1 packet, a CRC code. The payload header is either one or two bytes long, and contains a
logical channel indication, flow control on the logical channels, and a payload length indicator.
The CRC code is generated by the CRC-CCITT octal polynomial 2 1 0 0 4 1.
Audio Support
Bluetooth uses 64 kbps Continuous Variable Slope Delta Modulation (CVSD) or 64 kbps
PCM using either A-law or 
law – The PCM coding method follows the ITU-T
recommendations G.711.
The CVSD codec uses syllabic companding to reduce the slope overload effect. In other
words, the step size used in the delta modulation is adapted as a function of the average signal
slope. Using negative steps represented as “1” and positive steps represented as “0”, the input
signal is encoded.
The minimum and maximum step sizes are bound between 10 and 1280, and the
accumulator maximum and minimum are set to 
and 
respectively.

260
The CVSD audio quality requirements are placed on the transmitter, where the 64 kbps
linear PCM input signal needs to have a power spectral density above 4 kHz set 20 dB below the
power spectral density below 4 kHz.
Security Specifications
The Bluetooth standard contains a detailed description of the security process necessary
to perform key management and encryption of data. While this material is important in the
deployment of the devices, it is beyond the scope of this tutorial. However, a brief description of
the elements making up the encryption process is provided in the following paragraphs.
In order to maintain a level of security in the transactions between devices, there are four
basic elements: public address unique to each user (BD_ADDR, 48 bits), private user key
(authentication, 128 bits), private user key (encryption, 8-128 bits), and a random number (128
bits). BD_ADDR is the unique Bluetooth unit 48-bit IEEE address derived from the UUID
(Universal Unique Identifier), which is publicly known and can be obtained through device
interaction. The secret keys are derived during initialization and are not disclosed. Because of
encryption export restrictions, the encryption private user key is variable-length ranging between
8 and 128 bits; the encryption key is derived from the authentication key. A random number
generator is used to generate the authentication and encryption keys.
Logical Link Control
The Logical Link Control and Adaptation Layer Protocol (L2CAP) is layered over the
baseband protocol, which was described in the above sections. The goal of L2CAP is to support
services, including protocol multiplexing, segmentation/reassembly of packets, quality-of-service
(QoS), and group abstraction.
Protocol Multiplexing
Protocol multiplexing is the ability to mix multiple services on top of the Bluetooth
device. Since the baseband protocol treats all data packets equally, L2CAP is necessary to
distinguish the different services running on top of the device so that the needs of each service are
met. The three protocols described in the standard that can be multiplexed by L2CAP are the
Service Discovery Protocol (SDP), RFCOMM (emulation of a serial link), and Telephony
Control.
Segmentation/Reassembly of Packets
One of the basic limitations of the Bluetooth baseband protocol is that the packets that
make up its transport service are size-limited. In order to accommodate large packets, it is
necessary to breakup and reassemble those packets as they enter the transmitter and exit the
receiver; L2CAP performs this segmentation/reassembly process.
L2CAP performs an integrity check on the data by leveraging the 16-bit CRC that is
already available in the baseband protocol. Furthermore, the ARQ mechanism used by the
baseband protocol is also used to guarantee data integrity at the receiver.
Quality-of-Servlce (QoS)
L2CAP supports QoS messages between Bluetooth devices. However, the only service
that is required implementation in each device is the “Best Effort” service; in other words, the

261
only QoS guarantee that is required in the standard is a service with no guarantees. Other QoS
services are optional. These services include: token rate, token bucket size, peak bandwidth,
latency, and delay variation. Each of these services are commonly used in network management
to create QoS guarantees.
Group Abstraction
The Bluetooth baseband protocol is based on the concept of a piconet. If an application
is to optimize its operation such that the piconet structure matches the operation of the
application, it is necessary for that application to have direct access to the baseband protocol or
link manager. However, this can lead to a very complicated structure. In order to avoid this
problem, L2CAP provides a Group Abstraction mechanism, such that specific services and
applications provided within a group of devices can be mapped to the piconet architecture. This
mapping process allows the application to take full advantage of the standard’s piconet
architecture without the application needing to have direct access to the lower layers of the
protocol stack.
Services
Bluetooth is capable of simultaneously supporting multiple services, allowing the full use
of the dynamic nature of the baseband system. The following sections describe these services.
Service Discovery Protocol
From a data standpoint, the Service Discovery Protocol (SDP) is one of the more
interesting services. SDP allows a Bluetooth device to query nearby devices and find out which
services are available for usage.
The client application interfaces with the SDP client, requesting either a search of
services or a connection using one specific service. The SDP client interfaces with the SDP
server in another device, which can service the request forwarded by the SDP client. The SDP
server is aware of the services running on the server device through its interaction with the local
applications.
Basic Functionality
SDP functionality is fairly simple – an SDP client requests information from a nearby
SDP server. The SDP server returns a Service Record, which contains a list of the service
attributes. If the client decides that the returned service description meets its current needs, and if
the authentication process succeeds, then a connection is established.
A separate connection is required to initiate the service. The connection used to perform
the SDP process is limited to SDP functionality only, so a new link needs to be established to
deliver a particular service.
SDP Description
A Bluetooth device contains at most a single SDP server. This server manages the SDP
protocol for every server application running in that one Bluetooth device. Since Bluetooth is
designed to be able to support multiple applications, such that a device can be a master, a slave,
or both, a single Bluetooth device can contain an SDP client and server at the same time.

262
The Bluetooth SIG set several goals for the SDP, leading to multiple service
requirements.
The ease with which devices can enter and exit an area means that SDP needs to operate
in a dynamic environment. In order to support this dynamic operation, SDP is required to allow
dynamic service discovery, where a device is permitted to enter or exit a coverage area at will
with no adverse effects on the other SDP clients/servers.
Since Bluetooth devices are intended to operate over a wide variety of devices with little
or no supervision by a regulatory institution, SDP is required to support the creation of new
services without their registration with a central authority. Furthermore, in order to be able to
identify the services in a device with no conflicts, the services are required to have uniquely-
identified services/service classes. These two requirements may seem contradictory; since there
is no regulatory body overseeing the creation of services, how can services be uniquely
identified? Bluetooth is capable of creating unique identifiers by associating services with a
UUID (Universally Unique Identifier), a 128-bit identifier that guarantees that the identifier is
unique. Through the use of the UUID, it is possible to guarantee uniqueness while at the same
time avoiding a central authority.
Services operating over SDP are classified as services and service classes. A service is a
specific instance of a service class. The service class defines all the attributes that are possible to
instances of that class, and the service is a specific collection of desired attributes. A service
class is usually a subclass of another service class, where a subclass inherits all the attributes of
the superclass. An example of a subclass structure is seen in Table 1; in this example, a
Bluetooth device is used to replace the cable connecting a low-bandwidth data source to an
adaptive array.
• 
AdaptiveAntennaArrayClassID
• AntennaArrayClassID
• 
AntennaClassID
Table 1 - Example of adaptive antenna ServiceClassIDList
In the example shown above, several classes of services are shown, where
AdaptiveAntennaArrayClassID is a subclass of AntennaArrayClassID, which in turn is a subclass
of AntennaClassID. Through such a hierarchy, a related set of services can be established,
simplifying the discovery process. This service class hierarchy can lead to a clean organization in
the service structure.
There are several service attributes that can be associated with a service class. These
attributes include ServiceName (a human-readable text name), ServiceID (derived from the
UUID), ServiceClassIDList (list of classes in which the service is an instance). Table 1 is an
example of an adaptive antenna ServiceClassIDList. This set of attributes defines the class.
Since the service class ID may not be sufficient to determine its applicability to the
current application needs, Bluetooth requires SDP to allow the search of services based on the
service attribute. Furthermore, since services may be created without central control, a device
may be unaware that another device within communication range operates a service of interest.
To overcome this problem, Bluetooth requires SDP to allow services to be browsed without
apriori knowledge of service characteristics. Furthermore, a device may be limited in its ability
to handle the full functionality of a particular service, so Bluetooth requires SDP to allow gradual
service discovery, where the service capabilities made available to a client are limited by that
client’s ability to handle those service attributes. Service caching is also required, since it can be
used to significantly reduce traffic in a system.
Since SDP is required to run over a device that is intended to be very inexpensive (and
very simple), SDP is required to be very simple.

263
Finally, the Bluetooth SIG recognized that SDP may not be sufficient to cover all the
needs of the applications running on a Bluetooth device, so it required SDP to allow the usage of
other service discovery protocols. In order to support applications with large packets, multiple
protocols or QoS requirements, SDP is required to support L2CAP functions.
Based on these requirements, SDP has defined a hierarchy of service classes and service
attributes such that a powerful methodology for supporting a wide variety of services is available.
Emulation/Telephony Protocols
Two emulation/telephony protocols are described in the Bluetooth standard to support
services: RFCOMM and Telephony Control Protocol
RFCOMM is the emulation of a serial port over the L2CAP protocol. Using RFCOMM,
it is possible to support up to 60 simultaneous connections between two Bluetooth devices – the
actual maximum of supported connections may actually be less than 60, and is implementation-
specific. Using RFCOMM, Bluetooth can act as a replacement for the serial cable.
The telephony control protocol allows the establishment of telephony functionality over
Bluetooth devices. The protocol allows call control, where speech or data calls between
Bluetooth devices can be established or terminated. Group management allows the easy handling
of groups of Bluetooth devices. Finally, the protocol can support connectionless
communications, allowing the exchange of signaling information that is not related to the on-
going call.
Integration with Other Wireless Services
The Bluetooth standard allows the interoperability between Bluetooth and other wireless
communications protocols; the standard lists three specific protocols: IrDA and WAP.
IrDA
The concept behind IrDA interoperability is to support the development of applications
that are compatible with both short-range RF and IR links. To achieve this goal, a technology
overlap with IrOBEX (Infrared Object Exchange Protocol) was pursued. IrOBEX was defined by
IrDA (Infrared Data Association) – in Bluetooth, IrOBEX is referred to as OBEX. 
The
technology overlap is achieved by mapping OBEX over RFCOMM and TCP/IP; the mapping
over TCP/IP is optional.
The connection-oriented version of OBEX is mapped over the connection-oriented
Bluetooth architecture. Using OBEX, it is possible to exchange data objects. This functionality
allows the implementation of simple commands such as Connect, Disconnect, Put, Get, SetPath,
and Abort.
WAP
WAP (Wireless Application Protocol) is a standard that was developed to allow a mobile
phone to access the Internet. In this interoperability case, Bluetooth is used as the physical layer
and link control to connect two WAP-enabled devices; in other words, the physical layer such as
GPRS or GSM is replaced with Bluetooth. Using these interoperability guidelines, its is possible
to access the Bluetooth device through a WAP application, providing applications that can
operate over a wide-area network over a PCS infrastructure as well as over a Bluetooth LAN.

264
The WAP interoperability guidelines are supported through a combination of PPP (point-
to-point protocol) and RFCOMM. SDP is also supported, allowing WAP to access the dynamic
service discovery environment provided by Bluetooth.
In order for the WAP interoperability to be functional, a WDP (Wireless Datagram
Protocol) management entity is needed – WDP is the WAP layer that provides transport
comparable to UDP (socket-based, unreliable delivery). The management entity provides an out-
of-band mechanism for controlling the protocol stack, providing support for the detection of
nodes and other events.
Critical Perspective
Initial work with Bluetooth has pointed to a very robust and flexible standard that should
be able to support a wide variety of services. While the outlook for the performance of the
standard is good, it leaves several questions open as to its ability to co-exist with other devices in
the same spectrum.
Along with Bluetooth, there are several systems intended to operate over the ISM band,
including some versions of the IEEE 802.11 wireless networking standard. While Bluetooth is
fairly robust, its effect on other devices has the potential for causing a significant disturbance.
Unfortunately, predictions done before deployment are based on broad deployment assumptions,
and the gravity of this problem cannot be determined until these systems see wide-scale
deployment in a real-world environment and until the applications that have broad appeal are
developed and deployed. Since the physical layer of these systems is limited in its ability to
change to account for changes in the RF environment, one of the key issues governing
performance is the application. The supported application determines the traffic that these
devices will need to support, and hence the amount of energy that these devices are expected to
broadcast.
Recently, there has been a flood of possible applications growing from both the
established corporate and the entrepreneurial communities; the potential in Bluetooth has been
identified by many people and has led to no shortage on ideas for applications. Thus, from a
market standpoint, application concepts do not seem to be a barrier to Bluetooth’s success.
However, two primary challenges have been identified that will play an important role in
determining the success of Bluetooth as a way of connecting people: application interoperability
and price.
The concept of application interoperability is the ability for multiple applications to share
a single physical interface without causing confusion within the device and with other Bluetooth
devices. Bluetooth’s Service Discovery Protocol is a mechanism that can help avoid this
problem. However, the ability of the application developers to properly use the device/protocol
will determine the degree to which this problem is avoided.
The price of the Bluetooth device is a central concern to developers; Bluetooth devices
need to hit a price point that is low enough to allow these devices to turn into commodities that
can be added to practically any appliance/tool. The key to the low price point for these devices is
the single-chip solution, since the bulk of the cost would be limited to the initial design rather
than the fabrication process. Manufacturers such as Ericsson have announced full solutions [5],
with a single-chip solution predicted for the near future. Only time will tell if conditions allow
the market to push the cost of these devices to the anticipated price point.
In the year 2000 or 2001, the specifications for Bluetooth 2.0 will be released [1]. While
there has been significant speculation towards the capabilities of this new version of the standard,
no information has been released to the public concerning the problems it is intended to address
and its expected capabilities.

265
Conclusion
Bluetooth is a standard that is designed to enable inexpensive, robust, and secure
communications over short distances. 
This tutorial provided a general description of the
Bluetooth standard, providing the reader with an overview of the potential as well as the
limitations of this standard. The flexible architecture of Bluetooth opens the door to the design
and inexpensive implementation of several applications that add a whole new dimension to short-
range communications. The future holds great hope for short-range data communications, and
Bluetooth goes a long way in setting the path to ubiquitous, integrated data services.

266
Appendix A – Packet Format
This appendix describes the content of the fields in the general packet format, a picture of
which is seen in Figure 5.
Access Code
The access code is a 72-bit block that is used in all packets except the FHS packet, which
is discussed in Appendix B. The access code is used to perform packet synchronization, DC
offset compensation, and identification.
The Bluetooth receiver performs a sliding correlation and triggers the receiver when the
correlation exceeds a threshold.
The access code can be one of three different types: Channel Access Code (CAC),
Device Access Code (DAC), and Inquiry Access Code (IAC). The access code is broken up into
a 4-bit preamble, a 64-bit sync word, and (occasionally) a 4-bit trailer.
Header
The 1/3 rate error recovery is used in the header of all packets. The packet header is used
for link control. The six fields making up the header are: AM_ADDR, TYPE, FLOW, ARQN,
SEQN, and HEC.
• 
AM_ADDR: a three-bit field that contains the piconet member address. These three
bits are used to address the seven slave devices making up a piconet – the all-zeros
address is used as a piconet broadcast. The only exception to the all-zeros broadcast
is when an FHS packet is sent (FHS packets are discussed in Appendix B).
• 
TYPE: a four-bit field that contains describes the packet type. The interpretation of
this field depends on the link type (i.e.: SCO link type).
• 
FLOW: a single bit that is used by ACL links to perform flow control. This field
takes on the value zero when the receiver buffer is full.
• 
ARQN: a one-bit acknowledgment used in the AQN mechanism.
• 
SEQN: a bit that is inverted every time that a new packet with data and a CRC is
transmitted.
• 
HEC: the header-error-check. This is an 8-bit word that is generated with octal
polynomial 6 4 7. The HEC is calculated for the 10 header bits.
Payload
The payload is a variable-length field that contains the information that is sent in the
packet. The level of error correction and the existence of this field is a function of the packet type
that is transmitted.

267
Appendix B – Packet Description
This appendix has a description of the different types of packets that are available in only
SCO or ACL links, and as well as those that are available in both types of links.
Common Packets
The common packets are those packets that can be used in either SCO or ACL link types.
The five packet types are: ID, NULL, POLL, FHS, and DM1.
ID Packet
The ID packet is the device access code (DAC) or inquiry access code (IAC) with no
Header and no Payload. The total length of this packet is 68 bits. This packet is generally used
as a response to paging or inquiry requests.
NULL Packet
The NULL packet consists of the channel access code and the packet header, but no
payload. The total length of this packet is 126 bits. While this packet does not need to be
acknowledged, it is used to return the values of the ARQN and FLOW fields.
POLL Packet
The POLL packet is similar to the NULL packet. The primary difference is that this
packet does not affect the ARQN and SEQN fields – this packet would be used by a master to
poll a slave device, which would need to respond with an acknowledgment, regardless of whether
or not it has data to transmit.
FHS Packet
The FHS packet is used for control, and it used to reveal piconet information to the
member devices. Examples of the revealed information include the Bluetooth device address and
the system clock. The 2/3 rate code is used to protect the payload, which contains 144 bits plus a
16-bit CRC code. The packet contains 240 bits and covers a single slot.
DM1 Packet
The DM1 packet can carry regular data, but is part of the common type of packet group
because it can be used to support control messages. While this packet is commonly used in ACL
links, it can be used in SCO links, where it is capable of interrupting a synchronous link in order
to send control information.
SCO Packets
The SCO link is designed to transmit voice, so these packets contain no CRC, and these
packets are also not retransmitted. These packets are typically used to deliver 64 kbps speech
transmissions.

268
HV1 Packet
HV stands for High-quality Voice, describing the intended primary service intended for
this type of packet. The HV1 packet transports 10 bytes protected by the 1/3 rate error-correction
code. No payload header is present, and the total payload length is limited to 240 bits. This
packet can carry 1.25 ms of speech encoded at 64 kbps. To maintain an SCO link using HV1
packets, an HV1 packet needs to be sent every two time slots.
HV2 Packet
The HV2 packet is similar to the HV1 packet. The primary difference is that it uses the
2/3 rate error-correction code on its payload, allowing it to carry 20 information bytes. This
reduced redundancy allows each packet to carry up to 2.5 ms of speech; to maintain an SCO link
using HV2 packets, an HV2 packet needs to be sent every four time slots.
HV3 Packet
The HV3 packet is similar to the HV1 or HV2 packets, with the primary that it carries no
error-correction code, allowing the code to carry 30 information bytes. The unprotected packet
can carry 3.75 ms of speech; to maintain an SCO link using HV3 packets, an HV3 packet needs
to be sent every six time slots.
DV Packet
The DV packet contains a mix of voice and data: 80 voice bits and up to 150 data bits.
While the voice field carries no error-correction codes, the data is encoded with a 2/3 rate error-
correction code. The voice and data content of each packet is treated differently; the voice field is
never retransmitted, while the data field is retransmitted until a transmission with no detected
errors is received.
ACL Packets
ACL packets are used in asynchronous links, and are designed to carry data. While the
DM1 packet is designated as a common packet, it is considered to be an ACL packet – DM1 is
used in SCO links to carry control information.
DM1 Packet
DM stands for Data-Medium rate. The payload contains 18 information bytes, one of
which is a payload header and an added 16-bit CRC code. The payload in this packet type is
encoded with the 2/3 rate error-correction code. DM1 packets occupy only one slot.
DM3 Packet
DM3 packets are very similar to DM1 packets. The only difference is that, unlike the
DM1 packet, the DM3 packet occupies three slots. The extra length allows a DM3 packet to
carry 123 data bytes, including a 2-byte header, with an added 16-bit CRC code.

269
DM5 Packet
The DMS packet is, like DM3 packets, a variation of the DM1 packet. The only
difference between DM5 and DM1 is that DM5 packets occupy five slots, allowing it to carry up
to 226 information bytes, including a 2-byte payload header and an added 16-bit CRC code.
DH1 Packet
DH stands for Data-High rate. Unlike the DM series of packets, DH packets carry no
error-correction codes. The only error recovery used by DH packets is error detection through a
16-bit CRC combined with the ARQ scheme. DH1 packets can carry up to 28 bytes of
information.
DH3 Packet
DH3 packets are very similar to the DH1 packets. The only difference is that DH3
packets occupy three time slots. DH3 packets carry up to 185 information bytes including a two-
byte payload header as well as a 16-bit CRC code.
DH5 Packet
DH5 packets are also a variation of DH1 packets. The only difference between DH1 and
DH5 packets is that DH5 packets occupy five time slots. The extra transmission time per DH5
packet allows DH5 packet to transport up to 341 information bytes including a two-byte payload
header, with an added 16-bit CRC code.
AUX1 Packet
The AUX1 packet is a variation of the DH1 packet. AUX1 packets occupy a single time
slot and use no payload CRC code. The lack of error-detection capability allows the AUX1
packet to transport 30 information bytes, including a 1-byte payload header. Since no CRC code
is used on the payload, no retransmission is possible if there are errors in the packet payload.

270
Reference:
1 – http://www.bluetooth.com/developer/specification/specification.asp
2 – http://www.bluetooth.com/
3 – http://www.pcsdata.com/CahnersBluetooth.htm
4 – http://www.bluetooth.com/bluetoothguide/models/two in one.asp#top
5 – http://bluetooth.ericsson.se/ebc/solulion.asp
About the author
Max Robert is a Ph.D. student at Virginia Tech’s Mobile and Portable Radio Research
Group and is currently working with Dr. Jeffrey H. Reed. Mr. Robert attended Case Western
Reserve University for his undergraduate work, where he received several honors and
scholarships, including the Albert W. Smith scholarship. He graduated magoa cum laude with a
Bachelor of Science degree in Electrical Engineering and Applied Physics in 1996. Mr. Robert
received his Master of Science degree in Electrical Engineering from Virginia Tech in 1998. His
research focused on joint channel-video coding for MPEG-2 transmissions over high-bit-error-
rate channels, for which he received the Paul E. Torgersen Graduate Student Research Excellence
Award in 1999. 
Mr. Robert’s Ph.D. research focuses on data network performance and
interference issues. Mr. Robert is a Bradley Fellow of the Bradley Department of Electrical and
Computer Engineering at Virginia Tech. Mr. Robert is also Vice-President and co-founder of
DotMobile, Inc., a company that focuses on wireless information technology.

INDEX
A
access code 265
ACK 255
active mode 256
adaptive 205-215
adaptive antennas 145
Adelaide 59
Adelaide propagation signatures 60
AM_ADDR 265
antenna-body interaction 15
ARQ 254
ARQN 265
asynchronous connection-less 255
attenuation 53, 173, 177
attenuation factors 53, 173, 177
audio 259
Australian cities, 59
AUXI Packet 268
average number of rays 58
B
bandwidth 169-172
barriers 53
base station deployment 162, 163
BD_ADDR 253
Bluetooth 2.0 264
body-worn terminal 18
building database 36
C
calibration 48, 77-87
canceller 205-215
capacity analysis 89-99
CDMA 23-34
CDMA planning 162, 163
cellular system 89-99
center frequency 171, 172
channel capacity 77-87
channel estimation 153, 234
channel interference 169
channel model 181-192
channel modeling 45
class 261
clear channel assessment (CCA), 176
co-channel interference reduction 77-87
commercial cost 160, 161
continuous variable slope delta modulation 259
convolutional codes 23-34
correlator 45, 48, 54
cost function 159-161
cost weights 161
D
data 259
data collection 49
decision variables 158
delay spread 43, 45, 52, 53, 55
delay time 53
diversity 121-130
DHI Packet 268
diversity combining 23-34
dynamic range 58
E
element arrangement 77-87
encryption 259
empirical models 37
excess delay 57
excess delay bins 58
F
FDD 232
FEC 254
Federal Communication Commission (FCC) 169, 170
FHS Packet 266
field strength prediction 39
fixed radio link 17
floor and wall attenuation 62
FLOW 265
free space path loss 173
frequency channels 170
frequency hopping 89-99
frequency planning 169, 172, 180
G
GPRS 181-192
guided simulated annealing 162
group abstraction 260
GSM 181-192
H
handover 193
hardware 77-87
header 265
HEC 265
hold mode 256
hopping sequence 252
host 252
host controller interface 252
human body modeling 13

272
I
IdOBEX 263
ID Packet 266
IEEE 80.211 169, 170, 263
impulse response 43
indoor measurements 62
indoor propagation 162, 163
inner receiver 231, 233
inquiry 255
interference 169, 170, 172-174, 176, 177
inter-signal coherence 149
I-Q TCM 121-130
IrDA 263
ISM 169, 170, 252
J
joint detection 234
L
line of sight path loss 173
link manager protocol 255
logical link control and adaptation layer
protocol 259
low transmitter antenna 59
L2CAP 259
 mai 205-215
marginal value of correlators 54
Markov chain 181-192
Master 253
maximum straight line separation 64
mean delay 64
measurements 41
Melbourne 59, 61
mesh plot of ray probability 59
microcell 35
mini-max function 159, 160
mini-sum function 159, 160
modulation 252
mobile positioning 198
mobile radio channel 43
multipath propagation 12, 57
multipath rays 57
multiple transmit antennas 121-130
multiuser detection 205-215
N
negative excess delays 58
network simulation 181-192
noise floor 64
NULL packet 266
O
OBEX 263
optimisation, combinatorial 157-168
orthogonal coordinate transformation 151
outage probability 159, 160
outdoor propagation measurements 59
overlapping channels 169, 171-174
P
packet 258
packet erasure channel 181 -192
page 256
park mode 257
path loss 45, 51, 55
payload 258
PCM coding 259
PCS 11, 23-34
penetration depth 13
pedestrian effects 17
picocell 35
piconet 253
ping-pong handover 193
POLL Packet
power control 232
power delay profiles 57
preprocessing 38
price 264
probability of a ray 58
propagation 45, 55, 56
propagation environments 64
propagation measurements 57
propagation modeling 36
propagation signature 57
propagation statistics 64
protocol stack 250
Q
quality of service 260
M

273
R
radio architecture 236
radio network planning 35
rank reduction 151
ray launching 37
ray-tracing 16, 37
Rayleigh fading 18, 121-130
reassembly 260
receiver 173, 175, 177
reduced dimension space-time receiver 153
reflection coefficient 14
reflections from external structures 62
RFCOMM 262
RF environment 49
Rician fading 19
RMS delay 45, 52, 53, 55, 64
RS232 serial bus 252
S
scan 255
scanning receiver 47-49
scatternet 253
SDP 260
SDP client 261
SDP Server 261
security 259
segmentation 260
SEQN 265
service discovery protocol 260
single detection 235
Slave 253
slot 231
smart antenna 77-87, 89-99
sniff mode 256
software radio (SWR) 89-99
space time codes 121-130
space time processing 145
spatial correlation 148, 151
spatial dimension reduction 151, 153
spatial diversity combining 145
spatial signature 149
spectrum 230
standby 255
subspace methods 151
superclass 262
Sydney 59
Sydney Harbour 63
synchronous connection-oriented 255
system planning 162, 163
T
TCP/IP 263
TD-CDMA 230
TDD 230
temporal variations 18
3GPP230
throughput 174-176, 178-180
time modulated 45
transmitter 173, 175, 177
transport layer 252
TYPE 265
U
UART 252
UDP 263
ultra-wideband 45
University of Technology Sydney 63
unnecessary handover 194, 197
USB 252
UUID261
V
voice 259
W
WDP 263
wideband propagation 57
wireless application protocol 263
wireless LAN 11, 169, 180

