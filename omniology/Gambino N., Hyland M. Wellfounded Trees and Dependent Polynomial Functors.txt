Wellfounded Trees and
Dependent Polynomial Functors
Nicola Gambinoâ‹†and Martin Hyland
Department of Pure Mathematics and Mathematical Statistics
University of Cambridge
{N.Gambino,M.Hyland}@dpmms.cam.ac.uk
Abstract. We set out to study the consequences of the assumption of
types of wellfounded trees in dependent type theories. We do so by in-
vestigating the categorical notion of wellfounded tree introduced in [16].
Our main result shows that wellfounded trees allow us to deï¬ne initial
algebras for a wide class of endofunctors on locally cartesian closed cat-
egories.
1
Introduction
Types of wellfounded trees, or W-types, are one of the most important com-
ponents of Martin-LÂ¨ofâ€™s dependent type theories. First, they allow us to deï¬ne
a wide class of inductive types [5, 15]. Secondly, they play an essential role in
the interpretation of constructive set theories in dependent type theories [3].
Finally, from the proof-theoretic point of view, they represent the paradigmatic
example of a generalised inductive deï¬nition and contribute considerably to the
proof-theoretic strength of dependent type theories [8].
In [16] a categorical counterpart of the notion of W-type was introduced. In
a locally cartesian closed category, W-types are deï¬ned as the initial algebras for
endofunctors of a special kind, to which we shall refer here as polynomial functors.
The purpose of this paper is to study polynomial endofunctors and W-types
more closely. In particular, we set out to explore some of the consequences of the
assumption that a locally cartesian closed category has W-types, i.e. that every
polynomial endofunctor has an initial algebra. To explore these consequences we
introduce dependent polynomial functors, that generalize polynomial functors.
Our main theorem then shows that the assumption of W-types is suï¬ƒcient
to deï¬ne explicitly initial algebras for dependent polynomial functors. We ex-
pect this result to lead to further insight into the interplay between dependent
type theory and the theory of inductive deï¬nitions. In this paper, we will limit
ourselves to giving only two applications of our main theorem. First, we show
how the class of polynomial functors is closed under ï¬xpoints. We hasten to
point out that related results appeared in [1, 2]. One of our original goals was
indeed to put those results in a more general context and simplify their proofs.
â‹†EPSRC Postdoctoral Research Fellow in Mathematics (GR/R95975/01).

Secondly, we show how polynomial functors have free monads, and these free
monads are themselves polynomial. The combination of these two facts leads
to further observations concerning the categories of algebras of polynomial end-
ofunctors. These results are relevant for our ongoing research on 2-categorical
models of the diï¬€erential Î»-calculus [6].
The interplay between dependent type theories and categories is here ex-
ploited twice. On the one hand, category theory provides a mathematically eï¬ƒ-
cient setting to present results that apply not only to the categories arising from
the syntax of dependent type theories, but also to the categories providing their
models. On the other hand, dependent type theories provide a convenient lan-
guage to manipulate and describe the objects and the arrows of locally cartesian
closed categories via the internal language of such a category [18].
In order to set up the internal language for a locally cartesian closed category
with W-types, it is necessary to establish some technical results that ensure a
correct interaction between the structural rules of the internal language and the
rules for W-types. Although these results are already contained in [16] we give
new and simpler proofs of some of them. Once this is achieved, we can freely
exploit the internal language to prove the consequences of the assumption of
W-types in a category.
Acknowledgements. We thank Peter Aczel, Thorsten Altenkirch, Benno van den
Berg, Marcelo Fiore and Erik Palmgren for stimulating discussions.
2
Polynomial Functors
2.1
Locally Cartesian Closed Categories
We say that a category C is a locally cartesian closed category, or a lccc for short,
if for every object I of C the slice category C/I is cartesian closed1. Note that
if C is a lccc then so are all its slices. For an arrow f : B â†’A in a lccc C
we write âˆ†f : C/A â†’C/B for the associated pullback functor, which can be
deï¬ned since slice categories have cartesian products. The key fact about locally
cartesian closed categories is the following proposition [7].
Proposition 1. Let C be a lccc. For any arrow f : B â†’A in C, the pullback
functor âˆ†f : C/A â†’C/B has both a left and a right adjoint.
Given an arrow f : B â†’A in a lccc C , we will write Î£f : C/B â†’C/A
and Î f
: C/B â†’C/A for the left and right adjoint to the pullback functor,
respectively. We indicate the existing adjunctions as Î£f âŠ£âˆ†f âŠ£Î f .
1 Here and in the following, when we require the existence of some structure in a
category, we always mean that this structure is given to us by an explicitly deï¬ned
operation.
2

An abuse of language. For an arrow f : B â†’A, we write the image of X â†’A
in C/A under âˆ†f as âˆ†f(X) â†’B. These arrows ï¬t into the pullback diagram
âˆ†fX

/ X

B
f
/ A
The Beck-Chevalley condition. The Beck-Chevalley condition, which holds in
any lccc, expresses categorically that substitution behaves correctly with respect
to type-formation rules. More precisely, it asserts that for a pullback diagram of
the form
D
g

k
/ B
f

C
h
/ A
the canonical natural transformations Î£g âˆ†k â‡’âˆ†h Î£f and âˆ†h Î f â‡’Î g âˆ†k
are isomorphisms.
The axiom of choice. The type-theoretic axiom of choice [15] is expressed by
the fact that, for two arrows g : C â†’B and f : B â†’A , the canonical natural
transformation Î£h Î p âˆ†ÎµC â‡’Î f Î£g is an isomorphism, where
âˆ†fÎ fC
p
/
q

Î fC
h

B
f
/ A
is a pullback diagram and ÎµC : âˆ†f Î f C â†’C is a component of the counit of
the adjunction âˆ†f âŠ£Î f .
2.2
Internal Language
Associated to a lccc C there is a dependent type theory Th(C) to which we shall
refer as the internal language of C . A complete presentation of such a dependent
type theory can be found in [9, 14, 18]. We limit ourselves to recalling only those
aspects that are most relevant for the remainder of this work. The standard
judgement forms, written here as
(Ba | a âˆˆA) , (Ba = Bâ€²
a | a âˆˆA) , (ba âˆˆBa | a âˆˆA) , (ba = bâ€²
a âˆˆBa | a âˆˆA),
are assumed to have their usual meaning [15]. The dependent type theory Th(C)
has the following primitive forms of type:
1 ,
IdA(a, aâ€²) ,
X
aâˆˆA
Ba ,
Y
aâˆˆA
Ba .
3

We refer to these as the unit, identity, dependent sum and dependent product
types, respectively. As usual, these primitive forms of type allow us to deï¬ne the
forms of type A Ã— B and BA , to which we refer as the product and function
types. The dependent type theory Th(C) has a straightforward interpretation
in C and thus provides a convenient language to deï¬ne objects and arrows in C .
2.3
Polynomial Functors
Let C be a lccc. For an object I of C, we write I also for the unique arrow
I â†’1 into the terminal object 1 of C . Observe this arrow determines functors
âˆ†I : C â†’C/I and Î£I : C/I â†’C. We are now ready to introduce polynomial
functors. For an arrow f : B â†’A in C, we deï¬ne a functor Pf : C â†’C, called
the generalized polynomial functor associated to f, as the composite
C
âˆ†B / C/B
Î f / C/A
Î£A
/ C
(1)
Deï¬nition 2. We say that P : C â†’C is a generalized polynomial functor if it
is naturally isomorphic to a functor Pf : C â†’C deï¬ned as Pf =df Î£A Î f âˆ†B,
for some arrow f : B â†’A of C.
Note. To avoid clashes with the existing terminology, we adopted the name gen-
eralised polynomial functors. This is in analogy with the distinction between
generalised inductive deï¬nitions and ordinary ones. Since in this paper we only
consider polynomial functors in the generalised sense, we refer to them simply
as polynomial functors.
Let us look more closely at the deï¬nition of polynomial endofunctors. For an
arrow f : B â†’A , we have the two functors Î£A : C/A â†’C and âˆ†B : C â†’C/B.
The functor âˆ†B takes an object X of C to the left-hand side of the pullback
diagram:
X Ã— B
/

X
X

B
B
/ 1
We can therefore write âˆ†BX = X Ã— B . The action of Î£A is very simple: given
an object Y â†’A of C/A we have Î£A(Y â†’A) = Y . These observations lead
to a description of polynomial functors in the internal language, which we shall
exploit. The object f : B â†’A of C/A determines the judgement (Ba | a âˆˆA)
of Th(C). We can then explicitly deï¬ne in Th(C)
Pf(X) =df
X
aâˆˆA
XBa ,
for a type X. The interpretation in C of the right-hand side of the deï¬nition is
indeed Pf(X) , as deï¬ned in (1).
4

2.4
Basic Properties of Polynomial Functors
Proposition 3. The composition of two polynomial functors is polynomial.
Proof. A proof using the internal language is in [2], but it is also possible to give
a diagrammatic one. In either case one uses crucially the axiom of choice.
âŠ“âŠ”
We now assume that the lccc C has ï¬nite disjoint coproducts. As pullback
functors are left adjoints, these ï¬nite coproducts are preserved under pullbacks
and C has stable disjoint coproducts. They can be represented in a familiar way
in the internal language Th(C), which now has also the primitive forms of type
0 and A + B called the empty and disjoint sum types, respectively.
The class of polynomial functors is closed under a further operation, that
will be very important in the following. To discuss it, let us introduce a family
of functors PX : C â†’C, for X in C, associated to a functor P : C â†’C. First of
all, observe that the function mapping (X, Y ) into X + PY can be extended to
a bifunctor C Ã— C â†’C. This determines a functor C â†’End(C) mapping X into
PX, whose action on Y in C is deï¬ned by letting PX(Y ) = X + PY .
Proposition 4. Let P : C â†’C be a functor and X be an object of C. If P is
polynomial then so is PX.
Proof. We give a proof using the internal language. Let f : B â†’A and consider
the polynomial functor Pf associated to f . For X and Y in C we then have
X + Pf(Y ) = X +
X
aâˆˆA
Y Ba âˆ¼=
X
zâˆˆX+A
Y Bz
where (Bz | z âˆˆX + A) is deï¬ned so that the judgements (BÎ¹1(x) = 0 | x âˆˆX)
and (BÎ¹2(a) = Ba | a âˆˆA) are derivable.
âŠ“âŠ”
To recall the notions of strength for a functor, let us consider a monoidal
category (C, âŠ—, I, a, l, r), where I is the unit object and a, l, r are natural iso-
morphisms giving the associativity, left and right unit laws and satisfying the
monoidal coherence axioms [12]. We can regard a lccc C as a monoidal category
where cartesian product is the tensor, and the terminal object is the unit.
Deï¬nition 5. Let P : C â†’C be a functor. By a strength for P we mean a
natural transformation Ïƒ with components ÏƒX,Y : X âŠ—PY â†’P(X âŠ—Y ), for X
and Y in C, such that for all X, Y, Z in C the following equations hold:
P(lX) â—¦ÏƒX,I = lX ,
P(rY ) â—¦ÏƒI,Y = rY ,
ÏƒX,Y âŠ—Z â—¦(1X âŠ—ÏƒY,Z) = ÏƒXÃ—Y,Z .
Proposition 6. Every polynomial functor has a strength.
Proof. Let us use the internal language to deï¬ne the arrow
ÏƒX,Y : X Ã— PfY â†’Pf(X Ã— Y )
which gives us one of the components of the required strength Ïƒ for a polynomial
functor Pf. First, observe that the domain and the codomain of ÏƒX,Y can be
described in Th(C) as X Ã— P
aâˆˆA Y Ba and P
aâˆˆA(X Ã— Y )Ba respectively. We
can then deï¬ne ÏƒX,Y by letting ÏƒX,Y (x, a, t) =df
 a, (Î»b âˆˆBa)(x, t(b))

for
(x, a, t) âˆˆX Ã— P
aâˆˆA Y Ba .
âŠ“âŠ”
5

3
Change of Base
In the following, we shall be interested in the eï¬€ect that pullback functors have
on algebras for polynomial endofunctors. Let us ï¬rst recall some basic deï¬nitions.
Let P : C â†’C be an endofunctor on a category C . An algebra for P, or a P-
algebra, is a diagram of the form x : PX â†’X in C. An arrow of P-algebras
from PX â†’X to PY â†’Y is given by a commuting diagram of form
PX
P f /

PY

X
f
/ Y
There is then a manifest category P-alg of P-algebras and P-algebra arrows. We
write U : P-alg â†’C . for the obvious forgetful functor.
In the following, we will work in a lccc C. For an arrow u : I â†’J in C we
will show that the algebras for the polynomial functor Pf on C/J associated to
an arrow f of C/J can be mapped functorially into algebras for the polynomial
endofunctor Pâˆ†u(f) on C/I associated to the arrow âˆ†u(f) of C/I . As we will
see, this is a purely formal consequence of some observations concerning the 2-
category of polynomial functors, that we deï¬ne below. The treatment is inspired
by the formal theory of monads [10, 19].
3.1
The 2-category of Polynomial Functors
Let us deï¬ne the 2-category Poly. An object of Poly is a pair (C, Pf) where C
is a lccc and Pf is the polynomial endofunctor on C associated to an arrow
f : B â†’A in C. A 1-cell with domain (C, Pf) and codomain (D, Pg) is given by
a pair (F, Ï†) where F : C â†’D is a functor and Ï† : Pg F â‡’F Pf, is a natural
transformation, usually drawn in a diagram of form
C
Pf
?
?
?
?
?
?
?
?
F
~~~~~~~~
D
=â‡’
Pg
@
@
@
@
@
@
@
C
F

D
The 2-cells of Poly are deï¬ned exactly as the ones in 2-categories of monads [19].
We can now deï¬ne a 2-functor Alg : Poly â†’Cat, but for the purposes of this
paper, it is suï¬ƒcient to give the deï¬nition of its action on objects and 1-cells.
For an object (C, Pf) of Poly we deï¬ne
Alg(C, Pf) =df Pf-alg .
6

Given a 1-cell (F, Ï†) : (C, Pf) â†’(D, Pg) in Poly, the functor Alg(F, Ï†) is deï¬ned
by mapping a Pf-algebra x : Pf X â†’X into the the composite
Pg F X
Ï†X / F Pf X
F x
/ F X
that is a Pg-algebra.
3.2
Pullback of Algebras
By a locally cartesian closed functor, or lccc functor, we mean a functor that
preserves the locally cartesian closed structure up to isomorphism. The next
proposition is a simple but useful fact.
Proposition 7. Let C and D be lcccâ€™s, and let F : C â†’D be a lccc functor. For
any arrow f : B â†’A there is a natural isomorphism
Ï‡F : PF f F â‡’F Pf
such that the 1-cell (F, Ï‡F ) : (C, Pf) â†’(D, PF f) determines a commuting dia-
gram of form
Pf-alg
/
Alg(F,Ï‡F )

C
F

PF f-alg
/ D
where the horizontal arrows are the forgetful functors.
Proof. For an arrow f : B â†’A the required natural isomorphism Ï‡F is obtained
by pasting the three isomorphims in the diagram
C
âˆ†B
/
F

âˆ¼
=
C/B
F/B

Î f
/
âˆ¼
=
C/A
F/A

Î£A
/
âˆ¼
=
C
F

D
âˆ†F B
/ D/FB
Î F f
/ D/FA
Î£F A
/ D
where for an object I, we write F/I : C/I â†’D/FI for the obvious functor
induced by F. The isomorphisms in the diagram exist since F is a lccc functor.
The rest of the proof follows by direct calculation.
âŠ“âŠ”
We can apply Proposition 7 to pullback functors, as they are lccc functors [7].
Corollary 8. Let C be a lccc. Let I be an object of C. For an arrow f : B â†’A
in C there is a natural isomorphism Ï‡âˆ†I : Pg âˆ†I â‡’âˆ†I Pf, where g =df âˆ†If.
7

4
Wellfounded Trees
Deï¬nition 9. We say that a lccc C has W-types if for every arrow f : B â†’A
in C there is a diagram Pf(Wf) â†’Wf which is an initial algebra for Pf : C â†’C .
Recall that, by a theorem of Lambek, the arrow Pf(Wf) â†’Wf is an iso-
morphism. Once the internal language of a lccc with W-types is set up, we will
therefore be allowed to write
W âˆ¼=
X
aâˆˆA
W Ba
where f : B â†’A and W =df Wf . The next subsection is devoted to justify the
use of the internal language in connection to W-types.
4.1
Pullback of Wellfounded Trees
In [16] it is proved that if C has W-types then so do all its slices. A proof of
this fact can be obtained by deï¬ning explicitly initial algebras for polynomial
endofunctors on the slice categories. It is also observed there that the pullback
functors preserve W-types. Although in [16] it is suggested to prove this second
fact using the explicit deï¬nition of W-types in slice categories, we give a new
and more direct proof of this fact.
Let C be a lccc and let I be an object in C. Recall from Corollary 8 that there is
a natural isomorphism Ï‡âˆ†I : Pg âˆ†I â‡’âˆ†I Pf where g =df âˆ†I(f). This natural
transformation determines a functor FI : Pf-alg â†’Pg-alg deï¬ned as FI =df
Alg(âˆ†I, Ï‡âˆ†I). We now use the inverse to Ï‡âˆ†I, given by a natural transformation
Ïˆ : âˆ†I Pf â‡’Pg âˆ†I, to deï¬ne a functor GI : Pg-alg â†’Pf-alg that is right
adjoint to FI . First of all, observe that Ïˆ gives us a natural transformation
Î¾ : Pf Î I â‡’Î I Pg that is deï¬ned as the composite
PfÎ I
Î· Pf Î I
+3 Î I âˆ†IPf Î I
Î I Ïˆ Î I
+3 Î I Pgâˆ†I Î I
Î I Pg Îµ
+3 Î IPg
where Î· and Îµ are the unit and the counit of the adjunction âˆ†I âŠ£Î I , respec-
tively. Hence we have that (Î I, Î¾) : (C/I, Pg) â†’(C, Pf) is a 1-cell in Poly and
thus we can simply deï¬ne GI =df Alg(Î I, Î¾).
Theorem 10. Let C be a lccc and let f : B â†’A be an arrow in C . For any
object I of C the adjunction âˆ†I âŠ£Î I lifts to an adjunction FI âŠ£GI , i.e. in the
diagram
Pg-alg
/
GI

C/I
Î I

Pf-alg
/
FI
O
C
âˆ†I
O
where g =df âˆ†I(f) , the inner and outer squares commute.
8

The functor GI can be described also in the internal language. Let us consider
a Pg-algebra, i.e. an arrow z : PgZ â†’Z in C/I . This arrow determines the
judgement
 z(i, (a, s)) âˆˆZi | i âˆˆI , (a, s) âˆˆ
X
aâˆˆA
Zi
Ba 
where (Zi | i âˆˆI) is the judgement associated to the object Z â†’I of C/I . We
can then derive the judgement
 (Î»i âˆˆI) z(i, (a, (Î»b âˆˆBa) t(b, i))) âˆˆ
Y
iâˆˆI
Zi | (a, t) âˆˆ
X
aâˆˆA
Y
iâˆˆI
Zi
Ba
which gives us a Pf-algebra PfÎ IZ â†’Î IZ . This is exactly the image under GI
of the Pf-algebra PgZ â†’Z. A proof of Theorem 10 can then be obtained either
reasoning with diagrams or with the internal language. We can now derive a
simple proof of the pullback stability for W-types.
Corollary 11 (Pullbacks preserve W-types). Let C be a lccc. Let u : I â†’J
be an arrow in C. For objects B â†’J and A â†’J in C/J and an arrow f : B â†’A
between them, there is an isomorphism Wâˆ†u(f) âˆ¼= âˆ†u Wf.
Proof. Note that without loss of generality we can assume that J is the terminal
object of C and thus consider the pullback functors âˆ†I : C â†’C/I determined by
I : I â†’1. But now it suï¬ƒces to appy Theorem 10 and observe that FI, deï¬ned
as FI =df Alg(âˆ†I, Ï‡âˆ†I), preserves initial objects because it is a left adjoint.
âŠ“âŠ”
5
Dependent Polynomial Functors
We can now pick up the fruits of the work done in the last section and exploit
freely the internal language to prove further consequences of the assumption
of the existence of W-types in a lccc. Here we show how W-types can be used
to deï¬ne initial algebras for a class of functors that is wider than the one of
polynomial functors. Let C be a lccc. For a diagram, which we do not assume to
be commuting, of form
B
f
/
s
?
?
?
?
?
?
?
?
A
r

I
(2)
we deï¬ne D : C/I â†’C/I, called the dependent polynomial endofunctor associ-
ated to the diagram, as the composite
C/I
âˆ†s / C/B
Î f / C/A
Î£r / C/I
We can describe the action of D on an object (Xi | i âˆˆI) of C/I by letting
D(Xi | i âˆˆI) =df
  X
aâˆˆAi
Y
bâˆˆBa
Xsb | i âˆˆI

(3)
9

for an object (Xi | i âˆˆI) of C/I. Using this description, we can observe that
initial algebras for dependent polynomial functors are categorical counterparts
of the so-called general trees of Martin-LÂ¨of type theory, as described in [17,
Chapter 16]. We now give some examples of dependent polynomial functors.
(i) Polynomial functors on slice categories are special examples of dependent
polynomial functors. Observe that, if the diagram in (2) commmutes, then
the formula in (3) simpliï¬es to
D(Xi | i âˆˆI) =
  X
aâˆˆAi
XBa
i
| i âˆˆI

.
(ii) Let f : B â†’A be an arrow in C and deï¬ne W =df Wf. For our applications,
it is useful to observe that, for an arrow g : C â†’B, the endofunctor
F : C/W â†’C/W deï¬ned in the internal language by letting
F

X(a,t) | (a, t) âˆˆW

=df
 X
bâˆˆBa
XCb
t(b) | (a, t) âˆˆW

,
is a dependent polynomial functor. Indeed, it is naturally isomorphic to
the functor associated to the diagram
P
(a,t)âˆˆW
P
bâˆˆBa Cb
p
/
s
'O
O
O
O
O
O
O
O
O
O
O
O
P
(a,t)âˆˆW Ba
r
yssssssssss
W
where p(a, t, b, c) =df (a, t, b), s(a, t, b, c) =df t(b) and r(a, t, b) =df (a, t)
for (a, t) âˆˆW, b âˆˆBa, c âˆˆCb.
(iii) If C has ï¬nite disjoint coproducts, the coproduct of two dependent polyno-
mial functors is still a dependent polynomial functor. For two dependent
polynomial functors D1, D2 associated respectively to the two diagrams
B1
f1
/
s1
@
@
@
@
@
@
@
@
A1
r1
~~~~~~~~
I
B2
f2
/
s2
@
@
@
@
@
@
@
@
A2
r2
~~~~~~~~
I
the functor D1 + D2 is naturally isomorphic to the dependent polynomial
functor associated to the diagram
B1 + B2
f1+f2
/
[s1,s2]
#G
G
G
G
G
G
G
G
G
A1 + A2
[r1,r2]
{wwwwwwwww
I
10

5.1
Initial Algebras
We want to prove our ï¬rst main result. We assume that the lccc C has W-types.
Theorem 12. Every dependent polynomial functor has an initial algebra.
The proof involves a generalisation of the argument showing that W-types
exist in slice categories [16, Proposition 3.8], a result that follows indeed as a
corollary of our theorem. We begin by constructing a candidate to be the initial
algebra for the dependent polynomial functor deï¬ned in (3). Let us consider the
W-types Wf and WfÃ—I associated to f : B â†’A and f Ã— 1I : B Ã— I â†’A Ã— I.
The canonical isomorphisms
Wf âˆ¼=
X
aâˆˆA
WBa
f
,
WfÃ—I âˆ¼= I Ã—
X
aâˆˆA
WBa
fÃ—I
will be treated here as equalities to simplify the presentation. Let us recall that
there is an arrow Ï : Wf â†’A deï¬ned by letting Ï(a, t) =df a for (a, t) âˆˆWf.
The strategy to deï¬ne the candidate V â†’I to be an initial algebra will be
as follows. First, we will deï¬ne V as the object ï¬tting in the equalizer diagram
V
Î·
/ Wf
Î¾
/
Î¾â€²
/ WfÃ—I
(4)
determined by appropriate arrows Î¾ and Î¾â€². Secondly, the required object of C/I
can then be deï¬ned as r Ï Î· : V â†’I. It now remains to deï¬ne the arrows Î¾, Î¾â€².
The arrow Î¾ is deï¬ned by recursion on Wf by letting, for (a, t) âˆˆWf,
Î¾(a, t) =df (ra, a, (Î»b âˆˆBa) Î¾(tb)) .
The deï¬nition of Î¾â€² is more involved. First, we deï¬ne Ï† : WfÃ—I Ã— B â†’WfÃ—I by
recursion. For (i, a, t, b) âˆˆWfÃ—I, deï¬ne
Ï†(i, a, t, b) =df
 sb, a, (Î»bâ€² âˆˆBa) Ï†(t(bâ€²), bâ€²)

.
Then, we deï¬ne Ïˆ : WfÃ—I â†’WfÃ—I by letting, for (i, a, t) âˆˆWfÃ—I,
Ïˆ(i, a, t) =df (i, a, t, (Î»b âˆˆBa)Ï†(tb, b)) .
Finally, we ï¬x Î¾â€² =df Ïˆ Î¾. The key property of the object V that allows us to
prove Theorem 12 is stated in the next lemma.
Lemma 13. For all (a, t) âˆˆWf, we have (a, t) âˆˆP
aâˆˆAi
Q
bâˆˆBa Vsb if and only
if (a, t) âˆˆVi, where i =df ra.
Proof. Let (a, t) âˆˆWf and deï¬ne i =df ra. First of all one needs to show that,
for all b âˆˆBa
Î¾(tb) = Ï†(Î¾(tb), b) â‡â‡’sb = Ï(tb) âˆ§Î¾(tb) = Ïˆ Î¾(tb) .
(5)
11

This can be proved by unfolding the relevant deï¬nitions. We then get
(a, t) âˆˆVi â‡â‡’Î¾(a, t) = Î¾â€²(a, t)
by def. of V
â‡â‡’(âˆ€b âˆˆBa) Î¾(tb) = Ï†(Î¾(tb), b)
by def. of Î¾ , Î¾â€²
â‡â‡’(âˆ€b âˆˆBa) sb = Ï(tb) âˆ§Î¾(tb) = Ïˆ Î¾(tb)
by (5)
â‡â‡’(a, t) âˆˆP
aâˆˆAi
Q
bâˆˆBa Vsb
by def. of V
as required.
âŠ“âŠ”
Lemma 13 shows that V â†’I can be equipped with a structure map, and
thus gives us an algebra for the dependent polynomial functor deï¬ned in (3).
The initiality of this algebra follows from reasoning that is completely analogous
to that in [16, Proposition 3.8] and hence is omitted here.
5.2
Applications
We give a ï¬rst application of Theorem 12. Let us consider two arrows f : B â†’A
and g : D â†’C in a lccc C with W-types. We can then deï¬ne a bifunctor
F : C Ã— C â†’C whose action on an object (X, Y ) is deï¬ned by letting
F(X, Y ) =df Pf(X) Ã— Pg(Y ) .
For a ï¬xed object X of C , the functor F X : C â†’C that maps Y into F(X, Y )
can easily be seen to be polynomial. It therefore has an initial algebra, that we
denote as
F X ÂµY.F(X, Y )

/ ÂµY.F(X, Y )
The assignment of ÂµY.F(X, Y ) to X can then be extended to a functor C â†’C .
We refer to these functors as ï¬xpoint functors. We can now state our second
main result.
Theorem 14. Fixpoint functors are polynomial.
Proof. We limit ourselves to sketch the main idea of the argument. Let us actu-
ally suppose that the ï¬xpoint functor is polynomial, and let Q â†’P be an arrow
in C such that
ÂµY.F(X, Y ) âˆ¼=
X
pâˆˆP
XQp .
Direct calculations imply that there must be isomorphisms
P âˆ¼= A Ã—
X
câˆˆC
P Dc ,
Q(a,c,t) âˆ¼= Ba +
X
dâˆˆDc
Qt(d)
for (a, c, t) âˆˆAÃ—P
câˆˆC P Dc. The ï¬rst isomorphism certainly holds if we deï¬ne P
as the W-type of the arrow g Ã— 1A : D Ã— A â†’C Ã— A and use Corollary 11.
12

Theorem 12 shows that it is also possible to satisfy the second isomorphism by
deï¬ning Q â†’P as the initial algebra for an appropriate dependent polynomial
functor. Recalling the examples of dependent polynomial functors given earlier
in this section, it is immediate to observe that the functor F : C/P â†’C/P
deï¬ned by letting
F(X(a,c,t) | (a, c, t) âˆˆP) =df Ba +
X
dâˆˆDc
Xt(d)
for (X(a,c,t) | (a, c, t) âˆˆP) in C/P, is a dependent polynomial functors, since it
is the sum of two such functors.
âŠ“âŠ”
6
Free Monads
6.1
Background
We review some facts concerning endofunctors and monads, and some results
concerning free monads. More details can be found in [4, 11].
Deï¬nition 15. Let P be an endofunctor on C . We say that P has a free monad
if the forgetful functor U : P-alg â†’C has a left adjoint.
The next proposition shows that the existence of a free monad for an endo-
functor is a necessary and suï¬ƒcient condition for its category of algebras to be
isomorphic to a category of algebras for a monad.
Proposition 16. The forgetful functor U : P-alg â†’C has a left adjoint if and
only if it is monadic over C.
Proof. The proof is an application of Beckâ€™s theorem [13] characterising monadic
adjunctions. One should observe that the functor U satisï¬es all the hypothesis
of Beckâ€™s theorem except for the existence of a left adjoint.
âŠ“âŠ”
When (T, Î·, Âµ) is a monad on a category C we write T-Alg for the usual
category of T-algebras. Note that we follow a suggestion of Peter Freyd in using
P-alg for the algebras of an endofunctor P and T-Alg for the algebras for a
monad T. Again, we write U : T-Alg â†’C for the forgetful functor. We can then
restate Proposition 16 as follows.
Proposition 17. (T, Î·, Âµ) is a free monad for P if and only if there is an equiv-
alence T-Alg â†’P-alg such that the following diagram commutes
T-Alg
/
U
"D
D
D
D
D
D
D
D
D
P-alg
U
}zzzzzzzz
C
13

We wish to give a more concrete description of the free monad for an end-
ofunctor on a locally cartesian closed category with coproducts. To do so, we
use the family of functors PX : C â†’C, for X in C, associated to a functor
P : C â†’C and deï¬ned in Subsection 2.4. As we did in the discussion leading to
Proposition 4, we assume that C has ï¬nite disjoint coproducts.
Proposition 18. Let P be an endofunctor on C. The following are equivalent:
(i) the endofunctor P has a free monad;
(ii) the comma category X â†“U has an initial object, for all X in C;
(iii) the endofunctor PX has an initial algebra, for all X in C.
Proof. The equivalence (i) â‡”(ii) follows by Deï¬nition 15 and by the possibility
of determining a left adjoint via initial objects in comma categories [13]. The
equivalence (ii) â‡”(iii) follows from the isomorphism X â†“U âˆ¼= PX-alg. One
could also verify directly the implication (iii) â‡’(i) by deï¬ning explicitly the
free monad (T, Î·, Âµ) for P. The functor T is deï¬ned by letting T(X) be the
initial algebra for PX, for X in C.
âŠ“âŠ”
We conclude this review by recalling the notion of strenth for a monad and
a simple fact about it.
Deï¬nition 19. Let (T, Î·, Âµ) be a monad on C. By a strength for (T, Î·, Âµ) we
mean a strength Ïƒ for the functor T such that, for all X and Y in C, we have
ÏƒX,Y â—¦(1X âŠ—Î·Y ) = Î·XâŠ—Y ,
ÂµXâŠ—Y â—¦T(ÏƒX,Y ) â—¦ÏƒX,T Y = ÏƒX,Y â—¦(1X âŠ—ÂµY ) .
Proposition 20. Let P be an endofunctor on C and (T, Î·, Âµ) be the free monad
on P. A strength for the functor P determines a strength for the monad (T, Î·, Âµ).
Proof. The strength can be deï¬ned using the explicit description of the free
monad given in the proof of Proposition 18.
âŠ“âŠ”
6.2
Free Monads for Polynomial Functors
We begin by ensuring the existence of free monads for polynomial functors.
Theorem 21. If C is a lccc with ï¬nite disjoint coproducts and W-types, then
every polynomial endofunctor on C has a free monad.
Proof. Let P : C â†’C be a polynomial functor. If we knew that for every X
in C the functor PX : C â†’C had an initial algebra, then we could invoke
Proposition 18 and conclude the desired claim. By Proposition 4, however, the
functors PX : C â†’C, for X in C, are polynomial, and therefore they have an
initial algebra by the assumption that C has W-types.
âŠ“âŠ”
The next corollary, a consequence of Proposition 16 and Theorem 21, allows
us to observe the existence of structure on the categories of algebras for poly-
nomial functors. From now on, we assume that C is a lccc with ï¬nite disjoint
coproducts and W-types.
14

Corollary 22. For every polynomial functor P on C, the category P-alg is iso-
morphic to the category T-Alg, where T is free monad on P.
We can also derive information on free monads for polynomial functors.
Proposition 23. Free monads for polynomial functors have a strength.
Proof. The claim is a consequence of Proposition 6 and Proposition 20.
âŠ“âŠ”
We conclude the paper with our third and last main result, whose proof is
completely analogous to that of Theorem 14.
Theorem 24. The free monad on a polynomial functor is polynomial.
References
1. Abbott, M.: Categories of Containers. Ph.D. thesis, University of Leicester (2003).
2. Abbott, M., Altenkirch, T., Ghani, N.: Categories of Containers. in Foundations of
Software Science and Computation Structures LNCS 2620, Springer (2003) 23 â€“ 38.
3. Aczel, P.: The Type Theoretic Interpretation of Constructive Set Theory: Inductive
Deï¬nitions, in: R.B. Barcan Marcus et al. (eds.) Logic, Methodology and Philosophy
of Science, VII, North-Holland (1986).
4. Barr, M., Wells, C.: Toposes, triples and theories. Springer-Verlag (1985).
5. Dybjer, P: Representing inductively deï¬ned sets by wellorderings in Martin-LÂ¨ofâ€™s
type theory. Theoretical Computer Science 176, (1997), 329 â€“ 335.
6. Ehrhard, T., Regnier, L.: The diï¬€erential lambda-calculus. Theoretical Computer
Science, 309 (2003) 1 â€“ 41.
7. Freyd, P.: Aspects of topoi. Bull. Austral. Math. Soc. 7 (1972) 1 â€“ 76.
8. Griï¬€or, E., Rathjen, M.: The Strength of Some Martin-LÂ¨ofâ€™s Type Theories, Archiv
for Mathematical Logic 33 (1994) 347 â€“ 385.
9. Hofmann, M.: On the interpretation of type theory in locally cartesian closed cate-
gories. In Computer Science Logic â€™94. LNCS 933, Springer (1995) 427 â€“ 441.
10. Kelly, G.M., Street, R.: Review of the elements of 2-categories. Proc. Sydney Cat-
egory Theory Seminar 1972/73 LNM 420, Springer (1974) 75 â€“ 103.
11. Kelly, G.M.: A uniï¬ed treatment of transï¬nite constructions for free algebras, free
monoids, colimit, associated sheaves and so on. Bull. Austral. Math. Soc. 22 (1980)
1 â€“ 83.
12. Kelly, G.M.: Basic Concepts of Enriched Category Theory Cambridge University
Press (1982).
13. Mac Lane, S.: Categories for the working mathematician. Springer-Verlag (1998).
14. Maietti, M.E.: The type theory of categorical universes. Ph.D. thesis, Universit`a di
Padova (1998).
15. Martin-LÂ¨of, P. Intuitionistic Type Theory. Bibliopolis (1984).
16. Moerdijk, I., Palmgren, E.: Wellfounded trees in categories. Annals of Pure and
Applied Logic 104 (2000) 189 â€“ 218.
17. NordstrÂ¨om, B., Petersson K., Smith J.: Programming in Martin-LÂ¨of Type Theory.
Oxford University Press (1990).
18. Seely, R.A.G.: Locally cartesian closed categories and type theory. Math. Proc.
Camb. Phil. Soc. 95 (1984) 33 â€“ 48.
19. Street, R.: The formal theory of monads. J. of Pure and Appl. Algebra 2 (1972)
149 â€“ 168.
15

