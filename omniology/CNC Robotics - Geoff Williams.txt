• Provides step-by-step instructions for building your own CNC mochine
• Greot for use os 0 teoching tool in metol/wood shop
or on the industriol floor
GEOFF
,WILLIAMS

(J
l
CNC Robotics
Build Your Own
Workshop Bot
Geoff Williams
McGraw-Hili
New York
Chicago
San Francisco
Lisbon
London
Madrid
Mexico City
Milan
New Delhi
San Juan
Seoul
Singapore
Sydney
Toronto

./
Cataloging-in-Publication Data is on file with the Library of Congress
Copyright
©
2003
by
The
McGraw-Hili
Companies,
Inc.
All
rights
reserved. Printed in the United States of America. Except as permitted
under the United States Copyright Act of 1976, no part of this publication
may be reproduced or distributed in any form or by any means, or stored
in a data base or retrieval system, without the prior written permission
of the publisher.
3 4 5 6 7 8 9 0 DOC!DOC 0 9 8 7 6 5 4
ISBN 0-07-141828-8
The sponsoring editor for this book was Judy Bass and the production
supervisor wa s Pamela Pelton. It was set in Tiepolo Book by Patricia
Wallenburg.
Printed and bound by RR Donnelly.
McGraw-Hili books are available at special quantity discounts to use as
premiums and sales promotions, or for use in corporate training pro-
grams. For more information, please write to the Director of Special Sales,
McGraw-Hili Professional, Two Penn Plaza, New York, NY 10121-2298 . Or
contact your local bookstore.
II\ Thi s book is printed on recycled, acid-free paper containing a
\:CI minimum of 50 percent recycled, de-inked fiber.
Information contained in this book has been obtained by The McGraw-Hili
Companies,
Inc. ("McGraW-Hili")
from
sources believed
to be reliable.
However, neither McGraw-Hili nor its authors guarantee the accuracy or
completeness of any information published herein, and neither McGraw-Hili
nor its authors shall be responsible for any errors, om issions, or damages
arising out of use of this information. This work is published with the under-
standing that McGraw-Hili and its authors are supplying information but are
not attempting to render engineering or other professional services. If such
services are required, the assistance of an appropriate professional should
be sought.

For Margaret, whose help and patience made this book possible.


I"I
I-
II
I
1,, 1
Contents
1
Design
1
Why Build My Own
I
Gantry Style
2
Motors
2
Lineal Motion
4
Motor Drivers
9
Acme Screw
9
Deciding on the Dimensions of the Machine
9
Software
10
2
Electronics
13
Stepper Motor Driver and Computer Interface Boards
13
Stepper Motor Driver Circuit
15
The Interface Board
19
3
Making the Printed Circuit Board
77
Tools and Material
77
Artwork
78
Board Cutting and Cleaning
82
Toner Transfer
85
Etching
93
4
Driver Assembly
99
The Interface Board
III
v

GNG Robotics
5
Software Setup and Driver Testing
113
Material Needed
113
Creating Test Files
121
Triangle Test
122
Circle Test
123
Putting the Elect ronics in a Case
124
6
The Frame
133
Tools and Material
133
Bolting
138
Assemb ly
141
Bearing Ra il Support Bolt Holes
144
Paint the Frame
151
7
The Gantry and X-axis
153
The Gantry
153
The X-axis: Installing the Gantry Bearing Guide Rail
160
Beari ng Holder
164
8
The Z and Y Axes
175
The Z-Axis
175
The Y-Axls
184
9
Motor and Lead Screw Installation
189
Tools and Ma teria l
189
X-axis
190
Y-axls
199
Z-axis
203
Limit Switc h Install ation
206
X-axis Limits
208
Y-axis Limi ts
209
Z-axis Limits
211
10
File Creation and KCam
215
KCam CNC Control ler Software
215
KCam File Requirements
219
How to Create a File to Import
222
CorelDraw
223
ACME Profile r
239
vi

Contents
11
Tool Holders and Testing
245
Tool Holders
245
Penholder Tool
246
Router/Dremel Holder
252
Testing the CNC Machine
257
12
Examples
263
Plotter
263
Mechanical Engraving Tool
268
Dremel Tool
271
Ma ster Craft Rotar y Tool
274
Router
278
Sources of Material
293
Electronic Components
293
L297/L298 Integrated Circuits
293
CANADA
293
United States, California
294
Lineal Motion
296
Distributor
296
Manufacturers
29 7
Stepper Motors
300
Metal
301
Index
303
vii

Acknowledgments
I must thank my brother Karl who inspired me to write this book and
my editor Judy Bass whose faith and assistance made the book a real-
ity. I'd also like to thank Patricia Wallenburg who assembled my words
and images into book form. Judy an d Patricia have made this book
project an extre mely enjoyable expe rience. Finally my tha nks go out to
all the people who have freely shared with me their know ledge and
assistance wh ile I was resea rching and .bui lding my CNC machine.
I must thank the following co mpanies for allowing me to include some
of their copyrighted materia l in this book.
The NuArc Company, Inc. does n' t promote, endorse. or warranty an y
modified products. NuArc let me reproduce some of the images from
the repair manual of the copy camera I disassembled but they don 't
endorse the use of their products for anything ot her tha n the ir origi-
nally intended function. You can conta ct NuArc at M&R Sales and
Service, Inc. I N. 372 Main Street , Glen Ellyn, IL 60 137, USA or on the
Web at http:/ /www.nua rc.com.
Kellyware has allowed me to use scree n captures of the program
KCam 4. Kellyware can be contacted at PO Box 563 . Spirit Lake. Iowa
52360, USA or on the web at http:/ /www.kellyware.com.
The product data sheets included with Chapter 2 of this book have
been reprinted with the permission of STMicroelectronics. The docu-
ments reproduced in this book and many more useful application
notes ca n be found at the STMicroe lectronics Web site located at
http:// www.st.com.
Scien ce Specialists, Inc. ha s given me permiss ion to include screen
captures of the software ACME Profller, Coyote Version 6.0. Science
Specialists, Inc. can be reached at 1800 Shec kler Rd.. Columbia City,
IN 4675, USA or on the Web at httpt/zwwwzfwt.com/ v. klmble/
scispec/scispec. htm.

Design
Why Build My Own
I first th ought about adding a CNC router to my too l collection
after fi nishing a kitchen cabinet renovation in my home. I refaced
the cabinets and bui lt 26 new doors. during w hich I discovered
that door building can become monotonou s at best. As always
happens when yo u tell or show yo ur fri ends and fam ily what yo u
have done, someone w ill have a sim ilar project and enlist yo ur
help. Tha t someone was my frie nd Geoff S. He wanted to do the
same thing to his kitchen-reface and install new cabinet doors. I
agreed to help him and he decided on a style of door that can be
made from one piece of material cut to size and routed to create
th e look he wanted . Of cou rse the prospect of bu ilding a w hole Jot
of doors and making templates to faci litate the routing was n't too
thrilling. That's w hen I thought a small CNC machine wo uld come
in handy. All th e repeti tive rou ting could be asslgned to the CNC
machine and the doors would more closely resemble each other
once human erro r had been removed from the equation. Now the
project didn't seem too bad at all!
I started to look for an affordable machine to do the job, After
searching the Intern et, I was shocked to find how much the asking
price is for a CNC mach ine. I did find a cou ple that were under
1

CNC Robotics
56000 U.S., but I can never convince myself to buy a too l wo rth so
much . Even if the cost of the machin e seems reasonable you still
have ship ping a nd du ties to pay, and in my case the exchange rate
between U.S. and Canadian dolla rs. All things considered, it was
going to cost me in excess of 510,000 Canadian to get a CNC
machine in my shed. I can't afford that kind of price tag! I searched
for plans or a book that described what I wanted to build. I did find
some plans on the Internet but either the machine was too small
and inaccurate or the plans were expensive and requ ired the use
of expensive components. I cou ldn't find any books in print about
a similar project. I won't buy plans that I can't get a good look at
first, so the Internet plans were out of the qu estion. I prefer books
because I ca n hold them and flip through the pages before I hand
over the cash. Books also cost less.
I decided to build my own machine us ing some off-t he-shelf
lineal motion co mpo nents and some co mponents that I salvaged
or modified to suit the project. I thou ght the most logica l thing
would be to docum ent my progress and share the inform ation
through a book . To summa rize, I decided to build my own machin e
because I love a cha llenge and I learn more when I have a practi-
cal project; also, I can keep the cost low. It's that simple.
Gantry Style
In my op inion, a gantry styled CNC machine is sim plest to imple-
ment. A few years ago, I built a band saw mill fram e and gantry,
so the design of a more accurate system didn't seem too tough a
project. I also like the idea of moving the tool over the material
rather tha n the material under the tool. A machine built to move
material would not have as large a wo rking area for a given foot-
print. Considering my work shed is only 22 X 12 feet , a gantry
machine is most suitable.
Motors
The first purchase to make was the stepper motor. My local
Princess Auto has a great surplus department, so I headed there
2
1-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

I
Chapter 1 /
Design
first. Sure enough, they had
some step-syn motors (seen in
Figures 1.1 and
1.2). They are Nema frame size 34, draw 1.4
amps per channel, and have a rating of 4.6 volts.
LOT NO.
8201
U'~
"; :' 0[
IN .; .\ PA "J
1'y
6038285-1
0 ....
o
DPNK \
C
Figure 1,1
Step-Syn stepper motor
side view.
Figure 1.2
Step-Syn stepper motor
top view.
3

CNC Robotics
These motors were used in an IBM product-probably a pr inter.
They are unipolar, but if you run them as bipolar the y produce
more torque (see Figure 1.3).
1also discovered that these stepper motors work better if they are
given 12 volts instead of the 4.6-volt rating on the motor body. The
strength of a stepper motor is rated in ou nce inches of holding
torque. The step-syn information 1 found indicated tha t these
motors are an ywhere from 90 to 220 ounce inches. I so metimes
work backwards, and bu ying the motors first is certa inly just that !
Normally, you would calculate what strengt h of motor you nee d to
run the machine and then purchase a suitable motor. Here's how
to calculate the strength of motor you need to run this machine. If
you can't find any surplus motors, investigate a company called
Pacific Scientific-they ha ve a variety of steppe r motors and also
make available software for download, which you can use to
determine the size of motor you need. Speaking with them , I was
impressed with how well I was treated, considering 1 would only
need three of their motors.
Remember that although brand new motors are expe ns ive, you
know the y will work and you can match the strength to the
machine. New motors could also speed up the mach ine consider-
abl y. When 1 say "speed
up ," it is important to note that I am
referring to travel speeds, not cutting speeds. Cutting speeds for
most materials will be slow with this style of machine, regardless
of which motor you choose; you can't run a route r thro ugh wood
at 200 inches per minute and expect the cut to look good. Cutting
speeds of 10 to 30 inch es per minu te define the range we can
expect from this machine with these motors. A faster machine can
be expected to travel quickly when not cutti ng and slow down
when cutting through material.
Lineal Motion
There are a variety of off-the-shelf lineal motion products , but
most of the systems were too expensive for this proj ect. Thinking
that it would be useful some day. 1acq uired a NuArc copy camera
a few years ago (see Figure 1.4 ), so 1 took it apart and found it
4
,-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

r----------------------------- .- . --~
Chapter 1 /
Design
STEP-SYN 103-820-0240 4.5V 1.4 AMP2DEG/STEP
WIRING DIAGRAM
Figure 1 .3
Wiring diagram of a
Step-Syn stepper motor.
UNIPOlAR CONNECTKlN
+ MOTOR SUPPLY
..lAllA}
C
rrI l l '
RED
PHASEA
BLACK
REDiWHlTE -
BLUE
PHASEC
WHITE
BLUEN/HITE -
PHASE D
BIPOLARCONNECTIONS
r-
All Al }
C
rrr rl)
L-
BIPOLARHAlF WINDING (MORESPEED)
RED
PHASE A
BLACK -
-
PHASE B
REDfWHITE -
NOr CONNEC TED
BLUE---
PHASEC
WHITE --
PHASED
BLUEN/HITE-
NOTCONNECTED
BIPOLAR FULL WINDING (MORElORQUEJ
BLUE
PHASEC
J.AOI\ <-
WHITE
NOTCONNEC TED
Ai\lfo
BLUEiWHlTE -
PHASE D
roP10loM\ I
.u..
C
r'rrY)
RED -
-
-
BLACK-
-
REDiWHITE -
PHASEA
~W N"
NOTCONNECTED !Jk'iro
PHASE B
t< 7f'r1"'<'
!J
\C"~No
IJ,Wf.
10 71711"'<>
U ~t
f'frYf'p
r~P 7o#",
5
1-
-
-
-

CNC Robot ics
Figure 1.4
Exploded illustration of the NuArc Model SST 1418 supersonic horizontal camera. Part 21 is the carriage
that travels on the guide rails using lineal bearings.
6
1-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 1 /
Design
uses lineal bearings running on guide rails to move th e copy board
as we ll as the bellows.
Th e slide employed to move the bellows and copy board would
work we ll as the y-axis for my CNC machine. And it was comp lete
with beari ngs and holders built in to the slide, as pictu red in
Figures 1.5 and 1.6.
:~~
8685 :4---18
81
d>--'"88
85 86
;
•
64
Figure 1 .5
NuArc Camera, part
number 82 is the
guide rail.
7

Figure 1.6
Closeup of the slide
showing the bearings
numbered 40 and the
location of lead screw
nut numbered 33 .
CNC Robotics
Of the eight bearings, I found that only four were still in satisfacto-
ry condition for use. I decided that the x-axis could be built in the
same manner, employing open linea l bearings running on a rail
that had been drilled and tapped to allow the use of support bolts.
I also chose to make my own bearing holders for the x-ax is because
the cost of preb uilt products was more than Icould justify. Rail sup-
port material is ava ilable as well, but the cost of this product made
me believe it wasn't required and that the bolts wo uld give the rail
enough su pport. I noticed that the copy camera didn't have any
extra support under the rails. If you wanted extra support in a pro j-
ect like this, it co uld be fashioned from two pieces of angle iron
with a spacer, but the su rface it would be mounted on-consider-
ing the rail would be in con tact with the support-would have to be
perfectly flat. As I had no intention of using perfect steel to bu ild
this machine, having the bolts provide the support meant that they
could be adjusted to bring the rail to a flat plane.
Similar bearings an d rails cou ld be used for the z-axls, but I decid-
ed instead to use a sw iveling TV tray assembly bought at the
Home Depot. The glides are rated at 100 Ibs. to ho ld a televisio n
hori zontally. My project would use the glides vertically, so they
would be plenty strong, with large ba ll bearings an d enough trav-
el for the z-axls. The NuArc ca mera used 3/4-inch bearings and
support rails, so I decided to use the sa me bearing and rail size on
the x-axis.
8
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 1 /
Design
Motor Drivers
At this point in the project 1 had already pu rchased
motors, so I
looked at simple driver solutions. The best solution was found in
the form of the 1297 and 1298 integrated circuits manufactured by
ST Microelectronics. Their Web site ha s all the information need-
ed to build a bipol ar stepper motor driver using these two inte-
grated circuits, which are often referred to as "chips." A driver built
from these ch ips can ea sily provide the voltage and amperage
needed by the step syn motors.
Acme Screw
The question of how to move the gantry and axes slides was a lso
resolved by cost. I had originally conside red using ball screws, but
afte r compar ing the cost of the ball screw with that of an acme
screw, it didn 't make se nse to spe nd three times as much on ba ll
screws. The ad vantages to usin g ball screws are tha t a smaller
motor can be used to move a given load, and with a preload ed nut,
the re is very little backla sh in the system. As mentioned earlier in
this chapter, this is a machine that will not speed through its
assign ed jobs so we can compensate for backla sh in the software.
This means the project can be built using less expensive acme
screws.
I also had to decide how many turns per inch to put on the acme
screw. My experiments with ready rod proved that too man y turns
made for annoyingly slow movement and too few turns redu ces
the quality of resolution that allows the machine to make small,
precise movements. 1settled on a 1/2-in ch acme screw with eight
turns per inch, and a 6-foot length with a nut at a cost of $ 135
Canadian.
'
Deciding on the Dimensions
of the Machine
Earlier in the cha pter 1 explained that I made the decision of
ma chine footprint size based on
the area in my workshop.
9

Figure 1.7
View from side of
proposed machine.
CNC Robotics
Because I only have a space 12 X 22 feet a nd tools and materi-
als currently occupy most of that space, my machine wo uld only
be ab out 7 feet long and 4 feet wide. The next step in this projeci
was to generate concept drawings, since I was going to use some
of the components from the NuArc
horizontal camera. The
dimensions of the frame ended up being longer than the support
rails in order to accommodate the bearing holders and the motor
mount with a little room 10 spare. The width of the frame is a few
inches shorte r than the balance of a 6-foot acme lead screw, after
the length needed for the z-axis has been cut from it. The follow-
ing illustrations are the concept drawings 1 created to guide the
co nstruction of the machine. Figure 1.7 is a drawing of the
machine from the side.
The next illustration, Figure 1.8, is the width of the machine,
viewed from the front.
Software
After figuring out the approximate shape and dimensions and
deciding on stepper motors and drivers, the next question was
which software to use to control the machine once finished. 1
looked at a variety of software solutions and, since my level of
experience with CNC machinery was nonexistent, I wanted a pro-
gram that was easy to use. To communicate to the stepper moto rs
10
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
- -

Chapter 1 /
Design
~
r-
-
~
~
[
~D
u
u
0
L0-
a
how to move so the tool being used will follow the desired path, a
program is written in G-code and M-code. The G- and M-codes are
used to tell the machine where to go in the xyx-axes areas of trav-
el and what to do when it gets there. Very simple programs
describing things like boxes or circles are not very complicated to
write yourself. 1wanted software that would allow me to create my
own designs in a drawing program like CorelD raw and then import
the drawing and
auto matica lly create the necessary G- and M-
code file. 1 looked at some freeware but was disappointed by the
level of difficulty to implement the software and get it doing what
I wanted. Furt her research revealed software ca lled KCam that
would do exactly wha t was necessa ry. See the screen capture from
KCam in Figure 1.9.
KCam isn't freewa re, but it certai nly isn 't expensive either at $100
U.S. per copy. The fact that KCam is not expensive shouldn't lead
you to be lieve it is ineffective softwa re. It is extremely easy to use
an d allows you to customize the use of the printer port. KCam will
Figure 1 .8
Front view of machine
along its width.
11

•
Figure 1.9
What Kearn looks like.
CNC Robotics
iii ? hi
ifJN'
iF iI ,Ii
0.
~ ~ .........
: ~ f<n<tmo ~ It'o
-
~r_
r_ .....
~­--
,~~
, ~ :-
i L' t..
,
-.' 1; !--
l~
,
-
'" ~
'C,t-·-
I
-";
i-
~.
' looiTdf
31_'_
:"Ircll?l§,J" 1~I ~I '''''1" I0;1" I"'I@I"'i' 'J'~ ' ''iJ'''iJ.ill
12
also import HPGL files created in CorelDraw 9 or OXF files created
in CAD software like AutoCad or in CorelDraw 9.
In this cha pter I sha red design choices for my CNC machine and
the reasons behind them, as well as the choices of stepper motors,
drivers . an d software. At this point in the project. we need to start
thinking about the electronics. the topi c of the next chapter.

RI R2 R3 R4 R5 R6
4k 4k 4k 4k 4k 4k
Electronics
Stepper Motor Driver and
Computer Interface Boards
This chapter deals with the design and construction of the elec-
tronics required for controlling stepper motors using a computer
and Keam software. The requirements for the drivers are based on
the step-syn motor purchased in the previous chapter from the
surplus department of Princess Auto (see Figure 2.2).
In addition to these surplus motors, I also bought three new
motors from Pacific Scientific, also mentioned in the previous
chapter (see Figure 2.3).
Figure 2.1
The finished boards.
13

Figure 2.2
Step-syn stepper motor.
Figure 2.3
Pacific Scientific
stepper motor.
14
CNC Robotics

Chapter 2 /
Electronics
All the motors draw
1.4 amps per channel, but the step-syn
motors are rated at 4.5 volts and the Pacific Scientific motor can be
given a maximum of
170 volts. Alt hough I'm not using Pacific
Scientific motors in this project, if yo u are unable to find suitable
surplus steppers you may wish to purchase new ones. WARNING:
The stepper motor driver boards described in this chapter can drive
both of these motors, but you can only use up to 36 volts for motor
power-too many volts will fry the L298 integrated circuit. A com -
pany called ST Microelectronics has graciously given me permis-
sion to reproduce the data sheets and app lication notes in their
entirety in this chapter (see pages 22 through 75). These docu-
ments are the basis of th e driver board design. Read them thor-
oughly to gain a greater understanding of the strengths and limi-
tations of the L297/L298 integrated circuits (referred to as ICs) in
this app lication.
Stepper Motor Driver Circuit
The stepper motordriver boards are th e muscles of the CNC machine.
They receive signals from the computer that indicate w hic h direc-
ti on that axis w ill travel and how far it wi ll move. They are the
muscles because as they receive direction and step signals from
Figure 2.4
L297 stepper motor
controller IC.
Figure 2.5
L298 H Bridge IC.
15

CNC Robotics
the computer, they translate the information into higher voltage
and amperage signa ls to send to the stepper motors. The power
sent to the stepper motor coils is distributed to the coils in a
sequence that will move the shaft in the desired direction as many
steps as are needed to traverse the distance required on that axis .
For th is project we need three driver boards. one for each axis of
travel. The boa rds are designed using a set of in tegrated circuits
manu factured by STMicroelect rion ics- the L297 and L298.
The
nice thing about using th ese two chi ps is that th e boa rd design is
quite simple. only requiring a min ima l number of components. A
second benefit is that w hen com bined, these two chips create a
very powerful driver board capable of handling up to 36 volts and
2 amperes per channel. A lot of bipolar and uniploar stepper
motors currently manufactured or available as surplus. which are
strong enough to be used for this machine. are well within the tol-
erances of these chips. The steppers that I decided to use are
Sanyo Denki step-syn and are rated at 4.5 volts and 1.4 amps per
channel wi th a resolution of 2 degrees per step. The power rat ings
are well wi th in the tolera nces of the driver boa rd. You can refer to
the schematic (Figure 2.6) to determ ine the components requ ired
for this board.
Table 2-1
Part
Quantity
Description
Driver Board
Ul
1
L298 Dual full-bridge driver
Components
U2
1
L297 Stepper motor controller
Dl-D8
8
FR304 Fast recovery diode
Cl
1
3.3 NF capacitor
C2,C3
2
0.1 UFcapacitor
C4
1
470 UF capacitor
C5, C6
2
lNF capacitor
Rl, R2
2
0.5 ohm power resistor
R3
1
lK ohm resistor
R4
1
22K ohm resistor
(continued onnext page)
16
I~~~~~~~~~~~~~~~~~~~~~~~~~-

IPI
POWER
Pin 1 is CircuitVoltage
Pins 2 and 3 Are Ground
D4
'!ODE
D.
'!ODE
()
::Y
OJ
~
tv
"-
en
CD
""o
:so·
"'
!!
IJ<lc
Ci1
N
en
~
cr
CD
CD
"C
3
"C
co
CD-~
0 " 3
.
0
Q
0.
~ .
,"
I - ~ ~ ~
y
=1=~2
O.1uf
r-'-
~~,
f +~'
470uf
O.1u
3
2
I p---, I
~I
HEAr
R l
U-
1.,,[
'-
'&:'
RS
R6
r-
2k
2k2
10k
R3
2~:a1J! ~~OD~ ~:ODE.2
~
Ik
'I>--
'--
,
j p..-,
I'
=
A ,
s
INI
OUT!
2
HEAr R' I
zsr
B
IN2
Ol:T2
cwtCCW"
e
IN'
oura
HALFIFUIT
J)
IN'
QUT4
CTL
SYNC H-
ENA ISENAtt
r-iT-
VREF
Tl'IIlI
EN 8 ISEN B
SEN]
Tl'IIl2
9
f-'
Tl>-
SEN2
HOME f-'
VSS
GND
EN
I'
L..-'- vs
osc
lWfR l
12
VS
GNO
2
~1a1J!
D6
07 Of"
""
2
~ia0"L SOlao.
Tl>-
RI
R2
o.s ohm o.s o~
s
en' na
I
=Ff'
lnf
R7
'k~
=:=f:f
R'
so
' c
o
'""'"

CNC Robotics
Table 2-1
Part
Quantity
Description
Driver Board
R5
1
2K2 ohm resistor
Components
(continued)
R6
1
10K ohm resistor
R7, R8
2
4,7K ohm resistor
JP1-JP6
3-3pin, 2-4pin
Cut to size from header material.
Heat Sink
1
You must install a heat sink on the
1.298.
Now for a brief explanation of the circuit ; note that I am incl uding
in this chapter the data sheets for the L298 and L297 ICs as well
as the applicat ion notes, so yo u will be able to refer to the source
material at will (see pages 22 through 75). The information con -
tained in these documents is essentially all you need to create the
circui t you are about to build.
This circuit works by receiv ing signa ls from the computer's pa ral-
lel port to pin 17 on the L297 for direction of the stepper motor
and pin 18 on the 1.297 for the number of steps the motor will take
in that directi on . The L297 th en sends signals to the 1.298 in the
sequence in w hich the windings must be powered up to accom-
pli sh the task. Then the 1.298 provides power to the motor w ind-
ings in th e proper order. You will note that motor power is sup-
plied only to the L298 for this pu rpose. But both chips require +5
volts to fu nction. The eight FR304 diodes cla mp the stepper motor
windings to motor voltage and ground. Diodes used for this pur-
pose must be fast recovery but could be a different value based on
the amperage needed by the stepper motors used. Th is protects
the L298 fro m the induced high voltages generated by the stepper
moto r w hen the any of the windings are turned off.
Pins I and 15 on the L298 are connected to two 1/ 2-ohm power
resistors connected to ground. All drive currents used by the step-
per's two field w indings are passed through th ese resistors. The
resistor connected to pin I takes the current from one of th e two
field w indings, w hile the pi n 15 takes the curre nt from the othe r
field winding. These two resistors give the controlling 1.297 a
method
of
measuring
the current
being
induced
within
the
18

Chapter 2 /
Electronics
motor. The L297 measures the voltage drop across these resistors
to control the PWM chopper circu it used to control the current
within the windings of the steppe r motor. The 2.2K and 10K resis-
tors connected to pin 15 (Vref) on the L297 are used to set up a
voltage divider. The resulting voltage applied to the Vref pin is
used as a set point against the measured voltage coming from the
field windings. When the set po int is reached, the power drive
stage within the L298 driving that winding is turned off, allowing
the FR304 diodes to discharge the field winding. The field winding
sta ys off until the internal oscillator within the L2 97 times out and
turns the field winding back on . The 22K resistor and the 3.3nF
capacitor connected to pin 16 on the L297 set up the timer's chop-
per rate. C2, C3, and C4 filter the power supply for the elect ronics
and motors. jP I pro vides power and ground for the circuit and the
motors. jP2 is jumped to include the circuit connected to pin I with
pin 16 on the L297 on only one board of the three used; the other
two have pin 16 on the L29 7 jumped to ground. JP3 pin I accepts
step signals; pin 2 accepts direction signals; pin 3 is used to con-
nect all driver boards that need to be synced and pin 4 is ground.
jP4 is set to bring pin 19 on the L297 high at pin 1 to provide full
step motor drive or low at pin 3 for half step. JPS is set to bring pin
li on the L297 high at pin I to use phase driving or low at pin 3
to inhibit drive.
Don 't worry too much about und erstanding how this circuit wor ks;
as long as you follow the directions closely, the board you build
will function properly.
The Interface Board
This board is really only a gateway that allows the computer to
send and receive signals to the drivers and limit switches. There
isn 't much to it aside from a connector for the straight-through
parallel port cable and so me co nnections for the wires coming
from each of the driver boards and limit switches. If you refer to
the schematic (Figure 2.7) you will see wh y the parts list is short.
19
,
l-
-
-
-
-
-
-

CNC Roboti cs
R I
R2_ '\', R4_ RS_ R6_ R7_ ~8, R9_ ,,!;J.'! RI, RI= RI,
.'!;~ RI! RI= RI7
4k' 4k"l 4bc 4k' 4k'1 4k'
4k ·~ 4kl( 4k"l 41u~ 4k"Z 4k"l 4k' .411.1< 4k7( 4k"Z 4k7
'I
2
Figure 2.7
Interface schematic.
20
~
1
2
3
4
5
6
7
8
9
10
II
12
13
----E
14
~
16
_
4
17
\wxn;,. 17
t ~ ~ ~
Pin 10
Pin11
Pin12
Pin 13
JP6
~V P;n2-gmd

Chapter 2 /
Electronics
Part
Quantity
Description
Table 2.2
Conn 1
Rl-17
JPl-5
1
17
1-17 pin, 5-2 pin
DB 25 connector
4.7K ohm resistor
Header material
Interface Components
List
Th e 4.7 K resistors limit curren t to protect the circuit and the par-
all el port. Better methods of protecting the parallel port are to use
an optical isolation circuit or install a parallel port card specifical-
ly to be used w ith the interface; the cards are cheap insurance
against damaging a motherboard. I bought a used computer sole-
ly for use with these boards becau se if I destroy it I won't lose
years of accumulated file s.
The pin out of the interface board is straightforward. Pins 1-17 on
jP1 are conn ected to pins 1-1 7 of the parallel port of your comput-
er. jP2 is conn ected to pin 10on jP I at pin 1 and to ground at pin 2.
jP3 is conn ected to pin lion jPl at pin 1 and to ground at pin 2. jP4
is conn ected to pin 12 on [P1 and to ground at pin 2. jP5 is con-
nected to pin 13 on IPI and pin 2 is connected to ground. I brought
pin s 10, II , 12, and 13 on JP lout to separate conn ectors to make
hooking them to limit switches a little easier. At JP6, pin I is to be
connected to 5 volts and pin 2 to ground on the power supply.
This chapter w ill have given you an und erstanding of the circuits
that are needed to connect and control the stepper motors with a
computer. You w ill also have become familiar with th e integrated
circuits that the drivers are built around. This understanding will
enabl e you to bett er troubleshoot your boards when they are com -
plete. The next chapter deals w ith making the printed circuit
boards using the toner transfer method.
21
I
l-
-
-
- - - -

CNC Robotics
L297
L297D
STEPPER MOTOR CONTROLLERS
ORDERING NUMBERS : L297 (OIP20)
L2970 (5020)
• NORMALIWAWE DRIVE
• HALF/FULL STEP MODES
• CLOCKWISEJANTICLOCKWISEDIRECTION
• SW ITCHMODE LOAD CURRENT REGULA-
TION
• PROGRAMMABLE LOAD CURRENT
• FEW EXTE RNAL COMPONENTS
• RESET INPUT & HOM E OUTPUT
• ENABLE INPUT
OlP20 •
-
--~
5020
DESCRIPTION
The l297/A/O Stepper Motor Controller Ie gene r-
ates four phase drive signals for twophase bipolar
and four phase unipolar step motors in microcom-
puter-conlrolled applications. The motor can be
driven in half step, normal and wawe drive modes
and on-chip PWM chopper circuits permit switch-
mode control of the current in the windings. A
AB SOLUTE MAXIMUM RATINGS
feature of this device is that it requires only clock,
direction and mode input signals.Since the phase
are generated internally the burden on the micro-
processor.andthe programmer,is greatlyreduced.
Mounted in DIP20 and 8020 packages,the l297
can be used with monolithic bridge drives such as
the L298N or L293 E, or with discrete transistors
and darlingtons.
Symbol
Parameter
Value
Unit
V.
Supply voltage
10
V
V;
Input signals
7
V
P~
Total power dissipation (T"mt>- 70"C)
,
W
T Itg . Ti
Storage and junction temperature
-40 to+ 150
"C
TW O PHAS E BIPOLA R STEPPER MOTOR CONTROL CIRCUIT
••
_FlJtll "
I e
!."OO...
Ie
l l91
,
0
22
August 1996
1/1 1
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
L297-1.297D
PIN CONNECTION (Top view)
--
''''
""
"""
•
"
lIj,lflfULl
'"
"""
"
cwffi
L297
1297D "
'"
"
'.'
"
S[NS 1
"
$£/(52
"
v
" ""',""-
~_'.Ut
BLOCK OIAGRAM (L297/L297D)
1---4~ '~'
" '~' "Ul l
~lf~
I/f<,£,
"
2/11
J.V~ --- - - - ----
23

CNC Roboti cs
L297·l297D
PIN FUNCTIONS - l2971L297D
N'
NAME
FUNCTION
1
SYNC
OUtput of the on-ch ip chopper oscillator.
The SYNC connections The SYNC co-oecnco s 01all l297s to be
synchrooized are coonecled toge the r and the oscillator
components are omitted on all but one. If an external clock so urce
is used it is injected at this terminal.
2
OND
Ground connec tion.
3
HOME
Ope n co llector output that indicates wh en the l297 is in its initial
slate (ABeD = 0101).
The transistor is open when this signal is active.
4
A
Motor phase A drive signal for pow er stage .
5
INHl
Active low inhibit control for dri ver stage of A and B phases.
When a bipola r bridge is used this signal ca n be used 10 ensure
fas! decay of load current when a winding is de-e nergi zed . Also
used by chopper 10 regulate load current if CONT ROL input is low.
6
B
Motor pha se 8 drive signal for power stag e.
7
e
Motor pha se C drive signa l for pow er stage .
S
INH2
Activ e low inhibit con trol for drive stages of C and 0 phases.
same functi ons as INH 1.
9
D
Motor phase 0 drive signal for power stage .
I.
ENABLE
Chip ena ble input. When low (inactiv e) INH1. INH2 , A. B, C and D
are brought low.
11
CONTROL
Control input that del ines action of chopper.
When low chopper acts on INHl and INH2; when high chopper
acts on pha se lin es ABCD.
12
V.
5V supply input.
13
SENS 2
Input lor load current sense voltage from power stages 01phases
C and D.
14
SENS ,
Input lor load curre nt sense voltage from power stages 01phases
A and B.
15
V. ,
Reference volta ge lor chopper circuit. A volage applied to this pin
determines the peak load current.
An RC network (A to Vee. C to ground) comected to this terminal
,.
ose
determines the chopper rate.This term inal is connecled 10 ground
on all but one device in synchroniz ed multi - l297 confi gurations. I
== 1I0.69RC
17
CWICCW
Clockwiseicountef'Clod(wise direction control inpul.
Physical direction 01motor rotation also depends on connection
of windings.
Synchronized intemally therefore direction can be changed at any
tim e.
18
CLOC K
Step clock. An active low pulse on this input advances Ihe motor
one inc reme nt. The step occurs on the rising edge 01this signal.
3/11
--------- liii SGS.~
...::c.:.
24
I

Chapter 2 I
Electron ics
1297·12970
PIN FUNCTIONS . l2971L297D(conlinued)
N'
NAME
FUNCTION
,.
HAl F/FUU
Halflfull step select input. When high selects half step operation,
when low selects lun step ope ration . On e-phase-on full step mode
is obtained by sel ecting FULL wh8f1 the l297'stranslator is at an
eveo-numoered slate.
Two-phase-on lull step mode is set by selecting FULL whe n the
translator is at an odd numbered position. (The hom e position is
designate state 1).
20
RES ET
Reset input An active low pulse on this input restores the
translator to the home posi tion (state 1, ABeD= 0101).
THERMAL DATA
Thermal resistance junction-ambient
Symb04
Parameter
DIP20
max
80
SOlO
Unit
100
oem
CIRCUIT OPERATION
The LZ97 is intended for use with a dual bridge
driver, quad darlington array or discrete power
devices in step motor driving applications. It re-
ceives step clock,direction and mode signals from
the systems controlle r (usually a microcomputer
chip) and generates control signals for the power
stage.
The principal functionsare a translator,which gen-
erates the motor phase seque nces, and a dual
PWM choppercircuit which regulatesthe current in
the motor windings.The translator generates three
different sequences , selected by the HALF/FU LL
input. These are normal (two phases energised ),
wave drive (one phase energised) and half-step
(alternately one phase energised/two phases en-
ergised) .Two inhibit signals are also generated by
the l297 in half step and wavedrive modes.These
signals, which connect directlyto the L298'senable
inputs, are intended to speed current decay when
a winding is de-energised.When the L297 is used
to drive a unipolar motor the chopper acts on these
lines.
An input called CONTROL determ ines whethe rthe
chopper will act on the phase lines ABCD or the
inhibit lines INH1 and INH2. When the phase lines
4111
are cho pped the non-activephase line of each pair
(AB or CD) is activated(ratherthan interrupting the
line then active). In L297 + L298 conf igurations this
technique reduces dissipation in the load current
sense resistors.
A common on-chip osc illator drives the dual chop-
per.lt suppliespulses at the cho ppe r rate which set
the two flip-flops FF1 and FF2. When the cu rrent in
a winding reaches the prog rammed peak value the
voltage across the sense resistor (connected to
one of the sense inputs SENSl or SEN&?) equals
Vral and the correspo nding comparator resets its
flip flop, interrupting the drive current until the next
oscillator pulse arrives. The peak current for both
windings is programmedbya voltaged ivideron the
V,al input.
Ground noise problems in multiple confi gurations
can be avoided by synchronising the chopper os-
cillators. This is done by connecting all the SYNC
pins together. moun ting the oscillator RC network
on one device only and grounding the OSC pin on
all other devices .
25

CNC Robotics
L297·l297D
MOTORDRIVINGPHASE SEQUENCES
The L29Ts translator generatesphase sequences
for normal drive, wave drive and half step modes.
The state sequences and output waveforms for
these three modes are shown below. In all cases
the translatoradvanceson the low to high transis-
tionof~.
Clockwiserotation is indicate;for anticlockwisero-
tation the sequences are simply reversed liESET
restores the translator to state 1, where ABeD =
0101.
HALF STEP MODE
Half step mode is selectedbya high level on the HALFiFOIT input.
o
----,u r----,ur--u--
NORMALDRIVE MODE
Normal drive mode (also called "two-phase-on" drive) is selected by a low level on the HALFJro[[ input
when the translator is at an odd numbered state (1, 3, 5 or 7). In this mode the mm and TNR2 outputs
remain high throughout.
100 1€J~I010
\
[iJ
0 ,
,
)
OIOI~ 0
pr0l10
HO~_~
•
c
INI-<\ o .
•
.~-
----- -- ---- - - - - --- - - -- - - - - - - - -- _ . _--~-- -
----------liii~.=
5/11
26
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
L297-1297D
MOTOR DRIVING PHASE SEQUENCES (continued)
WAVE DRIVE MODE
Wave drive mode (also called "one-phase-on" drive) is selected by a low level on the HALF/F'O[[ input
when the translatoris at an even numbered state (2, 4, 6 or 8).
"""
""
....n
n
n
r
m
G:i
n
n
n...-
-II
n
n
0
-,
0\00
"'"
""
t ·....
ELECTRICAL CHARACTERISTICS (Refer to the block diagram Tamb = 25"C, Vs = 5V unless otherwise
specified)
Symbo l
Param eter
Testcondltlons
Min.
Typ
Max.
Uni t
V,
Supply voltage (pin 12)
4.75
7
V
"
Qui escent supply current (pin 12)
Outpu ts float ing
50
BO
mA
V,
Input voltage
l ow
0.6
V
(pin 11,17,18, 19, 20)
High
2
V,
V
"
Input current
Vj", L
' 00
pA
(pin 11, 17, 18, 19, 20)
VI""H
10
pA
V~
Enable input voltage (pin 10j
low
1.3
V
High
2
V,
V
~ ,
Enable inp ut cu rren t (pin 10)
V....'" L
100
pA
Ven ", H
10
pA
v;
Phase outpu t voltage
I" =l OmA
V",-
OA
V
(pins 4, 6, 7, 9)
10 = 5mA
VOH
3.9
V
V,nll
Inhibit output voltage (pins 5, 8)
10= 10mA
ViM L
OA
V
10 = SmA
Vir>h H
3.9
V
VSYNC
Sync Output Voltage
10 = SmA
VSYNC H
3.3
V
10 = 5mA
VSYNCv
O.B
6111
27

CNC Robotics
ELECTRiCAL CHARACTERISTICS (continued)
L297·l297D
Symbol
Paraneter
Test con dItion s
Min.
Typ
Max:.
UnIt
I ~.
Leakage current(pin3)
VeE=7V
1
pA
V~
saturationvoltage (pin 3)
I ",SmA
0.'
V
V~
Comparators offsetvoltage
V,.,=. 1 V
s
mV
(pins 13, 14, 15)
~
Comparatorbias curren t
· 100
'0
pA
(pins13, 14. 15)
V~
Input refererx:evolage (pin 15)
0
3
V
teu<
Clock time
0.'
us
ts
Set up time
1
us
IH
Hold time
•
us
'"
Reset time
1
us
!RclK
Reset 10dockdelay
1
ps
Figure 1.
CWfCCW
' Clll.
/
Is
'H--
-----
/
~_ ~64!0
t.
IRCl K
28
_ _ _ _ _ _ _ _ _ _ I.jj
SC;S.~
7/11

Chapter 2 I
Electronics
L297-L297D
APPLICATION INFORMATION
TWOPHASE BIPOLARSTEPPER MOTOR CONTROL CIRCUrr
This circuit drives bipolarsteppermotorswith windingcurrentsup to 2A.The diodesare fast 2Atypes.
11 51RS1. ~O!i n
01tvoa~ Zot. ~A ST 0100£5
Figure 3 : SynchronisingL297s
1"-- -10
. ~~ NSE I
.
SENS{; l
L298H
....
"
1,,106
1
.,°t
'---1-
~_~ e u"
'"
. s>
STEP PER
"'''OR
WINDINGS
----
I,
1
SY NC
SYNC
L297
L297
v,
OSC
osc
I" •
16
I.
5V
'!o_!I8.U II
:f
--
'"1
29

CNC Robotics
L297-1297D
D1P20 PACKAGEMECHANICAL DATA
mm
Inch
DIM.
MIN.
TYP.
MAX.
MIN.
TYP.
MAX .
at
0.254
0.010
B
1.39
1.65
0.055
0.065
b
0.45
0.018
b1
0.25
0.0 10
0
25.4
1.000
E
8.5
0.335
e
2.54
0. 100
ea
22 .86
0.900
F-
7.1
0.280
I
3.93
0.155
L
3.3
0.130
Z
1.34
0.053
,......
r-J-r
H
H
}-< }-
'-\ H u
-I -, ...
u
u
b
B
....!...
z
13
Z
I
I
1
r
b1
E
D
11
__________
lfiisGS.~
-=.:..:.
30
r- - - - - ----------------------

L297-L297D
5020 PACKAGE MECHANICAL DATA
Chapter 2 /
Electronics
mm
Inch
DIM.
MIN.
TYP.
MAX.
MIN.
TYP.
MAX.
A
2.65
0.104
a1
0.1
0.3
0.00 4
0.01 2
a2
2.45
0.096
b
0.35
0.49
0.014
0.019
b1
0.23
0.32
0.009
0.013
C
0.5
0.02 0
ct
45 (typ .)
D
12.6
13.0
0.496
0.51 2
E
10
10.65
0.394
0.419
,
1.27
0.050
,3
11.43
0.450
F
7.4
7.6
0.291
0.299
L
0.5
1.27
0.020
0.050
M
0.75
0.030
S
8 (max.)
D
M
10/11
31

GNG Robotics
L297-L297D
Information furnishe d is beneveo to be accurate and reliable. Ho wever, SGS-THOMSON Microelectronics assum es no responsibility lor the
consequences of use of such information nor for any infringement of patents or other rights of third parties Which may result from ~s use. No
license is granted by implication or otherwise under any patent or patent rights of SG5- THOMSO N Microelectronics.Specification mentioned
in this publication are subject 10 change without notice. This publication supersedes and replaces all information previously supplied.
SGS·THOMSON Microelectronics products are not authorized for use as critical compooonts in urescocort oevcas or systems without express
wraten aporova of SGS -THOMSON Microelectronics.
" 1996 SGS-THOMSON Microelectronics - Printed in Italy - All Rights Reserved
SGS·THOMSON Microelectronics GROUP OF COMPANIES
Auslralia - Brazil - Canada - China - France - Germany - Hong Kong· Italy - Japan - Korea- Malaysia - Mejta - Wtorocco - The Netherlands -
Sinqapora . Spain - s wsoen - Switzerland · Taiwan - Thailand • Un~edKingdorn · U.S,A.
32
----------LW~
11/11
1-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 I
Electronics
L298
DUAL FULL-BRIDGE DRIVER
.OPERATINGSUPPLYVOLTAGE UPT0 46 V
• TOTAL DC CURRENT UP TO 4 A
• LOW SATURATiON VOLTAGE
• OVERTEMPERATURE PROTECTION
• LOG ICAL "0" INPUT VOLTAGE UP TO 1.5 V
(HIGH NOISE IMMUN ITY)
DESCRIPTION
Multlwatt1 5
'ili.
" '~ .
~
Powe rS0 20
The L29g is an integrated monolithiccircuit in a 15-
lead Multiwatt and PowerS020 packages. It is a
high voltage, high current dual full-bridge driver de-
signedto acceptstandardTTL logiclevels and drive
inductive loads such as relays, solenoids, DC and
steppingmotors.Too enableInputs are providedto
enableor disablethe deviceindependentlyof the in-
put signals. The emitters of the lower transistorsof
each bridge are connected togetherand the corte-
spondingexternalterminal can be usedfor thecon-
P RDERING NUM B ERS: L29SN (Multiwatt Ve rt. )
l 298HN
(Mul tiwatt Honz)
L298P (Po werS020j
nectionofan externalsensingresistor.Anadditional
supply input is providedso that the logic worksat a
lower voltage.
BL OCK DIA GRAM
OUT'
" 5
""..
"""
a ..,
'n'
••
In'
....
"
....
•
OS
Sl NS£ Ii.
SEftS£ 9
~, u
.....
'5•
October 1998
1/13
33

~--- - ~--- ~----------------------
CNC Robotics
L298
ABSOL UTEMAXIMUM RATINGS
Symbol
Par ameter
Value
Unit
V,
Powe r Supply
50
V
V",
Log ic Supply Vollage
7
V
V" Vert
Inpu t and Ena ble Voltage
-o.a to 7
V
'0
Peak OutputCurrenl (each Channe ~
- Non Repetitive (I = l OQJJ.s)
3
A
-RepeUive (80% 011 - 20% otf; ton =lOrns)
2~5
A
--DC Operaticn
2
A
V_
Sensing Voltage
~1 t0 2.3
V
P",
Total Power Dissipakn (Tease_ 75'C )
25
W
T"
Junc tbn Operating Temperature
-25 to 130
-c
TSl<). Tj
Storage and Junction Temperature
-40 to 150
"c
PIN CONN ECTIONS (lop view)
"
Multlwatt 15
~
"
'fT
ra
ra
"ro,
L
TAROO'lNEC1EDTOPIt48
CURRENT se NSINGB
""'''''' 4
ccrsur 3
INPUT 4
ENABLE 8
l ~lPUT :I
LOGIC SUPPLY VOLTAGE \Iss
G'D
INPUT1
ENABLE A
INPUT 1
SUPPLY VOLTAGE lis
OUTPUT 2
OUTPUT 1
CURRENT SENSING A
34
GNO
20
GND
"~ A
19
"~ 6
NC.
te
N.C.
D,,"
4
17
0""
0""
5
PowerS020
te
CM 3
V,
6
15
".""
""""
7
"
''''''''''6
,"""'.
6
ta
,,,,,,, 3
''''''''
s
ta
VSS
GND
to
"
OND
"""""
THERMAL DATA
Symbol
Parameter
PowerS020
Mu ltlwatt 15
Un it
Rt,,1"CMe
Thermal Resistalce Junctiarcase
Max.
-
3
'CNi
R,.,i-tlmb
The rmal Resistanc e Ju nctioo-ambiEl'l1
Max.
13 n
35
<C/W
(") Mourledoo alumirumsubstrale
2/13

Chapter 2 /
Electronics
L298
PIN FUNCTIONS (referto the block diagram)
MW. 15
Po werSO
Name
Functi on
1;15
2;19
Sense A: Sense B
Between this pin and grounj is connected the sense reestor to
contra the currert of the load
2;3
4;5
Out 1; Oul2
Outputs altha Bridge A; the current that flows through the load
connected between these two pins is monitored at pin 1.
4
6
Vs
Supply Voltage for the Power Ou tput Stages.
A I'lOIl-indu:tive 100n F capacik:lr must be oonnecled between this
pin and groll"ld.
5;7
7:9
Inp ut 1; InpuI 2
TTL comoauae Inputs of the Bridge A-
6;11
8;14
Enable A; Enable B
TTL Compa'ble Enable Input the l stale disables the bridge A
(enaJj e A) ancVor the bri:lge B (enable B).
•
1,10,11,20
GND
Ground.
9
12
VSS
SUpp¥ Voltage for the l og ic Blocks . A1oarr capacior must be
conneded between this pin and ground
10: 12
13;15
Inpul3: Input 4
TIL Comoatible loo uts of the Bridge 8.
13; 14
16;17
OUI3;OuI4
Outp uts 01the Bridge 8. The currere that flows Ihroughthe loa::l
connected between these two pins is mooitoredat pin 15.
-
3;18
N.C.
Not Connected
ELECTRICAL CHA RACTE RISTICS (Vs =42V; Vss =SV, Tj =25°C; unless otherwise specified)
Sym bol
Parameter
T es t Conditions
Min .
Typ.
Max .
Un it
V,
Supp ly Voltage (pin 4)
Operative ccnonco
V,to! +2.5
46
V
Vss
Logic Supply Voltage (pin 9)
4 5
5
7
V
I,
Oulescerr Supply Cu rrent (pin 4)
VQn _ H; <_0
V;_ L
13
22
mA
VI= H
50
70
mA
Van= L
V,=X
4
mA
Iss
Qu iescert Current from Vss (pin 9)
Ven- H:
IL - 0
Vi _ L
24
36
mA
VI = H
7
12
mA
Yen = L
V,= X
6
mA
V,L
Input Low Voltage
-0.3
1.5
V
(pins 5. 7,1 0, 12)
V"
Input High Voltage
2.3
VSS
V
(pins5.7, 10. 12)
"
Low Vollage Input Cu rrert
Vi = L
-10
""
(pinsS. 7. 10. 12)
I.
High Voltage Input Current
Vi = H s Vss --o.6V
30
100
"A
(pinsS,7, 10, 12)
V",, _ L
Enable l ow Voltage (pins 6, 11)
-0.3
1.5
V
V.... =H
Enable High Voltage (pins 6. 11)
2.3
V"
V
len_ l
l ow Voltage Enabl e Current
Veo-l
10
""
(pins 6,1 1)
I,." _ H
High Voltage Enable Current
Ven- H s vse
0.6V
30
100
"A
(pins6.11)
VCEsaHH)
Source Saturation Voltage
IL - 1A
0.95
1.35
1.7
V
IL= 2A
2
2.7
V
VCENI(l )
Sink Saturation Voltage
1t.-1A
(5)
O.BS
1.2
1.6
V
IL- 2A
(5)
1.7
2.3
V
VeE,..
Total Drop
1t. -1A
(5)
1.80
3.2
V
IL -2A
(5)
49
V
V_
Sensing Voltage (pins 1, 15)
- 1
(1)
2
V
3113
35
---- ----------------- ------

CNC Roboti cs
L298
EL ECTRICAL CHARACTERISTICS (conlinued)
Symbol
Parameter
Test Condltlons
Mi n .
Typ.
Max .
Unit
r , (VJ
Source Curreri Tum-est Delay
O.5 V; loO.9I L
(2);(4)
1.5
"S
T2 (VJ
Source Curreri Fall Time
o.s i, to 0.1 It
(2);(4)
0.2
"s
T3 (VJ
Source Curreri Tum-m Delay
0.5 Vil a O.1 IL
(2);(4)
2
"S
T4 (VJ
So urce Curreri Rise Time
a.llt IOO.9 Il
(2);(4)
0.7
"S
Ts {W
Sink Currert Tum-off Delay
O.5V, to O.9 It
(3);(4)
0.7
"s
r, (VJ
Sink Currert Fall Time
a.9 1L 100.1 It
(3);(4)
0.25
"s
T7 (VJ
Sink Cu rrert T um-on Delay
O.5 V;to O.9 IL
(3);(4)
1.6
"S
18 (VJ
Sink Curreri Rise Time
o.i i, lo O.g IL
(3); (4)
0.2
"S
fc (VJ
Commutati<rl Frequency
Il _2A
25
40
KH'
T 1 (V..,)
Source Curreri Tum-ot Delay
0.5 Vento a.9 ll
(2);(4)
3
OS
T2 (V..,)
Sou rce Currert Fall Time
o.si, to O.llt
(2);(4)
1
"s
T3 (V~
Sou rce Curreri Turn-en Del ay
0.5 V.., to c.u,
(2);(4)
0.3
OS
T4
(V~
Source Currert Rise Time
o.u, foO.91L
(2); (4)
0.4
"S
Ts (V~
Sink Cu rreri Tum-off Delay
0.5 Vttn to a .g ll
(3); (4)
2.2
"S
f e (V. ,,)
Sink Curreri Fall Time
a.9 Il 100.1 It
(3); (4)
0.35
"S
T7 (Ve,,)
Sink Curren Tum-on Delay
0.5Ven to O.9 IL
(3);(4)
0.25
"s
r, (Ven>
Sink Curren Rise TIm e
0.1 1L to O.glL
(3); (4)
0.1
,ra
1) 1}Sensilg voltage can be -1 V fort £ 50 usee; in steady stale V......min Ol! - 0.5 V.
2) See hg.2.
.
3) Sea fig. 4
4) The load must be a pure resistor,
Fig ure 1 : Typical Saturation Voltage vs. Output
Current.
Figu re 2 : Switching Times Test Circuits.
IlL
OOT
U .1O
,
""IIT
,NAllL£
" · U II
T
Ys =42V
"u .5V
H
/
L
V":V
....-:I/"
l.D
1.2
V5.
IV'
...
• 4
o
0.4
0.8
1.2
U
2.0
2.4
10(.\) .
Note : ForINPUT s ..itcting, set EN '" H
For ENABlES wil.clJing.seliN ooH
4/13
36
1-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
Figure 3 : SourceCurrentDelayTimesvs. Inputor EnableSwitching.
L2 98
Imu(2A}
90... - -----
- ---------------
1\
I
------
-------------
t
TI
12
T'
T4
--- - - -- - - - - - - - - - ~
t
Figure 4: Switching Times Test Circuits.
Note: For INPUT Switching, set EN '" H
For ENABLESwitching. set IN'" L
5/13
37

CNC Robotics
L298
Figure 5 : Sink Current Delay Times vs. Input 0 V EnableSwitching.
"
Imu UA).... - - ----
~------- - -- - -)1
"'"- ---- -\- -----------J
•
"
TO
"
n
.. (loY)"'..
-------------
•
InHlll (2A ) -- - - -
- -
- - - - •
.... - -------- ------------\
- - - - - -- -
1/
"'..
----- ----------------
•
" "
"
In
(loY)"'..
---------------,
1
S--1O'"
Figure 6 : Bidirectional DC Motor Control.
.,
:!:-~ ., ~ "
J:
:JL
"
~ -u-:
Inputs
Functi on
Ven "" H
C - H ; D - L
Tum Right
e
,
C
H;D
H
Tum Lefl
•
•
•
•
~:'"
C- D
Fast Motor Stop
'''~
V~_ L
C _X ;D _C
Free Rum ing
'-'-
,
_.,
Molor Stop
' _Low
H ~H igh
X%Donlcare
n ..
:=......._
&
J:
--':
r-
Io
Dl fO
~ ,.. FASt OI£C_
_
( 1. ... . _
' .--
6/13
38
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
L298
Figure 7 : For highercurrents,outputscan be paralleled.Take care to parallel channel 1 with channel 4
and channel2 with channel3.
u---t
~.~
.rnFI
4
ENABl£ •
N- use
..,
err,
~
..,
,
•
"'''
" 11:::=
"
N.
"
~
• t::l
~
L1=-
~~. .i '5L..-- 1..
L.
3. APPLI CATIONS
Fig 6 showsa bidirectional DC motor controlSche-
matic Diagram for which only onebridgeisneeded.
The externalbridge of diodes 01 to 04 is made by
four fast recovery elements (trr :5 200 nsec) that
must be chosen of a VF as low as possible at the
worstcase of the load current.
Thesenseoutputvoltagecan be usedtoco ntrolthe
current amplitude by choppingthe inputs,or to pro-
videovercurrentprotectionby switchinglowtheen-
able input.
The brake function (Fast motor stop) requires that
the Absolute Maximum Rating of 2 Amps must
neverbe overcome.
Whenthe repetitivepeak current needed from the
loadis higherthan 2 Amps,a paralleledconfigura-
tion can be chosen (See Fig.7).
An externalbridge of diodes are required when ln-
duetive loadsare drivenand whenthe inputsof the
ICarechopped; Shottkydiodeswouldbepreferred.
A PPLICATION INFORMATION (Refer to the block diagram)
1.1. POWEROUTPUTSTAGE
Each input must be connectedto the sourceaf the
TheL298i ntegratestwopoweroutputstages(A; B).
driving signals by means of a very short path.
The power output stage is a bridge configuration
Turn-On and Turn-Off : Before to Tum -ONthe Sup-
and its outputs can drive an inductiveload in com-
plyVoltageand beforeto TurnitOFF,the Enablein-
manor differenzialmode, dependingon the state of
put must be driven to the Low state.
the inputs. The current that flowsthrough the load
comesout fromthe bridgeat the sense output: an
externalresistor (AsA;Rse.) allows todetectthe in-
tensityol this current.
1.2. INPUT STAGE
Eachbridgeis drivenby meansof fourgatesthe in-
put of whichare In1 ; 1n2 ; EnA and In3 ; In4 ; EnS.
The Ininputsset thebridge state whenThe En input
ishigh;a lowslateof theEninputinhibitsthebridge.
All the inputs are TIL corroatible.
2. SUGGESTIONS
A non inductive capacitor, usuallyof 100 nF. must
be foreseen between both Vs and Vss, to ground,
as nearas possibletoGNDpin.Whenthe largeca-
pacitorof the powersupply is too far fromthe IC, a
second smaller one must be foreseen near the
L298.
The sense resistor,not of a wire woundtype , must
be groundednear the negativepoleof Vsthat must
be nearthe GND pin of the I.C.
7/13
39

CNC Robotics
L298
Fig 10 shows a second two phase bipolar stepper
motor control ciraJ it where the current is controlled
bythe I.C. L6506.
This solution can drive until 3 Arrpstn DC ope ration
and until 3.5 Ampsof a repetitivepeak current.
OnFig 8itisshownthedrivingofa twophasebipolar
stepper motor ; the needed signals to drive the in-
puts of the l298 are generated, in this example,
from the Ie l 297.
Fig 9 shows an example of P.C.B. designedforthe
application of Fig 8.
FigureS : Two Phase Bipolar Stepper Motor Circuit.
This circuit drives bipolar steppe r motors with winding currents up to 2 A.The diodes are fasl2 A types.
..sse,
SEfItSll
•
srtPPE_
.......
..-
•
"
........
•
•
"
••
••
c
.,
nOD
•
....,
,.
£JIoI;I!IIl£
~
~ 1M"'
Yr.'
ft
• iiiiil
II I
J
t)
1.
"
OS<
Rs, =RS2 =O.SH
Dl loDB:2 A Fast diodes
{
VF'5.1.2V @I= 2 A
tITS 200 ns
8113
40

Chapter 2 /
Electronics
L298
Figure9 : Suggested Printed Circuit Board Layouttorthe Circuit of fig .a (1:1 scale).
Figure10: Two Phase Bipolar Stepper Motor Control Circuit by Using the Current Controller L6506.
-
" I
~~ 1
3lI U
~ ~.,
~..
I b. 1
~ .
~~ - •
.. ..
,•
•,
{-.
"
,
l
- "
- •
L29BN •
t~ $
_ ,
"
..
•
..
u
"
-~
' - •
l oS9S
I
..
,
a.
[ •
•
,
..
f-- "
,
"
•
f- ..
.. -j
I
, . "
•
J. - ",,9 9
c-r-
~·.t
AR and R""nse deperd from the load current
9/13
41

CNC Robotics
L298
DIM.
mm
inch
MIN.
TYP.
MAX.
MIN.
TYP.
MAX.
OUTLINE AND
A
5
0. 197
MECHANICAL DATA
B
2.65
0.104
C
1.6
0.063
D
1
0.039
E
0.49
0.55
0.019
0.022
F
0.66
0.75
0.026
0.030
G
1.02
1.27
1.52
0.040
0.050
0.060
G1
17.53
17.78
18.03
0.690
0]00
0.710 .,
H1
19.6
0.77 2
H2
20.2
0.795
L
21.9
22.2
22.5
0.862
0.87 4
0.686
L1
21.7
22. 1
22.5
0.854
0.870
0.88 6
L2
17.65
18.1
0.695
0.713
L3
17.25
17.5
17.75
0.679
0.689
0.699
L4 ·
10.3
10.7
10.9
0.406
0.421
0.429
L7
2.65
2."
0.104
0.114
M
4.25
4.55
4.65
0.167
0.17 9
0. 191
M1
4.63
5.08
5.53
0.182
0.200
0.218
S
1."
2.6
0.075
0.102
5 1
1."
2.6
0.075
0.102
Multiwatt15 V
Dial
3.6 5
3.85
0.144
0.152
H1
B
42
10113
E
M1
M
~
S I
'/
r:IX
i-t
ln
"'1 )217
::i
1)0
o(
:'5
.....
H2
--L
G
G1
.-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 I
Electronics
L298
DIM.
mm
Inch
MIN.
TYP.
MAX.
MIN.
TYP.
MAX.
A
5
0.197
B
2.65
0.104-
C
I..
0.063
E
0.49
0.55
0.019
0.022
F
0.66
0.75
0.026
0.030
G
1.14
1.27
1.4
0.045
0.050
0.055
Gl
17.57
17.78
17.91
0.692
0.700
0.705
H1
19.6
0.772
H2
20.2
0.795
L
20.57
0.810
L1
18.03
0.7 10
L2
2.54
0.100
L3
17.25
17.5
17.75
0.679
0.689
0.6 99
L4
10.3
10.7
10.9
0.406
0,421
0.429
L5
5.28
0.208
L.
2.38
0.094
L7
2.65
2.9
0. 104-
0.'1 4
5
1.9
2.
0.075
0. 102
5 1
1.9
2.•
0.075
0.102
Dial
3.65
3.85
0.144
0.152
OUTLINE AND
MECHANICAL DATA
Multiwatt15 H
Do
o(
-+--!::HUl ~ ~~ ~ ~
A
c
_.
r--
'--
B
1
~
~ ~
7
LS
.....
F
/
H1
rX
G1
G
8
81
' -
H2
11113
43

CNC Robotics
L298
DIM.
mm
inch
MIN.
TYP.
MAX.
MIN.
TYP.
MAX.
A
3.6
0,142
a l
0.1
0.3
0.004
0.012
a2
3.3
0.130
a3
0
0.1
0.000
0.004
b
OA
0.53
0.016
0.021
c
0.23
0.32
0.009
0.0 13
o 1}
15.8
16
0.622
0630
01
9.'
9.8
0.370
0386
E
13.9
14.5
0.547
0.570
•
1.27
0.050
. 3
11.43
0.450
E1 1
10.9
11.1
0.429
0.437
E2
2.9
0.114
E3
5.8
6 2
0.228
0.244
G
0
0.1
0.000
0.004
H
15.5
15.9
0.610
0.626
h
1.1
0.043
L
0.8
1.1
0.031
0.043
N
10" (maxJ
S
8" (max.)
T
I
10
I
1 0.3941
(1) "D and P do nol irt<::iu<:E mold llash Of prOtruslCnS.
- Mold !lash Of protnJgOOS shaUnot exceed 0.15 mm (O.OC61.
- CriticaldimO"lSiOns T , "G" and "aT
OUTLIN E AND
MECHANICAL DATA
JEDEC MO-166
PowerS020
.-
El
o
H
I
cp-----I-----9
; T
;,
;
12/13
44

Chapter 2 /
Electron ics
L298
Information furnished is believed 10 be accurate and reliable. However, STMicroeleetronics assumes no responsiblllty for the conse-
quences of use 01 such information nor IOf any infringement 01 patents or other righ1s of third parties which may resultfrom its use. No
license is granted by implication or otherwise under any patent or patent rights of srucrceioctroncs. Scccmceton mentioned in Ihis
publication are subject 10 change wrthoul nones. This publication supersedes and replaces al! informalion pre....iously supp lied, STMi·
crcejec trcmcs products arc not authorized tor use as crrncar components in life support devices
or systems without express written
approval 01STMicroetectronics .
The 5T logo is a registered trademark of STMicroelectronics
© 1998 STMicroelectronics - Printed in Italy - All Rights Reserved
STMicroelectronics GROUP OF COMPANIES
Australia - arezu . Canada - China - France - Germany - Italy - Japan - Korea - Malaysia - Marta - Mexico - Morocco - The Notherlands -
Singapore - Spain - Sweden - Switzerland - Taiwan - Thailand - UniledKingdorn - U.SA
http://www.sl.c om
!.fi
'3113
45

CNC Robotics
APPLICATION NOTE
ADVA NTAGES
l297 and a speci al version ca lled L297 A. The
l297Aiocorporates a step pulse doubler and is de-
signed spec ifically for flopp y-disk head positkmlrq
applications.
The l297 + driver corrotnanon has many advanta-
ges : very few components are required (so assem-
bly costs are low, reftability high and little spa ce
required), software development is sirrpJified and
the burden on the micro is reduced. Further, the
choice of a two-ehip approach gives a high degree
of flexibility-the l298Ncan be used on itsown for DC
motors and the l297 ca n be used with any power
stag e, ioclud ing discrete power devices (it provides
20mA drive for this purpose).
THE L297 STEPPER MOTOR CONTROLLER
The L297 integratesa/l the control circuitry required to control bipolarand unipolarsteppermotors. Used
with a dualbridge driver such as the L298N forms a complete microprocessor-la-bipolarstepper motor
interface. Unipolar steppermotor can be driven with an L29 7plus a quad darlington array. This note de -
scribes the operation of the circuit andshows howitis used.
The L297 Stepper Motor Controller is primarily in-
tendedfor use with an L29BN or l293Ebrdge driver
in stepper motor drMng applications .
It rece ives control signals from the syste m'scontrol-
ler, usually a microcomputer chip, and provid es all
the necessarydrive signals for the powerstaqe.Ad-
ditionally,it inckJdestwo PWM croooercscuits tore-
gulate the current in the motor windings.
With a suitable power actuator the l297 drives two
pha se bipolar pe rmanent magn et motors, four pha-
se unipolarpermanentmagnet notorsarotcurpna-
se variable reluctance motors. Moreover, it handles
normal,wave driVeand half step drive modes. (This
is all explained in the section "Stepper Moto r Ba-
sics").
Too versions of the device are available : the regular
Figure 1 : In this typica l configuration an L297 stepper motor contro ller and L298 dual bridge driver com-
bine to form a compl ete microprocessor to bipo lar stepper motor intertace.
,~
r
0" rfO-
r J:
uP' ,1.Dta
~-"--
.... U"tA1l~ v~!..
~_o
l
--
-~,
,~~
_~
o
L298
Meu
~!!".!!'!~~C!.
l297
~.
J
- -~- - _ .
,"til""t
-
~~
~.._.
1
..L
~
.... ".[11'I
~o~
~,-
'--
~
cu_m
_u
S- llin
46
AN470103:12
1118
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
APPLICATION NOTE
I·
I-
Forbipolarrnotorswithwinding currentsupto2Athe
L297 should be used with the L298N ; for winding
currents up to 1Athe L293E is recommended (the
L293will alsobe useful ifthe chopperisn't needed).
Highercurrentsareobtained withpowertransistors
or darlingtons and for unipolar motors a darlington
array such as the ULN20758 is suggested. The
blockdiagram,figure 1, showsa typicalsystem.
Applicationsof the L297 can be foundalmosteve-
rywhere...printers(carriageposition,daisyposition,
paper feed , ribbon feed), typewriters, plotte rs, nu-
merically controlled machines, robots, floppy disk
drives, electronicsewingmachines, cash registers,
photocop iers, telex machines, electronic carbure-
tos, telecopiers, photographic equipment, paper
tape readers,opticalcharacterrecognisers, electric
valves and so on.
TheL297 is madewith SGS' analog/digitalcompa-
tible r2L technology(like Zodiac)and is assembled
in a 20-pinplastic DIP. A 5V supply is usedand all
signal lines areTTUCMOScompatibleor opencol-
lectortransistors.High density is one of the keyfea-
tures of the technology so the L297 die is very
compact.
THE L298N AND L293E
Sincethe L297 is normally used with an L29BNor
L293Ebridgedrivera brief review of these devices
will makethe rest of this note easierto follow.
The L29BN and L293E contain two bridgedriver
stages,eachcontrolledbytwoTIL-level logicinputs
andaTIL-levelenableinput.Inaddition,theemitter
connectionsof the lowertransistorsarebroughtout
to externalterminalsto allow the connection of cur-
rent sensingresistors (figure 2).
Forthe L29BN SGS' innovativeion-implanted high
voltage/highcurrent technologyis used,allowingit
to handleeffectivepowersup to 160W(46V supply,
2A per bridge).A separate 5V logic supply input is
providedto reduce dissipationand to allow direct
connectionto the L297 or othercontrollogic.
In this note the pinsof the L29BNare labelledwith
thepin namesof the correspondingL297terminals
to avoidunnecessaryconfusion.
The L29BNis suppliedina 15-lead Multiwattplastic
powerpackage. It's smallerbrother,the functionally
identicalL293E,ispackagedina Powerdip- acop-
perframe DIP that usesthe fourcenter pinstocon-
duct heatto the circuit boardcopper.
Figure 2 : TheL29BNcontainstwo bridge drivers(four pushpull stages)eachcontrolledby two logic
inputs and an enableinput. Extemal emitterconnectionsareprovided for currentsense
resistors. The L293Ehas externalconnectionsfor all four emitters.
2/18
""n
I,
SENSE I
"""
ccna
S ENSEI
47

CNC Robotics
APPLICATION NOTE
The firstisla energizethewindingsinthe sequence
ABlCOtBNDC (SA means that the wiming AS is
energizedbutintheoppositesense).Thissequence
is known as "one phase annfull step or wave drive
STE PPER MOTOR BASICS
There are two basic types of stepper motorin rom-
moo use: permanent rnagnetand variable reluctan-
ce. Permanent magnet motors are divided into
bipolarand unipolartypes.
BIPOLAR MOTORS
Simplified to the bare essentials, a bipolar perma-
nentmagnetmotorconsists of arotatingpennanent
magnetsurroundedbystatorpolescarryingthewin-
dings (figure 3). Bidirectional drive current is used
and the motor is steppedby switching the windings
in sequence.
Foramotorofthistypetherearethreepossibledrive
sequences.
Figure 3 : Greatlysimplified, a bipolar permanent
magnet stepper motor consistof a rota-
ring mag net surrounded by stator poles
as shown.
mode.Onlyonephase isenergizedatanygivenrro-
ment (figure 4a).
Thesecondpossibiltyisto energizebothphasesto-
gether,sothatthe rotoralwaysalignsitseltbetween
two pole positions. Called "two-phase-en"full step,
this rrode isthe normaldrive sequencefora bipolar
motor and givesthe highest torque (figure 4b).
The third option isto energizeonephase,thentwo,
thenone, etc., so that the motor moves in half step
increments. This sequence, known as half step
mode, halves the effective step angle of the motor
but givesa less regular torque (figure 4c).
For rotationinthe opposfedirecton (counter-clock-
wise) the same three sequencesare used, except
of coursethat the order is reserved.
As shown in these diagramsthe motor would have
a stepangleof 900. Real rrotorshavemultiplepoles
to reduce the step angle to a few degrees but the
numberof 'Nindingsandthedrivesequencesareun-
changed. A typical bipolarstepper motor is shown
in figure 5.
UNIPOLAR MOTORS
A unipolar permanent magnet motor is identical to
the bipolar machinedescri:>ed aboveexceptthatbl-
filar windingsare used to reversethe stator flux, ra-
ther thanbidirectionaldrive (figure 6).
This motor isdrivenin exaetlythe samewayas a bi-
polar motor exceptthat the bri<:lge drivers are repla-
ced by sirrple unipolar stages - four darlingtonsor
a quaddarlingtonarray.Clearly,unipolarmotorsare
more expensivebecausethay have twice as many
windings. Moreover, unipolar motors give less
torque for a given motor size because the windings
are made withthinnerwire. In the pastunipolarmo-
tors wereattractive to designers becausethey sim-
plify the driver stage. Nowthat monolithicpushpull
drivers like the l298N are available bipolar motors
are becomingmore popular.
Allpermanentmagnet rrotorssufferfrom thecoun-
ter EMF generatedby the rotor, whichfirrits the ro-
teton speed. When very high slewing speeds are
necessarya variablereluctancemotor is used.
'Ir-+ - c
•
•
D-t---"'" 1/11
3116
48

Chapter 2 /
Electronics
APPLICATION NOTE
Figure 4 : The threedrivesequencesfor a t\W phasebipolar sleppermotor. Clockwise rotation is shown.
FiglJe 4a : Wavedrive (onephaseon).
B-
Figure 4b : TY.Q phaseon drive.
A_
o~
~
c
o
~
0/'
B.
B-
B.
B.
B_
,-""
Figure 4c : HaKstepdrive.
A.
A.
AO
A-
~<r0 0
~~
~.
D
~
C
o
•
c
o
Ne
B-
B-
BO
B'
A-
A-
AO
A'
~$o 0
~~ ~
oN
e
o
5
C
B.
B.
BO
B-
4I 1B
49

GNG Robotics
APPLICATION NOT E
Figure 5 : A real motor. Multiple poles are norma-
lly employed to reduce the step angleto
a practicalvalue. The principle of opera-
tion and drive sequences remain the
same .
Figure 6 : A unipolar PM rrotoruses Milar win-
dings to reverse the flux in each phase.
•
D ,
VARIABLE RELUCTANCE MOTORS
A variable reluctance motor has a non-magnetized
soft iron rotor with fewer po les than the stator (fig-
ure 7). Unipolar driveis usedand the motor is step-
ped by energizing statorpolepairs to alignthe rotor
with the polepieces of the energizedwinding.
Onceagainthreedifferentphasesequercesca n be
used. The wave drive sequence is NCIBID ; two-
phase-on is AClCBlBDIDA and the half step se-
quence is N AC/C/BCI8JBO/OtDA. Note that the
stepangleforthe motorshownaboveis 15°, not45 0 .
As before. pratical motors normally employ multiple
po les to give a much smaller step angle. This do es
not , however, affectth e prlrcole of operation of the
drive sequences.
Figure 7 : A variable reluctance motor has a soft
iron rotor with fewer poresthan th e sta-
tor. The step angle is 15 ° for this motor.
•
c
•
GENERATI NG THE PHASE SEQUENCES
The heart of the l297 bloc k diagram, figure 8, is a
block called the translator whic h generatessuilable
phase sequences for half step, one-phase-on fuU
step and two-phase-on full step operation. This
block is controlled by two mode inputs - direction
ICWI CCW) and HALFI FULL - and a step clock
which advances the translator from one step to the
next.
Four out puts are provded by the translator for sub-
sequent processing by the outp ut logic block which
implements the inhibit and chopper functions.
Internally th e translator con sists of a 3- bit counter
plus so me co mbinational logic which generates a
basic eight-step gray code sequence as shown in
figure9.Anthree drive sequencescan be generated
easily from this master sequence. This sta te se -
qu ence correspondsdirectty to half ~mode. se-
lectedby a high level on the HALFI FULL irout.
50
51'8
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electroni cs
APPLICAnON NOTE
The output waveformsfor this sequenceare shown
in figure 1O.
Note that two othersignal s,TNR1 and INH2 are ge-
nerated in this sequence.The purpose of these si-
gnals is explained a little further on.
The full step modes are both obtained by skipping
alternate states in the eight-step sequence. What
happensis that thestep clock bypassesthe first sta-
ge of the 3-bil counterin the translator.The least si-
gnificant bit 01this counter is not affectedtherefore
thesequencegenerateddependson thestate of the
translator when full step mode is selected (the
HAlFI FULLinput broughtlow).
If fullstep mode is selectedwhenthe translator is at
any odd -numbered state we get the two-phase-on
full step sequence shown in figure 11.
By contrast ,one-phase-on full step mode is obtai-
ned by selecting full step mode 'When the translator
is at an even-numberedstate (figure 12).
Figure 8 : The L297 containstranslator (phase sequence generator),a dual PWMchopper andoutput
control logic.
.II
INHl 8
C
INHl
0
o-+--ID •
o-+-----~ T ANtSU.11JR
1---- /-0.......
u.,
+-- -+-0,,"<
\---
- -+-oCOll_
OUTPUT lOGIC
sus 1 Yr.t sus 1
"""
.....
H..lF /FUll o~~-----1---l
STEP
RESU
DOI..ten ...
(CWK:tW)
L
Figure 9 : The eight step master sequenceof the translator.This corresponds to half step mode.
Clockwise rotation is indicated.
1001
1000[J' .....
0001
1
fa ODD
OKll
I
B
7
tfCIoIE 0100
0110
6/18
51

CNC Robotics
APPLICATION NOTE
Figure 10 : Theoutput waveformscorrespondingto the half stepsequence.The chopper action in not
shown.
,
D
Figure 11 : State sequenceand output waveformsfor the two phaseon sequence.INHl and INH2
remain high throughout.
,---,I
L---.l
L
L...-_I"""l..--
~
A
o
c
•
iPiii 0-----
_
~ 0
_
7/18
52
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
- - -
-
-
-

Chapter 2 /
Electronics
APPLICATION NOTE
Figure 12 : State Sequence and Output Waveforms for Walle Drive (one phase on).
4 • •
4 , •
2
4 , •
ffiX'i<
""'"
4
JI
n
n
r
•
c
D
-,
n
n
!L
-
INH2
!>_!>KJ
,
L
INHI AND INH2
In ha lf step and one-phase<ln full step modes two
othersignals aregeneraled: INHI ancIINH2.These
are inhibit signals which arecoupled to the 1298N's
enable inputs and serveto speedthe current decay
when a winding is switched off.
Since both windings are energizedcontinuouslyin
two-phase-onfull step mode no winding iseverswit-
ched off and these signals are not generated.
To see what these signals do let's look at one half
of the L298Nconnectedto thefirsl phase of a two-
phase bipolar motor (figure 13). Remember that the
L298N's A and B nputs determine which transistor
in each push pull pair will be on. INH1, on the other
hand, turns off all four transistors.
Assume that A is high, B low and current flowing
through 01, 04 and the motor winding. If A isnow
brought low the current would recirculate through
02,04 and Rs.giving a slow decay and increased
dissipationin Rs.If,onaotherhand, Aisbrought b w
and INH1 is activated,all fourtransistorsare turned
off.Thecurrentrecirculates inthiscase fromground
to Vs via D2 and 0 3, giving a fasterdecay thus al-
lowing faster operationof the motor. Also, since the
recirculationcurrent does notflowthrough As, aless
expensiveresistor can be used.
Exactly the same thing happens with the second
winding, the other half of the L298 and the signals
C, D and INH2.
The INHl and INH2 signals are generated by OR
functions:
A+ B = INHl
C + D =INH2
However,the outputlogicis morecomplexbecause
inhibit lines arealso usedby the chopper,as we will
see further on.
OTHER SIGNALS
TIM) other signals are connected to the translator
block : the RESET input and the HOME output
RESETis an asynchronousreset input which resto-
res the translator block to the home position (state
1, ABCD= 0101).The HOMEoutput (open collec-
tor) signalsthis conditionand is intended to the AN-
Ded wlh the output of a mechanicalrome position
sensor.
Fnally, there is an ENABLE iflJut connected to the
output logic. A low level on this input brings INH1,
INI-l2, A, B, C and D low. This input is useful to di-
sablethe rrotordriver when the systemisinitialized.
LOAD CURRENT REGULATION
Some form of load current controlis essentialto ob-
tain good speed and torque characteristics.There
are several ways in which this can be done - swit-
ching the supply betweentwo voltages, pulse rate
modulation chopping or pulse width modulation
chopping.
8/18
53

CNC Robotics
APPLICATION NOTE
Figure 13 : When a winding is switched off the inhibit input is activated to speed current decay. If this
were not done the current would recirculate through 02 and 0 4 in this example. Dissipation
in Rs is also reduced.
s-s...
, -.>-+---4-- 06
r ------ -
,
02
D.
0,,,
I,
i
0
R.
0
0
t
SENS'
v••,L
,
INHi
DRIVE CURRENT_ .
..
RECIRCUL ATION -----.
The L297 provides load curre nt control in th e form
of two PWM choppers,one for each phase of a bi-
polarmatoror oneforeachpairef windingsforauni-
polar motor. (In a unipolar motor the A and 8
wirdings are neverenergizedtogether so thaycan
share a chopper ; the same applies to Cand O).
Each chopper consists of a comparator, a flip flop
and an extemalsensingresistor. Acomrron on chip
oscillatorsuppliespulsesat the chopperrateto both
choppers.
Ineachchopper(figure 1 4) the tl~ flop isset by each
pulsefrom theoscillator, enablingtheoutputand al-
lowing the load current to increase. As it increases
the voltage across the sensing resistor increases,
and when this voltage reachesVref theflip flop is re-
set, disablingthe output untilthe next osciilator pul-
se arrives.Theoutput of thiscircuit (the flip flop's Q
output) is therefore a constant rate PWM signal.
Note that Vref determines the peak load current.
Figur e 14 : Each choppercircuil consists of a
comparator,flip flop and external sense
resistor. Acommon oscillatorclocks
both circuits.
' ",,0
'"''
'.
....
9/18
54
r~~~~~~~~~~~~~~~~~~~~~~~~-

Chapter 2 /
Electronics
APPLICATION NOTE
PHASE
CHOPPIN G
AND
INHIBIT
CHOPPING
First let's examine the situation when the phase li-
nes are chopped .
The chopper can act on either the phase lines
(ABCD)oronthe inhibit lines INHl and INH2.An in-
put named CONTROL decides which. Inhibitchop-
ping is usedfor unipolar motors but you can choose
between phasechopping andinhibitchoppinqforbi-
polar motors. The reasons for this choice are best
explained with another example.
age on the winding is low (Vcsset 01 + VD3) (figure
16).
Why is Bpulled high, why push A low ? The reason
isto avoid the current decayingthrough Rs. Since
the current recirculatesinthe upperhalf of the brid-
ge, current only flows in the sensing resistor when
the winding is driven. Less power is theretoredissi-
pated in Rsand we can getawaywith a cheaper reo
sistor.
This explain why phase chopping is not suitable for
unipolarmotors : when the A winding is driventhe
chopperactsonthe Bwinding.Clearly,thisisno use
at all for a variablereluctance motor and would be
As before, we are driving a twophase bipolar motor
slow and inefficient for a bifilar wound permanent
and A is high, B low (figure 15). Current therefore
magnet motor.
flows through 01 , winding, 04 and Rs. When the
The alternative is to tie the CONTROL input to
voltage across Rs reaches Vref the chopper brings
ground so that the chopper acts on INH1 and INH2.
B high to switch off the winding.
Looking at the same example,A is high and Blow.
The energy stored in the winding is dissipated by
01 and 04 are therefore conducting and current
currentrecirculatingth rough01 and 03. Currentde-
flows through 0 1, the winding, 04 and Rs, (fig-
cay throughthis path isratherslowbecausethevolt-
ure 17).
Figure 15 : Phase Chopping. Inthis example the current X is interrupted by activating B, givingthe recir-
culation path Y. The alternative, de-activatingA, would give the recirculation path Z, increasing
dissipation in As.
D4
D'
A
INHl
,..,-
I
a
i
5-$943
SoENS l
v.
!
I
._._._.j
! ,..-..,-_-_---4-__-,-.--
,
I
01
.DJ
,
____-J
Ir
Jt_ ._--.-
y-----.......
z·
..
10/18
55

CNC Robotics
APPLICATION NOTE
Figure 16 : PhaseChoppingWaveforms.The example shows AS winding energizedwith A positive with
respectto B. Control is high.
A
•
SENSE
R<SlSTtlR
CURREN T
NOTE THATCURRENT IN
SENSe:RES/SlOR IS
INTERMITTENT
LOAD
C~R E NT __
FLIPFLOP
SET BY osc..
FU P FLOP RESET
BY COMPARATOR
SlOWISH DECAY
Tt1NOUut1 TI AND oJ
Figlre 17 : Inhibit Chopping.The drive current (01 , wirding, 04) in this case is intempted by activating
INH1. The decay path through 02 and 03 is fasterthanthe path Y of Figure15.
v•
,--,:>-t~-OB
D4
DI
DZ
•
IL
,
03 :
I
I
I
••_ ._._ . _ .L. _
I
r ·_·_·....
i
I
O---------~+-R.--+ I
I
t
SENSI
DRIVE CURRENT _ ._._~
RECIRCULATION -----...
11/18
56

Chapter 2 /
Electronics
APPLICATION NOTE
I --
-----'------'----
I
c.
I
Inthis case when the voltage seeress As reaches
VREF thechopperflipflopis resetand INH1activated
(brought low). lNH 1, remember, turns off all four
transistors therefore the current recirculates from
ground, through 02 , the winding and 03 to Vs. Di-
schargedacrossthesupply,whichcanbe upto 46V,
the current decays very rapidly (figure 18).
The usefulnessof thissecondfasterdecayoptionis
fairly obvious; it allows fast operation with bipolar
motors and it is the only cho ice for unipolar rro tors.
But why do we offer the slower alternative, phase
chopping?
Theanswer isthatwe might beobligedto use a low
chopper rate with a motor that does not store much
energy in the windings. If the decay is veryfast the
average motor current may be too low to give an
usefultorque. Lowchopper ratesmay, for example,
be irrposed ifthere is a larger rrotor inthe samesy·
stem.To avoidswitching noise onthe groundplane
alldrivers should be synchronizedand the chopper
rate is therefore determined by the largest motor in
the system.
Multiple L297s are synchronized easily using the
SYNC pin. This pin is the squarewave output of the
on-chip oscillatorand the clock input for the chop-
pers.The first L297 is fitted with the oscillator com-
ponentsa ndoutputs a sqarewavesignal on this pin
(figure19). SubsequentL297sdo not needtheoscil-
lator componentsand use SYNC as a clock input.
An external clock may alsobe injected at this termi-
nal if an L297 mustbesynchronized to othersystem
components.
Figure 18: Inhibit Chopper Waveforms. Winding
AB is energizedand CONTROL is low.
•
Figure 19: The Chopperosci1lator of multiple
L297sare synchronizedby connecting
the SYNC Inputs together.
----
I,
I
SYNC
SYNC
L297
L297
'.
osc
osc
I"
R
11&
16
sv
s_se·Ufl
' ±c
--
THE L297A
The L297Ais a special version of the L297 develo-
ped originally for head positioning in floppy diskdri-
ves. It can, however,be used in other applications.
Compared to the standard L297 the difference are
the addition of a pulse doubleron the step clock in·
put and the availability of the output of the direction
flipflop (blockdiagram,figure 20). Toadd these fun-
ctions while keeping the low-cost 20·pin package
the CONTROLand SYNC pins are not availableon
this version (they are note needed anyway). The
chopper acts onthe ABCD phase lines.
The pulsedoublergeneratesa ghostpulseinternal-
Iy for each input clockpulse.Consequentlythetran-
slator moves two steps for each input pulse. An
external AC network sets the delay time between
the input pulseand ghost pulseand should be cho-
sen so that the ghost pulses fall roughly halfway
between inputpulses,allowing time for the rrotor to
step.
This feature is used to improve positioningaccura-
cy. Sincethe angularpositionerror of ast eppermo-
toris noncumulative(itcancelsout to zeroeveryfour
stepsin afour stepsequencemotor) accuracy is im-
provedby stepping two of four steps at a time.
l.
12/18
57
I
I
~-----------------~

CNC Robotics
APPLICATION NOTE
Figure 20 : The L297A, includes a clock pulse doublerand provides an outputtrom the direction flipflop
(DIR-MEM).
A
lNHl
B
C
iNH1
D
o-+-----~t RANSLATOA
~:i~ 'f'urL o-+-----~
RESET
OUTPUT LOGIC
L197A
I----t-~ ENABlE
CCWICCW
DtR-MEM
o
•
c
000.....
ONO
HOME
SENS 1 Ynt
SENS2
OSC
APPLI CATION HINTS
Bipolar motors can be driven with an l297, an
L29aN or L293Ebridge driver and veryfew external
compon ents (figure 21). Together these two chips
form a complete microprocesso r-to-steppe r motor
interface. With an L298N this config uration drives
motors with winding currents up to 2A ; for motors
up to 1A per winding and L293E is used . If the PWM
choppers are not required an L293 cou ld also be
used (it doesn't have the external emitter connec -
tions for sensing resistors) but the L297 is underu-
tilized. If very high powers are required the bridge
driver is replaced by an equivalent circuit made with
discrete transistors.
For currents to 3.5A two
L298N's with paralleled outputs may be used.
For unipolar motors the best choice is a quad dar-
lington array. The L702B can be used if the chop-
persare not required but an ULN2075B is preferred .
This quad darlington has external emitter conneo -
tions which are connected to sensing resistors (fig-
ure 22). Since the chopper acts on the inhibit lines,
four AND gates must be added in this application.
Also shown in the schemat ic are the protection dio-
des.
In allapplications where the choppers are not used
it is important to remember that the sense inputs
must be grounded and VREF connectedeitherto ve
or any potential bet ween Vs and ground.
The chopperoscillato r frequency is determined by
the RC network on pin 16.The frequencyisroughly
1/0.7 RC and R must be more than 10 Kn. When
the L297A'spulsedoubleris used, thedelaytime is
dete rmined by the network R:J CJ and is approxima-
telyO.75 Rd w .R::1 should be in the range 3 kn to
100 kil (figure 23).
58
13118
I~~~~~~~~~~~~~~~~~~~~~~~~~~-

Chapter 2 /
Electronics
APPLICATION NOTE
Figure 21 : This typicalapplicationshowsan l297 and L298N driving a BipolarStepper Motor 'With pha-
se currents up to 2A.
"
"
l6'
.,
~~n ~
'~
11"0
~~'- 4
Il n "' ~
::,'oonF
-'
GNO
D
W 0,04
osc
•
tw/Cew , ..
U •
•
•
~ 01
"
•
,
CLOCK
•
,
..
•
Lf ,ruL'l
C
,0'
r
'.
,
.,
RES ET
L297
l298N
0
I ]
0 )
10
•
U
E.....8 LE .,
•
iNiii
•
Yr('1
"
•
IMHZ
n
.. o.
II
I
) .. ..
,
"
0'
III
I I
o.
06
SENSEI
• • "
SENSEI
......... --
CONTROl.
HOw(
'YNC.
... '"
-. .-
s - !lS' 6 , /;
STEPPER
""fOR
WINDINGS
14/16
R S1 RS2 '" 0.5 II
0 1 10 D8 '" 2 Fast Diodes
VF s; 1.2 C I = 2 A
trr :s; 2QO ns
59

CNC Robotics
APPLIC ATION NOTE
Figure 22 : ForUnipolar Motors a Quad Darlington Arrayis coupledto the L297. Inhibitchopping is used
so the four AND gates must be added.
Ue .24U
A
SENSi
2 x
•
2 x
•
:E laanF
BZIJU ~ Ae
9Z"a' -' 9
.
.
-.J.
~J.
~
~
1
•
9
16 b
14
3
ULN
~
2975B
p-
6
i
b-
11
12. 13 P,'a
r
2
••
i .
R.1
• • 2
•I.
.j"
. j"
1192ANJ;1. ·.t
D
SEN52
Figure 23 : The Cbc k pulse doublerinserts a ghost pulse 'to secondsafter the Input clock pulse. AdCd
is clasento give a delay of approximatelyhalf the Input clockperiod.
ir-.
Rd
T
l297A
CdI
..!2....
,
,
~L~
,
DOUaLER ----1 It---U
OUTPUT
'-'
60
15f18

L
Chapter 2 /
Electronics
APPLICATION NOTE
PIN FUNCTIONS · l297
N'
NAME
FUNCTION
1
SYNC
Outp ut of the on-chip choppe roscillalor.
The SYNC comections The SYNC ronnections of all L297s to be synchronized are
connected together and the oscillator components are onitted on all but one. If an
external clock source is used it is irlected at this terminal .
2
GND
Ground connection.
3
HOME
Open collector outp ut thai indicat es when the L297 is in its initial state (ABCD _ 0101).
The transistor is open when this signal is active .
•
A
Motor erase A drive sinnal for DOWer stece.
S
INH 1
Active IoN inhibit control lor driver stage of A and B phases.
When a bipolar bridge is used this signal can be used to ensure fast decay 01load
curr ent when a winding is de-energized . Also used by chopper to regulate load curren t if
CONTROL input is low.
S
B
Motor phase B drive signal for power staoe.
7
C
Motor cha se C drive siana! for DOWer staae.
8
INH2
Activ e low inhibit control lor drive stages of C and O phases.
same functions as INH1.
9
0
Motor phase 0 drive signal tor power stage.
,.
ENABLE
Chip enable input. When low Qnactive) INH1, INH2, A, B, C and D are brought low.
11
CONTROL
Control input that defines action of chopper,
When low chopper acts on INH1 and INH2; when high chopper acts on phase lines
ABCD.
12
V.
SV supply input.
13
SENS2
Input for load current sense voltage from power stages of phases C and D.
,.
SENSI
Input for load current sense voltage from power slag es of pha ses A and B.
is
Vret
Reference voltage for chopper circuit. A voltage applied to this pin determin es the peak
load current.
18
OSC
An AC network (A 10 Vee, C to ground) connected to this terminal oeterrranes the
chopp er rate. This tenn inal is connected to ground on all but one device in synchronized
multi - L297 configurations. f '" 1/0.69 AC
17
CW/CCW
Clockwise/counterclockwise direction control input.
Physical direction of motor rotation also depends on connection 01windings
Svnchronized internallv therefore direction can be chanaed at anv time.
18
CLOCK
Slep clock. An active low pulse on this input advances the motor one increment. Th,
step occurs on the rising edge of this signal.
19
HALF/FULL
Halll1ull step select input. When high selects hall slep operation, when low selects full
step operation. One-phase-on lull step mode is obtained by selecting FUll when the
l29Ts translator is at an even-num bered slate.
Two-phase-on full step mode is set by selecting FULL when the translator is at an odd
numbered position. (The home oosition is desianate state 1t
2.
RESET
Reset input. An active low pulse on this input restores the translalor to the home position
slale " ABeD - 0101t
PIN FUNCTIONS - L297 A Pin function of the l297A are identical to those of the,L297 exceot lor pins 1 and 11)
1
DOUBLER
An RC network conne cted to this pin dete rmines the delay between an input clock pulse
and the corr espondina ohost Dulse .
11
DIR-MEM
Direction Memory. Inverted output 01the direction flip flop. Open collector output.
16/ 18
61

,- - - - - - - - - - - - -- -
- - _.
CNC Robotics
APPLICATION NOTE
Figure24: Pinconnections.
SYNC
2.
RESET
~
DOUBLER
,n
RES£T
GNU
19
HALF/ruu
GNO
19
HALftAJLl
.....
"
Ci:OOi
HOME
"
ClOCK
A
,
"
C.WICCW
A
,
"
cw..ccw
...,
s
lZ97
"
O5 C
""'
,
1297A
"
OSC
B
"
Y~,
B
6
"
Y,of
C
..
SENS 1
C
:.:.
SENS I
iNHi
•
"
SEN>'
IMHl
•
"
SEHSl
•
•
"
'S
•
•
"
's
11
ENA BLE
io
"
DlA..NE1l4
ENABLE ..
CONTROl
.-
~-
62
17/18
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
APPLICATION NOTE
InformatIOntumished is believed to be acceeate and reliable. HowIlvO". SGS-THOMSON ....rcosececocs assumes no respons iMity lor
tho consequences 01use 01such infoonation nor lor any infringement 01 patent s or OIher ri!;;tts 01third parties which may resu lt Itom Us
usa. No rcense is granted by implication or othefwi se under any patent or pal ent rq,ts of SGS-Tt-fCltoASON Microeltx:tronic::s.Specifica-
lions mentioned in this ~IOO are sul::gecl to change without notice. This publiealiOn sooeeseoes and replaces aI inlormation pre-
viously supplied . SGS-THOMSON Microeledronics producl:s are not alfhoriled lor use as CflficaJ compoosots in life support devices or
systems WIthout espeess wnnen approval 01SGS-THOMSON Microelectronics.
e
1995 SGS-lHOMSON Microeloc:tronics - AI Riglts Reserved
SGS-THOMSON Mic:roeIectronic GROUP OF COM PANIES
Australia · Bfazj · Prance • Gemlany - Hong Kong • Italy· Japan . x ceea • Ma1aysla . Malra · Morocco - The Nether\and:s • Singapora -
$pain - Sweden - Switzerland- Taiwan - Thaliand - United Kngdom - U.S.A.
18118
63

CNC Robotics
51 SGS-1HOMSON
~l
~D©IRJ@~n,rn©1J'IRJ@(Kl]IJ©®
APPLICATION NOTE
STEPPER MOTOR DRIVER CO NSIDERATIONS
COMMON PROBLEMS & SOLUTIONS
by Thoma s L Hopkins
This note explains how to avoid same of the more common pitfalls in motor drive design. It is
basedon the author's expenence tn responding to enquiries from the field.
INTRODUCTION
Over the years while working with stepper motor
use rs. many of the same questions keep occur-
ring from novice as well as experienced users of
stepper motors. Th is application note is intend ed
as a collection of answers to comroonly asked
questions about stepper motors and driver de-
sign. In addition the reference list contains a num-
ber of other application notes, book s and art icles
that a designer may find useful in applyi ng step-
per motors.
Throughout the course of this discussion the
reader will find references to the L6201 , L6202
and L6203. Since these devices are the same die
and differ only in package, any reference to one
of the devices should be considered to mea n any
of the three devices.
Motor Selection (Unipolar vs Bipolar)
Stepper motors in common use can be divided
into general classes, Unipolar driven motors and
Figure 1: Simple direct voltage unipolar motors drive.
Bipolar driven motors. In the past unipolar motors
were common and preferred for their simple drive
configurations. However, with the advent of cost
effective integrated drivers, bipolar motors are
now more comrmn. These bipolar motors typi -
cally produce a higher torque in a given form fac-
tor [lJ.
Drive Topology Selection
Depending on the torque and speed required
from a stepper motor there are several motor
drive topologies available [5, chapter3]. At low
speeds a simple direc t voltage drive, giving the
motor just sufficient voltage so that the interna l re-
sistance of the motor limits the current to the al-
lowed value as show n in Figure 1A, may be suffi-
cient. However at higher rotational speeds there
is a significant fall off of torque since the winding
inductance limits the rate of change of the curr ent
and the current can no longer reach it's full value
in each step , as show n in Figure 2.
A: L/A DAIVE
B: l /nR DRIVE
V.
;::1=-
Ac
-I--
Ac
Ic-Ue/ tRc"Ra )
t.Lc/ CRctRa)
Lc
Ic-Us/ Rc
t-Lc/ Rc
-I--
--t;;
"'~L.~.t ·3'
.....
Lc
AN46010392
1/ 12
64
r-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

r- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - --- - - - -
Chapter 2 /
Electron ics
APPLICATION NOTE
8
•
,
- - - -- -
Figure 2: Direct voltage drive.
A- low speed;
B • too high speed generates fall of
torq ue.
higher voltage is used and the current limit is set
by an external resistor in series with the motor
winding such that the sum of the external resis-
tance and the internal winding resistance limits
the current to the allowed value . This drive tech-
nique increases the current slew rate and typically
provides better torque at high rotational speed.
However there is a significant penalty paid In ad-
ditional dissipation in the extemal resistances.
To avoid the additional dissipation a chopping
controlled current drive may be employed , as
shown in Figure 3. In th is technique the current
through the motor is sensed and controlled by a
choppi ng control circu it so that it is maintained
within the rated level. Devices like the L297.
L6506 and PBL3717A implement this type of con-
trol. This technique improves the current rise time
in the motor and improves the torque at high
speeds while maintaining a high efficiency in the
drive {2]. Figure 4 shows a comparison between
One solution is to. use ~hat is com~n ly referred
the winding current wave forms for the same mo-
to as an U nR drive (Fig. 18). In thls topology a
tor drive n in these three techniques.
Fig ure 3: Chopperdrive provides bette r performance.
us
OSCILLATOR
MOTOR
~ INOI NG
SENSE
RES ISTOR
Figure 4: Motor current using U R, USR and chopper constant current drive.
1. 9
9.5
TIME
5 1L/ IlJ
2/12--- - --- - - -
LVSGS.~ --- - - - - ---
65

,--------------------------~--
CNC Robotics
APPLICATION NOTE
In general the best performance, in terms of
torque, is achieved using the chopping current
control technique [2]. This technique also allows
easy implementation of multiple current level
drive techniques to improve the motor perform-
ance. [1]
bridge
transist~rs will be forward biased by the
~ransformer action of the motor windings , provid-
In9 an effective short circuit across the supply.
Secondlythe L298N , even though it has split sup-
ply voltages , may not be used without a high volt-
age supply on the chip since a portion of the drive
current for the output bridge is derived from this
supply .
Selecti ng Enable or Pha se chopping
Whe!1 implementing chopping control of the cur-
rent In a stepper motor , there are several ways in
which the current control can be implemented. A
bridqe output, like the L6202 or L298N, may be
driven In enable choppinq, one phase chopping or
two
p~ase chopping , as shown in Figure 6. The
L297 I,mplements enable chopping or one phase
choPPII:'!g, selected
by the
control
input.
The
L6506 Implements one phase chopping, with the
recirculation path around the lower half of the
bridge , if the four outputs are connected to the 4
inputs of the bridge or enable chopping if the odd
numbered outputs are connected to the enable
inputs of the bridge . Selecting the correct chop-
ping mode is an important consideration that af-
fects the stability of the system as well as the dis-
sipatio n. Table 1 shows a relative comparison of
the different chopping modes, for a fixed chop-
ping frequency, motor current and motor induc-
tance .
Driving a Unipolar Motor with the l 298N or
L6202
Although it is not the optimal solution, design con-
straints sometimes limit the motor selection, In
t~e
ca~e where the designer is looking for a
highly Integrated driv~ stage
~ith improved per-
formance over
previous des igns but
is
con-
strained to d~ive a unipolar wound (6 leaded) mo-
to~ It IS possible to drive the motor with H-Briclge
drivers like the l298N or L6202. To drive such a
motor the center tap of the motor should be left
unconnected and the two ends of the common
wind ing,s ar~ connected to the
~ridge outputs, as
show n In Figure 5. In this configuration the user
should notice a marked improvement in torque for
the same coil current, or put another way, the
same torque output will be achieved with a lower
coil current.
A solution where the L298N or L6202 is used to
drive a unipolar motor while keeping the center
c,?nnection of each coil connected to the supply
Will not work. First, the protection diodes needed
from
collector to emitter (drain to source) of the
Figu re 5: Driving a unipolar wound motor with a bipolar drive
C. T.
C. T.
U
ENABLE
RESET
50
,;,'~-:r
B.1UFvT~
...-I:
I
--<
~
HI-,
I H,
-i
HI-,
MOTORT
1.,.;-<
L62eJ2
rwlHDING
IH2
>=I
IH3
H
1:-
~
'----<
I H.
:3
L62eJ2
.....1-]
MOTORT
UINDING
eJ-<
...
>-
~ I
•
L
B'~-:
:f
Q
•
I
L6596
.....
5U
1I!13111U.,·.1
. 1.
SENSE
.-.
~ RESI STORS
5U
3/12
66
, -
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 2 /
Electronics
APPLICATION NOTE
Tabl e 1: Comparative advantages of chopp ing modes
Chopp ing Mode
Ripp le Current
Motor Dissipation
Bridge Dissipation •
Minimum Current
ENABLE
HIGH
HIGH
HIGH
LOWER
ONE PHASE
l OW
lOW
l OVVEST
lOW
TWO PHASE
HIGH
lOW
l OW
Ippl2
n As related to L2:l8N, l 6203 or L6202.
Fig ure 6a: Two Phase Chopping.
1Iltoll-- - - - -==JF =-- - - - - ...J
1112. 11
...,
"..' oll)---- - - - --==iF:=...- - - - - ...J
110·1.
"'"'
lI-<:::\---{:lr:j-'"
•..1.jJ.....;I-D~F.i
'"'
JM1
t
JIl1
Figure6b: One Phase Chopping.
llt'loM!-- - --'=F=----- --'
JII2. 11
[11.11
11l1_1I!------==iF=------...J
IIU . \.
EM. II
'1r-<j.-{i ,:,:::r '"'
•..1tJ...Jf---D---1I~
'"'
Ii'll
.l:!
Ii'll
Figure 6c: EnableChopping.
IM1-lt)---- - ----==F=-- --- - -'
I H2· 1I
EII.L
Ell
[II ~:rJ)---t>-6
'1r-<j.--{i,:,:::r '"
•.LjJ..Jf---D~Ii1
'"
JI't1
~
l il t
!-----..E.:::f=------l
4/12
67

CNC Robotics
AP PLICATION NOTE
V =L .'!!
dt
RIPPLE CURRENT
Sinc e the rate of current change is related directly
to the voltage applied across the coil by the equa-
lion:
the ripple current will be determined primarily by
the chopping frequency and the voltage across
the coil. When the coil is driven on, the voltage
across the coil is fixed by the powe r supply minus
the saturation voltages of the driver. On the other
hand the voltage across the coil during the recir-
culation time depends on the chopping mode
chosen.
When enable chopping or two phase chopping is
selected, the voltage across the coil during recir-
culation is the supply voltage plus either the VF of
the diodes or the AI voltage of the DMOS devices
(when using the L6202 in two phase chopping). In
this case the slope of the current rise and decay
are nearly the same and the ripple current can be
large.
When one phase chopping is used, the voltage
across the coil during recirculation is Voo(Vsat for
Bipolar devices or I . ROSon for DMOS) of the tran-
sistor that remains on plus VF of one diode plus
the voltage drop across the sense resistor, if it is
in the recirculation path. In this case the current
decays much slower than it rises and the ripple
current is much smaller than in the previous case .
The effect will be much more noticeable at higher
supply voltages.
MOTOR LOSSES
The losses in the motor include the resistive
losses (12R) in the motor winding and parasitic
losses like eddie current losses. The latter group
of parasitic losses generally increases with in-
creased ripple currents and frequency_Chopping
techniques that have a high ripple current wi.
have higher losses in the motor. Enable or two
phase chopping will cause higher losses in the
motor with the effect of raisn g motor tempera-
ture. Generally lower motor losses are achieved
using phase chopping.
POWE R DISSI PATION IN THE BRIDGE IC.
In the l298N, the internal drive circuitry provides
active turn off for the output devices when the
outputs are switched in response to the 4 phase
inputs. However when the outputs are switched
off in response to the enable inputs all base drive
is removed from output devices but no active ele-
ment is present to remove the stored charge in
the base. When enable chopping is used the fall
time of the current in the power devices will be
longer and the device will have higher switching
losses than if phase chopping is used.
In the L6202 and L6203, the internal gate drive
circuit works the same in response to either the
input or the enable so the switching losses are
the same using enable or two phase chopping,
but would be lower using one phase chopping.
However, the losses due to the voltage drops
across the device are not the same. During en-
able chopping all four of the output DMOS de-
vices are turned off and the current recirculates
through the body to drain diodes of the DMOS
output
transistors. When
phase chopping the
DMOS devices in the recirculation path are driven
on and conduct current in the reverse direction.
Since the voltage drop across the DMOS device
is less than the forward voltage drop of the diode
for currents less than 2A, the DMOS take a sig-
nificant amount of the current and the power dis-
sipation is much lower using phase chopping than
enable choppi ng, as can be seen in the power
cissoaton graphs in the data sheet.
With these two devices, phase chopping will al-
ways provide lower dissipation in the device. For
discrete bridges the switching loss and saturation
losses should be evaluated to determine which is
lower.
MINIMUM CURR ENT
The mlnlmm current that can be regulated is im-
portant when implementing microstepping, when
implementing multilevel current controls , or any-
time when attempting to regulate a current that is
very small compared to the peak current that
would flow if the motor were connected directly to
the supply voltage used.
With enable chopping or one phase chopping the
only problem is loss of regulation for currents be-
Iow a minimum value. Figure 7 shows a typical re-
sponse curve for output current as a function of
the set reference. This mlnlmnn value is set by
the motor characteristics, primarily the motor re-
sistance, the supply voltage and the minirmm
duty cycle achievabl e by the control circuit. The
minimim current that can be supplied is the cur-
rent that flows through the winding when driven
by the minirmrn duty cyde. Below this value cur-
rent regulation is not possible. With enable chop-
ping the current through the coil in response to
the minimum duty cycle can return completely to
zero during each cycle, as shown in figure 8.
When using one phase chopping the current may
or may not return completely to zero and there
may be some residual DC compone nt.
When using a constant frequency control like the
l297 or L6506, the minimum duty cycle is basi-
cally the duty cycle of the oscillator (sync) since
the set dominance of the flip-flop maintains the
output on during the time the sync is active. In
constant off time regulators, like the PBL3717A,
the minimum output time is set by the propaga-
tion delay through the circuit and it's ratio to the
selected off time.
5/12
---------- l.Ti~ -----
-
-
-
- -=
68

Chapter 2 /
Electronics
APPLICATION NOTE
Figure 7: The transfer function of peak detect current control is nonlinear for low current values.
CURRENT OUT
• •••• EXPECTED
---- ENABLE CHOpPING
---- PHASE CHOPpIHG
..
....
REF 1M
Figure 8: A MinilTl.lrn current flows through the motor when the driver outputs the min imum duty cycle
that is achievable.
CURRENT
EHABLE C"'OPPIHG
tSI MINIMUM DUTY CYCLE
8.
68
A.
L..---.,f---l-_-+_+_+----.,f--+_-+_+_+.!..2T~Cho••
,..
JIij-'-'-' - - - - ---- - -
For two phase chopping the situation is quite dif-
ferent. Although none of the available control
chips implement this mode it is discussed here
since it is easy to generate currents that can be
catastrophic if two phase chopping is used with
peak detecting control techniques. When the
pea k current is less than 1/2 of the ripple (Ipp) cur-
rent two phase chopping can be espe cially dan -
6112
gerous. In this case the reverse drive ability of the
two phase chopping techniqu e can cause the cu r-
rent in the motor windi ng to reverse and the con-
trol circ uit to lose control. Figure 9 shows the cu r-
rent wave form in this case . When the current
reaches the peak set by the reference both sides
of
t,h ~ bridge are switched and the current decays
until it reache s zero. SlOce the power transistors
69

CNC Robotics
APPLICATION NOTE
Fig ure 9: Two phase chopping can loose control of the winding current..
lJ
u
SYMC
SENSE \,IOLTAGE
REFEREHCE UOl lAGE
\lIHOIHG CUAQEHT
are now on , the current will begin to increase in a
negative direction. When the oscillator again sets
the flip-flop the inputs will then switch again and
the current will begin to become more positive.
However. the effect of a
si ~9le sense resistor
used with a bridge is to rectify current and the
comparator sees on ly the magnitude and not the
sign of the current. If the absolute value of the
current in the negative direction is above the set
value the com parator will be fool ed and reset the
flip -flop. The current will continue to become more
negative and will not be co ntrolled by the regula-
tion circuit.
For this reason two phase chopping is not recom-
mended with bridge circuits like the l298N or
L6203 and is not implemented in any of the cur-
rently available driver IC's. The problem can be
avoided by more complex current sense tech-
niques that do not rectify the current feedback.
Chopper Stability and Audio Noise.
One problem commonly encountered when using
chopping current control is audio noise from the
motor which is typically a high pitch squeal. In
constant frequency PWM circuits this occurrence
is usually traced to a stability problem in the cur-
rent control circuit where the effective chopping
frequency has shifted to a sub-harmonic of the
desired frequency set by the oscillator. In con-
stant off time circuits the off time is shifted to a
multiple of the off time set by the monoslable.
There are two common causes for this occur-
rence.
The first cause is related to the electrical noise
and current spikes in the application that can fool
the current control circuit. In peak detect
PWM
ctrcnts, like the l297 and L6506. the motor cur-
rent is sensed by monitoring the voltage across
the sense resistor connected to ground. When the
oscillator sets the internal flip flop causing the
bridge output to tum on, there is typically a volt-
age spike developed across this resistor. This
spike IS caused by noise in the system plus the
reverse recoverycurrent of the recirculatingdiode
that flows through the sense resistor. as shown in
Figure 10. If the magnitude of this spike is high
enough to exceed the reference voltage, the com-
parator can be fooled into resetting the flip-flop
prematurely as shownin Figure 11. When this oc-
curs the output is turned off and the current con-
tinues to decay. The result is that the fundamental
frequency of the current wave form delivered to
the motor is reduced to a sub-harmonicof the os-
cillator frequency, which is usually in the audio
range. In practice it is not uncommon to encoun-
ter instances where the period of the current
wave form is two, three or even four times the pe-
riod of the oscillator. This problem is more pro-
nounced in breadboard implementations where
the ground is not well laid out and ground noise
contributes makes the spike larger.
When using the L6506 and L298N, the magnitude
of the spike should be, in theory, smaller since
the diode reverse recovery current flows to
ground and not through the sense resistor. How-
Fig ure 10: Reverse recoverycurrent of the
recirculation diode flows through the
sense resistorcausinga spikeon the
sense resistor.
Reverse Recovery Current ....
Recirculation Current
c::::;>
7/12
- - - - - - - - --- Iifi ~,;,,~----- - - -----'--"
70

Chapter 2 /
Electronics
APPLICATI ON NOTE
Figure 11: Spikeson the senseresistor caused byreverse recoverycurrents andnoisecantrick the
currentsensingcomparator.
SYNC
Motor
Current
/ - -
/
-
- ./
Expected
Actual
ever, in applications using monolithic bridge driv-
ers, like the L29SN, internal parasitic structures
often produce recovery current spikes similar in
nature to the diodereverse recovery current and
these mayflowthroughthe emitter lead ofthe de-
vice and hence the sense resistor. When using
DMOS drivers, like the L6202, the reverse recov-
ery current always flows through the senseresis-
tor since the internal diode in parallel with the
lower transistor is connectedto the sourceof the
DMOS device and notto ground.
In constant off time FM control circuits, like the
CALCULA TlNG POWER DISSIPATION IN BRIDGE DRIVER IC'S
The power dissipated in a monolithic driver IC like the L298N or L6202 is the
sum of three elements: 1) the quiescent dissipation, 2) the saturation losses
and 3) the switching losses.
The quiescent dissipation is basically the dissipation of the bias circuitry in the
device and can be calculaled as Vs · is where Vs is Ihe power supply vol/age
and Is is the bias current or quiscent current from the supply. When a device
has Iwo supply voltages, tike the L298N, the dissipation for each must be cal-
cual/ed then added to get the total quiescent dissipation. Generally the quies-
cent current for most monolithic IC's is constant over a vide range of input
voltages and the maximum value given on the data sheet can De used for
most supply vol/ages within the allowable range.
The saturation loss is basically the sum of the vol/age drops times the current
in each of the output transistors. for Bipolar devices, L298N, this is Vsat . I.
For DMOS power devices this is I
. Rosan.
The third main component of dissipation is the switching loss associated with
the output devices. In general the switching loss can be calculatedas:
Vsupply . 1I0ad . tcross . fswitch
To cetcutete the total power dissipation these three compnents are each cal-
culated, mul/ipled by their respective duty cycle then added togther. Obviously
the duty cycle for the quiescent current is equal to 100%.
8/12:::.::.------ - -- L¥i~----------
71

CNC Robotics
APPUCATION NOTE
PBL3717A, the noise spike fools the comparator
and retriggers the monostable effectively multiply-
ing the set off time by some integer value.
Two easy solutions to this problem are possible.
The first is to put a simple RC low pass filter be-
tween the sense resistor and the sense input of
the comparator. The filter attenuates the spike so
it is not detected by the comparator. This obvi-
ously requires the addition of 4 additional compo-
nents for a typical stepper motor. The second so-
lution is to use the inherent set dominance of the
internal flip-flop in the L297 or L6506 [1][3J to
mask out the spike. To do this the width of the os-
ci1latorsync pulse is set to be longer than the sum
of the propagatio ndelay (typically 2 to 31ls for the
L298N) plus the duration of the spike (usually in
the range of 1DOns for acceptable fast recovery
diodes),as shown in figure 12. When this pulse is
applied to the flip-flop set input,any signal applied
to the reset input by the comparator is ignored.
After the set input has been removed the compa-
rator can property reset the f1ip-tiop at the correct
point.
The corresponding solution in frequency modu-
lated circuits, is to fix a blanking time during which
the monostable may net be retriggered.
The best way to evaluate the stab ility of the chop-
ping circuit is to stop the motor movement (hold
the clock of the l297 low or hold the four inputs
constant with the L6506) and look at the current
wave forms without any effects of the phase
changes. This evaluation should be done for each
level of current that will be regulated . A DC cur-
rent probe,like the Tektron ix AMS03 system, pro-
vides the most accurate representation of the mo-
tor current. If the circuit is operating stability, the
current wave form will be synch ronized to the
sync signal of the control circuit. Since the spikes
discussed previously are extremely short, in the
range of 50 to 150 ns, a high frequency scope
with a bandwidth of at least 200 MHz is required
to evaluate the clrcult. The sync signal to the
L297 or L6506 provides the best trigger for the
scope.
The other issue that affects the stability of the
constant frequency PWM circuits is the chopping
mode selected. With the l297 the choppingsignal
may be applied to either the enable inputs or the
four phase inputs. When chopping is done using
the enable inputs the recircufation path for the
current is from ground through the lower recircu-
lation diode, the load, the upper recirculation di-
ode and back to the supply, as shown in Flqure
Be. This same recirculation path is achieved using
two phase chopping, although this may not be im-
Figure 12: The set-dominanct latch in the L297 may be used to mask spikes on the sense resistor that
occur at switching.
9/12
- --- - - - ---- J.Ti==:= -
-
- ---
- ---'--'=
72
r-

Chapter 2 /
Electronics
APPLICATION NOTE
plemented directly using the l297 or L6506. In
this mode, ignoring back EMF. the voltage across
the coil during the on time (11) when current is in-
creasing and the recirculation time (12), are:
V, = Vs · 2 Vsat • VRsense
and
Vz = Vss + 2 VF
The rate of current change is given by (ignoring
the series resistance):
V = L.9.i
dt
Since the voltage across the coil (V2) durin g the
recirculation time is more than the voltage (V,)
across the coil during the on lime the duty cycle
will, by definition, be greater tha n 50% because 11
must be greater than 12. When the back EMF 01
the motor is considered the duty cycle becomes
even greater since the back EMF opposes the in-
crease of current during the on time and aides the
decay of current.
In this conclitionthe control circuit may be content
to ope rate stability at one half of the oscillator fre-
que ncy, as shown in Figure 13. As in normal op-
eration, the output is turned off when the cur rent
reaches the desired peak value and decays until
the oscillator sets the flip-flop and the current
again starts to increase. However since
t1 is
longer than t2 the current has not yet reached the
peak value before the seco nd oscillator pulse oc-
curs. The second oscillator pulse then has no ef-
fect and current continues to increase until the set
peak value is reached and the flip-flop is reset by
the comparator.The current cont rol circuit is com-
pletely content to keep operating in this condition.
In fact the circuit may ope rate on one of two sta-
ble conditions depending on the random time
when the peak curre nt is first reached relative to
the oscillator period.
The easiest, and recommended, solution is to ap-
ply the chopping signal to only one of the phase
inputs, as imple mented with the L297, In the
phase chopping mode, or the L6506.
Another solution that works, in some cases, is to
fix a large minimum duty cycle, in the range of
30%, by applying an external clock signal to the
sync input of the L297 or L6506. In th is configura-
tion the circuit must output at least the rninimrm
duty cycle during each clock period. This forces
the point where the peak current is detected to be
later in each cycle and the chopping frequency to
lock on the fundamental. The main disadvantage
of this approach is that it sets a higher minirru m
current that can be controlled . The current in the
motor also tends to overshoot during the first few
chopping cycles since the actual peak current is
not be sensed during the minimum duty cycle.
EFFECTS OF BACK EMF
As ment ioned earlier, the back EMF in a stepper
motor tends to increase the duty cycl e of the
chopping drive circuits since it opposes current in-
creased and aids current decay. In extreme,
cases where the power supply voltage is low
compared to the peak back EMF of the motor, the
duty cycle required when using the phase chop-
ping may exceed 50% and the problem with the
Figure 13: When the output duty cycle exceeds 50% the chopping circuit may sinchronize of a
sub-harmonic of the oscillator frequency.
l
Expected Molor c..,....t
Actual Motor current
10112
73

CNC Robotics
APPUCATION NOTE
stability of the operating frequency discussed
above can occur. At this point the constant fre-
quency chopping technique becomes impractical
to implement and a chopping technique that uses
constant off time frequency modulation like imple-
mented in the PBL3717A, TEA3717. TEA3718,
and L6219 is more useful.
Why Won 't the motor move
Many first time users of chopping control drives
first find that the motor does not move when the
circuit Is enabled . Simply put the motor is not gen-
erating sufficient torque to turn. Provided that the
motor is capable of producing the required torque
at the set speed, the problem usually lies in the
current control circuit. As discussed in the pre-
vious section the current sensing circuit can be
fooled. In extreme cases the noise is so large that
the actual current through the motor is essentially
zero and the motor is producing no torque. An-
other symptom of this is that the current being
drawn from the power supply is very low.
Avoid Destroying the Driver
Many users have first ask why the device failed in
the application. In almost every case the failure
was caused by electrical overstress to the device.
specifically voltages or currents that are outside
of the device rating s. Whenever a driver fails, a
careful evaluation of the operating conditions in
the application is in order.
The most common failure encountered is the re-
sult of voltage transients generated by the induc-
tance in the motor. A correctly designed applica-
tion will keep the peak voltage on the power
supply, across the collector to emitter of the out-
put devices and, for monolithic drivers, from one
output to the other within the maximum rating of
the device. A proper design includes power sup-
ply filtering and clamp diodes and/o r snubber net-
works on the output [6].
Selecting the correct clamp diodes for the appli-
cation is essential. The proper diode is matc hed
to the speed of the switching device and main-
tains a VF that limits the peak voltage within the
allowable limits. When the diodes are not inte-
grated they must be provided externally. The di-
odes should have switching characteristics that
are the same or better than the switching time of
the output transistors. Usually diodes that have a
reverse recovery time of less than 150 ns are suf-
ficient when used with bipolar output devices like
the L298N, The 1N4001 series of devices,for ex-
ample, Is not a good selection because it is a
slow diode.
Although it occurs less frequently, excess current
can also destroy the device. In most applications
the excess current is the result of short circuits in
the load. If the application is pron to have shorted
loads the designer may consider implementing
some external short circuit protection (7].
Shoot through current, the current that flows from
supply to ground due to the simLJtaneous conduc-
tion of upper and lower transistors in the bridge
output. is anoth er concern. The design of the
L298N, l293 and L6202 all include circuitry spe-
cifica lly to prevent this phenomena. The user
should not mistake the reverse recovery current
of the diodes or the parasitic structures in the out-
put stage as shoot through curren t.
SELECTED REFERENCES
IllSax, Herbert., "Stepper Motor Driving" (AN235)
[2]"Constant Current Chopper Drive Ups Stepper-
Motor Performance" (AN468)
[3]Hopkins, Thomas. "Unsing the L6506 for Cur-
rent Control of Stepping Motors" (AN469)
[4]"The l297 Steper Motor Controller" (AN470)
[5]Leenouts,Albert. The Art and practjce of Step
Motor Control. Ventura CA: Intertec Communica-
tions Inc. (805) 658-09 33. 1987
[6]Hopkins. Thomas. "Controlling Voltage Tran-
sisnts in Full Bridge Drivers" (AN280)
[7]Scrocchi G. and Fusaroli G. "Short Circuit Pro-
taction on L6203". (AN279)
11/12
----- - - - - - - J.Ti~ - --- - --- - - -
74
I

Chapter 2 /
Electronics
APPLICATION NOTE
Information furnished is believed to be accurate and reliable. Howeve r, SGS-THOMSON Microelectro nics assumes no responsibility lor the
consequences of USlI of such inrormalion ,nor lor any infringement of patents or otnar ri~hlS althird parties which may resutt from its use.No Ii·
~~ '~~I~~b~r~mr~I~~~~~~~~~ft~~~~i%~\:~~~~~~~~~~~~~M;~~~I~:::~~t~~;~~t~
THOMSON Micfoolecltonics product s arEi nol aulhofiled for use as critical component s in lila support devices or systems without express
written i1WfOVaJ01SGS-TH~ Microelectronics.
e
1Q95 SGS- THOMSON MicroeledronicS - AI Riglls Reserved
SGS-THOMSONMicrO&ledrorW:sGROUPOFCOMPANIES
Australia · Brazil . France- Germany - Hong Kong - Italy - Japan · Korea - Malaysia · MalIa · Morocco- The Neth9ftands - Singapore - Spain -
Sweden · S'fIi1Zerland - Taiwan - Thaliand - Un~ed Kingdom- U-SA.
12/12
75

,-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Making the
Printed
Circuit Board
Tools and Material
In order to make the board s, you wi ll need these items, as seen in
Figure 3, I :
•
Copper-clad PCB material
•
Glossy laser printer paper
•
Perma nent marker
•
Iron
•
Plastic or gla ss container
•
Ferr ic chlori de
•
Thermometer
•
Stapler
•
Steel wool
•
Kitchen sink
•
Magnifyi ng glass
77

Figure 3.1
The tools and materia l.
CNC Robotics
~~:. '..." ...
•rr ,
I _
_y
~~," . , l
• •
78
Artwork
Based on the schematics produced in the last chapter, I created the
artwork for the printed circuit boards. This artwork must be repro-
duced on the surface of the copper in a manner that w ill enab le it
to act as a resist to the etching solution. In order to make the PCB,
we mu st remove all the unneeded copper from the board, leavi ng
us with the copper traces that take the pl ace of wire. You can w ire
a circuit together using breadboards, but the time and effort are
better spent making a PCB to suit. I did bu ild this circuit firs t using
a breadboard but on ly to make sure it was really going to work.
The re are optio ns for the method you employ in transferring the
art to th e copper. The most popular is the photo- resist method .
Electronics suppliers generally sell kits con taining the chemistry
and tools for expos ing and developing presensitized boards.
If you plan on using photo resist, yo u can scan the artwork and
print the transparencies needed. I won 't expand on the photo-
resist method because detailed instructions are incl uded w ith th e
packaged material.

~
r,
r
!
Chapter 3 I Making the Printed Circuit Board
I make my boards using the toner-transfer method. It does have
drawbacks, the most obvious being trace size . You can't make the
traces too small or close together. If you do, they will probably
short out because it's not ea sy to get the leftover paper off the
board after ironing . As a result, the PCB tends to be a little bigger
than one made with photo resist. This project doesn't require
small components, so don 't worry about the size of the boards.
I created a do uble-s ided board for the driver layout (see Figure
3.2) but don 't feel obliged to make a do uble-sided board if you
do n't want to, or can't secure the material. Use the topside art (see
Figure 3.2
Bottom of driver board.
79

CNC Robotics
Figure 3.3) as a wiring diagra m for jumpers if you make a single-
sided board. The in terface board is single sided (see Figure 3.4),
w ith only one jumper on the topside.
Scan the artwork into an image-editing program , making sure you
preserve the size exact ly as published. Then print it w it h a laser
printer. Make certa in that the printer is set up to print at its high-
est resolution. You may al so be able to pri nt darker if your printer
will let yo u make the adjustments. The idea is to print th e art w ith
lots of toner so w hen it gets transferred there are no gaps or holes
exposing copper we want to keep. I use an HP 4 laser printer; it 's
Figure 3.3
Top of driver board, this
image has been
mirrored already.
o
o0---00 00-------00
80
r----
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-

Chapter 3 /
Making the Printed Circuit Board
Figure 3.4
Bottom of interface
board.
old and slow but sti ll gets th e job done. In Figure 3.5 you can see
the sett ings for my printer.
The next step is to pr int the board ar twork on glossy laser printer
paper. I'm using paper th at I purchased from a locai paper suppli-
er that does most of its bu siness with print shops. They didn't
min d selling me a small quantity of glossy laser paper; in fact they
were very helpful. I admit I was ted some money experiment ing
with paper I purchased fro m big-box retail stores. Don't even
entertain the notion of using ink jet paper in a laser printer; it may
result in some expensive repair bills. I did try glossy ink jet paper
81

CNC Robotics
,
x
,
x
,
x
~.-...,. jlackng
Thl.aItect>t..Jw!hc.w..~..c... ~fIIetIU)'~
-,,,-,r-:-:-:-:
1"",1_km
r D........., T"""T_'onl. ....~08"""~
r o.nc..d TIUOT_fo.u_t!IItMP oo/I /mIs
r-f'ri't §tT ""a.~
==~=
ro_
r ""'"
rf...
r ,", ~
r
,ErnlI cil!uoO:lrI
[;,~m(Ide
fla<IerWal g~~ "" lI1, 1>0>1
r- U..,,_
garhc.
r
u.,~",gr"l'h«
Figure 3.5
Printer driver setup.
printed from an ink jet printer, but I wasn' t able to get the paper
off the board. W it h heat, the surface of the ink jet paper fuses to
the copper. If you have problems getting the paper to free itself
from th e board after iro ning, then a little experimentation w ill be
in order. You migh t be abl e to print the artwork w ith a ph otocopi-
er as long as it wi ll use glos sy paper.
Board Cutting and Cleaning
Afte r printing the artwork, I decide how big a piece of copper
board I need, then cut it on my little table saw using a nonferrous
blade (see Figure 3.6).
Because I have a tendency to purchase material considered sur-
pl us, I generally have a li ttl e extra work before I can use it. In this
case the PCB materia l is oxidi zed so I will clean it up with some
superfine steel wool (see Figure 3.7).
After the steel wool treatment, I wa sh the board w ith dish soap
and hot water (as seen in Figure 3.8), making sure t keep my
hand s off of the copper.
If yo u aren't careful w hen han dling the board, your cleani ng will
be to no avail because the oil from yo ur fingers will inhibit the
82

Chapter 3 I
Making the Printed Circuit Board
Figure 3.6
Cutting PCB material.
Figure 3.7
Shiny copper.
83

Figure 3.8
Washing the board.
Figure 3.9
Drying with paper towel.
CNC Robotics
laser toner from adh erin g to the cop per and could act as a resist
w hen etch ing begins. Dry the board thoroughly (see Figure 3.9).
84
14
4
..

Chapter 3 /
Making the Printed Circuit Board
Toner Transfer
After print ing the artwork. yo u w il l need to alig n the two pieces of
paper ink side in so that the toner makes contact with the copper
on the boa rd. Use a strong light source or ho ld the paper up to a
window to accomplish this task. Or use a light box if you have one
(see Figures 3.10 and 3.11).
Figure 3.10
Unaligned art work.
85

Figure 3.11
Aligned artwork.
86
CNC Robotics
Now staple three sides of the sandwiched paper to maintain
alignment (see Figure 3. 12).
Place the paper sandwich that includes the clean piece of copper-
clad boa rd, making sure the toner is aligned within the coppe r
board (see Figu re 3, 13).
Having heated the iron to its highest setting, place a clean piece of
regu lar paper over the glossy laser paper. You need to use the reg-
ula r pape r so tha t the iron won't stick to the laser paper (see
Figure 3.14).

Chapter 3 /
Making the Printed Circuit Board
If you don't use somet hi ng between the glossy paper and the iron ,
you w ill make a mess of both of them. J like to iron the first side a
litt le in ord er to fix it in position. Then I flip over the w hole sand-
w ich and start to iron the second side using moderate pressure for
a minute or longer, trying to make sure that I give equal attention
to all areas of the board. Next, flip it all over and finish the first
side (see Figure 3. 15).
Figure 3.12
Fixing position of art
with staples .
Figure 3.13
Inserting the board.
87

Figure 3.14
Using plain paper
barrier.
Figure 3.15
Ironing the board.
88
\
CNC Robotics

Chapter 3 /
Making the Printed Circuit Board
In order to set th e toner, you must rin se or immerse the sandw ich
in cold water for a couple of minutes (see Figure 3.16).
Figure 3.16
Cold rinse.
Soak everything in wa rm water for five or ten minutes. After a
good soaking, peel the paper from both sides of th e board (see
Figures 3.1 7 and 3.18).
If the residual paper doesn't rub off easil y w ith a little thumb pres-
sure, then resoak th e board to loo sen it up (see Figure 3. I 9).
After rubbing off the residual paper, thoroughly check the toner for
missing sections. If you find any, touch up the area s w ith a per-
manent marker (see Fig ures 3.20 and 3.21).
89

Figure 3.17
Paper peeling.
Figure 3.18
Thumb rubbin g,
90
CNC Robotics

Chapter 3 /
Making the Printed Circuit Board
Figure 3.19
Re-soak.
Figure 3.20
Missing tone r.
.
Figures 3.21
Touchup.
91

Figure 3.22
Paper in hole.
Figure 3.23
Scratch it out .
92
CNC Robotics
Go over the areas a coup le of times to make sure the copper is well
protected. After lookin g for missing toner, check the holes in th e
pads and remove any residual paper by gently scratc hing it w ith a
kni fe tip or a pin (see Figures 3.22 and 3.23).
Etching the copper out of the pad holes makes dril ling a lot mor e
pleasant. It's han dy to use a magnifying glass for the inspection
and touch up.

Chapter 3 /
Making the Printed Circuit Board
Etching
W hen you are happy w ith the toner resist, proceed to etch the
boards. Ferric chloride will remove all the unprotected copper on
the board. WARNING: It will also bu rn your skin, so make sure
you use gloves, eye protecti on, and a respirato r w hen working
w ith this etchi ng chem istry. Try to maintain a good wo rking tem-
peratu re with the setup (see Figure 3.24). Don't let th e tempe ra-
ture of the working solution go high er than 40 degrees Celsius (104
degrees Fahrenheit). At temperat ures higher than th at, it will give
off some nasty and dangerous fum es.
I like to use a floating thermometer to keep an eye on the temper-
ature, but any thermometer shou ld work. Keep checking the board
in the ferric chlo ride solution (see Fig ures 3.25 and 3.26).
The amount of time required to etch the board w ill vary w ith the
temp erature of th e ferric chloride and how many times the etching
solu tion has been used. W hen th e board looks like Figu re 3.26,
it 's done. Rinse the board in clean water to stop the etching (see
Figure 3.27).
Figure 3.24
Etching setup .
93

Figure 3.25
Not finished.
Figure 3.26
Finished.
94
CNC Robotics

Chapter 3 /
Making the Printed Circuit Board
. .
t
_
~
You may need to use a foam pain tbrush to spot etch an area if the
rest of the board is finished (see Figure 3.28).
Figure 3.27
Rinse.
Figure 3.28
Spot etching.
95

Figure 3.29
Toner removal.
96
CNC Robotics
Now, to ner with coppe r underneat h is all that rema ins on the
board. To clean off the toner, I use a rag with some lacquer thin-
ner and possibly a little soaking in a shallow tray of the thinner
(see Figure 3.29).
The next step isn't necessa ry, but I like the look of a board that has
been tinned. If you wa nt to tin the board, pick up some tin ning
solution a nd set the clea n board in a shallow tray with eno ugh
solut ion to cove r it. Wa it until th e copper has a uniform deposit
an d remove and wash the board. The added benefit to this appli-
cat ion of tin is that so ldering will be a little easier (see Figu re
3.30).
These a re the finished boa rds, ready for drilli ng (see Figure 3.31).
In this chapte r you cove red how to manufacture printed circuit
boa rds for your CNC project, so urces for materials, as well as
what methods wo rk best. Now you should have three driver
boards an d one interface boa rd etched. Etching out of the way, the
next ch apter shows you how to drill the req uired holes in your
boa rds a nd finish assembling th em.

Chapter 3 /
Making th e Printed Circuit Board
Figure 3.30
Tinning the boards.
Figure 3.31
Etched and tinned.
97


Driver
Assembly
In order to build the driver assembl y for the CNC machine, you wi ll
need these items, as seen in Figure 4. I :
•
Three etched driver boards
•
One etched interface board
•
Drill press
•
Dri ll bits
•
Compo nents for each board
•
Solderi ng iron
•
Anti -sta tic wrist band
•
Pliers
•
Cutter
•
Wire stripper
•
Desoldering tool
•
Multimeter
•
Solder
99

Figure 4.1
Tools and material
required.
Figure 4.2
A sma ll drill press.
100
CNC Robotics
Drilling th e holes for the components is the first step in th e assem-
bly process. This is also the most tedious and least-li ked part of
any electronics project , but a small drill press li ke the one in
Figure 4.2 and some sharp drill bits can make a big diffe rence.

Chapter 4 I
Driver Assembly
When the boards were etched, the hole locations in the pads were
etched leaving the fiberglass exposed. You will find that the dri ll bit
will center itself to the bare fiberglass, allowing you to drill a little
faster and with more accuracy than if the hole location s had not
been etched free of copper (see Figure 4. 3).
Figure 4.3
Closeup of pad hole.
For the resistors, Ie locations, and the through-holes I used a #60
drill bit. For the diode lead holes and the motor wire locations I
used a II 16-inch drill bit. On the interface board, use a IIS- inch
drill bit for the OB25 mou nting holes (see Figure 4.4).
When drilling the holes, it's helpful to place a piece of scrap wood
under the board so as not to damage any of the traces. See Figure 4.5.
Once you have drilled the component lead hole s, turn on your sol-
dering iron. If you have a varia ble-temperature soldering iron , find
a temperature that will allow you to solder quickly but not be so
hot as to lift the pads from the fiberglass (see Figure 4.6).
The method I use to solder is to hold the tip of the iron to a place
on the pad where I can also ma ke contact with the lead; then I
apply solder to the pad and lead junction opposite the soldering
iron tip (see Figure 4.7).
101

Figure 4.4
Drill bits required.
CNC Roboti cs
1/16 11
\
!
#60
Figure 4.5
Driliing holes in PCB.
102
•

Chapter 4 /
Driver Assembiy
The solde r will draw around the lead and pad to the source of
heat . Before you touch any of the ICs make sure yo u have some
kind of static protection in place. I use a wrist strap connected to
ground at the back of my soldering iron (see Figure 4.8) .
Figure 4.6
Soldering iron.
Figure 4.7
Soldering technique.
103

Figure 4 .8
Wrist strap stat ic
protection.
104
CNC Robotics
Static electricity will destroy the integrated circuits. Refer to Figure
4.9 to determine the placement of the components on the driver
boa rd or Figure 4. 10 for the interface component placement.
Start by installing the jumpers on the topside of the board. You ca n
use insulated wire (see Figure 4.11) to make the con nections from one
end of the top traces to the other end or you can use a piece of solid
wire or any material tha t ca n act as a conductor from one side of the
through-hole to the other. On one board, I used pieces of a paper clip
cut to extend a little past eac h side of the boa rd (see Figure 4.12).
This method of mimicking a plated thro ugh -hole requi res the con-
ducting material to be soldered on both sides of the board and ca n
be a little tricky if the material doesn't fit snug ly in the hole. If the
material is a little loose, it has a tendency to slide through and may
not actually create a connection between top a nd bottom. You can
as easily use wire be nt on bot h side s of the through-hole. If you
use lengths of insulated wire to follow the topside traces, you on ly
need to solder at the bottom of the boa rd because the top traces
have become jumper guides as opposed to bei ng the jumpers.
After installin g the jumpers, check with a mu ltimeter to ensure
that continuity exis ts between the connec tions (see Figure 4.13).

Chapter 4 /
Driver Assembly
Figure 4.9
Driver board part
placement.
o
~J
ca.......~...c:<,~
~
b--.......
Jp1
Header3
~
Now start installing the components that will be lowest on the
board-resistors and diodes. The resistors don't
have
to be
installed with polarity in mind, but the diodes will need to be placed
with the ba nd on their body as in Fig ure 4.9. When you are bend-
ing the leads of the compo nents, hold the lead close to the body of
the component with pliers and bend the lead (see Figu re 4.14).
This method avoids undue stress on the body of the component.
After inserting the leads into the appropriate holes on the board,
bend them over an d trim them to enough length to hold the com-
ponent in place. The diodes' leads sh ould be trimmed as short as
105

Figure 4.10
Interface board part
placement.
Figure 4.11
Using insulated wire.
106
CNC Robotics
Jp3
Jp5
~=~~
18
:-
11
Pnj

I
'"
Chapter 4 /
Driver Assemb ly
Figure 4.12
Using pieces of paper
clip.
Figure 4.13
Checking continuity with
a multimeter.
107

Figure 4.14
Bending a component
lead.
Figure 4.15
Bending and trimming
leads.
108
CNC Robotics
possible. Their size makes them more difficu lt to solder, because it
take s more time to heat them up to the point at w hich they wil l
accept sold er (see Figure 4.1 5).
After installing the short components, I installed the headers, cut the
header material to the necessary size, and soldered (see Figu re 4. 16).

Chapter 4 /
Driver Assembly
To install the Ie socket for the L297, bend a couple of the leads-
one on either end of the socket-to hold it in place for solderi ng.
Then insta ll the L298 direct ly to the board. I cou ldn't fin d a sock -
et for th is chip (see Figure 4.17).
The only capacitor with polarity is the 470UF, so make sure that
this capacitor is installed correctly (see Fig ure 4. 18).
Figure 4.16
Cutting header material.
Figure 4.17
Installing Ie holder and
L298 .
109

Figure 4.18
Correct placement of
470UF capacitor.
Figure 4 .19
Spool of cable.
110
CNC Robotics
--
The w ire I used for the motor power coming off the board is 20
gauge, cut from the 3-pair shie lded cable I am using to connect the
motor s to the driver boa rds (see Figure 4.19).
Cut and strip four pieces of wire for each driver and solder them
directly to the board (see Figure 4.20).
If you want to use a method ot her than di rect soldering, find a
suitable connector and install it at the locations of the motor lines.

Chapter 4 /
Driver Assembly
The L298 needs to have a heat sink in stalled. I made heat sinks by
cutting up a large heat sink I removed from a dead power supply
(see Figure 4.21). Figure 4.22 shows the completed driver board.
The Interface Board
Refer to the interface figure to determine the component pla ce-
ment. Install the jumper and the resistors first. Cut headers and
in stall them , then install the OB25 connector. This board is used to
Figure 4.20
Solderingwire directly
to the board.
Figure 4.21
Heat sink.
111

Figure 4.22
Finished driver board.
CNC Robotics
connect the computer to the drive rs. the drivers to themselves. and
to connect the limit switches to the computer (see Fig ure 4 .23).
Figure 4.23
Finished interface
board.
•
..
You w ill now have all four of th e printed circuit boards assembled,
and if you didn't have much experience soldering before this
chapter, you do now. It' s nice to have the board s comp lete and be
able to admire yo ur work, bu t you' ll wa nt to fi nd ou t if they can
do their jobs . In the following chapter. yo u will in stall Kearn 4 and
test the boards.

Software
Setup and
Driver Testing
Material Needed
•
computer
•
Windows 95 or 98
•
Stra ight-through parallel cable
•
Copy of KCam Version 4
•
Finished dr iver boa rd
•
Finished interface board
•
Step per motor
Before you test the driver boards. KCam must be installed on the
com puter you will use to run the CNC robot. You will wa nt to make
sure Windows do esn 't need to perform too man y tasks while
Keam is running, so remove the clock from the status bar at the
bottom of the screen or wherever you have it running. Close an y
programs that run in the background. You can use control alt delete
to shut them down one at a time. Keep in mind that only two of
the background programs need to stay running-Explorer and
systray- all the oth ers can be closed. Go to the KellyWare Web
site, www. kellvware.corn, to download a demo of the lates t version
113

Figure 5.1
Open Setup then
System Timing.
Figure 5.2
Run the system tim ing
calibrator.
114
CNC Robotics
of Ke am. At th e time 1 w rote this chapter, the mo st curren t was
version 4.0 .1. Once this is installed, run the program and ope n the
system timing window as seen in Figure 5.1 .
Ad ,
_'l:I! xl
~
t<tl
':iP' ~ ~ [...-..
'(In:J<1w
~
' .
i · .....
.
0
•
.'
r_So1I.Ip
"~
--i
~Set""
se -If
l!locro,....
t-
!
looILi3t
so
+---
f-
r--
~.o
I
i
!
eo
so
i
!
i
,
,
J O !--
I
I
I
I
I
3(1 f--
I
;
za u.,
,
I
I
l.J ~
I
e----
!
I
I
I
I
,
,
,
"
-
!
I
I
,
c, -
I
,
I
an -
I
I
I
<0 -
•
I
I
i
so -
L .
I
,
sn -
,
Ii
~.::',.,...."~..
-n
-
I
I
)
I
r'- ~
I
I
I
I
.
x
tJe't"~Mod'*>l>~[~'tJ.rrdt:-tieI!>
I
dQf~
l~O -
s' :--If
,
I
I
I
,
ec -
7C f-
I
!
!
, '-
I
tt=
I
x
'>0 r-
I'\cto St'lll/l;l~tim;I~
>.0 -
-.....- ~ ~~ do::o r"d /lCllk>ftl <ClCf_
I
'W. ~ ,()K· .. ~ PrenESCloebool
I
I
ao ~
r-edF"eedR.ate ~ ----.J
zc ~
Ac<wlFeedFlal!' r-
" L
I
Fe-edR¥e E....- r---
I
!
- '-
TRJe C'<>ns!...-t
I..,
r----
I
'"
-
II
s~
01
~
10
-
i
i
a« ._.-
i
1
"
-
.
i
,
sn -
,
-
,
,
su
i
,
-o -
,
,
'M
~DdN_-
.il,

Chapter 5 /
Software Setup and Driver Test
Perform a system timing calibration, use the defau lt feed rate for
the calibration, and do n't do anything while Kearn works (see
Figure 5.2).
When the ti ming has been set, th e w indow w il l look something
li ke Figure 5.3.
a System Timing
PressStart to begin timingsequence.
During timing sequence do not perform operations.
Wait until 'OK' isdisplayed. PressESC to abort.
DesiredFeed Rate: 15c0Q_~
I
~
Actual Feed Rate:
5.04
I
Feed Rate Error:
1;;,
·. 0~0~8~:!.
1
_
TimeConstant:
Js:;34~7..7...3"""iiii__i'iiP
Figure 5.3
Timing finished.
OK
Next, open the Port Setup dialog (see Figure 5.4).
l lJ'l S«l.l> I LPT N«~ 1
I
~II.bctIir>! IDl!:lIo Oo I
I X •••••• 11
TIt
e"-+7 .
1'ort 1O:)~
1
,,",T_
r. lPTF>.. '*'If'o'I (~
(' S_p.,.,I'ol~OC1
us

CNC Robotics
This w indow allows you to assign parallel port pins to drive the
stepper motors. The first tab sho uld be set to LPT parallel port so
we can use the printer port. I used the DLL already in use as the
default. Next, click on the LPT setup tab (see Figure 5 ,5).
..
.:I s_
oo l
,OlI !
.:l
_
lOa I
'01 I
1'_1_
_ 1
g ..J
",;;." 1
~~
:::;-.:: 1
~ ~.::;j
Z-Toct<
J)v_,....
rei B I 7. I~EGJ ~m" !" I" 1 @!"I ' ''~ ""'~ . "'~ .:J
':"i ~
",
!~ ~
,f-
; ,
;:
f.---.
J~
~G ~
;J
.. ~
'O~
LPT setup window.
Figure 5,5
I am using pi n 2 for x step and pi n 3 for x direction , pin 4 for y
step and pin 5 for y direction , pin 6 for z step and pin 7 for z direc-
tion . I also set the motor enable setting to "Always On." For test-
ing, you won 't need to set any more of the options, so apply the
cha nges and close the window. Next, open the Table Setup win-
dow (see Fig ure 5.6).
You will need to tell Kearn how many steps the motor needs to
receive in order to move your slide or the gantry I inch. I am using
2- degree stepper motors, w hich means it takes 180 steps to turn
the shaft 360 degrees. I am using direct drive, so the gear ratio is
I : 1 and the lead screw has eight turns per inch. Multip ly the num-
ber of steps to turn the shaft 360 degrees by the number of turns
on an inch of your lead screw. For examp le, 180 X 8 =
1440, so I
enter 1440 for each of the axes because all my motors and lead
screws are the same. You can set the axis length if you li ke, but at
116

Chapter 5 I
Software Setup and Driver Test
--
r v..w. PooitIIro\
D•...",
TaJlllOI
_X I
I
_V I
I
",="
f._ ~
SloooFN (0:5
I
i,
!..-
J
r- "'ecnc!lml
~"F.-.tl oo:um
;J
~y
kitZ
~~SIeQI'S~~ SlOpS
Am l.orVh ~.........
Aootl,""" po--- Ird>n
-"-'~ --~
eaciJasn 1C 1_
Saddd> ~ ~
"'"
Tf~
p-ru-.
l'i,,",,",eu ~ 1nctIoo
DeepCU
~Inct>i!oo
_ x
s~ ~s,­
A>n Le<4n~ lI'IChe<
....I_ ~
8.od.Intl~-
I
...hl
"zn
an
so
so
100 r
"I-
or-
so
"
: 0
1~~~~i~~~~~==:;:::;~;~;';:~- :o~x
Figure 5.6
~
Table Setup window.
this point it doesn't matter w hat you tell KCam. Check the box that
indicates that the limit switches are disabled, click apply. and
close the w indow. Next go to the view tab and open the CNC
Controls w indow if it isn't already op en (see Figure 5.7) .
_ox
~~~M_~Ecnctoor-..~!:!o\:r
e. is. ii.
~
EhiW,i/·-~~,
<><-
10 0. --1
fIoI
~_PM !O~y
I
!
~ i loOocMo
I Dlst to Go I
~
3.0
!-I X_~~
en -
,
'" -
YB!ImiIII~
en -
sn -
!
mmmIiII~
" -
Z II III III
1£""
I
I
i
:
.liiD " . s~old
AI.o< 1011 I
au -
I
I
zc -
. J~
3 .... 2Ot I
Auo JOI! I
:' ~
I
I
I
_1..........,1T'om\l l"",,=-sw... I
!
I
I
~!'J ~ ~ -d·=,
,
~
!
I
z
g
~ ~
~:;'.:,
,
~
i
~!lJ~ ~'<:t''3'~
,
, :
i
I
"f
I
IGOl >Xl25Y02SZO-25
~
I
m=l
.:
1
I
I
MOTORS £N.08L!O
i
s.iId>
,.
I
I
I
I
.
-
~
-
'1
S~OtoIU_M""'" .-
Figure 5.7
eNC Controls window.
117

Figure 5.8
Driver boards and
interface wired up for
testing.
118
CNC Robotics
You will need to connect the driver boards to the interface board.
as ind icated in the Port Setup window. Connect all the sync pins
on the driver boards together as well as all of the ground wires at
header 4 (see Figure 5.8).
1 am using an old PC power supply for each of the driver boards
and taking 12 volts for the motors and 5 volts for the circuit. To
power the inte rface board. take 5 volts from one of the boa rds at
the positive side of a capacitor co nnected to 5 volts and gro und
(see Figure 5.9).
Attac h the interface ground to the co mmo n ground of the driver
boards.
Connect your para llel cable to the printer port of the co mp uter and
to the interface board. Now connect a motor to the driver boards.

Chapter 5 /
Software Setup and Driver Test
Carefully verify th at you have every thing connected properly,
especia lly the motor and circuit voltage w ires (see Figure 5. 10).
If you give th e motors 5 volts, nothing bad w ill happen, but if you
accidentally give the circuit 12 volts, the L297 and L298 chi ps w ill
Figure 5.9
Voltage and ground for
the interface board.
Figure 5.10
Ready for testing.
119

CNC Robotics
start to smoke and crack le. I wasn't paying atte ntion late one night
while testing so me boa rds and ended up destroying all the chips
on three boards. Once you are sure everything is OK, turn on the
power su pplies. The first indication that the drivers are wo rking
and that the motors are good is that the motor shaft will be rigid.
It shouldn't be easy to turn the shaft by hand. You will be able to
turn the shaft manually a little, but it should take a bit of effort.
Next, start moving the motors clockwise and counter-clockwise
using the appropriate arrow in the CNC Control window as seen
in Figure 5.\ I.
=- cite Controls
13
"'OTORS EW>.BLEO
Pr"",am J"'ochre I Dis!to GoI
~.
-00.306944
01 .896528
01.166667
x
y
z
._~
, SpindleOff I Aux1 Off
. TuneI
~ _Au,20ff I. AudOff
Figure S.U
Moving motors through
CNC Controls window.
If all is well, you will be ab le to move all thre~iiijt~ in both
directions. Ifone of the drivers isn 't working, check-the motor wire
co nnections first to make sure they.are in the correct order. Then
check the thro ugh-holes and traces on the board to verify that all
the co nnections are good. I did have a board that wouldn't work
120

Chapter 5 /
Software Setup and Driver Test
at first. After checking the through-holes from top to botto m of the
board. I discovered that three of them weren't act ually connected
fro m top to bottom, so I put longer pieces of paper clip through the
holes, and the board worked fine.
Creating Test Files
Now that you have all the boards working, open a text editor like
Notepad, and type in the following lines of code.
NOOl %
N002 G90
N003 M03
N004 GOO Zl
N005 GOO XOOO.OOO YOOO.OOO
N006 GOO X002 .904 Y002.052
N007 GOO ZO.5
NOOS GOl X006 .967 Y002 .052
N009 GOl X006.967 Y006.115
NOlO GOl X002.904 Y006.l l 5
N011 GOl X002 .904 Y002.052
N012 GOO Zl
N013 GOO XOOO.OOO YOOO.OOO
N014 M05
N015 M30
Save the file as Square-gc.txt. In KCam, go to the file menu and
cli ck on "Open G code file", Find Square-gc.txt and open it (see
Figure 5.12).
The plot view will now be showing a square in red and lines in
blue. The red lines indicate whe re a cut wi ll be made and the blue
lines are where the machine will travel without cutting. Click on
the automatic tab in the CNC Controls window and run the pro-
gram you have just written. This square program will move all the
motors du ring its execut ion. It's a simple test and will ind icate that
the electronics are finished and can be put in a box. If you want to
run a few more tests, the following can be created in Notepad as
the first test was and opened in KCam.
121

CNC Robotics
Figure 5.12
Opening Square-gc.txt.
iG.
Fi ....
il
i
Ii*'
f"
fOl
't
l
"
"
'
'
'
'
'
'
~
t
!
'
i
<
'
,1--
Triangle Test
f~A~,
j
'
'il'~'~
t-v ~Jf\!_
;
"~ ,
NOO2~~
NOOl ~ O J
~OOlGOOZ1
NOO5 G OO ~.OCll YOOJ ((l)
NOli G OOx::m ~ Y(JJ2-'J5.
NOO7GOOZll.5
NWlIWl Xl:00967\W;'.050'
NOO9 GmXOO;.9&7\'((l(1l5
Nm O WlX002.~ \1Xl( m
Nm1 Gm X002 ~ \W2. 0'51
Nm2 GOO Z1
NmJ GOOl<J:m OCO YOOJOOJ
Mlu ~ re
NCJ1 5M3l
122
Use the following code to write a G code fil e that will plot a triangle.
NOOl %
N002 G90
N003 M03
N004 GOO Zl
N005 GOO XOOO.OOO YOOO.OOO
N006 GOO X004.ll2 Y003 .411
N007 GOO ZO.5
N008 GOl X007.553 Y003.411
N009 GOO Zl
NOlO GOl X007.55 1 Y003.391
N011 GOO ZO.5
N012 GOl X005.608 Y006.772
N013 GOl X004 .113 Y003.411
N014 GOO Zl
N015 GOO XOOO.OOO YOOO.OOO
N016 M05
NOil M30

Chapter 5 /
Software Setup and Driver Test
Save this file as Triangle-gc.txt, I include the gc in the name to indica te
that it is a G-code file but you could just change the extension of the
file to .gc from .txt if you like and you wo n' t have to use the "All Files"
filter when looking for the file wi th Kea rn (see Figure 5.13) .
'3 . 'h - • .
, ,
!'u ",
t-!tt"''''''_1'O-O>t_
_
"",
"
I ::::~~"t~$Oo>r.r-=-"
,~
I
f-
'-'!T=iJ'!!:J_••
'-
I
._~
'-
. .. _
17
f--
,~-
1_~ !Plol
~rs--~
, f-
,
!Ii
"
i _\_--
..
-
~
'r-
0
\
'00"
N OO5 G iXl ~ (W yooo' ((l)
"
,
NOO6 GOO XlX\O " 2Y1)l) m
!
N(JJI GOO ZIJ 5
+=9
,
N OXlI G lII )O)J1 ~ Y1lOH"
IIOO'GOOZl
z
"
~n~ii:::
-
" t
-l
--l
"
iI
llOI>I»I 11)YllIl m
-
/.
.'""
: ir.oa>O,D;l(W>1lJl(W
-
"
I
,
.~
/
,..
'-
,
/.
,,-
-: ---
--
f-
1'.1
_" lI>1t~~
Z-T"".
DV_
TO<lo
O~f ""'"
I
1i'£I"1b.1 " I ~.!!:J '** * * *'1slsl,':3""'3''''3.til .""Ic...,
, ~~'JJ,.>I
_.
,
Circle Test
Use th e following code to write a G-code fi le that w ill plot a circle.
NOOl G90
N002 M03
N003 GOO ZOOl .OOO
N004 GOO X1.882 Y2.5
N005 GOO ZOOO.500
N006 GOl Xl .882 Y2.5 ZO.5
N007 G02 X4.118 Y2.5 1003.000 J002.500
N008 Gal X4.118 Y2.5 ZO.5
N009 G02 Xl .882 Y2.5 1003.000 J002.500
NOl O GOO ZOOl.OOO
NOll GOO XOOO.OOO YOOO.OOO
Figure 5.13
Triangle file open in
Kearn.
123

CNC Robotics
N012 M05
N013 M30
Save this text file as Circl e-gc.txt and test your motors (see Figure
5. 14).
After you have successfully tested the drivers and motors using
Figure 5.14
Running the Circle file .
Hie'!
"0 '
ac
~
-,
; 0 ,..-
00[-
'Q
fmJ
EPZ'C *'
JoFt
$=:;'F£"",,,~~
I
~
J!J !!J
.i:" ~ 0
,~ ~
#01$ '_ "d.
Fotldll _
I '~ C ~ ..~C IPH~
N(I)'G~
NrmNOl
NOOlGOO ZOOHlll
NOCW GOO Xl OO1Y25
NOO5 GOO ZOOJ 500
N[II; Ii()' X1002y 2 5ZO,
NOO7G02XO 11S'R-51OOl0CllJClJl.500
N(Ojfi01>a"a YHZIl 5
NOO% (l.lXl OO2 Y2511))l OCJJJcm '500
NlI'OGOO ZOOl OOl
Nllll GOO>= OOJiUlJOOl
---- >---- ---~I I-; : ; I ~~i ~!i3
124
KCam and the files you have written , the electronics can be hou sed
in an enclosure of your choice.
Putting the Electronics in a Case
I am using a box from a computer to house the dr ivers and th e
interface board. I bought the case without a power supply for $ I 5
Canadian from a local electronics supply store (Figure 5.1 5).
I removed the power supply holder and the sheet metal used to
hold
the
floppy and
hard drives. By
removing the
unneeded
mounting hardware you free up a lot of space. I deci ded that a fan
would be a welcome addition to the box, so I bolted one on the
case at the fan opening, as seen in Figure 5 .16.

Chapter 5 I
Software Setup and Driver Test
•
Figure 5.15
Computer box.
Figure 5.16
Fan mounted on case .
125

Figure 5.17
Holes drilled to mount
drivers.
Figure 5.18
Standoff connector.
CNC Robotics
Next, I drilled three holes in each of the driver boa rds and corre-
spond ing holes on the moth erboard mo unting surface (see Figure
5.1 7).
Use standoffs that w il l snap into place (see Figure 5.18).
126
I

Chapter 5 /
Software Setup and Driver Test
The interface board also has three holes drilled through it and cor-
responding holes in the floor of the case. The standoffs are high
enough to allow the 0825 connector to pass through the bottom
expansion slot opening of th e computer case (see Figure 5.19).
Next . install a 12-term inal connector strip for motor w ire attach-
ment and a 4- termi nal connecto r strip to
supply
power and
ground to the interface board and fan . and to provide a place to
connect the ground wires from each of the driver boa rds (see
Figure 5.20).
Figure 5.19
Interface board
mounted on floor of
case.
Figure 5.20
12- and 4-term inal
connectors.
127

Figure 5.21
4-terminal connector
provides 5 and 12
volts.
128
CNC Robotics
I used the ground from the 5-volt and 12-volt supply wires just as
the power supply connectors are wired (see Figure 5.21).
The next step is to make cables that will be used to connect the
driver boards to the interface board. Pinch the required pin s onto
the wires that will connect the driver 's step a nd direction pins to
the interface board at either end. Connect a pin to the driver end
of the wire for the syn c and ground pin s but don 't connect a pin
to the interface end of the se wire s. The sy nc wires ca n be twisted
together and protected with electrical tape. The ground wires can
be twisted together and connected to the 5-volt ground terminal
on the 4-terminal connector. At the interface end of the wires,
place each wire in the connector hole that cor res ponds to the LPT
pin you have assigned to step and directio n sig nals for eac h axis.
Remember that the pin s on header I of the inter face board are
numbered 1- I8 and are connected to the parallel po rt pin s 1-18
(see Figure 5. 22). Install your cabl e whe n it is finished.
Connect the fan wires to the appropriate voltage on the fou r-ter-
minal connector. The fan used in this project requ ires 12 volts.

Sync wi r e s
----
-
-
- ------
--
--
Chapter 5 /
Software Setup and Driver Test
Use two computer power supplies, one to power the boards and
motors on the y- and z-axes, plus another to power the boa rd and
motor of the x-axis and the case fan. Because the hard drive and
floppy bay were removed, the two power supplies fit nicely in the
case, as you can see in Figu re 5.23.
Cut a hole in the panel the power supplies, as in Figure 5.24, to
allow the power cords to be plugged in. Turn the switches on and
tuck the wires you won't use aro und the power supplies.
Figure 5.22
Connector at interface
end of driver cables.
Figure 5.23
Power supplies inside
box.
129

Figure 5.24
Hole cut in computer
case panel.
Figure 5.25
Motor to cable
connection .
130
CNC Robotics
Con nect the motor wires from the driver boards in the co rrect
sequence on the 12-terminal connector. Make cables to connect
the motors to the 12-terminal con nector with 2- or 3-pair shield-
ed cable. Insta ll the male end of the con nector at the motor wire s
and the female end to the cable (see Figure 5.25) .

Chapter 5 /
Software Setup and Driver Test
Th en connect the cables to th e corresponding term inal at the 12-
term inal connector (see Figure 5.26).
Of course, if a motor doesn't tu rn in the correct direction . just
reverse the orde r of the w ires for that motor at the 12-term inal
con nector for your mac hine to fu ncti on properly after the motors
are installed (see Figure 5.27).
With KCam 4 installed and set up yo u were able to perform a few
successful tests of the drivers and interface boa rds. After correct-
ing any problems, if there we re any, you w il l have mounted the
electronics in some kind of enclosure. The finished product w ill
look tidy and provide some protection for the boards. The elec-
tronics are now behind you. In Chapter 6 you will start construc-
tion of your CNC machine by building the frame.
Figure 5.26
Motor cables connected
to 12-terminal
connector.
131

Figure 5.27
Completed box.
132
CNC Robotics

The Frame
Tools and Material
•
Guide rail support material
•
Cross member material
•
Cutoff saw or a hacksaw
•
Drill or dr ill press
•
Drill bits
•
Nuts and bolts
•
Wire brush
•
Grinder
•
Welder (optional)
•
Clamps
•
Square
As you recall. I decided on the dimensions of the machine (length
and width) largely because of the available space in my work area
(see Figure 6.1). I really should have built this a little smaller.
because as it stands the footprint will dominate my shed and I will
133

Figure 6.1
Drawing of proposed
frame.
134
CNC Robotics
4"
~
8'
L
U
I
l
be forced to find alternative storage for a lot of the material and tools
for which I don 't have an immediate use. But at the current size, I'll
still be able to get around it safely to work. of course, the drawings
I made of the machine are rea lly a guide, as opposed to a strict set
of instructions. The reason is simple-since I decided on a ga ntry
style of machine, the dime nsion that I will most closely follow will
be the footp rint. The material used to construct the machine will
determine all the other dimension s. The frame is a good example of
this. My drawings use un iform sizes of material in width, height,
and thickness, the length being the only variable. I am loath to
spe nd a lot of money on new steel , so the scrap yard closest to my
house is my usual first stop. It takes a little more effort to find sec-
ond-hand material that will work, con sidering that most of the steel
you want is buried under a few tons of steel you don't want.
I wa s lucky and found the 3.5- X 3.5-inch pieces I am using for
the x-axis guide rail supports on top of the pile. The ma terial used
as cross members was a little deeper but well worth the effort to
dig out. From the 2.5- X 2.5-inch materiali used, I cut two pieces
49.5 inches long for either end of the frame a nd from the 3- X 2-
inch material I cut the center cro ss member. The leftover material

Chapter 6 / The Frame
from the 3.5- X 3.5-inch material was used to cut the gantry bea r-
ing sup po rt pieces (see Figure 6.2) .
Don 't forget to bring a tape mea sure an d a straight edge with you
to make sure the steel you use isn 't warped or ben t. The guide rail
supports must be straig ht. If they are not straight, ad justing the
rail heig ht along the length will become more difficult. And if the
cross mem bers aren't straight, the axis tra vel will be over an
uneven surfa ce, maki ng material positioning very
frustrati ng.
Remember that st raight is good and rusty doesn 't matter.
Figure 6.2
Scrapsteel.
135

Figure 6.3
Steel in saw ready for
cut.
136
CNC Robotics
A little rust won't pose a problem but does add clea ning wo rk to
the pro ject. Take a look at the rusty material I picked up at the
scrap ya rd. The first order of bu siness is to cut the material to
length. I have a n abrasive chop saw to use for this pu rpose (see
Figure 6.3),
The material is heavy enough to tip the saw when clamped in
place, so I supported it at the far end. Ide ally you wa nt a cut that
is square to the sides of the material; as long as you don 't use the
ends as a mating surface for a nything du ring construct ion , squa re
cuts don 't matter. Having the pieces cut to length, I fit them
together upside down on a flat surface, or in my case a reall y old,
wavy, con crete floor (see Figure 6.4).
It won't matter if the surface is perfect because when you cla mp the
pieces together, the frame will straighten out. After the cutting and
fitting (to make sure I hadn 't made an y mista kes), I cleaned the sur-
faces that would be in contact with one an other (see Figure 6.5).

Chapter 6 /
The Frame
The cleaning was accomplished using a wire bru sh mounted on
my small hand drill, then I went over it again using a small orbital
sander with 60-grit paper (see Figure 6,6),
The rough ends from cutting were removed with a grinder and a metal
file. Keep in mind that you can lise whatever tools you have on hand
to get the job done. If you only have access to hand tools, then cut-
ting and clean ing will just take more time. When the ends are clean,
you have two options: bolt them together or weld them together.
Figure 6.4
Fitting steel in place.
Figure 6.5
Contact surface
cleaning.
137

Figure 6.6
Drill and sander with
stee l.
Figure 6.7
Lay out the bolt-hole
locations.
138
CNC Robotics
Bolting
If yo u choose to bol t, then start laying out the locati on of the holes
(see Figure 6.7),

Chapter 6 /
The Frame
The cent er cross rail holes on the bottom of the support beams w ill
need to be tapped to accept the bolts. or you can drill access holes
to enable the installatio n of the bolts and nuts (see Figure 6.8).
Drill all your ho les a little overs ize for the bolts so tha t yo u w ill
have room to adj ust the pieces . I li ke to set up my dril l press vise
with tape to mark the locati ons of the holes from the end of the
material. In th is case. I used 1-1/ 2 inch centers (see Figure 6.9).
Figure 6.8
Drill access holes.
Figure shows the bolt
access hole location for
center cross member.
Figure 6.9
Using tape to mark hole
locations.
139

Figure 6.10
Setting centers on
width of piece.
Figure 6.11
File off burrs .
140
CNC Robotics
I measure the distance fro m the center of the drill bit to the edge
of the vise to get the cor rect measurement between centers on the
w idth of the pi ece (sec Figure 6.10).
W ith a grinder or fi le. remove the burrs at the bolt ho les (see
Figure 6.11).
-

--- -------- - - - - _..-- -
-
--
Chapter 6 /
The Frame
Assembly
Put the pieces in place and make sure the two rail supports are
parallel and sq uare to each other. Butt the ends aga inst a straight
edge to save a little time.
Hold a large square, as in Figu re 6.12, to check that the ends are
square.
Using a good tape measure, check the distance between the pieces
at either end, making sure they are parallel (see Figu re 6.13).
Figure 6.12
Large square at work.
Figure 6.13
Making beams parallel.
141

Figure 6.14
Cross-member
alignment.
FIgure 6.15
Clamp with bolts.
142
CNC Robotics
Next. place and align the cross members parallel to one another
and square to the support beams (see Fig ure 6. I 4).
Get out your clamps. I have a number of 4-inch C-c1amps that w il l
do the job. Make sure you keep checking to see that every thi ng
stays in pla ce as you tigh ten the clamps. If yo u are bolti ng. I sug-
gest trying to line up th e bol t hol es as yo u align and square the
fram e. as in Figures 6.1 5 and 6. 16.

Chapter 6 I The Frame
I have an antique arc welder th at I picked up at an auction a few
years ago. It works just fine, so I chose to we ld the frame togeth-
er (see Figure 6. 17).
Figure 6.16
Clamped for welding.
Figure 6.17
Ready for welding.
143

Figure 6.18
Thorough cleaning.
Figure 6.19
Showing the bolt-hole
configuration.
144
CNC Robotics
You aren't going to see a bunch of closeups of my welds because 1
don 't weld very often. They aren't pretty, but they are strong
enough to keep every thing together. Once the frame is together,
clean the rest of the rust off the meta l. You can do all this cleaning
work prior to assembly; J just like to leave the th orough cleaning
until the end (sec Figure 6. 18).
Bearing Rail Support Bolt Holes
I chose to drill the bearing rail support bolt holes before painting
so that I wo uldn 't damage the fin ished surface. The bearing rail s
are 6 feet long w ith ho les drilled and tapped on II -i nch centers
start ing 3 inches fro m each end (see Figure 6.19).

Chapter 6 / The Frame
I laid out the ho les on a piece of masking tape pulled down the
middle of the support rails. 1 like to use masking tape to lay out
drilling locations so the marks are easily visible and quickly
cha nged by rea pplying new tape. 1 fou nd the center of the first
support beam and drew a line from end to end using a straight
edge (see Figure 6.20) .
Sta rting from a chosen end, 1 marked the location of each hole at
the ce nter line (see Fig ure 6.21).
I then taped the ce nter of the opposing support bea m an d found
the ce nter at the end at which I had started marking the hole loca-
tions on the first beam (see Figu re 6.22).
Figure 6.20
Find center.
145

Figure 6.21
Marking center line.
CNC Roboti cs
\
Figure 6.22
Find center on second
beam.
146

Chapter 6 /
The Frame
I next measured the distance between the center of the first beam
and the center mark I made on the second beam (see Figure 6.23).
• .
'.
Figure 6.23
Getting measurement.
I used this measurement to mark on the opposite end of the sec-
ond beam (Figure 6.24) and then drew a line with a straight edge,
ensu ring the two lines were para llel.
On the second beam, measure the hole locati ons from th e same
end of the frame you started from on the first beam. I didn't wa nt
Figure 6.24
Marking second beam
for parallel line.
147

Figure 6.25
Electromagnetic drill
press.
148
CNC Robotics
to use a handheld drill for the holes, so I rented an electromagnetic
drill press, a wonde rful too l (see Figure 6. 25).
I set the dr ill press in place an d lined it up, flicked the switch, and
it was clamped in place. I wanted the holes to be as sq uare to the
top surface as possible because I needed to drill access ho les from
the bottom of the beam under each rail support bo lt hole (see
Figure 6.26).
After dri lling the holes, I put a long bit in the chuck and dr illed
through the bottom of the beam to create a guide for the large
access hole (Figu re 6.2 7).
I next flipped the fram e over and proceeded to drill the acces s
holes with a 3/4-inch drill bit (see Figure 6.28) .

Chapter 6 I
The Frame
Figure 6.26
Drilling holes.
Figure 6.27
Drilling acces s hole
guide.
149

Figure 6.28
Drilling access hole.
Figure 6.29
Clean off burrs.
150
CNC Roboti cs
To clean the burrs from the underside of the bolt ho le. I pu t a drill
bit in my hand drill and cut the burrs off through the access ho les
(see Figure 6.29).

Chapter 6 /
The Frame
Paint the Frame
Now is a good tim e to paint. Clean the frame with acetone or
something that wi ll remove the rust dust that came from cleaning.
If you used new material, then the oil covering the metal wi ll need
to be removed. I bought some rust paint at the local hardwa re
store and made the frame pretty. as depicted in Figure 6.30.
During this chapter you decided how big your CNC machine wo uld
be and found the required material to bui ld a frame. After weldi ng
or bolting the pieces together. you drilled all the holes needed to
install the guide rail s for the x-axis and fin ished the fram e with
some paint. The final product is sturdy and attractive. During
Chapter 7 you will assemble a gantry, install guide rails on the
frame, and put the gantry on the guide rails.
Figure 6.30
Finished frame.
151

;

The Gantry
and X-axis
The Gantry
Tools and materials you will require to build the gantry portion of
the CNC machine are as follows:
•
Two 2 X 4 steel spanning beams
•
Two 2 X 6 steel uprights
•
Two 3.5 X 3.5 gantry feet
•
Drill press
•
Abrasive cutoff saw
•
Welder
The ga ntr y moves the length of the x-axis and carries the y- and
z-axes . It consists of two feet on which the bea ring holders are
mounted. and two upright posts that have the rail holders for the
y-ax is spanning between them. The feet are made of 3.5 X 3.5
steel-the same as the frame beams. cut 12 inches long (see
Figure 7.2).
153

Figure 7.1
Drawing of proposed
gantry.
154
CNC Robotics
,......,
,--
lliL
Jil

Chapter 7 /
The Gantry and X-axis
•
•
:
Figure 7.2
Gantry feet with
uprights.
The uprights are 2 X 6 steel cut 20.5 inches long and the span-
ning beams are 2 X 4 steel, 48 inches long to span the distance
between the two upright posts attached to the gantry feet. These
spanning beams are depicted in Figure 7.3 .
, .
Ai
:;4_ Pi
$$
"'
11
j
I
.
M
Figure 7.3
Spanning beams.
155

CNC Robotics
The spanning 2 X 4s are drilled at eithe r end to accommodate bolts
that will be used to attach them to the uprights. The location of the
bolt holes is determined by the distan ce between the ce nters of the
guide rails mounted on the fra me beam s (see Figure 7.4).
Figure 7.4
Finding mounting hole
location for spanning
beams.
Figure 7.5
Location of mounting
holes on uprights.
156
The uprights will need to be drilled to allow the ce nter of eac h
spanning beam to be at the ce nte r of the rails that will be installed
along thei r length (see Figure 7.5).
Also drill two access holes on the outs ide of each of the uprights
to allow the install ati on of the bolts (see Figure 7.6).

Chapter 7 /
The Gantry and X-axis
The n I dri lled holes through the uprights at the location where the
lead screw will be inserted. The location of the lead screw holes
was determined by the location of the lead screw nut holder on the
slide I sa lvaged from the copy camera (see Figure 7_7).
Figure 7.6
Upright access holes.
Figure 7.7
Lead screw holes in
uprights.
157

Figure 7.8
Cente rs of bearing
holders determines the
bolt hole locations on
the uprights.
=
CNC Robotics
I decided to use the existing hole because the nut fit. I need 13
inches fro m center to center to allow me to use the bearing hold-
ers on the pla tform I removed from the NuArc copy came ra (see
Figure 7.8).
13 1/2 ..
158
I removed the guide rai ls for the y-axis from the nuArc copy cam-
era for use in my CNC machine. They were longer than 1needed,
so I cut off the excess with my abrasive cut off saw. The bolt holes
alo ng the length of the rai ls are at 12-inch cent ers so I drilled four
hol es in each of the spanning beams directly down the center of
their length on 12-inch centers (see Figure 7.9) .

Chapter 7 /
The Gantry and X-axis
Figure 7.9
$ -
Drilling guide rail
support bolt holes.
Tit
12"
.
t--t---A'~~~
Once all the ho les were drilled, I clamped the uprights to the feet
w ith the back of the uprights 2 inches (or the thickness of the
spanning beams) from the end of the feet and as close to cente r as
possibl e (see Figure 7.10).
Figure 7.10
Clamping uprights to
feet.
159

Figure 7.11
Weld locations at gantry
feet.
160
CNC Robotics
I welded th e uprights to the feet only on the sides a nd front where
they met the feet. I didn 't weld the back, so I could rest the bot-
tom-spanning beam on the foot without any interference (see
Figure 7. 11).
After welding the feet to the uprights , move on to the next section
of this chapter and set up the rai ls on th e frame.
The X-axis: Installing the Gantry
Bearing Guide Rail
Tools and mater ial required to instal l the gantry bearing guide ra il
are as follows:
•
Guide rails (Figure 7. 12)
•
Screwdriver
•
Wrench
•
Nuts washers and bolts
The holes for the guide rail support bolts were drilled during the
frame construction process. To be able to insta ll the rail, you must
raise the frame to allow an approac h to the access ho les drilled in
the bottom of the rail support beams. I boosted the frame up wit h
a coup le of pails I had lying a rou nd in my work shed (see Fig ure
7.13).

Chapter 7 /
The Gantry and X-axis
Figure 7.12
The guide rails.
Figure 7.13
The frame supported
with pails.
161

Figure 7.14
Inserting the support
bolts.
Figure 7.15
Finding the working
height.
162
CNC Robotics
Insert the first an d last bolts into the beam through the access
holes an d tu rn a couple of nuts onto them (see Figu re 7. 14).
Screw the first and last bo lts into the rail as far as the y will go and
run one of the nuts to the bea m, tightening it to ma ke the bolt
rigid. Check the height of the rail at one end and adjust the oppo-
site end to match (see Figure z. i s ).

Chapter 7 /
The Gantry and X-axis
Starting in the middle, install and adjust th e remaining bolts alter-
nating from the center. Keep checking w ith a straight edge to
ensure that the rail is straight (see Figure 7.16).
I
If the rail isn't straight, you w ill need to raise or lower a support
bolt to straighten it out. Take your time performing this procedu re.
Follow the same sequence to install the guide rail on the parallel
beam,
makin g sure you use the heigh t measurement obtained
from the first bolt in stalled on the previou s rail. If th is is done cor-
rectl y, the rail s should be parallel and at the same heigh t above the
beam,
while bei ng straight w ithout any deflection (see Figure
7 . 17).
Figure 7.16
Checking rail with
straight edge.
163

Figure 7.17
Frame with support
rails installed.
164
CNC Robotics
Bearing Holder
Tools and materials required to
assemble th e bearing holder
include:
•
Drill press
•
Drill bits
•
File
•
Tap
•
1- i / 2 X 3 solid aluminum bar stock
You can buy bearing holders for the linear bearings used in this
project from the manufacturers of the bearings, but 1 decided to
make them. They are much less expensive than th e manufactured
models. I bou ght a length of 3- X I .S-inch alum inum bar stoc k
from the metal supe rmarket. From this stock I cut four pi eces 2
inches long (see Figure 7. I 9).

(
Chapter 7 /
The Gantry and X-axis
3"
)
Figure 7.18
Drawing of proposed
bearing holder.
1 1/2"
1 1/4"
!
I
I
I
I
I
I
I
Wl" r-- w -
-'· -r----
J
I
J
I
o
o
\
)
o
o
Figure 7.19
Cutting material.
165

-------
-
Figure 7.20
Drilling bearing hole.
Figure 7.21
Cuttingout the
clearance slot.
166
GNG Robotics
Next, I drilled a hole in each one, 1- 1/4 inches wide to accommo-
date the outside diameter of the lineal bearings (see Figure 7.20).
I drilled the ho le 1/4 inch from the bottom of the stock and then
cut out the bottom of the hole for the bolt clearance (see Figure
7.21).

Chapter 7 /
The Gantry and X-axis
At 1-1/4 inch from the side of the hole, I cut a notch in the stock
to a 1/2 inch from the top. Thi s notch made the holder adjustable
(see Figure 7.22).
I drill ed four holes from the top down for the bolts that will ho ld it
to the gantry feet (see Figure 7.23).
Figure 7.22
Notch cutting.
Figure 7.23
Drilling bearing holder
installation bolt holes.
167

Figure 7.24
Tapping hole for
adjusting screw.
Figure 7.25
Variance between
holders.
168
CNC Robotics
The next hole was drilled from the side of the holder until the
notch was reached. This hole had to be tapped to accommodate
the adj usting screw (see Figure 7.24).
Because you are working w ith alumi num. tapping isn't very diffi-
cult. When all four hol es were finished. I removed any rough edges
w ith a file. Notice that the distance from the top of the bearing hole
varies a little from ho lder to holder (see Figure 7.2 5).

Chapter 7 / The Gantry and X-axis
This difference in dis tance can be removed with sheet metal shims.
Because my holders were less than perfect, installing them correct-
ly was critical. I took each of the foot a nd upright sections of the
gantry and turned them upside down, placing the bearing holders
on the bottom of the feet with bearings installed (see Figure 7.26).
Ensure that the holders are positioned with the adjusting bolt
toward the outer side of the feet and mark each holder with a cor-
responding mark on the gantry foot. Run one of the rails through
th e bearings. Tighten the bea ring holders enough to remove any
play between the rail and bearings (see Figure 7.27).
Figure 7.26
Holders in place on
bottom of gantry feet.
Figure 7.27
Bearing holders
adjusted with rail.
169

Figure 7.28
Center the rail to the
feet.
Figure 7.29
Marking bolt hole
locations.
170
CNC Robotics
Using a measuring device. align the bearing holders w ith the rail
set to the center of the feet (see Figure 7.28).
Mark the holes' location s through the bearing holder onto the feet
for the mounting bolts (see Figure 7.29).
Drill the holes and clean the in side of the feet. remo vin g any burrs
w it h a fi le.

Chapter 7 /
The Gantry and X-axis
Place the holders back on the bottom of the feet with bol ts loose-
ly attached and determ ine which of the holders is keeping the rail
the farthest from the surface of the foot (see Figure 7.30).
This w ill be the only holder that won't need a shim. Shim the
remaining three ho lders to raise the rail to the height determined
from the first holder (see Figure 7.31).
Figure 7.30
Finding adjustment
height.
Figure 7.31
Using shims to even
the bearing holders.
171

Figure 7.32
Bolt the spanning
beams to the uprights.
172
CNC Robotics
Once the holders are shim med. tighten the bo lts. making su re the
rail is directly in the center of the foot . Place each of the feet onto
the rail installed on the frame. bolt the bottom-spanning beam
onto the upright. and then the top-spa nni ng beam (see Figure
7.32).

Chapter 7 / The Gantry and X-axis
Tighten the bolts, ensuring that the beams are square to the uprights
and parallel to the bed of the frame. If you can't do both, then it's
best that the beam be parallel to the bed of the frame. In any case,
the two spanning beams must be parallel to eac h other, aside from
their relationship to the bed or the uprights. Once the spanning
beams are installed, the gantry should move easily along the length
of the rails. Adjust the bearing holders to remove any excess play but
don' t tighten them so much that they will bind. If the feet moved
free ly prior to installing the spanning bea ms, it is possible that the
beams are push ing the uprights too far apart or that once tightened
they may ca use the feet to toe in or toe out. This ca n be corrected
with shims on one side of a spanning beam (see Figure 7,33).
With th e ga ntry built and installed on its gu ide rails, you will want
to ad just the gantry's moveme nt us ing shims and adjust ing the
bea ring holders.
After yo u have spent a few, pa tien t hours fine-tuning the ga ntry to
enable it to glide along the rails wit h little effort, you are rea dy for
Chapter 8, the z- a nd y-axes installation.
Figure 7.33
Shimming the spanning
beams.
173

--------
-
-
---
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
,

The Z and
Y Axes
The Z-Axis
You'll need the following too ls and materials to build the z-axts of
the machine.
•
I X 3 metal stock
•
TV sliding tray
•
Hacksaw
•
Drill
•
Dr ill bits
•
Nuts and bolts
The z-axts is const ructed from a TV holding glide and two pieces
of I X 3 foot steel. I bought the TV slide from a big box home
improvement store because it looked and felt stu rdy enough to act
as the z-axls (see Figure 8.2).
175

Figure 8.1
Rnished z-axis,
Figure 8.2
TV holder from Home
Depot.
176
CNC Robotics

Chapter 8 /
The Z and Y Axes
The assembly came w ith a small swiveling tray attached to the
sheet metal spannin g the glides. I first drilled the rivet out of the
center of th e tab le (see Figure 8.3).
Because the y-s lide was 5 inches w ide inside the outer ridg es (see
Figure 8.4), I needed to cut 4-3/ 4 inches from the center of the
sheet metal ho lding the slides togeth er (see Figure 8.5).
Figure 8.3
Drilling out the table's
rivet.
Figure 8.4
Inside dimension of
y-slide from NuArc
copycamera.
177

Figure 8.5
Cut 4-3/ 4 inches from
the sheet metal holding
the glides together.
Figure 8.6
Remove these plugs.
178
CNC Roboti cs
Take off the plugs installed on the slides (see Figure 8.6).

Chapter 8 /
The Z and Y Axes
The n cut a piece of aluminum to fit across the width of the slide
(see Figure 8.7).
Drill four holes and countersink the top of each hole on the alu-
minum used for the z-tool mounting surface (see Figure 8.8).
Figure 8.7
Aluminum z-slide tool
mounting table.
Figure 8.8
Drill and countersink
table holes.
179

Figure 8.9
Mounting holes for the
1 X 3 steel.
180
CNC Robotics
I drilled two holes on each side of the y-slide w ith corresponding
holes on the I X 3 steel used to raise the z- axls assembly fro m the
y-slide surface (see Figure 8.9).

Chapter 8 /
The Z and Y Axes
I needed room betwe en the bottom of the z-shde and th e top of the
y-slide as clearance for the acme screw bolt hol der to be mount-
ed on the underside of th e z- sltde. I util ized the holes alread y pres-
ent in the y-s lide at the bottom for the bearing block needed to
ho ld the acme screw that moves the z- slide up and dow n (see
Figure 8. 10).
The bearing block wa s too wide to fit between the 1 X 4 z-sllde
supports, so I trimm ed off about 1/ 2 inch from either side and
modi fied the bo lts I used to hold it dow n (see Fig ure 8. 11 ).
Figure 8.10
Location of z-acme
screw support bearing.
Figure 8.11
Modifications to bearing
holderand bolts.
181

Figure 8.12
Find the center of acme
screw for angle
aluminum. A equals B.
182
CNC Robotics
I used the distance from the center of the lower bearing hole to the
underside of the z-slide to find the cen ter of the hole I drilled in the
angle aluminum that holds the acme screw nul. I then drilled the
hole the screw wou ld pass through. and the holes needed to bolt
the nut holder to the angle (see Figure 8 .12).
Next I drilled two holes spaced to match the top two holes drilled
through the z- faceplate and slide-bearing sheet metal (see Figure
8. I3).

Chapter 8 /
The Z and Y Axes
With the z- slide com plete. I placed it on top of the 1 X 3 risers on
the y-slide and marked hole locat ions to match
the top and bot-
tom hole location s for the bo lts to hold the glides in pla ce (see
Figure 8.14).
Figure 8.13
Angle drilled for
mounting on underside
of z-tabte.
Figure 8.14
Z-axis mountingholes.
183

184
CNC Robotics
I tightened the bottom bo lts first. then pushed the face plate up to
align the top of the glides. After align ing the top, I tightened the
top bolts. The bolts on the bottom of the z-faceplate cou ld now be
tightened. but I left the top ones that also support the acme screw
nu t holder a little loose, as its position would need to set when the
acme screw and stepper motor are installed.
The Y-Axis
In order to assemble the y-axls, you will need the following tools
an d materials:
•
Guide rails
•
Slide from NuArc co py ca mera (or four homemade bearing
holders moun ted on an a luminum plate)
•
Carriage bolts. nuts, and washers
•
Wrench
The y-axis es sentia lly consists of the two spanning beam s on the
gantry, the bea ring sup port rails mou nted on them, and a slide
from my disassembled copy ca mera. The bearings in the slide are
new, as I was only able to sa lvage four of the bearings from the
ca mera. Because the camera bearings are the sa me size as the
new ones I bought, they are a perfect fit in the bearing holders on
the slide. To install the rails , I first put the carriage bolts in each of
the holes for the support rails (see Figure 8.15).
I made sure that I didn't run the carriage bolts too far through so
they wouldn 't interfere when I bolted the rails at either end. I
placed the rails through the bearings on the slide (see Figure 8.16)
and held the top rail in place, so I co uld screw the bolts at either
end of the rail. Next, I screwed in the end bolts on the bottom rail.
With the centers of the rails at the req uired distance from each
oth er, bolting the rail is easy. Remember that the holes you drill
need to be a bit bigger than the bolts you 're going to use, so if the
centers are a little off, it won 't matter (see Fig ure 8.17).

Chapter 8 /
The Z and Y Axes
Figure 8.15
Z-axis mounting holes.
Figure 8.16
Insert the rails through
the bearings.
185

Agure 8.17
The rail centers should
be at the bearing holder
centers.
186
CNC Robotics
13 1/2"
After the end bolts are screwed in. screw in the rest of the bolts.
but don't tighten anything up yet. The rail s should be the same
distance from the spanning beams and the distance from
the
spanning beam should allow the lead screw to ru n through the
center of the lead screw nut holder location (see Figure 8. 18).
Adj ust the distance to accommodate the lead screw. then. using a
measuring device and a straig ht edge. bring the rails out to the
same distance from the spanning beams and tighten the bo lts on
either side of the span ni ng beam to keep them in place (see Figure
8. 19).
Adjust the bearing ho lders to remove any slack. Move the y-slide
back and forth on th e guide rails and make any adjustm ents nec-
essary to ensure smooth sliding. At this point, yo u wa nt to be cer-
tain that all of your axes move easily and don't bind. You have now
completed the in stallation of the z- and y-axis on the gantry that
travels the x-axis, Mo st of your CNC machine is finished. only
lacking stepper motors to give it life. In the next chapter, you w ill
install lead screws an d stepper motors to drive each axis.

Chapter 8 /
The Z and Y Axes
Figure 8.18
Distance from spanning
beam allowing lead
screw to pass through
holes in uprights. A
equals B.
Figure 8.19
Use measurement and
straight edge to adjust
guide rail.
187


Motor and
Lead Screw
Installation
Tools and Material
•
Three stepper motors
•
Three lengths of lead screw cut to size
•
Five pillow blocks w ith bearings
•
Three acme screw nuts
•
Three nut holders (only two if you have found a copy camera
to canniba lize)
•
3 X 3 alu mi num angle iron
•
4 X 4 aluminum square materia l
•
J.5 X 4 aluminum material
•
Drill
•
Drill bits
•
Nuts, washers, and bol ts
189

Figure 9.1
Cuttingmotor mounts.
190
CNC Robotics
You w ill need to fab ricate mo tor mounts using 4 X 4 aluminum.
Cut three pieces 4 inches long (see Figure 9. 1).
X-axis
The mount used on the x- axis can be drilled in the center for the
motor shaft. I drilled a 3/4-inch hole for play and drilled the four
holes to bolt the motor to the moun t. Drill a 3/ 4-inch center ho le
opposite the motor shaft opening and li ne up a pi llow block to
mark the ho les needed to mount it on the side opposite the moto r
(see Figure 9.2l.
I wanted the lead screw to run th rough the foot of the gant ry. so I
cut a piece of 1- 1/2 X 4 inch aluminum to rai se th e holder from
the beam (see Figure 9.3).

Chapter 9 /
Motor and Lead Screw Installation
/
/
Figure 9.2
Drilling holes in motor mount.
Figure 9.3
Spacer for motor
mount.
191

CNC Robotics
I drilled fou r holes in the riser from side to side and four ho les in
the motor mount to correspond to the holes in the riser (see Fig ure
9.4).
Figure 9.4
Holes in riser and
motor mount to match.
+
i
~
t
t
,•
t
192
I fastened th e riser to the beam using self- tapp ing screws by
inserting a long dr iver bit through the top hol es to engage the self
tapper (see Fig ure 9.5).

Chapter 9 /
Motor and Lead Screw Installation
'-------------,~--~./
After bolting the motor mount to th e riser. I measured the distance
from the center of the 3/4-inch hole in the mount to the beam (see
Figure 9.6).
Figure 9.5
Installing the riser.
Figure 9.6
Lead screw center
measurements.
193

Figure 9.7
Marking nut holder
location on angle
mount.
CNC Robotics
Cut a piece of angle aluminum on w hich to mount the acme screw
nut. Place the angle aluminum on the foot and mark the center of the
lead screw hole using the previous measurement (see Figure 9.7).
Dr ill the lead screw ho le and holes for mounting the nut holder as
well as four holes for bol ting the angle aluminum to the gantry
foot. Tran sfer the holes' locations to the gantry foot and drill them
ou t (see Figure 9.8).
Figure 9.8
Mou nting position of
nut holder on gantry
foot.
194
..
-

Chapter 9 /
Motor and Lead Screw Installation
Mount the nut holder on the angle and run a nut onto a 6-foot length
of acme screw. Tighten the nut into the holder (see Figure 9.9).
At the motor end, install a bearing on the outside of th e motor
mount and push the acme screw into place (see Fig ure 9.10) .
Figure 9.9
Acme screw in place.
Figure 9.10
Installation of bearing
at motor mount.
195

Figure 9.11
Installations of riser
and bea ring at end of x
travel.
196
CNC Robotics
At the non-motor end of the beam. install another riser and the
bearing holder with bearing. and insert the lead screw through the
beari ng (see Figure 9.11).
Adjust the length of screw com ing through the bea ring at the
motor mount to allow for the flexible shaft coupling that will con-
nect the motor to the lead screw. Make sure the lead screw is the
sa me height from the beam at either end. and shim it if necessary
(see Figure 9.12).
Tighten the lead screw to the bearings with the setscrews. Turni ng
the screw by ha nd shou ld be really easy. without binding. If the
screw doesn't tu rn easily, ad just the position of the lead screw nut
at the gantry foot until the screw will turn easily thro ughout its
travel. then tighten the nut ho lder to the foot (see Figure 9.13).

Chapter 9 /
Motor and Lead Screw Inst allati on
Figure 9.12
Check lead screw
position and shim.
Figure 9.13
Adjust position of nut.
197

Figure 9.14
Flexible shaft coupling
installed.
Figure 9.15
Motor installed.
198
CNC Robotics
Head back to the motor end an d place a flexible coupling on the
lead screw (see Figure 9.14).
Insert the motor shaft th rough the 3/4-inch hole into the flexible
coupling a nd a lign the motor wit h the lead sc rew. Bolt the motor
in place an d tighten the set screw at the bearing (sec Figure 9.15).

Chapter 9 /
Motor and Lead Screw Installation
If you did these steps correctly. the motor shou ld be able to move
the gantry fro m one end of the x- axls to the other w it hout bind-
ing. If the lead screw binds. the motor will stall and lose steps so
that w hatever yo u are try ing to make will not turn out as expect-
ed. The step-syn motors are strong enough to ru n this axis at 10
inches per min ute w it hout stalling.
V-axis
Run a piece of acme screw 55 inches long through one side of the
gantry ho le and th rough the nut ho lder location on the y-s lide.
Turn a nut onto the acme screw and insert it into the holder loca-
tion at th e y-slid e (see Figure 9. I 6).
If your threads match. tighten the nut, or drill a coup le of holes
beside the nut and insert two screws to keep the nut in place (see
Figure 9. I 7).
Figure 9.16
Inserting acme screw.
199

Figure 9.17
Screws holding nut in
place.
Figure 9.18
Insert lead screw
through a bearing block.
200
CNC Robotics
Before you send the screw through the next gantry upright. put it
through a bearin g block (see Figure 9. 18) .

Chapter 9 /
Motor and Lead Screw Installation
Also install a bearing block on the outside of the up righ t opposite
the motor end (see Figure 9. 19).
I used self- tapping screw s to hold the bearing blocks in place. You
w ill need to move the acme screw at eit her end to find a po sition
that allows the screw to turn easily. I started this qu est by check-
ing the dista nce from the top rail to th e top of the screw at the nut
(see Figure 9 .20) and mad e the ends of the screw at the in side of
the uprigh ts the same. but it still took a w hile to get it properly
aligned.
Figure 9.19
End of travel bearing
block.
201

Figure 9.20
Rail-to-screw
measurement.
Figure 9.21
Holes in mount.
202
CNC Robotics
W ith the acme screw prop erly ali gned. take another motor mount
and drill out a 3/4-i nch hole on two opposing sides. Also drill
mounting holes for the motor that are matched on the opposite
side for self- tap pers to fasten the motor mount to the upright (see
Figure 9.21i.

Chapter 9 /
Motor and Lead Screw Installation
Place the motor mo unt with the lead screw through the ce nter of
the 3/4-inch hole and se lf tap it to the upright. Place a flexible
co up ling on the lead screw a nd insta ll the motor, aligned with the
screw (see Figure 9.22).
Z-axis
The lea d screw bea ring is already installed, as are the nut holder
and the nut. Cut a piece of acme sc rew 14 inches long a nd screw
it th rough the nut and into the bearing. Tighte n the bearing set
screw to hold on to the lead screw. Drill a 3/4- inch ce nter hole
through both sides of a motor mo unt and drill the motor bo lt holes
(see Fig ure 9.23).
Figure 9.22
Motor installed .
203

Figure 9.23
Holes to mount motor.
Figure 9.24
Motor mount location
on y-sllde.
204
CNC Robotics
At the bottom of the motor mount, drill two holes to take advan-
tage of the hole s in the y-s lide to bolt the mount through (see
Figure 9.2 4).

Chapter 9 /
Motor and Lead Screw Installation
Bolt the mount to the y- slide, making it as square as pos sible to
th e lead screw. Insert a flexible cou pl ing on the lead screw and
mount the moto r aligned w it h the screw (see Figure 9.25).
1
Make sure the screw turns easily. W hen it does, tighten the bolts
holding the angle aluminum on
w hich the
lead screw
nut is
mounted (see Figure 9.26).
Figure 9.25
Z motor installed.
205

Figure 9.26
Tighten nut holder
bolts.
CNC Robotics
Limit Switch Installation
The too ls and mate rials required to install the limit sw itches are as
follows:
•
6 limit switches
•
I" alum inum angle
•
Drill
•
Hacksaw
•
Nuts and bolts
•
One pair shielded cable
206

Chapter 9 /
Motor and Lead Screw Installation
•
Connectors for limit switches
•
Connectors for the interface board
The use of limit switches is optional for this machine, but you can
choose to insta ll them as I did. W ithout limi t switches installed, the
machine has no way of identifyi ng the boundaries of the usable
area of the table. If your machine isn 't told to stop, it will continue
to travel past the boundaries of the usable area. It won't kno w that
it has stopped moving but the motors w ill be trying to turn the
acme screw and losing steps w ith every try. Th is will th row your
positionin g way off. The machine w ill not be able to go back to the
home position you have established. Of course, leavin g the bound-
aries should only occur if the th ing you want to make is wider or
longer than your machine can handle. You will be able to do this.
See if your project is outside the limits of your table after your file
has been imported into KCam. KCam w ill plot the file over the
dimensions you have input pertaining to the size of the X- , y-, and
z- axes. As an accuracy precaution, limit switches are beneficia l.
Also KCam 4. 1 wil l not let the mac hin e manuall y home the axis if
limit switches are not present. I located the li mit switches used on
this machine at a surp lus store. They aren't really microswitches
li ke the kind used in plotters. I think they came out of wash ing
machines or dryers; The first clue was the name Speed Queen on
the side of the switch (see Figures 9.27 and 9.28).
Figure 9.27
Side one of limit switch.
207

Figure 9.28
Speed Queen side of
limit switch.
CNC Robotics
These Speed Queen parts are perfect as limit sw itches since they
are normally open, and close when the plu nger has been pushed
in. Each of the axes requi res two switches-one installed at eit her
end of travel. The switch needs to make contact wit h part of the
moving axis before the axis gets jammed up.
X-axis Limits
On the x-axis motor end. two holes are needed to bolt the limit
switch to the top of the motor and bearing mount (see Figure 9.2 9).
Figure 9.29
Location of x home limit
switch.
208
"

Chapter 9 /
Motor and Lead Screw Installation
Even though the switch is on a bit of an angle. it still ma kes con-
tact with the gantry and closes as nee ded. For the limit at the end
of x travel. I made a mount to bolt the swi tch to; th is in turn is
screwed to the bearing ho lder. It is insta lled on an an gle to allow
the plunger to make contact with the ac me screw nut holder at the
front of the gantry foot (see Figure 9.30).
Y-axis Limits
The switch at the home position of the y-axis is mounted on a
piece of l-Inch angle aluminum that is screwed to the inside of the
gantry upright. enabli ng the plunger to make contact with a bolt
protruding from the side of the y-sli de (see Figure 9.31).
Figure 9.30
Limit switch at end of
x-axis trave l.
209

Figure 9.31
Y-axis home position
limit switch location.
Figure 9.32
Switch at end of y-axis
travel.
210
CNC Robotics
The y-axis end-of- travel limit switch is also mounted on an angle
bracket. w hich is screwed to the ins ide of the upright (see Figure
9.32). Self-tapping screws are usually useful here.

Chapter 9 /
Motor and Lead Screw Installation
Z-axis Limits
To insta ll the home posit ion limit sw itch for the z-axls, a spacer is
needed to move the plunger into a position that will allow the
acme screw nut holder to make co ntact. The spacer is 1/2- inc h
alum inum ba r cut the size of the switch body. Drill two holes in
the ba r that co rrespond to the holes on the sw itch body. Next, dr ill
the same hole pattern in the I X 3 riser mounted on the y-sll de at
a position that allows the most z travel (see Figure 9.33).
The end-of- trave l limit switch for the z-ax is is installed wit hout a
spacer beca use the bea ring block mou nted on the y-sllde wo n't
allow one to be used. Drill two holes in the I X 3 to allow the
switch to be installed. Additionally. drill a hole above the posit ion
the body will be in. so the wire used to attac h this limit switch ca n
be fed up through the I X 3 to the home limit switch (see Figu re
9.34).
Figure 9.33
Z-axis limit switch at
home position.
211

Figure 9.34
Position of the z-axis
end-ot-trevel limit
switch.
Figure 9.35
Extension to activate
limit switch.
212
CNC Robotics
The problem encountered by mounting the sw itch directly to the
side of the I X 3 is that nothing w ill hit the plunger w hen the z-
axis reaches its end. To resolve this challenge. make an extension
fro m a piece of I I S-inch thick by 3/ 4-i nch w ide alumin um . Dri ll a
hole so that one of the bolts hold ing the acme nut ho lder in place
can be used to install it. Cut th e corner on an angl e to give the
extension
more surface area that can make contact w ith the
plunger of the li mi t sw itch (see Figure 9.3 5).

Chapter 9 /
Motor and Lead Screw Installation
Both of the switches on each of the th ree axes are w ired in paral-
lel so that w hen either of the plungers is engaged the machi ne w ill
stop moving. Only one pin of the paralle l port is used per axis so
the switches need to be wired as in Fig ure 9.36.
Connect to Jp2,3,4 or 5 on interface board
The wire connecting the end-of-travel switch on the x-axis can be
fed through the frame beam to the home limit switch and the end-
of-travel y- axis switch wire can be fed through the top spanning
beam of the gantry to reach the y home switch. At all of the home
switches. connect enough wire to the poles to allow the machine
to move to any position on the working area of the table without
Figure 9.36
Wire the axis limit
switches in parallel.
213

Figure 9.37
Interface limit switch
connection locations.
214
CNC Robotics
being under stress. The distance of your electronics
from the
machine w ill also determine the length of the cable. At the end of
each cable install a two-hole connector to fit the header material
used on the interface boa rd. Plug each wire into either lp z, 3. 4. or
5 of the interface board and make sure you open the LPT setup
window in KCam so tha t you can assign the correct pin for each of
your limit switch circuits (see Figure 9.37).
Your CNC machine now has all of the motors. lead screws, and
li mit switches ins talled. The Workshop Bot is comp lete. Chap ter
10 w ill show you w hat kind of file s you' ll need to run
yo ur
machine and how to make them.

File Creation
and KCam
GZO (;40 G80
G90
G92 XO YO 2 0
S1800
H0 3 US
GOO 2
0 . 2
~ 0 Size ofmachined area {not inc, cutter
120
X 110
\
,_
il_
Deplh
105
KCarn CNC Controller Software
To complete th is section of your CNC robotics project , yo u will
need to have KCam installed and configu red for your machine. If
you haven't already installed KCam, visit the Kell yware Web site at
www.kellyware.com and download the demo version of KCam 4.
The demo will ru n fully functional for 60 days, w hich should be
more than enough time to fi ne- tune your mac hine setup and start
working on all the projects you conceived w hile building the work-
shop bot. Chapter 5 has exp lained setting up KCam in order to test
your driver boards. In testing. it really didn 't matter if all the
parameters of your machine had been established, but it now
does. Open KCam, click on Setup and open the Table Setu p win-
dow. Ensure that the number of steps per inch and the physical
dimension for
each axi s on
your machine are correct.
Next,
uncheck the Limit Switches Disabled button, click Apply and close
the window (see Figure 10.1).
215

Figure 10.1
Table Setup window.
216
CNC Robotics
...
~
-
:..J<Ul
:...JgW
"r
,.
"
E~;,,===-· ...
.
""
"
r. __
r __
"_~f_piioxu
3
"
- ,
- ,
-,
--
-~--
....._p.iJ"s-
-.-. ~~
r v_~
-~~-
_ ~~ _
_
l .. 4t>~_ - '-
... _~
-- ~-- ...-----J
....Xl
r:
~
!_~- ..._
~_
eod_ .-- - " ,
Xy.-.dz....
T~'jlr-... -
-" ,
;:::
-~
.- ..-- ..~ Ii'
e---------+---l "-.. ~
"- rr....
_c.../iT_
_A!~
f1....s..or ...
_
ra--~.....
...~ .--
r-
-- ~1IW/iOO3"""'"
_r...._
.... ~f_
...tOOl"""'"
"
- -
.-r;;-....
r_z,-*,-
_xr---
~~
,-
jii""""" ...
r _ _ CInot
.....vr-_
r-r-
~
rLaO__
pr-AI
rOoMtOt__ _zr-_
-
>------t-i
,-
r (_z.....Jog--..
~
'----+-
~
I ~
C-.c" i
, -
,
t
-;
f--
!
~
,
~.-
:{)~ T"'"
r~ 1 ~ 12 !t." !~ 1~· ' 1~ @16!BI@!B!51!@!tilhp 3 ufii)3 vf\"iiil .:::J
I
WJ9Cf04li,;o,
SolO~d___
If you are using surplus stepper motor s li ke the step-syn motors
on this machine, the maximum rate of travel for each axis w ill
probably be around 15 inches per minute. You w ill need to exper-
iment to di scover the fastest rate of travel for your machine. When
you are running the machine too fast, the step per motors w il l start
to skip turns. With steppers, the faster you ru n them, th e lower
their torqu e becomes and the load they can move decreases dra -
mati call y. Keep in mind that every time you change the rate of
trave l you need to run the system timing ut il ity. Next , click on
setup and open the Port Setup w indow. Choose w hich pins yo u are
assigning to each of the drivers for their step and direct ion signals
and w hich pins you are using for the limit switch circuits (see
Figure 10.2).

Chapter 10 /
File Creation and KCam
~iii~~iJi:iii:::::::: ::r====== ~-~
!' !i" !
Figure 10.2
~
Port Setup window.
«
~ ­
I~
~-
, ~ 1--
"r
be '----
Apply the sett ings and close the w indow. Run the syste m ti ming
utility again by clicking on Setup and opening th e System Timing
window. Click on Start and wait for it to fini sh before doing any-
th ing else (see Figure 10.3).
~£i;ili:i:ii:i:::=::::::::::::r;;;;;;~-~
!"i"'
Figure 10.3
~
System Timing window.
"211ooHooli·
DI'>MpoWITotfo
."IBI .l b.I ~1 51 ~ I -'!I-'!Im"I" I"I" I2J ' 'Cil""'3''''31;]
217

eNG Robotics
Click on the View button and open th e CNC Controls window (see
Figure 10.4).
Figure 10.4
_I",,,,
eNC Controls window.
,~ --
8 ~
f '~
:. ~
;&
"C
L
I
Begin moving the X '- and y-axes of your machine and note the x in
the plot w indow. The x indicates w here on the tab le the center of
the cutting tool or pen is located. The z position is ind icated by the
ima ge of a cutting tool that raises and lowers as yo u jog the axis.
You want your machine's x- and y-axes to move in the same direc-
tion as the x in the pl ot window and your z-axis to move up and
dow n as the tool image (see Figure 10.5).
If you find tha t the machine is movin g in the opposite direction,
reverse the order of the motor wires connected to your driver
board. To determine the exact size of the machine's working area,
move each axis to its home positi on and zero out that posi tion in
the CNC Controls window. Now move each axi s in turn to the end -
of-travel switch. The length of each axis w ill be displayed in th e
correspo nding distance-traveled box . You may not wa nt to hit
yo ur limit switch es every time you home the machine; in this case,
set the zero positi on
1/ 4-inch before the home position
limit
switch. You can set hom e or the zero pos ition anyw here yo u pre-
218

Chapter 10 /
File Creation and KCam
Ii" ,
· j"H
[Ioc.a"t-~_v__.. _!IOO'
.
--
.
__1_1""',"001
, -
xmmlll~
.
-
Z Position
YBImDII...;"j
-:
fiEi
,
• z~~
~
i--~--'
!
fl
I~ iiiil3
,..,.- 1 ~, . I
., -
i--
1_ -+ -
+-
__ ,.- __-1 __ --1-
-
~
~
•
""'10~ I"" lOlI
I
1- -
L-t- t - +-,-:-'--'---
....... 1....·""""l r-.. I.."""'·(.I...·1
.
t.
~t 'M ''j""; .
'!-.J ~ ~ rJ '';:'- 1
,
-.J
~ -.J - '1
,
.
A.T""
I ,
I
r-
•
-.J-.J-.J ~.:!d
_ .. -+ --
~. --
-c--- -
,
.
jr,"' ><ll l'S '1'lj l'S Zll ~_
...;"j
~--_.
r
r--
!
,
";'1~I...ar~
o.=J
-
-
-+-
-
~
z_,...
3:1"-"_
f~1 f.:! ?IhlallI ~ - 1"
1 5'1
fll ltl' l~1 L'JI ~l el!Vh~3 ufijij"3v[ii)3.:::J
lII(l.lOIHl<2.
_
., Soo.c> WaAJl_
fer on the table. but KCam w ill assume that the table remains
defined by the dimensions you entered in the Table Setup window
and that the tool is at the lower left corner. This is handy if you
wa nt to make a coup le of something from one piece of material
without rewriti ng the G-code or generat ing anoth er file that has
mul ti ple parts to import. Just jog above the first series of cut s. zero
the machine. and run the prog ram again,
Keam File Requirements
Now that your machine is working. yo u wi ll need to generate files
that w il l be opened or imported by KCam. KCam wil l open G-code
files directly and import DXF. Exellon, HPGL. or Gerber file types
(see Figure 10.6).
Let's start w ith the G- code, W hen KCam imports a fil e. the pro -
gram translate s and generates the G-c ode that represents the
image of the imported file, It all boils down to G-code. So what is
G-code? Simply put, G-code is a set of commands that tell the
control software w here to send the tool and w hat to do w hen it
gets there. After interp reting the G-code. the softwa re will send
Figure 10.5
Plot window indicates
position on the table .
219

CNC Robotics
...
Q.XF File
E.xcellon File
!::!PGLF"ile
Qerber File
§;;=;;;;:===Ii;:et:,:;l.IP [unctions
~ndow
L~~ ~
Airstream.pIt
test files.plt
SDc~ano~ 1mchb~vtt
CLEANOUTsquig.pIt
reiSedN,plt
cnc-bmp.GC
crtcrobotlcs-wde-Hoc
cncrobotics-wide.GC
crcroboncs-ott-endott.GC
cncroboncs-cft-z.oc
E.xportFne
h- KCam 4
Files Ke arn can work
with.
Figure 10.6
eTint
E.xil
signals to each axi s to move in the required direction as many
steps as are required to travel the distance. A G-code file can be
written in a text editor or in the G- code w indow in KCam. Aside
from G-code, th ere are also M-code fun ctions. M-code is used
to control the behavior of the program and machine rather than
controlling the axis movement. Tab les 10.1, 10.2, and
10.3 li st
G-code and M - code commands that KCam can understand.
Table 10.1
G-code
Description
G-Code Commands
GOO
Rapid Traverse
Gal
Normal Traverse
G02
CW Arc
G03
CCWArc
G04
Execute Dwell Time
G17
XY Plane Selection
(continued on next page)
220

G-code
G18
G19
G40
G41
G42
G45
G73
G80
G81
G82
G83
G90
G91
Pxx
Fxx
M-code
MOO
M01
M02
M03
M04
M05
M06
M07
M08
M09
M13
Chapter 10 /
File Creation and KCam
Description
XZ Plane Selection
YZ Plane Selection
Cancel Cutter Diameter Compensation
Start Cutter Diameter Compensation Left
Start Cutter Diameter Compensation Right
Normal Traverse
Drill Cycle
End Drill Cycle
Drill Cycle
Drill Cycle with Dwell
Drill Cycle
Sets Absolute Mode
Sets Incremental Mode
Sets Dwell Time to xx
Sets Feed Rate to xx
Description
Program Stop
Optional Program Stop
Program End
Engage Spindle Relay
Engage Spindle Relay
Disengage Spindle Relay
Tool Change
Mist Coolant On
Flood Coolant On
Mist and Flood Coolant On
Engage Spindle and Coolant
(continuedon next page)
Table 10.1
G-Code Commands
(continued)
Table 10.2
M-Code Commands
221

Table 10.2
M-Code Commands
(continued)
M-code
M30
M60
M98
CNC Robotics
Description
Program End and Reset
Program Stop
Call Macro subroutine (not available in KCam 4.0)
Table 10.3
M-code
Description
User-defined M-codes
Mxx
Engage user-defined output
Mxx
Disengage user-defined output
Mxx
Engage user-defined output
Mxx
Disengage user-defined output
Mxx
Engage user-defined output
Mxx
Disengage user-defined output
Note: "xx" represents the number specified by the user,
If you want to know more about the process of w riting G-code. I
suggest a trip to the local library or bookstore ; pick up a volume
dedicated to CNC programming. Most of these G- cod e and M -code
commands are self- explanatory and you will learn more about
how they are useful to you as you experim ent. The best way to
understand how the G-code works is to create a file in a drawing
program and import it into KCam. then go through the code and
see how it is put together. That brings us to the import function of
KCam .
How to Create a File to Import
The two file formats I have been generating are HPGL and DXF: th e
former is more frequently used than the latter. HPGL is an abbre-
viation of Hewlett-Packard Graphics Language. a command language
to control plotters and printers. An HPGL fil e is onl y two- di men-
sional, and w hile KCam imports this file ty pe it uses the informa-
tion in the Table Setup w indow to generate the cutt ing depth and
222

Chapter 10 /
File Creation and KCarn
tra vel pos ition for the z- axi s. KCam w ill use this information eve ry
time a file is imported, so if you find that a z position is either
too deep or too shallow, the cutting or traveling depth in the
Table Setup window w ill need to be altered and the file reimport-
ed. Th e changes made to the table setup will not be represented in
a G- code file displ ayed in the editor window- the file must be
reim po rted for the G-code to change. A DXF file is a Data Exchange
File created by the software pu blisher AutoDesk for AutoCAD soft-
ware. DXF files are also two-dimensional graphics files supported
by virtually all CAD (computer aided design) program s. I have
been using CorelDraw to make my file s. CorelDraw is easy to use
and will export your drawings as either HPGL or DXF.
CorelDraw
You need to gain access to a version of CorelDraw by purchasing
th e software or by
using a fr iend's computer on w hich it is
installed. Open CorelDraw and create a new grap hic (see Figure
10,7).
",",,-~-~-----=--=--=------~-~--_
d0
Figure 10.7
_
Create a new graphic in
CorelDraw.
,
.:'.
223

Figure 10.8
Layout options.
224
CNC Robotics
The default page dimensions are letter size (S.5 X
ll-In ches) in
portrait layout. Let' s say you want to make a sign with letters and
numbers and the sign should be 10 X 20-inches. Go to the Layout
button in Corel Draw and from the dropdown list click Page Setup
(see Figure IO.S).
FiB!
,. 1'6 l!
--
,..
When the Options window opens, change the layout to landscape
and the width and height dimensions to 20 and 10 inches (see
Figure 10.9).
Now th e page reflec ts the size of the sign that will be made. You
will find that when you import into KCam a n HPGL file created
with CorelDraw, KCam plots th e objects you place on th e page
from last created to first. This will affect how long it will ta ke your
machine to run through the prog ra m. For a first test , pla ce paral-
lel lines across the page, all starting from the left horizontally to
the right of the page, stacked from the bottom to the top of th e
page (see Figure 10.10).

".
'.
o
o
'"'"-,,
-".'.
k· -"-O_.
~, -.$10-...
~
·.·· ...-.'0...'''....
Chapter 10 /
File Creation and KCarn
£01'''
. ~~
:: .::::":1:-
:;p
H~
=-:~
CJ
IlJo<4
ce
~ .-
~"f"",,_ ,.....c-POl!'
LJ
<'
::;
":,
.
•
. .
.14.,
Figure 10.9
Page options window.
.....,;,,;,111'<__ ""4"" 1
flI~ """
==== ======\lo.<6;o.S_H
......
:"- - - - - - - -;- - - - - - - -
J
Figure 10.10
Drawing parallel lines,
225

CNC Robotics
Save this graphic as linetest.plt by exporting it as an HPLT file. To
expo rt fro m CorelDraw open the File dropdown menu and click
Export (see Figure 10.11).
Figure 10.11
Click Export.
g 3. ,. 'Mi ".'
r"::[<""',..-""
e;,.,"' '''~'''; ;''~''''I-__ in ~
P,_i>F.. ............. ..,~ 1
~
[ ..,.
~< . aJQi ,om
,'hC. Jl!:! \?
-
!*Q4r [-:",~ --/~".:::
. ~
e"-
,..
0.1.'
.
CI
- ~
"
"
"
,
~ .--
~
-_.
••
•-
,.
v
r
bpce,,,,·,,""''''' ""''''' """'"
,
_.
~ '"
.'.
h;i'< """'''
-~
. ,
.
>. ,,_,"a_ -.
~
"
"-"""'0_,
• ~ ,. ""
x
~
~ -,,,
-~..~--~-----_.~--_ ._.~~
~
~-~
.J
1_""""""'"
.
_
.
~.•._..
_
~
-
-
-
~
.__._-_ .-
.~"""_ ."'"
1_...........
.
1"""""'*
s·
~-
~.
.
.
'"
"
,:
I
.J
J
c,
, ,
. ~
l'1
226
W hen the Export window opens, name th e file and choose PLT·
HPGL Plotter File as fi le for mat, and click the Export button (see
Figure 10.12).
A new w indow w ill open, containing HPGL export options. Ignore
the Pen tab and click on the Page tab. Make sure this w indow is set
up as in Figure 10.13 with Scale at 100%, Plotter Origin as bottom
left, Orientation as landscape, and verify that the page size is correct.

Chapter 10 /
File Creation and KCarn
Figure 10.12
Export window.
• c. 'in?
" 'i' D'"'
3 ~K~ : :
~ .--. .
.tiC)
100:%
. g ~ g : :: 0 0:-':' -..
F1--fl-
il
sra
,-
',;.i T...
'r *'diM GJ·
'....
r
~
- -- _ ._ ~. _ - - ~
f lo""""
-~
~ ,
~~~
-_.,'--
-
----- ~ f"''''!>Ot
j IlF .J IFfB....
3
U"","<,«=l
~
"" ~
CG>.l·~..
(;,~t.I.. .&
fU
- ~",,*,,""' P1CT
_ ..-
- - - -
M~
•. ~:~~.
--.
~ _"""' _.. ""E _50
, op """", ,,,,,,,,",,,,-,,,,,,,,,
IIf · r"" ' ,.." ....
$_...,..._
IYI •r.••<PI<0I0.r...NT,__
Cl'T-Co«IPHOlOfW NI 71fJ1__
I
IF'(;-JFt Ga•.--
Bt.lP ·w"""".e_
I
In.
.
_
.
Ci<l<... _
_
Iot".-¥~_ '''''''' _'' """,,, S''' ''''' '''...&
j /241 . 151?5 1
s"",,,,o,Oj
HPGL Export, page
setu p.
Figure 10.13
_.
~ c, llIlll1
• ~w
: ; :; ~!f: < :
I'«>
1" \1< l.-.d.""";"
"'~ lIoliono
'
\l~
l00D
~ \
"t"'_
Q IiiH iHJ
l!',
. g ~ ~ :
•
227

CNC Robotics
Next, click the Advanced tab, confirm that Simulated Fill is set to
None (see Figure 10. 14), and click on the OK button,
Figure 10.14
HPGL export, Advanced
window.
---=-====~~F
?
"
:,
J
228
You have now exported the ltnetest.plt graphic as a plotter file,
Open KCam and import linetest.ptt using the Import HPGL button.
After KCam has plotted the program the G-code will look some-
thing like this.
NOOO [KCam Conversion]
NOOl [Original File: linetest.plt]
N002 %
N003 G90
N004 M03
N005 GOO ZO.5
N006 GOO XOOO.OOO YOOO.OOO
N007 GOl X001 .016 Y009 .144
N008 GOO Z-0.25
N009 GOl X019 .304 Y009.144
NOlO GOO ZO.5
N011 GOl X001.016 Y008.128

Chapter 10 /
File Creation and KCam
N012 GOO Z-0.25
NOB
GOl X019.304 Y008 .128
N014 GOO ZO.5
N015 GOl X001. 016 Y007.112
N016 GOO Z-o.25
N017 GOl X019.304 Y007. 112
N018 GOO ZO.5
N019 GOl XOO1.016 Y006.096
N020 GOO Z-o.25
N021 GOl X019.304 Y006.096
N022 GOO ZO.5
N023 GOl XOO1.016 Y005 .080
N024 GOO Z-o.25
N025 GOl X019.304 Y005.080
N026 GOO ZO.5
N02 7 GOl X001.016 Y004 .064
N028 GOO Z-0. 25
N029 GOl X019.304 Y004 .064
N030 GOO ZO.5
N031 GOl XOO1.016 Y003 .048
N032 GOO Z-O.25
N033 GOl X019.304 Y003 .048
N034 GOO ZO.5
N035 GOl X001.016 Y002 .032
N036 GOO Z-0.25
N037 GOl X019.304 Y002.032
N038 GOO ZO.5
N039 GOl XOO1.016 Y001.016
N040 GOO Z-O.25
N041 GOl X019.304 Y001.016
N042 GOO ZO.5
N043 GOO XOOO.OOO YOOO.OOO
N044 M05
N045 M30
Every x- and y-axis coo rdinate after a z-ax is move to 0.5 inch is a
travel move without culling becau se the tool is 1/2-inch above the
surface of the material. assumi ng the surface is at 0.0 and every
229

CNC Robotics
mo ve fol lowing a z-axis move to - 0.25 is a cutting or plotting
mo ve w ith th e to ol at 1/4-inch below the surface of the material.
With this in mi nd, notice how KCam goes about plotting th ese
lines. KCam starts at the begin ning of the last li ne dra wn on the
page and proceeds to travel back to the beginning of every previ-
ous line before it drops the z-ax is down to cut. Thi s doubles the
amount of time it would take your mach ine to complete th e pro-
gram. Considering all
the
wa sted travel time,
see the
plot of
Iinetest.plt in Fig ure 10. 15.
. 1,,' ><1
em
'0''''
=~~ E'*'JS....ror--
i
~
~..!!J S><o ' u
s-c... ~
--~---it! :::: ~
T,ovd r;r:-,I~ ~ w....:r:r-.JI't<
NOCOIK'-' ''''''''-'l
NIJ)11O_
r"
_
pll
"~ ,
i
~~~~~II~i~_
NOOl"~
NOO4 ~W
NOO'lOOJZO~
N<n GOO>UlJCOO'rUXlOOJ
NOOIG011ID 1 01G\'W9 ' "
N(OI "ooZ-(I.<'I
NIm I] U1X01 ~JJ4\WJ. '"
j-._- --I III I~~~ ~Zi~~ 016YOOi1 128
N012 GOOZ-ll<,\
N013GtllX01H'J4Y003.1:1l1
N011GOO1ll5
NOI, (;(]1Nll lO I6YOO1.111
NOl£GOO Z·025
NJI/ omXl)l g.:ll4 YOO7.111
N:l1BGOOZl).5
NJ19 Gm:xllJl01 6 YOE0 9li
N02lJGOO Z-Q<,\
N!l1 1 G01 X01 ~3J4 YOE >Hi
NDZ1 GOOZU5
NJ23 GCl1 X1ll1.016Y005 Wl
" 02. " OOZ.O.25
N02'iG 01 X01UlIY005 1J81
N026GOO ZO.5
~~ ~~~~OI6 Y004~
:-
~'E'l ~~ ~01_' :JJl Y0J4 ~
::J
R"",... N« j
_ ;." I
r_ ' I
O«....f""""'
I
How Keam plots
linetest.plt.
Figure 10.15
When KCam imports a file, it plots cutting lines as red and tra vel
lines as blue in the plot window. But w hen an HPGL file is import-
ed, most of the tra vel lines are also red. To change the tra vel lines
from red to blue, use thc G-code w indow and edi t Gal to GOO at
every x and y coordinate command following a z move to travel
depth. After yo u are finished editing, click the Compile bu tton at
the bo ttom of th e Editor w indow and the plot w il l be regenerated
with tra vel lines blue. Of course, this isn't a problem if the G-code
file is sma ll, but it becomes very impracti cal if the file con sists of
thousands of li nes. The co lor of the lines plott ed in the plot w in-
dow won't affect the actual movem ent s of the mach ine needed to
230

Chapter 10 /
File Creation and KCam
create what the file represents, it 's just nice to have a we ll-defined
graph ical representation of the movements the machine w ill make
so that yo u can better generate files . Next, open Core lDraw again
and create another graphic called linetest2; but this time, start
drawing the lines from th e top right corner across the page to the
left and start the next line from the side of the page at w hich you
ended the previous line. Save this file as Iinetest2.plt with the same
HPGL options as the last file. Import linetest2.plt into KCam and the
G-code w ill look like this:
NOOO [KCam Conversion]
N001 [Original File: Iinetest2.plt]
N002 %
N003 G90
N004 M03
N005 GOO ZO.5
N006 GOO XOOO.OOO YOOO.OOO
N007 GOO X001 .016 YOOO.OOO
N008 GOO Z-0.25
N009 G01 X019 .304 YOOO.OOO
N010 GOO ZO.5
N011 GOO X019.304 Y001.016
N012 GOO Z-0.25
NOB G01 XOO1.016 Y001.016
N014 GOO ZO.5
N015 GOO X001 .016 Y002.032
N016 GOO Z-0.25
NOH G01 X019.304 Y002 .032
N018 GOO ZO.5
N019 GOO X019 .304 Y003.048
N020 GOO Z-0.25
N021 G01 X001.016 Y003.048
N022 GOO ZO.5
N023 GOO X001.016 Y004.064
N024 GOO Z-0.25
N025 G01 X019.304 Y004 .064
N026 GOO ZO.5
N027 GOO X019.304 Y005.080
231

232
CNC Robotics
N028 GOO Z-o.25
N029 G01 X001.016 Y005.080
N030 GOO ZO.5
N031 GOO X001. 016 Y006.096
N032 GOO Z-O.25
N033 G01 X019.304 Y006.096
N03 4 GOO ZO.5
N035 GOO X019.304 Y007 .112
N036 GOO Z-O.25
N037 G01 X001.016 Y007 .112
N038 GOO ZO.5
N039 GOO X001.016 Y008.128
N040 GOO Z-o.25
N041 G01 X019 .304 Y008.128
N042 GOO ZO.5
N043 GOO X019.304 Y009.144
N044 GOO Z-O.25
N045 G01 X001.016 Y009.144
N046 GOO ZO.5
N047 GOO XOOO.OOO YOOO.OOO
N048 M05
N049 M30
The lin es plotte d in the plot w indow will look like Figure 10.1 6.
No tice the difference in travel. How you draw in CorelDraw should
be considered if you wa nt to maximize the efficiency of your
machine's movements. Let's go back into CorelDraw, and using the
same size page, type some numbers and letters. Type "McGraw -
Hill I 2 3" or whatever else yo u choose (see Figure 10.1 7) .

Chapter 10 /
File Creation and KCarn
,...
lJ<W __
E__
_
.
pop
'Ni x!
i=:
-,..
c
. ~
Sl-., S>oo<"---- E~_ r.r_
..
-
~
'~.... .£J.!tJ - - Q
"
-~
"
-~
--i
h'S!<l» 5ll
.-
,~ -
~
;
l-
--- ~
-J~-_.---
,_~Ft<
C~~ f""
"
-
"..~-
_ ~F" _ <"l
l-
E
'
~=:J
"~ ,
'"
,e. #s_~-_-_--,___... -,.
"
-
NO(lol~ OJ
OfIXJ5GOOzos
'=
__ GOOXWlWl YOCll OOl
I:~--__
=.-
:~ -'_~~-~-~J
mu7 GW:-.w111l6YOCl1OOl
NWl GOO Z-lJ.:1'5
'+
NOO'J GU1xmS. :ll4 Y11lJOOl
-
-
"010 GOOZ05
~=~ - ~~~l - ==L-~=-__
NOll GOO xa13 :ll4 TW10"
N612GOOZ-lJ.:1'5
N01JGlltl<OOUn& TWlO1li
r
m
.
~1iOO XW1 . 1Il & YW2 0::12
iGOOZ-ll25
. '
7GlltX01S:JJ<YW2012
8 1iOOZQS
"
9GWXDl!JO<'lUU 00I
'C'O IiCllZ .Q2'I
"
Glll:GJl.IDI ''lUDOOI
=~.
.-
IiCllXOOlOl &'to:lOOI\oI
IiCllZlI.:'!I
.
liCl>acUJo'ttOl"'"
=~.
I"
f--
6CDloa'!:JJ4'1tQ!a.l
foOOZ":".i
L
_~~01ntlZ08ll
"
- ,~
:(;_
1_
-
.... I~~
l~m2p"'.l~1f'1 ~1
:;j 1~ 1 5 1~ IB I~ 1 elel- r~ ufii~ vlaiil ~
-,-
I
--
Figure 10.16
Kearn plot of
Iinetest2.plt.
'3 +i .
' 2'"'
.,
Figure 10.17
1 2 3
McGraw-Hili
Text and numbers in
CorelDraw.
~
c.~ ~~
• v W
:
~ ~:F - : :
o s u e
~
,..,
.
aJll 'lll'i<
c.-
· il ~~ :- : : 0 [J ' ':"
_
"'
J
233

Figure 10.18
"McGraw·Hill 1 2 3" in
plot window.
234
CNC Robotics
Export this file as texttest.plt and import it into KCam. This file wi ll
plot as seen in Fig ure 10. 18 .
" Wi h
i
i
h
1"",,1
.. ..---
"....-
~
"
tm
. 1g1,,'
"
I
I
I
:~[;-
E """$"<'~
-
-1--
--
i-
t
"
.'OJ
LJ .!!:J ~I 8
"
"~-
.
' ''j.... ~
-
,
f-
.~-
T_~ I"OI
t-9pr-Al
-
-~
.~
_
... _
otI
-'
•
c::~
~;;..rf~:~l' \. o ~ ~-,~r
~
~
~a,
..
r-e-
d
= ''''l''"'' '''J::l
....,>O:JXIOCO.....CUI
I · =
GOIl<l101 ,jI)....x.l1m
I;o::IZ(l<'5
.-
t
'
-t .,
GOlX01ln l'.... ~JS
OG01)<oJl 'SZ'rtlII~
•
if- -
_
",
'~ -~
. ~~~
i
1 601XClJ25 YOO&51
'I01 2 GmXOOJ21 6YOO11 ~ .Jl
"
L::d:-::l~ ~__L____..,
'lU1 3 G(ll XOOJ m YOOll~ JS
'101 ~ Wl
)((l)J ~ 'rta;Cm
,:.
o;m ~ G (ll XOOJ341'ftUi0:l9
66(1l)(OOl 143YOO11 l 0
"
' G" ><IllI ~ YOO& OO9
O1IG(lI :<:o:r.! .!<'lYOO;1m
1GOl >m1 lli ' ''-ZU
0,
lIlGOl_
367YOOiOJl
GlIl xtOl 'JO 'r'OO;lI3'I
"
~.,
G:IIl€lII*IIYIIIl )ll';
"
GJl Z425
(;:JI_fiI l'Oll1)1S
"' r--
&OI_ m_..,
I.•
&DI>IllI1i1!l_"
f-
&DI_
JIll'rlllll''l2O
-
-" ~~~~ :!!
~
_
....
l ~r....,..~ j
::-Tooir
X>~ I"""
-,-
!
.tlill 1. 1~ ~ 1 '- 1 . 1
6lIflll(jlI@I~ l al$ 1 0h1l3 ufiiJij\/1iil3.sJ
1)l6Q;S1(D). <"
$eo.ooDol"'."_
Thi s experiment gives you an idea of how the file would wo rk with
various too ls. The center of all your tools. w hether they be pens or
router bits. w ill follow directl y down the midd le of the cutt ing pat h
displayed in the plot window. Here's how to see w hat results when
you use a pen or router bit with a I / 4-inch diameter. In KCam
Setup. select Tool list fro m the dropdown menu . Double click Tool
#001 and set the dia meter to .25. Click OK and set the too l length
at . 125. Thi s number shows up as the offset, which is normally the
radius of the too l (see Figure 10.19).
Click OK and close the window. W hen asked if you wis h to Save
Delault.to), click Yes. To be able to call a tool from the list, you will
need to go to Setup and click Options. In the first wi ndow, ti tled
General. make sure that the Force Plot Bit Radius is unchecked (see
Figure 10.20).

!O" " " " " " " " " " o o <>o o ,
1,--j;,"",rr:
:;1i_
'
.
.. ---..-
ltl
M....
"l
""
~
.1'1
~
" I~
~
.~
...
-~ - '"
"
,-.
~
.
.
! j'
I
_
I
__,.
...L..LJ
•••••••••••••••• CiI
i~
1,
!
! t~~eg~gt ~
,
,,' c,'T
,,', '"
1
I
'J\~l, ,I
~
~.
"
~. -
'" ..
~
~ -
z
.< "~
!
bi
~
11
j
i
n
~ t1 iUI~§ § 1:§ §£§§
~
'l :H~~L~U
i;]
II Z I!
II ~mmmm Imn?ll
~~I I bl I, il!llm!m!mm~!! !! ! I ]
., !,nI
~ .olllmmmm!"!!I;;';':,i
.. I .... " ..:
!
!!!!!!!!:',,,,
~"iil
r.n
A
, _ ;
co--
LLLl
J. 1..1.
1 ,\
I
~'t
..... ....... o ~ ~ oo
ggoGooooee ooe "oo
~
'"
~
o
~
"!
.,
o
s:
'
.-l
~
'"
::t:
.~
.,
<.> "
~
'"
OJ
~ '50:
._
c·'!::::
...
::> '"
,
l..g
h
,-,
}"
151
1la
]
]J
"" ]
"iF1
i
~
~
t 'w
-
II
"
I: ]
I"
J~
i
~
'"
,;
l'Il
~
II;J ""
"
'
\}
I t~ ,
,,'
!
;~
~
!;.,
,~
". "
~
u
~.
,
•
~
•
~
.
" .....
~ ... '"
I
I
I
I
I
j
11. J
&
J, LLJ.....c..J
.~ .
~
...
~
~. "
~-"'-
"'~-
1
J
I
!
'"'.,
~.,
E
~
'"'0
~
<5
0
~
l!! ""
c
'"
B
'QD
Ii:
.,
(f)-
r~ 1
:
1
!
,L
"Ijj
~
iiil. "'m
Ero
~
"0
c;ro
c;o
~
~o
~
II:
<,
o
'""'
~
ro
s:
()

Figure 10.21
CNC Robotics
Next. click Compile at the bottom of the G-code editor window, and
your plot should look like Figu re 10.21 , wh ich reflects how a 1/ 4-
inch bit wou ld make the letters appear.
'i e 'H'-'
lif''''
tlt~¥- __ «rd_
_
U*
Using a 1/4-inch tool.
..
.' -
re
"
-..; ....
H
-
"
~T""
X>_
•.,.
'" BI" I<"J ~ I~I" I "I"I "I '*,*'I~I"I ., :;I.'":;1.":;I.:::J
~
FP'
_llJi,,'
- ,.
~s.. ~
r.....Slol>W--
I
~
£J.!'::J-••
,~~
•.,;s- 95:
'oeol .....
l'_~ """
c-..~ 1Jl4
236
If you lea ve the first tool set to 0.0 and edit too ls from 2 up , you
will see thin lines plotted when you first import your graphic, but
you can preview a new tool diameter by addi ng T002 or T003 etc,
as a new line in the G-code editor. If you use this command at the
beginning of the program (after the G90 command) the entire plot
will reflect the tool. If you add it halfway through. then onl y the
lines after the co mma nd will reflect the cha nge (see Figu re 1O.22l.
Cha nging bit size in the plot window is a great way to see what a
bit or pen will make if it follows the tool path. It is esse ntial to con -
sider the type and size of too l when generating the a rtwork for a
project. You probably have plenty of fonts on you r computer with
which to experiment and if you don 't like the way a font works as
a plotter file, then import the plotter file back into CorelDraw and
pro ceed to edit it. Any graphic you create with Corel Draw can also
be exported as a DXF file, but befo re you can export as a DXF you
need to convert all the text to curves. Select all the text an d open

Chapter 10 /
Rle Creatio n and KCam
Figure 10.22
-:1 -
l«i"_r...
:D~T""
r-:I.BllE!!-:J'!!".1,;;:16llBI BlIBI0llffli ~I elrv-i1uliii~ y fii5'fliii
J
Changing bit size for
part of graphic.
FIf
ipu,1
s=;';"~ ~-.,.... r.;-
j
:~
JiL!!::.! s....~ 0
G.[odol r/o
, ... 5_6
fOO</ n_
T.- 1iT""""" 1N
c....., IiT""""" Al
GO>>«n13Sl 'l'tQ; Dl
10 GOl ~ ' 0l5 '1'\O;1I1
• &OI>lll'I'lITl'I'IB DI
'1(;(/1 """'2II YOOO; OQ
lJ6Ol>al'l "1I'1'"D; ~
" 6lII >alI' 2ZD'I'tQI;~
s6OIlOI'mY.US w
'IGoCIIlVI' 217Y1X6l1101
"ioOI>ClI'31 1voo; ~
".(;(II>clI.D.....UI
"l;lII>clI'mVl6'"
GOI>«n' )01 YW;SSot
~m ,
GOI)<IJl' )llVOOio1l&
.....='---_"-
--L....- ....... ----'-----i
II I ~'~
Im GOO l... 2!i
GO!>GIl JllYl6297
GOI>«ntm Yl6 29l
lJiGOl>«n'.;!<I5Yl6.8
...v GOIl<mL/Ol YOOlI'll
N' 2lIG01)«IIl .161\'lll; I(;1
"'29001 )«/I1.127 YOOG l 32
N' lI GU1 ><Ol U13SY\ll; OO1
NO l GlJ1>:DlO!:l / 'I'\D; (Wl
Nlll (;01 )(110834Y1l::l; (I12
N. JJ G01K1l0m Y0059"M
NO' &O'!)ol1l01" Ym\ !IErI
N. :IIGOI>005'1 Y005!m
...:lJGO'llGl 0421YOO& OO&
._~~~B! ~ !!!!
~
n_ N.. r~~
_f_
I
=
~: EE
'"
"
"'l-e-
"
"
"
the Arrange dropdown menu
to choose Convert to Curves (see
Figure 10,23).
_ 1" _ _ "'ST ,._ ",~l
flIVl. S9U II..S- ;"3-'121_
g 3' , "ri! .';'
D $
liiII ~
~
ltI
..nl/-
-
11*'2.·
" S' l'I "
I tW -
, '
.,
!J'7''''",*",-_
-
.1 .2.3
.J .
•..
J
,. 'L.
"'"
Figure 10.23
Converting text to
curves.
237

CNC Robotics
Once converted. the file can be exported as a DXF fil e. The only
problem w ith the DXF file format that Corel Draw creates is that
th e 0 point is in the middle of the page. W hen KCam opens it, the
G-code tak es three quarters of the draw ing outs ide the mac hine's
wo rking area (see Figure 10.24).
Figure 10.24
CorelDraw generated
DXFfile opened in
Kearn.
" -
I --+--
- --- --+-
Z-Icdo
Xl V_
l ooII
BIBI?I"J ~ I ,oH '***'1'*'1 $ I."''-~ " "'~ ~ "'~ ~
-+
t
I
...
=-~...~£_-~
I
~
D.'!:J- ..
~ Ho
. <iSlopo "l'IJ
,~-
r,....~ FW
c_Fr F>t
001(t.c... e...-...-.j
NOO2 ~ f)o, """
" <U 1
~ ,
N OOl G~
NOO5 " 1ll
== ~
GOO ~me 981 YOOJ "'"
GOO Z.(Dl ;'";O
GCn }(.(DI EIlI1m:».m Z.(Dl l'JO
CGlnlCroII5J2YOl1lel
lGOlX.oo1li1lm;na;s
2G01l<ro&lI.l''rtIIIlCl
l&GlXm; .llIYml....
• Glnl<<<J&VlIYIlOO""
~GOl l<<<JG1D'I'rUIO""
&II)(<<J&~YOnn.
I&ll1JUNYJ"XI',)'"
GCn l<alI'~YQIl.'"
~&ln X_"l5'1'01n'"
6IlIIX«IIe_,..
GOIXflll.)'I!IJJ .....
== ~
liOO>«OI-.VIIJ2ZX1
liOOZ....ze
GCnXfl)t,"voo.llSlZ.(Dl~
GOlxmt~YlJJI0S3
GCn XfI)I M)1JRgJ
(i(IIxmt'tl7'1OO1~
rollUIl51l))YInIG16
._ ,~~~!~~
..:J
A_
N.. !~~
C"""••oIf_
I
238
Fortunately. if this happens you can offset all the G-code from
w ithin KCam to bring the plot within the table. To do this. you w ill
need to move the y-axis position half of the w idth if your or iginal
graphic and move the x- axis over hal f of the length so that y=5
and x= 10. Open the Function dropdown menu and click the Offset
G-code button. Enter 10 for x-axis, 5 for the y-axis and leave the
z-axis at zero. This w ill brin g the plot back to w here yo u want it
(see Figure 10.25).
Another po int to consider is that CorelDraw produces vector art-
work. This format can be imported into your graphic and scaled
without any loss of detail. Raster ima ges. on the other hand. are
bitmaps composed of pi xels, w hich means that as yo u increase the
size of a bitmap yo u begin to lose detail. If you want to use
bitmaps. then import them into a graphic. create a new layer and

Chapter 10 /
File Creation and KCam
::-,....
3O~T....
f~I £:l !? I ;;l p.l fl l ~1
9J 115' 1 ~*i1I ~ I.:1l 1 @lehIJ3ufiilil vlii31f .i1
DXF after Geode offset
in Kearn.
Figure 10.25
;;
$=;';"~ E.u.:.S..rr;e-
i
~
l!f!tJ ~..
,~'"
~,,~ 5>n
r_,,",..
',.... r;;--.....
e-.; r;r-..,.
P£Al<ClJN','[fISDI)
~RU l £XTtt$l lN1
•••
~
~=w
{;(JII..... ,,)'o1I:I\.,...
{;(Ilzal"i:
"'ldlIJInl.....~ Z.g..
"".......~ClI
'''' >aQ.'''''I1Q;:1ll'i
:liII'IlaJa,g;.... C)I
) (iIl'I><lQ52lV(DI."
' Ge1 ><lIll'mVCOS""
5Gll1><l1n""'Ill(I\,,...
"O"Gll'1lGJl291"".'"
MOl1GC1 >OIlW'I'lXI',; ""
llOllGC1 lQXll2ll!l'l'tU\,...
'f:)" GC1 >oJl ~'I1JOIl ll'
Gll1>m
~'ItlJ',;,...
GCl ..... •131'00I.:>«
Il22~OOZD:O ~
N Il2J ~Ol~ ' Il2 YOO1Zll
N O;U G OO Z-ooo.~
N025GOl>WS323YOO'35JZ«lJ :al
N006 0 0l ~ no YUJ] "'l
NM' GO! >\OO!i l:l!'rtlV5:l:l
Il;llIGOlXlXJ!i023 'rOO1 ~
GO!)Q)XW'rtW 616
- ~ ~ !!'~ ~ -
~
_N
.. I~~
~ ,-
I
---r-~~r=~
i
r--
'
I-
or-
,n j'--
: . I---
.,f-
':t
.. L
trace over it. Once yo u are finished tracing, delete the im ported
image and save the vecto r trace.
ACME Profiler
ACME Profiler-Coyote Edit ion, Version 6.0.0.0. is software that is
able to generate a G-code program that w ill carve materi al by rais-
ing and lowering the z- axts as the x- and y-a xes are moving (see
Figure 10.26).
KCam will support a more three-dimensional cutting pat h than our
previous examples, but only if G-code is generated w ith a different
program like the ACME Profiler6. You can find it on the Internet at
the Simtel software repository. The page w here you can download
the program is www.simte l.net/ pub/pd/60491.html. It comes in a
registered version for $20 U.S., or the shareware versio n (w ith some
limitations) is free. This software is published by Science Specialists,
Inc. and
their
Web
site
address
is www2 .fwLcom/
N kimble/
scispec/scispec.htm. Profiler is a straightforwa rd program to learn
and use. It looks at the gray scale of a bitmap image and generates
the cutting path by assigning the maximum depth you input to the
239

Figure 10.26
ACME Profiler6 .
CNC Robotics
'. _..--
-~---
---
darkest areas. with the cut depth diminishing as it moves to w hite.
Any jpeg or bmp image file will work. but gray-scale images will
take less time to load and process. W hen creating a graphic to open
in Profiler, thin k about depth of cut as shades of grey. then export it
as a bmp (Windows bitmap) (see Figure 10.27).
Figure 10.27
Creating a graphic for
ACME Profiler6.
240
y
H i ,": A
i
• c. ll1t It?
- v w
: :: :~ :-: :
m
'l] o
o" li.
::':
..-
jQ;l
»ex

Chapter 10 /
File Creation and KCam
Load the bmp file into Profiler by clicking Load Picture fro m the File
dropdow n menu. Set th e number of overlapping passes you wa nt
using the two sliding buttons at the lower left of th e screen.
Indicate w hether you want the too l paths to cut on the x-axis or
y-axis, or both. You can have Profiler offset you r G-code to com-
pensate for the tool you are using. Tell Profi ler the size of the area
that you wish to mi ll. Set the depth of cut yo u want to make and
the cutter diameter. The Feed and Speed op tions can be disregard-
ed. W hen finished. click the Make NC button. I used a 1/2-inch
cutter diameter for this test to keep the lin es of G-code to a mini-
mum . See the result in Figure 10.28.
Open the File dropdown menu and chose th e Save CNC button.
name you r fil e w ith a .GC extensio n so that KCam has no trouble
recognizing it. To use this file in KCam. ope n the File dropdown
menu and click the Open G-Code File button. locate your file and
select it . then click Open. Figure 10.29 depicts how the file profil-
er6.gc looks fro m the top. An isomet ric view of the plot is shown
in Figure 10.30.
Figure 10.28
ACME Profiler6
generates G-code.
241

Figure 10.29
CNC Robot ics
Top view of profil er6.gc
in Kearn.
.::'
I
" ~~ 1---
"
~
:t
"'.
"k-
, -
"
t-
I
+
..loW
:"::;~r-
E-"'-~
I
~
[J !!:::.I steo. D
, ~ ~
' hi"""
til;
, ....11....
,~ ~ lf'I<
~ r;s--lf'I<
G*lGEOG9Il
'I.1"""l20
'.e,
m
lOllllll YOIIOI
">«:OOl "OIOIZIM1l
3lll...lXIIZ .. .."
""""""ZlI
!II017""" 2lI1
onu",.. Z. <Ol
li011"'CIIIIZ~ ""
n J<J...OIlIIZ.clW'l
, ,,,'ltllI01 z
m
' '''''ll''ll z
m
. e
'I'D1"l1Z0 &-l1l
U lZlYOl"ll ZllQ
!ffl\1l2512ll0
lIJl:lYOl"llZ0" 71
DZlVO;"jlZ.....71
l ~ l1) <'l l Z.(l ..n
00111l25l Z0 ..n
OO1\'05O'lZ.....1I
l&71 \1l ~ Z Q ..n
J3U\'1l 9l 1lOQ
~ iIJ4 l YQ 9l 1 20 0
GOO1 \'l15O'l1.(J<41l
UG71 \1lOO1Z.(l4471
18341YO'l1 z -o..n
JL'fflVO'lO'l ZQ"l1
.:.l
~- - ~=--f- ' "':tu. I~
C<ciN"F_""
I
Figure 10.30
Isometric view of
profiler6.gc plot.
242
"r.'
~
He--
"
".. r-
".:&
_1,,'.1
ti
: 'D "
;::~r- (...._IN'
I
~
[D.!!J~..

Chapter 10 /
File Creation and KCam
You may not want to use a large bit to cut this ki nd of profil e-a
smaller bit and more passes would result in much finer work. You
should be able to keep busy generating all kinds of projects for
yo ur CNC machine w ith these techniques. As far as file creation is
concerned. however. I have only scratched the surface. so furt her
research on your own will produce even more interesting results. I
show you the tool holders I made and tests I performed in the fol -
low ing chapter.
243

1

Tool Holders
and Testing
Tool Holders
To build your CNC machine tool holders, you wi ll require the fol-
low ing too ls and materials:
•
Plywood
•
Self- tapping screws
•
Large pipe clamps
•
Springs
•
Drawer slide
•
Electrical junction box
•
Two electric wi re straight-relief clamps
For testing purposes, I buil t a coup le of makeshift tool holders
from material I already had in my collectio n of "might be useful
one day" stuff. .Neither of these holders posi tions the tool with
great accuracy but for what they are you will be impressed with
the results. After you have your mach ine up and running, you
might consider designing bett er holders. We w ill build a penhold-
245

Figure tl.1
CNC Robotics
er and a router/ dremel holder-we'll ma ke the penholder first. The
bes t and safest way to test the machine is to use it as a plotter.
Files that were created during the file creation chapter can be used
to test the mac hine. Create as man y test files as you like.
Penholder Tool
The pe nholder is made with a piece of plywood cut to fit the size
of the z- axls table. Drill so me holes in the plywood and corre-
sponding holes in the z-tab le. I drilled the holes in the z-tab le a
little smaller than the se lf-tapping screws I used. The self-tapping
screws work we ll an d eliminat e ha nd-tapping the holes on the z-
table. The drawer slide is mounted on the plywood wit h two sma ll
screws, as it would be if used in a drawer (see Figure 11.1).
Slide mounted on
plywood.
•
•
-
.
. ~l l.
246
Next, take a junction box like the one in Figure 11 .2 and knock out
two of the openings that are across from each other (see Figure
11.3).

Chapter 11 I
Tool Holders and Testing
Figure 11.2
Junction box.
Figure 11.3
Knock out two
openings.
247

Figure 11.4
Cut off some of the
slide.
Figure 11.5
Box installed on slide.
248
CNC Robotics
You may need either to cut some of the slid e off or drill new holes
to mount the junction box as seen in Figure 11.4.
I cut off a litt le of the end so th at I wo uldn't have to drill any new
holes. Now mount the ju nction box at the end of the drawer slide
(see Figu re 11 .5).

Chapter 11 I Tool Holders and Testing
Place one of the strain-relief clamps through the top openi ng of
the junction box and one in the bottom opening. Insert them from
the inside of the box with the adjusting screws facing out (see
Figure I1.6l.
You now need a coup le of weak springs to provide tension for the
slide. The tension will allow the slide to come back to a hom e posi-
tion as well as prov ide a littl e pressure for the pen as it travels over
the wo rk area (see Figure 11.7).
The main objective of the springs is to maintain consistent posi-
tioning for trave l. If the springs aren't used, the slide may not
come back to its original posi tion or it will not drop down to make
contact with the pape r on the work area. WARNING: Don 't use
strong springs-the pen will not last if too much pressure is
applied while it is plotting. See the weak springs installed in
Figure 11.8.
Figure 11.6
Installingthe strain-
relief clamps.
249

FIGURE 11.7
Weak springs.
Figure 11.8
Springs installed with
screws.
250
CNC Robotics

Chapter 11 I Tool Holders and Testing
To use this penho lder. slide the pen of choice through the strain-
relief cla mps and tighten their screw s. keeping the pen tip below
the holder (see Figure 11.9 ).
Screw the holder to the z-a xis table and use a square to align th e
slide w ith the tab letop (sec Figure 11.10).
Figure 11.9
Putting pen in holder.
Figure 11.10
Use a square to align
the holder.
251

CNC Robotics
Th e pen w ill be almost perpendicular-if the pen is on a severe
angle because its bod y is very tapered, add tape to the narrow
area to act as a shim.
RouterlDremel Holder
The rou ter ho lder cons ists of two pieces of plywood cut th e width
of the z-axis table.
The back piece w ill
require holes dri lled
through it for mounting on the z-axts (see Figure 11 .11).
Figure 11.11
Back of router holder
with mounting holes.
11"'\1
~\"..,~
-
252
The other piece is cut a little longer than the body of a router and
a hole a little smalle r than the diameter of the router body is cut I
inch fro m the side (see Figure 11.12).

Chapter i i
/
Tool Holders and Testing
On the back plywood, drill or cut two sets of openings with the
openings of each set
1- 1/ 2 inches apart and centered on the
boa rd. Cut the first set I inch fro m the botto m of the backboard
and the next set 2 inches above the first set (see Fig ure 11.13).
Figure 11.12
Base of holder.
Figure 11.13
Clampopenings cut
through back.
253

Figure11.14
Remove wood between
openings.
CNC Robotics
On the back of the back plate, remove enough material from
between the sets of ope nings to allow the pipe clamps to recess,
keeping the holder flat to the z-table (see Figure 11. 14).
-,
IJl
ll ~ 11.11
254
Unscrew the clamps so that they can be fed from the front through
a n opening an d up through the next openi ng (see Figure 1I. 15).
Screw the base piece of plywood to the bottom of the back ply. To
mount a router, place a piece of wood at the openings between the
clamps to move the router out closer to the center of the hole in
the base (see Figure 11.16) .

Chapter 11 /
Tool Holders and Testing
-
Figure1.1.15
Feeding the clamps.
Figure 11.16
Wood spacer.
255

Figure 11.17
Wood to protect the
router.
256
CNC Robotics
Use a piece of woo d at each clamp so that the router bod y doesn 't
sustai n any damage when the clamps a re tighte ned (see Figure
11. 17).
Tighte n the clamps and you're do ne! To get the router alm ost pe r-
pendicular, place a long bit in the collet and use a square to find
an accu rate po sition. The hole in the base of the holder is just
large enough to allow the bit to be cha nged without removing the
router (see Figure 11.18).

Chapter ii / Tool Holders and Testing
Testing the CNC Machine
Your machine will need a flat smooth surface between the frame
beam s. If you haven 't yet placed an ything between the beams,
now is the time. I used two sheets of 3/ 4-inch MDF as the table
surface (see Figure 11 .19).
The sheets of MDF were cut to length and width on the panel saw
at the lumberyard where I purchased them. MDF is heavy and
dense, but one sheet will probably bend a little between the sup-
po rts, so I used two. I haven't noticed any deflection yet , although
my method of checking is with a stra ight edge-not the most
accurate method . With the working surface in place, install the
penholder (with pen) on the z-axis tab le. The n place a piece of
paper over the working area of the table (see Figure 11.20).
Figure 1:1..18
Big enough for tool
change.
257

Figure 11.19
Two sheets of MDFas
a tabletop.
Figure 11.20
Paper tablecloth taped
to work surface.
258
CNC Robotics
v
Lower the pen by jogging the z-axi s from the CNC Controls window
in Ke arn until it reaches the surface of the paper, then allow the z-
axis to lower a little bit more to ma ke sure the pen will make con-
tact with the paper even if the surface of the work area isn' t per-
fectly flat . Use this dista nce as the default cutting depth in the Table
Setup window and have it travel 1/ 4 inch above the surface of the
paper. If you have ins talled limit swi tches and have decided where
the home posit ion is for all three axes, then just sa ve the setup for
the plotter too l as a KCam machine setup file so that you wo n't have
to do th is again. You can use any kind of paper you want. I have

Chapter ii /Tool Holders and Testing
a roll of kraft paper on which I initia lly experimented. but I also
pu rchased a roll of white ta blecloth paper from a party supply
store. Tablecloth paper is 3 feet wide a nd 50 feet long, which
makes it ideal as plotte r pa per. W hatever you use will need to be
taped at the co rne rs to stop it from sliding arou nd the table. Start
with the pa rallel line plotter file named Iinetest2.plt, crea ted in the
last cha pter. Import it into KCam a nd open the CNC Controls win-
dow, clicking the Automatic tab. Press the Start button a nd watch
the machine draw
lines. Figures
11.21 and
11 .22 sh ow the
machine plotting linetest2.plt.
Figure 11.21
Plotting the second line.
Figure 11.22
Plotting the last line.
259

CNC Robotics
The next test will use the file testtext.pit, created in the last chap-
ter. I wanted to keep using the pa pe r already ta ped to the table, so
I used the Offset G-Code function to move the plot II inches up the
y-axis (see Figure 11.23).
Figure 11.23
Text test plot moved 11
inches alongy-axis,
; .'
N [I)) l"CO~ ClJI<VERSION]
" 001(OI\1GI(I>U.L Alt-, TOOI ESl,PU j
"@,
NOO3 Gg:]
",roo MS)
NOO% OO Zlm 500
Ie
NOO6GOO XOO() ((I) '1'l)1 ' .iXlJ
N<>l7Glll»'»1 .130l1Jl1.om
NI)lllGOO Z-OOl25ll
NtJ::'lGD1 >roU :JJI'01S.535
N010G01XOO119<! 'rU1S.535
H(IlI (;ll' xoo;>.356'rU1I,X4
H012001><003 216'1"Q19'535
HlIllG01><003 5:'l1 '11)19.535
HII14GQ1>ml 97ll 'rU11,om
HII1~ GQl l@1 :lO YOH om
HII1GG01>Wl :ltl'l'UU 2' )
WI11G01X002'6S W1 / .039
Hll1 a GO l l<1lOU ~wr1J1 1.03'l
NII1S GOI XOOI 367'r1l19 ac
N(W O(l1XW1 3li7y,l11.03S
" 021 GOI »'»1130'1'017039
N II:r.: G OOZlJOO~
HmW1XOO'l ......'1'l)1~J4 \
HCl24 GOOZ-OOlZ5!J
H 02'5 Gm Xln.; 4~ W1 8 J9')
H()2l;GIIlXOO'l,W W1Sl"
~: ~~=:: ::.
;.
'4
~~ ~~~~~ !~
.:.l
R;;;';';;;r ' ;"'H..
I~
tl<ci«lf """"
!
0_ ,_,
~ ,
:,."
' S_. O<rl~ <d'....
Figure 11.24
Progress shot of
texttest.plt plot.
260

Chapter 11 /
Tool Holders and Testing
The finished plot is shown in Figu re 11 .25.
I created one more test file w ith CorelDraw and exported it as
shapes.pit (see Fig ure 11.26).
"-
-
Figure 11.25
Text test plotted.
'.,
/\\
/
\
/
\
\,
\
J
•
><-
261

Figure 11.27
Shapes plot finished.
262
CNC Robotics
Once imported into Kea rn. this file w ill need to have the G-code
offset to use the same pape r. 1offset the x-axis 21 inches to put it
in front of the line test. The finished plot of shapes.plt is shown in
Figure 11.27.
WARNING: It is wi se to test your graphics files w ith a pen before
you start cutting material that costs more than paper. Even if you
have no interest in plotting all your files w ith a pen, it would be
w ise to run the programs through w ithout a too l on the z-axis to
ensure
the
machi ne w ill
pe rfo rm
as
expected . With
yo ur
Workshop Bot running smoothly and doing whatever you ask of it,
your only concern will be finding as many uses for it as you can.
The next chapter deals w ith examples of what can be done with
th is machine. There are undoubtedly a variety of uses for th is
mac hine other tha n what I have used as examples in the next
chapter- the kind of materials and tools that can be used are only
limited by your willingness to learn and your imagination.

Examples
This chapter on examples was the most fun to w rite! Nothing
compares to having a new too l to get your imagination worki ng.
Every new tool inspires the act of creation, and a home-built CNC
machin e is no exceptio n! In my opinion, a too l yo u built fro m
scratch has an appea l un like any store-bought tool. It's just a
w hole lot of fun to make things. So that's w hat I've been doing
since comp leting this project-think ing of numerou s uses for my
new too l. The uses I offe r as examples are certa inly not the only
fu nctions this machine can perform, though . I'm sure you 'll have
man y more uses and proj ects for your machine. The rest of this
chapter is divided into sections based on the tool I have mounted
on the z- ax is of my CNC machine. The sections w ill deta il how the
machine can be used as a plotter, with a rou ter or DremeltooJ. as
well as w ith an engravi ng tool.
Plotter
As a plotter, this machine can write on almost any surface and
becau se of the large working area, it can perform printing job s that
a standard sized printer cannot. The first plotting job for which I
used the machine was a stained glass pattern I created some time
ago but hadn 't been able to reproduce on a single, large piece of
paper. The pattern , inspi red by a Frank Lloyd Wright design,
263

Figure 12.1
Astainedglass pattern
plotted.
264
CNC Robotics
mea sures 28 X 38 inches to fit in my front door, as shown in
Figure 12.1 .
I used CorelDraw to creat e the pattern but had only been able to
print it on a series of letter-si ze pieces of paper that I taped
together. Take it from me-taping sma ll pieces of paper to form a
larger drawing doesn't work very we ll. I expo rted the Core lDraw
pa ttern as an HPGL file for KCam to import.
The next two exa mples a re of a WMF <Windows Meta File) for-
mat
vector drawing that I downloaded from a
Russia n Web
site that
has
free
vector clip-a rt available. The
address
is
www.c1ip-a rt.ru/indexx.html. The first image is of a bu lldog, plot-
ted very small (see Figure 12.2) and the next image is the bu lldog
plotted at a la rge size (see Figure 12.3).

Chapter 12 /
Examples
-
Figure 12.2
Small bulldog plot.
Figure 12.3
Large bulldog plot.
265

Figure 12.4
Dolphin plotted with
metallic ink.
266
CNC Robotics
As you ca n see from the small and large plots of the bulldog. vec-
tor images ca n be enla rged or red uced without loss of detail. I used
the same pen for both plots. wh ich resulted in the smaller bu lldog
plot 's having pen lines that bleed into each ot her. This gives the
final plot a little less resolution . Had I used a pen with a smaller
tip, ga uging the tip to the size of the plot, the two images would
look exactly alike.
My next plotting task was to find a pen that could be used to plot
on glass surfaces, with ink that would act as a resist to glass etch-
ing paste. It took a wh ile to find such a pen . I bo ught every per-
man en t marker availab le and tes ted them by drawin g a line on a
piece of glass with each and ap plying etc hing paste to each line,
letting the paste sit for about 15 minutes and washing it off in
soapy water. The on ly pen that wo rked well as an etching res ist
was the Pilot Extra Fine Meta llic Ink Marker. I plotted a dolphin on
a piece of clear glass using the Pilot Metallic Marker. Then I added
ink to the perimeter of the drawing with a wider version of the
same pen so that the etching paste wouldn't stray from the area I
wanted to etch. as you ca n see in Figure 12.4.
Make sure that the ink ha s been ab le to dry completely before
usi ng the etching paste, or the paste an d ink will just mix and your
glass etch ing will not be successful. Be carefu l to read the safety
warnings on the etching paste, as it is a caustic substance. I

Chapter 12 /
Examples
applied the paste w ith a small piece of scrap wood, but you cou ld
use a bru sh, as long as metal doesn't make contact with the paste
(see Figure 12.5).
I let th e paste sit on the glass for about 15 minutes, but the time
requi red to etch sufficiently cou ld differ, depending on the brand
of etch ing paste and the temperatu re of you r work area. Figure
12.6 shows the final result after washing th e paste off and remov-
ing the metallic in k with lacquer thinner.
Figure 12.5
Etching paste applied to
glass.
Figure 12.6
Dolphin etched in glass.
267

Figure 12.7
Engraving tool.
Figure 12.8
Text engraved in
aluminum.
268
CNC Robotics
Using the CNC machi ne as a plotter allows you to generate full-
size draw ings of patterns for woodworking projects, as it allowed
me to plot a stai ned gla ss design on a single large piece of paper.
You can reproduce any design or drawing using th e best pen to
plot on your material of choice.
Mechanical Engraving Tool
The next tool that I mounted in the penholder was a mechanical
engraving too l. This tool is inexpens ive and available at most
hardware stores. It is pictured in Fig ure 12 .7.
I decided to engrave on a piece of aluminum to dete rmi ne the
smallest size of text the engraver could reproduce with readable
text. Figure 12.8 shows the text sizes engraved in aluminum with

Chapter 12 /
Examples
a Canadian dime as a size reference. (An American dime is about
the same size as th e Canadian dime used in th e image.)
With the engraver I used, the smallest size of text that can still be
read is 6 po int. A more accurate engraving tool would mo st likely
be able to produce smaller text. The next ima ge, shown in Figure
12.9, is of the same bulldog I plotted using a pen earlier in th is
chapter, shown engraved on aluminum beside some text.
Even though the engraving tool isn't the most accurate or precise
available, the CNC machine was able to guide it th rough the
engraving process w ith a remarkable degree of precis ion. Figure
12 . 10 shows a closer ima ge of the bulldog and the level of detail
achieved by a relatively imprecise tool.
Another vector image I chose to engrave contained a lot of small
lines to test the ability of the CNC mach ine engrave r combination.
The image in Figure 12.1 1 is of a church engraved in alumi num
w ith a Canad ian dim e for reference.
Figure 12.9
Bulldog engraved in
aluminum.
269

Figure 12.10
Close up of engraved
bulldog.
Figure 12.11
Engraved church.
270
CNC Roboti cs

Chapter 12 /
Examples
The engraver was also able to etch a design in natural stone. For
this experimen t, I generated a fil e to test the engraver with a piece
of black gran ite floor til e. Figure 12 . 12 shows the result.
The engraver worked fairly we ll w ith the granite, although the
lin es are a little sloppie r than those mad e in aluminum. All th ings
con sidered, the machine perfo rmed very well as a CNC engraver.
Dremel Tool
The Drem el tool is handy for doing small jobs that require tiny
bits. You wouldn 't use the Drem el for anything large, but it is great
for intricate and small carving. Although it spi ns quickly, it could-
n't take the punishment that a router or larger rotary tool could.
There are many bits that can fit its II S-inch collet or chuck. I pur-
chased a set of diamond-im pregnated bits to try out the Dremel as
a glass engraver. Since th e bits were inexp ensive, I didn 't expect a
lon g working life from th em. I mounted the Drernel too l in my
makeshift hol der and set about engraving the Chevy logo in a
piece of mirror. In Figu re 12 .1 3 yo u can see the diamond bit mak-
ing contact w ith the surface of the mirror. Thinking that it would
Figure 12.12
Engraving in black
granite.
271

Figure 12.13
Diamond bit engraving
glass,
Figure 12.14
Engraving Chevy logo,
272
CNC Robotics
he lp lubricate the bit, I put a little water on the glass, Although I
do n' t know if the water helped , if I were going to require a dia -
mon d bit to do copious a mounts of engraving I wo uld bui ld a tub
wit h a pump to prov ide a con stan t st ream of water to extend the
life of the bit.
The diamond bit wo rked well but didn't last very long; as the tip
wore away, the lines it engraved became wider until it stopped cut-
ting into the glass altogether, Figure 12. I4 shows the Chevy logo
and the first few engraved letters,

Chapter 12 I
Examples
Next I used the Dremel to carve the dolphin in pink insulating
foa m, the kind you can get at the local building supply store. I
opened the do lphin image in Profll cro, after 1 had colored it w ith
shades of gray in CorelDraw and expo rted it as a jpeg image fi le.
Next, I generated a G-code fil e th at wo uld carve the dolphin. Using
an image of the dolphin with a white background so that only the
dolp hin wo uld be carved, I made the carving seen in Figure 12. 15.
I used a l iS-inch cutting bit and only over lapped the cuts the min-
im um that can be set w ith Profile r6.
The dolphin is only 2 inches at its w idest point and 5 inches in
length. You w ill notice that th e carving is 1/4 inch at the deepest
cut, and that the figure is highest at the head, giving the ill usion of
emerging from the foam. I changed the image of the dolphin, mak-
ing its body similar shades of gray and the background black.
Again I opened th e file with Profiler6 and gene rate d G-code to
open w ith KCam. This time I used pine to carve the dolphin. The
result of the changes can be seen in Fig ure 12.16.
Figure 12.15
Carvingdolphin in
foam .
Figure 12.16
Dolphin carved in pine.
273

Figure 12.17
Airplane cut from
hardboard.
274
CNC Robotics
If you generate a G-code file with Profiler6 usin g more passes and
a smaller bit, the resu lting carving wo uld look better and wouldn 't
req uire as muc h sanding a nd ha nd touch up work.
Master Craft Rotary Tool
This tool is the Canadian Tire version of a rotary cutting tool that
is between a Dremel and a router in size a nd strength. I decided to
use this tool to cut ha rdboard because I didn' t want to overtax the
Dremel and my router doesn't have a IIS- inch collet to hold the
cutting bit I wa nte d to use. I drew a crude looking airpla ne with
CorelDraw in th ree parts, with lines where I wa nted the body cut
for the wings. I placed the lines for the openings in the body last
so they wo uld be cut first. In Figure 12.17 you can see the res ult-
ing airplane and the foam backing I used while cutting.
/

Chapter 12 I
Examples
I used the foam to keep the hardboard above the tab le surface
because foam offers very littl e resistance to the cutting too l. It is
al so firm enough to maintain the position of the material being cut.
I also acqui red a tile-cutting bit that is
liS-inch In diameter.
Normally th is type of bi t would be used to cut soft-body tile like
wall tile. Wall tile has a softer body than floor tile, and wall tile
w ith a white clay body is the softest and easiest to cut. I had some
4- 114
X
4- I /4-i nch wa ll tile lyi ng aro und that I used for this
example. First I built a little jig to hol d the ti le in position. as
shown in Figure 12.IS.
Th e jig is recessed a littl e less tha n the thick ness of the tile on the
th ree mite red piec es of MOF. Th e piece of pi ne at the front of th e
jig keeps the ti le from moving out of the jig and the two pieces
screwed to the mitered MOF clamp the tile in place. keepi ng it from
movin g up and down. In CorelOraw I made a drawing of a star and
Figure 12.18
Jig to hold tile.
275

Figure 12.19
Star cut in tile.
Figure 12.20
Star cut from blue tile.
276
CNC Robotics
a house, both on paper size to match the tile, which I expor ted as
HPGL files. I im ported them into Ke arn and cut th e shapes in the
tile. In Figure 12. 19 you see the star cut from a w hite ti le.
Then I reloaded the jig w ith a blue tile and cut a star from it , as
seen in Figure 12.20.

Chapter 12 /
Examples
I did the same with two different colored tiles using the house fil e.
as seen in Figure 12.2\ .
W hen you install these tiles, swap th e resulting shapes w ith the
opposite colored tile as in serts (see Figure 12.22).
Figure 12.21
House cut from tile.
Figure 12.22
Swap the shapes of
colored tiles.
277

Figure 12.23
CNC Robotics
Router
The router is the most powerful of the tool s I w ill use w ith th e CNC
machine and is well suited for larger projects that require the
removal of a lot of material. One of the most obvious uses for the
CNC machine with a router is sign making. The simplest sign con -
sists of words and nu mbers and is routed along the pat h to w hich
the font plots. like the sign in Figure 12.23.
Simple sign.
I
/
/... I
/
",
•
Figure 12.24
Tallest letter.
278
This example was routed J/ 8 inch deep and the overall size of the
sign is J 2 X 50 inches. The tallest letter is the G. standing 9-1 /2
inches. as depicted in Figure 12.24.
J painted the rou ted por tion orange and didn 't worry abo ut getting
th e paint on the top of the board. After the paint dried, I sanded

Chapter 12 /
Examples
the entire surface. removing unwanted paint and mak ing the wood
ready for a finish. This is the quickest way to ma ke a sign. but if
you want to get creative. the next sign I made took a bit mo re
thought to produce. Figure 12.25 shows a sign with raised letters
on a lowered portion of the board with letters routed along single
lines at the top of the board.
McGraw-Hili
To create the pa th for the top letters. I first wrote the text on a page
in Core lDraw to corres po nd to the size of the sign I wa nted to
make. Then I selected the text a nd converted it into a bitmap. Once
the text is converted to a bitmap you ca n trace it using CorelTrace.
You will need to convert the text bitmap into a black a nd white
image after CorelTrace ope ns. Trace the image using the centerline
method and when you are happy with the resu lt. close CorelTrace.
The trace result will now be the selected object on the drawing.
Move the tra ce out of the wa y so you can select a nd de lete the
bitmap you created from the text. Move the trace where you wa nt
it. The raised letters on the lowered portion of the sign can be
made by placing a box the size of the area to be lowered on the
drawing a nd filling the box wit h color. Type text over the box. giv-
ing the text a different color. and size the text. Because I wanted
to use a different router bit for the text at the top of the sign tha n
for the raised letters. I made two files. After I lined everything up I
selected the box and letters on the lower po rtio n of the sign a nd
cut them. I exported the remain ing part of the sign as an HPGL file
nam ed sign I.plt. Then I pa sted the lower part I had cut from the
Figure 12.25
More complicated sign.
279

Figure 12.26
Second sign closeup.
280
CNC Robotics
sign back into the drawing. I selected the top text and cut it from
the sign, exporting the balance as sign2.plt. W hen the export dia-
log opens, go to the last tab and click on simulated fill. I set the
width of the simulated fil l at 1/4-inch spac ing because I intended
to use a 1/ 2-inch router bit to clear ou t the unwanted material. Set
•
the simulate d fill to plot only ho rizo nta lly. Save the fil e; now there
are two fil es to use to make the sign. You w ill need to ope n the
second file w ith CorelD raw and select all obj ects. the n ungroup
them. Remove all the lines within the boundaries of the letters by
selecting each one and deletin g it. By removing the simulated fill
lines from the lett ers, only the balance of th e area will be lowered.
leavin g the letters raise d. W hen you get yo ur material secured to
the table of the CNC machine. just im port the first file w ith KCam
and run the program w ith the first rou ter bit. Then import the sec-
ond fil e and change bits befo re ru nning the program. After I fin-
ished the routing. I painted the letters in the top portion of the sign
in the routed areas, and in the bottom portion of the sign I pa int-
ed the lowered areas. When I sanded the sign, I removed pain t
from the areas aro und the top letters and from the tops of the bot -
tom letters. See Figure 12.26 for a closer look.

Chapter 12 I
Examples
You shou ld be able to make all sorts of different signs once yo u get
CorelD raw figured out. The next example is a prototype of the
doors that my friend Geoff wants to make for his kitchen and the
original reason
w hy
I started
thinking
abo ut buil din g a CNC
mac hine (see Figure 12. 2 7).
We used three files to make this door out of MDF cut to size. The
first file cleared out the lowered portion of the door by 118 inch
w ith overlapping passes of a I / z-inch bit. Using a box core bi t set
to cut 118 inch deep. the second file routed the lin es inside the
lowered portion to mi mic tongue and groove. A third file was used
to run the box core bit around the perimeter of the lowered po r-
tion and off th e board. w hi le set to cut 118 inch from the surface
Figure 12.27
Prototype kitchen
cabinet door.
281

Figure 12.28
Closeup of cabinet
door.
Figure 12.29
Joint jig.
282
GNG Robotics
of the door to create the illusion of rail and stile construct ion.
Once we figured out how to make the prototype, the rest of the
doors would be ea sy to make. See Figure 12.28 for a close-up of
the prototype.
n
.
I
-~
,r4
1&
•
I
~.
I bu ilt a sma ll box with one open side as a jig for the next exam-
ples (see Figure 12.29).

Chapter 12 1 Examples
The CNC mach ine is also well suited for making dovetail and box
joints. I have made box joi nts on my table saw with a jig that took
me half a day to perfect, and haven't bothered to make any more
jigs, consideri ng the grief the first one gave me. I don 't own a dove-
tail jig for my router, so it seemed like a good time to learn how to
make a dovetai l joint. I made the box joint fi rst. I had som e 1/2-
inch pine 5 inches w ide, so I created a file in CorelDraw that had
lin es 2 in ches long and spaced I inch apart starting from the top
of the page, w hich was the w idt h of my wood, down to the bot-
tom . The I -inch center will give you 1/ 2-inch fingers using a 1/ 2-
inch rou ter bit.
Make sure you have the page set to landscape
w hen you export any of your files; if you don 't , they won't plot
correctly. After I screwed my jig to the work surface, I cut a couple
of pieces of pin e 5 inches long to cla mp to the front of the jig, as
shown in Figu re 12.30.
I drew a line on one of the pieces of wood, I inch from the top .
This would let me align the wood to the top of the jig , w hich in
theory is parallel to the surface of the work area. I set th e zero
point of the z-axls at the surface of the end s of the wood clamped
Figure 12.30
Wood clamped to jig.
283

Figure 12.31
Box joint cut in jig.
284
CNC Robotics
to the jig. Next, 1set the depth of cut to - .55 inches and travel at
.25 inch es. See the cut joint in Figure 12.31.
The resultin g joint was cut exactly as I wanted, wit h each finger a
little longe r tha n the thickness of the wood, a nd they fit together
perfectly (see Figure 12.32).
Next I set up to create a dovetail joint. The dovetail bit that I have
is 1/2-in ch at the end, tapering down to 1/4-i nch . To be able to
cut two pieces of wood at the sa me time, I wo uld need to move the
bit th rough the top of the piece he ld to the jig vertically, a nd into
the piece held horizontally the thickness of the wood. See the
wood clamped to the jig in Figure 12.33.
In total, the bit needs to travel I inch from the face of the vertical
piece a nd back along the sa me path befo re moving to the next cut.
To ma ke a joint that will wo rk with this method, the pins and voids
need to be the sa me size. Making them the same size requires that
the bit travel on paths tha t are spaced 3/4 inch apart, as the na r-
rowest part of the bit is 1/ 4 inch in diameter. To create the plotter

Chapter 12 /
Examples
Figure 12.32
Box joint together.
Figure 12.33
Clamped wood for
dovetail joint.
285

Figure 12.34
Dovetail joint cut with
eNC machine.
286
CNC Robotics
file I drew lines that exte nded into the drawing 1-1 / 2 inches from
the edge of the page a nd back to the edge, making sure that each
line was co ntin uo us from start to finis h. If the line isn 't co ntinuo us
the bit will raise to the travel heigh t before co ntinui ng the line, th us
destroying the joint. I made them extend 1- 1/ 2 inches to a llow me
to set the x-axis zero point to the leading edge of the route r bit,
being i / z- tnch away from the front of the vertica l piece of wood.
The 1/2 inch is just for clea ran ce as the bit moves to the next cut.
Figure 12.34 shows the resulting joint cut in this ma nner.
In the futu re, I'll build a platform that can be mo unted on the cen-
ter fra me cross member with the MDF sheets removed from the
frame. The limit to the length of a vertically held board will be dic-
tated by how high t build the legs for this machine when I want to
ge t it off the floor.
My last exa mp le is how to use this machine to mill wood on a
lathe. Since I do n't own a lath e that I can put under the table of
my ma chine, I built a ma keshi ft lat he, using MDF, that is powered
by my hand drill. The ta ilstoc k ca n be moved a nd screwed in place
to accommodate the material be ing turned. The live center on the
tailstock is made from a bearing and a piece of 1/2 inch ready-rod

Chapter 12 /
Examples
bolted to a sq uare of MDF, with holes for screws to attach it to th e
wood to be tu rned . The dr iven end of the material is screwed to a
piec e of MDF tha t is bolted to a ma ndrel wit h a 1/4-inch shaft that
fits the ch uck of the drill. As always, I hold the drill in place with
a large pipe clamp. See Figure 12.35 de picting the MDF drill-pow-
ered mini lathe, with round oak stock attached. I attempted to
sc rew the lathe in place perpendicular to the y-ax is (and by
default, para llel to the x-axis). The router will only travel down the
x-axis, so I se t the y position to what I thought was the cen ter of
the wood by manually jogging. Wh en I was satisfied with the y-
ax is position , I ze roed it.
I used oak for this demonstration because I happen to ha ve a
bunch of very old logging pikes with 20-foot handles that I haven't
fou nd a use for until now. To generate a file with a profile to mill
the spinning wood is fairly easy. I don't have any software that will
let me draw shapes that only move up a nd down on the z-ax is
while trave ling only along the x-ax is, however. To do this, you
would need a CAD program like AutoCAD. I on ly have CorelDraw,
but it turn s out th at CorelDraw is all I need. To make the profile
file, sta rt by creating a long narrow page set to lands cape in
Figure 12.35
Drill powered lathe.
287

CNC Robotics
CorelDraw. I made my page 1/2 inch high X 15 inch es long and
then proceeded to dra w a profile within th e boundaries of the
page , as seen in Figure 12.36.
Figure 12. 36
Drawing a profile in
CorelDraw.
'3d ';"
Emil!
I
1-
..-
288
Export this file as an HPGL file. Import the file into KCam. KCam
w ill generate a G-code file that looks like the following:
NOOO [KCam Conversion]
NOOl [Original File: lathecoreI3.plt]
N002 %
N003 G90
N004 M03
N005 GOO ZO.5
N006 GOO XOOO.OOO YOOO.OOO
N007 GOl XOOO.220 YOOO.254
N008 GOO Z-O.25
N009 GOl X002 .283 YOOO.254
NOlO GOl X006.184 YOOO.086
NOH
GOl X009.745 YOOO.086
N012 GOl X012.26l YOOO.19l
N013 GOl X013.3l 0 YOOO.228

Chapter 12 /
Examples
N014 G01 X013.413 YOOO.233
N015 G01 X013.517 YOOO.240
N016 G01 X013.621 YOOO.243
NOH G01 X013.673 YOOO.242
N018 G01 X013.724 YOOO.238
N019 G01 X013.918 YOOO.215
N020 G01 X014.005 YOOO.202
N021 G01 X014.063 YOOO.194
N022 G01 X014.441 YOOO.125
N023 G01 X014.727 YOOO.125
N024 G01 X014.964 YOOO.222
N025 G01 X015.191 YOOO.222
N026 GOO ZO.5
N027 GOO XOOO.OOO YOOO.OOO
N028 M05
N029 M30
No tic e how the profile is plotted in the plot w indow of Kearn.
You w ill wa nlto change all the y-coordinates to z-coordlnates and
this is accomplished using the search and replace fun cti on of the
G- code editor. After repla cing every y w ith a z, the G-code looks
like thi s:
NOOO [KCam Conversion]
N001 [Original File: lathecoreI3.plt]
N002 %
N003 G90
N004 M03
N005 GOO ZO.5
N006 GOO XOOO.OOO ZOOO.OOO
N00 7 G01 XOOO.220 ZOOO.25 4
N008 GOO Z-o.25
N009 G01 X002.283 ZOOO.254
N010 G01 X006.184 ZOOO.086
N011 G01 X009.745 ZOOO.086
N012 G01 X012.261 ZOOO.191
N013 G01 X013.310 ZOOO.228
N014 G01 X013.413 ZOOO.233
289

290
CNC Robotics
N015 GOl X013.517 ZOOO.240
N016 GOl X013.62l ZOOO.243
N017 GOl X013 .673 ZOOO.242
N018 GOl X013.724 ZOOO.238
N019 GOl X013.9l8 ZOOO.215
N020 GOl X014.005 ZOOO.202
N02l GOl X014.063 ZOOO.194
N022 GOl X014.441 ZOOO.125
N023 GOl X014.727 ZOOO.125
N024 GOl X014.964 ZOOO.222
N025 GOl X015.l9l ZOOO.222
N026 GOO ZO.5
N027 GOO XOOO.OOO ZOOO.OOO
N028 M05
N029 M30
You need to do a little more editing. In line N006 change the Z to a
Y. Remove lin e NOOS and change the Z in line N027 to a Y. You only
want moveme nt on the z- and x-axis: the y-axis must rema in sta-
tionary; that is w hy the y-axis was zeroed at the center of th e piece
to be milled and any reference to the y-axis in the G-code must be
only 000.000. Remove the line numbers with the edito r and then add
the numbers back again . After final editing it w ill look like th is:
NOOl [KCAM CONVERSION]
N002 [ORIGINAL FILE: LATHECOREL3.PLT]
N003 %
N004 G90
N005 M03
N006 GOO ZO.5
N007 GOO XOOO.OOO YOOO.OOO
N008 GOl XOOO.220 ZOOO.254
N009 GOl X002 .283 ZOOO.254
NOlO GOl X006 .184 ZOOO.086
NOl l GOl X009 .745 ZOOO.086
N012 GOl X012.26l ZOOO.19l
N013 GOl X013 .3l0 ZOOO.228
N014 GOl X013.4l3 ZOOO.233

Chapter 12 /
Examples
N015 G01 X013.517 1000.240
N016 G01 X013.621 1000.243
NOil G01 X013.673 1000.242
N018 G01 X013.724 1000.238
N019 G01 X013.918 1000.215
N020 G01 X014.005 1000.202
N021 G01 X014.063 1000.194
N022 G01 X014.441 1000.125
N023 G01 X014.727 1000.125
N024 G01 X014. 96 4 1000.222
N025 G01 X015.191 1000.222
N026 GOO 10.5
N027 GOO XOOO.OOO YOOO.OOO
N028 M05
N029 M30
Recompi le the G-code, and from the top the profil e will be a
straight line along the x-axis, l ook at the plot fro m the fron t and
it's now what yo u need to mill the profile with a lathe. If yo u want
to set the top of the materia l to be milled as zero, offset the z-axis
until the profil e is just below the surface of z- axis zero , as seen in
Fig ure 12.3 7.
"'"",...
~~T""
r~ l f,; l !a I'-'J ~ I::: ! ", l tjl5J@l 61IBI51I@ltilhWilulOOij vliiOi:l=.J
,.
iii." I ". WI iii
. fl.
!)O C<ll\:!ow_ .....<&'
(),r-.~~
Offsetti ng the z-axis.
6C«Io..., "'*'vod ..........00_
em
.".,,1
=-s.:-ro-- [_ 5>oQ:~
i
~
D.!!::J....
"~~
."S>op
2'l--
,_ r;r-...
c-.. r;r- ...
~~I" CllAEL3'UI
•
~
~
--~
r.wXlDlOOlI'WllOOll
.... >8:lI Z2IZlaoOOO
IiOllo32 /B):all/IlDI
00I:<006 '" 2.(Ql'''
l liOl l'UlS1 OSZ..... '..
2 001:4112;512__
JIi01 :4l1JJ1OZ.....122
4Ii01:>U1) 113Z«lI ."
5001Xl11 3S11Z«lI 010
"'Jl&1iOl>U13~ Z«l103l'
11iOll«J13li13Z
.
IGIl1>U1312tZ
012
9W1>V13".Z«lIlOS
CiCl>U1.MZ..... G08
G01>a1l US3Z«lI 055
G01>Q)1..., Z«lI ,25
NWlIiOl>V14m zau 12s
(l/lG01:>U14!1&' ZWl 028
N llI5 G 01 >:t11 S 1 ~ ZdQ O .lll
H026GOO ZWI 250
N1lI7GOO >0ll 00:Jl'OCll oo:J
"~~
~,.
_
..... I~I
: -~~ 1
o.-If-..
I
- .....
,.
"
291

Figure 12.38
Lathe turning wood
under router.
Figure 12.39
Finished turning.
292
CNC Robotics
I moved the profile down about 1/ 16 inch at a time because I
didn' t want to stall my homemade lathe. I used a V groove router bit
to mill the wood because it was sharp and for no other reason. You
can see the CNC machine milling wood on the lathe in Figure 12.38.
The finished product is shown in Figure 12.39.
I could proba bly write an entire book on how to use this machine
but a chap ter will have to suffice. I suspec t that those w ho build a
Workshop Bot for themselves w il l find hundreds of uses, and enjoy
inventing new ways to use their machines every day.

Sources
of Material
Electronic Components
L297/L298 Integrated Circuits
Manufactured by STMicroelectronics
http:/ / us.Sl.com/
The
following
list of distributors comes
directly from
the
STMicroelectronics Web site. They have distributors in almost
every country on this plan et so I've only listed a few for Canada
and the United States. Visit their site to find the distribu tor near-
est you.
CANADA
Arrow
http://www.arrow.com
Phone: 613-271-8200
Fax: 613-271-8 203
Phone: 905-670-7769
Fax: 905- 670-7781
293

294
CNC Robotics
AVNET
http:/ /avnet.co m
Phone: 613-226- 1700
Fax: 613-226 - 1184
Pho ne: 905 -812-4400
Fax: 905-812-44 58
Future Electronics
http:/ / www.futu reelectron ics.com
Phone: 905-612-9200
Fax: 905-612- 9185
Phone: 613-7 27- 1800
Fax: 613-727-9819
Pioneer Standard
http:/ /www.pion eerstandard.com
Phone: 613 -226-8840
Fax: 613-226-635 2
Pho ne : 905 -405-8300
Fax: 905 -405-6423
Pho ne: 519-672-4666
Richardson Electronics
http:/ / www.rell.com
Phone : 514-939- 9640
UNITED STATES, CALIFORNIA
Arrow
Internet : www.arrow.co m
Pho ne: 619-565-4800
Fax: 619-565-295 9
Pho ne: 818-880-9686
Fax: 818-880-46 87

Sources of Material
Phone: 949 -587-0404
Fax : 949-454-4206
AVNET
Intern et: avnet.com
Phone: 81 8-59 4-0404
Fax: 858-385- 7500
Pho ne: 949-789-4100
Future Electronics
Internet: www.futureelectron ics.com
Pho ne: 949-453- 1515
Fax: 949-453- 1226
Phone: 619-625 -2800
Fax: 619- 625-2 810
M ouser Electronics
Internet: w w w.mouse r.com/ stmicro
Pho ne: 800-34 6-68 73
Fax: 619-449-6041
NU Horizons Electronics
http:/ / w w w.nuh ori zon s.com
Phone: 949-470- 1011
Fax: 949-470- 1104
Phon e: 619-576-0088
Fax: 619- 576-0990
Phone: 805-3 70- 151 5
Fax: 805-3 70-1525
Pioneer Standard
http:/ / w w w.pion eerstandard.com
Phone: 949- 753-50 90
Fax: 949- 753-5 074
295

296
CNC Robotics
Phone: 61 9-514- 7700
Fax: 61 9-514- 7799
Phon e: 818-865-5800
Fax: 81 8-865-5814
Richardson Electronics
htt p:/ / www.rell.com
Phone: 818-594-5600
Fax: 818-594-5650
Phone: 909 -600-0030
Fax: 909 -600-0064
Lineal Motion
The companies listed manufacture components used to ach ieve
lineal motion like bearings and guide rails or acme and ball
screws. Although 1 used INA bearings and guid e rails for my
machine, you can use w hichever product you want. This li st is
short and doesn't include every manufacturer of these products.
You will find that mos t of the companies on this li st are repre-
sented all over the world . Canadian Bearings is my local source for
lineal motion components; they carry man y of the parts produced
by the manufacturers on the list.
Distributor
Canadian Bearings Ltd .
500 Trillium Drive
Kitchener, Ontario
Canada N2R 1A7
Tel: 519- 748-5500
Fax: 519-748-5040
Toll Free: 1-800-265- 8206
After Hou rs: 51 9-5 75-2705
ht tp:/ / w ww.canadianbearings.com/

Sources of Material
Manufacturers
Bishop- Wisecarver Corporation
2104 Marti n Way
Pittsburg, CA 94565-502 7
Telephone: 925- 439-82 72
Toll Free: 888- 580- 8272
FAX: 925 -439-5931
http:/ / w ww.bwc.com/html/index.html
INA Canada, Inc.
2871 Plym outh Drive
Oakville, Ontario
Canada L6H 5S5
Tel.: 905 -8 29-2750
Fax: 905 -829- 2563
http :/ / w w w.ina.com/
INA USA Corporation
308 Springhill Farm Road
Fort M ill, SC 2971 5
Tel.: 803-548-8500
Fax: 803 -548- 8599
http:/ / w w w.ina.com/
INA Linear Technik
A Division of IN A USA CORPORATION
3650 D Cent re Drive
Fort M ill , SC 29 71 5
Tel.: 803- 802-05 tI
Fax: 803-802-0636
http:/ / w w w.ina.com /
297

298
CNC Robotics
NSK Americas
Head Office 4200 Goss Road
Ann Arbor, MI 48 105
Tel: 734 -913-7500
htt p:/ / w w w.nsk.com/
NSK Canada
Toronto/Head Office
5585 McAdam Road
Mississauga, Ontario
Canada L4Z 1N4
Tel: 905 -890-0740
Fax: 905-890-0434
SKF
AB SKF, SE-4 15 50 G6teborg, Sweden
Hornsgatan 1
Tel: + 46-31-337- 10-00
Fax: + 46 -31-337-28-32
http:/ /www.skf.com
SKF Canada Limited
40 Executive Court
Scarborough, Ontario
Canada M IS 4N4
Tel: 416-299- 1220
Fax: 416-292-0399
http:/ /www.skf.ca
SKF USA Inc.
11 11 Adams Avenue
Norristown, PA 19403 -2403
Tel: 610-630-2800
Fax: 610-630-2801
http:/ /www.skfusa.com

Sources of Material
SKF Motion Technologies
1530 Vall ey Center Pa rkway Suite 180
Bethlehem, PA 18017
Tel: 800-54 1-3624
Fax: 610- 861-4811
http:/ /www.linearmotion.skf.com/
THK Canada
130 Matheson East. Unit I
Mississauga, Ontario
Canada L4Z 1Y6
Tel: 905 -7 12-2 922
Fax: 905 - 712-2925
http:/ / WWW.lhk.com/
THK America, Inc.
Head Office
200 E. Commerce Drive
Schaumburg. IL 60173
Tel: 847 -3 10- 1111
Fax: 84 7- 310-1182
http:/ /www.thk.com /
Thomson Industries, Inc.
Corporate Headq uarters
2 Channel Drive
Port Washington , NY
11050
http :/ / ww w.thomsonind.com/default.htm
USA. Canada, or Mexico
Phon e 1-800-554-8466
Fax 1-516-8 83-903 9
Europe
Phone 44- 1271-334-5 00
Fax 44- 1271-334 -502
299

300
CNC Robotics
UK
Phone 0800- 975 -1000
Fax 0800-975-1001
France
Phone 0800-90-5 721
Fax 0800-91 - 63 15
Germany
Phon e 0800-1- 816- 553
Fax 0800- 1-816- 552
Elsewhere
Phone 1- 516- 883- 8000
Fax 1- 51 6-883-71 09
Stepper Motors
Princess Auto
P.O. Box 1005
W innipeg. Manitoba
Canada R3C 2W7
Ph: 204-667-4630
Fax: 204 -663-7663
In Canada Call Toll Free:
1-800-665-8685
Fax: 1-800-265-4212
htt p:/ / w w w.p rincessauto.com /
Pacific Scientific
4301 Kishwaukee Stre et
PO Box 106
Rockford. IL 61105-0106
Phone 815-226-3100
Fax 815- 226-3148
http:/ / w w w.pacsci .com/

Sources of Material
Sanyo Denki America, Inc.
468 Ama pola Avenue,
Torrance, CA 90501
Phone: 310-783-5400
Fax: 31 0-212- 6545
http:/ /www.sanyo-denki.com /
Metal
If yo u need a small qua ntity 01 metal and can't lind it at a scrap
yard,
then
a
good
place
to
look
is
a
sto re
called
Me ta l
Supermarkets. They have shops in Canada, the United States,
England,
Scotland,
and
Austria .
Go
to
t heir
Web
site
at
http:/ / w ww.metalsupermarkets.com/ to lind a loca l store.
M etal Supermarkets (Kitchener/Waterl oo)
5 Forwe ll Road, Unit 4
Kitchener, Ontario
Canada N2 B I W 3
Tel: 519- 742-8411
Fax: 519-742-9377
Toll Free: 800-742-8 620
301

Index
Note: Boldface numbers indicate illustrations.
ACME Profiler, 239-243, 240-242
acme screw, 9
Arrow Corporation, 292, 293
AutoCad, 12
AVNET Corpo ration, 293, 294
back EMF, in motors, 73-74
bearing guide rails
bearing holder in, 164- 173, 165-17 3
boll ho les in, 144- 150, 144- 150
X axis, 160- 164, 161- 164
Z axis fit and, 182, 182
beari ngs. lineal motion. 8
bipo iar motors, 48, 59, 64
Bishop- W isecarver Corporation. 296
bo lti ng the fra me together, 138- 140, 138 - 141
cabinetry, 281 -292
Canad ian Bearings Ltd" 295
capacitor installation in driver, 109-110, 110
case enclosure for electronics. 124-1 32, 125. 132
changing bi t size, 236, 237
chopper co ntro l and circuit, 54- 57, 54 , 55, 56, 65, 66-67, 67
circl e test fil e, 123- 124, 124
cleaning steel, 137, 137 , 138
cl eaning the pr inted circuit board , 82-84, 83, 84
cl ock pulse doub ler, L297, 59
303

304
CNC Robotics
CNC controls setting, 11 7, 11 7, 120, 120 ,218-219, 218, 219
computer connection
driver and interface board, 118-120, 118, 119
interface board between motors and. 13-15 . 13
interface board to limit switches. 19- 21. 20
continuity checking . 107
controller software, Ke arn, 215-219
controllers. motor, ST M icroelectronics manual on (Seealso L297; L298). 22-75
CorelDraw, I I, 12, 223 -239, 223
exporting fil es to KCam fro m, 226, 22 6, 227, 22 8
KCam use of, 224, 225, 226
layout options for, page size, shape . etc., 224, 225
offsetting G code to center the project, 238, 238, 239
texttes t.plt file in, 233, 234 , 234
vector grap hics V5. raster graphics in, 238-239
cost of CNC machines. 1- 2
cutting depth settings, 258
cutting steel , t 36, 136
cutting the printed circuit board. 82-84. 83 . 84
Data Exchange File ISee also DXF files) , 223
design, 1- 12
acme screw in. 9
dimensions in. 9- 10
front view,
JJ
ganl ry sty le in, 2
lineal motion in, 4-8
motor drivers, 9
motors for. 2-4, 3
side view, 10
software selection. 10-1 2
dimensions of machine, 9- 10
doo rs, 281- 282, 281, 28 2
dovetail joints, 283-286, 283, 284, 285, 286
Oremel tool
engraving with, 271- 274, 271-2 73
holder for, 252- 257, 252-2 57
drilling holes in PCB, 100-101 , 100, 101, 102
drills, 100, 100
driver, motor, 9. 15- 19. 17. 99- 112
bottom ar twork for, 79-80, 79
cables for, 128, 129
capacitor installation in. 109-110, 110
component placement and installation in. 104-108 , 105, 106
continuity checking in. 107
dr illing holes in , 100-101, 100, 101 , 102
finished product, 112
headers for, 108- J09, 109
heat sink for, III, III

Index
driver, motor (continued)
interface board connection to. 11 8- 120, 118, 119
interface board for, 111 - 112, 112
L298 ins talla tion in, 109, 109
leads in, 108
materials and tools for, 99 . 100
mo therboa rd mounting of, 126, 126
power supply for, 11 8
soldering in, 101, 103, 103
static electricity protection in, 104, 104
testing, 113- 132
top of driver boa rd, 80, 80
w iring, 110- 111, III
DXF files, 12, 219, 222-223
electronics, 13-75
case enclosure for, 124- 132, 125, 13 2
interface bo ard, 19- 21 , 20
interface boards, stepper motor driver and computer. 13- 15, 13
source s, 29 3-296
stepper motor driver circuit. 15-19 . 17
engravlng
Drcmel tool for, 271 -274, 271-2 73
engraving tool fo r, 268- 271, 268 - 27 1
Mas ter Craf t rotary tool for, 274-277, 274-277
etch ing process in PCB, 93-97, 93, 95, 96
Exellon fil es, 219
fan, 125, 128- 129
file format s, in programming, 12
frame, 133- 151
assembly of, 141 -144, 141, 142, 143
bearing rail support bolt ho les in , 144-150, t 44-1 50
bolting together, 138- 140, 138- 14 1
clean ing, 137, 137, 138
cutt ing steel for, 136, 136
dimensions of. 133- 134, 134
pa in tin g, 151
squa rin g and levelin g of, 141 -i 44, 141
tools and materia ls for, 122- 125
weldi ng together, 143- 144, 143
front view of CNC machine, II
Future Electronics. 293, 294
G code , ii, 219
gantry, 2, 153-160, 154
bear ing ho lder in , 164- 173, t 65 -1 73
bol t ho le locations in, 157 - 158, 158, 159
mounting and access hol es on uprigh ts, 156, 156, 157
305

306
CNC Rob otic s
gantry (continued)
spanning beams for. 155-1 56. 155. 156
tools and materials for, 153
upr ights and feet for. 155. 155. 159-1 60. 159 . 160
X ax is in . 160- 164. 161-164
Gerber fil es. 219
glass etching. 266- 267. 266. 267
guide rail s. 7. 7. 8
half- step sequence, in motor, 52, 52
heat sink for driver. 111, III
Hew lett Packard Graphics Language (Sec also HPGL files) . 222
HPGL files. 12. 21 9. 222- 223
import file creation for Kearn, 222-223
INA Inc.• 296
in terface board. 19- 21 . 20
artwork for, 80, 8 1
cables for. 128. 129
driver board connection to. 118-120, 11 8, 11 9
motherboard mounting of. 127. 127
stepper motor driver and computer. 13- 15. 13
joints. cabinetry. 283-286. 283. 284. 285 . 286
KCam and programm ing . 11- 12. 12. 13
ACME Profil er and . 239-243. 240-242
AutoCad in, 12
changing bit size and . 236. 23 7
CNC con trol selling in. 218-2 19. 218. 219
CNC Controller software for. 215- 219
converting text to curves in. 23 7, 237
CorelDra w and. II. 12. 223-239 . 223
cutting depth settings in, 258
downloading cop y of.
11 3- 11 4
file formats in . 12.219- 222
G code and com mands fo r. 11 . 21 9- 221
impo rt file creati on for, 222 - 223
insta llat ion of. II 3. 215
lathecorej .plt fil e. 287- 291
li netest. plt file in. 228 -230. 230
Iinetest2 .plt fil e in . 231 - 232. 233
M code and commands for, II, 220-222
machine setup file for. 258
offsetting G cod e to center the project. 238. 238. 239
openi ng. 21 5
port assignment in, 216, 217
shapes.plt file for. 261-262. 26 1. 262
software selectio n, 10-1 2

Index
Kearn and programming (continued)
system timing in , 217, 217
Table Setup w indow in, 215, 216
testtexl.plt file for, 260, 260, 26 1
textt est.plt file in , 233, 234, 234
tool size setting in, 234, 235, 236
user defined M codes for, 222
KellyWare (See also KCam), 113
L297 stepper motor con troller, IS , 18- 19,22- 75,22, 23,46
a version of (L297A), 57-58, 58
advantages of, 46-47
applicalion for, 29
bipolar stepper motor and, 59
block diagra m of, 23
circuit operation in, 2S
clock pulse doubler In, 59
DIP package mechanical data for, 30- 31, 30, 31
electrical characteristics of, 27- 28, 28
half step mod e in, 26, 26
L293E vs. 47
normal drive mode in, 26. 26
phase sequence in. 26
pin connections for. 23 , 62
pin function chart for. 24- 25
pin functions for, 61
sources for, 29 2
synchroni zation in. 29
unipolar motors and , 59
wave drive mode in. 27, 2 7
L298 H bridge IC, I S, 18-19, 33-75, 33
application informat ion in. 39
bidirectional control in. 38 . 40
block diagram of, 33
dimension data for. 42, 4 2
electrical cha racteristics of, 35 -36
installing in driver, 109. 109
ma xim um ratings tor, 34
muiti watt ISH, 43, 43
multiwatt 15V, 42, 42
PCB layout for, 41
pin connections for. 34
pin funct ions for, 35
PowerS020, 44, 44
satu ration voltage in, 36
sink current in, 38
sources for, 29 2
sw itching times in, 36, 3 7
thermal data on, 34
307

308
CNC Robotics
lath e, 286-292, 287
lathecore3.plt file, 28 7-291
limit switch
installation, 206-21 4, 207 , 208
interface board to computer. 19-2 1, 20
lineal motion . 4-8
bea rings in, 8
guide rails in. 7. 7. 8
suppliers of mat erial for, 296 -300
TV gli de tray assembly in, 8
Iinetest.plt file, 228-230, 230
linetest2.plt file in, 231 -232, 233
load current regulation. motor, 53-54. 54
losses. motors, 68
M code, II , 220-222
machin e setup file. Ke arn. 258
Mas ter Craft rotary tool engraving, 274-277 . 274- 277
materials, sources, 29 3-301
MDF as table board, 257, 258
mechanical engraving tool, engravings. 268- 271, 268-2 71
Me tal Supermarkets, 300
metal , suppliers of, 300
motor mounts, 190, 190 , 191 , 19 2
motors, 2- 4 , 3, 14
back EMF and, 73-74
bipolar, 48, 59, 64
cable connection s to, 130- 131, 130 , 131
chopper contro l fo r, 54- 57, 54, 55, 56, 65, 66-67, 67, 70- 73, 71
controllers for, ST M icroelectronics manua l on (Seea/so L297; L298). 22-75
drive top ology select ion for, 64-6 5, 64
dri ver for, 9, 15- 19, 17
flexi ble shaft coupling for, 198, 198
half step drive, 49, 52, 52
installation of. 189-214
interface board to comp uter and. 13- 15. 13
L297 step per motor co ntroller Ie for (See also L2971, I S, 18- 19, 22-75,
22, 23
L298 H bridge IC (See also L298), IS, 18- 19, 33-75, 33
lead screw centering and mounting. 193- 196. 193-196. 197
limit sw itch installa tion for, 206- 21 4, 207. 208
load current regulation in, 53-54 , 54
losses in, 68
minim um current in. 68, 69
mounts for. 190. 190. 191. 192
noise and, 70-73, 71. 72, 73
peak detect current in, 68. 69
phase sequence generation in, SO-53. 51. 52. 53
power dissipation in bridge Ie in. 68. 71

Index
motors (continued)
power supply for. 4. 15
problem s and solutions for. 64-75
ripple current in. 68
selection of, unipolar Y5. bipolar, 64
sources for used/ second-hand, 4
stepper motors, 48
stuck condition in. 74
suppliers for. 300- 301
tools and materia ls for installation of. 189
two pha se drive in . 49 . 52. 52
unipolar. 48. 50 . 60. 64. 66
variable reluctanc e, 50, SO
wave drive state sequence in, 53. 53
wind ing current in. 69, 70
wiring diagram for, S
X axis and. 190- 199. 193
X axis limit setting for. 208-209. 208. 209
Y axis and. 199- 203. 199-203
Y axis limit sett ing for. 209-210. 210
Z axi s and. 203-206 . 204- 206
Z axi s li mit setting for. 211-2i 4. 211-214
Mo user Electronics. 294
noise, in motors, 70-73, 71, 72, 73
NSK Inc.• 297
NU Horizons Electronics, 294
NuArc Model SST 1418 hori zontal camera. exploded view. 6, 7
Pacifi c Scient ific, i 3. 15.299
painting the frame. 151
peak detect current. in motors, 68, 69
pen holder, 246-252. 246- 252
phase sequence generation in motors, 50-53, 51, 52 . 53
Pioneer Standa rd. 293 . 295-296
plotter. 263-268, 26 4, 265
port assignment. 11 5. 116, 11 6. 118, 21 6.217
power supplies, 4, 15. 11 8, 129
connecting. 128, 128.
connector strips for. 127, 12 7
fan connection to, 128 -129
wi ring diagram for motors, S
Princess Auto, 13, 299
printed circuit board construction. 77- 97
aligning the artwork for, 85 , 85. 8 6
artwork for, 78-82
bottom of driver board, 79-80. 79
cleani ng, 82-84
cutting, 82- 84
309

310
CNC Robotics
printed circuit boardconstruction (continued)
drilling holes in , 100- 101 , 100, 101, 102
etching process in, 93-97, 93, 94, 95, 96
interface board, 80. 81
materials and too ls for, 77, 78
photo resist process in. 78
printing th e artwork for, 80-82
soldering in, 101, 103, 103
static electricity protection in, 104, 104
tinning in, 96. 9 7
toner transfer process in, 85-92 , 87 , 88, 89, 90, 91,92
top of driver board, 80, 80
printers, for PCB construction. 80-82
programming (See KCam and programming)
raster graphics, 238 - 239
ready rod, 9
Richardson Electro nics. 293. 295
ripple current. in motors. 68
rotar y tool eng raving (Master Craft), 274-2 77, 274- 277
route r
holder for, 252 -25 7, 252-257
routing with , 278 -292, 278-292
Sanyo Denki, 16, 300
shapes.pit file , 26 1- 262, 261, 262
side view of CNC machine. 10
sign makin g. 278-28 1, 278-280
SKF Inc., 298-299
software setup and driver testing. 10- 12, 113-13 2
case enclo sure for electronics and , 124- 132, 125, 132
circle test tile in, 123- 124, 124
CNC co ntrols sett ing in , 117, 117, 120, 120
Kea rn installat ion for. 11 3-11 4
materials nceded for. 113
port assignment in. 115. 11 6, 116. 11 8
Square-gc.txt test file for, 121, 122
steps setting <table setup) for motor in, 11 6-117 . 11 7
System Timing window for, 114-1 15. J14. J15
test file creation in. 121- 122
triangle test file tor, 122- I 23, 123
solder ing, 101, 103, 103
sources of materials, 293-301
springs tor tool holders, 249 , 250
Square- gc.txt test file, 121, 122
stained glass w indow plotter, 263 - 268 , 264
static electricity protection, 104, 104
stepper motor (See motors)
steps sett ing (table setup) tor motor, 116- 117, 117
system timing, 114-115 , 114, 115, 217,217

Index
Table Setup w indow, 215, 216
test tile creation. 121 - 122
testi ng the CNC machi ne, 257- 262
testtext.plt file, 260 , 260, 26 1
texttest.plt file, 233, 234, 234
THK Inc., 298
Thompson Ind ustries, 299- 300
tinning th e PCB, 96, 97
toner tran sfer process in PCB, 85- 92, 8 7. 88. 89, 90, 9\, 92
tool holders, 245- 285
Dremel tool holder. 252- 257, 252-257
pen holder, 246-252, 246-2 52
rou ter holder, 252- 257, 25 2-257
springs for, 249, 250
tool size setting in KCam, 234, 235, 236
tr ian gle test file, 122- 123, 123
TV glide tray assembly, li neal motion. 8, 175, 176
two-phase sequence, in motor, 52, 52
un ipolar motors, 48, 50, 60, 64, 66
user defined M codes, 222
variable reluctance motors, 50, 50
vector grap hics , 238-239
wa ve drive state sequence, motor, 53 , 53
welding th e frame together, 143- 144, 143
winding current, in motors, 69, 70
X axis, 160-1 64, 161-1 64
limi t sett ing for, 208- 209, 208, 209
motor installation and, 190- 199. 193
Y axis, 184- 187, 185-1 8 7
limit sett ing for. 209- 210, 210
motor installation and, 199-203, 19 9-203
tools and materials for, 184- 185
Z axis mounting holes for, 185, 185
Z axis, 175-1 84, 176
acme screw location in. 181, 181
bearing ho lder fit and. 182, 182
centering and mounting, 182- 184, 183, 184
li mit setting for, 211 - 214, 211 -214
motor installation and. 203- 206, 204- 206
tools and materials for, 175
TV gli de tray for, 175, 176
Y slide attachment in, 177, 177, 185, 185
z tool mounting surface for, 180 - 181 , 180, 181
311

-
,
About the Author
Geoff Will iams is a woodworking enthusias t who ow ns and
operates an at hletic flooring company in Ontario, Canada. Also a
professional photographer, he has extensive experience tro uble-
shoo ting and repa iring printed circuit boa rds.

£21.99

