LTE Optimization Engineering Handbook
www.ebook3000.com

LTE Optimization Engineering Handbook
Xincheng Zhang
China Mobile Group Design Institute Co., Ltd.
Beijing, China

This edition first published 2018
© 2018 John Wiley & Sons Singapore Pte. Ltd
All rights reserved. No part of this publication may be reproduced, stored in a retrieval system, or transmitted, in 
any form or by any means, electronic, mechanical, photocopying, recording or otherwise, except as permitted by 
law. Advice on how to obtain permission to reuse material from this title is available at http://www.wiley.com/go/
permissions.
The right of Xincheng Zhang to be identified as the author of this work has been asserted in accordance with law.
Registered Offices
John Wiley & Sons, Inc., 111 River Street, Hoboken, NJ 07030, USA
John Wiley & Sons Singapore Pte. Ltd, 1 Fusionopolis Walk, #07-01 Solaris South Tower, Singapore 138628
Editorial Office
1 Fusionopolis Walk, #07-01 Solaris South Tower, Singapore 138628
For details of our global editorial offices, customer services, and more information about Wiley products visit us at 
www.wiley.com.
Wiley also publishes its books in a variety of electronic formats and by print-on-demand. Some content that appears 
in standard print versions of this book may not be available in other formats.
Limit of Liability/Disclaimer of Warranty
While the publisher and authors have used their best efforts in preparing this work, they make no representations 
or warranties with respect to the accuracy or completeness of the contents of this work and specifically disclaim 
all warranties, including without limitation any implied warranties of merchantability or fitness for a particular 
purpose. No warranty may be created or extended by sales representatives, written sales materials or promotional 
statements for this work. The fact that an organization, website, or product is referred to in this work as a citation 
and/or potential source of further information does not mean that the publisher and authors endorse the information 
or services the organization, website, or product may provide or recommendations it may make. This work is sold 
with the understanding that the publisher is not engaged in rendering professional services. The advice and strategies 
contained herein may not be suitable for your situation. You should consult with a specialist where appropriate. 
Further, readers should be aware that websites listed in this work may have changed or disappeared between when 
this work was written and when it is read. Neither the publisher nor authors shall be liable for any loss of profit or 
any other commercial damages, including but not limited to special, incidental, consequential, or other damages.
Library of Congress Cataloging‐in‐Publication Data
Names: Zhang, Xincheng, 1970– author.
Title: LTE optimization engineering handbook / Xincheng Zhang, China Mobile Group  
  Design Institute Co., Beijing, China.
Description: Hoboken, NJ, USA : Wiley, [2017] | Includes bibliographical references and index. | 
Identifiers: LCCN 2017019394 (print) | LCCN 2017022857 (ebook) | ISBN 9781119159001 (pdf) |  
  ISBN 9781119158998 (epub) | ISBN 9781119158974 (cloth)
Subjects: LCSH: Long-Term Evolution (Telecommunications)–Handbooks, manuals, etc. |  
  Wireless communication systems–Handbooks, manuals, etc. | Computer network  
  protocols–Handbooks, manuals, etc.
Classification: LCC TK5103.48325 (ebook) | LCC TK5103.48325 .Z4325 2017 (print) | DDC 621.3845/6–dc23
LC record available at https://lccn.loc.gov/2017019394
Cover Design: Wiley
Cover Images: (Yin Yang) © alengo/Gettyimages; (Feng shui compass) © Liuhsihsiang/Gettyimages
Set in 10/12pt Warnock by SPi Global, Pondicherry, India
10  9  8  7  6  5  4  3  2  1
www.ebook3000.com

v
About the Author  xvi
Preface  xvii
Part 1 
LTE Basics and Optimization Overview  1
1	
LTE Basement 
3
1.1	
LTE Principle  3
1.1.1	
LTE Architecture  6
1.1.2	
LTE Network Interfaces  7
1.2	
LTE Services  11
1.2.1	
Circuit‐Switched Fallback  12
1.2.2	
Voice over LTE  13
1.2.3	
IMS Centralized Services  16
1.2.4	
Over the Top Solutions  16
1.2.5	
SMS Alternatives over LTE  17
1.2.6	
Converged Communication  19
1.3	
LTE Key Technology Overview  19
1.3.1	
Orthogonal Frequency Division Multiplexing  20
1.3.2	
MIMO  21
1.3.3	
Radio Resource Management  22
2	
LTE Optimization Principle and Method 
24
2.1	
­LTE Wireless Optimization Overview  24
2.1.1	
Why LTE Wireless Optimization  24
2.1.2	
Characters of LTE Optimization  24
2.1.3	
LTE Joint Optimization with 2G/3G  25
2.1.4	
Optimization Target  25
2.2	
LTE Optimization Procedure  26
2.2.1	
Optimization Procedure Overview  26
2.2.2	
Collection of Mass Nerwork Measurement Data  28
2.2.3	
Measurement Report Data Analysis  30
2.2.4	
Signaling Data Analysis  31
2.2.5	
UE Positioning  32
2.2.5.1	 Timing Advance  33
2.2.5.2	 Location Accuracy Evaluation  35
Contents

Contents
vi
2.2.5.3	
Location Support  36
2.2.5.4	
3D Geolocation  37
2.2.6	
Key Performance Indicators Optimization  42
2.2.7	
Technology Evolution of Optimization  43
2.3	
LTE Optimization Key Point  44
2.3.1	
RF Optimization  44
2.3.1.1	
RSRP/RSSI/SINR/CINR  44
2.3.1.2	
External Interference  48
2.3.2	
CQI versus RSRP and SINR  51
2.3.2.1	
CQI Adjustment  51
2.3.2.2	
SINR Versus Load  54
2.3.2.3	
SINR Versus MCS  56
2.3.3	
Channel Power Configuration  58
2.3.3.1	
RE Power  58
2.3.3.2	
CRS Power Boosting  64
2.3.3.3	
Power Allocation Optimization  66
2.3.4	
Link Adaption  67
2.3.5	
Adaptive Modulation and Coding  69
2.3.6	
Scheduler  70
2.3.6.1	
Downlink Scheduler  72
2.3.6.2	
Uplink Scheduler  74
2.3.7	
Radio Frame  75
2.3.8	
System Information and Timers  76
2.3.8.1	
System Information  76
2.3.8.2	
Timers  81
2.3.9	
Random Access  83
2.3.10	
Radio Admission Control  85
2.3.11	
Paging Control  86
2.3.11.1	 Paging  86
2.3.11.2	 Paging Capacity  92
2.3.11.3	 Paging Message Size  95
2.3.11.4	 Smart Paging  95
2.3.11.5	 Priority Paging  96
2.3.12	
MIMO and Beamforming  97
2.3.12.1	 Basic Multi‐Antenna Techniques  100
2.3.12.2	 2D‐Beamforming  101
2.3.12.3	 2D MIMO and Parameters  104
2.3.12.4	 Massive‐MIMO  105
2.3.13	
Power Control  107
2.3.13.1	 PUSCH/PUCCH Power Control  107
2.3.13.2	 PRACH Power Control  109
2.3.14	
Antenna Adjustment  111
2.3.14.1	 Antenna Position  112
2.3.14.2	 Remote Electrical Tilt  113
2.3.14.3	 Antenna Azimuths and  
Tilts Optimization  117
2.3.14.4	 VSWR Troubleshooting  118
2.3.15	
Main Key Performance Indicators  120
www.ebook3000.com

Contents
vii
Part 2 
Main Principles of LTE Optimization  123
3	
Coverage Optimization 
125
3.1	
Traffic Channel Coverage  125
3.1.1	
Parameters of Coverage  126
3.1.2	
Weak Coverage  128
3.1.2.1	
DL Coverage Hole  128
3.1.2.2	
UL Weak Coverage  128
3.1.2.3	
UL and DL Imbalance  129
3.1.3	
Overlapping Coverage  129
3.1.4	
Overshooting  130
3.1.5	
Tx1/Tx2 RSRP Imbalance  132
3.1.6	
Extended Coverage  132
3.1.7	
Cell Border Adjustment  135
3.1.8	
Vertical Coverage  137
3.1.9	
Parameters Impacting Coverage  138
3.2	
­Control Channel Coverage  138
4	
Capacity Optimization 
140
4.1	
RS SINR  140
4.2	
­PDCCH Capacity  141
4.3	
­PUCCH Capacity  144
4.3.1	
Factors Affecting PUCCH Capacity  145
4.3.2	
PUCCH Dimensioning Example  151
4.4	
­Number of Scheduled UEs  152
4.5	
Spectral Efficiency  153
4.6	
­DL Data Rate Optimization  154
4.6.1	
Limitation Factor  156
4.6.2	
Model of DL Data Throughput  157
4.6.3	
UDP/TCP Protocol  158
4.6.4	
MIMO  161
4.6.4.1	
DL MIMO  161
4.6.4.2	
4Tx/4Rx Performance  163
4.6.4.3	
Transmission Mode Switch  163
4.6.4.4	
UL MU‐MIMO  164
4.6.5	
DL PRB Allocation and Utilization Mechanism  165
4.6.6	
DL BLER  167
4.6.7	
Impact of UE Velocity  169
4.6.8	
Single User Throughput Optimization  170
4.6.8.1	
Radio Analysis – Assignable Bits  171
4.6.8.2	
Radio Analysis – CFI and Scheduling  171
4.6.8.3	
Radio Analysis – HARQ  171
4.6.9	
Avarage Cell Throughput Optimization  172
4.6.10	
Cell Edge Throughput Optimization  172
4.6.11	
Some Issues of DL Throughput  173
4.6.11.1	 Antenna Diversity not Balanced  173
4.6.11.2	 DL Grant is not Enough  173
4.6.11.3	 Unstable Rate  175

Contents
viii
4.7	
­UL Data Rate Optimization  175
4.7.1	
Model of UL Data Throughput  176
4.7.2	
UL SINR and PUSCH Data Rate  176
4.7.3	
PRB Stretching and Throughput  179
4.7.4	
Single User Throughput Optimization  180
4.7.4.1	 Radio Analysis – Available PRBs  181
4.7.4.2	 Radio Analysis—Link Adaptation  181
4.7.4.3	 Radio Analysis – PDCCH  182
4.7.5	
Cell Avarage and Cell‐edge Throughput Optimization  182
4.7.6	
Some Issues of UL Throughput  183
4.8	
Parameters Impacting Throughput  185
5	
Internal Interference Optimization 
188
5.1	
Interference Concept  188
5.2	
­DL Interference  190
5.2.1	
DL Interference Ratio  191
5.2.2	
Balance Between SINR and RSRP  192
5.3	
­UL Interference  192
5.3.1	
UL Interference Detection  194
5.3.2	
Generation of UL Interference  196
5.3.2.1	 Cell Loading Versus Inter‐Cell Interference  196
5.3.2.2	 Unreasonable UL Network Structure  197
5.3.2.3	 Cross slot interference  199
5.3.3	
PUSCH Tx Power Analysis  200
5.3.4	
UL Effect of P0 and α  202
5.3.5	
PRACH Power Control  204
5.3.6	
SRS Power Control  206
5.3.7	
Interference Rejection Combinin  209
5.4	
­Inter‐Cell Interference Coordination  210
5.5	
­UL IoT Control  210
5.5.1	
UL Interference Issues and Possible Solutions  210
5.5.2	
UL IoT Control Mechanism  210
5.5.3	
PUSCH UL_SINR Target Calculation  212
5.5.4	
UL Interference Criteria  213
6	
Drop Call Optimization 
216
6.1	
­Drop Call Mechanism  216
6.1.1	
Radio Link Failure Detection by UE  217
6.1.2	
RadioLink Failure Detection by eNB  220
6.1.2.1	 Link Monitors in eNB  220
6.1.2.2	 Time Alignment Mechanism  221
6.1.2.3	 Maximum RLC Retransmissions Exceeded  224
6.1.3	
RadioLink Failure Optimization and Recovery  225
6.2	
­Reasons of Call Drop and Optimization  227
6.2.1	
Reasons of E‐RAB Drop  227
6.2.2	
S1 Release  230
6.2.3	
Retainability Optimization  233
6.3	
­RRC Connection Reestablishment  233
6.4	
­RRC Connection Supervision  239
www.ebook3000.com

Contents
ix
7	
Latency Optimization 
244
7.1	
User Plane Latency  244
7.2	
Control Plane Latency  247
7.3	
Random Access Latency Optimization  247
7.4	
Attach Latency Optimization  248
7.5	
Paging Latency Optimization  250
7.6	
Parameters Impacting Latency  250
8	
Mobility Optimization 
254
8.1	
­Mobility Management  255
8.1.1	
RRC Connection Management  256
8.1.2	
Measurement and Handover Events  256
8.1.3	
Handover Procedure  260
8.1.3.1	
X2 Handover  261
8.1.3.2	
S1 Handover  267
8.1.3.3	
Key point of X2/S1 Handover  267
8.2	
­Mobility Parameter  269
8.2.1	
Attach and Dettach  272
8.2.2	
UE Measurement Criterion in Idle Mode and Cell Selection  273
8.2.3	
Cell Priority  276
8.3	
­Intra‐LTE Cell Reselection  276
8.3.1	
Cell Reselection Procedure  278
8.3.2	
Inter‐Frequency Cell Reselection  279
8.3.3	
Cell Reselection Parameters  282
8.3.4	
Inter‐Frequency Reselection Optimization  283
8.4	
­Intra‐LTE Handover Optimization  285
8.4.1	
A3 and A5 Handover  285
8.4.2	
Data Forwarding  290
8.4.3	
Intra‐Frequency Handover Optimization  291
8.4.4	
Inter‐Frequency Handover Optimization  292
8.4.5	
Timers for Handover Failures  296
8.5	
­Neighbor Cell Optimization  297
8.5.1	
Intra‐LTE Neighbor Cell Optimization  297
8.5.1.1	
Neighbor Relations Table  297
8.5.1.2	
ANR  298
8.5.2	
Suitable Neighbors for Load Balancing  299
8.6	
­Measurement Gap  299
8.6.1	
Measurement Gap Pattern  299
8.6.2	
Measurement Gap Versus Period of CQI Report and DRX  304
8.6.3	
Impact of Throughput on Measurement Gap  304
8.7	
­Indoor and Outdoor Mobility  305
8.8	
­Inter‐RAT Mobility  306
8.8.1	
Inter‐RAT Mobility Architecture and Key Technology  307
8.8.2	
LTE to G/U Strategy  309
8.8.3	
Reselection Optimization  314
8.8.3.1	
LTE to UTRAN  315
8.8.3.2	
UTRAN to LTE  319
8.8.4	
Redirection Optimization  320
8.8.4.1	
LTE to UTRAN  320

Contents
x
8.8.4.2	
UTRAN to LTE  322
8.8.5	
PS Handover Optimization  322
8.8.5.1	
LTE to UTRAN  322
8.8.5.2	
UTRAN to LTE  324
8.8.6	
Reselection and Redirection Latency  325
8.8.7	
Optimization Case Study  326
8.9	
­Handover Interruption Time Optimization  326
8.9.1	
Control Plane and User Plane Latency  329
8.9.2	
Inter‐RAT Mobility Latency  332
8.10	
­Handover Failure and Improvement  332
8.11	
­Mobility Robustness Optimization  335
8.12	
­Carrier Aggregation Mobility Optimization  341
8.13	
­FDD‐TDD Inter‐mode Mobility Optimization  345
8.14	
­Load Balance  346
8.14.1	
Inter‐Frequency Load Balance  346
8.14.2	
Inter‐RAT Load Balance  348
8.14.3	
Load Based Idle Mode Mobility  349
8.15	
­High‐Speed Mobile Optimization  351
8.15.1	
High‐Speed Mobile Feature  353
8.15.2	
Speed‐Dependent Cell Reselection  354
8.15.3	
PRACH Issues  356
8.15.4	
Solution for Air to Ground  358
9	
Traffic Model of Smartphone and Optimization 
360
9.1	
­Traffic Model of Smartphone  360
9.1.1	
QoS Mechanism  362
9.1.2	
Rate Shaping and Traffic Management  366
9.1.3	
Traffic Model  371
9.2	
­Smartphone‐Based Optimization  372
9.3	
­High‐Traffic Scenario Optimization  372
9.3.1	
Resource Configuration  374
9.3.2	
Capacity Monitoring  375
9.3.3	
Special Features and Parameters for High Traffic  377
9.3.4	
UL Noise Rise  379
9.3.5	
Offload Solution and Parameter Settings  379
Part III 
Voice Optimization of LTE  383
10	
Circuit Switched Fallback Optimization 
385
10.1	
­Voice Evolution  385
10.2	
­CSFB Network Architecture and Configuration  386
10.2.1	
CSFB Architecture  386
10.2.2	
Combined Register  387
10.2.3	
CSFB Call Procedure  392
10.2.3.1	 Fallback Options  392
10.2.3.2	 RRC Release with Redirection  393
10.2.3.3	 CSFB Call Procedure  395
10.2.4	
Mismatch Between TA and LA  397
www.ebook3000.com

Contents
xi
10.3	
­CSFB Performance Optimization  402
10.3.1	
CSFB Optimization  402
10.3.1.1	
Main Issues of CSFB  402
10.3.1.2	
CSFB Optimization Method  403
10.3.2	
CSFB Main KPI  407
10.3.3	
Fallback RAT Frequency Configuration Optimization  409
10.3.4	
Call Setup Time Latency Optimization  411
10.3.4.1	
ESR to Redirection Optimization  416
10.3.4.2	
Twice Paging  416
10.3.5	
Data Interruption Time  418
10.3.6	
Return to LTE After Call Complete  419
10.4	
­Short Message Over CSFB  422
10.5	
­Case Study of CSFB Optimization  423
10.5.1	
Combined TA/LA Updating Issue  423
10.5.2	
MTRF Issue  425
10.5.3	
Track Area Update Reject After CSFB  425
10.5.3.1	
No EPS Bearer Context Issue  428
10.5.3.2	
Implicitly Detach Issue  428
10.5.3.3	
MS Identity Issue  428
10.5.4	
Pseudo Base Station  428
11	
VoLTE Optimization 
434
11.1	
­VoLTE Architecture and Protocol Stack  435
11.1.1	
VoLTE Architecture  435
11.1.2	
VoLTE Protocol Stack  435
11.1.3	
VoLTE Technical Summary  438
11.1.4	
VoLTE Capability in UE  439
11.2	
­VoIP/Video QoS and Features  442
11.2.1	
VoIP/Video QoS  442
11.2.2	
Voice Codec  444
11.2.3	
Video Codec  446
11.2.4	
Radio Bearer for VoLTE  449
11.2.5	
RLC UM  454
11.2.6	
Call Procedure  457
11.2.6.1	
LTE Attach and IMS Register  458
11.2.6.2	
E2E IMS Flow  458
11.2.6.3	
Video Phone Session Handling  462
11.2.7	
Multiple Bearers Setup and Release  466
11.2.8	
VoLTE Call On‐Hold/Call Waiting  467
11.2.9	
Differentiated Paging Priority  468
11.2.10	
Robust Header Compression  470
11.2.10.1	 RoHC Feature  470
11.2.10.2	 Gain by RoHC  470
11.2.11	
Inter‐eNB Uplink CoMP for VoLTE  475
11.3	
­Semi‐Persistent Scheduling and Other Scheduling Methods  477
11.3.1	
SPS Scheduling  477
11.3.2	
SPS Link Adaptation  478
11.3.3	
Delay Based Scheduling  481
11.3.4	
Pre‐scheduling  482

Contents
xii
11.4	
­PRB and MCS Selection Mechanism  484
11.4.1	
Optimized Segmentation  484
11.4.2	
PRB and MCS Selection  485
11.5	
­VoLTE Capacity  486
11.5.1	
Control Channel for VoLTE  487
11.5.2	
Performance of Mixed VoIP and Data  488
11.6	
­VoLTE Coverage  491
11.6.1	
VoIP Payload and RoHC  492
11.6.2	
RLC Segmentation  492
11.6.3	
TTI Bundling  498
11.6.4	
TTI Bundling Optimization  502
11.6.5	
Coverage Gain with RLC Segmentation and TTI Bundling  507
11.6.6	
MCS/TBS/PRB Selection  509
11.6.7	
Link Budget  510
11.7	
­VoLTE Delay  513
11.7.1	
Call Setup Delay  516
11.7.1.1	 Call Setup Time  516
11.7.1.2	 Reasons for Long Call Setup Time  516
11.7.2	
Conversation Start Delay  519
11.7.3	
RTP Delay  521
11.7.4	
Handover Delay and Optimization  525
11.8	
­Intra‐LTE Handover and eSRVCC  527
11.8.1	
Intra‐Frequency Handover  527
11.8.2	
Inter‐Frequency Handover  528
11.8.3	
Single Radio Voice Call Continuity Procedure  529
11.8.4	
SRVCC Parameters Optimization  539
11.8.4.1	 Handover Parameters  539
11.8.4.2	 SRVCC–Related Timer  539
11.8.5	
aSRVCC and bSRVCC  543
11.8.6	
SRVCC Failure  543
11.8.7	
Reducing SRVCC Voice Gap and eSRVCC  545
11.8.7.1	 Voice Interruption Time during SRVCC  545
11.8.7.2	 eSRVCC  549
11.8.8	
Fast Return to LTE  552
11.8.9	
Roaming Behavior According to Network Capabilities  555
11.9	
­Network Quality and Subjective Speech Quality  555
11.9.1	
Bearer Latency  558
11.9.2	
MoS  561
11.9.2.1	 Voice Quality  561
11.9.2.2	 Video Quality  570
11.9.3	
Jitter  571
11.9.4	
Packet Loss  572
11.9.5	
One Way Audio  575
11.9.6	
PDCP Discard Timer Operation  576
11.10	
­Optimization  577
11.10.1	
Distribution of Main Indicators of Field Test  580
11.10.2	
Compression Ratio and GBR Throughput  584
11.10.3	
RB Utilization  584
11.10.4	
BLER Issue  587
www.ebook3000.com

Contents
xiii
11.10.5	
Quality Due to Handover  589
11.10.6	
eSRVCC Handover Issues  589
11.10.7	
Packet Loss  592
11.10.7.1	
Packet Loss due to Poor RF  592
11.10.7.2	
Packet Loss due to Massive users  592
11.10.7.3	
Packet Loss Due to Insufficient UL grant  592
11.10.7.4	
Packet Loss due to Handover  601
11.10.7.5	
Packet Loss Due to Network Issue  601
11.10.8	
Call Setup Issues  601
11.10.8.1	
Missed Pages  602
11.10.8.2	
IMS Issues  604
11.10.8.3	
Dedicated Bearer Setup Issues  609
11.10.8.4	
CSFB Call Issues  612
11.10.8.5	
aSRVCC Failure  612
11.10.8.6	
RF Issues  612
11.10.8.7	
Frequent TFT Updates  617
11.10.8.8	
Encryption Issue  618
11.10.9	
Call Drop  619
11.10.9.1	
Call Drop  619
11.10.9.2	
Radio Link Failure  622
11.10.9.3	
RTP‐RTCP Timeout  624
11.10.9.4	
RLC/PDCP SN Length Mismatch  626
11.10.9.5	
IMS Session Drop  626
11.10.9.6	
eNB/MME Initiated Drop  632
11.10.10	
Packet Aggregation Level  632
11.10.11	
VoIP Padding  633
11.10.12	
VoIP Ralated Parameters  635
11.10.13	
Video‐Related Optimization  635
11.10.13.1	
Video Bit Rate and Frame Rate  637
11.10.13.2	
Video MoS and Audio/Video Sync  637
11.10.14	
IMS Ralated Timer  637
11.11	
­UE Battery Consumption Optimization for VoLTE  638
11.11.1	
Connected Mode DRX Parameter  643
11.11.2	
DRX Optimization  644
11.11.2.1	
State Estimation  644
11.11.2.2	
DRX Optimization and Parameters  644
11.11.2.3	
KPI Impacts with DRX  648
11.11.3	
Scheduling Request Periodicity and Disabling of Aperiodic CQI  652
11.12	
­Comparation with VoLTE and OTT  654
11.12.1	
OTT VoIP User Experience  654
11.12.2	
OTT VoIP Codec  657
11.12.3	
Signaling Load of OTT VoIP  658
Part IV 
Advanced Optimization of LTE  663
12	
PRACH Optimization 
665
12.1	
­Overview  665
12.2	
­PRACH Configuration Index  669
12.3	
­RACH Root Sequence  673

Contents
xiv
12.4	
­PRACH Cyclic Shift  674
12.4.1	
PRACH Cyclic Shift Optimization  674
12.4.2	
Rrestricted Set  679
12.5	
­Prach Frequency Offset  682
12.6	
­Preamble Collision Probability  683
12.7	
­Preamble Power  684
12.8	
­Random Access Issues  687
12.9	
­RACH Message Optimization  689
12.10	
­Accessibility Optimization  692
12.10.1	
Reasons for Poor Accessibility  692
12.10.2	
Accessibility  693
12.10.3	
Accessibility Analysis Tree  695
12.10.4	
Call and Data Session Setup Optimization  697
12.10.5	
RACH Estimation for Different Traffic Profile  698
13	
Physical Cell ID Optimization 
702
13.1	
­Overview  702
13.2	
­PCI Optimization Methodology  703
13.2.1	
PCI Group Optimization  705
13.2.2	
PCI Code Reuse Distance  705
13.2.3	
Mod3/30 Discrepancy Analysis  708
13.2.4	
Collision and Confusion  708
13.3	
­PCI Optimization  709
14	
Tracking Areas Optimization 
711
14.1	
­TA Optimization  712
14.1.1	
TA Update Procedure  713
14.1.2	
TA Optimization and TAU Failure  715
14.2	
­TA List Optimization  716
14.3	
­TAU Reject Analysis and Optimization  719
15	
Uplink Signal Optimization 
721
15.1	
­Uplink Reference Signal Optimization  721
15.1.1	
Coding Scheme of UL RS  722
15.1.2	
Correlation of UL Sequence Group  723
15.1.2.1	 UL Sequence Group Hopping  725
15.1.2.2	 UL Sequence Hopping  726
15.1.2.3	 UL Cyclic Shift Hopping  726
15.1.3	
UL Sequence Group Optimization  727
15.2	
­Uplink Sounding Signal Optimization  729
15.2.1	
SRS Characters  730
15.2.2	
Wideband SRS Coverage  736
15.2.3	
Dynamic SRS Adjustment Scheme  736
15.2.4	
SRS Selection Dimension and Confliction  737
15.2.5	
SRS Conflict and Optimization  739
16	
HetNet Optimization 
741
16.1	
­UE Geolocation and Identification of Traffic Hot Spots  741
16.2	
­Wave Propagation Characteristics for HetNet  745
www.ebook3000.com

Contents
xv
16.3	
­New Features in HetNet  746
16.4	
­Combined Cell Optimization  747
16.5	
­Cell Range Expansion Offset  748
16.6	
­HetNet Cell Reselection and Handover Optimization  751
17	
QoE Evaluation and Optimization Strategy 
752
17.1	
­QoE Modeling  753
17.2	
­Data Collecting and Processing  756
17.3	
­QoE‐Based Traffic Evaluation  757
17.3.1	
Online Video QoE  757
17.3.1.1	 Video Quality Monitoring Methods  761
17.3.1.2	 RATE Adaptive Video Codecs  763
17.3.1.3	 Streaming KPI and QoE  764
17.3.1.4	 Video Optimization  766
17.3.2	
Voice QoE  769
17.3.3	
Data Service QoE  770
17.3.3.1	 Web browsing  770
17.3.3.2	 Online Gaming  774
17.4	
­QoE Based Optimization  776
18	
Signaling‐Based Optimization 
780
18.1	
­S1‐AP Signaling  780
18.1.1	
NAS signaling  782
18.1.2	
Inactivity Supervision  783
18.1.3	
UE signaling Management  785
18.2	
­Signaling radio bearers  786
18.3	
­Signaling Storm  788
18.4	
­Signaling Troubleshooting Method  788
18.4.1	
Attach Failure  788
18.4.2	
Service Request Failure  796
18.4.3	
S1/X2‐Based Handover  796
18.4.4	
eSRVCC Failure  798
18.4.5	
CSFB Failure  800
Appendix  802
Glossary of Acronyms  820
References  823
Index  825

xvi
Xincheng Zhang graduated from the Beijing University of 
Posts and Telecommunications in 1992. He has worked in 
mobile communication for 25 years as a technical expert 
with a solid understanding of wireless communication 
technologies. Starting out in the early days of GSM roll-
outs, he has many years of planning and optimization 
experience in 2G, 3G, 4G, and 5G networks, working in 
operator and vendor environments. He is working as a 
­senior wireless network specialist in the fields of antenna 
arrays, analog/digital signal processing, radio resource 
management, and propagation modeling, and so on. He 
has participated in many large‐scale wireless communica-
tion system designs and optimization for a variety of cel-
lular systems using various radio access technologies, 
including GSM, CDMA, UMTS, and LTE.
About the Author
www.ebook3000.com

xvii
Preface
Mobile communication has become ubiquitous and mobile Internet traffic is continuously 
growing due to the technology that provides broadband data rates (3G, LTE) and the growing 
number of mobile dongles and mobile devices like tablets or smartphones that enable the usage 
of a tremendous number of internet applications through the mobile access. Mobility, broad-
band, and new device technology have changed the way people connect and communicate. 
Smartphones have changed the characteristics of the control and user plane, leading to a huge 
impact on RAN and e2e network capacity, end‐user experience, and perception of the network, 
which has changed with the advent of new devices and applications. Subscribers want the same 
internet experience that they have at home, anytime, anywhere, so the long‐term network is 
under strain and optimization is needed.
Many of the new services aim to enhance the experience of a phone conversation by allowing 
sharing of content other than speech. The quality of all these services needs to be monitored to 
ensure that users experience a high‐quality service. Low‐bit cost is an essential requirement 
in a scenario where high volumes of data are being transmitted over the mobile network. 
To achieve the proposed goals, a very flexible network that aggregates various radio access tech-
nologies is created. This network should provide high bandwidth, from 50‐100 Mbps for high 
mobility users, to 1Gbps for low mobility users, technologies that permit fast handoffs, which 
is necessary in a QoS framework that enables fair and efficient medium sharing among users. 
The core of this network should be based on internet protocol version 6—IPv6, the probable 
convergence platform of future services. The other key factor to the success of the network is 
that the terminals must be able to provide wireless services anytime, everywhere, and must 
adapt seamlessly to multiple wireless networks, each with different protocols and technologies. 
Subscriber loyalty has shifted to devices and applications; quality of experience becomes the 
fundamental service provider’s differentiation.
In this background, the 3GPP long term evolution (LTE) is created and adopted all over the 
world. High‐speed, high‐capacity data standard for mobile devices is on its way to becoming a 
globally deployed standard for the fourth generation of mobile networks (4G) supported by all 
major players in the industry. LTE builds on EUTRAN, a new generation radio access network, 
and the evolved packet core (EPC), which provides flexible spectrum usage and bandwidths, 
high data rate, low latency, and optimized resource usage. As LTE has been used as a mobile 
broadband service, we need to understand the effects of the LTE terminals providing services 
and how to optimize the network. Actually, for operators, the challenge is not only to optimize 
2G, 3G, and 4G but also how to balance the use of those systems, including WiFi. The entire 
service delivery chain needs to be optimized and the optimization aims to improve network 
efficiency and the mobile broadband service quality.

Preface
xviii
It is known that LTE doesn’t have basic voice and SMS support. To mitigate this, 3GPP 
­proposes a fallback to circuit‐switched (CS) network for voice and SMS. Although voice has 
loosened its weight in the overall user bill with the rise of more and more data services, voice is 
the dominant source of revenue for operators and is expected to remain so for the foreseeable 
future. On one hand, 3GPP defines the concept of CS fallback for the EPC, which forces the UE 
to fall back to the GERAN/UTRAN network where the CS procedures are carried out. On the 
other hand, voice over LTE will become a mainstream mobile voice technology. VoLTE ecosys-
tem is building up fast due to its strong end‐to‐end VoLTE solution portfolio including the LTE 
radio, EPC, mobile softswitch, IMS, and its extensive delivery capabilities of complex end‐to‐
end projects. It is the world’s most innovative voice solution for LTE‐based networks and big 
VoLTE growth is expected since wide‐scale commercial VoLTE started in Korea during 2012. 
The operators will want to have the best possible observability for this new voice service with 
fast call setup, low latency, and high speech quality. Actually, VoLTE will be among the most 
critical and complex technologies mobile operators will ever deploy as VoLTE testing is quite 
complex due to inherent intricacy of the technology covering the IMS/EPC core, radio net-
work, and UE/IMS client. They expect to be able to monitor how their customers experience 
accessibility, retainability, as well as the quality of the voice service. Obviously, much of the 
observability is already in place, but there are reasons to believe that there are missing parts.
Under this background, to meet customers’ requirements for high‐quality networks, LTE 
trial networks must be optimized during and after project implementation. The basis and the 
main inputs that allowed the creation of this handbook were based on optimization experience, 
whereas the scope of this book is to provide network engineers with a set of processes and tasks 
to guide them through the troubleshooting and optimization. For a network optimization engi-
neer, he/she needs to know how good the quality of mobile broadband applications is, and how 
the network capabilities impact the performance, and how to identify the most critical network 
KPIs that impact customer experiences.
This book is divided into four parts. The first is called “LTE Basics and Optimization 
Overview,” and proceeds with an introduction to general principles of data transfer of LTE. 
This chapter is dedicated to the reader who is not acquainted with this area. The second part, 
titled “Main Principles of LTE Optimization,” and the third part, “Voice Optimization of LTE,” 
makes up the core of the book, since it describes coverage, capacity, interference, mobility opti-
mization, and includes two chapters that provide step‐by‐step optimization of CFSB and 
VoLTE. The fourth part “Advanced Optimization of LTE” takes a more applied perspective in 
PRACH, PCI, TA, QoE, Hetnet, and signaling optimization.
Thanks to the many people in China who shared their views acquired from years of experi-
ence and valuable insights in wireless optimization, the Optimization Handbook covers the 
basics of optimization rules, solutions, and methods. It is evident that this book does not cover 
many other important areas of optimization of LTE networks. Nonetheless, I sincerely hope 
that readers will find the information presented to be interesting and useful to inspire you to go 
and do optimization with a renewed vigor in order to help you build a better LTE network.
January 1, 2017
Xincheng Zhang
www.ebook3000.com

1
Part 1
LTE Basics and Optimization Overview

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
3
Mobile networks are rapidly transforming—traffic growth, bit rate increases for the user, 
increased bit rates per radio site, new delivery schemes (e.g., mobile TV, quadruple play, IMS), 
and a multiplicity of RANs (2G, 3G, HSPA, WiMAX, LTE)—are the main drivers of the mobile 
network evolution. The growth in mobile traffic is mainly driven by devices (e.g., smartphone 
and tablet) and applications (e.g., mainly web browsing and video streaming). To cope with 
the increasing demand, mobile networks have based their evolution on increasingly IP‐centric 
solutions. This evolution relies primarily on the introduction of IP transport, and secondly, on 
a redesign of the core nodes to take advantage of the IP backbones.
The first commercial LTE network was opened by Teliasonera in Sweden in December 2009, 
and marks the new era of high‐speed mobile communications. The incredible growth of LTE 
network launches boomed between 2012 and 2016 worldwide. It is expected that more than 
500 operators in nearly 150 countries will soon be running a commercial LTE network. Mobile 
data traffic has grown rapidly during the last few years, driven by the new smartphones, large 
displays, higher data rates, and higher number of mobile broadband subscribers. It is expected 
that the mobile broadband (MBB) subscriber numbers will double by 2020, reaching over 
7 billion subscribers, that MBB data traffic will grow fourfold by 2020, reaching over 19 petabytes/
month. The internet traffic, MBB subscriber, and relative mobile data growth is illustrated in 
Figure 1.1.
1.1  ­LTE Principle
To provide a fully mature, real‐time–enabled, and MBB network, structural changes are needed 
in the network. In 2005, the 3GPP LTE project was created to improve the Universal Mobile 
Telecommunications System (UMTS) mobile phone standard to cope with future require-
ments, which resulted in the newly evolved Release 8 (Rel 8) of the UMTS standard. The goals 
include improving efficiency, lowering costs, improving services, making use of new spectrum 
opportunities, and better integration with other open standards. Long‐term evolution (LTE) is 
selected as the next generation broadband wireless technology for 3GPP and 3GPP2. The LTE 
standard supports both FDD (frequency division duplex), where the uplink and downlink 
channel are separated in frequency, and TDD (time division duplex), where uplink and downlink 
share the same frequency channel but are separated in time. After Rel 8, Rel 9 was a relatively 
small update on top of Rel 8, and Rel 10 provided a major step in terms of data rates and capacity 
with carrier aggregation, higher‐order Multi‐Input‐Multi‐Output (MIMO) up to eight antennas 
in downlink and four antennas in uplink. The support for heterogeneous network (HetNet) 
was included in Rel 10, also known as LTE‐Advanced (Figure 1.2).
1
LTE Basement
www.ebook3000.com

MBB subscriber growth
0
1,000
2,000
3,000
4,000
5,000
6,000
7,000
8,000
2005
2006
2007
2008
2009
2010
2011
2012
2013
2014
2015
2016
2017
2018
2019
2020
MBB  Subscriber in Million
Mobile traffic type (Source: ABI Research)
140,000.0
120,000.0
100,000.0
80,000.0
60,000.0
40,000.0
20,000.0
0.0
2011
2012
2013
2014
2015
2016
2017
2018
2019
Audio Streaming
P2P
Video Streaming / TV
VoIP
Web / Internet
Rich text Email
Web Surfing
Video Streaming
Ecommerce
VoIP (VoLTE)
Video
Conferencing
Text Email
Internet traffic on LTE
low
high
low
high
Delay demand
Bandwidth demand
MBB data traffic
Mobile Data Traffic
20 000
18 000
16 000
14 000
12 000
10 000
8 000
6 000
4 000
2 000
0
Europe
LAT
APAC total
MEA
NAM
2005
2006
2008
2007
2009
2010
2011
2012
2013
2014
2015
2016
2017
2018
2019
2020
Figure 1.1 The internet traffic, MBB subscriber, and relative mobile data growth.

LTE Basement
5
Among the design targets for the first release of the LTE standard are a downlink bit rate of 
100 Mbit/s and a bit rate of 50 Mbit/s for the uplink with a 20‐MHz spectrum allocation. 
Smaller spectrum allocation will of course lead to lower bit rates and the general bit rate 
can be expressed as 5 bits/s/Hz for the downlink and 2.5 bits/s/Hz for the uplink. Rel 10 
(LTE‐Advanced), was completed in June 2011 and the first commercial carrier aggregation 
network started in June 2013 (Figure 1.3).
LTE provides global mobility with a wide range of services that includes voice, data, and 
video in a mobile environment with lower deployment cost. The main benefits of LTE include 
(Figure 1.4):
●
●Wide spectrum and bandwidth range, increased spectral efficiency and support for higher 
user data rates
GSM
9.6 kbit/s
GPRS
171.2 kbit/s
EDGE
473.6 kbit/s
UMTS
2 Mbit/s
HSDPA
14.4 Mbit/s
HSUPA
5.76 Mbit/s
HSPA+
28.8 Mbit/s
42 Mbit/s
LTE
+300 Mbit/s
Phase 1
Phase 2+
(Release 97) 
Release 99
Release 99
Release 5
Release 6
Release 7/8
Release 8
Release 9/10
LTE
Advanced 
Figure 1.2  3GPP standard evolution.
10 Gbps
1 Gbps
100 Mbps
10 Mbps
1 Mbps
100 Kbps
2000
2005
2010
2015
2020
WCDMA,
CDMA2000
HSDPA, HDR
LTE
LTE-A
5G
5G in 2020
(Ave. ~1Gbps
Peak ~5Gbps)
Cat. 11 (Ave. ~240Mbps,
Peak ~600Mbps)
Cat. 9 (Ave. ~180Mbps, Peak ~450Mbps)
Cat. 6 (Ave. ~120Mbps, Peak 300Mbps)
Cat. 4 (Ave. ~24Mbps, Peak 150Mbps)
Cat. 3 (Ave. ~12Mbps, Peak 100Mbps)
HSDPA (Ave. ~2Mbps, Peak 14Mbps)
Average
Peak
Figure 1.3  Downlink data rate evolution.
www.ebook3000.com

LTE Optimization Engineering Handbook
6
●
●Reduced packet latency and rich multimedia user experience, excellent performance for 
outstanding quality of experience
●
●Improved system capacity and coverage as well as variable bandwidth operation
●
●Cost effective with a flat IP architecture and lower deployment cost
●
●Smooth interaction with legacy networks
LTE air interface uses orthogonal frequency division multiple access (OFDMA) for downlink 
transmission to achieve high peak data rates in high spectrum bandwidth. LTE uses single ­carrier 
frequency division multiple access (SC‐FDMA) for uplink transmission, a technology that pro-
vides advantages in power efficiency. LTE supports both FDD and TDD modes, with FDD, DL, 
and UL transmissions performed simultaneously in two different frequency bands, with TDD, DL, 
and UL transmissions performed at different time intervals within the same ­frequency band. LTE 
supports advanced adaptive MIMO, balance average/peak throughput, and coverage/cell‐edge 
bit rate. Compared to 3G, significant reduction in delay over air interface can be supported in 
LTE, and it is suitable for real‐time applications, for example, VoIP, PoC, gaming, and so on.
Spectrum is a finite resource and FDD and TDD system will support the future demand, which 
are shown in Figure 1.5. TDD spectrum can provide 100‐150MHz of additional bandwidth per 
operator, TD‐LTE spectrum with large bandwidth will be a key to operators future network 
strategy and one of the way to address capacity growth.
1.1.1  LTE Architecture
LTE is predominantly associated with the radio access network (RAN). The eNodeB (eNB) 
is the component within the LTE RAN network. LTE RAN provides the physical radio link 
between the user equipment (UE) and the evolved packet core network. The system archi-
tecture evolution (SAE) specifications defines a new core network, which is termed as 
evolved packet core (EPC) including all internet protocol (IP) networking architectures 
(Figure 1.6).
Evolved NodeB (eNB): Provides the LTE air interface to the UEs, the eNB terminates the user 
plane (PDCP/RLC/MAC/L1) and control plane (RRC) protocols. Among other things, it 
performs radio resource management and intra‐LTE mobility for the evolved access system. 
At the S1 interface toward the EPC, the eNB terminates the control plane (S1AP) and the 
user plane (GTP‐U).
“Cell Edge” Tput
~0.06bps/Hz
(95% coverage)
cell edge
cell centre
100%
50%
5%
CDF
Tput
“Average” Tput
~0.12bps/Hz
Figure 1.4  Throughput of a user, 10 users evenly distributed in cell.

LTE Basement
7
Mobility Management Entity (MME): A control plane node responsible for idle mode UE 
tracking and paging procedures. The Non‐Access Stratum (NAS) signaling terminates at 
the MME. Its main function is to manage mobility, UE identities, and security parameters. 
The MME is involved in the EPS bearer activation, modification, deactivation process, and 
is also responsible for choosing the SGW for a UE at the initial attach and at time of intra‐
LTE handover involving core network node relocation. PDN GW selection is also performed 
by the MME. It is responsible for authenticating the user by interacting with the home 
subscription server (HSS).
Serving Gateway (SGW): This node routes and forwards the IP packets, while also acting as 
the mobility anchor for the user plane flow during inter‐eNB handovers and other 3GPP 
technologies (2G/3G systems using S4). For idle state UEs, the SGW terminates the DL 
data path and triggers paging when DL data arrives for the UE.
Packet Data Network Gateway (PDN GW): Provides connectivity to the UE to external packet 
data networks by being the point of exit and entry of traffic for the UEs. The PDN GW 
performs among other policy enforcement, packet filtering for each user and IP address 
allocation.
Policy and Charging Rules Function (PCRF): The PCRF supports policy control decisions and 
flow based charging control functionalities. Policy control is the process whereby the PCRF 
indicates to the PCEF (in PDN GW) how to control the EPS bearer. A policy in this context 
is the information that is going to be installed in the PCEF to allow the enforcement of 
the required services.
Home Subscription Server (HSS): The HSS is the master database that contains LTE user 
information and hosts the database of the LTE users.
1.1.2  LTE Network Interfaces
LTE network can be considered of two main components: RAN and EPC. RAN includes the 
LTE radio protocol stack (RRC, PDCP, RLC, MAC, PHY). These entities reside entirely within 
the UE and the eNB nodes. EPC includes core network interfaces, protocols, and entities. 
These entities and protocols reside within the SGW, PGW, and MME nodes, and partially 
within the eNB nodes.
20
50
100
200
200
60
60
75
25
70
35
90
0
50
100
150
200
250
0
200
400
600
800
1000
1200
1400
1600
1800
2000
2200
2400
2600
2800
3000
3200
3400
3600
3800
4000
BW (MHz)
B43
(3,7GHz)
B42
(3,5GHz) 
TDD
FDD
B40
(2,3GHz) 
B38
(2,6GHz)
B39
(1,9GHz)
B7
(2,6GHz)
B3
(1,8GHz)
B1
(2,1GHz)
B2
(1,9GHz)
B10
(1,7/2,1GHz)
B28
(700MHz)
B5
(850MHz)
B8
(900MHz)
Frequency (MHz)
Figure 1.5  Spectrum of LTE.
www.ebook3000.com

UE
• IMEI (equipment)
• IMSI (SIM card)
• Temporary GUTI
• User Plane IP
eNB
• Radio control and resource management
• Inter eNB communication via X2
SGW
• Data forwarding
• Data buffering
PGW
• Gateway between the internal
 EPC network and external PDNs
• User IP address allocation
• User plane QoS enforcement
HSS
• Subscription Profiles
• Security information
• MME (IP) address
 for UE
MME
• Mobility Management
• Session Management
• Security Management
• Selects SGW based on TA
• Selects PGW based on APN
PCRF
• QoS rules
• Charging rules
DNS
• TA to SGW IP query
• APN to PGW query
S6a
S1-MME
S11
Gx
SGi
Rx
S5/S8
S1u
X2
PDN (i.e. IMS
or internet)
PCRF:Policy & Charging
Rules Function
PGW: Packet Data Network
Gateway
HSS:Home Subscriber Server
EPC:Evolved packet Core
SGW:Serving Gateway
UE:User Equipment
EUTRAN:Evolved UTRAN
eNodeB:Enhanced Node B
VLR:Visitor Location
Register
MSC:Mobile Switching
Centre
MME:Mobility Management
Entity
LTE Uu: LTE UTRAN UE
Interface
Figure 1.6  Nodes and functions in LTE.

LTE Basement
9
Uu: Uu is the air interface connecting the eNB with the UEs. The protocols used for the control 
plane are RRC on top of PDCP, RLC, MAC, and L1. The protocols used for the user plane are 
PDCP, RLC, MAC, and L1. LTE air interface supports high data rates. LTE uses OFDMA for 
downlink transmission to achieve high peak data rates in high spectrum bandwidth. LTE 
uses SC‐FDMA for uplink transmission, a technology that provides advantages in power 
efficiency.
S1: The interface S1 is used to connect the MME/S‐GW and the eNB. The S1 is used for 
both the control plane and the user plane. The control plane part is referred to as S1‐
MME and the user plane S1‐U. The protocol used on S1‐MME is S1‐AP on the radio 
network layer. The transport network layer is based on IP transport, comprising SCTP 
on top of IP. The protocol used on S1‐U is based on IP transport with GTP‐U and UDP 
on top.
The X2 interface is a new type of interface between the eNBs introduced by the LTE to 
perform the following functions: handover, load management, CoMP, and so on. X2‐UP protocol 
tunnels end‐user packets between the eNBs. The tunneling function supports are identifica-
tion of packets with the tunnels and packet loss management. X2‐UP uses GTP‐U over UDP/
IP as the transport layer protocol similar to S1‐UP protocol. X2‐CP has SCTP as the transport 
layer protocol is similar to the S1‐CP protocol. The load management function allows exchange 
of overload and traffic load information between eNBs, which helps eNBs handle traffic load 
effectively. The handover function enables one eNB to hand over the UE to another eNB. 
A handover operation requires transfer of information necessary to maintain the services at 
the new eNB. It also requires establishment and release of tunnels between source and target 
eNB to allow data forwarding and informs the already prepared target eNB for handover 
cancellations.
NAS is a control plane protocol that terminates in both the UE and the MME. It is transparently 
carried over the Uu and S1 interface.
S6a: S6a interface enables transfer of subscription and authentication data between the 
MME and HSS for authenticating/authorizing user access to the EUTRAN. The S6a 
interface is involved in the following call flows, initial attach, tracking area update, ser-
vice request, detach, HSS user profile management, and HSS‐initiated QoS modification, 
and so on.
S11: Reference point between MME and SGW. This is a control plane interface for negotiating 
bearer plane resources with the SGW.
The above‐mentioned LTE network interfaces are shown in Figure 1.7.
IP connection between a UE and a PDN is called PDN connection or EPS session. Each 
PDN connection is represented by an IP address of the UE and a PDN ID (APN). As shown 
in Figure 1.8, there are two different layers of IP networking. The first one is the end‐to‐
end layer, which provides end‐to‐end connectivity to the users. This layers involves the 
UEs, the PGW, and the remote host, but does not involve the eNB. The second layer of IP 
networking is the EPC local area network, which involves all eNBs and the SGW/PGW 
node. The end‐to‐end IP communications is tunneled over the local EPC IP network using 
GTP/UDP/IP.
Moreover, in LTE, IDs are used to identify a different UE, mobile equipment, and network 
element to make the EPS data session and bearer establishment, which can refer to Annex “LTE 
identifiers” for reference; the summary of IDs is shown in Table 1.1.
www.ebook3000.com

S6a Interface
AAA interface between
MME and HSS that 
enables user access to 
the EPS
Rx
X2 Interface
Connects 
neigboring 
eNBs
S1-MME Interface
Reference point for
control plane protocol
between E-UTRAN
and MME
SCTP
IP
L2
L1
S1-AP
S1-U Interface
Reference point for 
user plane protocol 
between E-UTRAN
and MME
GTP-U
UDP
IP
L2
L1
SCTP
IP
L2
L1
Diameter
S10 Interface
AAA interface between
MME and HSS that 
enables user access to 
the EPS
GTPv2-C
UDP
IP
L2
L1
Rx Interface
Transport policy 
control, charging and 
QoS control. 
S11 Interface
Control plane for creating,
modifying and deleting
EPS bearers.
UDP
IP
L2
L1
GTP-C
GTP-C/GTP-U
UDP
IP
L2
L1
S5/S8 Interface
Control and user 
plane
tunneling between 
Serving GW and 
PDN GW 
Gx Interface
Provides transfer of
policy and charging
Rules from PCRF to 
PDN Gw.
Diameter
TCP
IP
L2
L1
Diameter
TCP
IP
L2
L1
SGi Interface
Comunicates CPG
with external 
networks. 
IP
L2
L1
S1-MME
S1-U
S10
S11
S5/S8
S6a
SGi
Gx
Rx
IP
L2
L1
UDP
SCTP
GTP-U
X2-AP
IMS/External
IP networks
PDN GW
Serv GW
PCRF
HSS
MME
eNB
X2
Figure 1.7  LTE network interfaces.

LTE Basement
11
1.2  ­LTE Services
LTE is an all packet‐switched technology. The telephony service on LTE is a packet‐switched 
mobile broadband service relying on specific support in LTE radio and EPC, which is needed 
to meet the expectations of telephony. On the other hand, the handling of voice traffic on LTE 
handsets is evolving as the mobile industry infrastructure evolves toward higher, eventually 
ubiquitous, and finally, LTE availability. Central to the enablement of LTE smartphones is to 
meet today’s very high expectation for the mobile user experience and to evolve the entire 
communications experience by augmenting voice with richer media services. Voice solutions 
of LTE include VoLTE/SRVCC, RCS, OTT, CSFB, SVLTE, and so on. LTE radio and EPC archi-
tecture does not have a circuit‐switched (CS) domain available to handle voice calls as being 
done in 2G/3G. The voice traffic in the LTE network is handled through different procedures. 
The first one, which is mainly used, still remains on the circuit switch network (e.g., 2G or 3G) 
by maintaining either parallel connection and registration on these network or by switching to 
them whenever a voice call is initiated or terminated. The second one, which is when the voice 
call stands over LTE, the voice service is named VoLTE or VoIMS when the IP multi‐media 
system (IMS) service function is included.
Video in LTE is one of the most importanr services. The demand for video content continues to 
grow among data services. Web video traffic growth has accelerated, as the number of internet‐
enabled devices has increased and more people depend on the mobile internet.
Recently, a group of key operators, infrastructure, and device vendors announced a joint 
effort to facilitate the evolution of mobile communication toward RCS (rich communication 
suite). The core feature set of RCS includes the following services: enhanced phonebook, with 
service capabilities and presence enhanced contacts information; enhanced messaging, which 
Table 1.1  Classification of LTE identification.
Classification
LTE identification
UE ID
IMSI, GUTI, S‐TMSI, IP address, C‐RNTI, UE S1AP ID, UE X2AP ID
Mobile equipment ID
IMEI
Network element ID
GUMMEI, MMEI, Global eNB ID, eNB ID, ECGI, ECI, P‐GW ID
Location ID
TAI, TAC
Session/bearer ID
PDN ID (APN), EPS bearer ID, E‐RAB ID, DRB ID, LBI, TEID
UE IP
address
end-to-end
layer
App
IP
PDCP
RLC
MAC
PHY
IP
PDCP
GTPu
UDP
IP
L2
L1
GTPu
SGW
PGW
P
D
N
UDP
IP
L2
L1
GTPu
UDP
IP
L2
L1
RLC
MAC
PHY
Uu
S1-u
S5/S8
eNB
SGi
End to End service
EPS Bearer (ID)
E-RAB (ID)
UE
MME
eNB
SGW
PGW
RRC
Signaling
S1
Signaling
DRB
S1
Bearer
S5
Bearer
Control plane
User plane
S11 GTP-C S11 GTP-C
APN
Figure 1.8  LTE‐EPC control and data plane protocol stack.
www.ebook3000.com

LTE Optimization Engineering Handbook
12
enables a large variety of messaging options including chat and messaging history, and enriched 
call, which enables multimedia content sharing during a voice call. It is believed that RCS is a 
promising evolution in LTE, many operators have announced to support the RCS.
1.2.1  Circuit‐Switched Fallback
The basic principle of circuit‐switched fallback (CSFB) is that once originating or receiving a 
CS voice call by the UE connected over LTE, it will move to either GSM or UMTS network 
(fallback) where the call proceeds. One major requirement for the realization of CSFB is the 
overlay of LTE with GSM, UMTS, or both. It is the quickest implementation both at terminal 
and at network sides and is mandatory for international roaming scenarios. With CSFB, UE will 
attach to the network through LTE, MME will ask MSC to update UE location in its database, 
when the UE is operating in LTE (data connection) mode and when a call comes in, the LTE 
network pages the device. The device responds with a special service request message to the 
network, and the network signals the device to move to 2/3G to accept the incoming call. 
Similarly for outgoing calls, the same special service request is used to move the device to 2/3G 
to place the outgoing call.
CSFB for operator means very little investment since only few modifications are required in the 
network, additional interface (SGs) between MME and MSC is required shown in Figure 1.9. 
With basic CSFB implementation, the additional delay to set up the voice call is less than 1.3s 
to 3G or about 2.8s to 2G, which is acceptable from an end‐user perspective. This delay is sig-
nificantly reduced with the activation of PS handovers when falling back to 3G and of RRC 
release with 3GPP Rel 9 redirections to 2G/3G. The CSFB option offers complete services and 
feature transparency by enabling mobile service providers to leverage their existing GSM/
UMTS network for the delivery of CS services, including prepaid and postpaid billing.
SGs interface is used to carry signaling to move the access network carrying the voice traffic 
from 2/3G to the LTE and from LTE to 2/3G. This interface maintains a connection between 
the MSC/VLR and the MME and its main role is to handle signaling and voice by SGsAP 
application.
Gn‐C interface is the interface connecting the MME to the SGSN in the pre‐Rel 8, it is replaced 
by the S3 for Rel 8 or later. This interface is required when a CSFB call is established to initial the 
signaling with SGSN. In case CSFB with PS handover the data established over the LTE will be 
carried over 2/3G network, the interface Gn‐C or S3 is used to establish the signaling sessions 
with the SGSN to forward pending data over the LTE toward the 2/3G packet core. To forward 
the data from the PGW, an additional interface named Gn‐U is required between the SGSN and 
the PGW in pre‐Rel 8 and the S4 interface between the SGSN and the SGW in Rel 8 or later.
Uu
Um
LTE
Uu
Gb
Gs
Gn
Iu-cs
A
S1-MME
S1-U
S11
S5/S8
SGs
UTRAN
GERAN
MME
MSC/
VLR
SGW
PGW
E-UTRAN
UE
SGSN
Iu-ps
Figure 1.9  Standard architecture for CSFB.

LTE Basement
13
CSFB is a single radio solution of handset, in order to make or receive calls, the UE must 
change its radio access technology from LTE to a 2G/3G technology, and uses network signaling 
to determine when to switch from the PS network to the CS network. The shortcoming is that 
someone on a voice call will not be able to use the LTE network for browsing or chatting, and 
so on. Except CSFB, dual‐radio handsets (SVLTE) shown in Figure 1.10 support simultaneous 
voice and data— voice provided through legacy 2G or 3G network and data services provided 
by LTE. Dual‐radio solutions use two always‐on radios (and supporting chipsets), one for 
packet‐switched LTE data and one for circuit‐switched telephony, and as a data fallback where 
LTE is not available. The dual radio has the benefit in which simultaneous CS voice and LTE 
data is available; the drawback is the complexity from the device point of view, since more 
radio components are required increasing the cost, size, and power consumption. Dual‐radio 
solutions also force the need for double subscriber registration leading to split legacy and LTE 
records in the subscriber data managers. As a matter of fact, lack of dual‐radio eco‐system for 
3GPP markets and the top six main chipset vendors are addressing the 3GPP market with 
singe‐radio terminal and CSFB, while the top chipset vendors for 3GPP2 markets are supporting 
dual‐radio solution for the 3GPP2 market.
The above considerations have lead to a clear split in the market for early LTE support of 
voice services with mobile networks based on 3GPP technologies adopting CSFB, while 3GPP2 
markets have adopted a dual‐radio solution for early LTE deployments.
CSFB addresses the requirements of the first phase of the evolution of mobile voice services, 
which commercially launched in several regions around the world in 2011. CSFB has become 
the predominant global solution for voice and SMS inter‐operability in early LTE handsets, 
primarily due to inherent cost, size, and battery life advantages of single‐radio solutions on the 
device side. CSFB is the solution to the reality of mixed networks today and throughout the 
transition to ubiquitous all‐LTE networks in the future phases of LTE voice evolution.
1.2.2  Voice over LTE
After CSFB, LTE voice evolution introduces native VoIP on LTE (VoLTE) along with enhanced 
IP multimedia services such as video telephony, HD voice and rich communication suite (RCS) 
additions like instant messaging, video share, and enhanced/shared phonebooks.
The voiceover LTE solution (VoLTE) is defined in the GSMA1 Permanent Reference Document 
(PRD) IR.92,2 based on the adopted one‐voice profile (v 1.1.0) from the One Voice Industry 
Initiative. Video‐related additions are described in GSMA IR.94.
1  At the 2010 GSMA mobile world congress, GSMA announced that they were supporting the one voice solution to 
provide voice over LTE. After that, industry aligned 3GPP based e2e solution for GSM equivalent voice services over LTE.
2  The VoLTE IR.92 is from October 2010 put in maintenance mode and only corrections of issues that may cause 
frequent and serious misoperation will be introduced.
Data
Voice
LTE (eNode B)
2G/3G Base Station
Figure 1.10  Dual radio handsets.
www.ebook3000.com

LTE Optimization Engineering Handbook
14
VoLTE specifies the minimum requirements to be fulfilled by network operators and terminal 
vendors in order to provide a high‐quality and interoperable voice over LTE service. The VoLTE 
solution is scalable and rapidly deployed, offering rich multimedia and voice services, seamless 
voice continuity across access networks, and the re‐use of existing network investments including 
business and operational support assets. In terms of the operators, the deployment of VoLTE 
means that it is opened to the mobile wideband speech path of evolution. Also, VoLTE can offer 
a competitive advantage by providing a superior voice service quality with HD voice and video, 
shortening setup times for the calls and guaranteeing bit rate, and offering simultaneous LTE 
data together with the voice call. Finally, a richer end‐user experience; to be able to provide 
end users the benefit of real‐time communications can be another VoLTE attraction. Better 
multimedia, video‐conferencing, or video chat while still maintaining a voice call, are all pos-
sible revenue opportunities of VoLTE. Introducing VoLTE on a standard‐based IMS provides 
the service provider with a true converged network where services are available regardless of 
the access type network. Blending services with an IMS service architecture enables an opera-
tor to cost‐effectively build integrated service bundles. VoLTE can evolve voice services into 
rich multimedia offerings, including HD voice, video calling, and other multimedia services 
(i.e., start a voice session, add and drop media such as video, and add callers, presence) available 
anywhere on any device, combining mobility with service continuity.
VoLTE is an advancement from today’s voice and video telephony to full‐fledged multimedia 
communication to utilize the full potential of LTE and to improve customer experience. The 
IP‐based call is always anchored in IMS core network to carry and establish a voice call over an 
LTE network. Now, in both 3GPP and 3GPP2 markets, there is a clear consensus to adopt the 
IMS‐based VoLTE solution for the LTE deployments.
Two transport modes are also used on the network and determines the quality of the voice 
call over an IP network. The VoIP’s best effort, mainly over the internet and based on some 
widely deployed applications, such as Skype, Google talk, and MSN, uses this mode with no 
guarantee of the quality. Other technology such as LTE propose to carry the VoIP with the 
guarantee of the quality of this call over the end‐to‐end network. For VoLTE, the installed 
solution aims at being partially compliant with GSMA PRD IR.92.3 One voice was an effort to 
use already‐defined standards to specify a mandatory set of functionality for devices, the LTE 
access network, the evolved packet core network, and the IP multimedia subsystem in order to 
define a voice and SMS over LTE solution using an IMS architecture. Some VoLTE handsets are 
already commercial including the features such as emergency call, location based services, 
and so on.
In case VoLTE through IMS is the mode used, two connections are required with the LTE 
network—Rx interface between the P‐CSCF and the PCRF and the Gx interface between the 
PCRF and the PGW for dynamic PCC rules. The Gm interface is a virtual interface established 
between the SIP application on the end user and the P‐CSCF function of the IMS network 
where it is connected (Figure 1.11).
Along with VoLTE introduction, 3GPP also standardized Single Radio Voice Call Continuity 
(SRVCC) in Rel 8 specifications to provide seamless continuity when an UE handovers from 
LTE coverage (E‐UTRAN) to UMTS/GSM coverage (UTRAN/GERAN). With SRVCC, which 
is depicted in Figure 1.12, the calls are anchored in IMS network while UE is capable of trans-
mitting/receiving on only one of those access networks at a given time. SRVCC protocol 
evolution have different types according to the function. There are bSRVCC (before alerting 
3  Complementary scenarios are also beign defined in the VoLTE profile extension (IR.93) to cope with the cases 
where LTE coverage needs to be complemented with existing WCDMA/GSM CS coverage.

LTE Basement
15
SRVCC), aSRVCC (alerting phase SRVCC), vSRVCC (video SRVCC), and vSRVCC (reverse 
SRVCC, HO 3G/2G → LTE).
Up to now, VoLTE launches are taking place in Korea, the United States (AT&T, T‐Mobile, 
Verizon), Russia (MTS), and Asia (NTT Docomo, SingTel, M1, Starhub, HKT). T‐Mobile U.S. 
launched VoLTE in Seattle on May 22, 2014. AT&T launched in three markets on May 23, 2014 
with “crystal clear conversations.” SingTel launched on May 31, 2014 in Singapore using 4G 
Clear Voice. In 2015 and 2016, more and more countries launched VoLTE, like China, Canada, 
France, and Denmark.
GERAN
Gb
IuPS
Gm
IuCS
S6d
A
S3/Gn
S6a
S1-MME
S1-U
S11
S5
SGi
Gx
Gm
Gi
ISUP
Rx
Sv
Sv
Gn
S4
UTRAN
EUTRAN
HSS
SGSN
MSC
MME
SGW
PGW
PCRF
IMS
Figure 1.11  Standard architecture for VoLTE.
Legacy
RAN
Evolved
Packet Core
LTE
RAN
VoLTE
CS
SR-
VCC
SR-
VCC
SR-
VCC
SR-
VCC
SR-
VCC
SR-
VCC
SRVCC
IMS
SRVCC function
CS Core
CSFB
Semi-Persistent
Scheduling
TTI Bundling
Common IMS
SRVCC
RCS
CSFB
Fast Return after
CSFB
eSRVCC
aSRVCC
rSRVCC
vSRVCC
Rel-8
Rel-9
Rel-10
Rel-11
Emergecy call on
VoLTE
Emergecy call 
w/SRVCC
Figure 1.12  SRVCC and evolution.
www.ebook3000.com

LTE Optimization Engineering Handbook
16
1.2.3  IMS Centralized Services
In a CS network telephony, services are provided by the MSC (based on the subscription data 
in the HLR).
In IMS telephony, services are provided by the telephony application server. Multiple service 
engines introduce synchronization problems and differences in user experience. IMS centralized 
services avoids these problems by assuming that only one service engine will be used.
IMS plays an essential role in IMS centralized services. The UE performs SIP (session initia-
tion protocol) registration with the IMS network. IMS‐AKA (IMS‐authentication and key 
agreement) procedures are followed for authentication. Integrity protection, whereby integrity 
of SIP signaling messages is ensured, is mandatory. The use of ISIM (IP multimedia services 
identity module) or USIM (UMTS subscriber identity module) is required during the IMS 
authentication. SIP signaling messages are ASCII text messages and could thus be quite large. 
Hence, signaling compression is mandatory to reduce the bandwidth requirements, especially 
for over‐the‐air transmission.
IMS centralized services (ICS) enable the use of the IMS telephony service engine for 
originating and terminating services regardless if a UE is connected via a LTE PS access 
network or connected via a GSM/WCDMA CS access network. For terminating calls, ICS 
determines the access network currently in use by a UE to deliver the call via the correct access 
network. ICS requires an IMS service centralization and continuity application server.
1.2.4  Over the Top Solutions
At the same time, there are already a number of applications providing over the top (OTT) 
voice service on smartphones, which can be used over Wi‐Fi connection but also over cellular 
networks. OTT application is completely transparent to network and also out of operators’ 
control. OTT services are those provided without special consideration at the network level 
(i.e., no special treatment with respect to QoS). Examples of these types of services are YouTube, 
Vimeo, and DailyMotion, which are very popular today. Skype and GoogleTalk have nearly a 
billion registered users worldwide. Apple has sold countless iPhones and iPads, many of which 
are capable of FaceTime video calling. These services are provided directly by content providers 
(and usually over content delivery networks), generally without any arrangement with the 
network providers sitting between the content and its consumers. Nowadays, some OTT 
solutions, such as Skype and FaceTime, often come preinstalled on smartphones, and as these 
devices become much more widespread, the adoption of OTT solutions for video‐calling 
services will also increase. LTE supports high bandwidth, low latency, always online, all IP and 
other characteristics, it is convenient for the development of OTT. OTT application providers 
have delivered very popular voice, video, messaging, and location services that are shifting 
consumers’ attention and usage. In addition, while OTT players currently generate revenue 
using the operator’s network for service delivery, the operator itself doesn’t gain any associated 
increase in revenues. The Figure 1.13 shows MoS performance based on data from the South 
Korean market’s most OTT‐friendly operator.
In the future, the proportion of OTT voice may be more and more high, especially in the area 
of long distance calls, as these solutions are familiar to subscribers and have driven user expec-
tations. However, a fully satisfactory user experience cannot be provided by OTT solutions, as 
there are no QoS measures in place, no handover mechanism to the circuit‐switched network, 
no widespread interoperability of services between different OTT services and devices, and 
no guaranteed emergency support or security measures. Consequently, the adoption of OTT 
clients is directly dependent on mobile broadband coverage and the willingness of subscribers 
to use a service that lacks quality, security, and flexibility. For example, with VoLTE, using 

LTE Basement
17
SRVCC, the voice communication can be maintained when the user is moving out of LTE 
coverage versus OTT call might drop in this case.
Voice over LTE delivers very high spectral efficiency, OTT solutions that do not benefit 
from radio performance enhancements implemented specifically for VoLTE, for example, 
dynamic scheduling, RoHC, TTI bundling, packet segmentation, and admission control. 
VoLTE also provides better quality than OTT services and narrowband CS calls, as well as 
improved call setup time, HD voice quality, E2E QoS guaranteed, longer battery life, emer-
gency call availability, and more efficiency than OTT in terms of network resource consump-
tion. Also, rich multimedia voice could be offered directly enabled on top of VoLTE as well, 
delivering high user experiences beyond voice and SMS, providing to consumers instant 
messaging, chat, video, and file sharing.
1.2.5  SMS Alternatives over LTE
Basically two options are available for SMS, SMS without IMS, and SMS with IMS. When the 
device registers as an IMS user, then an incoming SMS will be directed to IMS and delivered 
via IP.
For SMS using CSFB (SMS over SGs), UE can send and retrieve SMS using NAS signaling 
over LTE. This solution requires SGs interface between CS core and EPC to transport SMS to/
from UE. The SGs interface must support mobility management and paging procedures 
between the EPS and the CS domain. All the procedures are based on the SGs procedures.
SMS over IP is a solution to transport SMS over any PS access using IMS and is mandated to 
be supported by VoLTE terminals (Figure 1.14).
If not registered in IMS, and CS attached, then incoming SMS will be delivered to CS domain. 
Both options support UE‐originated and UE‐terminated SMSs. In the non‐IMS approach, the 
MME needs to support the SGs interface toward MSC, MSC pages the UE over LTE via this 
new channel for terminating SMS. The UE includes the SMS inside a NAS signaling message, 
and the MME forwards the SMS to the MSC. SMS is supported in both idle mode and con-
nected mode. Of course, if the UE is in idle mode, it is needed to first establish connectivity 
between the UE and the E‐UTRAN and between the UE and the MME. The UE needs to send 
0.0
0.25
0.50
0.75
1.00
1.25
1.50
1.75
2.00
2.25
2.50
MOS-LQO (SWB mode)
Typical operator acceptance criteria
Skype 3.38 (ave)
Kakao 2.95 (ave)
VoLTE 4.08 (ave)
Gtalk 3.43 (ave)
2.75
3.00
3.25
3.50
3.75
4.00
4.25
4.50
4.75
5.00
10.0
20.0
30.0
40.0
50.0
60.0
70.0
80.0
90.0
100.0
Range : <= x <
MOS P863(POLQA)(SEOUL_MOS-M10) MOS P863(POLQA)(SEOUL_KAKAO-M10) MOS P863(POLQA)(SEOUL_SKYPE-M10) MOS P863(POLQA)(SEOUL_GTALK-M10)
Figure 1.13  MoS‐LQO (SWB, super wideband AMR mode).
www.ebook3000.com

LTE Optimization Engineering Handbook
18
a service request message to the MME to exit the idle mode. Once the MSC receives the service 
request message from MME, it will send the SMS via SGs interface to the MME, which will 
tunnel the short message to the UE.
For a UE‐terminated SMS, a page message would be sent to the UE to get the UE out of the 
mode. If the UE is in connected mode, it already has all the links established. This will remove 
the extra service request/paging type signaling exchanges. The UE and the MME can directly 
place an SMS in a NAS signaling message (Figure 1.15).
In the case of SMS using IMS, the UE needs to implement the functions of an SMS‐ over‐IP 
sender and an SMS‐over‐IP receiver. The IMS core network performs functions of an IP short 
message gateway (IP‐SM‐GW). For a receiver to get the SMS, the receiver needs to do IMS 
registration and indicate its capability to receive traditional short messages (Figure 1.16).
– SMSoSGs
– SMSoIP (VoLTE deployed)
IP-SM-
GW
SIP
LTE
DTAP
MAP
MAP
MAP
DTAP
RANAP/NAS
MAP
MSC
SMS-C
HLR
MSC
SGsAP/NAS
WCDMA
GSM
Originating
Terminating
SMSoIP
CS Core
(MSS)
GSM / WCDMA
RAN
LTE
RAN
Evolved
Packet Core
SGs
IMS Core
SMSo
SGs
SMS
IP
SMSo
SGs
SMSo
SGs
SMSo
SGs
SMS
IP
SMS
IP
SMS
IP
Existing SMS
SMS NNI
Figure 1.14  SMSoSGs and SMSoIP.
SMS Using Legacy Framework
Service Request
Page Message
SMS via NAS Signaling
E-UTRAN
EPC
MME
Forwarding of SMS
MSC Server
Legacy CS Core
UE
Connected
Mode
Figure 1.15  SMS using legacy framework.

LTE Basement
19
1.2.6  Converged Communication
Converged communication is network convergence, media convergence, IT and CT conver-
gence, as well as the convergence of communication and social networks. It will leverage cloud 
computing, mass data, and other emerging technologies to help drive the next paradigm shifts 
of the RCS initiative.
RCS IP call is derived from VoLTE specifications and as such can be offered over any IP 
connectivity as an extension to VoLTE. Its primary use case is when VoLTE is not available or 
not wanted by the user for voice and/or video calls, for example, when roaming or while only 
CS service is available for voice. RCS IP call uses the same control and media plane as VoLTE 
but adds RCS‐specific policies. Unlike VoLTE, a RCS IP call does not rely on specific support 
from the access regarding QoS and mobility; hence operators can enable it over Wi‐Fi, LTE, 
and even 3G without having VoLTE‐specific support in those accesses.
Historically, RCS and VoLTE have been standardized separately from each other, meaning 
that coexistence aspects have not always been considered. However, that has changed since 
2011. RCS, and in particular, RCS 5.1, takes coexistence between VoLTE and RCS into consid-
eration. VoLTE and RCS complement each other, where VoLTE is the basis for primary real‐time 
communication, and RCS provides enrichment and creates added value in the overall commu-
nication experience. RCS can also be deployed with CS voice before VoLTE deployment. So, 
RCS and VoLTE make use of one number for any service. RCS extends reachability outside the 
LTE access technology and opens up communication for both multi access and multi device usage.
Many operators have different plans for introduction of VoLTE and RCS in their networks. 
In Europe we see RCS first, while in North America and Korea, VoLTE has already been 
launched. Depending on the strategy, different evolution paths for coexistence will exist, RCS 
first, VoLTE first, or a combination from day one (Figure 1.17).
1.3  ­LTE Key Technology Overview
For LTE air interface technology, the choice of multiple‐access schemes was made in December 
2005, with orthogonal frequency division multiple access (OFDMA) being selected for the 
downlink, and single carrier‐frequency division multiple access (SC‐FDMA) for the uplink. In 
LTE downlink, OFDM will be used to schedule the UEs differently in time and frequency. With 
these techniques the UEs can be scheduled and receive user data in the downlink. In the uplink, 
SC‐FDMA is similar to downlink and it is possible to schedule the UEs differently in time and 
frequency. LTE supports FDD and TDD mode. FDD and TDD LTE mode can be combined 
(depends on UE capabilities) in the same physical layer.
SMS in a SIP Message
SMS
IMS
IMS
IP-SM-GW
SM-over-IP sender
SM-over-IP receiver
IP Short Message Gateway (IP-SM-GW)
UE
CSCF
Figure 1.16  SMS using IMS.
www.ebook3000.com

LTE Optimization Engineering Handbook
20
1.3.1  Orthogonal Frequency Division Multiplexing
OFDMA is the multi‐access technology related with OFDM, the combination of TDMA and 
FDMA essentially. OFDMA has high spectrum utilization efficiency due to orthogonal sub-
carriers need no protect bandwidth, support frequency link auto adaptation and scheduling, 
and easy to combine with MIMO, but it needs strict requirement of time‐frequency domain 
synchronization and high PAPR.
At the transmitter the coded and modulated data stream is split up to a number of sub‐streams. 
The number of sub‐streams can range from typically 12 (one resource block) and up to 1200 
(100 resource blocks at 20MHz bandwidth). Each stream is fed into the IFFT block and trans-
formed into a corresponding subcarrier. Each subcarrier in OFDM is 15 kHz. One subcarrier 
carries one OFDM symbol. With this subcarrier size, symbol time is 66.7μs, which should be 
much longer than the delay spread in order to keep the ISI (inter‐symbol interference) low. 
This choice is based on the average radio channel delay spread (a measure of the radio channel 
time dispersion) and the coherence time (a measure of how slow the radio channel changes), 
which should fulfill “Delay spread << Symbol time < Coherence time.” Also, the cyclic prefix 
should be longer than the expected delay spread in order to completely remove ISI. However, if 
the symbol time is too long (i.e., longer than the coherence time), the radio channel will change 
considerably during one symbol (Figure 1.18). This would lead to inter carrier interference (ICI).
The biggest drawback of OFDMA is that it suffers from high peak‐to‐average power ratio 
(PAPR). The higher the PAPR, the higher output power back‐off (OBO) is needed to avoid clipping 
of transmitted signal, which in turn results in higher adjacent carrier leakage ratio (ACLR) and 
increased error vector magnitude (EVM). High OBO decreases power efficiency of the transmitter.
Similar to OFDMA, the SC‐FDMA physical resource can be seen as a time‐frequency grid 
with the additional constraint that a resource assigned to a UE must always consist of a set of 
consecutive subcarriers in order to keep the single‐carrier property of the uplink transmission 
that can release the UE PA limitation caused by high PAPR. The SC‐FDMA subcarrier spacing 
equals Δf=15 kHz and resource blocks, consisting of 12 subcarriers in the frequency domain, 
are defined also for the uplink.
RCS v2/3/4
RCSe
RCS v5
Multimedia
Messaging
Cloud
Interoperable voice and
SMS over LTE (IR.92)
HD Voice
HD video
calling
CS-coexistence
Multi-device
and multi-
access
Advanced
services
roaming
RCSe
feature set
RCS IP
VoIP
RCS IP
Video
Additional
differentiators
Alignment to
RCS5
VoLTE
VoLTE
RCS-e
RCS 5.x
Consumer
Communication
Figure 1.17  RCS is continuously innovating and service model are always changing.

LTE Basement
21
1.3.2  MIMO
MIMO (multiple input multiple output) technology is a standard feature of LTE networks, 
and it is a major piece of LTE’s promise to significantly boost data rates and overall system 
capacity. MIMO systems use more than one transmit antenna (Tx) to send a signal on the 
same frequency to more than one receive antenna (Rx). MIMO works under rich scattering 
conditions; signals from different TX take multiple paths to reach the UE at different times. 
In order to achieve promised throughputs in LTE systems, operators must optimize their 
networks’ multipath conditions for MIMO, targeting both rich scattering conditions and high 
SNR for each multipath signal.
MIMO builds on Single Input Multiple Output (SIMO), also called receive diversity that have 
been around for decades, as well as Multiple Input Single Output (MISO), also called transmit 
diversity, used in most advanced cellular networks today. SIMO and MISO are both techniques 
seeking to boost signal to noise ratio (SNR) in order to compensate for signal degradation. 
MIMO can work as a combination of SIMO and MISO techniques, resulting in even greater 
SNR gains, further boosting coverage and data rates. It is the well‐known techniques named 
transmit diversity and spatial multiplexing.
The other technique in LTE MIMO is called beamforming. It is only within the last decade 
that there has been significant interest in such antenna arrays for cellular systems. Beamforming 
generally requires a different antenna configuration from MIMO operations, which all the 
transmission paths are closely correlated, and each signal is affected by the transmission medium 
in a similar way. In this case, the multiple antennas can operate as though they were a single, 
high‐power antenna with its main lobe illuminating a specific area. Beamforming aims to 
concentrate the available bandwidth in the targeted area, improving the quality of transmission 
OFDM subcarrier spacing.
Orthogonal
Subcarriers
Centre subcarrier
Not Orthogonal
Δf = 1/Tu
Frequency
Channel
Bandwidth
Figure 1.18  OFDMA.
www.ebook3000.com

LTE Optimization Engineering Handbook
22
or the signal to interference plus noise ratio (SINR). TD‐LTE can make particularly good use of 
beam‐forming antennas, as the uplink and downlink are duplexed in the time domain and 
transmitted and received signals at the same frequency.
1.3.3  Radio Resource Management
Radio resource management (RRM) includes assignment, re‐assignment, and release of radio 
resources. Figure 1.19 shows time scale for different RRM mechanism in LTE network.
Radio bearer control is responsible for the establishment, maintenance, and release of radio 
resources associated with specific radio bearers. The radio bearer control function must consider 
the overall resources situation and the quality of service (QoS) requirements of in progress 
sessions when admitting new sessions. The radio bearer control function must also maintain the 
quality of existing sessions when conditions change due to environmental and mobility activity.
Admission and congestion control is a cell‐based operation applied to both uplink and 
downlink. It is one of the key RRM functions. It is responsible for maximizing the radio 
resource utilization while meeting QoS requirements of new and existing sessions by intelli-
gent admission or rejection of new radio bearer requests or modification of existing bearers. 
The task of admission control is to admit or to reject the requests for establishment of radio 
bearers (RB). Admission control is performed when there are new incoming calls or incoming 
handover attempts. The system resource limitations and QoS satisfaction ratio are the main 
considerations for admission control. The allocation/retention priority (ARP) can be used to 
classify gold, silver, and bronze categories with different admission control thresholds. ARP is 
an attribute of services and is inherited from evolved packet core.
Congestion control is critical to maintain the system stability and deliver acceptable QoS 
when the system is in congestion. The load measures include the power, the available physical 
resource block at the air interface, and the transmission resource usage at S1‐U interface. 
Congestion control method including release low‐priority services to alleviate the overloaded 
system, or GBR downsizing by sacrificing the quality of GBR services slightly but still maintaining 
acceptable quality.
Connection mobility control is responsible for the management of radio resources during 
active or idle mode mobility of the UEs. It handles the communication of mobility related 
parameters to the UE, and makes handover decisions based on both radio conditions and network‐
loading conditions.
TTI
Channel
fading time
Burst
duration
Inter-handover
time
Channel and
location variations
L3 signaling
delay
1 ms
10ms
100ms
1 s
10 s
Packet 
scheduling,
fast DL 
AMC,
fast ATB
Outer link 
quality 
control
Dynamic
MIMO
Control
UE
DRX/DTX
control
Layer 2 RRM
Layer 3 RRM
Slow
UL
power
control
Slow
UL
LA/AM
C/ATB
Intercell
interference
coordination
Connection
mobility
control
Load
balancing,
congestion
control
Radio
admission
control
Time scale
Upper layer related control
Figure 1.19  Time scale for different RRM mechanism.

LTE Basement
23
In some situation of commercial LTE network, some serving cells have high load but other 
neighbor cells’ loads are low because of the differentiation of UE services. Under this condition, 
it can trigger load balancing algorithm. Load balancing can also be triggered during network 
attach as part of initial network entry or idle exit. However, eNB will only load balance to 
different carrier on same sector for network attach, idle exit process.
In addition, inter‐RAT radio resource management is responsible for resource management 
related to handovers with or redirection to a cell from a different radio technology. Handovers 
may be performed due to resource issues, radio conditions, or network preference specified by 
the operator.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
24
2.1  ­LTE Wireless Optimization Overview
2.1.1  Why LTE Wireless Optimization
The optimization of LTE network mainly refers to the pre‐optimization and the continuous 
optimization before and after the network launched. Network optimization results and the 
level of network optimization work, directly related to the future performance of the network 
stability and capacity. A good network optimization can fully reduce interference level of the 
whole network, improve the network performance and call success rate, reduce service inter-
ruption, improve the data throughput, optimize the whole network handover success rate, and 
improve the network capacity. Network optimization work is a continuous daily work. 
Optimization is necessary so the network performance satisfies certain thresholds or targets 
for key performance indicators (KPIs) agreed beforehand with the operator. After a network is 
built and before is launched on air, it is necessary to perform the pre‐launch optimization 
where the common process is to divide the network in groups of sites (clusters) and optimize 
these clusters so agreed KPIs are achieved. The amount of (pre‐launch) optimization needed 
depends on the quality of the planning. Changes during pre‐launch optimization are mainly 
physical (e.g., antenna tilts and azimuths) although they may include also some parameter 
changes with the scope of optimizing the coverage and the quality of the network. As there is 
no/very little traffic on the network, counters don’t provide statistically reliable information. 
Therefore, drive testing is the main optimization method during the pre‐launch optimization 
to achieve certain field KPIs. After the launch, networks are “alive,” always changing (e.g., traffic 
conditions, addition of new sites, new software upgrades) so optimization is still needed to 
keep the high level of performance defined by the KPIs. Since there is traffic on the network, 
counter information is reliable and it is possible to have a centralized view of how the whole 
network is performing.
In general terms, pre‐launch optimization focuses on a “coarse” tuning of the network and 
counter based optimization focuses on a fine tuning of the network (i.e., parameter based). 
Drive testing may still be needed to satisfy operator’s demands and to optimize mature 
­networks (post‐launch optimization) although the scope will be smaller than during pre‐launch 
optimization.
2.1.2  Characters of LTE Optimization
There is an obvious difference between LTE and 2G, 3G wireless network optimization. 2G and 
3G networks have had their own standard wireless network optimization process, and formed 
a set of KPI to reflect the overall situation of the network, including the capacity, coverage, 
2
LTE Optimization Principle and Method

LTE Optimization and Principle and Method
25
acces success rate, quality, and handover. The main difference between LTE wireless network 
and 2/3G optimization includes:
●
●LTE optimization is more complex, traffic and control channels need to be considered the 
various resources such as frequency domain, time domain, code domain, interference 
domain, and so on.
●
●LTE only supports PS domain operations, but supports a variety of different QoS services, 
the service based optimization is also a challenge, such as VoIP, and so on.
●
●When the carriers deploy LTE system with the reuse factor equals 1, eNB will endure strong 
co‐channel interference. Although some of the system of same frequency interference 
avoidance algorithm such as frequency domain scheduling, inter‐cell interference coordina-
tion, smart antenna beamforming are deployed, actually co‐channel interference cannot be 
completely avoided, it will inevitably affect the network’s overall performance. This presents 
a major challenge to the optimization of LTE.
●
●From the operator point of view, optimization in 2/3G system and LTE coexistence (share 
antenna) phase needs to be considered. LTE initial emphasis is foucused on solving coverage 
problem. The main task is to avoid decreasing of 2G, 3G network performance, maintain the 
2/3G services continuity, but also highlight the LTE service experience. In the mature period 
of business expansion to LTE, it needs to consider the load balance between LTE and 2/3G, 
improve the utilization rate of network resources.
The mobile network ecosystem is nowdays very complicated and OMC statistics only ­provide 
an average and flat view of the cell that are not enough to have a clear picture of the actual 
­status. There is the need of a new approach to collect and analyse such data and drive properly 
the network optimization and expansion.
2.1.3  LTE Joint Optimization with 2G/3G
Optimization strategies should also consider especially where the LTE network shares antenna 
and/or feeder cable infrastructure with legacy 3G and/or 2G networks.
Due to 2/3G network in speech coverage is quite perfect, and the performance of LTE high 
data rate services and delay characteristics that 2/3G networks do not have, so if the stragety of 
joint optimization of 2/3G and LTE network is considered, from the operators point of view, 
the network performance and investment will reach optimal results. Based on the above pur-
poses, LTE and 2/3G will be one network, which can be used to upgrade the existed network to 
one core network, one service platform, and one transport network, support interworking with 
legacy 2/3G networks, to achieve LTE/2G/3G network integration, and ensure that the rapid 
construction of network. 2G/3G network acts as an extension of LTE network coverage. At the 
same time, according to the 2/3G and LTE parameters, the operator will set up a flexible 
deployment network by 2G/3G/LTE hybrid multi‐network strategy.
2.1.4  Optimization Target
When doing optimization, the following performance must be considered.
Coverage: Good signal needs to be optimized across the whole cell and coverage holes within a 
cell’s service area must be minimized. In the system’s coverage area, by adjusting the antenna, 
power, and other means to make more areas’ signal to meet the needs of the minimum level 
of service, as far as possible the use of limited power to achieve the optimal coverage. 
Coverage optimization items include cell range, overlapping, overshooting, RSRP and SINR 
distribution, DL/UL loading, and DL/UL cell‐edge bit rate.
www.ebook3000.com

LTE Optimization Engineering Handbook
26
Interference: A reasonable level of interference must be contained at cell’s service area in order 
to provide a quality air interface. The power control parameter optimization is especially 
important for the performance of the same frequency network. In different scenarios, 
the power control parameters are adjusted to reduce the system interference, including the 
­traffic channel power control and the control channel power control.
Mobility: The quality of the air interface in a cell with respect to handover behavior is good, 
with no unnecessary handovers. Through adjusting the parameter of handovers, enable the 
handover areas to be more reasonable is the target of mobility optimization. Control hando-
ver area with the reference signal level, if it is too high, the interference to other cells will 
increase; too low, session drop and access failure will easily happened.
Capacity: Capacity optimization items include PRB (includes control channels) utilization, 
power and spectrum utilization, number of simultaneous EPS bearers, UL RSSI, PDCCH 
format and S1 utilization, traffic distribution, and intra‐LTE/inter‐LTE load balance.
Quality: Quality optimization items include CQI, MCS, RSRQ, BLER, MIMO, Tx diversity, UE 
Rx diversity, eNB power, UE power, packet loss, jitter, and so on.
In general, the network optimization should includes access, session drop, latency, mobility, 
congestion, paging, and other thematic analysis, and so on; it needs to analyze the performance 
of the network from different ways. Through the network main index trend, spot the poor quality 
of topN areas and reason of failure reasons, and improve the engineers to solve the problem. At 
meanwhile, the optimization should realize the perception of VIP users to evaluate and issues 
tracking, to achieve user awareness.
2.2  ­LTE Optimization Procedure
2.2.1  Optimization Procedure Overview
LTE optimization can be divided into two steps, one is RAN pre‐launch optimization, the other 
is post launch optimization. Optimization lifecycle is depicted in Figure 2.1.
RAN pre‐launch optimization for LTE assists in the evaluation and tuning of the radio access 
network in order to ensure that the performance and coverage of the RAN is maximized prior 
to commercial launch.
Network
Deployment
Initial optimization:
Initial tuning or
prelaunch optimization
In-service optimization:
Post-launch
optimization
Continuous optimization:
network expansion
& planning
Loading reaches
designed capacity
Network
launch
Figure 2.1  Optimization life cycle.

LTE Optimization and Principle and Method
27
Ideally, RAN initial optimization should be performed on single site verification and a cluster 
basis, as this allows the network to be optimized in a controlled and manageable way. Single site 
verification involves function verification and aims to ensure that each site is properly installed 
and the parameters are correctly configured. Cluster optimization starts after all sites in a 
planned area are installed and verified. Clusters typically consist of between 15 and 25 sites 
providing contiguous coverage. The “first tier” of sites surrounding the cluster is also defined 
as these sites will interact with the cluster and should be considered when optimizing a cluster. 
When optimizing a network it is recommended that a golden cluster is used at the start of a 
network optimization and performance improvement program. Drive tests on cluster aim at 
optimizing settings like antenna tilt or azimuth, transmit power, handover parameters, and list 
of neighboring cells in order to minimize interferences and to get the best from handover. 
Frequency planning per cluster should be reviewed and fine‐tuning in this step to minimize 
interference and hence enhance radio network performance.
The initial tuning will aim to prepare both the air interface and troubleshoot system issues to 
achieve the best end‐user experience with the following objectives in mind: resolve hardware 
installation issues, parameter integrity issues, and improve design and end‐user experience, 
which includes availability of service (coverage), mobility, throughput, latency, and bottlenecks 
in the system, reliability (BLER), IRAT handover; its aim is to maximize SINR and highest 
modulation in order to achieve the best throughput per resource block. The detail optimiza-
tion procedure is shown in Figure 2.2.
Upon completion of the pre‐launch optimization phase, the acceptance phase will be per-
formed. The post‐launch optimization is carried out on counter level, parameter level, cell level, 
and terrain/area level. Ususlly it is needed to check any type of hardware alarm/VSWR alarm, 
check UL RSSI issues, check bad CQI distribution, and so on. This phase is performed to verify 
the system wide performance after completion of cluster optimization. Radio network optimiza-
tion is a continuation of cluster optimization, to fine‐tune inter‐cluster performance and to 
address coverage and performance issues that could not be resolved during cluster optimization. 
It allows operator to validate the compliance to the key performance indicators (KPI) targets and 
end‐users KPIs, in order to improve radio behavior of the network in terms of call drop, cover-
age holes, and handover mechanisms. Poor‐quality cell optimization and ideas on how to 
improve the system resource utilization, requires that the engineers’ analysis of mobile phone 
traffic statistics, parameter optimization, and physical optimization of the whole network is 
utilized to achieve the best performance. LTE radio network optimization tasks shown in 
Figure 2.3 include the following parts: to integrate a variety of existing network measurement 
data sources for test preparations, data collection, problem analysis, and parameter adjustment.
Frequency
scanning
External
interference
survey and
cancellation
Cell coverage
test
Access test
Data rate test
Latency test
Meet
the target
Yes
Yes
No
Meet
the target
No
Clutter
planning
Drive test
route planning
Data
connection
Data analysis
The whole
network
optimization
Coverage,
interference
and parameter
optimization
Optimization
report
KPI result
Mobility test
Parameter,
antenna and
cable check
Figure 2.2  Optimization procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
28
Perform analysis of daily drive test is a normal way to optimize the network which includes 
code and power planning verification, reference signal receive power quality, interference anal-
ysis, cell coverage overlap, UL/DL data performance, neighbor relation optimization, antenna 
tilts, re‐orientations, physical changes, IRAT issues, retainability issues, and accessibility issues. 
The overview of daily optimization is shown in Figure 2.4.
Drive test data has been a primary source of optimization, for example, in rollouts and in 
specific use cases. However, for the majority of mobile users (of whom ~70% are indoors based 
on recent reports), drive test data does not tell the whole story. Unlike drive test data, call trace 
data is “real” data and provides visibility into indoor users unlike simulated drive testing. Call 
trace data is superior, but it has challenges on geolocation and data volume.
2.2.2  Collection of Mass Nerwork Measurement Data
Traditional drive test (DT) is a manual method that allows the operator to gather information 
about network in some particular area to verify call handling functionality (accessibility, retaina-
bility, integrity), to detect interference areas, to note unexpected coverage holes, and to identify 
any hardware/software faults. Parameters like radio signal quality, signaling events, throughput, 
and so on, are measured from the field and recorded by dedicated equipment. Drive testing will 
KPI
Reports
Parameter
Audits & CR
Implementations
Alarm
Checks
Worst
Performer
Analysis
Recommendations
Collect field
data 
Validate
data 
Load data
Process data,
calculate KPIs,
KQIs
Present to engineers for
analysis and
optimization
Post Launch Optimization Tasks
Figure 2.3  LTE radio network optimization tasks.
KPI daily report
Daily
optimization
report
Meet KPI
target
Wrong parameter
configuration
cell list
eNB alarm
cell list
User complaint
cell list
Yes
No
Choose
worse cell
KPI worst
Top N cell
Low
throughput
Low access
rate
High call
drop
Low handover
success rate
Congestion
Antenna, Access, Scheduler,
Power control, Mobility,
Capacity, ViP site, and E2E
optimization solution
Optimization
Figure 2.4  Daily optimization.

LTE Optimization and Principle and Method
29
collect cell ID, RxLevel, RxQuality, timing advance, transmit power, GPS position data, and time 
stamps, and form the main part of cluster tuning. Drive test data with UE or scanner measure-
ments are often useful to identify coverage holes, as such drive tests are usually performed at 
acceptance testing. The indicators. RSRP, RSRQ, and RS CINR, are good indicators of the down-
link quality of the network. Once a cluster drive test is complete, it is recommended to use the 
measurements to start analyzing the coverage of each cell to see if coverage objectives are met. 
For example, comparing the measurements with a best server plot can give indications of PCI‐
clashes, swapped feeders, cells not transmitting, or overshooting cells.
The major measurement from the scanner is to verify the signal strength and the quality of 
the signal. The second part is to verify the code planning and the handover areas. It is crucial 
to minimize cell overlap even more than in WCDMA, as in LTE there is no soft handover. This 
means that inter‐cell interference will occur even from the second best cell.
Scanners can be used during drive tests to provide an independent assessment of RSSI, RSRP, 
and RSRQ. Scanners require one antenna connection and signals from all transmit antennas 
can be measured as separate RSRP measurements. Differences between RSRP‐0 and RSRP‐1 
can be useful for detecting transmit problems such as swapped feeders and radio unit faults.
Conventional optimization based on drive testing or scanner data, is extremely laborious and time‐
consuming. Besides drive test and scanner data, the usage of actual network data is prefered for opti-
mization, which is more accurate than drive‐testing or planning data since no assumption is made. 
Indicators such as measurement report (MR) data, OMC data, signaling data, MDT data, UE traffic 
recording, cell traffic recording data, and so on, are called mass data for the communication service 
provider. Mass data is becoming one of the most talked about technology trends these days, as they are 
all used to identify and solve radio network problems. The mass data is also very important to deploy-
ing powerful real‐time analytics and visualization tools and the automatic optimization of the network.
Nowadays, soft data collection is a new cost‐efficient way to collect data. The software col-
lection platform can output all original signaling data through the signaling manufacturer’s 
mirror output port and collects the key information of signaling data through the special 
adapter server. Compared with the traditional hard data collection mode, the software method 
provides a more flexible signaling data collection solution, which ensures the integrity and the 
accuracy of the data (Figure 2.5).
Rx
Gx or S7
Cell
Signaling Analysis
MME
PCRF
LTE-UE
LTE-Uu
Evolved
node B
(eNB)
X2
Serving
Gateway
PDN
Gateway
MME: Mobility Management Entity
PCRF: Policy & Charging Rule Function
S6a
S1-MME
S1-U
SGi
S5/S8
S11
IMS/PDN
HSS
SAE
Gateway
Figure 2.5  Signaling collection.
www.ebook3000.com

LTE Optimization Engineering Handbook
30
Network performance management counters and statistics will also be of significant use 
­during optimization and tuning activities. Counters and performance indicators can also be 
useful during initial tuning. The intelligent platform offers eNB total care and collects/manages 
data automatically online that provides a comprehensive and systematic solution containing 
valuable know how on operation and optimization.
2.2.3  Measurement Report Data Analysis
Mobile phones communicate periodically with the network, for example, sending back a meas-
urement report (MR) about the quality of the signal that they are receiving and the different 
cells that are surrounding them. Based on the MR data report collected from the network, the 
operator can monitor the network performance and track all the UE calls’ performance within 
the network. It allows customers to debug some problems linked to any related mobile users. 
MR includes physical layer measurement, MAC layer, RLC layer, PDCP layer measurement, 
and so on. The measurement results are able to trigger events of radio resource control ­sub‐
layer, such as cell select, cell re‐select and handover, and so on; it is also able to be used for 
system operation and maintenance and observing system run status. Some important meas-
urements are listed below:
RSRP (reference signal received power), the received power on the resource elements that 
carry cell‐specific reference signals.
RSRQ (reference signal received quality), the relation of N times the RSRP divided by the total 
received power in the channel bandwidth.
The MR data of AOA (angle of arrival) is the angle between the UE and the cell antenna that 
UE is present. AoA is the angle (usually azimuth) from which a signal arrives relative to geo-
graphical north of an antenna array. It is able to be used for UE location. The operator can 
confirm UE position by the distance between UE and eNB and the AOA.
Seen in Figure 2.6 (left), the UE is located in cell A, the distance and the AOA give UE’s loca-
tion, somewhere within the gray sector.
TA (timing advance), is used by the UE to adjust transmit timing. eNB estimates the trans-
mission timing of the UE based on the RACH preamble.
Antenna Bearing
for AoA Calculation
Absolute Angle of
Arrival (AoA)
Direction 
of UE
Geographical
North
Relative
AoA
8Tx/Rx TDD Antenna system
A
B
C
Antenna
Normal
Direction
Figure 2.6  Used angles for AoA calculation.

LTE Optimization and Principle and Method
31
RIP (received interference power) measurement will be reported through cell trace 
­periodically. The RIP report type can be selected as either per subframe or PRB based or 
per subframe based.
UE uplink_SINR, UE based UL_SINR measurement is reported by cell trace periodically.
PHR (Power headroom report) is the index reported by the UE to indicate the estimated power 
headroom, which tells the eNB how much of the maximum UE transmit power that the UE 
wanted to use for a certain transmission. The power headroom reporting range is from −23 to 
+40 dB (negative value means the UE was power limited). The eNB can use the power headroom 
reports to determine how much more uplink bandwidth per subframe a UE is capable of using.
2.2.4  Signaling Data Analysis
In LTE, control plane messages and user plane traffic can be traced from various interfaces. To 
trace all control messages related to call establishment following interfaces should be traced: 
S1‐MME, S6a, and S11, tools such as Wireshark, and others can be easily connected to moni-
tor, these interfaces through a network hub or router. Meanwhile, LTE UU and X2 interfaces of 
the wireless equipment need to provide the output capability of the whole quantity network 
service data, that is, signaling soft collection.
Network element should have the output port of signaling and all kinds of traffic data. 
OMC‐R can control the function of signaling soft collection. Traffic aggregation adapter (SCA) 
is responsible for gathering wireless network equipment of signaling data flow. The use of net-
work‐generated logs and automated tools can significantly speed up the network optimization 
process and lead to significant cost savings. Figure 2.7 and Table 2.1 show an example of LTE 
signaling load on overall network per application.
4000000
3500000
3000000
2500000
2000000
1500000
1000000
500000
0
eNodeB
MME
HSS
DNS
SGW
PGW
PCRF
RRC
Attach
S1 Handover
TAU
X2 Handover
Paging
Periodic TAU
Signaling Analysis Per Application
Attach
RRC
TAU
Periodic TAU
Paging
S1 Handover
X2 Handover
19.2
34.4
4.8
2.6
21.5
11.5
6
Signaling Load
per application (%)
Figure 2.7  LTE signaling load of different interfaces and nodes.
Table 2.1  LTE network element signaling load per application.
Nodes
eNB
MME
HSS
DNS
SGW
PGW
PCRF
Attach
0.4%
7.4%
24.7%
12.3%
18.5%
24.7%
12.3%
TAU
0.2%
5.4%
67.4%
0.0%
27.0%
0.0%
0.0%
Periodic TAU
0.1%
9.1%
90.8%
0.0%
0.0%
0.0%
0.0%
Paging
3.1%
9.9%
0.0%
0.0%
87.0%
0.0%
0.0%
S1 Handover
0.2%
11.7%
0.0%
0.0%
58.7%
29.4%
0.0%
X2 Handover
0.4%
9.1%
0.0%
0.0%
90.6%
0.0%
0.0%
www.ebook3000.com

LTE Optimization Engineering Handbook
32
2.2.5  UE Positioning
Moving into 4G, it is time that we go beyond existing business models of generating revenues 
from serving individual users’ location‐based service (LBS), that is, to venture into a new 
­business model of providing geographic user behavior to meet the needs of the users, as well, 
mass data (MR or signaling data) –based network optimization will need the user’s auucrate 
position. Geolocation enables important optimization possibilities, helps in the analysis of the 
­traffic and identifies where the data traffic hot spots are. By following the success story of 
Google search service, it is foreseen that the positioning for users are evidenced by smart-
phones going into markets at an accelerated rate and providing a higher quality geolocation 
solution to support commercial LBS to individual users. Especially 3D geolocation allows for 
rapid identification of quality issues in the network and precisely directed optimization based 
on actual users. This helps to save time and effort in maintaining the network at the best level. 
A more detailed UE positioning description from traditional drive test to geo‐based optimiza-
tion will be presented in the following sections (Figure 2.8).
Smartphone technology combining fast processors, GPS and Wi‐Fi assistance has revolu-
tionized the use of mobile location. This can help both consumer and employee facing systems, 
often making use of the exact same approaches.
From wireless technology or air interface point of view, the UE positioning feature provides 
a method to identify UE’s geographical location by radio signal measurement. The locations of 
these cells are known, and the speed at which radio waves travel is fixed and does not vary. By 
calculating the time delay between radio signals arriving at different cells it is possible to trian-
gulate and find the UE’s location. The different positioning methods supported are: cell ID‐
based (the accuracy depends on radio network density), OTDOA (observed time difference of 
arrival, medium accuracy) and A‐GPS, as illustrated in Table 2.2.
On the other hand, the signaling and user plane geolocation becomes popular now where 
data service is increasingly popular. The concept of the solution is to make LBS entirely inde-
pendent of wireless technologies, or air interfaces. Since the LBS‐related messages are trans-
ported in the user plane there is no scalability issue faced by radio geolocation.
For indoor positioning, the situation is different. Clearly, GPS does not work, because there 
is no satellite visibility, and signal strength is too weak for cell tower triangulation. When the 
pathloss is used in the estimation of the distance, it is expected lower accuracy for the position 
of indoor UE. The most common handset‐based technologies are based on the known WiFi 
locations or Bluetooth beacons, which have been deployed in a few showcase locations, such as 
airports, shopping malls, and exhibition centers. WiFi/Bluetooth CID (BSSID/UUID) decod-
ing and reporting via RRC, to enable identity reporting of beacons, which also have benefits for 
radio resource management when handled via RRC.
Alternatively, network‐based approaches can be used where the network uses radio frequency 
fingerprinting to track the UE. When an app needs to know the location of a device, it requests 
it from the network management system, independent of the handset operating system.
Accurately determining the location of a wireless subscriber is difficult because of the nature 
of wireless networks. The inherent mobility of wireless subscribers means that they are not 
tethered to a single location. Furthermore, if a subscriber can once be located, there is no assur-
ance that their location has not changed at a later time. Likewise, the varying conditions of 
wireless networks mean that network information is not static. A solution that works at one 
moment in time may not work later when network conditions change. All of these issues con-
tribute to the difficulty in determining the location of a wireless subscriber. The actual location 
of a wireless subscriber can generally not be known with any degree of certainty.
Geolocation technology has evolved across the last decade to match industry expectations 
and also cope with technology evolution and it is achieved by accurately locating UE position, 

LTE Optimization and Principle and Method
33
both indoors and outdoors, three dimensions in horizontal and vertical directions by using 
MRs from the user equipment, wherever they are, even within buildings.
2.2.5.1  Timing Advance
Different UEs in the cell may have different position, and therefore, different propagation delay, 
thus this may affect uplink synchronization. eNB’s timing will be phase‐synced to GPS within 
100ns to support timing advance (TA) to achieve the tight phase‐sync. TA characteristics can 
be assumed that uplink arrives 0.3us too late compared to downlink. This error needs to 
be minimized with a correction of the UL timing. Due to the minimum step length of 0.52us 
Accuracy
+
–
Drive test
PM counters
and CM data
Call traces
and CM data
Geo-based
Optimization
Smoothing-based
Optimization
RSRP
< = –115.000000
> – 115.000000 AND RSRP < = –105.000000
> – 105.000000 AND RSRP < = –95.000000
> – 95.000000 AND RSRP < = –80.000000
> – 80.000000 AND RSRP < = 0.000000
OSS-based
Optimization
Figure 2.8  Optimization method by advanced geolocation algorithms.
www.ebook3000.com

LTE Optimization Engineering Handbook
34
(TA granularity is 16* Ts = 16/(15000*2048) = 0.52 µs) the UE is told to send the next frame 
0.52us earlier. After the correction is applied, the frames will arrive 0.22us to early. This is 
treated as good since the error has decreased. The least measurable error is 0.26us (Figure 2.9).
UE distance and UE velocity relative to eNB can be calculated by TA. UE distance can be 
calculated based on the median TA value in a series of TA reports. UE velocity relative to eNB 
can be calculated the difference between the first and last TA values in a series of TA reports, 
and convert the TA difference to distance difference relative to eNB and then UE velocity is 
based on the duration for the reports.
Table 2.2  Positioning methods.
Method
Handset impact Accuracy
Availability
Cell ID
No impact
From 200 m to 5 Km
200 m in urban to 5 Km in rural area
CID/TA
No impact
From 100 m to >1Km
Mainly use CGI/TA (GSM and LTE) or 
RTT (3G) and UERxTxDiff (LTE)
E‐CGI (GSM)
No impact
150‐400 m
Any environment
AECID
No impact
From 50 m in urban to 
500 m in rural area
Any environment, but it requires high 
penetration of A‐GPS in order to reduce 
maintenance cost
A‐GPS
HW & SW
10‐30 meter
Doesn’t perform well indoor.
OTDOA
SW
50‐150 meter
Only LTE, did not work well in 2/3G
U‐TDOA
No Impact
50‐100 meter
Cost is high for deploying LMUs.
3D RSS fingerprinting No Impact
10‐30 meter
Required 3D maps & network 
configuration
Hybrid Positioning
No Impact
between accuracies of the involved methods
0,52us
n*TA
The mobile is somewhere in 
the yellow arc.
pos(X,Y,Z)
Ideal position
0,26us
0,26us
DL
UL without TA
UL useing TA
A
B
Speed of light: 300*106 m/s
s=v*t; 300*106*0.52*10–6 = 156 m; 300*106 *0.26*10–6 = 78 m
Two types of TA:
TA (type 1) = (eNB Rx – Tx) + (UE Rx – Tx) Continuous TA
TA (type 2) = eNB Rx – Tx                             PRACH TA
Figure 2.9  Timing advance.

LTE Optimization and Principle and Method
35
In urban areas, UE is usually connected to eNB under a no‐line‐of‐site condition (reflections 
on building and terrain). This effect results in an over‐estimation of the distance between UE 
and eNB impacting on the positioning.
2.2.5.2  Location Accuracy Evaluation
Location determination algorithms are the backbone of operator‐offered location‐based ser-
vices. There are legacy techniques listed below to determine an estimate of the location of a 
wireless user. Other techniques are possible, but are typically less applicable and require much 
more complicated analysis and computation.
Cell‐ID method
The cell‐ID method provides the identification of the serving sector for an active wireless 
subscriber as an estimate of their location. The cell‐ID can be obtained from signaling informa-
tion that is used to set up or maintain a wireless call. This technique has limited accuracy since 
it can only identify the location of a user to the area covered by a cell, which can be quite large.
Normally cell‐ID and other UE/EUTRAN measurements can be used to calculate UE’s posi-
tion, it can be got other informations include the coordinates of the radio antenna, number of 
sectors in an eNB, beam orientations, and transmitting powers. The cell‐ID method can pro-
vide estimated accuracy is 100 m 67% and 300 m 95%.
TA+AoA method
UE distance can be calculated based on the median TA value, AoA (angle‐of‐arrival, the 
angle (usually azimuth) from which a signal arrives relative to a reference angle (geographical 
north) of an antenna array) can be used to determine the azimuth of the UE.
Assisted GPS (A‐GPS)
Assisted GPS makes use of the GPS capabilities of a UE and the availability of a GPS satellite 
network to provide very accurate location information for an individual user. Assisted GPS is a 
refinement of GPS where the network stores information that can be provided to the UE to 
help the UE speed up the process of acquiring the required number of GPS satellites to allow 
for GPS geolocation. However, not all UEs are equipped with GPS capabilities today. 
Furthermore, GPS features tend to use a significant amount of power, causing wireless sub-
scribers to sometimes turn off the GPS functions on their GPS‐enabled phones. Also, GPS 
requires line‐of‐sight access to multiple GPS satellites, which means that it does not work well 
indoors. An assisted GPS method can provide an estimated accuracy of 50 m 67% and 
100 m 95%.
OTDOA
OTDOA positioning method relies on the UE measuring the Reference Signal Time 
Difference (RSTD) on Positioning Reference Signals (PRS) sent from the reference cell and a 
number of neighboring cells as it requires that the UE can detect and measure on at least two 
neighbors; the two neighbors must also have “decent” geometry relative to the UE (e.g., not in 
line as seen from the UE). The OTDOA method can provide estimated accuracy is 100 m 67% 
and 300 m 95%.
Triangulation
Triangulation is a mathematical technique where the location of a point in a three‐dimensional 
environment can be determined by knowing the distance between that point and at least three 
other fixed points in the network. The more accurate the information about these distances, 
www.ebook3000.com

LTE Optimization Engineering Handbook
36
the more accurately the calculated position of the point of interest can be obtained. Location 
estimates of lesser accuracy can be obtained by knowing the distance to two or even one other 
point in the network (Figure 2.10).
In wireless networks, obtaining the distances from the point of the wireless user to the other 
fixed points is generally accomplished by measuring the time it takes to transmit information 
from the point of interest to the other fixed points and using that time to estimate the distance 
based on the propagation speed of the information. Adjustments can be made to the estimate 
of the distance by the known delays in the propagation. In urban environments, the triangula-
tion method can provide estimated accuracies of 150 meters most of the time.
Several tests were made by combined TA+AoA and triangulation method and in the field at 
different locations in a live network. Some analysis of the test results are provided in Figure 2.11. 
It was begun with individual tests to see if there is a systematic error in the coordinate detec-
tion produced by the tool. Then it will have an assessment of all the tests to see what accuracy 
can be achieved with an increase in samples.
The blue dots are the measured coordinates relative to the mobile location at (0, 0). It is seen 
that the over all offset are unevenly scattered around (0, 0). On average, the offset in X is 14.9 
meters and in Y is −22.5 meters. The standard deviation is 94.4 meters (Figure 2.11).
2.2.5.3  Location Support
The control plane of location support provides positioning information of a user in the EPS 
system. The positioning methods supported by this feature are assisted GPS (A‐GPS), observed 
time difference of arrival (OTDOA), and enhanced cell ID, and they generate UE positioning 
data used to position a LTE UE with high accuracy in the network. In A‐GPS, assistance data 
are retrieved by the network from GPS signal being sent by the GPS satellite constellation. 
–99 dBm
–98 dBm
–81 dBm
–85 dBm
Site3
Site1
Site2
–96 dBm
Figure 2.10  Choose signals from 
three sites and estimate the 
distance from UE to sites.

LTE Optimization and Principle and Method
37
The UE performs the GPS measurements with the help of assistance data provided by the 
­network. This position can then be used by emergency services or commercial location 
­services. Positioning data between positioning nodes and the UE is transferred on the control/
user plane. Positioning tasks to be performed by eNB include:
●
●Configuration of positioning sub‐frames (for OTDOA)
●
●Broadcast of position reference symbols
●
●Inform UE about positioning sub‐frames, by broadcasting or by dedicated signaling
●
●Measure TA (for ECID)
●
●Request UE measurements (for ECID)
●
●Measure GNSS timing of cell frames
●
●Forward measurements to eSMLC
●
●Terminate LPPa protocol
●
●Forward LPP containers (assistance data and UE measurements)
Following RAN events/measurements are located on the map as a function of actual statisti-
cally distributed usage (user id unknown) (Figure 2.12).
2.2.5.4  3D Geolocation
Drive test and 2D geolocation provide a network view at street level. Traditional optimi-
zation doesn’t consider what is happening in buildings. So, how do we identify problems in 
the buildings, low coverage areas, traffic hot spots, and so on? Imagine you have a multi‐use 
high‐rise building with 20 floors. Is the majority of the mobile traffic coming from the 
­restaurant on the first floor, or the office on the tenth floor? 3D geolocation can answer this 
question and help plan the most cost‐efficient and effective solution. As most of the traffic is 
indoor, network performance in‐building is very important, because accurate indoor posi-
tioning of UEs can have a evaluation of indoor cell loading and efficiency by analyzing how 
much traffic should belong to an indoor cell but is absorbed by surrounding outdoor cells. 
A 3D method geolocates network events not just on a horizontal two dimensions (2D) but 
also at different floors in high‐rise buildings, that is, on a vertical z‐axis (3D). A 3D vision of 
real traffic with outdoor versus indoor traffic and height with massive geolocation brings 
–100
–50
0
50
100
150
200
250
300
–250
–200
–150
–100
–50
0
50
100
150
Distance in meters
Distance in meters
GHData relative to FieldData
Figure 2.11  Scatter plot of the 
coordinate offset in meters from all 
the tests.
www.ebook3000.com

LTE Optimization Engineering Handbook
38
unparallel optimization opportunities, as the optimization output is different depending on 
the location and height of the demand.
For 3D geolocation, real data from users positioned on three dimensions will get higher 
­accuracy. The method is based on a RF prediction database, which is also called RF 
Frigerprinting. The whole procedure is shown in Figure 2.13. The RF Frigerprinting can be got-
ton by network simulation using geographical information and network configuration data. 
Received signal strengths from a large set of cells to each point within the coverage area is 
­calculated and stored as the Frigerprinting and then determine the UE’s position by comparing/match-
ing with its MR. In the first stage, a database of expected signals strengths of all relevant‐based 
Value
value < –110
–110< = value <–103
–103< = value<–96
–96<= value<–85
–85<= value<–75
value> = –75
Figure 2.12  RSRP plot with geolocation.
3D Geolocation
Create GIS Database
Import Network Data
Predict Coverage
Create finger print DB
MR Data Collection
Parsing
Network Consistency
Geolocation
Network Alignment
Field Verification
NOK
Optimization
OK
Network Data
Figure 2.13  3D geolocation procedure.

LTE Optimization and Principle and Method
39
stations in each point within the coverage zone is created. In the second stage, UEs’ MR, which 
may include RSRP measurement of the serving and neighboring cells as well as time delay 
information, are correlated with the database, picking the best matching point as the mobile’s 
estimated location (Figure 2.14).
For detail, 3D geolocation will need three steps:
Step 1, collect inputs: Geographical data, including terrain, roads, clutter, and buildings. For 
more accurate monitoring and optimization, 3D maps are needed. Cell and antenna loca-
tions and parameters including adjacent (neighbor) lists, and MR such as timing advance 
and RSRP events, handover events, dropped calls, inter‐RAT handover events, and so on. 
Such files can be recorded by the RAN’s OMC or by recording the interfaces.
Before step 2, preprocessing is needed to clean up the raw data both for removal of bad data 
from errors in the collection process and cleaning of some multipath errors correctly measured 
during collection. It is very critical that operator provides as accurate network configuration 
data as possible.
Step 2, generate 3D coverage prediction: Upon collection of geographical data and network 
information, a 3D propagation model is used to predict received signal strength at various 
points in the network. A “fingerprint” (predictive fingerprinting algorithms) with RSRP levels 
is created for each point by ray tracing simulation as shown in Figure 2.15 and Figure 2.16.
Upon completion of this phase, the system maintains a 3D coverage database that contains the 
received signal strength of each relevant cell at each point of the coverage area. This database contains 
accurate predictions. The coverage database contains separate layers for area, roads, and buildings.
Step 3, locating UE: UE’s MR may include RSRP measurement of the serving and neighboring 
cells as well as time delay information, are correlated with the database, picking the best match-
ing point as the mobile’s estimated location. The location is determined by several algorithms 
that use time delay measurements and pattern matching of signal strength measurements to 
the fingerprints as shown in Figure 2.17. The location determination in performed in three 
dimensions, that is, height above the ground is calculated for indoor calls. Finally, the “real” 
network performances of the matched UEs’ MRs at different floors of the buildings were pre-
sent as shown in the Figure 2.18. The set of localized events creates an alternative coverage 
database, with the advantage of being a result of real measurements of real terminals. As such, 
it provides a more realistic picture than drive tests or predictions.
The heart of the algorithm is the matching of a set of received RSRP measurements to the 
predicted RSRP values calculated for each viable point. 3D model should take into account the 
impact of the buildings shape and heights.
It worths to note that the fingerprint database needs to be calibrated with real user informa-
tion before matching. The calibration is based on actual user latitude and longitude data, and 
signal strength information, which includes indoor/outdoor frequency sweep data, drive test 
data, signaling, and MR correlation outputs with user latitude and longitude.
Terrain
Clutter
Streets
Buildings
Figure 2.14  GIS database is created from terrain, clutters, and buildings.
www.ebook3000.com

LTE Optimization Engineering Handbook
40
Figure 2.15  Creating a 3D “fingerprint” database.
Figure 2.16  Predicted RSRP from up to 40 sectors.

BlueLayer
–70dBm - Max
GreenLayer
–80dBm - – 70dBm
YellowLayer
–90dBm - –80dBm
OrangeLayer
–100dBm - –90dBm
RedLayer
Min - –100dBm
BlueLayer
–8dB - Max
GreenLayer
–10dB - –8dB
YellowLayer
–12dB - –10dB
OrangeLayer
–16dB - –12dB
RedLayer
Min - –16dB
BlueLayer
16MB - Max
GreenLayer
12MB - 16MB
YellowLayer
8MB - 12MB
OrangeLayer
4MB - 8MB
RedLayer
Min - 4MB
Figure 2.18  Network performances at different floors of the buildings. (See insert for color representation 
of the figure.)
Predicted Signal Levels from 3D ray
tracing
Receiving Signal Levels in
MR
Sum of Square Error
Square Sum
cell
rxlev 1
rxlev 2
rxlev 3
rxlev 4
A
70
68
64
65
B
42
43
45
41
C
25
16
28
23
Delta between predicted and MR signal levels
cell
delta 1
delta 2
delta 3
delta 4
A
5
3
–1
0
B
–2
–1
1
–3
C
–2
–11
1
–4
MR
cell
rxlev
A
65
B
44
C
27
1
2
3
4
33
131
3
25
SQ1
SQ2
SQ3
SQ4
–
Σx2
Figure 2.17  Calculate matching factor to 3D prediction grid.
www.ebook3000.com

LTE Optimization Engineering Handbook
42
2.2.6  Key Performance Indicators Optimization
The key counters are used to generate the key performance indicators (KPIs) of the network, 
which are defined on the OMC, and these counters are predefined and initialized as soon as the 
eNB starts. The optimization of KPIs is still important in LTE. There are a few KPIs that will 
adversely affect end‐user experience if any of these KPIs under‐perform and it is critical to 
monitor closely the performance of these main KPIs. This troubleshooting guideline aims to 
present ideas to pinpoint potential areas for troubleshooting if any of these main KPIs, for 
example, integrity, accessibility, retainability, mobility, and so on, under‐perform. The most 
interested field KPIs are listed below as shown in Table 2.3.
Integrity, which is the KPIs’ defining quality of the service provided: latency, retransmissions, 
RSSI for PUCCH/PUSCH, SINR for PUCCH/PUSCH, and CQI/CQI offset.
Accessibility, which has KPIs indicating the possibility to access to a service: RRC connection 
establishment.
E‐RAB setup, paging records, and discards. It is a combined metric including RRC, S1, and 
E‐RAB establishment success rate. In the case of poor accessibility, each success rate must be 
analyzed individually. Reasons for poor accessibility include but are not limited to poor 
coverage, high UL interference, UE camping in the wrong cell, or admission reject.
Retainability, which is defined as the ability of a user to retain the E‐RAB once connected for 
the desired duration, which has KPIs indicating the ability to hold/sustain the call: call drop, 
call completion, E‐RAB drop, E‐RAB normal release, RRC connection re‐establishment, and 
IP incoming traffic error rate.
Table 2.3  Some of the field KPIs.
KPI name
KPI category
Application 
services
PS data services 
(FTP, HTTP etc)
Service accessibility ratio [%]
Accessibility
Completed session ratio [%]
Accessibility
Single user throughput [Mbps]
Usage
LTE E2E  
network service
Control plane
Attach time [ms],  
AttacTime ms
t
t
AttachComplete
Attach Request
Integrity
Attach success rate [%]
Accessibility
Service request (EPS) time [ms]
Integrity
Service request (EPS) success rate [%]
Accessibility
Service (EPS) Drop rate [%]
Retainability
Handover procedure Time [ms]
Mobility
Handover success rate [%]
Mobility
User plane
Round trip time (RTT) [ms]
Integrity
Single user throughput [Mbps]
Usage
Service interrupt time (HO) [ms]
Mobility
Radio bearer 
services
User plane
Single user throughput [Mbps]
Usage
Cell throughput [Mbps]
Usage
Note: The attach time is the interval between the RRC connection request (carrying the attach request) and the 
reception of a positive response by the UE (attach complete).
“Single user throughput” KPI can be specified on each protocol layer, such as application layer, IP layer, L2 layer 
(PDCP/RLC/MAC layer), and L1 layer (physical layer).

LTE Optimization and Principle and Method
43
Mobility, which has KPIs indicating performance of handovers (intra/inter eNB, X2 based): 
handover preparation, handover success rate, and handover failure rate. Reasons for poor 
mobility include but are not limited to missing neighbor relations, poor radio conditions, or 
badly tuned handover parameters.
Usage, which has KPIs indicating how LTE network is loaded in terms of data volume, through-
put, number of users (active and connected), PRB usage, and cell availability.
2.2.7  Technology Evolution of Optimization
The trend of technology evolution of optimization is traffic steering, user steering, and smart 
optimization.
The operators might always ask themselves, is the problem caused by poor radio performances? 
Is the problem caused by specific devices? Is the problem caused by specific applications? How 
can we make networks more intelligent? All these questions need to be considered for the 
­network optimization evolution as shown in Figure 2.19.
Self‐organizing network (SON) as evolution of optimization has been widely deployed in RAN 
optimization. SON is defined as a set of use cases that covers the entire network lifecycle: planning, 
deployment, operation, and optimization by network mass data. No more tedious manual engi-
neering work but an in‐network software platform with artificial itelligence algorithm that con-
tinuously monitors the network and sets changes to improve its performance. Self‐optimization is 
an important improvement area due to the fact that current automatic optimization tools focus on 
small number of radio parameters and a lot of manual effort is required for optimization activities.
The aim of self‐optimization is to fine‐tune initial parameters automatically for improving cell/
cluster performance and dynamically recalculate these parameters in case of network and traffic 
changes, and make following optimization activities automatic: neighbor cell list optimization, 
interference control, handover parameter optimization, QoS‐related parameter optimization, load 
­balancing, RACH load optimization, optimization of home base stations, and so on (Figure 2.20).
•Basic RF Opt. includes 
•Coverage
•Interference
•Neighbor list
•PSC/PCI
•Frequency
•KPI Opt
•RF Opt. includes 
•Coverage (MR, OSS)
•Capacity (OSS)
•parameters (MR, signaling data)
•antenna and interference
•Opt. based on GIS (MR/PM)
•KPI improvement (MR,OSS)
•E2E Service KQI
•RF/RAN
•Bearer/CN/Transport
•UE
•SP
•Voice/Service
•Service QOS
Classical network  optimization
Much focus on traffic and end user
Efficiency improvement: MR, OSS, signaling 
data  application
•MDT
•RF Opt (ANR, PCI, CCO)
•KPI/Parameter Opt
•MRO
•MLB
•RACH
•A-ICIC [Interference]
Intelligent and automatic
optimization
Figure 2.19  Technology evolution of optimization.
Network
Off-line
optimization
Network
simulation
KPIs
User 
location and
receive
power Info
Site locations
heights, etc
Measurements
Optimization method
Measurements
Parameter
Seting
On-line optimization
Figure 2.20  Online automatic 
optimization.
www.ebook3000.com

LTE Optimization Engineering Handbook
44
As stated above, network optimization evolution will be based on a suite of algorithms that cal-
culates the optimized configuration settings for the network. Optimization is performed based on 
mass 3D geo‐located RF events, OMC data, the actual UE behaviors, as well as ­prediction 
models.
2.3  ­LTE Optimization Key Point
2.3.1  RF Optimization
For LTE, the frequency reuse factor is 1 (the same frequency deployment). The co‐channel inter-
ference will become one of the most important factors that influence system performance. 
Therefore, the RSRP and SINR value distribution is to examine the LTE network coverage and 
interference of the main index, and the level of SINR value is directly dependent upon the cell 
direction angle, tilt, PCI planning, quality of antenna/feeder, and so on. Basic physical RF optimi-
zation is very important, clear cell dominance areas, minimize cell overlapping, and avoid sites 
shooting over large areas with other cells. The outputs of the RF tuning process include informa-
tion of recommended changes to antenna tilts, orientations, and heights, neighbor cell changes 
including additions and deletions, recommendations to remove cells, which may be causing 
excessive interference in the network. In fact, although antenna tilting and antenna placement 
has big impact on other cell interference, it can’t fix bad RF by tuning wireless parameters.
2.3.1.1  RSRP/RSSI/SINR/CINR
RSRP (Reference signal received power), defined as the linear average over the power contribu-
tions of the resource elements that carry cell specific reference signals within the considered 
measurement frequency bandwidth. The measurement used to indicate the coverage of LTE 
system. The formular is:
	
RSRP
P
N
n
n
i
N
RS
RS
DL
s
s
RS
DL
1
	
where, for a given E‐UTRA channel bandwidth, PRS = power in a reference signal (RS). 
NRS
DL = number of RS in a downlink slot, ns= number of symbols carrying RS.
Typical working values of RSRP are in the range from −130 dBm (distant from site) to −50 
dBm (very close to site), which is shown in Table 2.4.
Table 2.4  RSRP value.
Reported value*
Measured quantity value
Unit
RSRP_00
RSRP < −140
dBm
RSRP_01
−140 ≤ RSRP < −139
dBm
RSRP_02
−139 ≤ RSRP < −138
dBm
…
…
…
RSRP_95
−46 ≤ RSRP < −45
dBm
RSRP_96
−45 ≤ RSRP < −44
dBm
RSRP_97
−44 ≤ RSRP
dBm

LTE Optimization and Principle and Method
45
RSSI (Received signal strength indicator) comprises the linear average of the total received 
power observed only in OFDM symbols containing reference symbols for antenna port0, 
which is measured over the entire bandwidth, includes co‐channel serving and non‐serving 
cells, adjacent channel interference, and thermal noise everything. In theory, RSSI (wideband 
power) = noise + serving cell power + interference power. RSSI can be calculated as:
	
RSSI
P
n
i
n
i
Total
s
s
1
	
where Pi
Total = total received wideband power in the ith symbol (Figure 2.21).
When 100% downlink PRB is active without noise and interference, RSSI=12*N*RSRP, where 
N is number of RBs across the RSSI, which is measured and depends on the bandwidth. RSSI 
can be expressed as function of several terms:
	
RSSI
f I TxPwr
TxPwr
Pathloss RSRQ N
RSi
ctrl trf
i
i
DetectedCe
,
,
,
,
,
/
ll
LevelBS LastDetected
Loadi
x
,
,
	
Based on the above fomular, under full load (100% PRB utilization) and high SNR:
	
RSRP dBm
RSSI dBm
log
N
10
12
*
*
	
RSRQ (Reference signal received quality), is the ratio of wanted signal to all received power. 
It is calculated as N*RSRP/RSSI. N is the number of RBs of the EUTRA carrier RSSI measurement 
bandwidth as shown in Figure 2.22.
RSRQ includes the loading of the non‐reference signal subcarriers, so it is a good measure-
ment to indicate the loading. There are five data subcarriers for every one reference signal 
subcarrier, which means that if a lot of data are transmitted, the RSRQ will be low even if the 
received signal is of high quality and there is little to no noise. RSSI increases about 5dB when 
RB activity increases to 100% in a 10MHz cell. Typical working values of RSRQ are in the 
range from −3 dB (low/no interference) to −18 dB (high load/high interference) shown in 
Table 2.5.
Example: RSRP=−82dB, RSSI=−54dB, N=100 => RSRQ=10lg100 + (−82)−(−54)=−8dB
RSRQ tends to drop off rapidly at the cell edge or as the serving cell load increases, which 
can make designing an appropriate level difficult. Typically, RSRQ down to −11 dB can be 
strongly influenced by serving or inter‐cell interference, with no indication as to which is the 
cause. Below −11 dB inter‐cell, external interference or thermal noise become dominant 
(Figure 2.23).
.93
.88
.83
.78
.73
.68
.63
.58
.53
.48
.75
.85
.95
.105
.115
.125
Measurement: 95dBm –67
dBm = 28 dB → agrees with
theory (27.8dB)
RSSI [dBm]
RSSP [dBm]
BW
10 MHz
20 MHz
# RB
50
–27.78
–30.79
100
Scaling:[–10log (12N)]
Figure 2.21  RSRP versus RSSI for full loaded cell (10MHz).
www.ebook3000.com

LTE Optimization Engineering Handbook
46
From the measurement result, we can calculate the relation 
between RSRP and RSRQ: 
RSRP/RSSI*NRB
RSRP-RSSI +10log(NRB) =RSRQ
(–82) – (–67)+10log(NRB) =–7
–15 +10log(NBR) =–7
Log(NRB) =0.8
NRB=6
0.0%
0.0%
CRS RSRP
–82.0
30.0
–7.0
–67
–14
14
–20
96
CRS SINR
RSRQ
RSSI
PRACH Tx Power
PUSCH Tx Power
PUCCH Tx Power
Pathloss
PDSCH Rb Num/slot
PUSCH Rb Num/slot
TM Mode
Handover Delay(s)
MR→HO Cmd Delay
IE
value
Figure 2.22  Calculation RSRP and RSRQ.
Table 2.5  RSRQ values.
Reported value*
Measured quantity value
Unit
RSRQ_00
RSRQ < −19.5
dB
RSRQ_01
−19.5 ≤ RSRQ < −19
dB
RSRQ_02
−19 ≤ RSRQ < −18.5
dB
…
…
…
RSRQ_32
−4 ≤ RSRQ < −3.5
dB
RSRQ_33
−3.5 ≤ RSRQ < −3
dB
RSRQ_34
−3 ≤ RSRQ
dB
RSRQ Distribution
0
10
20
30
40
50
60
70
80
90
100
–14 –13 –12 –11 –10
–9
–8
–7
–6
–5
–4
–3
–2
RSRQ
Number of Samples
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
110%
Percentage
High Traffic 
Low Traffic
High Traffic cumulative %
Low Traffic cumulative %
Figure 2.23  RSRQ distribution in a live network.

LTE Optimization and Principle and Method
47
SINR (Signal to interference and noise ratio) is the ratio of the power of all subcarriers that 
make up a cell‐specific reference signal to the power of the interference (I) plus noise (N) over 
the same subcarriers. The measurement indicates the RF channel quality, which is measured 
using the reference signals transmitted in each subframe, the measurement is sampled in every 
TTI and averaged per second in the logged output.
	
SINR
RSRP
RSRP
I
N
serv
other
	
In a live network, SINR and RSRP are basically presented a linear relationship, in the main 
range of RSRP, when RSRP upgrades 10dB, SINR will upgrade about 4‐6dB. At the same SINR, 
the throughput rate is weakly correlated with the RSRP, and the strong RSRP does not imply a 
high throughput rate, so RSRP’s high design goal is not required.
Unfortunately, SINR is not specifically defined in 3GPP specifications, this means that any 
SINR measurements methods of UE and scanners are not known. SINR measurements can 
indicate interference areas, it is impacted by network load (traffic in the neighboring cells will 
reduce serving cell SINR), the measurement method (RS or SCH) and tools, and PCI 
­planning etc.
The SINR defines the throughput, coverage, and capacity of the network, and ultimately the 
user experience. The factors that impact SINR includes UE position in cell (RSRP), interfering 
cell load, interferer cell geometry, clutter and terrain type, and reference signal configuration.
In theory, downlink SINR of a cell can be calculated from RSRQ if the RF utilization of the cell 
is known. For example, the serving cell should know its own PRB utilization, while for calcula-
tion of a neighbor cell SINR the load can be obtained by the X2 Resource status reporting proce-
dure. RSRQ depends on own cell traffic load, but SINR doesn’t depend on own cell load. For 
RSRQ to SINR mapping, we can use the number of REs/RB in serving cell is an input parameter 
for RSRQ to SINR mapping. In practice, mapping from RSRQ to SINR seems difficult.
	
12
1
RSRP*12N
SINR = P1 + Pn_12N
Pn_xN = Pn_ RE* xN
RSRP*12 N
x = RE / RB_used, N = # RBs
SINR =
N* RSRP
RSSI = Pi + RSRP* xN + Pn_12N
RSRQ
RSRQ
N* RSRP
RSRQ =
RSSI
=
− RSRP* xN
− x
	
Where x=RE/RB, 2RE/RB equals to empty cell that only reference signal power is considered 
from serving cell. 12RE/RB equals to fully loaded serving cell that all resource elements are car-
rying data (Figure 2.24).
The last one is CINR (reference signal carrier to interference and noise ratio), the sum of the 
RS resource element powers, divided by the sum of the remaining resource element powers, 
usually SINR=CINR from engineering point of view. This is averaged over reference signal 
symbols. RS CINR is inversely related to the traffic load and interference. Carrier is conven-
tional naming for a non‐information bearing signal, that is, unmodulated signal. Signal is con-
ventional naming for information‐bearing signals, that is, either phase, frequency, and/or 
amplitude modulated signals.
www.ebook3000.com

LTE Optimization Engineering Handbook
48
	
CINR
Wanted Carrier
Noise
Interference
SINR
Wanted
Signal
N
_
_
oise
Interference
	
2.3.1.2  External Interference
Before optimization, the operator needs to verify the radio link permanence and eliminate any 
source of interferences that can create service degradation. There are two types of interference 
in LTE—internal and external—and this part is focused on the external interference. For internal 
interference, it is generated by other UEs within the cells.
External interference, it is generated by external source power supply sources, Wi‐Fi, or 
sharing a site with different technology (CDMA and LTE, GSM and LTE) or even electrical 
equipment or discharges in poorly installed or low‐quality RF components or passive inter-
modulation (PIM) that will have a high chance to have interference during high traffic load. 
Three fundamental external interference issues must be considered:
●
●Spurious emissions, the unwanted emissions from a transmitting system degrading the 
­performance of a receiving system.
●
●Blocking, a measure of the receiver ability to receive a wanted signal at its assigned channel 
in the presence of an unwanted interferer.
●
●Isolation between systems, the isolation is defined between the antenna reference point (the 
transmitter connector) in the aggressor base station and the receiver reference point at the 
victim base station.
The interference level at the victim site depends on various factors: rated output power of the 
aggressor, antenna types, heights, tilts and azimuths, distance between sites, type of environ-
ment, for example, urban, suburban, or rural. For each specific site, a unique relation exists 
between distance to the aggressor base station and isolation under free space propagation 
­conditions, as shown in the formula below.
RSRQ vs SINR
–10.00
–5.00
0.00
5.00
10.00
15.00
20.00
25.00
30.00
–20
–19
–18
–17
–16
–15
–14
–13
–12
–11
–10
–9
–8
–7
–6
–5
–4
–3
RSRQ (dB)
SINR (dB)
2 RE/RB
1
4 RE/RB
6 RE/RB
8 RE/RB
10 RE/RB
12 RE/RB
1
2
3
4
5
6
2
3
4
5
6
Figure 2.24  RSRQ versus SINR.

LTE Optimization and Principle and Method
49
	
L
logd
logF
Ga
Gb
D
isolation
32 4
20
20
.
	
Where Ga and Gb are the antenna gains [dB], F is the frequency [MHz], d is distance [km], 
D is the decoupling factor achieved by changing direction or tilt of the main antenna lobe [dB].
It is needed to carefully evaluate signal levels from co‐located and adjacent transmitter sites 
then place and point antennas to maximize isolation from those interference sources. For the 
worst case when antennas point at each other, D = 0, but increases when the main antenna lobe 
direction or the tilt is changed.
Usually directional Yagi (16dBi gain) antennas can help to determine from which direction 
the interference are coming from.
Another usual external interferers are caused by PIM (passive intermodulation), which is 
generated by the nonlinear mixing of two or more frequencies in a passive circuit. Inter‐
modulation (IM) products are created when two or more frequencies mix in nonlinear 
devices in the Tx or Rx paths, possible sources include poor connections or damaged cable. 
Due to non‐linearity of radio component, the high phase harmonic wave might be generated 
and inter‐modulated by RX signal, thus the new inter‐module signals (spurious signals) will 
arrive the receiver causing the interference. IM products of order n are the sums and differ-
ences in n terms of the original frequencies. The strengths of the IM products decline with 
higher orders. In general, for two unmodulated signals, f1 and f2, the following IM products 
are obtained in Table 2.6.
IM is generated whenever more than one frequency encounters a non‐linear electrical junction 
or material. The resulting creation of undesired signals, mathematically related to the original 
frequencies, can result in decreased system capacity and/or degraded call quality by increasing 
the receiver noise floor.
The probability of interference increases as more carriers are being transmitted and with 
more power, and inband third‐order IM products (2f1‐f2) and (2f2‐f1) have the largest magnitude 
and are used for worst case analysis, which is shown in Figure 2.25.
In order to minimize PIM, it should use pre‐tested, PIM‐certified cable assemblies, and it 
needs to test thoroughly for PIM after installation. There are few ways to measure the 
interferences.
Sweep testing: Line and antenna sweep testing, in the wireless telecommunication industry, 
was once the main type of testing relied upon for performance certification of a new or 
recently modified RF system being placed into service on an existing network. This test will 
be done in sections: from RFport output, after feeder, after the jumper cable. Normally, it will 
give the ground noise, since the power during the test is in the idle state. Therefore, it’s not 
accurate to measure and the next test will be used.
PIM testing: PIM testing is designed to identify the existence of the unwanted signals that 
­create RF interference. When the source of the unwanted signal is identified, corrective steps 
Table 2.6  Occurrence of intermodulation and harmonics.
2ndorder
2f1
2f2
f
f
1
2
f
f
1
2
3ndorder
3f1
3f2
2 1
2
f
f
2 1
2
f
f
2 2
1
f
f
2 2
1
f
f
4thorder
4f1
4f2
3 1
2
f
f
3 1
2
f
f
3 2
1
f
f
3 2
1
f
f
2
2
1
2
f
f
2
2
1
2
f
f
5thorder
5f1
5f2
4
1
2
f
f
4
1
2
f
f
4
2
1
f
f
4
2
1
f
f
3
2
1
2
f
f
3
2
1
2
f
f
3
2
2
1
f
f
3
2
2
1
f
f
www.ebook3000.com

LTE Optimization Engineering Handbook
50
can be taken to eliminated the problem. These unwanted signals will show up as excessive 
frequency noise that can be within the bandwidth of a received radio. This test carries out at 
the high power output, simulates the site at the high traffic, therefore, it will give more accurate 
measurement. This is the passive inter‐modulation testing. The IM between each frequency 
component will form additional signals at frequencies that are not just at harmonic frequen-
cies of either, but also at the sum and difference frequencies of the original frequencies and 
at multiple of those sum and differences frequencies (Figure 2.26).
Spectrum analysis of an antenna system can assist in locating the source of RF interference. 
A passive inter‐modulation signal can be traced to a specific frequency with the help of a 
spectrum analyzer and if the test operator is familiar with the possible sources of interfer-
ence signals, the problem can be identified and possibly resolved. In some cases, the source 
of the problem is an environmental interference or a signal from another broadcast carrier 
(Figure 2.27).
Here is an example. In an 1880‐1900 frequency domain, three more obvious protrusions 
were found: 1881.8, 1890.6, and 1897.6 as shown in Table 2.7. 1881.8 and 1890.6 frequencies are 
the same as A station GSM1800 intermodulation product.
When A station was powered off, except for 1897.6 frequency points, the other two obvious 
protrusions have disappeared. The signal positions of the other small protrusions were all 
changed. At the same time it was observed the station surrounding wireless environment, the 
station is located in a high position that can be seen very far away, so the interference signal 
should be derived from other base stations.
Rx
PIM source
Low PIM load
PIM test equipment
UNA
RX
TX
DUPLEXER
COMBINER
PA
PA
Figure 2.26  PIM measurement setup.
f2– f1
Amplitude
7th Order
5th Order
Interference
Interference
Frequency
Desired
3rd Order
f1+ f2
4f1–3f2
4f2– 3f1
3f1–2f2
3f2– 2f1
2f1–1f2
2f2–1f1
2f1
2f2
f1
f2
Figure 2.25  Inter‐modulation.

LTE Optimization and Principle and Method
51
2.3.2  CQI versus RSRP and SINR
CQI (Channel quality indicator) indicating the instantaneous downlink channel quality 
­perceived by the terminal. CQI is used to report the downlink channel quality by the UE after 
channel estimation calculated using the reference signal. Similar to HSPA, the CQI reports can 
be used by the network for downlink channel dependent scheduling and rate control. The LTE 
CQI reports indicate the channel quality in both the time and frequency domain. Usually low 
throughput is related to poor dominance and low coverage areas, so clear dominance areas 
with good RSRP together with good enough CQI/RSRQ/SINR are the natural target for 
optimization.
In the same environment, SINR are proportional to CQI, and one step of CQI according 
to SINR changing is about 2dB. The CQI is used by the link adaptation function to select the 
transport format matching the channel conditions. Each CQI (wideband or subband) is first 
converted into SINR thanks to Figure 2.28. Then, the SINR is amended to take into account 
the UE speed estimated by layer 1, after mapping SINR to symbol info rate per modulation 
symbol, we can get the throughput. LTE CQI, MCS and throughput relationship is shown in 
Table 2.8.
In live network, as long as RSRP is low (lower than ‐100 dBm), interference has less impact 
(CQI is anyway low) in such scenario, RSRP is the bottleneck in this region. At higher RSRP 
(higher than −100dBm) scenario, interference may become the bottleneck. The relation 
between modulation scheme distribution and CQI can be found in Figure 2.29.
2.3.2.1  CQI Adjustment
The eNB adjusts the UE reported CQI value by taking into account ACK/NACK (acknowledged/
not acknowledged) reports from the UE for received downlink data blocks. The adjusted 
CQI value is used by link adaptation functionality to select the optimum MCS to achieve 
BLER target. Starting from the initial value, the CQI offset will be adjusted (StepUp or 
StepDown) in response to the ACK/NACK for the new transmission of a transport block 
(Figure 2.30).
Figure 2.27  Spectrum analysis.
www.ebook3000.com

 Table 2.7  An example of IM. 
Frequevcy No.
 741
803
815
820
827
840
749
792
807
817
830
847
751
766
777
823 
Frequency
1851
1863.4
1865.8
1866.8
1868.2
1870.8
1852.6
1861.2
1864.2
1866.2
1868.8
1872.2
1853
1856
1858.2
1867.4 
PIM
1875.8
1880.6
1882.6
1885.4
1890.6
1869.8
1875.8
1879.8
1885
1891.8
1859
1863.4
1881.8 
1868.2
1870.2
1873
1878.2
1867.2
1871.2
1876.4
1883.2
1860.4
1878.8

LTE Optimization and Principle and Method
53
For single code word case:
	
CQI t
CQI t
CQI
CQI
for first HARQ feedb
stepup
max
min
,
,
1
aack
ACK
CQI t
CQI
CQI
for first HARQ fe
stepdown
min
,
max
,
,
1
eedback
NACK
CQI t
for first HARQ feedback
N A
,
,
/
1
	
RSRP
CQI values
1
–6.00
–4.00
–2.75
–0.75
1.25
2.75
5.00
6.75
8.50
10.75
12.50
14.50
16.25
17.75
20.00
2
3
4
5
6
7
8
9
10
11
12
13
14
15
PDSCH Target SINR
RSRQ
–140dBm
–95dBm
–80dBm
–40dBm
–19.5dB
–12dB
–7dB
–3dB
SINR
QPSK
16 QAM
64 QAM
0dB
7dB
17dB
25dB
0dB
5dB
15dB
20dB
0
6, 7
10, 11
15
QPSK
16 QAM
64 QAM 
CINR
CQI
0
9, 10
16, 17
28
MCS
Figure 2.28  LTE RSRP, RSRQ, CQI, MCS, CINR, and SINR ranges.
Table 2.8  LTE CQI, MCS and throughput relationship.
CQI Index
Modulation
MCS
code rate
Information bits  
per symbol
Thpt. (per  
1 RB) [Kbps]
Thpt. @20MHz  
[Mbps]
0
No
—
—
—
1
QPSK
0 to 9
0.076
0.1523
25.6
2.6
2
QPSK
0.12
0.2344
39.4
3.9
3
QPSK
0.19
0.377
63.3
6.3
4
QPSK
0.3
0.6016
101.1
10.1
5
QPSK
0.44
0.877
147.3
14.7
6
QPSK
0.59
1.1758
197.5
19.8
7
16QAM
10 to 16
0.37
1.4766
248.1
24.8
8
16QAM
0.48
1.9141
321.6
32.2
9
16QAM
0.6
2.4063
404.3
40.4
10
64QAM
17 to 28
0.45
2.7305
458.7
45.9
11
64QAM
0.55
3.3223
558.2
55.8
12
64QAM
0.65
3.9023
655.6
65.6
13
64QAM
0.75
4.5234
759.9
76
14
64QAM
0.85
5.1152
859.4
85.9
15
64QAM
0.93
5.5547
933.2
93.3
www.ebook3000.com

LTE Optimization Engineering Handbook
54
For two code words case:
	
CQI t
CQI t
CQI
 CQI
for new transmissi
stepup
max
min
,
,
1
on
HARQ feedback
ACK
ACK
CQI t
CQI
 CQI
stepdown
min
max
,
1
,
min max
 for new transmission
HARQ feedback
NACK
NACK
CQI t
1
CQI
CQI
 CQI
 CQI
for new tr
stepup
stepdown
min
max
/ ,
,
,
2
ansmission HARQ feedback
ACK
NACK
CQI t
CQI
CQ
stepup
min
,
1
I
for new transmission
HARQ feedback
ACK
N/A
CQI t
max ,
max
1
CQI
 CQI
 for new transmission
HARQ feedback
N
stepdown
min
,
,
ACK
N/A
CQI t
for new transmission HARQ feedbacks
N/A
N/A
1 ,
	
Figure 2.31 presented the reported CQI versus RRM‐adjusted CQI, which are extracted from 
the actual measurement data collected during the mobile pathloss measurements. In addition, 
the graph also gives the distribution of spatial multiplexing and transmit diversity with the 
reported CQI.
2.3.2.2  SINR Versus Load
The SNR varied in the field conditions quite a bit, but the impact of adding load is clear. 
Figure 2.32 illustrates the variability and is from test cases UDP DL MIMO in different interfer-
ence conditions. FTP DL throughput degrades as DL inter‐cell 0% load increases to 70% DL 
load, impacts due to the load from neighbor cells, CQI is shown impacted through all subband. 
Actually, the SNR distribution is very different in different network.
Figure 2.33 is a test result and analysis of the impact radio quality by CQI reporting per 
subband.
0
100%
80%
60%
40%
20%
0%
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15 CQI
Average of percent of QPSK
Average of percent of 16 QAM
Average of percent of 64 QAM
Figure 2.29  Modulation scheme distribution versus CQI.

LTE Optimization and Principle and Method
55
20
18
16
14
12
10
8
6
4
2
0
0
2
4
6
8
Reported CQI
10
12
14
16
RRM CQI
3
4
5
6
7
8
9
10
11
12
13
14
15
100.0%
80.0%
60.0%
40.0%
20.0%
0.0%
Probability
Reported CQI
SIMO
MIMO
y = 1.1684× –0.6409 
Figure 2.31  Reported CQI versus RRM‐adjusted CQI.
CQIreport+ΔCQI=CQI
ΔCQI(t–1)+CQIstepup = ΔCQI(t)
ΔCQI(t–1)–CQIstepdown = ΔCQI(t)
Data block
(PDSCH)
Evaluate
reference
signals
CQI report
(PUCCH/PUSCH)
Decode
transport
blocks
DL link adaptation:selecct
MCS
Packet schedule
1st DL
transport 
block 
transmissions
ACK
eNB
UE
NACK
ACK/NACK
(PUCCH/PUSCH)
Figure 2.30  CQI adjustment.
www.ebook3000.com

LTE Optimization Engineering Handbook
56
2.3.2.3  SINR Versus MCS
The eNB needs knowledge of the SINR conditions of downlink transmission to a UE in order 
to select the most efficient MCS/PRB combination for a selected UE at any point in time. The 
MCS contains two parts, modulation constellation (QPSK, 16QAM or 64QAM) and coding 
rate, which is the ratio between information bits (from upper layers) and coded bits.
Figure 2.34 and Figure 2.35 show a simplified view of MCS distribuion (link adaptation is 
taken into account) based on the SINR reported by the UE.
From Figure 2.34 and Figure 2.35, it can be seen that downlink MCS follows closely DL SINR. 
Mapping of SINR to MCS is performed by DL link adaptation. Improvements over interference 
conditions (i.e., reducing bad dominance) will result in higher throughputs.
A quantized TBS is selected by looking up the largest TBS defined in 36.213, which is shown 
in Table 2.9 that does not exceed the unquantized TBS.
SINR improvements can be achieved by reducing network load, optimizing performance antenna 
tilts and pans, reducing or removing overshooting cells, and optimizing eNB Tx power levels. From 
70
60
50
40
30
20
10
0
–60
Thruput
–62 –64 –66 –68 –70 –72 –74 –76 –78 –80 –82 –84 –86 –88 –90 –92
Huge Thruput degradation
(same as CQI drop)
Load_0
Load_50
Load_70
Load_90
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
–10 –8 –6 –4 –2
0
2
4
6
8
10
12
14
16
18 20 22 24 26 28 30
CDF
SNR
Load_50
Load_90
Load_70
Load_0
100% Load
0% Load
100% Load
0% Load
CDF 0% Load
CDF 100% Load
Figure 2.32  SNR varied with load.

LTE Optimization and Principle and Method
57
Figure 2.36, it can be seen especially at the lower end of the SINR curve, a small change in the SINR 
will have a significant impact on downlink throughput. For example, when SINR changed from 9 to 
10 dB, 8 to 10 dB, 7 to 10 dB, 11%, 24%, and 39% throughput improvement was achieved accordingly 
from the field test. The relation of DL SINR and bitrate per RB (under LTE‐FDD, SIMO 1x2, EPA5, 
Okumura‐Hata model, channel bandwidth is 20MHz) is also shown in Figure 2.36.
0.0%
5.0%
10.0%
15.0%
20.0%
–2.0%
3.0%
8.0%
13.0%
18.0%
MC0
MC1
MC2
MC3
MC4
MC5
MC6
MC7
MC8
MC9
MC11
MC12
MC13
MC14
MC15
MC16
MC18
MC19
MC20
MC21
MC22
MC23
MC25
MC0
MC1
MC2
MC3
MC4
MC5
MC6
MC7
MC8
MC9
MC11
MC12
MC13
MC14
MC15
MC16
MC18
MC19
MC20
MC21
MC22
MC23
MC24
MC25
MC26
MC27
MC28
[–4,–2]
[–2,0]
[–10,–8]
[–8,–6]
[–6,–4]
[6,8]
[8,10]
[0,2]
[2,4]
[4,6]
Figure 2.34  SINR Versus MCS in the range of ([–10,–8], [–8,–6],…,[6,8] and [8,10]).
Figure 2.33  CQI reporting per subband obtained from field test.
www.ebook3000.com

LTE Optimization Engineering Handbook
58
2.3.3  Channel Power Configuration
2.3.3.1  RE Power
In downlink, eNB is using rate control rather than power control and allocate different power 
level for different DL channels. To reduce inter‐cell interference and satisfy the quality of 
received signal of UE at the same time. When configuring the cell, the scheduler verifies that 
the available power is not exceeded by check the related OFDM symbols, taking into account 
the RS (reference signal) power, the SCH powers, the PBCH power, the PCFICH power, the 
PHICH power, the PDCCH power and the PDSCH power.
●
●For transmission mode (TM)‐1/2/3/4:
TotalPowerRS
TotalPowerP
SCH
TotalPowerS
SCH
TotalPowerPBCH
TotalPowerPDCCH
TotalPowerPCFICH
TotalPowerPHICH
TotalPowerPDSCH
PMax
●
●For TM‐7:
TotalPowerRS
TotalPowerP
SCH
TotalPowerS
SCH
TotalPowerPBCH
TotalPowerPDCCH
TotalPowerPCFICH
TotalPowerPHICH
*
/
.
. *
PMax
TotalPowerPDSCH
Port
PMa
12 74 0 5
5
x
0.0%
2.0%
4.0%
6.0%
8.0%
10.0%
12.0%
14.0%
16.0%
18.0%
0.0%
2.0%
4.0%
6.0%
8.0%
10.0%
12.0%
14.0%
16.0%
18.0%
20.0%
22.0%
24.0%
MC0
MC1
MC2
MC3
MC4
MC5
MC6
MC7
MC8
MC9
MC11
MC12
MC13
MC14
MC15
MC16
MC18
MC19
MC20
MC21
MC22
MC23
MC24
MC25
MC26
MC27
MC28
MC0
MC1
MC7
MC8
MC9
MC11
MC12
MC13
MC14
MC15
MC16
MC18
MC19
MC20
MC21
MC22
MC23
MC24
MC25
MC26
MC27
MC28
[10,12]
[12,14]
[14,16]
[20,22]
[22,24]
[24,26]
Figure 2.35  SINR Versus MCS in the range of ([10,12], [12,14],…, [26,28] and [28,50]).

 Table 2.9  Downlink and uplink MCS Versus ITBS. 
DL MCSs
UL MCSs
NPRB 
MCS
I TBS 
MCS_index
Mod order
MCS
I TBS 
MCS_index
Mod order
I TBS 
1
2
3
99
100 
Optimize
Optimize
0
16
32
56
2728
2792 
0‐QPSK
0
0
2
0‐QPSK
0
0
2
1
24
56
88
3624
3624 
1‐QPSK
1
1
2
1‐QPSK
1
1
2
2
32
72
144
4392
4584 
2‐QPSK
2
2
2
2‐QPSK
2
2
2
3
40
104
176
5736
5736 
3‐QPSK
3
3
2
3‐QPSK
3
3
2
4
56
120
208
6968
7224 
4‐QPSK
4
4
2
4‐QPSK
4
4
2
5
72
144
224
8760
8760 
5‐QPSK
5
5
2
5‐QPSK
5
5
2
6
328
176
256
10296
10296 
6‐QPSK
6
6
2
6‐QPSK
6
6
2
7
104
224
328
12216
12216 
7‐QPSK
7
7
2
7‐QPSK
7
7
2
8
120
256
392
14112
14112 
8‐QPSK
8
8
2
8‐QPSK
8
8
2
9
136
296
456
15840
15840 
9‐QPSK
9
9
2
9‐QPSK
9
9
2
10
144
328
504
17568
17568 
10‐16QAM
9
10
4
10‐QPSK
10
10
2
11
176
376
584
19848
19848 
11‐16QAM
10
11
4
11‐16QAM
10
11
4
12
208
440
680
22920
22920 
12‐16QAM
11
12
4
12‐16QAM
11
12
4
13
224
488
744
25456
25456 
13‐16QAM
12
13
4
13‐16QAM
12
13
4
14
256
552
840
28336
28336 
14‐16QAM
13
14
4
14‐16QAM
13
14
4
15
280
600
904
30576
30576 
15‐16QAM
14
15
4
15‐16QAM
14
15
4
16
328
632
968
31704
32856 
(Continued )
www.ebook3000.com

DL MCSs
UL MCSs
NPRB 
MCS
I TBS 
MCS_index
Mod order
MCS
I TBS 
MCS_index
Mod order
I TBS 
1
2
3
99
100 
16‐16QAM
15
16
4
16‐16QAM
15
16
4
17
336
696
1064
35160
36696 
17‐64QAM
15
17
6
17‐16QAM
16
17
4
18
376
776
1160
39232
39232 
18‐64QAM
16
18
6
18‐16QAM
17
18
4
19
408
840
1288
42368
43816 
19‐64QAM
17
19
6
19‐16QAM
18
19
4
20
440
904
1384
46888
46888 
20‐64QAM
18
20
6
20‐16QAM
19
20
4
21
488
1000
1480
48936
51024 
21‐64QAM
19
21
6
21‐64QAM
19
21
6
22
520
1064
1608
52752
55056 
22‐64QAM
20
22
6
22‐64QAM
20
22
6
23
552
1128
1736
57336
57336 
23‐64QAM
21
23
6
23‐64QAM
21
23
6
24
584
1192
1800
61664
61664 
24‐64QAM
22
24
6
24‐64QAM
22
24
6
25
616
1256
1864
63776
63776 
25‐64QAM
23
25
6
25‐64QAM
23
25
6
  
26‐64QAM
24
26
6
26‐64QAM
24
26
6
  
27‐64QAM
25
27
6
27‐64QAM
25
27
6
  
28‐64QAM
26
28
6
28‐64QAM
26
28
6
Table 2.9 (Continued)

LTE Optimization and Principle and Method
61
The RS power and the SCH powers are key RF optimization parameters that influences the 
cell coverage. It is set according to the cell size. The higher the setting, the larger the cell cover-
age on the downlink, but leaves smaller power headroom available for other downlink signals 
and channels.
The relation between RS power and power on PDSCH symbols (includes type A and type B 
symbols), has to be defined and reported to the UE, in order for the UE to demodulate 16QAM 
and 64QAM.1 PDSCH type A symbols has only PDSCH RE’s, PDSCH type B symbols has mixed 
RS and PDSCH REs. Parameter PA sets the power of PDSCH type A RE relative to cell‐specific 
RS, PB sets the power relation between PDSCH type B RE, and PDSCH type A RE (ρB/ρA in 
3GPP). The ratio of PDSCH EPRE to cell‐specific RS EPRE among PDSCH REs for each OFDM 
symbol is denoted by either ρA or ρB according to the OFDM symbol index. The mapping 
between the possible P‐B values and the actual values of the ratio ρB/ρA is in Table 2.10.
●
●E(RE_A) (dBm) = 10 Log P (RE_A) (mw), E(RE_B) (dBm) = 10 Log P (RE_B) (mw)
●
●E(RS) (dBm) = 10 Log P (RS) (mw)
1  Decoding QPSK/16QAM/64QAM modulated signal at the UE side requires UE to estimate path loss and phase 
rotation introduced by wireless channel. The process is often called channel estimation.
0
–5
5
15
25
SINR (dB)
10
20
30
0.700
0.600
0.500
0.400
0.300
0.200
0.100
0.000
SINR vs bit rate per  RB (16–QAM vs 64–QAM,1×2)
bitrate/RB (Mbps)
70,000
60,000
50,000
40,000
30,000
20,000
10,000
0
–10
0
10
20
30
40
Throughput [kbps]
SINR [dB]
Significant change
in DL throughput
Small change
in SINR
Figure 2.36  SINR versus bitrate per RB.
www.ebook3000.com

LTE Optimization Engineering Handbook
62
●
●ρ A = E (RE_A) – E (RS), ρ B =E (RE_B) – E (RS)
●
●ρ A = P‐A (except for MU‐MIMO, if power is distributed to two UE, ρ A = P‐A‐3dB, this is 
UE specific parameter)
●
●ρB/ρA= P‐B (P‐B is cell specific parameter provided by higher layers)
The advertised RS power is transmitted on the SIB2 message. This allows UEs to estimate the 
pathloss to the system reference point. The value set takes RS transmit powers for common 
configurations and bandwidths in Table 2.11.
Power of PDCCHs, PHICHs, PCFICHs, PBCHs, primary synchronization channels, and 
­secondary synchronization channels is set using an offset from RS power. Table 2.12 gives an 
example of 20MHz DL power setting in a live network.
The way to set optimal RS power is not fully known currently. But 3GPP has supplied a pos-
sibility to vary the RS power in the range [−3 −2 −1 0 1.77 3 4.77 6] dB relatively PDSCH, which 
is shown in Table 2.13. A fundamental requirement of the DL system is that full (or near full) 
allocation on PDSCH and all other channels utilizes the full radio unit max average power 
(e.g. 40W).
p‐A setting: Power offset between the reference signal and PDSCH channel in the symbols 
without reference signal, P‐A can be found in RRC connection setup message.
P‐B setting: Power offset between PDSCH channel in the symbols with reference signal and 
PDSCH channel in the symbols without reference, P‐B and RS power can be found in SIB2 
(Figure 2.37).
Table 2.10  The mapping between the possible P‐B values and the 
actual values of the ratio ρB/ρA.
P‐B
ρB/ρA
One antenna port
Two and four antenna ports
0
1
5/4
1
4/5
1
2
3/5
3/4
3
2/5
1/2
Table 2.11  Reference RS transmit power.
Tx mode
Config
Bandwidth and resource blocks
5MHz (25RB)
10MHz (50RB)
20MHz (100RB)
MIMO
2 × 20W
21.2dBm
18.2dBm
15.2dBm
2 × 40W
24.3dBm
21.2dBm
18.2dBm
2 × 60W
26.0dBm
23.0dBm
20.0dBm
2 × 80W
27.3dBm
24.3dBm
21.2dBm

LTE Optimization and Principle and Method
63
Table 2.12  An example of DL power setting.
Inputs
Recommended values 20W radio
reference Signal Power
12dBm
primarySync Signal Power Offset
2.0dB
secondary Sync Signal Power Offset
2.0dB
PBCH Power Offset
5.5dB
PDCCH Power Offset Symbol1
3.5dB
PDCCH Power Offset Symbol 2 and 3
3.1dB
PCFICH Power Offset
6.4dB
PHICH Power Offset
6.1dB
paOffset PDSCH
0dB
pbOffset PDSCH
0dB (P‐B=1)
Cell DL Total Power
43dBm (20W)
Utilization
PA (dB)
–6
–4.77
–3
–1.77
0
1
2
3
PB
0
0.67
0.75
0.86
0.92
1
0.97
0.94
0.92
1
0.75
0.86
1
0.92
0.83
0.8
0.77
0.75
2
0.86
1
0.83
0.75
0.67
0.63
0.61
0.58
3
1
0.83
0.67
0.58
0.5
0.47
0.44
0.42
Note: Only four set P-A, 
P-B=(0,0), (–3,1), (–4.77,2)
and (–6,3) can  have the
maximum utilization of
PDSCH power
Table 2.13  Utilization under different combination of P‐A and P‐B.
Figure 2.37  P‐A and P‐B.
www.ebook3000.com

LTE Optimization Engineering Handbook
64
The system constant ρA and ρB is used to control reference signal boosting and control 
PDSCD type PB boosting. Figure 2.38 gives the overview of all the boost levels.
The usually recommended ρA and ρB parameters in a live network are given in 
Table 2.14.
Take the example of p‐a=−3dB; p‐b=1,
	
PA
3
P RE_A
½P RS
A
	
/
lookup PB
1,2 antenna ports
1
3
P RE_A
P RE_B
½P RS
A
B
B
	
Compared with baseline, TC1 has higher serving RSRP and SINR (3dB), so PDSCH RE can 
be scheduled higher MCS, downlink throughput/PRB slightly improved. TC2 has the same 
RSRP and SINR level, but PDSCH RE power is boosted so PSD on receiver side is higher, down-
link throughput/PRB improved (Figure 2.39).
2.3.3.2  CRS Power Boosting
CRS is transmitted in each physical antenna port. It is used for both demodulation and meas-
urement purpose. Resource element mapping of CRS depends on the number of antenna ports 
6
4.77
3
1.77
0
–1
–2
–3
crsGain
Overallocation on
control region symbol
Empty RE
Pref
PPDSCH,B=pdschTypeBGain*PPDSCH.A
pdschTypeBGain=[5/4, 1,3/4, 1/2], linear
PDSCH, type B
boosted 5/4
PDSCH, type A at
reference level
Figure 2.38  ρA and ρB.
Table 2.14  ρA and ρB parameters setting.
TC
Description
PA, PB in L3 trace
Baseline
No RS boost & 
no PB boost
physicalConﬁgDedicated
   pdsch-ConﬁgDedicated
pdsch-ConﬁgCommon
   referenceSignalPower
: 15
p-b
: dB0
p-a
: 1
TC1
RS boost (No 
PB boost)
physicalConﬁgDedicated
   pdsch-ConﬁgDedicated
pdsch-ConﬁgCommon
   referenceSignalPower
p-b
: dB-3
p-a
: 18
: 1
TC2
PB boost (No 
RS boost)
pdsch-ConﬁgCommon
   referenceSignalPower
physicalConﬁgDedicated
   pdsch-ConﬁgDedicated
p-b
: dB0
p-a
: 0
: 15

LTE Optimization and Principle and Method
65
that the base station is using. CRS power boosting/de‐boosting2 provides means to optimize 
the power distribution on resource elements to the network geometry and can be used to 
obtain improved DL throughput in different scenarios.
CRS power boost is often used in network optimization. If the power of CRS is same as all 
other channel power, it would not be easy for UE to detect it. Thus, higher CRS power is 
2  CRS power de-boosting can be used to obtain improved DL throughput, for example, in dense networks or 
interference limited environments.
1 RS
1
PDSCH (PB is not yet applied) 
X
Nulled RE
1
Excess power
0
Reduced power for RS power 
1 PDSCH (Type B) 
1 PDSCH (Type A) 
Subcarrier
Power
PB = 3
PB = 2
PB = 1
PB = 0
Type B OFDM symbol (RS & Type B PDSCH)
Type A OFDM symbol
5/4
1
3/4
2/4
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
1 1
5/4
X 5/4
5/4 5/4
1
5/4
X 5/4
5/4 5/4
1
1
1
1 1
1
1
1
1 1
1
1
1
1
1
1
1
1
1
1
1
1
1
3/4
1
1
3/4 X 3/4 3/4
3/4
1
1
3/4 X 3/4 3/4
1
1
1
1
1
0
1
1
1
1
1
0
1
1
1
1
1
1
1
1
1
1
1
1
0
1
1
1
1
0
1
1
1
1
0
0
1
1
1
1
2/4 2/4
X
2/4
2/4 2/4
X
2/4 2/4
2/4
X
X
1
1
X
X
X
X
1
1
1
1
1
1
1
1
1
1
1
1
X
X
X
X
5/4
5/4
3/4
3/4
휌A = 0 dB
휌A = –3 dB
휌A = –4.7 dB
휌A = –6 dB
Figure 2.40  Power boosting for two and four Tx Ant.
0
5
10
15
Serving SINR (dB)
DL Throughput vs Serving SINR
20
25
30
35
Baseline
TC1(SINR-3dB)
TC2
Linear (Baseline)
Linear (TC1(SINR-3dB)
Linear (TC2)
Linear (TC1)
Linear (TC2)
Linear (Baseline)
70
60
50
40
30
20
10
0
DL PDCP Throughput (Mbps)
Figure 2.39  DL Throughput/PRB with TC1 and TC2.
www.ebook3000.com

LTE Optimization Engineering Handbook
66
­preferred in order to detect/decode reference signal. Figure 2.40 gives an explanatin of a certain 
degree of offset (P‐A) can be configured in order to boost CRS power for two and four Tx 
antenna cell. For two and four antenna ports, ρA/ρB can be 5/4,1,3/4,1/2 for different P‐B, the 
four PDSCH below shows P‐A, P‐B=(0,0) (−3,1) (−4.7,2) (−6, 3) respectively.
Due to transmit diversity encoding, the PBCH, PCFICH, PDCCH, and PHICH are transmit-
ted at −3 dB compared to the configured value. If SIMO (TM‐1) is used, the PBCH, PCFICH, 
PDCCH, and PHICH are transmitted at the configured value without transmit diversity.
For FDD LTE (10 MHz bandwidth), the method of RS power calculation according to P‐A/
P‐B (−3/1) is:
With CRS power boosting:
	
P
dBm
RS
43
3
3
10
50
10
12
43
3
3
17
10 8
15 2
log
log
.
.
	
For TDD LTE (20 MHz bandwidth), the method of RS power calculation according to P‐A/
P‐B (−3/1) is:
	
DL RS
Power
P
N
P
BCH
RB
B
_
_
log
log
singleAntenna
10
12
10
1
37
10 10
12 100
10
1
1
9 2
log
log
. dbm
	
So we can get: DL_RS_Power + MIMO_gain = 9.2 + 6 =15.2dBm
2.3.3.3  Power Allocation Optimization
DL power allocation can impact system performance in the aspects of coverage (coverage 
extension, eliminate fade zone at inner area), interference, PDSCH power utilization, mobility, 
and DL throughput. In LTE, UE assume downlink cell‐specific RS EPRE (energy per resource 
element) is constant across the downlink system bandwidth and constant across all subframes 
unless different cell‐specific RS power information is received. According to 3GPP, CRS channel 
gain corresponds to ρA and PDSCH typeB channel gain corresponds to PB or ρB/ρA.
Transmission of CRS in each subframe by all the eNBs might cause high interference on both 
control and data channels of the UE. Adjustable CRS power provides means to optimize the 
power distribution on resource elements according to the network topology. Absolute mobility 
borders need to be adjusted for changed CRS power, for example, for inter‐RAT and inter‐frequency 
handover cell borders, it is recommended that RSRP mobility thresholds are adjusted in the 
same direction and by the same amount as CRS channel gain, that is, CRS channel gain is low-
ered by 3 dB, mobility thresholds based on RSRP are also lowered by 3 dB and vice versa.
Power on PDSCH can be tuned to control or reduce cell interference. The parameter P‐A can 
have eight different values of {−6, −4.77, −3, −1.77, 0, 1, 2, 3}, while P‐B can be set to 0, 1, 2, 3 to 
avoid over‐allocation of RF signal power.
Assume there are N TX/RX antennas in each eNB, for each UEj, the power allocation method 
is described below:
For each antenna i, for each RE, LTE can support variable power per PRB and UE, the allo-
cated power per RE |wi,j|2 ≠ 1,
where |wi|2, sector is beamformed by appropriate fixed weights wi, if there is power waste 
exists, the sum of |wi|2 < 1)
For each antenna i, the sum of allocated power per antenna is |wi,j|2 = 1 (over antennai), con-
stant power per PRB with flat power spectrum density
For each UE, LTE can support variable power per antenna, the sum of allocated power per UE is 
|wi,j|2 ≠ 1 (over UEj), thus avoid too many weights with high |wi,j|2 for the same antenna (Figure 2.41).
In a live network, the refrence total downlink channel power’s calculation is listed in Table 2.15.

LTE Optimization and Principle and Method
67
Usually there is only a semi‐static downlink power setting, which allows for the attenuation 
of the maximum cell output power and an extra attenuation when 2x2 MIMO is configured in 
the cell. During optimization it is recommended to first modify tilts and azimuths before trying 
to reduce the maximum cell power to reduce the impact of inter‐cell interference.
2.3.4  Link Adaption
Link adaptation (LA) is used for adjusting transmission parameters based on differences in the 
instantaneous channel conditions by the scheduler. LA selects the transport format to ensure 
that the quality of service requirements are enforced while using resources efficiently. It is also 
essential for maximizing user throughput over the air interface.
The UE measurement of the downlink channel quality is reported to eNB in terms of chan-
nel quality indicator (CQI) report. A CQI report assumes that if a certain modulation and 
coding scheme (MCS) is used, a throughput optimal target block error rate (BLER), usually 
defined as 10%, will be achieved in a downlink transmission. LA monitors the actual error 
rate performance of each user (through ACK/NACK events) and dynamically adjusts the 
SINR thresholds use in the modulation and coding scheme in order to ensure the desired 
error rate is achieved.
In the uplink, the channel quality estimate consists of predicted transmitted PSD (power 
spectral density), PSD TX, path loss estimate, and noise+interference measurement. The 
PSD TX is estimated based on UE reported PHR (power headroom report). This is used to 
estimate uplink gain together with measured PSD RX. In the downlink, gain to interference 
and noise ratio (GINR=G/(N+I), where G is the path gain) is used as a measure for channel 
prediction and varies due to fading and interference. The slow fading component is tracked 
and used in link adaptation. It can be converted to SINR by adding PSD logarithmically 
(SINR = PSD + GINR). The UE estimates SINR based on the PSD of the downlink reference 
signals (RS) and PSD offset between PDSCH and RS. The SINR is converted to channel qual-
ity indicator (CQI) which indicates the radio quality, and is used by the link adaptation func-
tion to select the transport format matching the channel conditions. This leads to improved 
radio resource utilization. The RAN performs an adaptive adjustment of the SINR derived 
from CQI to compensate for errors and mismatches, and fulfills the targeted operating point 
(Figure 2.42 and Figure 2.43).
Uplink link adaptation takes care that the UE uses the MCS, which leads to the desired BLER 
and the appropriate transmission bandwidth for UL data transfer on the PUSCH. These tasks 
are performed by AMC and the adaptive transmission bandwidth (ATB) components, respec-
tively. Both act on a rather slow time scale. AMC typically reacts within 10 to 100 ms and ATB 
allocated power per RE 
∣wi,j∣2≠1
allocated power per antenna 
sum of ∣wi,j∣2= 1 (over i)
sum of ∣wi,j∣2≠1 (over j)
allocated power per UE
N antennas 
PRBs
allocated  
to UE j
antenna i
wi,j
Figure 2.41  Power allocation method.
www.ebook3000.com

 Table 2.15  Downlink channel power setting. 
30 W PA
Slot0‐OFDM symbol#
Slot1‐OFDM symbol# 
0
1
2
3
4
5
6
0
1
2
3
4
5
6 
CRS power
3981
0
0
0
3981
0
0
3981
0
0
0
3981
0
0 
primary sync power
0
0
0
0
0
0
4925
0
0
0
0
0
0
0 
secondary sync power
0
0
0
0
0
4925
0
0
0
0
0
0
0
0 
PBCH Power Offset
0
0
0
0
0
0
0
1955
1955
2933
2933
0
0
0 
PDCCH power
15036
29387
29387
0
0
0
0
0
0
0
0
0
0
0 
PCFICH power offset
1271
0
0
0
0
0
0
0
0
0
0
0
0
0 
PHICH power offset
6672
0
0
0
0
0
0
0
0
0
0
0
0
0 
pbOffset Pdsch
0
0
0
0
15924
0
0
14013
0
0
0
15924
0
0 
paOffset Pdsch
0
0
0
23866
0
21020
21020
0
21020
21020
21020
0
23866
23866 
Total power
26960
29387
29387
23886
19905
25945
25945
19950
22975
23953
23953
19905
23886
23886

LTE Optimization and Principle and Method
69
is even slower operating on a time scale which is a multiple (factor 1 to 50) of the AMC time 
scale. Uplink LA is operated by means of:
●
●Slow inner loop LA acting on either first transmission BLER provided by HARQ or on all 
transport block (TB) transmission BLER
●
●Fast outer loop LA acting on first transmission BLER and providing emergency MCS down-
grade at high BLER and fast MCS upgrade at low BLER
●
●Slow UL adaptive transmission bandwidth based on UE power headroom reports
In the conservative LA algorithm 90% weight was put on previous CQI and only 10% weight 
was put on new CQI measurements. In some new dynamic LA algorithm have shifted 70% of 
the weight to new CQI measurements and therefore re‐act faster to changing radio environ-
ment. Under new dynamic LA algorithm, more samples observed from drive test results in 
improvement of BLER‐MCS ratio (Figure 2.44).
2.3.5  Adaptive Modulation and Coding
Adaptive modulation and coding (AMC) attempts to choose the modulation and coding 
scheme (per codeword), which results in the best throughput for the scheduled user’s current 
RF condition as influenced by both signal fading and interference variations. For new transmis-
sions the MCS is decided based on CQI reports from the UE, for retransmissions the same 
Uplink Gain
Measurement
Outer Loop
Gain Adjustment
Noise+Interference
Filtering
Power Control
CQI Report Payload
Transport
Format
Selection
PSDRX,prb
PSDTX,target
[N+I]prb
CRC
Figure 2.43  UL link adaptation.
PSD 
Offset
PDSCH-PSD 
RS-PSD
RS 
PSD
UE 
estimated 
SINR
CQI 
conversion
Reported to RBS
Used by Link Adaptation
to select TBS
CQI, PMI, RI
Figure 2.42  DL link adaptation.
www.ebook3000.com

LTE Optimization Engineering Handbook
70
MCS as the original transmission is applied. The main characteristics of downlink and uplink 
AMC is listed in Table 2.16.
eNB determins the MCS in a given PRB allocation. According to 3GPP protocol, TB size is 
selected by the MCS and number of PRBs allocated, such as Table 2.17.
2.3.6  Scheduler
To provide efficient resource usage, the LTE concept supports fast scheduling where resources 
on the shared channels (PDSCH and PUSCH) are assigned to users and radio bearers on sub-
frame basis according to the users momentary traffic demand, QoS requirements and esti-
mated channel quality.
The eNB scheduler determines the trade off between end‐user QoS characteristics and 
aggregate cell throughput. There are many scheduler strategies in LTE: channel unaware sched-
uler, channel aware scheduler, interference aware scheduler, round robin scheduler, exhaustive 
scheduler, time domain scheduler, and frequency domain scheduler. Usually it is assumed that 
non‐GBR bearer solutions typically will be based on proportional fair (PF) scheduling (without 
minimum rate) and for GBR bearers, voice/video telephony can be based on proprotinal fair 
scheduler with minimum rate.
10
12
14
16
18
20
22
24
26
28
MCS index
12
10
8
6
4
2
0
BLER [%]
Old LA
Improved LA
Figure 2.44  LA algorithm comparison.
Table 2.16  Downlink and uplink AMC characteristics.
DL AMC
UL AMC
fast (1ms)
slow periodical (30ms)
channel aware, CQI based
channel aware, SINR based
MCS selection: 1 out of 0‐28
MCS adaptation, +/−1MCS correction
output: MCS, TBS
output: MCS, ATB
UE capabilities support: Max.TBS per TTI
UE capabilities support: Power headroom, QoS profile

Table 2.17 MCS, number of PRB and TBS selection (example).
MCS
Index
Modulation
Order
TBS index
(informative)
Number of PRBs
74
75
95
96
97
98
99
100
21
6
19
31704
32856
40576
40576
42368
42368
42368
43816
22
6
20
34008
35160
43816
45352
45352
45352
46888
46888
23
6
21
36696
37888
46888
48936
48936
48936
48936
51024
24
6
22
40576
40576
51024
51024
52752
52752
52752
55056
25
6
23
42368
43816
55056
55056
55056
57336
57336
57336
26
6
24
45352
45352
57336
59256
59256
59256
61664
61664
27
6
25
46888
46888
61664
61664
61664
61664
63776
63776
28
6
26
55056
55056
71112
71112
71112
73712
73712
75376
MCS Index
0
1
2
3
4
...
16
17
...
2
2
2
2
2
...
4
6
...
0
0
1
1
2
3
16
...
26
16
24
32
40
328
...
712
2
32
56
72
104
632
...
1480
3
56
88
144
176
968
...
...
...
...
...
...
...
...
...
2216
110
3112
4008
4968
6456
35160
...
75376
1
2
3
4
...
15
15
...
IMCS
QM
ITBS
ITBS
NPRB
Modulation Order
TBS Index
3) Nprb
Transport 
Block Size 
(TBS) in bits
www.ebook3000.com

LTE Optimization Engineering Handbook
72
LTE considers several factors to allow for high performance user scheduling and resource allocation 
algorithms, for example, users and their queues, present delays, radio qualities, priorities, QoS 
requirements, power restrictions, buffer filling status, and last scheduled TTI, and so on.
Normally, the user scheduling and resource allocation problem attempts to maximize at each 
scheduling instant a weighted sum rate metric, and proportional fair scheduling, which is 
shown below:
	
max
S
u
u
u
u
u
u
u
w
R
r
S
	
Su denotes a particular set of PRBs allocated to user u, ru(Su) is the rate achievable by user u 
when given resources Su. λu is a per‐user grade of service factor to alter priorities based on user 
service class (e.g., gold/silver/bronze) and bearer type. wu is a per‐user weighting factor that 
enforces QoS constraints (e.g., min bit rate, etc.) for a given bearer. Ru is the average rate 
achieved by user u over a prescribed time window. a is a fairness factor: α=0 results in max C/I 
scheduling, α=1 results in proportional fair (PF) scheduling.
2.3.6.1  Downlink Scheduler
The DL scheduling is done per logical channel, each one characterized by a priority queue. The 
scheduler calculates a weight for each queue in due time for each scheduling occasion.
A downlink scheduler is responsible for allocating RB resource for UE and data transfer via 
PDSCH. The overview of a downlink scheduler is depicted in Figure 2.45. A downlink AMC 
decides each UE downlink transmission MCS used based on the CQI. A CQI report can be 
periodic and aperiodic in the uplink PUCCH/PUSCH channel transmission. And the relevant 
control information for downlink transmission and decoding is transmitted on the PDCCH. 
The downlink scheduler functions include following items:
●
●Pre‐schedule, usually used for resource allocation of common channel and random access. 
UE is scheduled by listening to the corresponding downlink subframe (data availability, 
HARQ retransmission, measurement cycle, DRX state, etc.).
●
●Time domain scheduling, which is proportional fair method. It is a compromise 
between system throughput and fairness among users. Using the minimum data bit 
Packet 
Scheduler
Link Adaptation
AMC
QoS 
parameters
DL transmission
on PDSCH
PHY
MAC
OLQC
CQI/PMI/RI report 
(from UE on PUCCH/PUSCH)
BLER 
measurements
Offset
Figure 2.45  Downlink scheduler.

LTE Optimization and Principle and Method
73
rate, applicable to the service that rate requirement is low, the quality of service 
requirements is high, such as VoIP.
●
●Frequency selective scheduling, selectively scheduling the active UEs in different sub‐bands 
where their channel qualities are better, both cell throughput and coverage can be improved. 
Ideally, an attempt to allocate to each user the time‐frequency resources in the red and 
orange regions as shown in the Figure 2.46.
A downlink scheduler’s decisions should be made every TTI by eNB. eNB decides which 
UEs to transmit to (which UEs to be scheduled) and which bearer(s) of a UE to schedule, 
how many PDCCH resources (CCEs, control channel elements) to allocate and where and 
how many PDSCH resources (PRBs) to allocate, how much data to transmit, and sends 
new data or retransmits data that failed HARQ, and what HARQ process ID to use, and so 
on. For each transmission, eNB should decide the following waveform controlling param-
eters like transmit mode, modulation scheme, transmit scheme, and precoding matrix 
and so on.
In LTE, HARQ schemes can be categorized as either synchronous or asynchronous, with the 
retransmissions in each case could be adaptive or non‐adaptive. In a synchronous HARQ 
scheme, the retransmission(s) for each process occur at predefined times relative to the initial 
transmission. So there is no need to signal information such as HARQ process number, as this 
can be inferred from the transmission timing. By contrast, in an asynchronous HARQ scheme, 
the retransmissions can occur at any time relative to the initial transmission, so additional 
explicit signaling is required to indicate the HARQ process number to the receiver, so that the 
receiver can correctly associate each retransmission with the corresponding initial transmis-
sion. In an adaptive HARQ scheme, transmission attributes such as the MCS, and PRBs can be 
changed at each retransmission in response to variations in the radio channel conditions. In a 
non‐adaptive HARQ scheme, the retransmissions are performed without explicit signaling, 
and new transmission attributes can either use previous transmission scheme, or by changing 
the attributes according to a predefined rule.
Time [ms]
Frequency [MHz]
Gain-to-interference ratio [dB]
100 90
80
70
60
50
40 30
20
10
0
0
100
200
300
400
500
600
Channel realization
0
5
0
5
0
5
0
Figure 2.46  Frequency selective scheduling.
www.ebook3000.com

LTE Optimization Engineering Handbook
74
2.3.6.2  Uplink Scheduler
Different from downlink, where the eNB has full knowledge of transmission buffer, in uplink, 
eNB relys on the buffer status information, which is sent by UE to perform schduling. The buffer 
status information including SR and buffer status reporting (BSR). SR is one bit, which can only 
indicate there is new data arrives in the UE buffer. Based on that information, the function 
“buffer estimation” residing in eNB scheduler estimates the UE buffer status. Besides BSR, the 
uplink dynamic scheduling also need considers the following factors, QoS priority weight, chan-
nel estimates, spectrum efficiency, and so on. During scheduling and resource allocation, the 
eNB only needs to calculate the UL_SINR using for a given PRBs, UL and downlink pathloss, 
and then determines MCS levels according to Table 2.18 for UEs with limited TBS.
The eNB may configure the UE to transmit a wide‐band sounding reference signal that can 
be used for estimating the UL channel quality and frequency selective scheduling as shown in 
Figure 2.47. Additional channel quality estimation can be obtained from other UL transmis-
sions such as, data transmission or control signaling (CQI reports and HARQ ACK/NACK 
signals).
The UL scheduling in contrary to DL instead operates on groups of logical channels, but is 
otherwise using similar strategies and weight functions to grant resources. The UL scheduler 
derives UE grants based on the received BSR. The BSR is provided by the UE and occurs per 
logical channel group (LCG), where LCG#0 is reserved for the logical channels used by the 
signaling radio bearers and three (LCG#1‐3) provided for data radio bearers. It is important 
that the delay sensitive GBR traffic such as that arising from voice or conversational video is 
preferably assigned to a separate logical channel group. The UE needs LCG to report to the 
eNB, which radio bearers need UL resources and how much resource they need. The UL sched-
uler is based on channel unaware to select uplink PRBs, and power control headroom will also 
Table 2.18  UL MSC and TBs.
MCS  
Index
Modulation
#RBs
TBS  
(bits)
Coding  
Rate
TxPwr  
(dB)
MCS  
Index
Modulation
#RBs
TBS  
(bits)
Coding  
Rate
TxPwr  
(dB)
0
QPSK
1
104
0.36
−0.6
16
QPSK
25
4968
0.69
17.6
1
QPSK
1
232
0.81
4.8
17
QPSK
30
3112
0.36
14.1
2
QPSK
2
232
0.4
3.1
18
QPSK
48
5992
0.43
17.3
3
QPSK
2
320
0.56
5.1
19
QPSK
40
4968
0.43
16.5
4
QPSK
3
320
0.37
4.3
20
QPSK
48
4968
0.36
16.2
5
QPSK
3
504
0.58
7.2
21
QPSK
30
5992
0.69
18.4
6
QPSK
5
504
0.35
6.2
22
16QAM
1
320
0.56
7.7
7
QPSK
5
776
0.54
8.9
23
16QAM
2
776
0.67
12.7
8
QPSK
5
1000
0.69
10.7
24
16QAM
2
1000
0.87
15.9
9
QPSK
10
1544
0.54
11.9
25
16QAM
5
1544
0.54
14.3
10
QPSK
15
1544
0.36
11.1
26
16QAM
5
2344
0.81
19
11
QPSK
15
2344
0.54
13.7
27
16QAM
10
3112
0.54
17.4
12
QPSK
20
3112
0.54
14.9
28
16QAM
10
4008
0.7
20.1
13
QPSK
20
4008
0.7
16.7
29
16QAM
10
4968
0.86
22.8
14
QPSK
25
4008
0.56
16.1
30
16QAM
15
4968
0.58
19.8
15
QPSK
25
3112
0.43
14.5
31
16QAM
15
5992
0.69
21.8

LTE Optimization and Principle and Method
75
impact the result. Thr related scheduling parameters includes initial MCS in uplink and UL 
target BLER, and so on.
2.3.7  Radio Frame
In FDD‐LTE every downlink subframe can be associated with an uplink subframe that is differ-
ent with TDD‐LTE. 3GPP defined seven TDD UL/DL subframe pattern for different deploy 
conditions leading to different uplink and downlink resources as well as different GP time 
length; for configuration 0, 1, 2, and 6, there will be two DL→UL and two UL→DL switch point 
in each 10ms, and for configuration 3, 4, and 5, there will be only one DL→UL and one UL→DL 
switch point in each 10ms (Table 2.19).
TD‐LTE special subframe has nine pattern shown in Table 2.20, different subframe types 
represent a tradeoff between throughput and coverage. DwPTS is always reserved for downlink 
transmission. UpPTS is always reserved for uplink transmission. Guard period required to 
UEs that are valid
for scheduling:
UL sync, data to
transmit and no
DRX etc.
Hihgest weight UEs:
SRS and PDCCH
resource allocation
SRS measurement
interference estimation
Resource
allocation
Resource fair
frequency selective
UE 1
UE 2
UE 3
UE 4
UE 5
UE 4
UE 3
UE 2
UE 1
UE 6
UE 7
Time domain
scheduling
Scheduling stragety
resource fair, proportional fair
delay based...
Figure 2.47  Uplink frequency selective scheduling.
Table 2.19  TD‐LTE radio frame.
UL‐DL
configuration
DL‐to‐UL  
switch‐point  
periodicity
Subframe number
0
1
2
3
4
5
6
7
8
9
0
  5 ms
D
S
U
U
U
D
S
U
U
U
1
  5 ms
D
S
U
U
D
D
S
U
U
D
2
  5 ms
D
S
U
D
D
D
S
U
D
D
3
10 ms
D
S
U
U
U
D
D
D
D
D
4
10 ms
D
S
U
U
D
D
D
D
D
D
5
10 ms
D
S
U
D
D
D
D
D
D
D
6
  5 ms
D
S
U
U
U
D
S
U
U
D
www.ebook3000.com

LTE Optimization Engineering Handbook
76
ensure uplink and downlink transmissions do not clash. Large guard period will limit capacity. 
Larger guard period normally required if distances are increased to accommodate larger 
propagation times. Assuming special subframe pattern 7, PUCCH resource 4PRB, TD‐LTE 
DL/UL user peak throughput is shown in Table 2.21.
2.3.8  System Information and Timers
2.3.8.1  System Information
The system information broadcast transmits all necessary parameters and information 
about the cell to all UEs in the cell. LTE has 12 system information messages which is classi-
fied into the master information block (MIB) and a number of system information blocks 
(SIBs). Broadcast of system information (SI) is a function of the RRC sub‐layer between the 
UE and eNB. After reading the system information, the UEs know how to behave in the 
cell and can perform the other idle mode tasks, such as PLMN selection, cell selection and 
reselection, monitoring the paging channel, and performing tracking area update. MIB is 
transport on BCH, defines the information about the most essential physical layers of the 
cell required for receiving further system information: downlink system bandwidth, number of 
transmit antennas, PHICH ­configuration (duration and resource), and system frame number 
as shown below.
Table 2.20  TD‐LTE special subframe pattern.
Configuration
Normal cyclic prefix
Extended cyclic prefix
DwPTS
GP
UpPTS
DwPTS
GP
UpPTS
0
3
10
1 OFDM symbols
3
8
1 OFDM symbols
1
9
4
8
3
2
10
3
9
2
3
11
2
10
1
4
12
1
3
7
2 OFDM symbols
5
3
9
2 OFDM symbols
8
2
6
9
3
9
1
7
10
2
‐
‐
‐
8
11
1
‐
‐
‐
Table 2.21  TD‐LTE DL/UL user peak throughput (special subframe pattern 7, PUCCH resource 4PRB).
DL:UL frame configuration
Transmission mode
DL L1 throughput [Mbps]
UL L1 throughput [Mbps]
Con1(DL:UL=2:2)/Con2 
(DL:UL=3:1)
TM3
59.6/80
Con1(DL:UL=2:2)/Con2 
(DL:UL=3:1)
TM7
34.0/46.8
Con1(DL:UL=2:2)/Con2 
(DL:UL=3:1)
‐
‐
20.4/10.2

www.ebook3000.com

LTE Optimization Engineering Handbook
78
The MIB is broadcast on the physical broadcast channel (PBCH), while SIBs are sent on the 
physical downlink shared channel (PDSCH) through radio resource control (RRC) messages. 
SIB1 is carried by “SystemInformationBlocktype1” message. SIB2 and other SIBs are carried by 
“SystemInformation(SI)” message.
SIB1 contains the information for checking whether a UE is allowed to access a cell and for defining 
the scheduling of other system information blocks: access related parameters (e.g., whether UE is 
permitted to camp on the cell), cell selection parameter, scheduling block (SB) providing schedul-
ing details for other SIBs, TDD parameters, SI window length, value tag, and so on.
LTE SIBs need to map into SI before transmisson, all scheduling and mapping information of 
SI are included in the SIB1. UE does not always receive SIBs, SIB1 has a value tag, used to 
­display system information whether changes.
The different SIBs are then mapped onto different SIs, which corresponds to the normal the 
actual transport blocks to be transmitted on DL‐SCH. SIB1 is always mapped, by itself, onto 
the first SI‐1. The remaining SIBs will be group‐wise multiplexed onto the same SI, which have the 
same transmission period. The total bits that is mapped onto a single SI must not exceed the trans-
port block and the SIB‐to‐SI mapping for SIBs beyond SIB1 is flexible and may be different in one 
network. Below is a fragment of SIB1, it gives each SI’s periodicity and members of each group.
    schedulingInfoList {
      {
        si-Periodicity rf8
        sib-MappingInfo { sibType3}
      }
      {
        si-Periodicity rf64
        sib-MappingInfo { sibType4  sibType5  sibType6  
sibType7 }
      }
    }
......
si-WindowLength ms10
The example of SIBs scheduling period is shown in Figure 2.48.
eNB
UE
MIB
---
SIB1
SIB2
SIB3
SIB4
SIB5
SIB6
SIB7
SIB8
SI-1
80 ms
SI-2
160 ms
SI-3
320 ms
SI-4
320 ms
SI-5
640 ms
Period:
SIB1
SIB2
SIB3
SIBN
SI-1
SI-2
SI-N
SIB1 80ms
SIB2 160 ms
SIB3 320 ms
SIB4/5 640 ms
SIB6/7/8 1280ms
BCH
DL-SCH
DL-SCH
Figure 2.48  The example of SIBs scheduling period.

LTE Optimization and Principle and Method
79
MIB and SIB1 are scheduled in a fixed manner. MIB is with a periodicity of 40ms and SIB1 
is 80ms which will occupy the fifth subframe. For the remaining SI, the scheduling on DL‐
SCH is more flexible in the sense that each SI can transmit in any subframe within time 
window ­(SI‐window) with well‐defined starting point and durations. Also the paging 
message is used to inform the UEs in RRC_idle and the UEs in RRC_connected state of the 
change of the system information. The functions of other SIBs is described below as present 
in Table 2.22:
●
●SIB1: Cell access info (PLMN, TAC, CID…)
●
●SIB2 contains the information about common and shared channels; frequency information 
(UL‐carrier frequency, UL‐bandwidth); default paging cycle
●
●SIB3 contains cell re‐selection information, mainly related to the serving cell;
●
●SIB4 contains the information about the serving frequency and intra‐frequency neighboring 
cells related to cell re‐selection;
●
●SIB5 contains the information about other E‐UTRA frequencies and inter‐frequency neigh-
boring cells related to cell re‐selection;
●
●SIB6 contains the information about UTRA frequencies and neighboring cells related to cell 
re‐selection;
●
●SIB7 contains the information about GERAN frequencies related to cell re‐selection;
Table 2.22  The function of MIB and SIBs.
Systerm parameters related to
MIB
SIB1
SIB2
SIB3
SIB4
SIB5
SIB6
SIB7
SIB8
SIB9
SIB10
SIB11
Cell selection info
×
PLMN‐id
×
Tracking area code
×
Cell Id
×
Cell barraed
×
Frequency band indicator
×
SIB scheduling
×
UL EARFCN
×
UL bandwidth
×
DL bandwidth
×
Common radio 
resource config
×
Paging info
×
Cell reselection
×
Neighboring cell‐intra f
×
Neighboring cell‐inter f
×
Inter RAT 
reselection(UTRAN)
×
Inter RAT reselection(GRAN)
×
Inter RAT reselection
×
home eNB
×
ETWS notification
×
×
www.ebook3000.com

LTE Optimization Engineering Handbook
80
●
●SIB8 contains the information about CDMA2000 frequencies and CDMA2000 neighboring 
cells related to cell re‐selection;
●
●SIB9 contains a home eNB identifier;
●
●SIB10 contains an ETWS3(Earthquake and Tsunami Warning System) primary 
notification;
●
●SIB11 contains an ETWS secondary notification;
●
●SIB11 contains CMAS4 (commercial mobile alerting system) notification;
The main system information parameters are listed in Table 2.23.
SIB scheduling cycle length reflects the SIB transmission time interval length in the air interface, 
which reflects the transmission frequency of this SIB. The shorter the cycle, the faster the 
transmission frequency, the less waiting time for the UE to read the SIB, but more resources to 
be sent of the SIB. The scheduling cycle of each SIB can be configured individually. SIB sched-
uling cycle is related with its content of the importance, cell bandwidth resources, delay 
requirements of UE acquired this SIB. The recommended configuration scheme is shown in 
Table 2.24.
3  ETWS is an LTE system information message that delivers early warning of impending earthquakes or tsunamis, 
to all UEs in a specified area. Primary and secondary warning types exist and are transmitted as SIB10 and SIB11.
4  CMAS is a system that distributes a range of (mostly commercial) messages to all UEs in a specified area. A CMAS 
message may carry any information that is of interest to the public.
Table 2.23  System information parameters.
Parameter
Range
Recommand
Description
siWindowLen
5ms (2), 10ms (3), 15ms (4), 20ms 
(5), 40ms (6)
20ms (5)
Common SI scheduling 
window for all SIs
si2Mappinginfo
SIB2 (0)
SIB2 (0)
Define which SIB is in SI‐2
si2Periodicity
80ms (0), 160ms (1), 320ms (2), 
640ms (3), 1280ms (4), 2560ms 
(5), 5120ms (6)
160ms(1)
Periodicity of SI2‐message in 
radio frames
si2Repetition
1…4, step 1
1
The No. of transmission of SI2 
in a SI window
si3Mappinginfo
SIB3 (1)
SIB3 (1)
List of the SIBs mapped to this 
SI message.
si3Periodicity
80ms (0), 160ms (1), 320ms (2), 
640ms (3), 1280ms (4), 2560ms 
(5), 5120ms (6)
160ms(1)
Periodicity of SI3‐message in 
radio frames
si3Repetition
1…4, step 1
1
The No. of transmission of SI3 
in a SI window
si4Mappinginfo
SIB4 (2), SIB5 (3), SIB6 (4), SIB7 
(5), notUsed (18)
SIB4 (2)
Define which SIB is in SI‐4
si4Periodicity
80ms (0), 160ms (1), 320ms (2), 
640ms (3), 1280ms (4), 2560ms 
(5), 5120ms (6), notUsed (18)
1280ms (4)
Periodicity of SI4‐message in 
radio frames
si4Repetition
1…4, step 1
1
The No. of transmission of SI4 
in a SI window

LTE Optimization and Principle and Method
81
2.3.8.2  Timers
Timers optimization are important items in the whole optimization work. Constants and tim-
ers in SIB2 track RRC connection establishment and RRC re‐establishment (RLF detection and 
recovery) procedure. The following timers will be introduced.
T300 is a UE timer, which is started when sending RRC connection request and is stopped 
upon reception of RRC connection setup or RRC connection reject message. Once the T300 
expires, if the number of retransmissions is less than N300, then retransmit RRC connection 
request, otherwise the connection request fails and UE enters the idle mode. Increase the value 
of T300, access success rate will be improved (Figure 2.49).
T301 is used when the UE is unable to successfully RACH when trying to send RRC connec-
tion reestablishment. Started after RRC connection reestablishment request message, stopped 
reception of RRC connection reestablishment or RRC connection reestablishment reject ­message 
as well as when the selected cell becomes unsuitable for reestablishment. When T301 is at 
expiration UE will go to RRC idle. <tx>The higher setting of T301, UE will have more time for 
cell selection, if the timer set too low, this will reduce the possibility of successful RRC re‐estab-
lishment. Typical duration between request and reject messages varied between 25 ms and 
70 ms (Figure 2.50).
T302 is a UE timer, it is started upon reception of RRC connection reject message, the UE 
should start timer T302 and is not allowed to send another RRC connection request on the same 
cell until the expiry of T302. It has 5s as default, in particular cases of congestions it could be 
advisable to increase it.
RRC: RRCConnectionSetupRequest
processing in eNB
pos: RRC: RRCConnectionSetup or
neg: RRC: RRCConnectionReject or
start T300
stop T300
Figure 2.49  T300.
Table 2.24  The recommended SIB scheduling cycle scheme.
Bandwidth ≥5M 
(high speed cell)
Bandwidth ≥5M 
(low speed cell)
Sib2SchPeriod
160 ms
160 ms
Sib3SchPeriod
160 ms
320 ms
Sib4SchPeriod
160 ms
320 ms
Sib5SchPeriod
160 ms
320 ms
Sib6SchPeriod
320 ms
640 ms
Sib7SchPeriod
320 ms
640 ms
Sib8SchPeriod
640 ms
640 ms
www.ebook3000.com

LTE Optimization Engineering Handbook
82
T310:
T310 starts upon detecting physical layer problem, that is, upon receiving N310 consecutive 
out‐of‐sync indications from lower layers, and stops upon receiving N311 consecutive in‐sync 
indications from lower layers, upon triggering the handover procedure and upon initiating the 
connection re‐establishment procedure (Figure 2.51).
T311: started when a radio link failure is declared and initiating the RRC connection 
re‐establishment procedure when T310 expiry, stops when a suitable cell is selected for cell 
reselection (Figure 2.52).
The UE uses timers T310 and T311 to get time to restore the connection with the eNB. 
During the time T310 + T311 the UE stays in RRC_connected state. If the UE can not reestab-
lish connection to the eNB where it had a context stored during the normal operation, the UE 
switches from RRC_connected to RRC_idle and initiates the procedure to establish a new RRC 
connection to a new eNB.
T304 indicates handover failure, for the UE is unable to RACH to target cell at handover. 
With reception of “RRC connection reconfiguration message” T304 starts, if “RRC connection 
RRC: RRCConnectionReestablishmentRequest
pos: RRC: RRCConnectionReestablishment or
neg: RRC: RRCConnectionReestablishmentReject
start T301
stop T301
processing in eNB
Figure 2.50  T301.
t
suitable cell selected
failure
Trigger*
perform cell (re)selection
start
stop
T311/
stop
T301
T311
Start
T301
send
RRC connection reestablishment Request
RRC connection reestablishment
UE resumes RRC connection
received
Figure 2.52  T311.
Out of sync indicators
in sync indicators
Resume RRC connection
Start T310
Stop T310
Figure 2.51  T310.

LTE Optimization and Principle and Method
83
reconfiguration complete message” is not received by target eNB, before expiry of T304, handover 
process will be failed with certain reason (Figure 2.53).
The above timer default value settings can be found in the annex.
2.3.9  Random Access
Random access has an impact on the average call setup time, while the network has a slight 
capacity impact on the high load (interference) with different RACH parameters. Its processes 
are involved on the MAC and PHY layers, which are carried through the PRACH and PDCCH 
channels, respectively. The RACH channel carries a random access preamble and takes up 6 RB 
of a subframe. RACH process as shown in Figure 2.54. UE chooses a random access preamble 
from the BCCH broadcast random access preamble list, followed by computing the OLPC 
(open loop power control) parameters (initial TX power) and verificate the conflict related 
parameters (such as random access attempt whether has exceeded the maximum number of 
attempts). After that, UE sends the initial RACH to the eNB and waits for the response to guide 
the next attempt. OLPC ensures the power of the repeated preamble of the UE, is higher than 
the previous preamble. After the successful reception of the uplink RACH preamble, eNB will 
calculate whether the uplink capacity is allowed for the UE access, and at the same time to 
calculate the power adjustment as well as the timing parameters.
Two types of RA procedures are defined in the standard CBRA (contention based random 
access), and CFRA (contention free random access) which are shown in Figure 2.55. CBRA 
involves the UE randomly selecting a preamble sequence from a predefined list in order to 
access the cell. It is a four‐step process. CFRA involves the UE being sent a preamble sequence 
to use in the RA process, which uniquely identifies the UE to the cell. It is a three‐step process, 
which is faster than CBRA, usually in this case, the network informs each of the UE of exactly 
when and which preamble signature it has to use. For CBRA, network would go through addi-
tional process, at later step to resolve these contention and this process is called “contention 
resolution” step.
Table 2.25 gives the main random access parameters.
UE
S-eNB
T-eNB
Measurement report (A3)
Last RLC PDU
RRC connection reconfig
MSG-1
MSG-1
T304
starts
T304
expiry
RRC connection reconfig completed can not be received
UE continues to
send MSG-1 untill
T304 expiry, but
never receives MSG-2
Figure 2.53  T304.
www.ebook3000.com

BCH information
Preamble (RACH)
PDCCH
Preamble (RACH)
Random access message 
(UL-SCH)
Preamble (RACH)
UE sets the initial transmission power of 
RACH and send preamble signal
Figure 2.54  Random access.
Random Access Preamble
RA Preamble assignment
RA Preamble
Random Access Response
Random Access Response
Scheduled transmission
(adressed to RA-RNTI, RAPID, TA, Inital UL
grant, Temporary C-RNTI)
(L3 msg. incl UE id, Temporary C-
RNTI/C-RNTI)
(adressed to RA-RNTI, RAPID, TA, Inital UL
grant in case of handover)
Contention resolution
(Incl. L3 msg, incl UE id.)
1
2
3
4
S-eNB
T-eNB
PRACH
PDCCH
PDSCH
PUSCH
PDSCH
RA Preamble assignment via dedicated
signalling in DL HO command or PDCCH in
case of DL data arrival
PRACH
PDCCH
PDSCH
PUSCH
PDSCH
Figure 2.55  Contention‐based (top) and contention‐free random access (bottom).

LTE Optimization and Principle and Method
85
2.3.10  Radio Admission Control
The task of radio admission control is to admit or reject the establishment requests for new 
radio bearers. In order to do this, it takes into account the overall resource situation, paging, 
cell loading, handover, incoming a new call, the QoS requirements, the priority levels and QoS 
of in‐progress sessions as well as the QoS requirement of the new radio bearer request.
The purpose of the admission control is to leave a headroom for other traffic not subject to 
admission control for the specific resource (signaling, non‐GBR), incoming user mobility, varying 
radio conditions and intra‐cell mobility. The goal is to protect other traffic and to minimize call 
dropping (service blocking over service dropping). Non‐GBR capacity varies with GBR load, 
admission threshold should reserves a minimum non‐GBR capacity (Figure 2.56).
Parameters related to radio admission control are shown in Table 2.26.
Table 2.25  Random access parameters.
Parameter
Range
Recommend
Description
prachCS
0…15, step 1
11
PRACH cyclic shift
prachConfIndex
3…53, step 1
3
PRACH Configuration index
rootSeqIndex
0…837, step 1
RACH Root Sequence
ulpcIniPrePwr
−120 (0), −118 (1), −116 (2), −114 
(3),……,−92 (14), −90 dBm (15)
−104 dBm (8)
Preamble initial received 
target power
prachPwrRamp
0dB (0), 2dB (1), 4dB (2), 6dB (3)
4dB (2)
Power increment step
preambTxMax
3 (0), 4 (1), 5 (2), 6 (3), 7 (4), 8 (5), 
10 (6), 20 (7), 50 (8), 100 (9), 200 (10)
10 (6)
Max. RA transmissions
raRespWinSize
2 (0), 3 (1), 4 (2), 5 (3), 6 (4), 7 (5), 
8 (6), 10 (7)
10 (7)
defines the window size for 
the random access response 
in TTIs
Served traffic
AT2
AT1
Non-GBR
Partition 1, QCI = 5,6
GBR Partition 2, QCI = 3,4
Bitrate admitted into partition
Bitrate admitted into partition
GBR Partition 1, QCI = 1,2
Maintained
by
Admission
control
time
Admission
Threshold
(AT)
Non-GBR
Partition 2, QCI = 7,8,9
Figure 2.56  Radio admission control.
www.ebook3000.com

LTE Optimization Engineering Handbook
86
2.3.11  Paging Control
2.3.11.1  Paging
Paging is a basic feature allowing the MME to notify a UE about incoming data connections. 
There are a number of reasons why the network needs to initiate contact, the most common of 
which involves downlink data pending in the S‐GW, which needs to be delivered to the UE. 
Another reason is that the EPC may also want to establish control plane connectivity for other 
reasons, for example, the network initiated TAU procedure or for location services. When the 
MME receives a downlink data notification message from SGW, the MME sends an S1‐AP paging 
message (each message transfers a single paging record) to all eNBs in the TA list. With the 
MME functionality configurable and adaptive paging, a page can first be sent only to a single 
eNB or TA before it is sent to all eNBs in the TA list.5 When the S1‐AP paging message arrives 
at the eNB it is queued until the valid paging occasion (PO) occurs. The message is then trans-
mitted over the air interface using resources on PDCCH and PDSCH. Several UE may be 
addressed in the same RRC paging message, which encapsulated and multiplexed paging 
requests sent from eNB to UEs. RRC paging message consists of up to 16 paging records. The 
DL control information (DCI) containing the scheduling assignment for the paging message is 
transmitted over PDCCH. The scheduling assignment is common for all UE monitoring a certain 
PO. UE monitors PDCCH to detect if a paging message is included and checks if there is  
P‐RNTI (paging radio network temporary identifier, sent on PDCCH when there is a RRC pag-
ing message allocated on PDSCH) allocated in common search space. Figure 2.57 illustrates the 
paging procedure.
Table 2.27 presents the RRC paging message IE and semantics description.
When the UE is under the mode of idle, the network wants to send the data, the call flow is 
S_TMSI based paging, if the network happens error and need to recover (S_TMSI can not be 
used), the network can do the IMSI paging, UE detach the network after receive the signal, then 
attach (Figure 2.58).
When paging messages arrive in the RAN, the RRC layer tries to send the paging message in 
the first valid PO. If it is impossible to send the paging message in the first PO because of block-
ing, for example, attempts are made to send the paging message in subsequent POs according 
to the DRX (discontinuous reception, for reducing power consumption) cycle in idle mode. 
DRX will enable an efficient paging procedure that allows the UE to sleep with no receiver 
processing most of the time and to briefly wake up at predefined time intervals to monitor 
5  The MME can employ certain smart mechanisms (e.g., tiered paging, last cell paging, sequential paging) to reduce 
paging overhead, which in turn can allow larger tracking areas.
Table 2.26  Parameters related to radio admission control.
Parameter
Description
Range
maxBitrateDL
Maximum bit rate downlink
1000…300000 kbps, step 500 kbps
maxBitrateUL
Maximum bit rate uplink
1000…75000 kbps, step 500 kbps
maxNumActUE
Maximum number of active UEs
0…190, step 1
maxNumRrc
Maximum number of RRC connections
0…400, step 1
minBitrateDl
Minimum bitrate downlink
5…300000 kbps, step 5 kbps
minBitrateul
Minimum bitrate uplink
5…75000 kbps, step 5 kbps

2. S1AP Paging message
SGW
MME
TAC=2
3. DCI (PDCCH) RRC
Paging Message (PDSCH)
4. Service
 request
3. DCI (PDCCH) RRC
 Paging Message (PDSCH)
UE
being paged
TA list:
TAC1
TAC3
UE
eNB
MME
RRC paging
S1AP paging
UE uses the random
access procedure to
initiate access to the
serving cell
The MME initiates a
paging message which is
sent to all eNBs in a TA
Random access procedure
NAS: Service request
NAS messaging
continues in order to
set up the call
S1-AP: initial UE message
+NAS: Service request
+eNB UE signaling connection
ID
TAC= 3
TAC= 1
1. Downlink Data
 Notification
Figure 2.57  Paging strategy.
Table 2.27  RRC paging message.
IE/Group Name
source
Semantics description
pagingRecordList
eNB
Only included if an UE specific paging has been triggered by S1AP. 
SEQUENCE (1..maximum No. of pagingrecords): 1 or more 
elements in the list depending on the number of UEs to be paged at 
the same paging occasion. (one paging record per UE)
  > UE Identity
MME
UE Identity as provided by S1AP: paging message (UE paging 
identity)
    >> choise S‐TMSI
      >>> S‐TMSI
    >> choise IMSI
      >>> IMSI
  > CN‐Domain
Provided by the S1AP: paging message.
systemInfoModification
eNB
This IE is present if a system information change is notified. eNb can 
inform UEs about system information changes. It is done via paging.
ETWS‐Indication
eNB
The IE is present if an ETWS primary/secondary notification 
shall be indicated. When ETWS (earthquake and tsunami 
warning system) is to be sent, it is done via paging.
Paging‐v890‐IEs
  > lateNonCriticalExtension
  > Paging‐v‐920‐IEs
  >> cmas‐Indication‐r9
eNB
This IE is present, if a CMAS notification shall be indicated.
  >>nonCriticalExtension
Omitted
www.ebook3000.com

LTE Optimization Engineering Handbook
88
­paging information from the network. Paging DRX cycle defines time between two POs of the 
same UE. The RRC layer tries to send the paging message during a period specified by the 
parameter pagingDiscardTimer, after which the paging message is discarded. It is recommended 
that the pagingDiscardTimer should be set equal to or smaller than T3413. To guarantee at 
least one retransmission attempt by the RRC layer, the pagingDiscardTimer must be set to a 
larger value than the defaultPagingCycle. If the MME does not receive the service request within 
T3413 seconds, it resends the S1‐AP paging message according to the paging profile. The DRX/
DTX parameters are present in Table 2.28.
The default paging cycle defines the cell specific paging DRX cycle duration (periodicity of 
the paging). It also determines the maximum paging DRX duration applicable in the cell. Value 
rf32 corresponds to 32 radio frames, rf64 corresponds to 64 radio frames, and so on. One radio 
frame is 10ms. Current recommended value is 64rf, since it improves the paging time. Higher 
parameter values can save battery in idle mode as listening to paging in less frequently but it 
also means that call setup is getting longer due to longer average paging time.
pagingNb defines the number of possible paging occasions per radio frame, that is, the den-
sity of paging occasions. It is used to calculate the number and position of paging occasions 
(PO) and paging frames (PF). By increasing pagingNb the number of paging occasions per 
second is increased. 3GPP defined there are maximum 16 users per paging occasion. There is 
one paging record per UE in each paging occasion so it is possible to page a maximum of 16 
UEs. Therefore, increasing pagingNb means it is possible to page more UEs, and increasing the 
paging capacity (Figure 2.59).
SFN0
PO
nB=½T
nB=T
nB=2T
SFN1
SFN2
SFN3
Figure 2.59  pagingNb.
NAS:Paging (S_TMSI)
NAS:Paging (IMSI)
NAS:Paging (IMSI)
NAS:Paging (S_TMSI)
Same as the procedure of service request initiated by UE
Same as the procedure of attach request initiated by UE
UE
eNB
eNB
EPC
EPC
UE
Figure 2.58  Paging procedure.
Table 2.28  DRX/DTX parameter.
Parameter
Range
Default
Default paging cycle
32rf (0), 64rf (1), 128rf (2), 256rf (3)
64rf (1)
Inactivity timer
10…65535 s, step 1 s
10 s
Paing nB
1/32T, 1/16T, 1/8T,1/4T,1/2T, 1T, 2T, 4T; T is the 
defaultPagingCycle.
1T (2)

LTE Optimization and Principle and Method
89
The positions that paging messages are transmitted on the Uu interface are fixed, which are 
indicated by the paging frames (PFs) and paging occasion (PO) subframes. One PF is one radio 
frame, which may contains one or multiple POs. All attached UEs are distributed on all paging 
frames within one paging DRX cycle (based on IMSI). One PO is a subframe where the P‐RNTI 
is contained. The PO is transmitted over the PDCCH, the P‐RNTI value is fixed, that is, FFFE. 
UEs read paging messages over PDSCH according to the P‐RNTI. To receive paging messages 
from E‐UTRAN, UEs in idle mode monitor the PDCCH channel for P‐RNTI value used to 
indicate paging. If the UE detects a group identity used for paging (the P‐RNTI) when it wakes 
up, it will process the corresponding downlink paging message transmitted on the PCH 
(Figure 2.60).
LTE frames numbering has two components, one at frame level, that is, system frame num-
ber (SFN) and second one at subframe level, that is, subframe number. So the UE has to know 
both SFN and subframe number to locate exact position of its page. The SFN of a paging frame 
(PF) is derived from the following formula:
	
PF
SFNmodT
T div N x UE
IDmodN
_
	
The subframe number i_s of a PO is derived from the following formula:
	
i s
UE
ID N modNs
_
_
/
	
T is DRX cycle of the UE. UE can get the T from two different sources, one from the system 
information (SIB2) and the one from upper layer (NAS). If upper layer send the value, the UE 
DRX cycle
#0
#4
Paging DRX Cycle
PF
PF
PF
PO
PO
PO
PO
PF
PF
PF
Paging DRX Cycle Paging DRX Cycle Paging DRX Cycle
#5
#9
PDSCH
PDCCH
T_Frequency
P-RNTI
T_Format Paging message
Subframe
Possibility to page this terminal
UE receiver circuitry
switched off
UE receiver circuitry
switched off
Figure 2.60  Paging frame and occasion.
www.ebook3000.com

LTE Optimization Engineering Handbook
90
compares the value signaled from the NAS and the value of DefaultPagingCycle and uses the 
smaller value between them, otherwise UE has to use the value from SIB2.
N = min(T, nB), which means the smaller one among T and nB. nB can be any one of 4T, 2T, 
T/2, T/4, T/8, T/16, T/32, which comes from SIB2 (IE nB).
UE_ID is IMSI mod 1024, calculated by MME and UE. If the paging is triggered by the MME, 
the UE_ID value is the UE identity index value contained in the paging message on the S1 interface 
without having to signal the IMSI across the S1 interface. It is a 10 bit string value. Thus, UE are 
divided in “N” groups according to their UE identity, all UE with equal values for “UE_ID mod 
N” share the same paging frames. Network send paging with S‐TMSI, but if something (e.g., network 
failure) happens during registration and it fails to allocate TMSI to the UE, network would send 
paging with IMSI. If UE get the paging with IMSI, it should tear down all existing bearers and 
delete TAI, TAI List, KSIASMI and get into EMM‐DEREGISTERED status. And then redo 
“attach request.”
Ns = max(1, nB/T), which means that Ns is the larger value between 1 and NB/T
Table 2.29 gives an example of paging offset and sub‐frame under TDD (all UL/DL configurations) 
system.
Example:
Example:
T = 64
nB = 2T = 128
UE_ID = IMSI mod(1024)
N = min (T,nB) = 64
Ns = max (1,nB/T) = 2
UE_ID = IMSI mod 1024 = e.g 0
PF : SFN mod T= 
(T div N)*(UE_ID mod N) =
0, 64, 128…
Although 3GPP allows up to four paging occasions per radio frame. Assume only supports 
up to 1 paging occasion per radio frame (pagingNb = oneT), that translates into 100 paging 
occasions per second. Since each paging message may contain up to 16 paging records the 
maximum air interface capacity is 1600 paging records per second per cell, which is more than 
what eNB can provide in the control plane, that is, it has been observed a CPU load of roughly 
4% for 30 S1 pagings per second. As a consequence, 500 S1 paging messages per second would 
occupy 2/3 of CPU processing power for paging alone. Based on the above, the default pag-
ingNb= quarterT (equivalent to 400 possible paging messages per second) is the maximum 
recommended value.
UE may also be paged by the network when there is data addressed to that particular UE. UE 
returns to EMM_ACTIVE/RRC_connected mode as soon as packet arrival is detected. The 
delay depends on the paging DRX cycle, time to acquire UL synchronization, and time to set up 
the RRC connection with the eNB. MME Initiated paging fow is shown in Figure 2.61.
Table 2.29  Example of paging offset and sub‐frame, TDD (all UL/DL configurations).
Ns
PO when i_s=0
PO when i_s=1
PO when i_s=2
PO when i_s=3
1
9
N/A
N/A
N/A
2
4
9
N/A
N/A
4
0
4
5
9

LTE Optimization and Principle and Method
91
Here are three paging examples as following.
Example 1 > - Paging with s‐TMSI
 PCCH-Message ::= SEQUENCE
   +-message ::= CHOICE [c1]
      +-c1 ::= CHOICE [paging]
         +-paging ::= SEQUENCE [1000]
            +-pagingRecordList ::= SEQUENCE OF SIZE(1..maxPageRec[16]) 
[1] OPTIONAL:Exist
            | +-PagingRecord ::= SEQUENCE
            |    +-ue-Identity ::= CHOICE [s-TMSI]
            |    | +-s-TMSI ::= SEQUENCE
            |    |   +-mmec ::= BIT STRING SIZE(8) [00000001]
            |    |   +-m-TMSI ::= BIT STRING SIZE(32) [000000000000000000000
                              |               00000000001]
            |    +-cn-Domain ::= ENUMERATED [ps]
            +-systemInfoModification ::= ENUMERATED OPTIONAL:Omit
            +-etws-Indication ::= ENUMERATED OPTIONAL:Omit
            +-nonCriticalExtension ::= SEQUENCE OPTIONAL:Omit
Example 2 > - Paging with IMSI
PCCH-Message ::= SEQUENCE
   +-message ::= CHOICE [c1]
      +-c1 ::= CHOICE [paging]
         +-paging ::= SEQUENCE [1000]
RACH Preamble
Page
UE
eNB
MME
SGW
Downlink data
PGW
RRCConnection Setup
RRCConnectionSetup Complete
Attach Request
RRC Connection Request
RACH Response
Security Mode Complete
Security Mode Command
Initial context setup req
RRCConn Reconfiguration Req
RRC conn Reconfiguration 
Complete
UL DATA
Update Bearer
Request
Modify Bearer 
Response
DL DATA
Page
Page Response Time
Total Delay
Initial Context Setup Response
S1-AP Initial UE Message
Attach Request
eNB UE S1AP ID IE 
Figure 2.61  MME initiated paging flow
www.ebook3000.com

LTE Optimization Engineering Handbook
92
            +-pagingRecordList ::= SEQUENCE OF SIZE(1..maxPageRec[16]) 
[1] OPTIONAL:Exist
            | +-PagingRecord ::= SEQUENCE
            |    +-ue-Identity ::= CHOICE [imsi]
            |    | +-imsi ::= SEQUENCE OF SIZE(6..21) [15]
            |    |    +-IMSI-Digit ::= INTEGER (0..9) [0]
            |    |    +-IMSI-Digit ::= INTEGER (0..9) [0]
           ......
            |    |    +-IMSI-Digit ::= INTEGER (0..9) [9]
            |    +-cn-Domain ::= ENUMERATED [ps]
            +-systemInfoModification ::= ENUMERATED OPTIONAL:Omit
            +-etws-Indication ::= ENUMERATED OPTIONAL:Omit
            +-nonCriticalExtension ::= SEQUENCE OPTIONAL:Omit
Note: IMSI is used as paging identity when reattach from UE is required. It indicates that 
error occurred.
Example 3 > - Paging for system Info Modification 
RRC_LTE:PCCH-Message
PCCH-Message ::= SEQUENCE
   +-message ::= CHOICE [c1]
      +-c1 ::= CHOICE [paging]
         +-paging ::= SEQUENCE [0100]
            +-pagingRecordList ::= SEQUENCE OF OPTIONAL:Omit
              +-systemInfoModification ::= ENUMERATED [true] OPTIONAL:Exist
            +-etws-Indication ::= ENUMERATED OPTIONAL:Omit
            +-nonCriticalExtension ::= SEQUENCE OPTIONAL:Omit
2.3.11.2  Paging Capacity
The higher amount of paging frames the more PDCCH and PDSCH resources may be used for 
paging. More aggregated paging records in one RRC paging message that is sent in one PO 
causes less PDSCH occupation comparing to higher number of RRC paging messages with less 
paging records inside. When average paging load is low, one can reduce value of pagingNb, thus 
more UEs under one PO will be aggregated and in average more page records per each RRC 
paging message is expected. What is more, less POs will decrease PDCCH load that less 
P‐RNTIs will be used to sent the same amount of paging records. On the other hand more 
paging records per one PO will cause higher blocking probability, it should be balanced. The the 
number of EPS paging attempts, received/discarded S1AP Paging messages by eNB can be got 
from PM counter listed in Table 2.30.
Paging DRX cycle does not change the maximum paging capacity because the number of 
resources that can be used for paging is not changed. Paging DRX cycle reduces blocking 
­probability at the cost of call setup time.
Table 2.30  The number of EPS paging attempts, received/discarded S1AP Paging messages.
EPS paging attempts
This counter counts the the number of paging attempts of initial and repeated.
PageS1Received
This counter counts the number of received S1AP Paging messages in the RBS.
PageS1Discarded
The number of S1AP Paging messages that are discarded and not routed to any cell

LTE Optimization and Principle and Method
93
PagingNB is used to calculate the number of POs within one paging DRX duration, which in 
turn is used to calculate the PO. PagingNb changes the maximum paging capacity because it 
increases number of resources that can be used for paging, it reduces blocking probability and 
increases maximum number of pagings. Paging frames are distributed on all radio frames 
according to pagingNb parameter value. PagingNb has impact on number of POs per consid-
ered time frame, higher value of pagingNb more POs per time period. Paging frame and paging 
occasion example are shown in Figure 2.62.
If eNB KPI indicates more paging discards, it can be considered to increase the maximum 
number of paging records parameter or to allow more number of paging occasions, that is, 
increase nB (Table 2.31).
Paging capacity has impact on call setup time, reachability of UE, and tracking area size. 
Excessive paging blocking value leads to delay or failure of the paging procedure. Here are four 
type of paging DRX cycle and pagingNb settings usually configured in a live network. It can be 
seen that higher value of pagingNb (½) will result to reduced number of UEs assigned to one 
PO (20UEs/PO or 10UEs/PO) and longer paging DRX cycle will result more POs within one 
cycle reducing number of UEs assigned to one PO (Figure 2.63).
Assumption1: 320 UEs/cell, pagingNb = ½, 32/64 paging DRX cycle
Assumption2: 320 UEs/cell, pagingNb = ¼, 32/64 paging DRX cycle
Paging blocking probability is another factot that impacts on eNB paging capacity as it limits 
maximum number of pagings that can be handled by one eNB. Pagings arrival is poisson distribution 
The value of nB determines the
nB = 4T
0
16
32
0
16
32
0
16
32
0
16
32
0
16
32
0
16
32
0
16
32
0
16
32
nB = 2T
nB= T
nB= (½)T
nB= (¼)T
0
4
9
0
4
9
0
4
9
0
4
9
0
4
9
0
4
9
0
4
9
0
4
9
rate at which paging frames
occur from the cell perspective,
i.e. there is an impact upon
paging capacity.
nB = (1 8)T
nB = (1 16)T
nB = (1 32)T
=>
=>
=>
=>
=>
=>
=>
=>
defaultPagingCycle =rf32
Paging Frame
Paging Occasion
(per Paging Frame)
Figure 2.62  Paging frame and paging occasion.
Table 2.31  Paged UEs per second per cell.
nB
T/32
T/16
T/8
T/4
T/2
T
2T
4T
paging occasions per radio frame
1/32
1/16
1/8
1/4
1/2
1
2
4
Ns
1
1
1
1
1
1
2
4
Number of paging record per 
radio frame
16
16
16
16
16
16
32
64
Max No. of paged UEs per second 
per cell
50
100
200
400
800
1600
3200
6400
www.ebook3000.com

LTE Optimization Engineering Handbook
94
in a live network and blocking probability determines average number of records per one RRC 
paging message.
For the calculation of consumption of PDSCH resources, assume 16 pagings records in one 
PO, the length of S‐TMSI is 32bits, the length of MME record is 8bits. For each PO, the maxi-
mum transmit payload are 16*40+1+1=642 bits, it will occupy 10 PRBs PDSCH resources 
shown in Table 2.32. It can be seen that when PDSCH resources is 10 PRBs and MCS level is 4, 
the TB size is 696 bits accordingly. Actually, in a live network, it is normally not to use higher 
MCS level for the paging channel.
Now let’s take an example of how to calculate eNB’s paging capacity. It is simply assumed the 
traffic model (three cells/eNB) of a network is listed below (variety of applications and smart-
phone types cause that the real network behavior might be significantly different):
●
●Users (RRC connected + RRC idle) per eNB – 450
●
●MTC/MOC for VoIP – 50%/50%
●
●MTC/MOC for PS/background – 30%/70%
●
●VoIP holding time – 90 sec; PS data mean holding time – 312 sec.
●
●PS data sessions per user per busy hour – 1; VoIP sessions per user per busy hour – 1.
●
●Background traffic per every user
●
●InactivityTimer: 10 sec.
So, in this traffic model, eNB’s paging capacity is 4.3 pagings/s/eNB.
320/16 = 20UEs/PO
320/32 = 10UEs/PO
320/8 = 40UEs/PO
Paging frame (10ms)
1 second
1 second
1 second
1 second
64rf Paging DRX Cycle (32POs)
64rf Paging DRX Cycle
64rf Paging DRX Cycle
64rf Paging DRX Cycle (32POs)
32rf Paging DRX Cycle (16POs)
32rf Paging DRX Cycle (16POs)
32rf Paging DRX Cycle
32rf Paging DRX Cycle
32rf Paging DRX Cycle
32rf Paging DRX Cycle
32rf Paging DRX Cycle
32rf Paging DRX Cycle
50 PO/s = max 800 pagings/s
50 PO/s = max 800 pagings/s
25 PO/s = max 400 pagings/s
25 PO/s = max 400 pagings/s
320/16 = 20UEs/PO
Figure 2.63  Four type of paging DRX cycle and pagingNb.
Table 2.32  PDSCH resources occupation for paging.
I_TBS
N_PRB
1
2
3
4
5
6
7
8
9
10
0
16
32
56
88
120
152
176
208
224
256
1
24
56
88
144
176
208
224
256
328
344
2
32
72
144
176
208
256
296
328
376
424
3
40
104
176
208
256
328
392
440
504
568
4
56
120
208
256
328
408
488
552
632
696

LTE Optimization and Principle and Method
95
2.3.11.3  Paging Message Size
The physical layer will add a 24 bit CRC to the transport block and then complete channel coding. 
The default channel coding value of 0.12 means that high quantities of redundancy are added 
before transmitting the paging message across the air‐interface. The value of 0.12 and QPSK 
are always used on the PDSCH when transferring a paging message that helps to make paging 
more reliable.
Assuming a resource block includes 132 resource elements per resource block pair within a 
subframe. Table 2.33 illustrates the requirement for a large number of resource blocks when 
the paging load is very high.
2.3.11.4  Smart Paging
LTE allows the operator to configure a first page is to be distributed, to the area of a single eNB, 
TA or the whole TA list. The selected area in which the page is sent can be decided based on 
different criteria:
●
●UE‐related criteria, which is used to send a page to a single eNB or a TA for known stationary 
UEs such as electricity meters
●
●UE last reported location criteria, which is used to send a page to a single eNB or a TA when 
a the location of the UE is unknown
●
●Service‐related criteria by APN, QCI, and ARP. These criteria are used for time critical 
­services to guarantee that the page is sent directly to all eNBs in TA list
In general, paging strategy is step‐by‐step paging in a live network. When the MME wants to 
page the UE, first paging the last visit of the eNB, if the UE can not be paged, then last eNB and 
its neighboring eNBs will be paged, if the UE still can not be paged, then eNBs in last TA will 
Table 2.33  PDSCH paging load.
Number of paging  
records
Paging message  
size (bits)
Transport block  
size (bits)
# Bits after  
channel coding
# RE
# RBs
1
56
56
667
334
3
2
104
120
1200
600
5
3
144
144
1400
700
6
4
192
208
1934
967
8
5
232
256
2334
1167
9
6
280
280
2534
1267
10
7
320
328
2934
1467
12
8
384
392
3467
1734
14
9
408
488
4267
2134
17
10
456
488
4267
2134
17
11
496
552
4800
2400
19
12
544
552
4800
2400
19
13
584
600
5200
2600
20
14
632
632
5467
2734
21
15
672
696
6000
3000
23
16
720
776
6667
3334
26
www.ebook3000.com

LTE Optimization Engineering Handbook
96
be paged, and finally eNBs in last TA List will be paged. Paging the last visit of the eNB, UE 
paging success ratio can reach to 70% to 90%, and reduce paging signaling in large quantities.
At the same time, different levels or different characteristics of users can be set to different 
paging attributes. With different attributes of paging, it can be greatly reduced the paging 
­signaling load (amount of paging S1 paging messages decrease 50%). Intelligent intelligent 
paging strategy can be set different attributes, according to different levels or different characteris-
tics of users based on APN, QoS, IMSI, IMEI, and so on. The paging strategy can be further 
refined and optimized, for example, accurate paging scheme can only be applied for slow moving 
UEs, for high mobility users, paging over tracking area, and gradually expand the range of paging 
shall be applied, thus will greatly reduced the paging signaling load (Figure 2.64).
2.3.11.5  Priority Paging
In a system with mixed paging priorities, higher priority paging can preempt existing lower 
priority paging in the queue, the paging success rate will be higher for higher priority of the 
paging message compared to lower or no priority.
Assuming there are non‐prioritized paging messages and prioritized paging messages per 
second, the prioritized paging messages shall be equally distributed between priority 1 and 8. 
All paging messages shall be sent equally distributed in time based on priority.
S1AP paging message listed in Table 2.34, which shows a paging payload. 3GPP allows up to 
16 S1 pages per modem‐to‐UE page message. In case when more than 16 pagings are considered 
MSISDN
Trigger 2
Trigger 1
APN
ARP
QCI
Voice
SMS
Service level
User level
Page strategy
IMEI TAC
IMSI
The basic paging stragegy is:
last eNB ->
last eNB and its neighboring eNBs -> 
eNBs in last TA ->
eNBs in last TA List (3GPP standard)
Figure 2.64  Paging strategy.
Table 2.34  S1AP paging message IE and semantics description.
IE/Group name
Source
Semantics description
Comments
UE identity index value
MME
IMSI mod 1024
–
UE paging identity
MME
S‐TMSI or IMSI*
–
Paging DRX
MME
Paging DRX cycle
When more than 16 
pagings are sent in 
one PO, they are put 
in RRC paging 
message according to 
descending paging 
priority value
CN domain
MME
CN Domain – PS or CS
List of TAIs
At least one TAI shall be present; up to 16
  > TAI list item
    >> TAI
MME
      >>> PLMN identity
MME
      >>> TAC
MME
Paging priority
MME
Used in control plane overload cases

LTE Optimization and Principle and Method
97
to be sent in one PO, they are put in RRC paging message according to descending paging pri-
ority value. Figure 2.65 gives a description of Token based priority paging.
2.3.12  MIMO and Beamforming
From 3GPP roadmap of multi‐antenna point of view, the evolution of LTE releases in 3GPP 
brings significant new capability in the domain of multi‐antenna operation. Advanced multi‐
antenna solutions are key components to achieve the LTE network requirements for high peak 
data rates, extended coverage, and high capacity. Nowadays, market is driven by advanced 
antennas and more complex passive antennas. Beamforming and spatial multiplexing illustrated 
in Table 2.35 have been widely deployed in the live network, while diversity and beamforming 
aim to improve received signal power of a single information stream, spatial multiplexing aims 
to share the signal power between multiple parallel streams.
Smart antenna is a multiple antenna elements system, which combined with signal processing 
to dynamically select or form the “optimum” beam pattern for each user. Smart antennas usually 
categorized as switched beam and adaptive array, and there are four types of smart antennas as 
shown in Figure 2.66: uniform linear array (a), circular array (b), two‐dimensional grid array 
(c) and three‐dimensional grid array (d).
Now in the LTE live network, usually classical antenna and active antenna are deployed. 
A classical antenna consists of subelements, two antenna ports per column or smart antenna 
that has at least eight antenna port. Smart antenna can shape a beam by weighting of subelements 
so called beamforming (BF). The beam shape could be fixed vertically or adaptable horizontally 
Accepted pagings
Accepted pagings
Excess paging
Excess paging
Excess paging
Accepted pagings
excess flow
excess flow
P2
P3
P1
Token rate–r,
short interval
(10 ms) or
continues
prioLevel3
prioLevel2
prioLevel1
Paging
Tokens?
Tokens?
Tokens?
Figure 2.65  Priority paging.
Table 2.35  Beamforming and spatial multiplexing.
2D Beamforming
Digital beamforming with integrated radios and antennas
3D Beamforming
3D beamforming is integrated with radios and antennas, support user 
specific beamforming.
Require phased‐array technology, including analoque, digital and hybrid 
beamforming technologies
MIMO and massive MIMO
More antenna elements required for capacity increase. However higher 
frequency => smaller antennas
www.ebook3000.com

LTE Optimization Engineering Handbook
98
to any direction and shape by changing amplitude and phase. An active antenna, composed of 
a multiple set of low power active transceivers modules, which are connected to eNB through 
CPRI. PAs are tightly integrated inside antenna, one PA per subelement. Active antenna offers 
beamforming more flexibility to tune tilt angles without mechanical actions, more flexibility to 
change the antenna vertical beam (Figure 2.67 and Figure 2.68).
x
∆x
y
z
(b)
(c)
(d)
(a)
x
y
x
y
x
y
∆x
∆z
∆y
∆z
∆x
∆Φ
Figure 2.66  Four types of smart antennas based on element arrangement.
Subelement
weights
PA
antenna
port
one column
subelements
PA
w1
w4
w5
w8
Figure 2.67  Classical antenna.
antenna ports
PA
PA
PA
PA
PA
PA
PA
PA
w1
w4
w5
w8
Figure 2.68  Flexible active antennas.

LTE Optimization and Principle and Method
99
For beamforming, two precoding methods were evaluated using a full buffer traffic model 
in the 3GPP 3D UMi scenario: one is SVD precoding using the uplink long term spatial 
channel correlation matrix, the other is codebook based precoding using grid‐of‐beams, 
where the ­precoder matrix is chosen based on the uplink long term spatial channel correla-
tion matrix.
For spatial multiplexing, the eNB is able to transmit and receive multiple parallel information 
streams within the same spectrum which requires multiple antennas at both ends of the radio 
link and the maximum number of parallel streams is equal to the minimum of the number of 
transmit and receive antennas, therefore increasing the spectral efficiency. Most MIMO 
­implementation nowadays is X‐pol (one is 45 degree, the other is ‐45 degree) MIMO and not 
spatial MIMO.
The evolution of DL transmission modes on top of Rel 8 was the enhanced transmit diversity, 
beamforming and spatial multiplexing, Rel 9 adds dual layer beamforming. Rel 10 extends the 
dual layer mode of TM8 to TM9 with up to eight layers. Rel 11 adds TM10 with up to eight 
layers and provide support for DL beamforming on dedicated control channel and optimized 
DL CoMP operation, and in Rel‐10 UL SU‐MIMO with up to four‐layer, UL reference signal 
enhancements for improved UL MU‐MIMO (Rel 10) and UL CoMP (Rel 11) will be supported. 
3GPP transmission modes (downlink) are present in Table 2.36.
It is worth to mention that 3D beamforming is planning introduced in 3GPP Rel 13, it is not 
only a new beamforming feature but a whole new product and site solution, instead of 8 pipes 
with fairly high power per pipe, the idea is to use 64 pipes with low power per pipe.
Either beamforming or spatial multiplexing, the goal of optimizing a MIMO system is to 
achieve the highest throughput and connectivity possible in a given environment by leveraging 
the multipath potential of the environment.
Table 2.36  3GPP transmission modes (downlink).
3GPP
tx mode
Transmission scheme 
of PDSCH
Antenna Port Feedback
Beam‐
forming
Spatial 
multiplexing
Spatial 
diversity
Rel‐8
1
Single‐antenna port
CRS
CQI
No
No
No
2
Transmit diversity
CRS
CQI
No
No
Yes
3
Open‐loop spatial 
multiplexing
CRS
CQI, RI
No
1‐4 layer
Yes
4
Closed‐loop spatial 
multiplexing
CRS
CQI, PMI, RI
Yes
1‐4 layer
No
5
Multi‐user MIMO
CRS
CQI, PMI, RI
Yes
Yes
No
6
Closed‐loop Rank=1 
precoding
CRS
CQI, PMI, RI
Yes
No
No
7
Beamforming single‐
antenna port; port 5
DM RS
CQI
Yes
No
No
Rel‐9
8
Dual layer 
beamforming
DM RS
CQI, PMI, RI
Yes
1‐2 layer
No
Rel‐10
9
Closed‐loop spatial 
multiplexing
DM RS
CQI, PMI, RI
Yes
1‐8 layer
No
Rel‐11
10
TM9 with DL CoMP 
and E‐PDCCH
DM RS
CQI, PMI, RI
Yes
1‐8 layer
No
www.ebook3000.com

LTE Optimization Engineering Handbook
100
2.3.12.1  Basic Multi‐Antenna Techniques
For LTE 10 transmission modes, only four MIMO technology programs are focused on in this 
part: beamforming, transmit diversity, SU‐MIMO, and MU‐MIMO.
With at least eight antennas at the transmitter and only single antenna at the receiver (referred 
to as MISO) it is possible to obtain beamforming (BF). With this method the transmission 
­signal is steered in a beneficial direction toward the UE, as the UE moves throughout the cell, 
the switched beam system detects the signal strength and continually switches the beam as 
necessary. This is accomplished by adjusting the phase and amplitude of the different antenna 
elements by multiplying the signal with complex weights. Each element of the array will be fed 
with the same signal and this enables “smart” antennas to modify their radiation pattern 
dynamically to alter the direction and shape even a beamforming antenna enables the entire 
eNB signal to be directed to the single user. It would be possible to dip the beam by causing 
element B to lag in phase behind element A, thus the line describing points where the radiation 
arrives in phase is no longer horizontal but instead dips toward point Z as shown in Figure 2.69. 
BF support to tune shapes horizontally and vertically according to typical UE positions and 
traffic needs, and even horizontal/vertical sectorization.
Transmit diversity aims to increase the robustness of data transmission. When the same data 
is transmitted redundantly over more than one transmit antenna, this is called TX diversity. 
This increases the SNR. Space‐time codes are used to generate a redundant signal. Transmit 
diversity mode includes two transmitting antenna’s SFBC (space‐frequency block code) and 
four transmitting antenna’s SFBC+FSTD. In LTE, transmit diversity is used as a fallback option 
for some transmission modes, such as when spatial multiplexing cannot be used. Control chan-
nels, such as PBCH and PDCCH, are also transmitted using transmit diversity.
MIMO includes single‐user mode SU‐MIMO and multi‐user mode MU‐MIMO. For SU‐
MIMO, data is divided into separate streams for one UE, which are then transmitted simulta-
neously over the same air interface resources under spatially uncorrelated channels (Figure 2.70).
MU‐MIMO, the program will be the same time‐frequency resources through space division 
with sharp beams, assigned to different users under spatially correlated channels (Figure 2.71).
Beamforming and MU‐MIMO prefer correlated antennas, precoding weights are chosen to 
maximize signal toward a given UE and are related to the instantaneous channel gains and 
phases of the signal paths through the MIMO channel. With correlated antenna ports as shown 
in Figure 2.71, the signal paths through the MIMO channel will all have the same instantaneous 
A
B
θ
Phase
shifters
Phase
shif
Y
X
Z
Feed
Figure 2.69  Cell shaping and sectorization.
Delay
e
S-P
Figure 2.70  SU‐MIMO (left) and transmit diversity (right).

LTE Optimization and Principle and Method
101
fading, so the ideal weights differ only in their phase slope. With decorrelated ports, the fade 
depth varies across the multiple signal paths through the MIMO channel. Optimal weights 
would ideally bias power away from the deeply faded paths and are therefore complex, with 
different gain and phase. It is worth to say beamforming is implicit in multi‐layer SU‐MIMO 
and MU‐MIMO in LTE, besides improving a UE’s signal strength or quality.
2.3.12.2  2D‐Beamforming
Beamforming (BF) algorithm can make wave to any direction and shape by changing 
amplitude and phase. BF principle is based on channel reciprocity, for TDD system, uplink 
and downlink has similar channel response and similar covariance matrices.6
	
H
H
R
R
R
H H
DL
UL
DL
UL
H
	
Normally, HUL is estimated by eNB based on sounding reference signal (SRS transmits 
­periodically), which is used to determine the precoding, for example, grid of beams or 
Eigenvalue‐based beamforming, evaluating the required periodicity and calculate DL weights.
There are many possible ways of choosing the beamforming vector. Two different algorithms 
for estimating the precoding are usually used, the simpler grid of beams (GoB) algorithm, and 
the more complex eigenvalue based beamforming (EBB). The GoB‐based method calculates 
the DL beamforming weights based on the angle of arrival information. The EBB‐based algo-
rithm calculates the DL beamforming weights based on the SVD decomposition of the spatial 
channel matrix. GoB based method is effective/efficient in small angle spread (AS) while 
­considered less effective in large AS cases. EBB based methods can work in large AS cases.
For FDD system, although uplink and downlink channels on separate frequencies experience 
independent fading, they should have similar spatial characteristics. Using UL spatial correlation 
matrix to derive the DL precoder matrix would result in a 5% to 10% loss in average user 
throughput and a 4% to 50% loss in cell‐edge user throughput compared to using closed‐loop 
feedback to derive the precoder matrix.
In a TDD system with Na receiver and transmitter antennas, let the transmitted signal 
from a user with a single transmit antenna at subcarrier k of Nsc subcarriers be denoted 
X(k). Then, the received signal can be written as Y k
H k X k
D k
( )
( ) ( )
( ), where Y k
( )
[
]
( ),
( ),
,
( )
Y k Y k
Y
k
N
T
a
1
2

 is the received signal at the eNB, H k
H k H
k
H
k
N
T
a
( )
[
( ),
( ),
,
( )]
1
2

 is the 
uplink spatial channel vector, and D k
D k D k
D
k
N
T
a
( )
( ),
( ),
,
( )
[
]
1
2

 is the interference and noise at 
the eNB receiver antennas. In the receiver, an estimate H
k
est( ) of the channel ­vector H k
( ) is calculated 
from the user’s reference signals. The precoding vector w k
w k w k
w
k
N
T
a
( )
[
( ),
( ),
,
( )]
1
2

 is then 
6  If the delay is within the channel coherence time, it will approximately hold.
Ideal weights differ
in gain and phase
across ports
t
t
W
W
v
Ideal weights have
same gain on all ports
only phase changes
v
ϕ
Figure 2.71  Correlated (left) and 
decorrelated antennas (right).
www.ebook3000.com

LTE Optimization Engineering Handbook
102
­chosen using this estimated channel vector H
k
est
. It can be seen that the gain from the beam-
forming is related to the factor g
H k w k
( )
( )
*
.
While 3GPP Rel 8 of the LTE specification defines transmission mode (TM) 7 for beamforming 
with one layer, Rel 9 defines transmission mode (TM) 8, to support dual‐stream beamforming, 
in which two different and independently coded data streams are separately transmitted from 
two logical antenna ports, combines beamforming with 2x2 MIMO spatial multiplexing capabilities. 
This feature implemented for TDD only, can result in improvements in coverage and capacity. 
Either of the two data streams is generated by four or eight antennas in beamforming transmission 
mode. The two data streams both form directional beams toward the target UE, which increases 
SINR. Dual‐stream beamforming incorporates both spatial multiplexing and beamforming 
during downlink transmission. This helps provide spatial multiplexing gains, diversity gains, 
and array gains (Figure 2.72).
TM8 is a mode where data is transmitted over two spatial layers as two independent beamformed 
streams. It has the similar covariance matrices as one layer beamforming:
	
RDL ≈ RUL(R = HHH)
H Hermitian operator matrix transposition conjugate complex	
In general, TM8 is expected to have higher throughput at cell edge, slightly better or similar 
throughput as TM3 in medium points, lower throughput in good points.
Assuming the channel vectors at PRB i estimated from SRS from two polarization antenna 
elements groups are described by hi,1 and hi,2 respectively, then the instantaneous spatial 
­channel covariance at current sub‐frame n is computed by averaging over two polarization 
antenna elements groups over all the used PRBs.
	
R
h
h
h
h
inst
i
i
i
H
i
i
H
n
,
,
,
,
1
1
2
2
	
The long‐term BF covariance matrices (weight) averaging over time by a recursive filter of 
first order, if long term BF covariance matrices is used, it can get better performance in channel 
models with low AS (dominant eigenvector).
	
R
n
R
n
R
n
ave
ave
inst
1
1
	
where α is forgetting factor, which is inverse proportional to the settling time of filter.
As stated above, the performance of beamforming strongly depends on the instantaneous 
channel information. If the channel condition of an UE varies frequently, then measurement 
results or reported results on the channel condition do not exactly reflect the current channel 
2
3
4
7
8
w2
w3
w4
w5
w6
w7
w8
1
w1
5
u1
u2
u3
u4
w1
w2
CW1
Long term weight
Long term weight
Short term weight
6
2
3
4
6
7
8
w2
w3
w4
w5
w6
w7
w8
1
w1
5
u1
u2
u3
u4
w11
w12
w21
w22
CW1
CW2
Short term weight
λ/2
λ/2
Figure 2.72  Single‐stream (left) and dual‐stream (right) beamforming.

LTE Optimization and Principle and Method
103
condition in time, thus the dual‐stream beamforming’s performance will decrease. It is also 
worth to mention that often TM8 Port7/8 beamforming gain imbalance had been observed in 
the field test as shown in Table 2.37.
The key in beamforming is to generate the weighting vectors. There are two classes of DL 
beamforming schemes, cell‐specific DL broadcasting beamforming for cell‐specific channel 
and UE‐adaptive DL beamforming for PDSCH.
There are different algorithms for calculating the optimum UE‐adaptive DL beamforming 
weightings. For example, it is possible to determine from the direction of the received uplink 
signal (DoA or AoA) if the angular spread is small, or from the uplink sounding reference 
­signals channel estimation to calculate the beamforming weightings. Beamforming weight 
­calculation by channel estimation is described below (Figure 2.73):
●
●step 1: collect snapshots of instantaneous H (data matrix)
●
●step 2: determine covariance matrix: R = HHH, the format is M x M = 8 x 8, which depends 
on UE, subcarrier and TTI
●
●step 3: averaging of R → Rav, over frequency (over 4 most recently sounded PRBs) and over 
time (over past SRS receptions (IIR or FIR approach))
●
●step 4: eigenvalue decomposition (EVD): Rav = V Λ VH, Λ is diagonal matrix with eigenvalues, 
decreasing absolute value => 1. eigenvalue is dominant, V and VH are orthogonal eigenmatrices 
(M x M)
,
k ∈ {f with SRS}
Hk
HHk
4
1
Rav,f =
FIR
Rav,f(k)
Lk=t–5(L+1)
1
IIR
(1−α)Rav,t(t−5)+αRav,f(t)
Rav,t(t) =
t
time (TTI)
Frequency (PRB)
D
S
U
D
D
D
S
U
D
D
D
S
U
D
D
t
t + 5
t + 10
SRS periodicity
SRS 
hopping
Figure 2.73  Averaging of R.
No
RSRP
SINR
CQI0
CQI1
MCS CW0
MCS CW1
1
–56.95
23.01
13.78
14.66
25.17
25.19
2
–81.07
14.46
8.82
5.64
19.12
10.21
3
–75.57
14.70
11.75
6.25
20.69
11.65
4
–99.23
9.01
6.62
7.62
12.78
16.63
5
–94.81
10.88
7.23
9.73
14.04
19.30
6
–103.51
10.00
5.52
8.75
11.58
17.72
7
–91.28
5.44
4.81
6.74
6.99
9.90
8
–95.44
0.23
3.65
4.50
4.61
7.37
TM8 Port7/8 BF
gain imbalance
Table 2.37  TM8 Port7/8 beamforming gain imbalance.
www.ebook3000.com

LTE Optimization Engineering Handbook
104
●
●step 5: determine dominant eigenvector e1, corresponds to max eigenvalue => e1 = v1 = first 
column of VH, e1 is the optimum BF vector w (maximizes “ergodic capacity” C, “averaging” 
over all possible channels H, cuboid!)
	
C = maxE{log det(I
w
R w}
w/ w
1
2
H
●
●step 6: use dominant eigenvector for DL BF: w = e1
●
●implementation: step 4 and 5 merged by very fast “power method” => e1 directly
2.3.12.3  2D MIMO and Parameters
This part is foucused on spatial multiplexing of 2D MIMO. Spatial multiplexing allows a radio 
link composed of M transmit and N receive antennas (MxN) to exchange up to N independent 
data streams (codewords). Number of codewords is decided based on transmission mode, RI 
sent from UE, and so on. For UEs with low SINR beamforming should be used and for high 
SINR UEs spatial multiplexing should be used (Figure 2.74).
For a spatial multiplexing system the corresponding generalization of the classic Shannon 
formula reads as:
	
C
SNR
SNR
SNRk
log
log
log
2
1
2
2
2
1
1
1
	
where SNRk = Sk/N now denotes the SNR of the kth information stream, k = min(n,m).
Each MIMO mode can be switched to transmit diversity mode (TM2), and TM3 through 
TM9. Before pushing to MIMO parameters, a few basic concepts should be reviewed.
Codeword (CW) is a transport block that has been processed by the physical layer in terms 
of CRC addition, channel coding, and rate matching. When two codewords are transferred, 
they do not need to be of equal size. CQI reporting, link adaptation, and HARQ run indepen-
dently for each codeword. LTE supports simultaneous transmission resources in the same 
block by two relatively independent codeword, which is by spatial multiplexing (SM) technol-
ogy to achieve.
Each set of data sent through the antennas in a spatial multiplexing operation is called a layer. 
Layer mapping is needed for MIMO that maps the modulated symbols belonging to either one 
or two codewords onto a number of “layers” where the number of layers are less than or equal 
to the number of antenna ports, and a channel matrix rank is corresponding.
PMI, the signal is “pre‐coded” (i.e., multiplied with a precoding matrix) at eNB side before 
transmission, optimum precoding matrix is selected from predefined “codebook” known at 
eNB and UE side.
Rank, equivalent to the total number of layer. Rank indicator (RI), the number of layers that 
can be supported under the current channel conditions and modulation scheme. RI indicates 
M Tx
N Rx
V
H
RI
H = UΣVH
UH
Select
# code
words
Modulation
+ coding
PMI
CQI
Modulation
+ coding
Demod
Demod
precoding
Layer
mapping
Figure 2.74  Spatial multiplexing procedure.

LTE Optimization and Principle and Method
105
the number of freedom degrees measured by the UE, which represents the maximum capacity 
of the Tx/Rx channel in terms of independent streams.
Antenna port, it is not equal to the number of antennas, but rather a different channel 
­estimation reference signal pattern. For ports 0 to 3, corresponding to RS transmission pattern 
of the multi‐antenna; for Port 4, corresponding to the PMCH, MBSFN case of RS; for port 5, 
corresponding to the UE Special RS.
MIMO thoughput gains depend on above factors. In reality, maximizing rich scattering 
conditions within a cell, configuring the eNB to properly match MIMO parameters settings to 
real‐world conditions, and ensuring that UEs can take full advantage of the multipath condi-
tions. Selection of the correct SU‐MIMO mode depends on factors such as mobility, CQI, and 
channel correlation (Rank). MIMO optimization process requires accurate measurement of 
these multipath conditions in order to achieve the best performance for a given environment 
while avoiding the time and expense of guesswork. Finally, the legacy 2D MIMO parameters 
are listed in Table 2.38.
In a live network, SU‐MIMO optimization is the primary focus of operators attempting to 
maximize throughput gains. eNB make MIMO decision mainly based on UE report RI that 
decided by RS SINR and radio environment (the lower channel correlation the better). For low 
SINR, the two codewords is not easy to distinguish even with the lower channel correlation, if 
SINR > 12dB, the two codewords is easier to use MIMO, sometimes if the channel correlation 
is high, SM mode doesn’t increase throughput even with high SINR. From the test data, it is 
found rank1 CQI reflects the DL SINR fairly well, rank2 CQI have a heavy dependency over 
channel correlations. Higher correlated channel yield much smaller chances of rank2 reports, 
and the values are much lower. From Figure 2.75, it can be seen that the proportion of sched-
uled dual streams and the number of RI=2 are approximate linear relationship, i.e. the more 
probability of the reported RI=2, more dual streams will be scheduled. In addition, CQI and the 
dual streams scheduled are also approximately proportional relationship in a live network.
2.3.12.4  Massive‐MIMO
Many operators are quite interested in high‐rise building coverage, but legacy 2D beamforming 
only allowed controlling the beam pointing in azimuth direction. Massive MIMO techniques is 
introduced that exploit both the azimuth and elevation dimensions that are characterized by 
focusing the transmit power radiated to a user in the cellular system based on digital beam-
forming methods such that the peak of a resulting beam can be dynamically controlled in 
­azimuth as well as in elevation direction, so massive MIMO can significantly improve user data 
Table 2.38  Legacy 2D MIMO parameters.
Parameter
Range
Default
CQI threshold for fallback to closed Loop MIMO 1 CW Mode
0…16, step 0.1
11
CQI threshold for activation of closed loop MIMO 2 CW Mode
0…16, step 0.1
13
Rank threshold for fallback to closed loop MIMO 1 CW Mode
1…2, step 0.05
1.4
Rank threshold for activation of closed loop MIMO 2 CW Mode
1…2, step 0.05
1.6
CQI threshold for fallback to MIMO diversity
0…16, step 0.1
9
CQI threshold for Activation of open loop MIMO SM
0…16, step 0.1
11
Rank threshold for fallback to MIMO diversity
1…2, step 0.05
1.4
Rank threshold for Activation of open loop MIMO SM
1…2, step 0.05
1.6
www.ebook3000.com

LTE Optimization Engineering Handbook
106
5
0
10
15
20
25
30
–4
–2
0
2
4
6
8
10
SM Throughput (Mbps)
For low SNRs, TX Diversity gives
slightly better throughput than SM,
since the power from both eNB TX
antenna is aggregated to decode one
code word. This is in line with
theoretical simulations
Although the two cases are static TX
diversity and SM, switching point could
be around this area for dynamic
adaptation of MIMO
TxDiv Throughput (Mbps)
12
14
16
SINR (dB)
18
20
22
24
26
RI = 2 reported ratio
RI= 2 scheduled ratio
100.00%
80.00%
60.00%
40.00%
20.00%
0.00%
RI = 2 scheduled ratio
100.00%
90.00%
80.00%
70.00%
60.00%
50.00%
40.00%
0.00%
5
7
9
11
13
CQI
30.00%
20.00%
10.00%
1
1.1
1.2
1.3
1.4
1.5
1.6
1.7
1.8
1.9
2
–10
0
10
20
30
Average Reported Rank
DL SINR (dB)
No correlation
Med correlation
High correlation
Figure 2.75  MIMO ratio versus RI and CQI.

LTE Optimization and Principle and Method
107
rate in a high‐rise scenario. Massive MIMO deployed high‐gain adaptive beamforming and 
high‐order spatial‐multiplexing with a large‐scale array. The antenna type to be used is ­typically 
a planar antenna array consisting of multiple cross‐polarized antenna elements arranged in a 
rectangular two‐dimensional grid. From 3GPP perspective, DMRS and/or CSI‐RS should 
support more than eight antenna ports, for example, 32 or 64 or even more antennas/ports, 
beamforming main lobe sharpens as number of antenna elements increases. Massive MIMO, 
many subelements are controllable from baseband (Figure 2.76).
Massive MIMO needs acquiring channel state information at the eNB for downlink MU‐
MIMO, also needs efficient signaling for multiplexing large numbers of UEs. TDD is often 
viewed as an easier problem than FDD as it leverages DL/UL reciprocity; for FDD, a codebook 
feedback solution may have difficulty that large number of antenna elements require large 
codebook size, which will result extremely high UE codebook search complexity. The UE needs 
receive CSI‐RS and computes azimuth and elevation PMI. User‐specific beams now formed in 
elevation domain to provide optimal throughput at all levels of the building.
2.3.13  Power Control
Power control and proper power configuration will reduce inter‐cell interference and power 
consumption. This leads to higher cell capacity and the control of the maximum data rate for 
UE at cell edge and limit the interference that cell‐edge users create to the neigboring cells. In 
addition, it helps to prolong the battery life of the UE. In LTE, fractional power control (FPC) 
is introduced to allow a more flexible trade‐off between spectral efficiency and cell‐edge rates.
2.3.13.1  PUSCH/PUCCH Power Control
The basic power control of PUSCH aspects are open‐loop power control with slow aperiodic 
closed loop correction factor, it is based on fractional pathloss power control. With fractional 
pathloss power control, it will be easier to set power control parameters that will enable higher 
UL peak rate in the cell without sacrificing cell‐edge performance. It enables a trade‐off between 
maximized UL cell edge bitrates versus improving the overall UL cell capacity. The formula of 
PUSCH power control is:
	
P
i
min P
log
M
i
P
PL
TF i
PUSCH
MAX
PUSCH
PUSCH
TF
,
.
.
_
10
10
0
f i
	
where
PMAX is the maximum allowed power that depends on the UE power class.
MPUSCH(i) is the bandwidth factor, expressed in number of resource blocks taken from the 
resource allocation valid for uplink subframe i.
P0_PUSCH is a parameter obtained as a sum of a cell‐specific nominal component p0Nominal-
PUSCH signaled from higher layers and a UE‐specific component p0UePUSCH. P0_PUSCH is the basic 
starting point of open loop power control.
α is partial pathloss compensation factor, a cell‐specific parameter signaled from higher 
layers in order to support fractional power control. α=1 corresponds to classic UL power 
control, that is, full pathloss compensation. PL is the downlink path loss estimate calculated 
in the UE.
ΔTF(TF(i)) denotes the power offset depending on PUSCH transport format TF(i).
f(i) is PUSCH close loop power control adjustment derived from TPC command in subframe 
i‐4. Both accumulated and non‐accumulated power control rules are used.
Compared with PUSCH’s fractional pathloss power control, PUCCH only uses a complete 
pathloss power control mechanism. The PUCCH power control procedure is used to guaran-
tee the required error rate; it aims at achieving a target SIR the value of which guarantees the 
www.ebook3000.com

Highrise
Antenna
Ports
DMRS
or
Data
CSI-RS
Wprec
Wvirt
Wfeed
Virtual
Antennas
Physical
Antenna
Connectors
Physical
Antenna
Sub -elements
Reference - or
data signals
Precoder
Unrestricted
Virtualization
(per RE)
Constrained
Virtualization
Antenna
Array
RX
RX
RX
TX
Broadened
elevation sector
beam.
Site
23 m
63 m
250
200
150
100
50
0
0
100
200
300
Number of antennas
Average sum rate (Mbps/cell)
Matched filter
Zero-forcing
Interference free
400
500
80 m
2nd floor
8th floor
13th floor
21st floor
6
User specific
beams
Figure 2.76  Massive‐MIMO principle.

LTE Optimization and Principle and Method
109
required error rate. Higher settings of this parameter will improve PUCCH reception, but will 
also drive higher UE TX power leading to interference to neighboring cells, and vice versa.
PPUCCH(i) = min{ PCMAX, P0_nominal_PUCCH+Pathloss+h (nCQI,nHARQ)+∆F_PUCCH(F)+g(i)
(UE speciﬁc parameter)
Unlike PUSCH, the PUCCH power control is based on SINR instead of power spectral den-
sity (PSD) as there is no link adaptation on PUCCH; fixed MCS is used over PUCCH. The 
UE‐received PUCCH SINR will be compared with the target PUCCH SINR and TPC values 
will be generated based on the difference between the two values. The target PUCCH SINR 
default value will be estimated based on the minimum required by the received SINR in order 
to achieve a certain erasure or BER performance.
eNB sets a semi‐static nominal power P0 for all UEs in the cells first (P0_PUSCH for PUSCH 
and P0_PUCCH for PUCCH) and broadcast it to all UEs by SIB2 (UplinkPowerControlCommon: 
p0NominalPUSCH, p0NominalPUCCH). P0_PUSCH values range is (−126 to 24) dBm. Each UE has a 
UE‐specific nominal offset power (P0_UE_PUSCH for PUSCH and P0_UE_PUCCH for PUCCH), 
which is sent to UE by dedicated RRC signal (UplinkPowerControlDedicated: P0_UE_PUSCH, 
P0_UE_PUCCH). It is worth to note that P0_PUSCH is different for semi‐persistent grant and 
dynamic scheduled grant (SPS‐ConfigUL: p0NominalPUSCH‐Persistent). Table 2.39 gives the main 
parameters of power control.
Figure 2.77 shows two set of p0NorminalPusch (−106dBm versus −96dBm) comparation. When 
p0NorminalPusch is set to −106dBm, uplink throughput reduces by approximately 2Mbps in good 
RF conditions as lower uplink received power target leads to lower UL_SINR and further leading 
to lower MCS assignment by link adaptation. With −106dBm, uplink received power target is 
lower by 10dB. Hence, this leads to a much lower uplink Tx_power.
2.3.13.2  PRACH Power Control
Open‐loop power control is applied for initial transmission of RACH. The transmit power is 
determined taking into account the total UL interference level and the required SINR operating 
point, which can be determined at the UE as:
	
P
P
PL
P
N
CMAX
PREAMBLE
PREAMBLE
PREAMBLE
RACH msg
_
_
min
,
1
0
1
RAMP UP
_
	
Table 2.39  The related parameters of power control.
Parameter
Description
Range
Default
P0UEPucch
Power offset for UE PUCCH TX power calculation
−8…7 dB, step 1 dB
0 dB
P0UEPusch
Power offset for UE PUSCH TX power calculation
−8…7 dB, step 1 dB
0 dB
P0NomPucch
Nominal power for UE PUCCH TX power calculation
−127…‐96 dB, step 1 dB −96 dB
P0NomPusch
Nominal power for UE PUSCH TX power calculation
−127…‐96 dB, step 1 dB −100 dB
srsPwrOffset
Power Offset For SRS Transmission Power Calculation
0…15, step 1
7
α
α, Indicates the compensation factor for path loss.
α0 (0), α0.4 (1), α0.5 (2), 
α 0.6 (3), α 0.7 (4), α 0.8 
(5), α 0.9 (6), α 1 (7)
α 1 (7)
www.ebook3000.com

LTE Optimization Engineering Handbook
110
P0‐PREAMBLE is the preamble received power set point determined at the eNB. This parameter 
is calculated from the target SINR operating point, and the UL interference‐plus‐noise (IN) 
power in the PRACH resource.
	
P
SINR
IN
M
in
PREAMBLE
T
et
0_
arg
arg
	
ΔPREAMBLE is the power offset value dependent on PRACH preamble format, which is given 
by  prach‐ConfigIndex. The preamble format–based power offset values are presented in 
Table 2.40.
According to the estimated received power of RACH preamble, the eNB is able to know the 
SNR condition of the UE initialized the random access. Thus it will assign a certain power to 
the UE so that it can send message 3 with reasonable power to enable it to receive the message 
3 correctly so that in most cases UE will not have to restart a new random access due to the 
failure of message 3 transmission.
–106dBm
Good
0
5
10
Mbps
dBm
15
20
25
0
–5
5
10
15
20
25
Throughput
UL Tx Power
Medium
Poor
Medium
Poor
–96dBm
–106dBm
–96dBm
Good
Figure 2.77  Two set of p0NorminalPusch (–106dBm versus –96dBm) comparation.
Table 2.40  ΔPREAMBLE value.
Preamble format
DELTA_PREAMBLE value
0
0 dB
1
0 dB
2
−3 dB
3
−3 dB
4
8 dB

LTE Optimization and Principle and Method
111
	
MSG
TxPower
log
Mpusch
Last Preamble Power
deltaPrema
3
10
10
 
*
bleMsg
PC
msg
3
2
_
	
PC_msg2 is determined in the range of −6 to 8 dB (eight values) based on the preamble detection 
performance.
So, the power control algorithm during the whole UE RACH procedure is shown in 
Figure 2.78.
2.3.14  Antenna Adjustment
Besides antenna azimuths and tilting, antenna placement also has big impact on other cell 
interference in real environment. A poor site design can have a significant impact upon the 
performance of a potentially good site. Site design involves identifying an appropriate location 
for each antenna and the eNB cabinet. When there is a requirement to achieve a specific isola-
tion from another radio system then that isolation is easier to achieve if the antennas are sepa-
rated vertically rather than horizontally. The most important requirement is that antennas 
should be mounted such that their main beams are not obstructed. This should include both 
the horizontal and vertical half power beamwdiths, that is, the beamwidths at which the 
antenna gain has decreased by 3 dB. In the case of a roof‐top site, obstructions could be other 
antennas or cabins located on the same or a neighboring roof. In the case of mast or pole 
NAS Setup + Authentication
RACH preamble
PO_Pre
PO_Pre
PO_Pre
PO_Pre + ∆msg3
PO_Pre + ∆msg3
PO_Pre + ∆msg3
P0_nominal_PUSCH
x
x
x
(δmsg2)
y
UE
eNB
Tx power to meet the
target Rx power
+∆Ramp
+N∆Ramp
+N∆Ramp+ δmsg2
+N∆Ramp+ δmsg2
+N∆Ramp+ δmsg2
Target Rx power
RAR
RACH preamble
RACH preamble
RRC Connection Req
RRC Connection Setup
y
RRC Connection Req
y
RRC Connection Req
RRC Connection Setup complete (+NAS setup)
RRC Connection Reconfiguration
Closed loop power
control with
accumulation
Figure 2.78  Power control algorithm.
www.ebook3000.com

LTE Optimization Engineering Handbook
112
mounted antennas, obstructions could be trees or nearby buildings. Figure  2.79 illustrates 
examples of poor and good roof‐top antenna positions.
2.3.14.1  Antenna Position
In the example of the poor antanna installation position, the antenna is located behind and 
slightly higher than some existing antennas. In this case the main beam of the antenna is 
obstructed and its performance is likely to be deteriorated. In the example of the good position, 
the antenna is located in front of and slightly lower than some existing antennas. In this case the 
main beam of the antenna is not obstructed, although care should be taken that the rear lobe of 
the antenna does not cause interference to the other radio systems. There is also a requirement 
to ensure that the edge of the roof‐top does not cause shadowing of the antenna. If an antenna 
is positioned on the edge of a roof‐top then it is unlikely to incur any shadowing from the roof‐
top itself. However, as the antenna position is moved away from the edge then the antenna is 
more likely to incur shadowing. Antennas that are located away from the edge should be 
mounted with an increased height. A general rule is that if you can walk in front of the antenna 
then it should be mounted 3 m above the roof‐top. Figure 2.80 illustrates the principle of shad-
owing from a roof‐top and suggests a range of heights that could be used to avoid shadowing.
In most cases an antenna would be mounted less than 10 m from the edge of the building 
and its suggested height would be obtained by dividing the distance to the edge by two. 
Wherever possible, antenna mountings should allow the height and azimuth of the antenna 
to be adjusted.
In the case of antennas mounted on walls then the azimuth should be configured to ensure 
that the horizontal beamwidth of the antenna is not compromised. In general, a 15‐degree 
safety margin should be added to each side of the half‐power horizontal beamwidth and then 
a check made to ensure that the composite beamwidth is free from obstruction. Figure 2.81 
illustrates the principle of avoiding shadowing from the walls upon which antennas are 
mounted.
Clearance angle
General rule
d
h
d < 10m
h > d/2
h > d/3
h > d/4
10 < d < 20 m
d > 20m
Figure 2.80  Principle of avoiding shadowing from a roof‐top.
Poor Position
Good Position
Main beam
is not
obstructed
Figure 2.79  Examples of poor and good roof‐top antenna locations.

LTE Optimization and Principle and Method
113
When there are other antennas on the same mast, the same roof‐top or the same wall, 
then the isolation from those antennas should be maximized without compromising the 
position of the LTE antennas. The isolation requirement will depend upon the systems to 
which the antennas belong. The isolation requirement can be translated into a physical 
separation using curves that plot the measured isolation as a function of physical separa-
tion. These curves depend upon the gain patterns of the antennas being used and whether 
or not the antennas are cross‐polar. As an example, the LTE system requires 40 dB of isola-
tion from the UMTS system. If the antennas have a vertical separation then there should be 
at least 0.2 m between the base of one antenna and the top of the other antenna. If the 
antennas have a horizontal physical separation and a horizontal beamwidth of 65° then 
there should be at least 0.5 m between them.
Whenever possible, a vertical separation should be combined with a horizontal separation to 
increase the achieved isolation. In cases where these separations cannot be achieved, then the 
isolation requirement should be solved in other ways.
Alternatively, the isolation requirement can be achieved using a diplexor and allowing the 
two radio systems to share the same feeders. A diplexor typically offers 40 dB of isolation. Radio 
systems may also share the same antennas. In general, this has the drawback of restricting both 
radio systems to using the same antenna downtilts; that is, downtilts cannot be configured 
separately for each system. Antennas that have remotely controllable tilts are generally more 
expensive, but tilt changes can be made with relative ease.
2.3.14.2  Remote Electrical Tilt
Antenna tilting is a very powerful method to control network capacity and performance opti-
mization. With the tilt, it directs irradiation further down (or higher), concentrating the energy 
in the new desired direction. The remote electrical tilt (RET) function enables the operator to 
control and optimize the coverage area by modifying the inclination of installed antennas, 
without the need for climbing masts. The RET provides electrical tilt for tuning and optimizing 
the network by adjusting the vertical lobe‐angle (adjusting the phase‐shifter on the antenna) of 
the antenna.
The RET unit can be mounted on any antenna with tilting capability, regardless of height, 
gain, or band. The RET unit communicates over an interface by the open specifications defined 
Direction of
main beam
Half power
beam width
15° safety
margin
Good Position
Poor Position
Direction of
main beam
15° safety
margin
Figure 2.81  Principle of avoiding 
shadowing from walls.
www.ebook3000.com

LTE Optimization Engineering Handbook
114
by the antenna interface standards group (AISG) to ensure basic interoperability of antennas 
and to control infrastructure (Figure 2.82).
Antenna tilt is defined as the angle of the main beam of the antenna below the horizontal 
plane. Positive and negative angles are also referred to as downtilt and up‐tilt respectively. 
Antenna downtilt can be adjusted mechanically or electrically. Electrical tilt is realized by wire 
iRET Tilt indicator - reading a
value of 4° (+/– 1°)
AuPort
TMA
Rx
RfPort
RfBranch
RfBranch
TmaSubunit
Tx/Rx & DC
RET
RetSubunit
RBS
Electrical Tilt
Indicators
Manual
Adjustment Knobs
Single Band
Dual Band
Triple Band
Figure 2.82  Remote electrical tilt.

LTE Optimization and Principle and Method
115
feed phase shifting. This phase shifting is realized by modification of feed cable length in 
antenna factory. In electrical downtilt, phases of antenna elements are adjusted so that desired 
tilt angle is achieved by tilting main, side, and back lobes uniformly contrary to mechanical 
downtilt. The total tilt is the inclination of the maximum of the antenna’s main beam with 
respect to the horizontal plane. The performances of vertical sectorization depend on antenna 
tilt, vertical beam width, and front‐to‐back ratio, and so on (Figure 2.83). Downtilt calculation: 
Downtilt=arctan(h/D)+ (Beamwidth/2).
The optimal amount of tilt is a trade‐off between coverage and interference reduction, it 
depends on the real‐time traffic situation with a varying degree of user clustering or hotspots. 
In a realistic network, the traffic characteristics are dynamically changing and the optimum tilt 
to the current traffic conditions, which referred to as automatic tilt control. It is possible to 
pre‐define tilt settings for different times of the day (such as rush hour, midday, evening, night) 
and different times of the week based on historic data (Figure 2.84).
The antenna effects are combined as a sum of antenna gain, horizontal pattern, and elevation 
pattern. The sum of horizontal and vertical patterns is limited for a common front‐to‐back 
attenuation Am and SLAv. The antenna gain of horizontal and vertical radiation patterns are 
shown below:
	
A
A
A
dB
A
dB
m
m
dB
min
,
,
min
12
25
12
3
3
,
,
min{
,
SLA
SLA
dB
A
A
A
A
v
v
H
V
m
20
,
	
Assume that the antenna vertical (3dB) beamwidth is 120 and antenna height is 30m. The 
relation of downtilt and Dmin, Dmax is shown in Table 2.41.
The algorithm for tilt control is based on relative load between different cells covering 
the same area/cluster. First, find Max load and Min load in the cluster, then if the Max load 
minus Min load is greater than a predefined margin, find downtilt for sector with Max load 
and do up‐tilt for the sector with Min load. The load for cell number m is defined as:  
Lm = Im/N + Im, Where Im is the total interference experienced and N is thermal noise.
Mechanical downtilt, the pattern in the front goes down,
and behind goes up.
Electrical 
Tilt
Mechanical
Tilt
Total Tilt
Antenna Axis
+
Mechanical
Tilt
Figure 2.83  Mechanical downtilt, electrical tilt, and total downtilt.
www.ebook3000.com

LTE Optimization Engineering Handbook
116
Vertical Beamwidth
Antenna
Height
Dmin (m)
Dmax (m)
0°
Downtilt
Angle θ
Side
Lobe
3dB
Beamwidth
Main Lobe
Usable
Signal
Area
Shadow
Area
Dmax
Rapidly
Decreasing
Signal
Strength
Region
h
Figure 2.84  Downtilt calculation.
Table 2.41  The relation of downtilt and Dmin, Dmax.
Downtilt (°)
Dmin (m)
Dmax (m)
Downtilt (°)
Dmin (m)
Dmax (m)
0
285
infinite
10
105
429
1
244
infinite
11
98
343
2
213
infinite
12
92
285
3
189
infinite
13
87
244
4
170
infinite
14
82
213
5
154
infinite
15
78
189
6
141
infinite
16
74
170
7
130
1719
17
71
154
8
120
859
18
67
141
9
112
572
19
64
130

LTE Optimization and Principle and Method
117
2.3.14.3  Antenna Azimuths and Tilts Optimization
The antenna system plays an important role in mobile communications. Antenna height, tilts, 
and azimuths (to certain extent) are strong primary RF shaping factors. The performance of the 
entire network is affected by improper type, location, or configured parameters of the antenna 
system. Figure 2.85 gives an example of how reduced antenna height improved application 
coverage.
The antenna tilt is mainly affected by the coverage radius of the cell and the average SINR 
value in the coverage area, and the optimization of the tilt must take into account the balance 
between RF coverage and SINR. Figure 2.86 is the driving test results of the impact of the tilt 
on the SINR value.
Usually in the tilt adjustment will encounter the following three typical scenarios: uplink 
coverage limited, overshooting, and coverage holes, and so on.
Uplink coverage limited: When a cell is in a continuous coverage zone, due to the large tilt, worse 
propagation conditions or big penetration loss, and so on, the terminals may encounter rdaio 
link failure, although RSRP is still higher, it is not able to make the handover. This situation may 
be uplink coverage limited, which can be considered to reduce the tilt to improve coverage.
0
0
10
20
30
40
Tilt
20
40
60
80 Height (m)
45% cells
with <40m
35% cells
with >40 m, >15°
High antenna (>40m) gives
35% calls CQI >10; 40%
user throughput >10Mbps
cells potentially serving
high rise Indoor Traffic
Low antenna (<40 m) gives
60% calls CQI >10; 80% 
user throughput >10Mbps
Figure 2.85  Antenna height versus tilt.
0
0
2
4
6
8
10
12
14
16
18
20
2
4
6
8
10
Antenna Downtilt, degrees
Average SINR
12
14
16
Figure 2.86  Average SINR versus tilt.
www.ebook3000.com

LTE Optimization Engineering Handbook
118
Overshooting: When a cell is in a continuous coverage zone, due to the small tilt, good propa-
gation conditions, and so on, overshooting will happen. When a cell has coverage beyond the 
intended coverage area, it leads to interference problems especially if the signal strength of 
the overshooting cell is high. This issue can be determined by observing the handover area. 
Usually the solution is to change the antenna configuration of the overshooting cell, for 
example, tilting down the antenna, redirecting the antenna orientation, or reducing the 
antenna height.
Coverage holes: The serving RSRP within this area is below the minimum required signal level 
(qRxLevMin) to set up and maintain LTE service. There are two causes for coverage holes: 
lack of signal power and high interference. The coverage holes may cause handover failure or 
session drop. At this time it should adjust tilts of the cells to make up the hole based on the 
location of coverage hole and the surrounding RF conditions.
2.3.14.4  VSWR Troubleshooting
VSWR stands for voltage standing wave ratio, it is a measure of how efficiently RF power is 
transmitted from a power source, through a transmission line, into a antenna. VSWR is the 
ratio of the peak amplitude to the minimum amplitude of a standing wave, calculated by the 
ratio of the highest voltage to the lowest voltage along the transmission line. This ratio is a 
function of the reflection coefficient, which in simple terms is just a measurement of power 
reflected from the antenna (Figure 2.87).
Voltage
Amplitude
Vmax
Vmin
Forward wave
Reflected wave
Detected standing wave
Composite wave
2
1.5
–1.5
–2
0
5
10
15
20
30
25
1
–1
0.5
Voltage (normalized)
0
–0.5
Reverse Power
Forward Power
Back to
Transmitter
To
Antenna
Transmission Line
Figure 2.87  VSWR concept.

LTE Optimization and Principle and Method
119
	
VSWR
V max
V min
/
	
Return loss (RL) is the loss of power in the signal returned/reflected by a discontinuity in a 
transmission line. It is usually expressed as a ratio in decibels (dB).
	
RL
P
P
i
r
dB
10
10
log
	
Where RL is the return loss in dB, Pi is the incident/forward power and Pr is the reflected/
reverse power. The relation between VSWR and RL is present as below:
Example: by substituting VSWR = 1.5 and RL/20 = X, it can get:
	
1 5
1
10
1 10
1 5
10
1
10
1
10
1
1 5 10
1
.
/
.
/
.
x
x
x
x
x
x
2 5
0 5 10
5
10
5
0 6989
20 0 6989
13 979
10
.
.
log
.
,
* .
.
~
x
x
X
RL
14
	
A high value enables detection of a low reflected power (high return loss). A low value 
requires a high reflected power (low return loss) to generate an alarm. The normal VSWR 
range is 1 to1.5. If current VSWR is more than a specified threshold, then eNB will generate 
relevant alarm.
The VSWR antenna supervision enables supervision of the feeder cables. Measurements are 
made on the reflected radio power, making it possible to detect breaks or loose connections in 
the cables connected to the radio unit. An alarm is raised if return loss is below the configured 
VSWR sensitivity value. It is possible to activate VSWR antenna supervision on all RF ports 
supporting measurements of reflected radio power in the radio unit. Supervision can be made 
on RF ports used for downlink transmitter branch where power is transmitted.
Possible causes of VSWR issues include improperly installed antenna, damaged or defective 
antenna hardware, damaged feeder cable or jumper cable (i.e., excessive bend radius), dirty or 
loose cable connection, improperly sealed/weatherproofed cable connection, water in the 
antenna of antenna feeder, and snow on the antenna, and so on.
www.ebook3000.com

LTE Optimization Engineering Handbook
120
2.3.15  Main Key Performance Indicators
It is necessary for the LTE to provide (periodically or on demand) a range of key performance 
indicators (KPI). The aim of KPI monitoring is in order to provide global information of net-
work behaviour, detect the different problems, analyzing and correlating them with the rest of 
statistics in order to fix problems encountered. These KPIs ensure adequate analysis of LTE 
performance in commercial operation environments. The operator‐associated target perfor-
mance guidelines and the resultant measured KPIs give a means to measure actual perfor-
mance against target performance. The KPIs will provide the ability monitor network 
performance at the user plane, control plane, and network level ensuring a full understanding 
on the overall LTE and eNB performance. These KPIs will enable the monitoring and subse-
quent troubleshooting of network performance, and will support performance analysis at the 
user plane, control plane, and network level. Take TDD_LTE, a 2300 MHz operation, or a 
20 MHz bandwidth system, for example, LTE RAN KPIs are proposed in Table 2.42.
Table 2.42  TDD_LTE RAN KPIs.
Recommended KPI
OSS based
Drive test  
based
Recommended  
KPI
OSS based
Drive test  
based
Session Setup Success 
Rate (%)
>= 99.3 %
>= 98.5 %
DL RLC 
Throughput (Mbps)
>= 23.2
‐
E‐RAB establishment 
successrate (%)
>= 99.4 %
>= 99.15 %
UL RLC 
Throughput (Mbps)
>= 9.2
‐
Minutes Per 
Abnormal Release (%)
>=55min/drop >= 45 min/drop
DL PDCP 
Throughput (Mbps)
>= 20
‐
Uplink User 
Throughput (Mbps)
>= 12
>= 15
UL PDCP 
Throughput (Mbps)
>= 8
‐
Downlink User 
Throughput (Mbps)
>= 30
>= 35
DL Application 
Throughput (Mbps)
>= 21
>= 24.5
Uplink Peak User 
Throughput (Mbps)
>= 30
>= 33
Latency Downlink (ms) <= 15
‐
Downlink Peak User 
Throughput (Mbps)
>= 65
>= 70
Packet Loss Rate ‐  
Uplink
<= 0.3%
‐
Latency ‐ Attach 
Time (ms)
<= 550
<= 650
Packet 
Loss Rate ‐ Downlink
<= 0.3%
‐
Latency Round Trip 
Time ‐TDD (ms)
‐
<= 45
Packet Jitter
‐
<= 5 ms
Latency control plane 
idle to active
‐
<= 375ms
Average CQI
>= 10
>= 11
Packet Loss Rate ‐ 
Round Trip (ms)
‐
<= 0.5 %
Handover Preparation 
Success Rate ‐ 
Intra LTE
>= 
99.89 %
‐
Handover Success 
Rate ‐ Intra LTE
>= 99.4 %
>‐= 98.0 %
Handover Execution 
Success Rate ‐ 
Intra LTE
>= 99.1 %
>‐= 98.0 %
Handover 
Interruption Time ‐  
User Plane
‐
<= 250 ms
Handover Interruption 
Time ‐ Control Plane
‐
<= 90 ms

LTE Optimization and Principle and Method
121
Performance monitoring and reporting are based on a complete set of counters and indicators 
and are performed at different levels (network level, MME level, cell level, etc.), for different 
time intervals (busy hour, daily, weekly, etc.) and with different level of details. Some generic 
reports will be executed daily or weekly at network to give a global view of the network, and 
some reports will be more focus on a specific monitoring domain and will be use at cell zone 
level for detailed monitoring and investigations when an issue has been encountered 
(Figure 2.88).
Figure 2.88 gives an overview of KPI analysis and LTE network tuning process. In the following 
part of the book, we will diccussed them more deeply.
Recommended KPI
OSS based
Drive test  
based
Recommended  
KPI
OSS based
Drive test  
based
Cell Availability (%)
>= 99.99 %
‐
Radireceived 
interference 
power PUSCH
<= ‐117 
dBm/PRB
‐
RRC Connection 
Success Rate (%)
>= 99.4 %
>= 99.2 %
Radio received 
interference 
power PUCCH
<= ‐117 
dBm/PRB
‐
S1 Establish Success 
Rate (%)
>= 99.1 %
‐
Voice Telephony ‐  
Jitter
‐
<= 6 ms
Added ERAB 
establishment 
success Rate
>= 99.4 %
‐
Voice Telephony(VT) ‐  
Packet Loss
<= 0.3 %
<= 0.4 %
PRACH Success Rate
>= 95.0 %
>= 92.0 %
VT ‐ Speech Quality
‐
>= 
4.1 [MOS]
DL PDSCH 
Throughput (Mbps)
>= 30
>= 35
VT ‐ Session Setup 
Success Rate
>= 99.0%
>= 98.7 %
UL PDSCH 
Throughput (Mbps)
>= 12
>= 15
VT ‐ Session 
Setup Time
<= 1.9 sec
<= 2.8 sec
DL MAC 
Throughput (Mbps)
>= 26.4
‐
Voice Telephony ‐ 
Speech Delay
‐
<= 80 ms
UL MAC 
Throughput (Mbps)
>= 10.5
‐
Voice Telephony ‐ Call 
Drop Rate)
<= 0.35 %
<= 0.8%
User data rate
Accessibility
Call drop rate
Handover succ rate
KPI
analysis
Site audit
Parameter
Optimization
PCI
optimization
Neighbor relation check
Tuning
Activity
Antenna tuning
Weak coverage
Overshoot
Pilot pollution
Found Issue
Abnormal coverage
No handover
Handover
failure
Coverage analysis
SINR analysis
Handover analysis
Fundamental
Analysis
Figure 2.88  KPI analysis and LTE network tuning process.
www.ebook3000.com

123
Part 2
Main Principles of LTE Optimization

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
125
3.1  ­Traffic Channel Coverage
The coverage of a functional network is given by the downlink (DL) and the uplink (UL) coverage. 
Coverage optimization is the key for LTE network optimization. The purpose is to highlight the 
domain serving cell and reduce the coverage overlapping. However, UL coverage will normally 
be the limiting factor. UL coverage limitation can result in radio link failures in case the RSRP 
levels are still good and do not trigger any intra or inter‐RAT handover. DL coverage can be 
decreased by antenna tilting. Caution should be used when using antenna tilt to decrease DL 
coverage since there needs to be a balance between UL and DL.
A cell located in an area of continuous LTE coverage that, because of, for example, actual 
propagation being better than assumed in planning or an error in setting the tilt value provides 
coverage farther than expected. It can be detected by looking at the average inter‐site distance 
calculated over the target cells for outgoing handovers or by looking into drive test or scanner 
results plot marked with serving cells IDs along with handovers. The coverage area should be 
reduced to a certain degree by downtilting.
The definitions of some coverage issues are listed below.
●
●Coverage holes definition: RSRP < −120dBm
●
●Weak coverage definition: RSRP < −105dBm
●
●Overshooting definition: Beyond the expected coverage, the victim cell’s RSRP is good, but 
RSRQ/SINR is poor as shown in Figure 3.1.
One of the highest costs in RAN optimization is coverage measurement and optimization. 
Traditionally, this requires intensive GPS‐based drive testing followed by offline analysis and 
correction. Today, the better solution uses data (e.g., measurement report) collected from real 
subscribers to create a finer granularity geographic distribution than is possible with cell level 
stats. This data is used to analyze the coverage and interference relationships in each area to 
provide new tilt values to optimize the balance between coverage and interference. Find out the 
cross‐boundary area and the weak coverage area and investigate if there is any RAN hardware 
issue, misconfigured parameters issues, RF issues, or eNB site location issues; the proposed 
LTE coverage optimization process is depicted in Figure 3.2.
The main method of the coverage optimization includes adjustment of the antenna azimuth, 
adjustment of the antenna downtilt, adjustment of the antenna height, adjustment of the location 
of the site, adding new sites or RRU for the poor coverage area, adjustment of the RS power, 
and so on.
3
Coverage Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
126
3.1.1  Parameters of Coverage
For LTE, most often the coverage is determined by UL link. The parameters impacting DL and 
UL coverage are shown in Table 3.1.
In DL, the eNB’s transmit power of all kinds of channels are influencing the cell range.
qRxLevMin, is the minimum DL required level of received RSRP in a cell, which is broad-
casted in SIB1, in object CellSelectionReselectionConf. The parameter services the same pur-
pose in LTE what parameter ACCMIN services in GSM, impacts the cell size in idle, for cell 
selection and re‐selection, and used in computation of selection criterion Srxlev. A very low 
–0
–10
–12
–14
–16
–18
–20
–22
–84
–80
–76
–72
–68
–64
–60
–56
–52
DL interference zone
RSRQ (dB)
RSRP (dBm)
Figure 3.1  DL interference estimator based on RSRQ.
Coverage test
preparation
Coverage test
result analysis
Coverage test
result analysis
Operational test
Coverage test
including drive test
or MR with GIS
distribution
Site location problem
Is the result
meet requirement?
Test report
HW problem
RF problem
Parameter problem
Yes
No
Figure 3.2  LTE coverage optimization process.

Coverage Optimization
127
value (more negative) of qRxLevMin will have more UEs connected to LTE network, but that 
will impact access success rate and paging success rate. A very high‐value (less negative) of 
qRxLevMin will result in less number of UEs connected to LTE network.
The UL cell coverage is defined as a target service that UE must satisfy at cell‐edge conditions. 
The cell coverage is independent of channel bandwidth and is strictly dependent of UE maximum 
Tx power.
For UL PUSCH coverage, different kinds of UL_SINR according to services are chosen to 
ensure that the target SINR at the cell edge does not go too low so as to cause problems with 
synchronization.
α factor is intended to allow partial compensation of the path loss, the value of this parameter 
represents a trade‐off between minimizing interference and maximizing throughput, its value 
must be set according to the client’s desired network behavior.
p0NominalPUSCH represents the necessary signal level per radio bearer (RB), and of the received 
signal for correct decoding, which is sent over BCH and not updated with interference. The 
parameter impacts UE power and interference, before any power control commands is being 
received from the eNB. Higher settings of the parameter will improve PUSCH reception, but 
will also drive higher UE Tx power leading to interference to neighboring cells, and vice versa.
Besides PDSCH/PUSCH coverage, it is necessary to study PDCCH coverage, since PDSCH 
may have beamforming gain to improve coverage, while PDCCH cannot be beamformed. That 
implies PDCCH cannot reach the same coverage as PDSCH in some scenarios. In this case, the 
SINR of the PDCCH could become negative, which requires a power boost to retain the desired 
BLER. Automatic boost of PDCCHs using CCE aggregation levels less than the maximum CCE 
aggregation level is an important feature in a live network (Figure 3.3).
Table 3.1  Main parameters impacting DL and UL coverage.
DL coverage
UL coverage
qRxLevMin
a factor
RS power
p0NominalPUSCH/p0NominalPUCCH
SCH power offset, PBCH power offset, PCFICH power offset, 
PHICH power offset, PDCCH power offset
Initial UL_SINR target for PUSCH
pboffsetPDSCH, pboffsetPDSCH
Max UL_SINR target for PUSCH
Cell DL total power
Min UL_SINR target for PUSCH
Cell coverage:
PDCCH
PDCCH with boost
PDSCH (beam forming)
1-CCE
2-CCE
4-CCE
8-CCE
Attenuate
Attenuate
Attenuate
Attenuate
Boost
Boost
Boost
Optional
boost
Cell center
Cell edge
CCE
aggregation
level
Selected
power
setting
Max boost level set
Figure 3.3  PDCCH boost.
www.ebook3000.com

LTE Optimization Engineering Handbook
128
3.1.2  Weak Coverage
3.1.2.1  DL Coverage Hole
Independent of the cause, coverage holes can be detected by looking at the inter‐RAT handover 
statistics per each adjacency. More specifically, in case of a hole, a number of terminals served 
by a set of neighboring LTE cells, will perform inter‐RAT handover toward the same set of 
3G/2G cells. Inter‐RAT handover statistics may detect DL coverage holes from various causes: 
worse than expected propagation, blocking by a building, and indoor penetration losses.
The factors affecting DL coverage include equivalent isotropic radiated power (EIRP), com-
bining loss, path loss (PL), frequency band, distance between a receive point and an eNB, sce-
narios (urban and suburban areas) and terrains (plains, mountains, and hills) of electric wave 
propagation, and antenna related parameters, and so on.
To resolving weak coverage problems, it can analyze the EIRP of each cell and ensure it can 
reach maximum values if possible, if so, increase RS power, adjust antenna, and deploy new 
eNBs if that cannot be resolved, even uses RRUs, indoor distribution systems to resolve indoor 
weak coverage.
3.1.2.2  UL Weak Coverage
Because of, for example, excessive downtilt, attenuation due to worse than expected propaga-
tion, or high indoor penetration, suffers from UL coverage limitation. UL coverage limitation 
can result in radio link failures, in case the RSRP levels are still good and do not trigger any sort 
of intra or inter‐RAT handover.
The eNB can use PHR (power headroom report) to determine how much more UL band-
width per subframe a UE is capable of using. The index reported by the UE to indicate the 
estimated how much transmission power left for a UE to use in addition to the power being 
used by current transmission. The power headroom reporting range is from −23 to +40 dB. If 
the power headroom value is (+), it indicates “I still have some space under the maximum 
power” implying “I can transmit more data if you allow.” If the power headroom value is (−), it 
indicates “I am already transmitting the power greater than what I am allowed to transmit.” 
PHR measurements are piggy backed with other RRC messages.
In a live network, the UE Tx_power range is usually between −15 dBm up to the maximum 
value of 23 dBm. The high concentration of samples for 23 dBm indicates that the coverage is 
not optimal at some parts of the area.
Normalized power headroom is an efficient way to estimate UL weak coverage, as UE may 
send to eNB the power headroom report at the moment of PUSCH transmission, which indi-
cates the distance between UE max Tx power versus the required Tx power of the specific 
PUSCH transmission within which the power headroom report is sent. Based on the report, 
eNB is able to estimate the maximum UL grant size (w.r.t. number of PRBs) the UE can support 
with the current PUSCH transmit power density. The range of normalized power headroom is 
typically between −5 and 20 dB. When the value approaches 0 dB or even lower, it shows UE has 
trouble meeting the required UL Tx power due to max Tx power.
PUSCH RSSI/PUSCH SINR measurement is an another way to detect UL coverage and UL 
interference problems. The range of the UL SINR report is typically between −10 to 15 dB. 
When the report shows UL SINR lower than −5 dB, UE is likely in UL coverage challenge loca-
tion. Figure 3.4 points the bad UL coverage and interference area based on PUSCH RSSI/
PUSCH SINR.
The factors affecting UL coverage include eNB receiver sensitivity, antenna diversity gain, UE 
transmit power, propagation loss of UL radio signals, tower‐mounted amplifiers (TMAs) on 
UL, and so on.

Coverage Optimization
129
3.1.2.3  UL and DL Imbalance
Sometimes, the eNB cannot receive UL signals because of limited power when UEs perform 
random access or upload data. In this situation, the UL coverage distance is less than the DL 
coverage distance. Imbalance between UL and DL involves limited UL or DL coverage. In lim-
ited UL coverage, UE transmit power reaches its maximum but still cannot meet the require-
ment for UL BLERs. In limited DL coverage, the DL DCH transmit code power reaches its 
maximum but still cannot meet the requirement for the DL BLER. Imbalance between UL and 
DL leads to service drops. The most common cause is limited UL coverage in a live network.
For the optimization of UL and DL imbalance, the UL measurement reports on the Uu inter-
face can be used to analyze and solve problems. The criteria of UL and DL imbalance (without 
external interference) can be presented as:
●
●UL limited: PHR < 3 dB, and RIP < −100dBm, and UL_SINR < 0 dB, and RSRP > −105dBm
●
●DL limited:RSRP < −110dBm, and UL_SINR > 0 dB, and PHR > 3 dB, and RIP < −100dBm
If UL interference leads to imbalance between UL and DL, it is needed to monitor eNB 
alarms to check for the interference and check whether the equipment works properly and 
whether alarms are generated if imbalance between UL and DL is caused by other factors, for 
example, UL and DL gains of repeaters and trunk amplifiers are set incorrectly, the antenna 
system for receive diversity is faulty when reception and transmission are separated, or power 
amplifiers are faulty.
3.1.3  Overlapping Coverage
LTE network use the same frequency, if the overlap area is too big between two cells, it will 
cause a lot of interference with each other. As discussed previously, interference reduces the 
throughput in a strong way, so the identification of the strongest interferers is needed. From 
drive test data, an area of strong interference shall be identified as an area with good RSRP but 
with low SINR or RSRQ. However, SINR and RSRQ measurements are dependent on network 
load and measurement methods. In an unloaded network, SINR measured from RS reflects the 
PCI planning quality. RS SINR has also a random component depending on the radio frame 
synchronization state between neighboring sites (no controlled synchronization by the network). 
Thus, it is possible to have locations with good RS SINR in unloaded network, but which suffer 
from heavy interference when there is traffic load in a neighboring (interfering) cell.
Noise floor
per RB
Bad UL
coverage
region
Ideal area
UL close loop power control
lower RSSI threshold
UL close loop power control
upper RSSI threshold
UL close loop power control
upper SINR threshold
UL close loop power control
lower SINR threshold
UL interference
region
RSSI
SINR
Figure 3.4  Bad UL coverage and interference area.
www.ebook3000.com

LTE Optimization Engineering Handbook
130
Scanner RSRP measurements provide the most accurate method to identify interfering sites. 
By looking best N cells RSRP values, it is possible to identify places that don’t have dominant 
server or where there are many cells visible inside a small power window. Those locations could 
still have fairly good performance in unloaded network, but they would suffer from interference 
when traffic load increases in surrounding cells.
When an area having detected too many high power pilots as compared to the best serving 
pilot, the area is defined as pilot pollution as shown in Figure 3.5. Pilot pollution can be domi-
nated by number of signals is more than three, and RSRP is more than −105dBm, and difference 
with the serving pilot is less than 6 dB. The harm of pilot pollution includes frequent cell rese-
lection in idle state, ping‐pong handover, low SNR and high BLER, drop call, and low throughput.
So reducing the pilot pollution (overlap area) will be an important step forward to secure the 
high network performance and give the end user a good apperception of the LTE network. At 
a first stage, corrective actions to improve the situation are changes of antenna tilt, azimuth, 
and eventually, eNB power of the interfering cells. Antenna patterns should have low sector 
power ratios to minimize overlap, and high upper sidelobe suppression to minimize coverage 
in unwanted directions. A second stage might be the change of antenna type and height or add 
new site/RRU to create dominance.
3.1.4  Overshooting
Overshooting happens when a cell is giving coverage out of its designed coverage area into a 
neighbor cell causing interference. Because of, for example, actual propagation being better 
than assumed in planning or an error in setting the tilt value provides coverage farther than 
expected, overshooting is happening. It can be detected by looking at the average inter‐site 
distance calculated over the target cells for outgoing handovers or by looking into drive test 
results plot marked with serving cells IDs along with handovers. Overshooting cell usually 
contributes to low throughput and drop call. The coverage area should be reduced to a certain 
degree by downtilting or power setting.
Overshooting can be detected with propagation delay counters. Propagation delay distribu-
tion shows that the sector is shooting as far as 10 km away. Analysis of traffic versus distance 
for cell/user is necessary for tilt optimization and interference reduction (Figure 3.6).
Cells ranked in order of network impact for a structured approach to address interference 
issues. For engineering, timing advance distribution and handover relations can be analyzed 
for boomer coverage as shown in Figure 3.7 and Figure 3.8.
100
80
60
40
20
0
LTE19511_3
LTE19511_2
LTE19509_1
LTE19514_1
LTE19973_2
LTE19514_3
LTE19511_1
LTE19510_1
LTE19917_3
LTE19514_2
LTE19520_1
LTE19973_1
LTE19970_2
LTE19520_2
LTE19510_3
Polluter
In noise limited area, 
multiple signals with 
adequate power are present 
in a given area, resulting in 
high RSSI without a 
dominant server. SINR 
value from any of these 
signals will be impeded 
resulting in poor service.
Figure 3.5  Pilot pollution.

Coverage Optimization
131
Overshooting
Cell ‘A
Cell ‘B
Figure 3.6  Unwanted island areas in cell “A” and optimizes cell “B” to remove them.
Figure 3.7  TA distribution.
Figure 3.8  Handover relations.
www.ebook3000.com

LTE Optimization Engineering Handbook
132
There are different ways to identify overshooting. Based on PCI information of serving 
sector and target sector, calculating RSRP delta and distance between these sectors, and 
checking the random access response messages for the timing advance value, overshooting 
is identified. Overshooting can be minimized using physical optimization (mechanical/
electrical tilt, azimuth optimization, reducing the antenna height) or parameter optimiza-
tion like power of nominal cell and/or overshooting cells, handover thresholds, maximum 
cell range, and so on, as shown below where boomers are identified with distance measured. 
Here is an example of a downtilt overshooting cell to remove interference, which is shown 
in Figure 3.9.
3.1.5  Tx1/Tx2 RSRP Imbalance
The antenna system is one of the major components contributing to the performance of a 
­wireless communication system. When using multiple antennas, the antennas and feeders 
must align well, when at least one antenna works well, but the others may be disconnected or 
have RF loss, there is almost no gain from the disconnected antennas in such scenarios. Before 
launching the network, it will have to make it possible to discover both slowly failing and 
wrongly mounted antenna systems timely and remotely.
In live network, some scanners and data collection/post processing tools can distinguish 
between transmit (Tx) branches of each sector by utilizing Layer1 measurements of received 
RSRP/SINR per antenna branch to monitor the antenna status and detect if there are problems 
with the antenna. In the case below, UE‐received RSRPs of Tx1/Tx2 are imbalanced as shown 
in Figure 3.10, in areas served by this sector could still maintain a connection to the sector, but 
the performance would be impacted. Remote measurements on the radio unit, such as return 
loss and VSWR and associated alarms, can identify these issues. Typically, this points out to 
hardware issues at the cell.
High RF delta between the UE receive ports can have huge impact on the throughput especially 
using MIMO, it should be verified that the delta is within 0 to 10 dB. With practical integrated 
UE antennas power imbalance is difficult to control since the UE antenna patterns are not 
identical. In live network, the antenna problems are usually in the antenna branch, which is the 
receiver or transmitter chain. A fault in the antenna could be related to the TMA, or the cable/
feeders.
3.1.6  Extended Coverage
Large cells are suitable to obtain coverage in sparsely populated areas where the requirement 
for capacity is low. Examples of such areas are deserts, coastal areas, or sea environments. For 
3GPP standard, LTE enable cell sizes up to 100 km. The limit corresponds to the maximum 
timing advance value that can be sent to a UE. This will give the UE a minimum amount of 
processing time after receiving data in DL and before transmitting a response in UL.
For each cell, the maximum desired cell range can be defined from 1 up to 100 km by 3GPP. 
First, it is important to carefully select the correct combination of PRACH format type and 
special subframe type. Either PRACH format or special subframe type will be the upper bound 
for maximum cell radius, independent of link budgets. For LTE FDD, only PRACH format 0, 1, 
2, 3 set an upper bound for maximum cell radius (Figure 3.11).
There are many factors that limit cell size:
●
●RACH delay: An unsynchronized (no timing advance) UE’s ability to send a RACH preamble 
and have it arrive at the eNB within the RACH window is dependent on the size of the pre-
amble and the round trip delay of the cell.

Coverage Optimization
133
●
●Cyclic shift orthogonality: Each UE will utilize a different cyclic shift of a root ZC sequence. 
However, the delay (and delay spread) of the channel will make the ZC sequence of a far UE 
look just the same as the ZC sequence of a close UE that has been cyclically shifted. In order 
to prevent this, the cyclic shift of the UEs must be kept further apart than the round trip 
delay time + delay spread.
3000
2500
2000
1500
1000
500
0
0
Number of samples
156
312
468
624
779
935 1091 1247 1403 1559 1715 1871 2027 2183 2338 2572
Tilt needed
Distance (m)
Figure 3.9  Downtilt and related propagation delay.
www.ebook3000.com

LTE Optimization Engineering Handbook
134
●
●SNR will determine the eNBs probability of detecting the RACH sequence. For larger cells, 
users at the cell edge require more signal power (hence a longer preamble) to meet the 
required probability of detection.
UE was able to successfully attach to the network after 15 km with preamble Format 1 being 
used in the PRACH. After a successful attach at 15.5 km from the site, UL and DL throughput 
tests were conducted. Table 3.2 summarizes the results observed.
An example of extended coverage with parameter configured is shown in Figure 3.12.
If the maximum cell range feature is activated and if the cell range exceeds 15 km, extra UL 
resource blocks is used for random access, which reduces UL capacity.
For some cases, repeater can be deployed to extend coverage. It worth to mention that when 
the UE have a signal from both the macro base station and the repeater, the normal cyclic prefix 
Sc RSRP Tx1 (dBm): EARFCN_Cl CN-5230_Cl-352
[Min, –120)
(271) (20.67%)
(15.79%)
(23.57%)
(19.45%)
(11.98%)
(4.81%)
(1.45%)
(1.53%)
(0.46%)
(0.31%)
(207)
(309)
(255)
(157)
(63)
(19)
(20)
(6)
(4)
[–120, –115)
[–115, –110)
[–110, –105)
[–105, –100)
[–100, –95)
[–95, –90)
[–90, –80)
[–80, –70)
[–70, Max)
Sc RSRP Tx2 (dBm): EARFCN_Cl CN-5230_Cl-352
[Min, –120)
(7)
(0.53%)
(2.14%)
(14.04%)
(16.4%)
(19.83%)
(16.93%)
(14.34%)
(14.72%)
(0.92%)
(0.15%)
(28)
(184)
(215)
(260)
(222)
(188)
(193)
(12)
(2)
[–120, –115)
[–115, –110)
[–110, –105)
[–105, –100)
[–100, –95)
[–95, –90)
[–90, –80)
[–80, –70)
[–70, Max]
PCl 352 TX1 RSRP
PCl 352 TX1 RSRP
Figure 3.10  Tx1/Tx2 RSRP imbalance.
SSF8
SSF7
SSF6
SSF5
SSF4
SSF3
SSF2
SSF1
SSF0
0
5
10 15 20 25 30 35 40 45 50
Maximum cell radius (km)
55 60 65 70 75 80 85 90 95 100 105
Special sub-frame type
PRACH format 4
PRACH format 3
PRACH format 2
PRACH format 1
PRACH format 0
LTE supports 4 preamble formats 
for both FDD and TDD and one 
format specific for TDD in order 
to provide reasonable RACH 
configurations to various 
environments. The preamble 
structure for the 4 formats 
suitable for both FDD and TDD.
Figure 3.11  Cell range according to PRACH format.

Coverage Optimization
135
will in some locations not cover the delay difference between the direct path and the repeater 
path that will result to the performance degradation. An example is shown in Figure 3.13.
3.1.7  Cell Border Adjustment
In previous chapters, it can be seen that the cell size is impacted by a number of factors, output 
power and antenna tilt are two examples. In a live network, it has three coverage borders 
according to different parameters.
●
●“Real” coverage area is defined by output power, radio conditions, and so on;
●
●“Idle mode UEs” cell size is defined by qRxLevMin. The qRxLevMin parameter defines the 
minimum received signal strength an idle mode UE shall receive in order to stay in the cell. 
If received power is less that this level the UE will try to make a reselection from the cell.
●
●“Connected UEs” cell size toward other RANs defined by a2Thresholds; The a2Threshold 
parameters define a mobility threshold before a RRC connected UE tries to move, using for 
example, handover, release with redirect.
During troubleshooting activities in a live network it has been seen that when the idle mode 
parameters are not tuned correctly, the eNB will experience an abnormal number of time outs 
of the RRC connection set up procedure. Similarly, if the bad coverage parameters are tuned 
incorrectly the eNB will experience an increase in radio link failures where, if tuned correctly, 
a redirection to other RAT could have been possible.
The KPI measurement gives the smallest cell size that should determine the cell size in both 
idle and RRC connected mode. The optimization of the cell size should be automatically tuned 
to achieve an optimal accessibility and retainability KPI in a live network (Figure 3.14).
When bad KPIs are observed, cell size is decreased (if possible), when too good KPIs are 
observed, cell size is eventually (a hysteresis is used) increased. The accessibility and retainabil-
ity KPIs are checked periodically. The cell size (determined by parameters Qrxlevmin and 
a2Threshold or b2Threshold1) is decreased when statistical base is sufficient AND the percent-
age of failed RRC connection set up procedures due to time out is higher than the acceptable 
level OR the percentage of dropped connections due to radio link failure is higher than the 
acceptable level. The cell size is increased when statistical base is sufficient AND the percent-
age of failed RRC connection set up procedures due to time out is lower than the acceptable 
level minus a hysteresis AND the percentage of dropped connections due to radio link failure 
is lower than the acceptable level minus a hysteresis. Otherwise the cell size is maintained.
The operator can set different qRxLevMin for different cells respectively according to differ-
ent scenarios and RF condition (e.g., tuning cluster cell‐edge, idle and active mobility cell‐edge 
matching, inter‐cells gap, inter‐cells overlap, cells load balance). The tuning purpose of qRx-
LevMin is to set suitable cell size, includes decreasing the gap between cells, controlling overlap 
of cells, matching the idle mode cell size and connected mode cell size, and so on.
The qRxLevMin and a2Threshold shall be adjusted together. So if, for example, qRxLevMin is 
decreased a2Threshold will also be decreased. qRxLevMin and a2Threshold will not be enforced 
Table 3.2  UL and DL throughput tests at 15.5 km from the site.
RSRP (dbm)
CINR (db)
Throughput (Mbps)
DL
−118.31
4.3
8.23
UL
−118.31
4.3
0.35
www.ebook3000.com

RSRP=–129dBm, SINR= –4dB
Maximum cell range is 36.61Km
Distance Total: 36.610Km
Figure 3.12  Example of extended coverage. (See insert for color representation of the figure.)

Coverage Optimization
137
to have similar values. An offset parameter can exist in LTE that defines the difference between 
the a2Thresholds and qRxLevMin. Default value for this offset will be 0 dB. When the algorithm 
starts the a2Thresholds will be set using this offset.
For cell border optimization, there are still some weight factors to be considered: how much 
is the RRC connection set up time out failure ratio, how much is the RRC reestablishment fail-
ure ratio, how much is the initial RRC context set up failure ratio, how much is the abnormal 
release ratio, and how fast is the hysteresis shall go down to allow cell size increases, and so on.
3.1.8  Vertical Coverage
In most scenarios, users are predominantly distributed in the azimuth plane, so in the narrowly 
spaced, horizontal configuration, antenna is clearly the best all‐around antenna. The vertically 
configured antenna may show benefits for scenarios, such as the urban canyon, coverage of 
high‐rise buildings and small cells. The vertical configuration requires UEs to be distributed in 
elevation.
1.4km corresponds to 4.7 µs extra delay
Repeater adds 
~5 µs delay.
Received 
power from 
both path 
about the 
same and
delay 
difference 
larger than 
Cyclic Prefix 
(4.7µs)
gives
degraded 
performance
2.7 km
2.7km
70m high
source eNB
Figure 3.13  Repeater in LTE.
2G Coverage
DCCH: Bad Coverage Report
CCCH: RRC Connection Setup
RACH: RRC Connection Request
DCCH: RRC Connection Setup Complete
RRC Connected Mode cell
boarder towards CDMA
is defined by parameter:
eventA2Threshold
Idle Mode cell boarder is
defined by parameter:
Qrxlevmin
Figure 3.14  Cell size in idle and RRC connected mode.
www.ebook3000.com

LTE Optimization Engineering Handbook
138
In a typical macro cell environment, the horizontal configuration requires more than 4λ 
spacing for decorrelation and less than 0.5λ for high correlation. The vertical configuration was 
found to require wider spacing of more than 12λ for low correlation and a wider acceptable 
spacing of less than 8λ for high correlation.
Vertical sectorization is made possible through the vertically active antenna array, which can 
be used to form multiple, narrow vertical beams pointed in different directions in order to cre-
ate multiple sectors, this has the advantage in allowing reuse of resources (PRBs) between 
beams, but also introduces additional UL interference due to the overlap of the beams. Each 
vertical sector has a separate physical layer cell ID (Figure 3.15).
3.1.9  Parameters Impacting Coverage
The parameters of coverage have an impact on coverage are presented in Table 3.3. Most often 
the coverage is determined by UL link, thus for optimizing coverage it is needed to optimize 
levels of UL power.
3.2  ­Control Channel Coverage
For control channel coverage optimization process, the primary set of parameters are for power 
settings that can have a big influence on coverage, for example, reference signal power, ­primary/
secondary sync signal power offset, and so on.
The higher the power the better the coverage but also the higher interference in the neighboring cells.
The values must be tuned so that cells coverage with same frequency does not overlap. Based 
on field and analytical studies, it is recommended that adjusting CCCHs and reference power 
offsets to maintain current amplifiers power utilization as well as to maintain PDSCH and 
CCCH’s SINR levels better than the current level.
Outer beam
Inner beam
z
y
x
UE
UE
elevation
Figure 3.15  Vertical sectorization.

Coverage Optimization
139
Table 3.3  Parameters impacting UL/DL coverage.
Parameters impacting UL coverage
Parameters impacting DL coverage
pUSCHPowerControlAlphaFactor
qRxLevMin
p0NominalPUSCH
cellDLTotalPower/referenceSignalPower
uplinkSIRtargetValueForDynamic 
PUSCHscheduling
primary/secondary SyncSignalPowerOffset
sEcorrInit
pBCHPowerOffset
ulSyncSINRsyncToOOSTreshold
pDCCHPowerOffsetSymbol
ulSyncSINROOStoSyncTreshold
pCFICHPowerOffset
qRxLevMin
pHICHPowerOffset
deltaFPUCCHFormat1
pbOffsetPdsch/paOffsetPdsch
sIRTargetforReferencePUCCHFormat
phichResource
minSIRtargetForFractionalPowerCtrl
dlTargetSINRTableForPDCCH
maxSIRtargetForFractionalPowerCtrl
pdcchAggregationLevelForCRNTIGrantsIn 
CommonSearchSpace
pathLossNominal
pdcchAggregationLevelForUESearchSpace
p0NominalPUCCH
n310/t310
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
140
Capacity optimization focuses on the resource utilities and high traffic solution. It is not only 
about user plane dimensioning but also interference control, signaling solutions, and user 
­connectivity dimensioning. LTE cell and user throughput is an important KPI of capacity 
­optimization. Many high‐resource utilities are usually UL limited while the networks in general 
are DL limited, which adds further complexity on the high capacity optimization. Figure 4.1 
gives the general principle of high capacity optimization strategy.
The optimization engineer can collect OMC and trace data and site latitude, longitude and 
azimuth from operator network, and calculate the average network utilization, traffic volume, 
and DL spectrum efficiency over the heaviest busy hour (BH), and make necessary update on 
capacity assumptions based on the better understanding of operator requirements. Then, 
based on predicted traffic increase and offload from network rollout plan, estimate the near‐
term traffic volume, resource utilization, and license requirement. Usually, the network total 
traffic can be calculated from the product of forecasted subscriber number and the forecasted 
traffic per subscriber.
Figure 4.2 shows the service work flows from a LTE capacity planning service. Capacity 
optimization triggers are based on network resources, radio spectrum limitations, and the 
forecasted traffic.
When performing root cause analysis of LTE low throughput investigations, it is important 
to analyze the radio conditions, signaling flows, logging messages, and cell loading to understand 
low throughput reasons. In order to improve the SIR, it may be necessary to perform antenna 
tilting to reduce over shooting cells and minimize coverage overlap as this may cause excessive 
inter‐cell interference.
4.1  ­RS SINR
RS SINR is the most important factor impacted the network capacity. RS SINR is determined 
by position in cell (RSRP), interfering cell load, interferer cell geometry, clutter and terrain 
type, and reference signal configuration, and so on.
A high‐speed LTE data network requires excellent SINR distribution planning besides 
parameter optimization and troubleshooting. Various internal and external assessments have 
shown that the network has room for improving the SINR and CQI distribution which would 
be a precursor to any additional optimization under static and mobility scenarios, and directly 
impacts the accessibility, retainability, throughput, and quality.
4
Capacity Optimization

Capacity Optimization
141
4.2  ­PDCCH Capacity
PDCCH (Physical DL control channel) is used to transfer DCI (DL control information) for the 
scheduling of DL resources on PDSCH and UL resources on PUSCH.
PDCCH symbols in the beginning of each subframe can be dynamically adjusted based on 
the load and radio conditions. UE in poor radio coverage will require 8 control channel ­elements 
(CCE, PDCCH can be aggregated in groups of 1, 2, 4, and 8 CCEs) for each PDCCH transmission 
Traffic
distribution
Resource
not enough
RF resource
not enough
Parameters
Optimization
Frequency
expansion
Channel
dimensioning
License
expansion
Add more cell
Cell rehoming
Load balance
Core
Expansion
BBU resource
not enough
Backhaul
resource
not enough
Core network
resource
not enough
Traffic
prediction
Hot spot
Figure 4.1  High‐capacity optimization strategy.
DL/UL volume
per cell average
N busy hours
DL/UL volume
forecast
DL/UL volume
triggers
eNB resource
triggers
User throughput
triggers
Max active UEs
for acceptable
DL/UL user
throughput
Capacity trigger
VoLTE resources
triggers
eNB resource
utilization
forecast
Active DL/UL
UEs
forecast
Max DL/UL cell
throughput
VoLTE
resources
forecast
Key capacity 
indicator
Limit
100
167
500
100%
80%
80% of
limit
80% of
limit
70
Trigger
# of pages/s/eNB
# of Peak RRC
connected
users/sector
# of Peak Radio
bearers/sector
Avg PRB
utilization%/sector
Active
DL/UL UEs
per cell
average N
busy hours
Spectral
efficiency
theoretical limit
per cell
VoLTE capacity
monitoring and
planning
eNB resource
utilization average
N busy hours
(license, CP, UP
etc.)
Figure 4.2  Capacity optimization trigger.
www.ebook3000.com

LTE Optimization Engineering Handbook
142
where as UE in good radio conditions may need 1 CCE. Therefore, higher aggregation levels 
should be employed at cell‐edge whereas lower aggregation levels are meant for users close to 
the cell. PDCCH capacity is measured in terms of CCEs, which are 9 sets of REGs (resource 
element groups), that is, 36 REs as each REG contains 4 RE. PDCCH coding is restricted to 
QPSK and coding scheme (convolutional 1/3) in order to enhance the decoding in low SINR 
conditions at cell‐edge with BLER below 1%.
Figure 4.3 shows the number of PDCCH symbols used in the different cells versus the DL 
SINR conditions measured by the UE and the maximum number of CCEs for different band­
width configurations and different values of PDCCH symbols. As expected, under good radio 
conditions, low aggregation levels are employed for UL and DL. As radio conditions worsen the 
aggregation levels will tend to increase and so will the average number of required PDCCH 
symbols. In extremely low DL SINR the average PDCCH symbols is just below 2, since drives 
were performed with a single user and 10 MHz bandwidth configurations for all the cells.
The relationship between code rate and the number of symbols occupied by PDCCH, the 
number of antennas and the size of TB (10 MHz bandwidth) is shown in Table 4.1.
Additionally, the PDCCH capacity for user data scheduling is reduced by PDCCH CCEs used 
for system information scheduling over PDSCH, paging, preamble assignment and random 
access message 2 scheduling carried by different DCI formats. The aggregation level used for 
broadcast (SIB), paging preamble assignment and RA response is specified by parameters and 
is limited to aggregation levels 4 and 8 to ensure reliable decoding across the cell coverage area.
The first phase of PDCCH capacity calculation procedure is the calculation of the total 
resources occupation of control channel. Assuming conventional CP, TDD‐LTE (DL:UL = 2:2) 
special subframe ratio 10:2:2, the total resources of control channel (REG) = total RB 
resources × control channel symbol number × 3. Control domain OFDM symbol number 
relates with CP configuration, special subframe configuration, PCFICH channel, and other 
related information. In the calculation of each subframe number of scheduled users, high 
bandwidth under conventional subframe is generally considered 3 OFDM symbols, then 
20 MHz bandwidth under conventional subframe control domain resource is 100 * 3 * 3 = 900 
REG (Figure 4.4).
Figure 4.4 gives the PDCCH capacity analysis procedure. It is needed to determine the total 
REGs in the control domain with system bandwidth and other parameters, and calculate the 
REGs occupied by other control channels except PDCCH. Then, the CCES used for PDCCH 
can be retrieved, and the allowed scheduled users per TTI according to the cell conditions will 
be determined.
Based on the above analysis, it is concluded that the parameters that affect the PDCCH 
channel capacity are: system bandwidth, CP length, subframe configuration, special subframe 
configuration, the number of antenna ports (two ports in the example), PHICH parameter like 
Control format indicator
2
1.5
1
0.5
SINR
0
–9 –5 –3 –1
1
3
5
7
9
11 13 15 17 19 21 23 25
MHz
5
10
20
System Bandwidth
NrSymPdcch=1
NrSymPdcch=2
NrSymPdcch=3
5
10
27
13
21
44
21
55
88
10MHz bandwidth
Figure 4.3  Number of PDCCH symbols versus DL SINR (10 MHz bandwidth).

Capacity Optimization
143
Ng = 1/6, assuming the normal subframe control domain occupies three OFDM symbols, 
­special subframe control domain occupies one OFDM symbol, the allowed scheduled users 
according to different PDCCH aggregation level is shown in Table 4.2.
In a live network, PDCCH CCEs utilization above 75% indicates high PDCCH CCEs 
utilization. High PDCCH utilization can be caused by large number of active users, poor 
coverage, high interference, parameters and traffic model, and so on. RRC connection set up 
failure/incoming handover preparation failure under high‐capacity conditions usually have a 
Table 4.1  PDCCH symbols versus TBS.
3 PDCCH Sym
2 PDCCH Sym
1 PDCCH Sym
TBS
2 Ant.
1 Ant.
2 Ant.
1 Ant.
2 Ant.
1 Ant.
1384
0.115
0.11
0.105
0.1
0.096
0.092
1800
0.15
0.143
0.136
0.13
0.125
0.12
2216
0.185
0.176
0.168
0.161
0.154
0.148
2856
0.238
0.227
0.216
0.207
0.198
0.19
3624
0.302
0.288
0.275
0.263
0.252
0.242
4392
0.366
0.349
0.333
0.318
0.305
0.293
5160
0.43
0.41
0.391
0.374
0.358
0.344
6200
0.517
0.492
0.47
0.449
0.431
0.413
6968
0.581
0.553
0.528
0.505
0.484
0.465
7992
0.666
0.634
0.605
0.579
0.555
0.533
7992
0.333
0.317
0.303
0.29
0.278
0.266
8760
0.365
0.348
0.332
0.317
0.304
0.292
9912
0.413
0.393
0.375
0.359
0.344
0.33
11448
0.477
0.454
0.434
0.415
0.398
0.382
12960
0.54
0.514
0.491
0.47
0.45
0.432
14112
0.588
0.56
0.535
0.511
0.49
0.47
15264
0.636
0.606
0.578
0.553
0.53
0.509
15264
0.424
0.404
0.385
0.369
0.353
0.339
16416
0.456
0.434
0.415
0.397
0.38
0.365
18336
0.509
0.485
0.463
0.443
0.424
0.407
19848
0.551
0.525
0.501
0.479
0.459
0.441
21384
0.594
0.566
0.54
0.517
0.495
0.475
22920
0.637
0.606
0.579
0.554
0.531
0.509
25456
0.707
0.673
0.643
0.615
0.589
0.566
27376
0.76
0.724
0.691
0.661
0.634
0.608
28336
0.787
0.75
0.716
0.684
0.656
0.63
30576
0.849
0.809
0.772
0.739
0.708
0.679
31704
0.881
0.839
0.801
0.766
0.734
0.705
36696
1.019
0.971
0.927
0.886
0.849
0.815
www.ebook3000.com

LTE Optimization Engineering Handbook
144
high PDCCH utilization behind them. High PDCCH utilization usually indicates the SRB 
traffic is using the majority of the scheduling opportunities and leaves very little opportuni­
ties for DRB traffic under high load conditions. The eNB is probably limited on CCEs during 
low throughput.
If CCE has nearly reached the maximum CCE aggregation level, the feature of PDCCH 
power boost can further improve PDCCH coverage, but decrease PDCCH CCEs utilization.
4.3  ­PUCCH Capacity
The physical UL control channel (PUCCH) is used for the transmission of signaling (scheduling 
requests, HARQ acknowledgments, channel state information) when no simultaneous UL data 
is being sent. The PUCCH resources are always allocated on the extreme ends of the band­
width in order to maximize the number of contiguous PRBs that can be allocated for the 
System bandwidth, CP,
DL and UL subframe
configuration, special
subframe
configuration, and
antenna configuration
The symbols
occupied by CFI
(PCFICH control
domain)
The REGs
occupied by
PHICH
The REGs occupied
by other channels
except PDCCH
The REs
occupied by RS
in control
domain
The REGs
occupied by
PCFICH (4REG)
The total REGs in
control domain
The CCEs can be used for PDCCH
Determin the allowed scheduled users per
TTI according to PDCCH aggregation level
Figure 4.4  PDCCH capacity analysis procedure.
Table 4.2  The example of allowed scheduled users.
subframe configuration
PDCCH aggregation level
subframe
0
1
2
3
4
5
6
7
8
9
2:2
0
88
20
87
88
20
87
1
44
10
43
44
10
43
2
22
5
21
22
5
21
3
11
2
10
11
2
10
3:1
0
88
20
87
88
88
20
87
88
1
44
10
43
44
44
10
43
44
2
22
5
21
22
22
5
21
22
3
11
2
10
11
11
2
10
11

Capacity Optimization
145
PUSCH. Additionally, users will hop between the bandwidth edges (intra subframe hopping) in 
order to provide frequency diversity gain for PUCCH transmissions.
PUCCH are by default located at the lower and upper band edges of the UL system band­
width. The PUCCH region needs planning in order to get an appropriate balance between 
control and data traffic resources. It is important to correctly dimension the PUCCH area, not 
only to avoid unnecessary overheads that reduce the throughput (if more resources than 
needed are reserved) but to avoid poor RRC set up success rates (in case insufficient PUCCH 
resources are reserved to handle the maximum number of active users in the cell).
PUCCH is code‐multiplexed of multiple UEs in one RB pair, which is spreading in frequency 
domain within symbol by ZC sequence, spreading in time domain symbols by orthogonal 
­covers (format 1/1a/1b). PUCCH capacity typically limited by inter‐cell interference, so hop­
ping technique is used for avoiding interference for neighboring cells that including group 
hopping (ZC root sequences hopping on slot basis) based on cell ID, cyclic shift hopping on 
symbol basis, scrambling sequence per radio frame, and orthogonal covers hopping on slot 
basis (format 1/1a/1b only) (Figure 4.5).
4.3.1  Factors Affecting PUCCH Capacity
The PUCCH supports multiple formats. Table 4.3 provides a list of these formats and the type 
of information that is carried with the different PUCCH formats. Formats 2a and 2b are sup­
ported for normal cyclic prefix only. The outer part of the PUCCH region will be employed to 
transmit Format 2 type information. This is mainly CQI reports with or without HARQ 
Different UEs are separated on
PUCCH by means of FDM and CDM.
FDM is used between the RB whereas
CDM is used inside the PUCCH RB.
PUCCH utilizes two separate and
LTE-specific ways to realize CDM: by
means of cyclic shifts of sequences
with suitable zero-autocorrelation
properties (i.e., CDM inside the
SC-FDMA block) and by means of
block-wise spreading with the
orthogonal cover sequences (i.e., CDM
between multiple SC-FDMA blocks)
RB0
RB1
RBn
ZC_root1
CSsymbols
OC1
RS_OC1
ZC_root2
CSsymbols
OC2
RS_OC2
ZC_rootn
CSsymbols
OCn
RS_OCn
subframe0
slot0
slot1
slot2
slot3
subframe1
slot18
slot19
subframe9
m = 1
m = 3
m = 0
m = 2
m = 1
m = 3
m = 0
m = 2
m = 2
m = 0
m = 3
m = 1
m = 1
m = 3
m = 0
m = 2
m = 2
m = 0
m = 3
m = 1
m = 2
m = 0
m = 3
m = 1
Figure 4.5  PUCCH multi‐user.
Table 4.3  Info carried in the different PUSCH formats.
PUCCH format
Information
Modulation scheme
1
Scheduling request (SR)
N/A
1a
1‐bit ACK/NACK with/without SR
BPSK
1b
2‐bit ACK/NACK with/without SR
QPSK
2
20‐bit CSI (CQI + PMI + RI)
QPSK
3
Up to 10‐bit(FDD)/20‐bit(TDD) ACK/NACK
QPSK
2a
20‐bit CSI + 1‐bit ACK/NACK
QPSK + BPSK
2b
20‐bit CSI + 2‐bit ACK/NACK
QPSK + QPSK
www.ebook3000.com

LTE Optimization Engineering Handbook
146
acknowledgments. This region will be followed by another section in which it is possible to 
have a mix of Formats 1.x and 2.x. Formats 1 are employed for the transmission of scheduling 
request (SR) and Ack/Nacks. Finally the inner part of the PUCCH region allocates resources 
dedicated for Formats 1.
UE is allocated SR and CQI resources during set up procedure, and the resources are kept as 
long as UE is UL synchronized. The amount of CQI, SR, and ACK/NACK will affect PUCCH 
loading. CQI is periodic based, it can be moved to PUSCH in case of concurrent data transmission. 
CQI will not transmit if UE is in DRX sleep mode. SR is transmitted only when SR (and related 
buffer status reports) is triggered. Traffic enters the buffer corresponding to a logical channel 
group with higher priority than what exists in the buffer, or at expiry of the retxBsrTimer. ACK/
NACK is transmitted per UE‐specific DL PDCCH allocation. The PDCCH allocation controls 
the PUCCH allocation, that is, there is some freedom in the number of ACK/NACKs per RB 
pair. In case of concurrent data transmission, ACK/NACK can be moved to PUSCH.
The capacity of PUCCH channel estimation scheme is shown in Figure 4.6.
In order to improve the usage of RB, one UE occupy one RB waste too much, so consider 
CDM (cyclic shifts in frequency and orthogonal sequence in time) to make multiple UE shared 
one RB in one TTI in the same PUCCH Format. PUCCH resource calculation can be found in 
Figure 4.7 and Figure 4.8.
For PUCCH format 1/1a/1b, 3 symbol used for DMRS, 4 symbols left used for PUCCH for­
mat 1/1a/1b. At most 12 × 3 = 36 UE can use in the same RB. For PUCCH format 2/2a/2b, only 
used for period CQI reporting, non‐period CQI reporting used in PUSCH.
PUCCH format 3 used for CA condition, each carrier needs to transmit DL data in the same 
TTI, and the UE can only send one PUCCH on the Pcell in each subframe, including all the 
serving cell’s ACK/NACK information. In LTE, one UE can use 5 serving cell at most, if each 
cell use MIMO, it needs 10 ACK/NACK for FDD. For TDD, if it likes DL:DL:UL, then in the 
UL, the UE needs to response 10 × 2 DL = 20 ACK/NACK, if it likes DL:DL:DL:DL:UL, then 
the UE needs to response 10 × 4 = 40 ACK/NACK. And even sometimes need to add one more 
bit for SR.
The number of RB‐pairs for format 1 can be shared between SR and HARQ resources. The 
number of pairs for these resources can be calculated by:
	
n
n
n
RB Format
PUCCH SR
PUCCH HARQ
,
,
,
1
36
	
Network and PUCCH parameter
PUCCH resource allocation
Bandwidth and DL/UL configuration
PUCCH RB config during
report period
PUCCH resource config
PUCCH RB config per subframe
Report period of UL control information
PUCCH transport format
PUCCH resources supported per RB
UL control channel resource allocation
PUCCH capacity
UL control information capacity
Figure 4.6  PUCCH channel estimation procedure.

Capacity Optimization
147
The number of resource blocks per slot allocated for format 2 is calculated by:
	
n
n
n
T
n
RB Format
CQI res
cap
p CQI
SF PUCCH
,
,
,
,
*
2
10
	
ncqi,res is the wanted number of CQI resources on the PUCCH, specified by parameter 
noOfPucchCqiUsers.
ncap is the CQI resources per RB‐pair, equal to 4, Tp,cqi is the periodicity for CQI reporting.
The number of RB‐pairs for PUCCH is given by:
	
n
n
n
RB PUCCH
RB Format
RB Format
,
,
,
2
2
1
2
	
Table  4.4 gives the parameters deployed for PUCCH physical resources configuration 
(10 MHz).
Max resources per PRB
format 2/2a/2b:
NSC = 12
RB
Max resources per PRB
format 1/1a/1b:
NSC
c·
RB
Δshift
PUCCH
Δshift
PUCCH
 = {c = 3,           = 1} = 36 
m = 3
m = 2
m = 2
m = 3
m = 0
m = 0
Figure 4.7  Max number of resources 
per PRB.
δoffset
PUCCH
Δshift
PUCCH
NRB
(2)
NCS = 0
(1)
nPUCCH
(1)
slot _ nr
symbol _ nr
ZCroot (slot), common for all users
CS (symbol, slot)
RBnr (slot)
OCindex (slot)
f(Cell_id,...)
Figure 4.8  RB Calculation for format 1/1a/1b.
www.ebook3000.com

LTE Optimization Engineering Handbook
148
Within an RB pair, 12CQI, 36SR, and 36ACK/NACK resources can be used when code division 
multiplexing is applied. The number of PRBs dedicated to Formats 2.x is defined by the param­
eter nCqiRb. Control information from multiple users can be scheduled on the same PUCCH 
timeslot by means of using Zadoff‐Chu CAZAC codes, which will preserve the orthogonality. 
Since a PUCCH RB spans over 12 sub‐carriers there will be 12 cyclic shifts available per 
PUCCH RB, it is not recommended to employ all 12 cyclic shifts since this leads to excessive 
interference and therefore degradation in performance (Figure 4.9).
Every UE with a DRB in the cell is required to send CQI reports periodically. For this purpose 
every UE will require a Format 2.x PUCCH resource assignment. The periodicity of the CQI 
Table 4.4  Parameters deployed for PUCCH.
Parameters
Range
Description
default
nCqiRb
1…98
Number of PRBs dedicated to Formats 2.x
1
Tperiod,cqi
2 ms (0), 5 ms (1), 
10 ms (2), 20 ms (3)
Periodicity of periodic CQI/PMI feedback on 
PUCCH or PUSCH
10 ms
n1pucchAn
10…2047
Offset to decide the number of resources reserved 
for SRI (and A/N from persistent PDSCH scheduling 
in later releases).
18
PUCCH
shift
1…3
Maximum number of cyclic shifts allowed for 
Formats 1/1a/1b
2
Tperiod,SR
5 ms (0), 10 ms (1), 
20 ms (2), 40 ms (3), 
80 ms (4)
Scheduling request periodicity in the cell. The 
recommendation is to have one scheduling request 
(SR) configured per frame.
10 ms
prachFreqOff
0…94, step 1
First physical resource block available for PRACH in 
the UL system frequency band. Roundup [PUCCH 
resources/2]
3
puschHopOffset
0…98
The PUSCH hopping offset parameter defines the 
offset used for PUSCH hopping, expressed in a 
number of resource blocks
5
49
48
47
46
.
.
8
7
6
5
4
3
2
1
0
1 PRB for SR
1 PRB for CQI (RI & PMI).
1-3 PRBs for ACK/NACKS.
6 PRBs for PRACH
prachFreqOff = 3
PRACH
DMRS
Unused
PUCCH
PUSCH
1 subframe with PRACH occasion
Figure 4.9  RB allocation for PUCCH (example).

Capacity Optimization
149
reports is set by the parameter Tp,cqi. The total capacity provided exclusively for Format 2.x in 
a cell will be defined by:
	
nCqiRb
T
ms
users
p cqi
*
*
*
*
,
12
1 6 10
120
	
For the transmission of Formats 1.x a similar approach as for Format 2.x is employed. Cyclic 
shifts for orthogonality between users are employed along with code division multiplexing 
(CDM) increasing the number of users, multiplexed orthogonally on a single PRB. The CDM is 
limited by the number of reference symbols that are available for the time domain spreading. 
This leads to a spreading factor (SF) =3 for normal cyclic prefix (CP) and a SF = 2 for extended 
cyclic prefix. The number of resources for PUCCH format 1.x per RB is defined by:
	
SF*
/
*
/
12
3 12 2
18
deltaPucchShift
users per PRB	
Where deltaPucchShift is a parameter that defines the maximum number of cyclic shifts 
(range: 1, 2 and 3) allowed for Formats 1.x. Considering normal cyclic prefix the maximum 
number of Formats 1.x that can be multiplexed per PRB is 36. In a live network, it does not 
recommend the usage of all 12 cyclic shifts due to the high interference generated, therefore, it 
is recommended to set deltaPucchShift to 2, reducing the maximum number of Formats 1.x per 
PRB to 18.
For scheduling requests, semi‐persistent scheduling Ack/Nacks and Ack/Nack repetition, a 
fixed number of resources is reserved per TTI. This is defined via the parameter n1pucchAn. 
The exact resource to be employed inside this reserved region for the above use cases is 
­communicated to the UE via explicit signaling. For HARQ acknowledgments of dynamic 
scheduling, the resource to be used by the UE is a function of the first CCE used for the PDCCH 
scheduling. This means that the resources for Formats 1.x can vary between the ranges speci­
fied below:
	
0
1
1
Format
xResource range
n pucchAn
.
Max CCE	
The number of Format 1.x resources required has to be dimensioned considering the num­
ber RRC connected users per cell and the amount of users scheduled per TTI in the DL
Apart from having dedicated PRBs for Formats 1.x and Formats 2.x there is a possibility of 
having a mixed format region. In this region the resources per PRB are divided between the 
2 Formats. For formats 1.x, it can be reserved up to eight cyclic shifts per PRB via the parameter 
pucchNAnCs. The remaining cyclic shifts can be employed for Formats 2.x considering there 
are two guard cyclic shifts as shown in Table 4.5.
Table 4.5  Mixed region resource allocation for pucchNAnCs =6.
Cyclic shifts
Cyclic shifts
RB xx
0
Format 1.x
RB xx
6
Guard
1
Format 1.x
7
Format 2.x
2
Format 1.x
8
Format 2.x
3
Format 1.x
9
Format 2.x
4
Format 1.x
10
Format 2.x
5
Format 1.x
11
Guard
www.ebook3000.com

LTE Optimization Engineering Handbook
150
If the mixed format region is employed the total capacity for Formats 1.x and Formats 2.x, it 
can be calculated as per the equations below:
●
●Formats 1.x capacity per PRB =
{(n1pucchAn − pucchNAnCs * SF/deltaPucchShift) * deltaPucchShift]/(SF*12)} + roundup 
(pucchNAnCs/8)
●
●Formats 2.x capacity per PRB = nCqiRb * 12 * cqiPerNp + (12‐2‐ pucchNAnCs)*Roundup(puc
chNAnCs/8)
So the maximum PUCCH capacity reserved in a cell for the normal cyclic prefix case (i.e., 
SF = 3) is defined by the PUCCH resources for Formats 1.x and Formats 2.x as:
	
MaxPucchResourceSize
nCqiRb
roundup
maxNumOfCce
n PucchAn
1
pucchNAnCs
deltaPucchShift
deltaPucchShift
*
/
*
3
/
*
/
3 12
8
roundup pucchNAnCs
	
Each UE will know the physical resource blocks to be used for transmission of PUCCH in slot 
ns from the following equations obtained from 3GPP 36.211
	
n
m
m
n
N
m
m
n
PRB
s
RB
UL
s
if
if
2
2
2
0
1
2
2
mod
mod
mod
mod2
1
	
Where the variable m depends on the PUCCH format.
For formats 1, 1a, and 1b:
	
m
N
n
c N
n
sf N
RB
PUCCH
cs
shift
PUCCH
PUCCH
cs
if
/
2
1
1
1
1 /
/
shift
PUCCH
sc
RB
shift
PUCCH
RB
cs
sf N
N
N
2
1
8
otherwise
	
	
Where
N
Number of cyclic shifts reserved for Formats x in th
:
:
.
cs
1
1
e mixed region
n
Cyclic Shift assigned to th
pucchnanCS
PUCCH
1
:
e UE for Formats x
Number of Cyclic Shifts used per RB
1.
:
shift
PUCCH
deltapucchshift
number of PUCCH resources reserved for
RB
N 2 :
formats x nCqiRb
2
	
Whereas for formats 2, 2a, and 2b: m = round down (cyclic shift assigned for Formats 
2.x/12)
In addition, the number of dynamic ACK/NACK channels can be correlated with the number 
of scheduled users at the same time. In the actual system, CQI/PMI/RI, SRI information of 
various reporting period may occur and PUCCH channel RB allocation can also according to 
the change of number of users, and therefore, PUCCH capacity will change with the adjustment 
of the resources allocation.

Capacity Optimization
151
4.3.2  PUCCH Dimensioning Example
The algorithm to assign slots for Formats2.x always assigns the slot with lower load first as a 
way of controlling the interference when there is low number of users per slot. Considering 
cqiPerNp =10 ms/1RB for Formats 2.x would be able to handle up to 120 UEs with 12 cyclic 
shifts. In a live network, the recommendation is not to use more than six cyclic shifts (i.e., 60 
users in this case). This means if it set nCqiRb =1, the PUCCH would not have enough capacity. 
The solution is to increase nCqiRb =2. In case the interference was still high in Format 2.x, it 
should be possible to continue increasing nCqiRb so number of users per slot is reduced further.
Every user in RRC connected mode requires to be assigned a Format1.x resource for 
scheduling resource requests. The maximum number of RRC connected users per cell is no 
less than 100 for the case of 10 MHz bandwidth.
In order to accommodate 100 resources for SR, considering a 10 ms SR periodicity (cellSr-
Period =10 ms), there would need to be 10 resources reserved per TTI, that is, n1pucchAn =10.
Dimensioning of the number of Format 1.x resources required for acknowledgments from 
dynamic scheduling is dependent on the maximum number of CCEs that are available for the 
PDCCH scheduling. For this example, a 10 MHz bandwidth with 1 PDCCH symbol per subframe 
is assumed. This leads to a maximum of 10 CCEs available.
The maximum number of acknowledgments that will be received per TTI depends on the 
number of UEs that can be scheduled per TTI. This is set by the parameter maxNumUeDl. The 
maximum value of this parameter depends on the bandwidth and for 10 MHz is 10 UEs.
Considering normal cyclic prefix, maxNumUeDl =10 and deltaPucchShift =2
	
Max Resources for Format
x per PRB
c
/
1
12
18
0
.
*
deltaPucchShift
Format
x Resource range
n pucchAn
1
1
10
10
20
.
Max CCE
Number of PRB required for Formats
x
Roundup
/
1
20 18
2
.
	
With two PRBs for Formats 1.x, we would have in total 36 resources per TTI out of which the 
first 10 are always reserved for Scheduling Requests according to the parameter n1pucchAn 
and the remaining 26 will be employed for acknowledgments of dynamic Ack/Nack scheduling 
depending on the position of the first CCE used in the PDCCH scheduling.
As it can be seen with the current configuration chosen a total of 10 CCEs are available, which 
means in theory we could schedule up to 10 users in the DL per TTI with aggregation level 1. In 
reality, PDCCH will schedule users in UL and DL and with different aggregation levels so with the 
current configuration it would be difficult to reach the maximum number of simultaneous users 
per TTI specified by parameter (maxNumUeDl =10). Even if this number would be achieved, the 
capacity reserved for dynamic Ack/Nacks supports up to 26 users so there would be no problem.
In the above configuration the mixed format region was not employed since no further 
capacity was required for Formats 2.x, therefore, pucchNaCs =0.
The total PUCCH region for the above given example would be 4 PRBs: 2PRB for Formats 2.x 
and 2 PRB for Formats 1.x. With above given configuration:
●
●For formats 2.x: m = round down (cyclic shift assigned for Formats 2.x/12) =2
Since nCqiRb = 2, the assigned cyclic shift format by the eNB will always be in the range 0 
to 23, which means for that for formats 2.x m = 0 and m = 1
●
●For formats 1.x:
	
m
n
n
1
18
18
1
1
1
if
otherwise
PUCCH
PUCCH
	
www.ebook3000.com

LTE Optimization Engineering Handbook
152
Knowing that the Format 1.x range is delimited to a maximum value of 20, this means that 
Formats 1.x will use m = 2 and m = 3.
4.4  ­Number of Scheduled UEs
The user throughput is impacted by the number of users in the cell. If an excessively large number 
of users have accessed the cell and eNB are exhausted when a UE accesses the cell, the user 
throughput will be low. The maximum number of active UEs is dependent on the RAN license. 
In fact, when the maximum number of users of the cell began to restricted, it can be improved 
by increasing inactivityTimer. Inactivity timer is a system parameter controlling the transition 
from RRC connected state to idle state.
●
●Actively scheduled user: the definition of the number of actively scheduled UEs are the 
scheduled UEs per TTI by eNB, there is a license feature on the eNB capacity. The No. of UL 
actively scheduled UEs is dependent on the channel of PRACH, SRS, and PUCCH, the No. 
of DL actively scheduled UEs is dependent on the channel of PHICH and PDCCH.
●
●Connected user: connected user is 3GPP defined concept, a connected user is defined as UE 
in the state of RRC_connected. UE is considered connected UE, if it has at least one DRB 
established. When a user is in RRC_connected state, it does not necessarily need to transfer 
any data. The maximum range for the amount of simultaneous connected users depends on 
the digital unit hardware, the number of RRC connected users is relevant for the radio net­
work dimensioning. Usually a single cell can offer no less than 1200 connected users.
●
●Attached user: the definition of a connected user is different from a simultaneously attached 
user. Simultaneously attached users in the EPC include users in both RRC_idle and RRC_
connected states. Another critical key distinction is that connected users is not equal to 
subscribers in the cell (including detached users).
The number of connected users is initially determined by considering the number of 
subscribers per site and the traffic profiles. Obviously, the more the subscribers the more 
licenses are required. The type of traffic and the amount of traffic also impacts the dimension­
ing. User plane activity statistics describe user plane traffic patterns and activity: when and 
how frequently subscribers are sending and receiving data packets. Figure 4.10 shows that the 
ratio between number of connected user and number of attached subscribers.
30,0%
15,0%
25,0%
10,0%
20,0%
5,0%
35,0%
0,0%
Day 1
Day 2
Day 3
Day 4
Day 5
Day 6
Day 7
% of Subs active last week, 61 sec timer
Attached
RRC connected
Figure 4.10  Connected users not more than 15% of attached subscribers.

Capacity Optimization
153
The calculation of the number of connected users should consider the below factors: inactivity 
timer,traffic profile, and other traffic related parameters.
The share of connected users depends heavily on the RRC inactivity timer, the lower the 
value (inactivityTimer,range 10…65535 s, step 1 s, default: 30s), the more connected users can 
be supported, the UE can switch from the active state to the idle state earlier. However, this will 
affect the user experience, when the new data service transmission occurs, the UE will fre­
quently to establish a session. The eNB triggers a RRC connection release procedure upon the 
expiry of tInactivityTimer. The UE context release request S1AP message is sent to the MME. 
The eNB sends the RRC connection release message to the UE and then clears all resources 
related to the UE. Whereas lower values of this parameter results in longer battery time, higher 
values of this parameter improves throughput and latency performance. Therefore, a good bal­
ance should be maintained between a higher value and a lower value. Setting parameter tInac-
tivityTimer to values too low results in too frequent releases of UEs, which result in an increased 
number of RRC set up attempts. The increased number of RRC set ups result in an over all 
increased signaling load on the network as traffic builds up in a network. Setting parameter 
tInactivityTimer to values too high results in some UEs using more system resources than 
needed. This could result in congestion in case of high traffic loads in the network. Figure 4.11 
shows the ratio of active subscribers for different terminal types during busy hour depending 
on the value of the inactivity timer.
4.5  ­Spectral Efficiency
Spectral efficiency is the user data transmission rate over a given radio bandwidth (1Hz). It is 
determined by multiple factors, including coverage, quality of signal, MIMO, and so on. From 
eNB available data, it can be estimated the spectral efficiency by modulation and coding scheme 
used (MCS), network layers overhead, control and signaling overhead and cyclic prefix over­
head. Modulation and coding scheme are related to the radio signal quality, that is, SINR. 
Overheads are the radio resources that cannot be used by the user application payload. Control 
and signaling overhead represents the resources cost for common and dedicated signaling. 
Cyclic prefix overhead is determined by the format of OFDM symbol transmission.
M2M (op1)
M2M (op2)
PC (op1)
PC (op2)
iPhone (op1)
iPhone (op2)
Android (op1)
Android (op2)
feature phone (op1)
feature phone (op2)
60%
50%
40%
30%
20%
10%
0%
2 sec
10 sec
60 sec
3600 sec
ratio pf active subscribers during busy hour [%]
inactivity timer [sec]
Figure 4.11  Connected users vs. RRC inactivity timer. (See insert for color representation of the figure.)
www.ebook3000.com

LTE Optimization Engineering Handbook
154
According to the spectral efficiency and the spectrum bandwidth, maximum cell throughput 
is defined with the assumption that there is enough data in the DL buffer to fill up all TTI. User 
throughput is calculated from the cell throughput and number of active UEs in scheduler. 
When there is less than one average active UE, the user throughput is equal to the spectral 
efficiency with the DL bandwidth.
	
CellThp
Spectrum Bandwidth Spectral Efficiency
max
_
_
	
	
Thp
Spectral
Efficiency
BW
Active UE
user
DL
_
max
,
_
1
	
DL spectral efficiency can be computed as:
Spectral Efficiency
_
.
T
T
D
PDCP
RLC
MA
u
s
OH
OH
OH
1
1
1
1
C
RTX
T
S
MIMO
W
Nbits
OH
RLC
MAC
s
BW
Mode
i
i
persymbo
1
1
15
&
li CRi
Tu is useful symbol time excluding cyclic prefix time. It is the part of the symbol that can be 
effectively used for data transmission. Ts is 0.5 ms/7 for normal cyclic prefix. DOH is DL over­
head of RE used for control and signaling information. CR is coding rate estimated using CQI 
reported from UE and CQI to MCS mapping table. SBW is equal to 15000 Hz.
4.6  ­DL Data Rate Optimization
In LTE, DL throughput is directly correlated with SINR. Typically, the UE has an algorithm to 
report CQI to the eNB depending on the SINR measurement. DL UE throughout increases as 
CQI increases or MIMO usage increases, and as DL iBLER decreases or UE‐eNB distance 
decreases. The general troubleshooting strategy is described in the following along with different 
factors responsible for poor throughput.
●
●Excessively high BLER (bad coverage)
●
●DL interference (bad CQI)
●
●MIMO parameters
●
●Scheduling algorithm
●
●Low demand
●
●CQI reporting frequency
●
●Other (VSWR, backhaul capacity)
Analysis flow for DL throughput investigation if backhaul or other physical issues work well.
●
●CQI and 64/16QAM ratio: average CQI and the ratio of 64QAM samples and RI (rank indi­
cator, decides how many codewords is used for the data transmission) indicates DL SINR 
status. Average CQI should be high (>10%), the ratio of 64QAM sample should be high 
(>10%).
●
●TM modes: MIMO (tm3) versus TxD (tm2) versus SIMO (tm1).
●
●UE scheduling percentage of TTIs (how often is the UE scheduled).
●
●PRB(DL) and PDCCH utilization: High PRB and PDCCH utilization would impact the DL 
throughput.

Capacity Optimization
155
●
●DL latency and RLC retransmission: High value of DL latency (>9 ms) and RLC retransmis­
sion (>1%) would impact DL throughput.
●
●Power limited UE and No. of A2 events: High occurrence of transport block PWR restricted 
and the counter of bad coverage report indicates poor DL coverage.
●
●RRC connected users: DL throughput would reduce with increase in number of con­
nected users.
Steps to troubleshoot low DL throughput
●
●Check to see the RF condition
●
●Check to see power setting is correct (40 watt; 100% parameter discrepancies)
●
●Check to see dl64QAM license is activated
●
●Check to see No of Tx antenna and No of Rx antenna, both of which should be 2
●
●Check to see if vswrSupervisionActive = true for both branches A and B
●
●Check to see the drive tester is using the right application server/port# when doing ­driving test
●
●Check to see the actual TX/RX powers (check RRU and connections)
●
●Check counters from vendor OSS
●
●Check whether the number of users in the cell is excessively large. If an excessively large 
number of users have accessed the cell and eNB are exhausted when a UE accesses the cell, 
the user throughput will be low.
●
●Check HSS profile that there is no APN‐AMBR or UE‐AMBR limitation, which can be 
checked in the message of S1AP_INITIAL_CONTEXT_SETUP_REQUEST. The default 
value of AMBR is more than 150 MB. Still the default QCI should be set correctly, QCI 
should be set „Non‐GBR,“ l the value can be 6, 8, 9, should not be 5 (QCI5 is used for IMS 
signaling, QPSK) or 7 (QCI7 is used for UM) as it can’t achieves the peak rate throughput.
IMSI ........................ xxxxxxxxxxxxxxx
CTXID ....................... 10
PDN TYPE .................... BOTH
AP NAME ..................... test-ap-2
QOS CLASS IDENTIFIER ........ 6
PRIORITY LEVEL .............. 2
PRE-EMPTION CAPABILITY ...... DISABLED
PRE-EMPTION VULNERABILITY ... DISABLED
VPLMN DYNAMIC ADDRE ALLOWED . YES
PGW ALLOCATION TYPE ......... DYNAMIC
CHARGING CHARACTERISTICS .... NORM
AMBR DOWNLINK ............... 20000
AMBR UPLINK ................. 65535
●
●Check if there is packet loss in transport network
●
●Change to Linux FTP server and optimize UE TCP settings
●
●Check whether relative license information is incorrect and if the license has not expired
●
●Check whether the traffic volume to the eNB is insufficient. A common reason for the insuf­
ficient input traffic volume is a bottleneck transmission bandwidth at an intermediate node.
One of the efficient way of poor throughput troubleshooting is by OMC counters as listed below.
●
●UL Interference on PUCCH/PUSCH: pmRadioRecInterferencePwrPUCCH/pmRadio­
RecInterferencePwr, for good throughput in UL_RSSI value should be low ‐105 dBm
●
●SINR of PUCCH/PUSCH: pmSinrPucchDistr/pmSinrPuschDistr
●
●PRB Utilization in DL/UL
www.ebook3000.com

LTE Optimization Engineering Handbook
156
●
●RLC ACK/NACK: pmRlcArqUlack/pmRlcArqUlNack, the total number of successful RLC 
PDU transmissions (ACKs/NACKs) in the UL direction, for good throughput in UL ‐UL 
RLC NACK ratio should be low
●
●CQI distribution in DL: for good throughput in DL‐ average CQI should be high (>10)
●
●Transport block PWR restricted
●
●Scheduling activity per cell in UL and DL
●
●Rank distribution MIMO/SIMO: for good throughput in DL‐ high samples of MIMO Rank 2 
are needed
●
●Number of A2 events (UE in poor coverage) :pmBadCovEvalReport
4.6.1  Limitation Factor
The focus of this kind of problem is the identification of bottleneck of the data rate. That is to 
say, whether it is limited because of the air interface, core network, or transmission? Usually, 
low data rate region is a weak coverage, no dominant cell area, so for the optimization of a 
region, the main coverage area, good RSRP, RSRQ, SINR is the optimization goal that must be 
achieved, the average user rate and the changes of number of users and RF environment are 
closely related. Actually, the analysis of low DL throughput is very complex, an example from 
Figure 4.12 that can be seen that low throughput is uncorrelated with DL SINR measured.
CQI and RI provides the SINR/antenna layer reception reports from the UE point of view. 
Understanding the relationship between chosen MCS, assigned PRBs, and assignable bits in 
the scheduler are important for sorting core network issues/UE issues from air interface issues. 
Scheduling percentage means the amount of TTIs (typically measured per second) that the UE 
was scheduled. This is also related to the resources allocated for PDCCH (control channels).
In some networks, average UE DL rate target is 1Mbps, and the vast majority of users should 
achieve the rate. Low backhaul capacity likely will have an impact on the rate, especially for 
high load cell. In addition, the settings on the server and tests computer must check to ensure 
that it will not become the bottleneck of the rate limiting.
80000
70000
60000
50000
40000
30000
20000
10000
0
–6
–3
0
3
6
9
12
15
18
21
24
UE RS SINR (dB)
Low throughout uncorrelated
with DL SINR measured
PDSCH phy Throughput [kbps]
Figure 4.12  DL throught versus RS SINR (2.6GHz).

Capacity Optimization
157
In conclude, the impacted factors of low throughput includes UL/DL bandwidth, signaling 
quality (CQI, SINR, MCSs), number of DL bearers, QoS (QCIs, GBR), transmission mode 
(SISO, MIMO, TxDiv), backhaul delay (RTT‐affecting on ACK‐ed traffic), UE capacity, UL 
power control (TPC command), scheduler, and so on. Before investigating any throughput 
issues, it is best to rule out the most obvious and basic issues that might affect end‐user 
throughput. Some essential checks are required, for example, network basic troubleshooting, 
radio network parameters, PC/server settings, UE categories, UE subscriber profile,1 eNB 
parameters, and network enabled features, and so on. Sometimes laptop specification, FTP 
server configuration, or Linux TCP setting can impact throughput (processors, memory, USB 
bus, HDD speed, plugged into AC power, etc.). MTU settings in PC (can cause fragmentation 
on S1, especially with IPSEC on GTP‐U) can also impact throughput.
4.6.2  Model of DL Data Throughput
The model of LTE DL throughput and its influencing factors can be categorized as time domain, 
radio domain, and efficiency domain.
Time domain, the main factors includes PDCCH DL grant, it needs to check the number of 
scheduled per TTI if it gets enough scheduling.
1)	 Cell loading and number of active UEs.
2)	 FTP server performance.
3)	 Check data amount to see if it has been injected enough DL data to eNB to schedule, if 
there’s insufficient input traffic volume, throughput is definitely lower than the max value.
4)	 Compress mode for inter‐frequency measurement.
Radio domain, the main factors includes number of scheduled RB per subframe, which can 
be got from OMC counters.
1)	 Cell loading and number of active UEs.
2)	 FTP server performance.
3)	 eNB alarm, for example, VSWR alarm, RF alarm or RRU low power alarm.
4)	 Parameter of PA/PB is not reasonable; power amplifier efficiency is not 100%.
5)	 Interference of some PRB.
The factors of efficiency domain include RSRP, CRS_SINR, CQI/RI, DL MCS, TBS, coding 
rate, transmission mode, and re‐transmission rate. Figure 4.13 shows the relation of PDSCH 
throughput versus RSRP (left) and SNR (right).
1  UE subscriber profile consists of MSISDN number, aggregate maximum bit rate (AMBR), max requested 
bandwidth in downlink/uplink, RAT frequency selection priority, APN configuration profile.
Figure 4.13  PDSCH throughput versus RSRP and SNR.
www.ebook3000.com

LTE Optimization Engineering Handbook
158
The eNB needs knowledge of the CQI conditions of DL transmission to a UE in order to 
select the most efficient MCS/PRB combination for a selected UE at any point in time. 
Figure  4.14 shows the probability of different modulation schemes in DL versus different 
reported CQI values.
Table 4.6 shows the ideal layer1 DL bits per scheduling block for different antenna/radio 
configurations.
In conclude, the following radio network parameters directly impact end‐user throughput: 
channel bandwidth, number of used Tx/Rx antennas, transmission mode, number of OFDM 
symbols used for PDCCH, maximum transmission power, p0NominalPucch (some UEs need this to 
be increased or ACK/NACKs are not received successfully on PUCCH), and p0NominalPusch 
(some UEs need this to be increased from default or lots of errors seen on PUSCH), and so on.
4.6.3  UDP/TCP Protocol
For LTE throughput optimization, if FTP throughput is bad, it is often difficult to pinpoint if 
this is caused by radio, transport, or TCP setting problem, as the engineer can test with UDP to 
check as UDP shows higher throughput because it is not as affected as TCP. UDP tests were 
subsequently performed to validate results and better represent achievable throughput perfor­
mance. If UDP throughput is good, then it is a transport or TCP setting problem. When trans­
port had problems (discarded packets observed), it would cause retransmissions and TCP 
congestion control to reduce throughput. If UDP throughput is also bad, then it’s probably a 
radio problem. It could be either interference or parameters settings are incorrectly, also might 
be a problem with HSS profile (Figure 4.15).
UDP is a simple data transmission protocol with 8 byte header based on IP that does not pro­
vide guarantees for transmission reliability nor for data integrity. As it maintains a connectionless 
8
3
4
5
6
7
9
10
11
12
13
14
15
100%
90%
80%
70%
60%
50%
40%
30%
20%
10%
0%
Probability
Reported CQI
45
40
35
30
25
20
15
10
5
0
QPSK
16QAM
Modulation format
64QAM
% of samples
QPSK
16QAM
64QAM
Figure 4.14  Modulation probability versus CQI in a live network.

Table 4.6  DL bits per scheduling block.
dlCyclicPrefix = 15 KHz => 7 OFDM symbols
T× Diversity
2×2 MIMO
Resource Elements per Resource Block
84
168
RE per Scheduling Block (2 × RB)
168
336
RS RE (per RB)/RS RE (per Scheduling Block)
8/16
16/32
Control Region Size in OFDM symbols
1
2
3
1
2
3
RE per CRS (OFDM*12 − 4 RS Tx), (OFDM*12 − 8 RS MIMO)
8
20
32
16
40
64
Tot Num RE per Scheduling Block available for PDSCH  
(best case w/o SCH/BCH)
144
132
120
288
264
240
Bits per Scheduling Block ‐ QPSK (2)
288
264
240
576
528
480
Bits per Scheduling Block ‐ 16QAM (4)
576
528
480
1152
1056
960
Bits per Scheduling Block ‐ 64QAM (6)
864
792
720
1728
1584
1440
20 MHz Max Theoretical L1 Thrpt (Mbps)
86.4
79.2
72
172.8
158.4
144
Tot Num RE per Scheduling Block available for PDSCH  
(worst case with SCH/BCH in SB) SCH = 24, BCH =  
4 × 12 − 4 per CW
76
64
52
152
128
104
Bits per Scheduling Block ‐ (QPSK)
152
128
104
304
256
208
Bits per Scheduling Block ‐ (16QAM)
304
256
208
608
512
416
Bits per Scheduling Block ‐ (64QAM)
456
384
312
912
768
624
Average of Phy DL TP[Mbps]
Average of Serv Cell RSRP
Average of Serv Cell CINR
11:07
11:07
11:07
11:07
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
11:08
100
90
80
70
60
50
40
30
20
10
0
DL throughput, UDP
–75
–80
–85
–90
–95
–100
–105
–110
RSRP [dBm]
CINR [dB], DL PHY tput [Mbps]
Average of Phy DL TP[Mbps]
Average of Serv Cell RSRP
Average of Serv Cell CINR
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
10:59
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
11:00
100
90
80
70
60
50
40
30
20
10
0
DL throughput, FTP
–75
–80
–85
–90
–95
–100
–105
–110
RSRP [dBm]
CINR [dB], PHY DL tput [Mbps]
Figure 4.15  UDP versus TCP, same drive route for both.
www.ebook3000.com

LTE Optimization Engineering Handbook
160
state it does not provide any reliability in terms of ordered delivery and duplicate protection 
and does not also provide any means of congestion control. Thus, for UDP traffic, no feedback 
channel is necessary. This means that UDP data transfer in DL in principle does not need UL 
traffic (of course, some UL traffic is necessary for lower layer functions). Hence, measuring the 
DL data throughput using UDP may be possible even with a bad UL quality.
TCP is a much more complex protocol than UDP, since it provides a low delay and reliable 
byte stream based on IP. TCP is a connection oriented, point‐to‐point, reliable transport pro­
tocol. TCP has its built in congestion management algorithm such as fast retransmission and 
fast recovery. The minimum TCP header is 20 bytes. This is achieved by sending an acknowl­
edgment from the receiver to the sender for each TCP segment that has been delivered on the 
receiver side to the higher protocol layer. In the current context this means that a TCP data 
stream in DL requires a UL connection with sufficiently good quality, and using TCP reduces 
the throughput due to acknowledgments and retransmissions. The maximum throughput that 
can be reached by TCP is given by the “TCP window size” (wnd, iperf parameter –w) divided 
by the round trip time (RTT). This is because the TCP sender stops sending data if the acknowl­
edgment for the last sent segments is missing. Assuming an RTT of 20 ms (=1/50 s), the TCP 
window size must be set to at least x/50 bytes, if x is the expected TCP throughput in bytes/s.
Example: For reaching 24 Mbps (= ~3 Mbyte/s) throughput on a connection with 20 ms RTT 
the TCP window size must be at least (3 Mbyte/s) * 0.02 s = 60 Kbyte.
In order to avoid bandwidth limitation because of an insufficient TCP window size, it is rec­
ommended to set the TCP window size to 256 Kbyte or more.
Besides, MTU (maximum transmission unit) is another factor that can cause fragmenta­
tion on S1 interface and influence the throughput. If there is a datagram needs to be trans­
mitted at the IP layer, and the datagram is larger than MTU, then the IP layer needs to 
segment the datagram into smaller fragments that are smaller than MTU. To improve effi­
ciency, it is necessary to avoid IP segmentation and reassembly during PDCP <‐> GTP 
translation, as well as to set MTU to a value as large as possible. Usually, MTU should not 
be greater than 1450 bytes. For example shown in Figure 4.16, compared with MTU=1400B 
(right), for MTU=1500B settings (left), the same UE cannot reach max FTP throughput, the 
FTP throughput =~41Mbps, MTU=1500Bytes 
FTP throughput = ~87 Mbps, MTU = 1400 Bytes
Figure 4.16  FTP throughput with different MTU size.

Capacity Optimization
161
throughput fluctuates unpredictably. The reason is probably fragmentation/reassembly 
somewhere in the network, when sets MTU=1360Bytes by default, there is usually no IP 
fragmentation even with S1 IPsec.
In summary, TCP has shown to be non‐optimum in wireless networks as it was primarily 
designed in the 1990 for wired network, thus wireless network have however evolved to adapt 
slowly to TCP. It is worth mentioning, because the UL data sessions are mostly very small and 
due to a TCP slow start, they do not reach the maximum achievable throughput levels before 
session end.
4.6.4  MIMO
With multiple antennas at both transmitter and receiver, it is possible to achieve spatial mul­
tiplexing or beamforming. eNB automatically selects the most appropriate diversity, beam­
forming or depending on radio conditions. The maximum number of layers that can be 
created depends on the radio channel characteristics and the number of transmit and receive 
antennas and the channel rank. Dynamic open/close loop MIMO, open/close loop TxDiv, and 
open/close loop spatial multiplexing (SM) switching decision is based on RI and CQI. The 
parameters of RI and CQI are the thresholds that are used by DL scheduler to decide the 
transmission scheme switching decision between Rank1 beam‐forming, TxD, and spatial 
multiplexing mode.
4.6.4.1  DL MIMO
This section focuses on the DL throughput optimization via adjusting the MIMO mode switching 
parameters.
In the adaptive MIMO mode, the switching between TxDiv and spatial multiplexing (SM) is 
governed by the CQI and RI feedback from the UE. In order to maximize cell capacity it is 
desirable for the UE to employ SM when it is located under good radio conditions (typically 
SINR> 20 dB) and to switch to TxDiv when radio conditions are not so favorable. Figure 4.17 
plots the expected layer 2 throughput for different SINR values derived from link level 
simulations for EPA5 for a 10 MHz bandwidth.
For low SNRs, TX diversity gives slightly better throughput than SM, since the power from 
both eNB TX antenna is aggregated to decode one code word. This is in line with theoretical 
simulations. For high SNR, SM gives much higher throughput than TX diversity, since two 
70000
60000
50000
40000
30000
20000
10000
0
Throughput [kbps]
DL C(I+N) - dB
DL Throughput vs DL C(I+N) Thresholds
QPSK => 16QAM
16QAM => 64QAM
TxDiv => SM
–6
–4
–2
–1
1
2
4
6
7
9
11
13
15
16
19
26
28
31
32
Figure 4.17  DL throughput versus SINR and switching SINRs based on simulations.
www.ebook3000.com

LTE Optimization Engineering Handbook
162
code words are sent at the same time. Although the two cases are static TX diversity and SM, 
the switching point could be around SNIR = 10 to 13 dB for dynamic adaptation of MIMO 
mode (open loop or closed loop MIMO) as shown in Figure 4.18. Optimum switching point is 
suggested to be at around SNIR = 18 dB for UEs at medium speed of 5 to 30 km/h.
Antenna correlation and antenna power imbalance are the key factors affect the MIMO per­
formance. Both of these factors increase the SNR difference between streams. In order to mini­
mize antenna correlation needed to consider practical deployment, power imbalance between 
antenna branches were discussed in Chapter 3. Figure 4.19 shows a measurement example with 
a real UE and antenna correlation artificially altered with a fading simulation, which are the 
terms of different degrees of correlation.
In order to switch from SM to TxDiv, it is required for the CQI‐ or RI‐averaged values to be 
below certain thresholds (RiThreshold2 and CqiThreshold2) defined for these two metrics. In 
order to switch from TxDiv to SM it is required for the CQI and RI averaged values to be above 
25
20
15
10
5
0
–4
–2
0
2
4
6
8
10
12
14
16
18
20
22
24
26
28
30
32
34
Throughput (Mbps)
TxDiv Throughput (Mbps)
SINR (dB)
SM Throughput (Mbps)
SM Throughput (Mbps)
TxDiv Throughput (Mbps)
Figure 4.18  DL throughput versus SINR.
100%
80%
60%
40%
20%
0%
–7
–5
–3
–1
1
3
5
7
9
11
SNR
13
15
17
19
21
23
25
27
MIMO Usage Probability
CqiThreshold1
CqiThreshold2
CQI
SM
SM
Time
RiThreshold1
RiThreshold2
RI
Time
Filtered
cqi, ri
Figure 4.19  MIMO mode versus measured SNR in unloaded network.

Capacity Optimization
163
a certain thresholds (RiThreshold1 and CqiThreshold1) defined for these two metrics. The 
recommended values for these parameters involved in the open loop dynamic MIMO are:
●
●RiThreshold1 = 1.8, RiThreshold2 = 1.4, CqiThreshold1 = 11, CqiThreshold12 = 9
The thresholds defined for the switching are based on the CQI/RI, allow for hysteresis. 
Depending on the difference between these up and down thresholds the switching between the 
modes will be faster or slower.
4.6.4.2  4Tx/4Rx Performance
It is known that four‐antenna cell application has been widely used in networks, which can be 
used to extend the cell coverage and increase user data rates. The main motivation for 4TX/4RX 
is enhanced coverage and enhanced cell‐edge data rates. Compare with 2TX/2RX and 
4TX/4RX, the average improvement in the user data rate was +50% in UL and +25% in DL. The 
data volumes increased even more because the cell coverage area also increased.
The typical antenna solution for 4TX/4RX is XX‐polarized antenna in a single radome. The 
number of antennas is not increased compared to 2TX/2RX but the antenna just gets slightly 
wider, which is shown in Figure 4.20. Another antenna option would be two separate X‐polar­
ized antennas, which would be more difficult for the site solution. The simulations and the field 
measurements indicate that XX‐polarized antenna gives better performance.
4Rx can improve UL coverage for all channels, the cell average bit rate and primarily the 
cell‐edge bitrate. With 4Rx, interference rejection combining (IRC) generally improves the per­
formance when 4‐way Rx diversity is used. Figure 4.21 shows that due to 4RX, cell‐edge is 
extended with MIMO 4x2 versus 2x2, and cell‐edge UL throughput gets a better performance 
due to the antenna spatial diversity and up to 3 dB of coverage improvement. With the IRC 
feature activated, the system dynamically switches between the combining methods IRC and 
maximum ratio combining (MRC) depending on interference situation.
4.6.4.3  Transmission Mode Switch
3GPP Rel 9 defines multiple transmission mode, which is controlled by RRC; mode switching/
selection is higher layer configured and on a slow basis (several seconds) in order to ensure 
optimum UE DL throughput and performance.
The transmission mode is selected based on wideband SINR and UE speed. The CQI report 
is firstly mapped to SINR, then sum over streams (in case of rank 2) and finally average over 
frequency. The beamforming weighting factor is based on periodic SRS (10 ms), SRS Rx_SINR 
impacts to beamforming weighting factor is considered. Beamforming performs good enough 
for high speed even with 350 km/h coverage due to intra‐polarization beamforming. This still 
can give higher gain than broadcasting and inter‐cell interference of beamforming is more 
Single XX-pol antenna
Two X-pol antennas
Figure 4.20  Antenna options for 4TX4RX.
www.ebook3000.com

LTE Optimization Engineering Handbook
164
robust to FSS performance. But TM3 provides higher peak rate due to more robust to SRS 
channel estimation error and SRS capacity problem.
TM3/TM8 inter‐mode switch is based on the DL SINR estimation in eNB. TM3 is used in 
good RF condition to get better DL throughput. TM8 is used in poor and middle RF condition 
to get better throughput by utilizing beamforming gain. But in rapid fading channel, TM8 may 
have worse performance than TM3 as shown in Figure 4.22.
From Figure 4.22, it can be seen that TM3/8 switch has lower throughput than TM3 and 
TM8 below SINR 23 dB and high DL BLER in high SINR environment in TM8.
4.6.4.4  UL MU‐MIMO
Contrary to DL, 3GPP Rel 8 and 9 do not standardize single user MIMO in UL, UE is able to 
transmit only one stream of data, instead multi‐user MIMO (or virtual MIMO, V‐MIMO) is 
supported, which allows pairs of UEs with appropriate radio conditions to be scheduled on the 
same time and frequency radio resources. Usually with SINR threshold and DoA threshold, 
UEs can be filtered to be paired. The pairing criterions are based on radio conditions of 
individual UEs and potential pairs (othogonality), pairing candidates are chosen from among 
the UEs that are to be scheduled in the same TTI. Advanced eNB receiver is needed to be able 
to separate data streams from MU‐MIMO UEs.
Othogonality between the UEs got from the SRS soundings is obtained from the channel 
coefficients of UE pairs. Orthogonality is a wideband value. Calculation of the channel vec­
tor is done in the same way as long term beamforming vector (hi, hi are also wideband 
values).
	
O
h
h
h
h
ij
UEi
UEj
UEi
UEj
1
2
*
	
Only the UE pairs with wideband orthogonality metric above the threshold can be considered 
for pairing. UE pairs with low orthogonality will interfere one another too much, as MU‐MIMO 
receiver implementation does not cancel the interfering UE.
0
10
20
30
40
50
60
Path Loss (dB) 
0
5
10
15
20
25
Path Loss (dB)
DL Tput (Mbps): 4RX
DL Tput (Mbps): 2RX
DL Tput (Mbps): 4*20 W
DL Tput (Mbps): 2*20 W
DL Tput (Mbps): 4*10 W
–75
–80
–85
–90
–95 –100 –105 –110 –115 –120 –125
–75
–80
–85
–90
–95 –100 –105 –110 –115 –120 –125
DL Tput (Mbps): 2x20 W
DL Tput (Mbps): 4x10 W
DL Tput (Mbps): 4x20 W
UL Tput (Mbps): 2RX
UL Tput (Mbps): 4RX
DL Tput
UL Tput
Figure 4.21  DL and UL throughput versus 
pathloss.

Capacity Optimization
165
In single‐user mode preliminary MCS is calculated based on the wideband SINR measure­
ment provided by physical layer. UEs that are scheduled in MU‐MIMO mode will be assigned 
with MCS lower than in single user mode.
Assuming SINRSIMO(i) and SINRSIMO(j) as the UL wideband SINR of UE i and UE j before 
pairing respectively, the UL wideband SINR of UE i after pairing SINRMU‐MIMO(i) and 
SINRMU‐MIMO(j) are:
	
SINR
i
O
SINR
j
SINR
j
SINR
MU
MIMO
ij
SIMO
SIMO
1
1
*
*
SIMO i ;
	
	
SINR
j
O
SINR
i
SINR
i
SINR
MU
MIMO
ij
SIMO
SIMO
1
1
*
*
SIMO j ;
	
The scheduling metric relative SINR for the whole UE pair is calculated by averaging over 
two relative SINR of UEs in the UE pair. It notes that when both of the MU‐MIMO multiplexed 
TB shall be re‐transmitted, they shall not be multiplexed instead of with non‐overlapped RBs 
allocation.
4.6.5  DL PRB Allocation and Utilization Mechanism
In order to reduce the inter‐cell interference in low load scenarios, an enhancement of the 
resource utilization optimized strategy in live network is introduced. The start index of resource 
80000
70000
60000
50000
40000
30000
20000
10000
0
–17 –14 –11 –8 –5 –2
1
4
7
10
13
16
19
22 25 28
DL PHY throughput (kb/s)
DL BLER (%)
20
15
10
5
0
–17 –14 –11 –8
–5
–2
1
4
7
10
13
16
19
22
25
28
Fast fading
TM38
TM3
TM8
Figure 4.22  DL throughput versus 
transmission mode.
www.ebook3000.com

LTE Optimization Engineering Handbook
166
allocation is based on ICIC feature for decreasing the PRB collisions between cells as shown in 
Figure 4.23.
In this way, cell‐edge users (cell‐edge/non‐edge classification is done using the event A3) are 
prioritized for allocation close to the start index. Usually, an operator starts the PRB allocation 
at the start index with “cell‐edge VoIP” UEs, continuing with “cell‐edge best effort” UEs, and 
finally continuing with “non‐edge” UEs.
After change PRB start position offset, the expected gain in non peak hour is obvious, but not 
in busy hour. From Figure 4.24, it can be seen that in a non‐peak hour, a 194 kbps improvement 
(11:00‐16:00) for DL user throughput that there is no changes in a BH.
In live network, trying to avoid high PRB utilization is necessary. There are very limited 
means of reducing of PRB utilization. However, some of these methods can be tried on case‐by‐
case basis.
●
●Traffic offload to less utilized neighboring cells
●
●Reduce control channel resources (Before that check PDCCH utilization)
●
●Add bandwidth as bandwidth increase would increase number of PRBs
●
●Reduce inactivity timer value so that inactive user can be released early.
0
0
0
0
67
67
67
34
34
34
0
0
0
0
0
0
0
0
0
Configured
Starting point for allocations
Starting point for allocations
PRB Collision
Parameter
Current
Proposal
dlConfigurableFrequencyStart 
0
S1 = 0, S2= 34, S3= 67
Change
parameter-PRB
start position
offset  
0
Figure 4.23  PRB start position offset.
No Change
450
400
350
300
250
200
150
100
50
0
User
7000
6000
5000
4000
3000
2000
1000
0
Throughput (kbps)
3/15 11:00
3/15 12:00
3/15 13:00
3/15 14:00
3/15 15:00
3/15 16:00
3/15 17:00
3/15 18:00
3/15 19:00
3/15 20:00
3/15 21:00
3/15 22:00
3/15 23:00
3/22 11:00
3/22 12:00
3/22 13:00
3/22 14:00
3/22 15:00
3/22 16:00
3/22 17:00
3/22 18:00
3/22 19:00
3/22 20:00
3/22 21:00
3/22 22:00
3/22 23:00
RRC User
Active User DL
DL User Throughput
DL Cell Throughput
Figure 4.24  Throughput gain after PRB start position offset changed.

Capacity Optimization
167
It is worth noting that UL PRB utilization grows very rapidly compared to the DL because 
there is no MIMO or 64QAM in UL, therefore, the UL efficiency is much less compared to the 
DL. From Figure 4.25 it can be seen that for 400Kbps throughput, ~20% PRB utilization in DL 
and ~90% PRB utilization in UL.
4.6.6  DL BLER
There is a strong correlation between high BLER and low throughput, so it is clear that the 
issue is purely in RF, not an issue for any backhaul/transport problems. In most cases, ratio of 
retransmission is the major impact factor for throughput, BLER (block error rate) is needed to 
check in case of problem. BLER loop convergence algorithm provides the link adaptation in 
order to meet the target BLER. DL and UL link adaption are targeting to sustain certain BLER 
for the first transmission. iBLER (initial BLER) can be expressed as:
	
iBLER
f TBS coding rate modulation SINR
,
,
,
	
BLER target denotes the initial BLER target that is used to determine MCS together with CQI. 
BLER target is defined by parameters dlTargetBler and ulTargetBler. Default value for both 
parameters is 10%. BLER target could be changed and optimized for different radio envi­
ronments. If the BLER is higher than 10%, the channel condition is poor and will result in low 
throughput.
BLER is a metric that eNB controls within a configurable target (DL initial BLER target) to 
optimize the RF operation. Too‐high BLER performance beyond the target often indicates 
some aspect of RF problems. In live network, DL iBLER is below 10% when the average CQI is 
above 4. DL UE throughput is decreasing as DL iBLER increases, DL iBLER is decreasing as 
average CQI increases (i.e., RF improves), which is shown in Figure 4.26.
The expected range of iBLER is between 5% and 15%. If the performance is significantly (e.g., 
more than double) poorer, it may be usually caused by several reasons:
●
●UE RF estimate accuracy issue with CQI report – for example, CQI reports are much inflated 
comparing with UE’s actual RF condition
0
10
20
30
40
50
60
70
80
90
100
0
200
400
600
800
1000
1200
1400
1600
DL average PRB utilization
UL average PRB utilization
Figure 4.25  Average PRB utilization.
www.ebook3000.com

LTE Optimization Engineering Handbook
168
●
●UE’s tx power or RF condition is poor such that the ACK/NAK it sends over UL is too weak 
for eNB to detect
●
●UE’s RF is very poor such that it misses frequently the DL grants forcing eNB to retransmit 
the packets.
High BLER caused by inter‐cell interference
In this scenario, it have really good CINR value and really good RSRP value, but inter‐cell 
interference where in the reference signal (RS) from an adjacent sector interferes with the traf­
fic resource blocks in the serving sector can be seen. The signature to look for is high RSRP, 
high CINR, and very high BLER, greater than 10%. As a result of the link adaptation deployed 
Average of DL iBLER
DL iBLER distribution
0
0
0.00
0
5
10
15
20
25
30
35
40
45
50
55
60
65
70
75
80
85
90
95
100
0
10
20
30
40
50
60
70
80
2.00
4.00
6.00
8.00
10.00
12.00
14.00
16.00
14.63
10.54
8.70
7.51
6.21
5.01
4.16
3.50
3.05
2.60
2.18 1.78
1.42
1.01
0.72 0.58 0.34 0.18
0.00 0.12
0.00
DL UE Throughput (Mbps)
DL iBLER (%)
CQI Index
Average UE DL throughput
UE DL throughput distribution
DL iBLER (%)
10
20
30
40
50
60
70
80
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
Figure 4.26  DL iBLER versus CQI and DL UE throughput versus DL iBLER.

Capacity Optimization
169
in LTE, the eNB would start reducing the MCS (modulation and coding scheme) given to 
the UE.
DL residual BLER
One of the possible issues that could lead to the decrease of throughput is related with the 
excess of residual BLER. In order to evaluate this possible issue, it is advised to check the DL 
residual BLER distribution that it is based on measurement of number of MAC PDUs that are 
not acknowledged by the UE after the maximum allowed number of transmissions. The DL 
residual MAC BLER is distributed by different intervals as it follows:
●
●DL BLER low (from 0% to 1%)
●
●DL BLER low‐medium (from 1% to 2%)
●
●DL BLER high‐low (from 2% to 5%)
●
●DL BLER high‐medium (from 5% to 10%)
●
●DL BLER high (above 10%)
With the intervals above, means that it must have the samples as much as possible on the low 
BLER classification.
An example of incorrect setting of BLER target is shown in Figure 4.27. In the site A base 
station, the cell download rate is too low (20Mbps), MCS is also low, but RSRP and DL SINR is 
pretty good, and 16QAM ratio is high, while BLER is low.
By preliminary analysis, the phenomenon is not caused by interference. It is found that DL BLER 
target value is configured at 1%, so that scheduler will decrease MCS to guarantee BLER target.
For FTP service, it does not require such a high BLER requirements, and this will lead to not 
be able to use higher‐order MCS, which leads to low download rate. After modified DL BLER 
target from 1% to 10%, DL data rate can achieve above 35Mbps.
4.6.7  Impact of UE Velocity
The DL throughput is impacted by UE velocity. The network performance influence by UE 
velocity relative to eNB is shown in Figure 4.28, negative velocity means that UE is moving 
closer toward eNBs, and positive velocity means thet UE is moving farther away from eNBs.
The UE velocity group X stands for group [X, X+10], UE mobility may help or harm RF 
­condition (i.e., CQI), the UE experiences and thus DL UE throughput.
Figure 4.27  BLER target issue example.
www.ebook3000.com

LTE Optimization Engineering Handbook
170
From Figure 4.28, it can be seen that as UE velocity increases, average UE DL throughput and 
CQI decreases a bit, while DL iBLER increases.
4.6.8  Single User Throughput Optimization
This part is focused on the radio analysis to improve the DL single user throughput.
Single‐user throughput optimization needs UE trace logs to spot the problem. Here we pre­
sent an example of trace parses. This example is a modified output of DL, which summarizes a 
number of traces onto one line, like transmission mode, MCS (modulation and coding scheme), 
PRB occupied, TBS (transport block size), assignable bits, HARQ, CQI/RI, DL BLER, and so 
on. Note how RI=2 is reported, then transmission changes from TxDiversity to MIMO. HARQ 
ACK/NACK refers to the transmission four subframes earlier.
–80
254
8.43
8.80
10.59
11.40
11.11
10.20
9.74
10.50
11.97
10.91
547349
9.95
10.59
10.72
10.67
10.57
10.61
739
1268
2614
4317
8690
21891
29756
46431
12438
5890
3816
2207
1438
479
100000
200000
300000
400000
500000
600000
0
0.00
2.00
4.00
6.00
8.00
10.00
12.00
16.00
14.00
Average of UE_DL_Thp(Mbps)
Average of Avg_CQI_Reported(Overall)
UE Velocity group (MPH)
DL UE Throughput, CQI, DL iBLER v.s UE Velocity Reative to eNB
Sample Count
DL UE Throughput(Mbps), CQI, DL iBLER (%)
Average of DL iBLER(%)
Count of UE_DL_Thp(Mbps)
–70
–60
–50
–40
–30
–20
–10
0
10
20
30
40
50
60
70
Figure 4.28  Impact of UE velocity (relative to eNB).
sfn|sf |mode|dlModul|mcs1 |mcs2 |prb |Ndf |Tbs1|Tbs2 |AssBits| Harq |dlBler | cqi |ri |
280| 4 |TxDi| 64QAM | 16 |
0
| 25 |  Y |7736|
0|8771784|
|
| 11 | 2 |
280| 5 |
|
|
|
|
|
|
|
|
| A
|
0%
|
|
|
280| 6 |TxDi| 64QAM | 18 |
0
| 25 |  Y |7992|
0|8764088| A
|
0%
|
|
|
280| 7 |TxDi| 64QAM | 18 |
0
| 25 |  Y |7992|
0|8756144| A
|
0%
|
|
|
280| 8 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8748192| A
|
0%
|
|
|
280| 9 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8736760|
|
|
|
|
281| 0 |MIMO| 16QAM | 12 | 12 | 25 |Y Y |4968| 4968|8737384| A
|
0%
|
|
|
281| 1 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8763568| N
|
0%
|
|
|
281| 2 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8776208| N N |
2%
|
|
|
281| 3 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8800856| N N |
4%
|
|
|
281| 4 |MIMO| 16QAM | 13 | 13 | 25 |Y Y |5736| 5736|8825504| N N |
6%
|
|
|
281| 5 |TxDi| 16QAM | 30 |
0
| 25 |  N |7992|
0|8862160| N N |
8%
|
|
|
281| 6 |MIMO| 16QAM | 30 | 30 | 25 |N N |5736| 5736|8862200| N N |
10%
|
|
|
281| 7 |MIMO| 16QAM | 30 | 30 | 25 |N N |5736| 5736|8862200| A A |
10%
|
|
|

Capacity Optimization
171
4.6.8.1  Radio Analysis – Assignable Bits
If the UE is sending with high CQI (in the range 10 to 15) and RI=2 but throughput is still very 
low, then the next check should be assignable bits. Assignable bits means the amount of data in 
the DL buffer available for the scheduler to schedule for this UE. A classic symptom of low 
assignable bits is that the UE is scheduled with a high MCS but a low number of PRBs. This 
scheduler strategy maybe attempts to send with the highest possible MCS and least number of 
PRBs so that leftover PRBs could be assigned to another UE, or, another symptom is that the 
UE is not scheduled every TTI (and nothing else is available to schedule).
Possible causes for low assignable bits include data received from core network is not enough 
to fill the RLC buffers in eNB and RLC status messages are not being received fast enough and 
RLC buffers are full. RLC status messages are sent between eNB and UE to inform about lost 
RLC packets.
It needs to check that non‐TCP based traffic is not being sent with too large packet size. For 
iperf‐based traffic, the recommended MTU size is 1360 bytes (default is 1470). For RLC status 
messages not being received fast enough, it needs to check that RLC discards which will trigger 
TCP congestion control and lower throughput (discards on UDP traffic will not affect throughput).
4.6.8.2  Radio Analysis – CFI and Scheduling
SIBs require PDCCH resources, typically SIBs consume four or eight CCEs of PDCCH 
resources. If a UE is in good SINR conditions, the scheduler may allocate only one CCE for that 
UE. In that case, because of limited positions in PDCCH, it is quite likely that a PDCCH colli­
sion occurs especially in low system bandwidths.
If a UE is in bad SINR conditions, the scheduler may allocate a large number of CCEs for that 
UE (two or four or eight CCEs) depending on the configured CFI there may only be common 
search space available or it may still collide with other PDCCH users when other DL users are 
scheduled.
4.6.8.3  Radio Analysis – HARQ
Each transport block transmission is represented as a HARQ process. Each HARQ process 
data is held in memory until NDI is toggled (NDI – new data indicator2 (physical layer bit tog­
gled for new data, i.e., new data is to be sent). This allows fast retransmission of erroneously 
received data. The scheduler’s representation of an HARQ process is as follows: feedback sta­
tus (ACK, NAK, DTX, Pending), TBS, MCS, and RV (redundancy version, HARQ has 4 redun­
dancy versions, rv0, rv2, rv3, rv1).
Increasing the default number of transmissions means that RLC parameters also need to be 
modified and will require larger RLC buffers. The parameter tPollRetransmit also impacts the 
DL throughput; as the RLC send data by AM transmit mode, receiver will feedback ACK/
NACK to transmitter, and if time is out of the value of tPollRetransmit, the transmitter will 
retransmit related PDU, so the value of tPoll is important and the recommended value is 
tPollRetransmit=40 ms.
If tPollRetransmit set too low, it will result to premature initiated retransmission rather than 
received ACK/NACK, this is due to a time out in advance. This will affect the normal transmis­
sion and reduce data rate. If tPollRetransmit set too high, it will lead to delay in the launch, can 
not quickly complete the normal transmission, resulting in a decline in data rate. Table 4.7 gives 
the field test of the responding UE PDCP throughput, RB Num/slot and percentage of lower 
than 2Mbps with different tPollRetransmit settings of signaling and data.
2  Do not confuse with newDataFlag, which is scheduler internal flag where 1 means new data and 0 means 
retransmission.
www.ebook3000.com

LTE Optimization Engineering Handbook
172
In case of rank 2 spatial multiplexing there are 16 HARQ process per UE instead of 8, but 
there are two processes that share the same ID; scheduler sees them as separate processes that 
are coupled to each other.
4.6.9  Avarage Cell Throughput Optimization
Average cell throughput is the average number of successfully transmitted data bits in one second 
per DL bandwidth of all active users in one data frame.
In a live network, if the RSRP/SINR does not show any special issues, with normal maximum 
values and distribution according to the specific location, coverage of the cells and distribution 
of traffic in the cells, that means trying to increase RSRP close to the site and avoiding serving 
users far from the node. This fact will lead to an increase in the average throughput of the cells 
as well.
The parameter of crsGain is another factor impacted throughput. The configuration of 
crsGain to values higher than 0 will increase the area of coverage, increasing the power allocated 
to reference signal, but decreasing power in other resources, therefore, the average throughput 
in the cell can be affected. Due to this fact, RS boost must be used only in specific cases, and it 
is not a recommended configuration to be implemented in the whole network.
The other impact factors include bandwidth, control format indicator (CFI) format, UE 
category, MIMO transmission mode, and loading. For TDD LTE system, UL‐DL configuration 
and special subframe configuration also impact the average cell throughput. The DL through­
put calculation flow is shown in Figure 4.29.
The target average DL throughput obtained for the LTE sectors of the capacity layer (high‐
frequency band) and coverage layer (low‐frequency band) is different. Unlike the coverage 
layer, the objective of capacity layer is to provide a throughput as high as possible. The mean 
frequency efficiency can be achieved to 2 bits per hertz in the capacity layer.
4.6.10  Cell Edge Throughput Optimization
Reasonable DL coverage threshold should also reflect the throughput requirements of DL and 
UL. In most cases LTE UL is always limited coverage due to the mobile terminal is power lim­
ited. The problem is how much Tx_power will be limited. It depends on the DL power and DL/
UL rate requirements. A typical case is that volume of DL traffic and data rate are always higher 
than the UL. Therefore, RF DL/UL imbalance is normal, and that will match the data rates. If 
the imbalance is very high, which means that the DL‐received power is either too high (may 
interfere with), or too low (because the DL power is insufficient, can not fully play the UL 
power of the potential). A very important fact is that the UL performance and coverage do not 
Table 4.7  UE throughput with different tPollRetransmit settings.
Test (ms)
RSRP
SINR
PDCP throughput
RB Num/slot
percentage of  
lower than 2Mbps
signaling 80, data 500
−79.2
18.5
33.5
94.811
1.14%
signaling 160, data 160
−78.5
19.3
29.4
74.122
3.97%
signaling 80, data 80
−78.3
18.5
27.0
86.974
8.00%
signaling 40, data 40
−79.5
18.3
31.9
93.672
1.71%
signaling 20, data 20
−78.4
19.3
30.6
93.577
0.54%

Capacity Optimization
173
depend entirely on the RSRP and RSRQ. Therefore, higher DL transmit power may improve the 
DL cell average and cell‐edge data rate, but it is not able to improve the UL coverage. Generally 
speaking, the diversity of MIMO can improve the cell‐edge throughput peak. Therefore, in 
order to improve the UL coverage performance, through higher levels of diversity (using 4RX 
diversity), they can keep a low noise in LNA application.
On the other hand, LTE uses universal frequency reuse (N=1) without soft hand off. 
Consequently, high levels of interference and low SINR can be expected near the cell‐edge. 
Traffic channel performance at the cell edge can also be enhanced via ICIC feature.
4.6.11  Some Issues of DL Throughput
Throughput issues can be anywhere in the network. A series of questions are needed to ask 
first: How many eNBs are affected? How many subscribers/UEs are affected? Was the test done 
using UDP or TCP?
4.6.11.1  Antenna Diversity not Balanced
During field testing, it is found RSRP and RSRQ display good (SINR is around 27 dB, RSRP is 
around ‐80dBm) but DL throughput can not achieve 35Mbps, which is shown in Figure 4.30.
It is found that the imbalance of the two antenna diversity reception is the cause of the prob­
lem. RSRP of antenna0 and antenna1 display huge power gap, RANK2 SINR is low shown in 
Figure 4.30. Antenna 0’s RSRP is around ‐76dBm, antenna 1 is around ‐95dBm; the gap is more 
than 20 dB. Play back all the test data, and it can be seen that the antenna1’s RSRP continued at 
a low level. It is suspected that the antenna interface issues or problems with the antenna.
After adjusting the eNB transmit antenna (antenna TX power gap, check RRU) and test again, 
the test antenna is found to be received normally, and throughput increased by about 40Mbps.
4.6.11.2  DL Grant is not Enough
From Figure 4.31, it can be seen that under good SINR (17.5 dB), DL throughput was only able 
to reach to around 1Mbps. The reason is too low number of DL grant allocation, the average is 
around 200 for a period of time.
PRB number
UE category
Physical bits number
MCS index
BW
UL/DL config
Transmission mode
PRB number
CFI
N
Y
Determine TB size
TBS valid?
throughput
Determine PRB number of DL subframe
Determine total RE of DL sbframe
Deduct common channel/signal overhead
Determine the physical bits number
Transmission mode
Figure 4.29  DL throughput calculation flow.
www.ebook3000.com

LTE Optimization Engineering Handbook
174
The reasons of low number of DL grants are generally include: UE is in DRX state, the DL 
is not scheduled or rarely scheduled, PDCCH false alarms or missed detection, and lack of 
RB resources, and so on. In this case, DRX was off and PDCCH misdetection ratio is nor­
mal, it is found finally that there were other users occupied the PDSCH resources after OMC 
counter‐investigation. When locking to a single‐user test, the DL Grant can reach to 600, 
and DL throughput resumed normal.
Figure 4.30  Antenna diversity not balanced.
Figure 4.31  Low DL grant allocation.

Capacity Optimization
175
4.6.11.3  Unstable Rate
In this case, the cell radio coverage was good, RSRP was about −75dBm, the average SINR was 
about 25 dB; in addition, BLER and double MCS are normal, but the DL data rate is often below 
10Mbps or no rate. The issue is DL user data rate was unstable, sometimes reduced to 10Mbps, 
even decreased to 0Mbps.
The problematic cell coverage seemed to be well, and MCS was normal, but the PDCP data 
rate was not qualified. The investigation work was following: first, check if there is any equip­
ment (including UE, FTP Sever, etc.) alarm. Next, check the radio parameters configuration, 
like RRU power, bandwidth, time slot allocation, and so on, were right or not. If the rate was 
still so unstable after changed, someone still needs to check the cable between RRU and antenna 
and whether the line sequence was correct or not. Sometimes, mapping of the RRU port and 
antenna mouth (line sequence) does not meet the requirements during installation and causes 
an unstable data rate.
4.7  ­UL Data Rate Optimization
UL throughput optimization is not a trivial task in since there are different features that affect 
the UL throughput. UL scheduler assignments will decide how many PRBs are allocated to 
each UE, UL adaptive modulation and coding will decide the MCS to be used by each UE every 
time it is granted UL resources, and adaptive transmission bandwidth will reduces the number 
of PRBs assigned to the UE in the UL based on the UEs power headroom reports in order to 
favor retainability of the call. The general troubleshooting strategy is described in the following 
along with different factors responsible for poor UL throughput.
●
●High BLER (bad coverage)
●
●UL interference (high RSSI)
●
●Low power headroom
●
●Scheduling algorithm
●
●Low demand
●
●Other (VSWR, backhaul capacity)
Analysis flow for UL throughput investigation:
●
●Alarm and parameter/feature check: make baseline audit for parameter and feature.
●
●RSSI: High UL RSSI would impact the UL throughput.
●
●Percentage of 16 QAM samples: Low usage of 16 QAM modulations scheme in UL would 
impact the UL throughput.
●
●PUCCH and PUSCH SINR: Poor UL_SINR conditions would impact UL throughput.
●
●Power limited UE: High number of power limited UE indicates poor UL coverage.
For UL, the above mentioned is the fundamental areas of analysis for UL. It will begin this sec­
tion with an overview of UL scheduling and link adaptation. BSR is the mechanism the UE uses to 
inform the eNB about the amount of data waiting in its RLC buffers. PHR is the mechanism the UE 
uses to inform the eNB about remaining power at the transmitter (or power limitations). The num­
ber of PRBs available for UL scheduling has some 3GPP specified limitations, which is different 
from DL. This means that, for example, the maximum number of PRBs for a single UE able to be 
scheduled in 5 MHz is 20 and not 23 (with two reserved for PUCCH). The areas of analysis for UL:
●
●UL scheduling strategy.
●
●BSR (buffer status report), Values ranges from 0 up to >15000 bytes using 64 index values. for 
example, index 0 for BSR=0, index 1 for 0 < BSR <= 10 and so forth.
www.ebook3000.com

LTE Optimization Engineering Handbook
176
●
●PHR (power headroom report), PHR reports a index value similar to BSR with values between 
−23 up to 40 dB, values are close to (or less than) 0 means the UE is power limited. When a 
UE is power limited, the eNB may schedule fewer PRBs in order to reduce the required out­
put power of the UE, this can in turn reduce throughput.
●
●Cell bandwidth versus maximum allowable PRBs, the number of PRBs available for UL 
scheduling.
●
●Link adaptation, SINR of PUSCH is the inputs for UL.
●
●MCS available and 16QAM
●
●PDCCH SIB scheduling colliding with UL grant, PDCCH collisions can occur with SIB/
DL transmissions as DL and UL grants are both scheduled using the same PDCCH 
resources.
●
●HARQ for UL.
4.7.1  Model of UL Data Throughput
The data rate that can be achieved on the air interface under different SINR conditions var­
ies according to the applied modulation and coding scheme (MCS) as selected by the UL 
link adaptation function. Channel sounding DMRS and SRS are used so that eNB can under­
stand channel response across PUSCH and schedule UE accordingly. Also the amount of 
retransmissions (both on HARQ and RLC layer) is a key factor for the UL data throughput. 
UL link adaptation tries to choose the MCS, which provides the maximum data throughput 
at a given maximum rate of retransmissions (BLER‐based link adaptation). For a given UE 
location and a given MCS, the power that the UE uses per RB in UL finally determines the 
UL SINR. The open‐loop UL power control (UL‐PC) functionality manages the UE transmit 
power per RB based on DL pathloss estimation. Hence, the main focus of the UL through­
put is on verifying the UL link adaptation and UL power control RRM functions and on the 
maximum throughput achievable for a single UE in terms of layer1 physical throughput and 
application throughput.
For LTE, there is very good correlation between throughput and RSRP on the UL, which is 
shown in Figure 4.32, as UL throughput depends mainly on propagation loss, while for the DL 
it is usually expressed as DL throughput with SINR.
UL data amount comes from BSR reported by UE, if the engineer doubts the UE doesn’t 
report enough data, he needs to check the configuration of UE. Another possibility is that in 
the poor air condition UE really sends BSR but due to CRC fail, eNB misses to handle it.
4.7.2  UL SINR and PUSCH Data Rate
UL_SINR is defind as UE’s PUSCH channel SINR received by eNB. The ratio of UL_SINR more 
than threshold (−3 dB in network) and the mean value can be used to analysis UL service qual­
ity and interference. The very good point of UL_SINR is more than 22 dB, good point of UL_
SINR is around 15~22 dB, middle point of UL_SINR is arround 5 to 15 dB, bad point of UL_SINR 
is around −5 to 5 dB, the worst point of UL_SINR is less than −5 dB. The issues can be spotted 
by combined RSRP and UL_SINR analysis. UL_SINR could also easily be extracted from eNB 
traces and it was simply estimated from UE measurement data according to UL_SINR = 
Prx,RB – (noise floor). The relation between UL_SINR from measurement report and pathloss 
(left) and combinded RSRP and UL_SINR analysis are shown in Figure 4.33.
From the right figure, it can be seen that the first quadrant, the samples of RSRPand UL_
SINR are good, this is normally a good cell. The second quadrant, RSRP is bad, UL_SINR is 

Capacity Optimization
177
good—this usually happens in an indoor scenario (outdoor cell coverages indoor). The third 
quadrant, RSRP and UL_SINR are both bad—this is usually happens in a weak coverage 
scenario. The fourth quadrant, RSRP is good, UL_SINR is bad—this probably happens in a 
UL interference scenario. In a live network, it needs specially focus on the poor UL_SINR cells 
that affected throughput in UL. For engineering, UL_SINR can be got from OMC counter as 
Table 4.8 described.
–120
1
5
10
15
20
25
PUSCH throughput (Mbps)
1
5
10
15
20
25
–110
–100
–90
–80
RSRP (dBm)
–5
0
5
10
15
19
PUSCH throughput (Mbps)
RS SINR (dB)
Figure 4.32  PUSCH throughput versus RSRP and SINR.
www.ebook3000.com

LTE Optimization Engineering Handbook
178
110%
100%
90%
80%
70%
60%
50%
40%
30%
20%
10%
0%
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
110%
15
10
5
0
–5
–10
SINR (dB)
SINR calculated
SINR simulated
Pathloss
90
100
110
120
140
150
130
Figure 4.33  UL_SINR versus pathloss (left) and combinded RSRP and UL_SINR analysis (right).
Table 4.8  UL_SINR investigation from OMC counter.
SINR of PUCCH: pmSinrPucchDistr
Distribution of the SINR values calculated for PUCCH.
PDF ranges: Unit: dB
[0]: SINR <= −15; [1]: −15 < SINR <= −12
[2]: −12 < SINR <= −9; [3]: −9 < SINR <= −6
[4]: −6 < SINR <= −3; [5]: ‐3 < SINR <= 0
[6]: 0 < SINR <= 3; [7]: 3 < SINR
Condition: each SINR value for PUCCH per UE 
calculated on a TTI basis yields one sample in the 
distribution.
SINR for PUSCH: pmSinrPuschDistr
Distribution of the SINR values calculated 
for PUSCH.
PDF ranges: Unit: dB
[0]: SINR <= −5; [1]: −5 < SINR <= −2
[2]: −2 < SINR <= 2; [3]: 2 < SINR <= 6
[4]: 6 < SINR <= 10; [5]: 10 < SINR <= 14
[6]: 14 < SINR <= 17; [7]: 17 < SINR
Condition: each SINR value for PUSCH per UE 
calculated on a TTI basis yields one sample in the 
distribution.

Capacity Optimization
179
In live networks, average cell throughput or cell‐edge throughput are the main optimization 
purpose. The throughput as function of the SINR in UL is increasing with increased SINR 
­values (see Figure 4.34). UL SINR distribution in a live network refers to Figure 4.35.
4.7.3  PRB Stretching and Throughput
Different from DL, UL PRB stretching can’t always bring throughput gain. Assume UE is trans­
mitting at its maximum power, if the number of PRBs are doubled, the bandwidth (B) doubles, 
as well as the noise (N), but the signal (S) remains the same since the UE can not increase its 
transmit power anymore. As it keeps doubling the number of PRBs, it obtains some channel 
capacity gain, as shown in Figure 4.36.
UDP UL
0
5
10
15
20
25
30
35
40
45
–8
–3
2
7
12
17
22
UL SINR
Mb/s
EVA LC
EVA MC
EPA HC
ETU MC
COV EVA MC
Figure 4.34  PUSCH data rate versus UL_SINR.
–5
0.00%
10.00%
20.00%
30.00%
40.00%
50.00%
60.00%
CDF
70.00%
80.00%
90.00%
100.00%
–4 –3 –2 –1
0
1
2
3
4
5
Uplink SINR
6
7
8
10 11 12 13 14 15 16 17
9
Operator 1
Operator 2
Figure 4.35  UL SINR CDF.
www.ebook3000.com

LTE Optimization Engineering Handbook
180
It can be seen that doubling the bandwidth does not double the channel capacity, so as it 
increases the number of PRBs, the channel capacity (throughput) is increased, but at the cost 
of operating with a lower spectral efficiency. Therefore, PRB stretching is only viable when a 
small number of UEs are competing for the UL PRBs. When a large number of UEs are competing 
for the UL PRBs, then it makes more sense to grant a smaller number of PRBs to each UE as a 
way to preserve the spectral efficiency and so the UL cell capacity.
4.7.4  Single User Throughput Optimization
When trying to reach the max theoretical UL throughput in the field in static tests, UL radio is 
the main factor and the related analysis is necessary.
Similar as DL, single user throughput optimization needs UE trace logs to spot the 
problem. Here we present an example of trace parses of UL. This example is a modified 
output of UL, which summarizes a number of traces onto one line, like UL_SINR, MCS 
(modulation and coding scheme), PRB occupied, TBS (transport block size), BSR, PHR, 
HARQ, UL_TPC, UL BLER, and so on. BSR and PHR are decoded into human readable 
formats along with PRBs.
sfn|sf|rxPwrPus|prb|ulTpc|sinr|ulModul|mcs|ndf|ul bsr  |phr |ul tbs| ul crc  |har|ulBler|
266| 6|  -95.6 | 48| 0:1 | 22 | 16QAM | 23| Y |        |    | 25456|         | A |   2% |
266| 7|  -95.6 | 48| 0:1 | 22 | 16QAM | 24| Y |        |    | 25456|         | A |   2% |
266| 8|  -95.6 | 48| 0:1 | 22 | 16QAM | 24| N |        |    | 25456| ERR 3182| N |   5% |
266| 9|  -95.6 | 48| 0:1 | 23 | 16QAM | 24| Y |        |    | 24496|         | A |   5% |
267| 0|  -95.7 | 48| 0:1 | 22 | 16QAM | 24| Y |>150000 |    | 24496|         | A |   5% |
267| 1|  -95.8 | 40| 0:1 | 22 | 16QAM | 24| Y |        |    | 21384|         | A |   5% |
267| 2|  -95.6 | 48|     | 23 | 16QAM | 24| Y |        |    | 25456|         | A |   5% |
267| 3|  -95.6 | 48| 0:1 | 22 | 16QAM | 24| Y |        |    | 25456|         | A |   4% |
267| 4|  -95.6 | 48| 0:1 | 22 | 16QAM | 23| Y |        |    | 25456|         | A |   4% |
267| 5|  -95.6 | 48| 0:1 | 22 | 16QAM | 23| Y |>150000 |    | 25456|         | A |   4% |
267| 6|  -95.6 | 48| 0:1 | 23 | 16QAM | 24| N |>150000 |    | 25456|         | A |   4% |
267| 7|  -95.6 | 48| 0:1 | 23 | 16QAM | 24| Y |        |    | 25456|         | A |   4% |
267| 8|  -95.6 | 48| 0:1 | 22 | 16QAM | 24| Y |        | 32 | 24496|         | A |   4% |
Figure 4.36  PRB stretching and channel capacity.

Capacity Optimization
181
4.7.4.1  Radio Analysis – Available PRBs
PUCCH takes a minimum 1 PRB on each side of the UL band for UL control signaling, ­reducing 
the size of PUSCH, for example, 5 MHz bandwidth, 25 PRBs available. If only 2 PRBs are 
reserved for PUCCH, thus 23 PRBs are available for PUSCH transmission.
Due to 3GPP specified design limitations in the UL it is not always possible to utilize all free 
PRBs for UL transmissions. 3GPP TS36.211 Ch 5.3.3 defines the following formula 
for the number of PRBs on PUSCH for a single transmission: 2
3
5
a
b
c. Here a, b, and c are 
­non‐negative integers. For 5 MHz, auusming only 23 PRBs are available for PUSCH, but the 
max number of PRBs for a single PUSCH transmission is only 20 PRBs, this corresponds to 
a = 2, b = 0, and c = 1 (i.e., three PRBs are unavailable to be used).
The result of the measured number of UL RBs as function of pathloss in a live network, 
which follows the trend of the ideal result (not take effects from fading; see Figure 4.37). The 
difference may also be explained by a low number of measurement samples.
4.7.4.2  Radio Analysis—Link Adaptation
The selected MCS for a certain allocation size is needed to maintain the target BLER (10%) for 
the first transmission. The inputs of UL link adaptation include UL interference power, received 
power of UE (across traffical PUSCH PRBs), PHR reports, and HARQ CRC (BLER). eNB can 
use received power/UL_SINR, PHR, UL interference, and UL HARQ BLER measurements to 
control UL MCS. For these, it needs to check further based on the parameters mentioned in 
Chapter 4.7.4.1:
●
●High values of UL interference, could there be some external interferer? Are the values of 
p0NominalPusch in neighbor cells too high? In a multi‐UE environment, too high of values for 
this parameter may generate more UL interference and eventually lower total throughput on 
the UL.
●
●rxPower is too low, check if p0NominalPusch is set too low.
●
●If PHR shows UE at maximum Tx_power, is p0NominalPusch too high causing UE to exceed 
maximum transmit power? Closed‐loop power control TPC is ignored by the UE?
●
●Low values of SINR, is p0NominalPusch too low? Closed‐loop power control TPC is ignored by 
the UE?
0
5
10
15
20
25
30
35
40
45
50
90
100
110
120
130
140
150
Lsa [dB]
nrb
Number of RBs measured
Number of RBs simulated
Figure 4.37  Number of UL RBs in a live network.
www.ebook3000.com

LTE Optimization Engineering Handbook
182
4.7.4.3  Radio Analysis – PDCCH
PDCCH carries both the UL (PUSCH) assignment and DL (PDSCH) assignment indication. In 
case many PDCCH CCEs are used for DL transmission (e.g., SIB with 8 CCEs. In case of a DL 
SIB transmission, 8 CCEs of PDCCH may be used for DL grant), it may be that UL grant is not 
possible to be scheduled in this TTI for a single UE (Figure 4.38)!
To reduce processing load when decoding PDCCH, 3GPP (TS36.213 Ch 9.1.1) defines par­
ticular search spaces within PDCCH depending on number of CCEs for grant, number of CCEs 
for PDCCH, and RNTI of the UE. Depending on these parameters, it may not be possible to 
allocate a PDCCH UL grant resource, and therefore, the UE may not be able to be scheduled 
every TTI even if there are unused PUSCH resources.
4.7.5  Cell Avarage and Cell‐edge Throughput Optimization
The analysis method of UL cell avarage and cell‐edge throughput is quite different with DL. 
The following parameters will deeply affect the performance like pathloss distribution, ­mapping 
from SNR to throughput, PUSCH P0 target, α, upper/lower target SINR threshold, upper/
lower target RSSI threshold, and so on.
Cell coverage is based on power budget. However, UL is the limiting link in most cases. 
Reasons are in the natural power limitation on mobile side. UE Tx_power increases slower with 
FPC when moving from cell center to cell edge. Without UL fractional power control, the SINR 
target needs to be set conservatively (at a lower value) for cell‐edge coverage, which will sacri­
fice the cell center throughput. As UL fractional power control allows better trade‐off between 
spectral efficiency and cell‐edge rate by compensating gradually in open loop power control as 
a function of the pathloss. This allows a higher SINR target toward cell center. The SINR target 
automatically drops toward cell edge as the pathloss increases, which will be suitable for cell‐
edge UE’s power profile (less power headroom available, lower data rate, lower interference to 
neighbor cells). The analysis in Figure 4.39 shows the trade‐off between spectral efficiency 
(average SE) and cell‐edge rate (edge SE).
How much the UL limits the power budget depends on the DL power along with DL and UL 
throughput requirements. Typically, the DL traffic and throughput (both cell and user) is ­bigger 
than in UL. Thus, certain RF unbalance is normal and ideally it should reflect the proportion of 
UL and DL throughput.
For cell‐edge users, when reaching a certain pathloss, the higher the SIR target, the lower the 
throughput: when the max UE Tx_power is reached (23dBm), the UL scheduler is forced to 
PUSCH
PDSCH
PDCCH
DL subframe
(current)
UL subframe
(4 TTI later)
Figure 4.38  PDCCH assignment.

Capacity Optimization
183
schedule/grant less RBs in order to be able to transmit more power on each RB and thus reach 
the SIR target. Overall, the UL SIR target varies between 7.5 dB in cell center and 0 dB in cell edge.
4.7.6  Some Issues of UL Throughput
One case shows that while the DL channel quality is excellent in TDD LTE field test, the UL 
iBLER rate is less than 5%, and the UL throughput can reach to 10Mbps or so. Occasionally 
iBLER will rise to 20%, resulting in the throughput down to about 7Mbps.
Preliminary analysis found that when the iBLER increased, the UE transmit power does not 
ascend, instead of reducing the MCS to reduce error bit rate. According to the UL power con­
trol design, there is no exception in this process, as for MCS28, demodulation threshold is 
18 dB under 10% packet error, the UL channel quality was constaant between the 22 to 24 dB. 
So the UE UL TX_power was almost without change, instead of lower the MCS to reduce the 
error, the lower the MCS results in a lower data rate of UL.
For burst errors happened in UL, it needs to capture eNB trace and UL_RSSI to analyze. It is 
found that the UL_RSSI of antenna 4 is higher than other antennas and its SINR is lower 5 dB 
compared to other antennas as shown in Figure 4.40, so RRU channel 4 maybe the problem, 
leading to the demodulation performance degradation.
The other case is UL/DL TCP service simulteneous issues and analysis.
Also in TD‐LTE field trial, when doing UL/DL TCP service at the same time, peak throughput 
of UL/DL can not reach peak value. The same UE for concurrent upload, download 
throughput is significantly lower than the throughput of a single download, as shown in 
Figure 4.41.
In this situation, it can be seen that in single UE scenario, peak throughput can be reached in 
both DL and UL as shown in Table 4.9. But when simultaneously, throughput will be drop 
down badly.
The reason is caused by TCP mechanism. TCP transmissions will stall when ACKs are 
delayed or not received, TCP sender is “ACK clocked.” A data packet is only sent upon arrival 
of an ACK from receiver, which can be shown in Figure 4.42. This is also need to pay attention 
to that in excessive pathloss scenario that UL ACKs can’t be received at the eNB at a rate 
­sufficient to avoid TCP slow start being initiated.
0.9
1
4.5
4
3.5
3
2.5
2
1.5
1
0.5
0
0.8
0.7
0.6
0.5
0.4
average SE
edge SE
alpha
improvement/degradation
Figure 4.39  Cell average SE and 
cell‐edge SE.
www.ebook3000.com

LTE Optimization Engineering Handbook
184
only
download
concurrent upload
and download
concurrent upload
and download
only
download
only
download
Figure 4.41  Concurrent upload and download issue.
Table 4.9  Throughput of simulteneous UL/DL TCP transmission.
Comment
Traffic
RSRP
SINR
CQI
DL_thp
RB_num
UL_thp
UL_RB
CFI: 3, TDD configure: 2
UL
−83.02
29.87
14.56
  0.16
  5.5
8.13
80.02
DL
−83.79
26.35
14.34
79.85
98.37
1.22
23.56
DL&UL
−82.6
27.43
13.36
42.56
84.7
8.03
79.73
–115
–110
–105
–100
RSSI (dBm)
RSSI from antenna 0
RSSI from antenna 1
RSSI from antenna 2
RSSI from antenna 3
RSSI from antenna 4
RSSI from antenna 5
RSSI from antenna 6
RSSI from antenna 7
Figure 4.40  Antenna issue. (See insert for color representation of the figure.)

Capacity Optimization
185
When run DL/UL TCP simultaneously, in both direction, there are data and TCP ack, which 
are needed to be send. So, there will be congestion between data and TCP ack. Data and TCP 
ack will be in one queue (buffer) and wait for TCP window swapping. It will bring the issues as: 
(eNB side for example, the same situation in UE side)
●
●DL TCP data package cannot be sent in time because there is delay for DL TCP ACK 
from UE.
●
●TCP ACK for UL TCP window cannot be sent in time because it is in long queue and 
waiting.
●
●Package will be forced to loss during congestion if the buffer is full.
To upload and download at the same time, if you do not set the TCP ack priority higher, 
download data TCP ack will row in the back of the upload data, that is delayed while sending, 
resulting in the download throughput lower than a download only throughput.
AQM (active queue management) algorithm is used for TCP throughput optimization to 
discard packets before the buffer is full and thus providing rapid feedback to the sender.
4.8  ­Parameters Impacting Throughput
The parameters that can impact the throughput, both on UL and on DL, are listed in 
Table 4.10 and Table 4.11. In DL, the throughput is most influenced by the type of antenna 
system that is being used/selected while in UL by the required quality of the received signal, 
which forces higher powers of PUSCH channel. Note that some parameters can increase the 
DL throughput while decreasing the UL throughput in the meantime due to the asymmetry 
of TDD LTE.
Not Yet Sent by Application
Received Reliably (Correct & In-Order)
Memory shared
Between
Application and TCP
Application
Space
Operating
System
TCP
Receiver
Data
ACK
ACK
ACK
Data
Data
IP
Receiver
Buffer
“File”
XYZ
TCP
Sender
IP
Send
Buffer
“File”
XYZ
Client
Server
Figure 4.42  TCP transmission mechanism.
www.ebook3000.com

 Table 4.10  Parameters impacting  DL throughput. 
Name
Recommended
Name
Recommended 
dlMCSTransitionTable
dlSINRThresholdbetweenRank1BeamformingAndTM3
 
dlSinrThresholdBetweenCLMIMOOneLayerAndTxDiv
−10
deltaSINRforIntermodeSwitch
3 
dlSinrThresholdBetweenCLMIMOTwoLayersAndOneLayer
12
beamformingAlgoRank1
COM‐EBB  
dlSinrThresholdBetweenOLMIMOAndTxDiv
beamformingAlgoRank2
 SU‐BF‐RANK2‐ 
 COMEBB  
subframeAssignment/specialSubframePatterns
dlSinrThresholdBetweenRank1BeamformingAndRank2BF
0 
 α Fairnessfactor
0.8
dlSinrThresholdBetweenTxDivAndRank1Beamforming
0 
Dynamic CFI enabled
ture
rIThresholdBetweenRank1AndRank2
0.6 
cFI
3
sinrOffsetForBeamformingPMICQI
0 
cFI1/2/3 Allowed
TRUE
sinrOffsetForBeamformingTxDivCQI
0 
cFIThreshold1
2
sinrOffsetForRank1AndRank2CW0
0 
cFIThreshold2
6
uLCESINRThresholdBetweenRank1BeamformingAndRank2BF
−51.2 
cFIIncreaseTimer
5
uLCESINRThresholdBetweenTxDivAndRank1Beamforming
−51.2 
dlBasicSchedulingMode
PF
blerThresholdBetweenRank1BeamformingAndRank2BF
1 
transmissionMode
blerThresholdBetweenTxDivAndRank1Beamforming
0.8 
beamFormingAlgo
COM‐EBB
pmiRIReportR9
FALSE 
uLCESINRThresholdBetweenTxDivAndBeamFormingIntraTm7
−17
cqiReportingModeAperiodic
rm30  
sinrOffsetForBeamformingCQICompensation
3
tddAckNackFeedbackMode
multiplexing

Capacity Optimization
187
Table 4.11  Parameters impacting UL throughput.
Name
Recommended Value
uplinkSIRtargetValueForDynamicPUSCHscheduling
According to the real scenario
pUSCHPowerControlAlphaFactor
0.8
ulSchedPropFairAlphaFactor
0.5
ulMCSTransitionTable
‐
mCScorrectionForIRC
0
minSIRtargetForFractionalPowerCtrl
0.0 [dB]
maxSIRtargetForFractionalPowerCtrl
19.0 [dB]
pathLossNominal
According to the real scenario
p0NominalPUSCH
According to the real scenario
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
188
LTE systems deployed with 1/1 frequency reuse are shown to be interference limited. Providing 
good coverage and improving sector capacity are two critical objectives of most operators. 
High interference leads to bad impact on several KPIs. For voice‐centric service, this trans­
lates to reducing the probability of bad coverage zones or zones with low SINR. For data‐
centric service, improving coverage refers to improvement in the lowest 5% achievable data 
rates. In a cellular system, since the zones with poor coverage are usually areas that see maximum 
­interference, a desirable goal is important to design mechanisms to mitigate the intra‐LTE 
interference.
5.1  ­Interference Concept
Because optimal LTE performance requires a higher SNR than any previous technology, noise 
can present a major obstacle to the smooth, efficient, and profitable operation of an LTE net­
work. High interference in UL and DL can cause total traffic reduction in UL and DL. Figure 5.1 
plots the DL (RS) and UL (PUSCH) interference map in a LTE system.
The UL thermal noise power within the UL system bandwidth consisting of NRB
UL resource 
blocks as defined in 3GPP standard. It is defined as (No × W), where No denotes the white noise 
power spectral density on the UL carrier frequency and W
N
N
f
RB
UL
sc
RB
 denotes the UL 
system bandwidth. The measurement is optionally reported together with the received inter­
ference power (RIP) measurement, it shall be determined over the same time period as the RIP 
measurement. The reference point for the measurement shall be the RX antenna connector. In 
case of receiver diversity, the reported value shall be linear average of the power in the diversity 
branches.
The noise floor on the UL is estimated using the formula as following,
	
UL Noise Floor
Thermal noise
Noise Figure	
Where thermal noise = k(Boltzmann) * T(290 K)* Bandwidth.
For nominal cell values in a network with RRU deployments, when the noise floor without 
loading is not more than −118 dBm, and no more than −108 dBm with full loading is accepted.
From a field test, it can be seen that the high interefence issued cell is 17 dB loss compared 
with the nominal cell in Figure 5.2.
The noise floor on the DL is estimated using the formula as following,
	
Noise Floor
RSRP
RS SINR	
5
Internal Interference Optimization

Internal Interference Optimization
189
Noise rise is a quantity that describes the increase in interference that comes with increased 
traffic. It is used in dimensioning in coverage calculations as well as in capacity calculations. In 
coverage calculations it is used as a margin on top of the link budget, to accommodate for the 
interference created by traffic in adjoining cells, the so‐called interference margin. In capacity 
calculations, it is used to estimate the SINR, which in turn determines the bitrates that can be 
achieved by the users (Figure 5.3).
A bad SINR is based on bad high noise or high inteference, SINR/SNR can be expressed as:
	
SINR SNR
inteference noise power
/
/
/
1 1
 
	
For SINR/SNR = 1, means that noise is a lot higher than interference, and this is a noise‐limited 
scenario (typically SINR/SNR > 0.5). For SINR/SNR = 0, means that interference is a lot higher 
Figure 5.1  DL (RS) and UL (PUSCH) interference map. (See insert for color representation of the figure.)
www.ebook3000.com

LTE Optimization Engineering Handbook
190
than noise, this is a interference‐limited scenario (typically SINR/SNR < 0.5). For SINR/
SNR = 0.5, means that noise is equal to the interference. Usually, there seems to be an interference 
issue when densifying the network.
5.2  ­DL Interference
RSRP measurement with a scanner is the most reliable way to detect areas with possible 
interference problems and bad dominance (not impacted by network load, absolute SINR 
measurement values can’t be used as a reliable performance indicator). Figure 5.4 presents 
10000
8000
6000
4000
2000
0
85
95
105
115
125
135
145
PUSCH througput (kbps)
Pathloss (dB)
Nominal cell
Issued cell
17 dB
The drive test
shows about a 17
dB loss in coverage
due to interference   
Figure 5.2  Interefence issued cell versus nominal cell.
6000
5000
4000
3000
2000
1000
0
–119.4
–119.0
–118.6
–118.2
–117.8
–117.4
–117.0
–116.6
–116.2
–115.8
–115.4
–115.0
–114.6
–114.2
–113.8
–113.4
–113.0
–112.6
–112.2
–111.8
–111.4
–111.0
–110.6
–110.2
–109.8
–109.4
–109.0
–108.6
–108.2
–107.8
–107.4
–107.0
–106.6
–106.2
–105.8
–105.4
–105.0
–104.6
Cell range (m)
Noise + Interference / PRB
A free space pathloss model was
used to convert maximum
pathloss into cell range  
Figure 5.3  UL N + I will reduce cell range in UL limited scenario.

Internal Interference Optimization
191
what no dominant cell is, and the number of PCIs in for example, 10 dB power window is a 
­useful indicator.
The interference in an LTE system comes from the surrounding cells, called inter‐cell inter­
ference. Reduce neighbor cell interference is the key method to improve DL SINR. The case of 
normal RSRP and lower SINR is generally caused by interference from neighbor cells. For the 
same frequency network in LTE, co‐channel interference is inevitable, with the increase of the 
cell loading, SINR value decreases, but the RSRP is basically unchanged. Use overlapping 
­coverage index to evaluate the possible impacts between cells is a very good method to evaluate 
and optimize the LTE network.
	
Pwanted
RSRP1
SINR =
SINR ≈
Pnoise_ue + Iexternal + Iother_cells
k>1
N15kHz + FNF,UE  + QL,k
RSRPk
∑
	
But in the case of no load around the cell, the following two cases will also produce the interference 
that we do not expect. First, the surrounding area PCI setting is incorrect, the second is neighbor 
cell overshooting. The border between the adjacent cells need to avoid the value of PCI mode 
3 equal, and then by the method of the Chapter 3 to solve the problem of overshooting coverage.
5.2.1  DL Interference Ratio
DL interference ratio shown in Figure 5.5 is a cell isolation measure defined as a ratio of inter­
ference from all cells except the best over the strongest cell signal. It is independent of access 
technology, bandwidth, receiver performance, and capability. It gives a measure and thus 
No
dominant 
cell in the
area  
–65
–70
–75
–80
–85
–90
–95
–100
–105
–110
–115
–120
–125
–130
–135
–140
RS received power (dBm)
Figure 5.4  No dominant cell.
i ≠ best_cell
gbest_cell
F
gi
∑
=
gbest_cell
g1
g2
g3
gi
Figure 5.5  DL interference ratio.
www.ebook3000.com

LTE Optimization Engineering Handbook
192
­provides excellent measure of inter‐cell interference and can be calculated on path gains (or 
attenuations) according to the following formula:
	
F
g
g
i best
cell
i
best
cell
_
_
	
Geometry describes the user received pathgain in relation to all other cells, which is propor­
tional to SNR, as seen in the fomular below:
	
G
RSRP
RSRP
BestServer
others 	
5.2.2  Balance Between SINR and RSRP
In LTE, it should more strictly optimizing the coverage among cells. Interference control aims 
to find the balance between SINR and RSRP. As Figure 5.6 shows, with too little overlap, hand­
over may fail, whereas with too much cell overlap, higher interference occurs and cell‐edge 
throughput can be reduced. Again, a balance must be achieved by adjusting overlap margins 
and cell sizes. This can be achieved with parameters and physical changes.
Cell overlapping area is a sensitive area in LTE network optimization. In the area, the 
SINR and RSRP is refers to the lowest 5% samples, cell reselection, handover, dropped 
calls, and other failure events will probably happen frequently. Figure 5.7 shows the DL 
reference signal SINR distribution during handover with different UE velocity from the 
field test data.
DL interference can be shaped according to the degree of the interference, which also defines 
the preferred area where the PDSCH scheduling should consider. The decision of applying the 
interference shaping requires the knowledge of the general load situation in its own cell as well 
as the neighboring cells. The functionality relies on resource status reporting between neigh­
boring cells using X2 interface. This provides a possibility to consider neighbor cells load in the 
decision whether to apply interference shaping in a certain cell. The area can expand or shrink 
to adapt to the load. If the cell adjacent to the cell with interference shaping has high load, with 
accurate CQI reports, it could allocate the UEs experiencing neighbor cell interference to less 
interfered resources, improving frequency selective scheduling. When interference shaping is 
active, scheduling is limited to the preferred resources. The interference‐shaping function uses 
the principle of a preferred area of the occupied PRBs in frequency domain where the actual 
allocations are allowed.
Criteria for applying interference shaping in a cell is dependent on the loading, a neighbor 
cell is considered to be under high load if the average PRB utilization as reported by this cell is 
above a threshold.
5.3  ­UL Interference
In the UL, received interference power (RIP, equivalent UL RSSI) and thermal noise power at 
eNB reflect the experienced interference at eNB and they indicate the network load.
In the UL, the UEs near the cell border will cause most of the interference to adjacent cells, 
the eNB scheduler can adjust the transmit PSD of mobiles near the cell edge in a frequency 
selective manner in order to shape the inter‐cell interference that is generated.

Internal Interference Optimization
193
SINR ↑
RSRP ↑
SINR ↓
RSRP ↑
SINR ↔
RSRP ↑
SINR ↔
RSRP ↑
SINR ↑
RSRP ↑
SINR ↑
RSRP ↑
SINR ↔
RSRP ↓
SINR ↑
RSRP ↓
SINR ↑
RSRP ↓
SINR ↑
RSRP ↑
SINR ↑
RSRP ↑
SINR ↔
RSRP ↔
SINR ↑
RSRP ↔
SINR ↑
RSRP ↔
SINR ↑
RSRP ↑
U
N
T
U
N
E
D
T
U
N
E
D
70,000
60,000
50,000
40,000
30,000
20,000
10,000
0
–10.0
0.0
10.0
SINR [dB]
UNTUNED
20.0
30.0
DL  Throughput [kbps]
70,000
60,000
50,000
40,000
30,000
20,000
10,000
0
–10.0
0.0
10.0
SINR [dB]
TUNED
20.0
30.0
DL  Throughput [kbps]
More samples
with a high
SINR
Less samples
with a low
SINR
Figure 5.6  Balance between SINR and RSRP.
www.ebook3000.com

LTE Optimization Engineering Handbook
194
UL wideband noise power calculation:
Wide band Noise Power
Noise
dB
p
BandwidthPRBNum
 
 
 
 
10
10
0
1
log
Power Linear p
Bandwidth PRBNum
 
 
/
More UEs with bad RF conditions trying to excess eNB transmitting high power without suc­
cess causes high UL noise floor and thus causes access failures/drop calls, which further reduces 
the spectrum efficiency (capacity) since MCS determines the spectrum efficiency (capacity). 
With the increase of simultaneous UEs, after the critical point, all of major performance stats 
worsen dramatically.
Interference sources include high traffic in the UL, external source of interference (WiFi, 
power generator, GSM interference), too high in values of P0NominalPUCCH and P0NominalPUSCH, 
incorrect installation (wrong feeder type), incorrect parameters setting (UL attenuation and 
VSWR) and sharing a site with different technology (CDMA and LTE, GSM and LTE) that will 
have high chance to have interference during high traffic load.
5.3.1  UL Interference Detection
RSSI is a measurement of all of the power contained in the used bandwidth. This could be 
signals, background noise, anything. High UL RSSI issue is an common issue that will impact 
the UL performance of the LTE network. In a normal case, the UL RSSI on each resource 
block is about −119 to 120 dBm when the cell is unloaded. If the RSSI is 3 to 5 dBm higher than 
the normal value at unloaded, UL interference exists. The causes of high UL RSSI are coming 
from LTE internal caused by inter‐cell UL interference at cell edge, and external system inter­
ference includes ­hardware issue, such as antenna, cable, RU module, and wrong parameter 
configuration.
DL SINR during Handover at SeNB and TeNB (dB)
1
2
3
4
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
CDF
SINR (dB)
–20
–15
–10
–5
0
5
10
15
120km_win100msec_TeNB: avg = –2.5834
120km_win100msec_SeNB: avg = –4.9875
30km_win100msec_TeNB: avg = –0.077
30km_win100msec_SeNB: avg = –1.6895
1
2
3
4
Figure 5.7  DL reference signal SINR during handover.

Internal Interference Optimization
195
The UL received interference power, including thermal noise, within one physical resource 
block’s bandwidth of Nsc
RB resource elements, the reported value shall contain a set of received 
interference powers of physical resource blocks n
NRB
UL
PRB
0
1
,
,
.
UL interference level can be spot by UL RSSI simply. When UL RSSI’s range is −121 to −110 
dBm, that means no UL interference. When UL RSSI’s range is −110 to −100 dBm, it means that 
UL is under medium interference. When UL RSSI is higher than −100 dBm, it means that UL is 
under higher interference.
There are also two counters that are used to measure the interferences for PUSCH and 
PUCCH channels, pmRadioRecInterferencePwrPusch and pmRadioRecInterference­
PwrPucch. From these counters at the cell level in which the measurements are averaged over 
receive antennas, is it possible to identify antenna branches with external interference, as 
shown in Figure 5.8.
1,000,000
Counter
pmRadioRecInterferencePwrBranchPrb1~100
900,000
800,000
700,000
600,000
500,000
400,000
300,000
200,000
100,000
0
1
11
21
31
41
51
61
71
81
91
PRB
External interference on branch 1 only
Branch 0
Branch 0
Branch 1
Branch 1
Figure 5.8  pmRadioRecInterferencePwr reflect UL interference.
www.ebook3000.com

LTE Optimization Engineering Handbook
196
Usually RACH failures can give another indication of bad RF environment, and therefore, a 
­possible indication of high RSSI. The counters for UL_SINR (pmSinrPucchDistr and pmSinr­
PuschDistr) can also help identifying bad RF conditions for the UE. Although not conclusive for 
interference problems, it gives more indication of the RF environment. Figure 5.9 shows each 
SINR value for PUSCH/PUCCH per UE calculated on a TTI basis yields one sample in the 
distribution.
For UL interference analysis, TDD LTE is more complex than that in FDD system. It also 
needs additional analysis of GPS out of sync, subframe configuration, special subframe pattern, 
the surrounding cells’ UE transmit power, and the investigation of external or inter‐RAT 
­interference, and so on.
5.3.2  Generation of UL Interference
5.3.2.1  Cell Loading Versus Inter‐Cell Interference
It is shown in Figure 5.10, UL RSSI of current cells rise with user increasing in neighbor cells. 
There should be minor inter‐cell interference caused by neighbor cell users.
Normally, as the loading increases, PRACH, PUCCH, PUSCH interference is increased by 20 
to 40 dB. In case of PUSCH, mainly from inter‐cell interference and for PRACH, PUCCH, both 
intra and inter‐cell interference exist. Figure 5.11 shows PRACH, PUCCH, PUSCH received 
level under light loading (20 calls) and heavy loading (200 calls).
Figure 5.9  UL_SINR reflect UL interference.
250
200
150
100
50
0
NR1 USER_RRCCONN
NR2 USER_RRCCONN
NR3 USER_RRCCONN
NR4 USER_RRCCONN
Current Cell UL_RSSI_Pwr_dBm
6/13/2014 0:00
6/15/2014 0:00
6/17/2014 0:00
6/19/2014 0:00
6/21/2014 0:00
6/23/2014 0:00
6/25/2014 0:00
6/27/2014 0:00
6/29/2014 0:00
UL RSSI vs NR Cell RRC Connected User
NR Cell RRC Connected User
RSSI (dBm)
–110
–112
–114
–116
–118
–120
–122
–124
–126
–128
–130
Figure 5.10  Cell loading versus inter‐cell interference.

Internal Interference Optimization
197
5.3.2.2  Unreasonable UL Network Structure
The below scenario is typical in a live network in suburban, urban, and dense urban deploy­
ment. The UE is at the border of the two cells, its pathloss (PL) to cell 1 is 78 dB, pathloss to cell 
2 is 82 dB. In this case fractional power control will assign the UE a high DL data rate in cell 1, 
but with assigning a high data rate in this case as the IoT from the UE1 to cell 2 is significant 
(Figure 5.12).
This is typical case that neighbor’s interference caused by UE if UL network structure is 
unreasonable. UL network structure is an important factor affecting the IoT. And, it can cause 
a cascading effect as follows: if UE1 has 17 dB SINR target, but that causes an IoT of almost 
13 dB at cell 2. Now from the point of UE2, which has a slightly better pathloss to cell 2 compare 
to cell 1, and if you assign a target UL_SINR of 17 dB to UE2, that UE2 will create an IoT of 
13 dB at cell 1, and one can see that there is no solution for this issue and very high noise rises, 
even it does see 40 dB IoT on some busy cells in live network.
Figure 5.11  Light loading (20 calls) and heavy loading (200 calls).
www.ebook3000.com

LTE Optimization Engineering Handbook
198
Usually, the possible solutions of such issues can, if in a high UL interference scenarios, stop 
PUSCH power control avalanche effects when two adjacent cells are strongly interfering with 
each other. This can be achieved by blocking the PUSCH power‐up commands and forcing all 
PUSCH SINR targets to 0 dB on the cell when the level of IoT exceeds a threshold level. If in a 
medium interference scenarios, backs off the PUSCH SINR target proportionally to the measured 
level of interference as a typical strategy.
Under certain assumptions DL CQI can be indicative of the effect of the UL inter‐cell 
interference, so that the interference contribution of every UE to the neighbor cells can be 
calculated. The interference effect of the UE on a neighbor cell also depends on the path loss 
between the UE and that neighbor eNB.
Assumption:
	
PG
m
i
PG
m
i m
s m
,
,
ispathgainfromUE
tocell
is path gain from UE
to serverr cell s	
●
●Is and Ii are the total interference received at cell‐s and cell‐i, respectively.
●
●Ps and Pi are the transmission powers by cell‐s and cell‐i, respectively.
●
●Qs,m and Qi,m are the received DL powers of cell‐s and cell‐i at UE‐m, respectively.
Then, the fraction of interference contributed by UE‐m at cell‐i, ri,m, is as follows, assuming 
that the UL pathloss and the DL path loss are the same/similar.
The UL IoT rise contribution of a UE on a neighbor cell is r
PG
UL SINR
PG
i m
i m
m
s m
,
,
,
_
, also can be 
presented as:
	
Qs,m
Qi,m
Pi / Is
Ps / Ii
ri,m = UL_ SINRm
×
×
Cell-s
Cell-i
Ue-m
	
If the DL and UL traffic loadings of the cell is the same/similar, or if the DL and UL traffic 
loading ratio per cell is the same/similar, then we have
	
P I
P I
r
UL SINR
Q
Qs m
s
i
i
s
i m
m
i m
/
/
1
,
,
_
,
	
Then, the fraction of interference contributed by UE‐m at all cells, Rm, can be represented as 
the ratio of UL SINR and DL SINR, is as follows.
	
R
r
UL SINR
DL SINR
m
i s
i m
m
m
,
_
_
	
Cell 1
Cell 2
UE1
AN
UE 2
PL = 78 dB
PL = 82 dB
Figure 5.12  Neighbor’s UL interference 
caused by UE.

Internal Interference Optimization
199
Thus, operators can control Rm (i.e., the fraction of interference contribution by UE‐m to all 
cells) by setting the UL SINR target for UL power control according to UEm’s RF condition in 
UL as follows.
	
UL SINR
R
DL SINR
m
m
m
_
_
	
5.3.2.3  Cross slot interference
Cross slot interference mainly means a DL signal from “faraway.” eNB arrive into the UL 
slot of target eNB by a long propagation in the TDD LTE system. In this case, the atmos­
phere has refraction effect to radio wave propagation with very low propagation loss, just 
like in free space, especially in the specific climate and environment. Most interference is 
observed from about 200 km away eNB, sometimes even 300 km, and GP may be not long 
enough to cover this kind of interference due to long distance propagation. SRS or PRACH 
in UpPTS and even UL data in UL normal subframe will be interfered, which is shown in 
Figure 5.13.
Cross slot interference mainly happened in likely scenarios include: eNBs on top of hills at 
different ends of a city separate by a large distance and eNBs in different cities, or separated by 
a large water body.
Cross slot interference should affect mainly subframes 1 and 6 (special subframes), sites are 
not far enough for other subframes to be affected as shown in Figure 5.14. Interference on one 
site should correlate with DL traffic on the other site and the effect should be mutual. Here is 
an example of LTE‐TDD UL interference due to propagation delay. Assuming special sub‐
frame structure 7 used (10:2:2), guard period and UpPTS length are both 0.14 ms (2 sym­
bols*1 ms/14 symbols). The safe and greenmount are 41.8 km (0.139 ms) apart, likely that there 
is additional delay not considered here, and so DwPTS from one site overlaps UpPTS on the 
other due to propagation delay.
The maximum “visible” eNB to eNB distance is based on GP, which is depicted in Table 5.1. 
If two eNB’s are separated greater than GP, they can see each other, then DL and UL sub‐
frames will collide between each other, even though their TDD duty cycles are synchro­
nized. Separation greater than this limitation is required if there is geographic isolation 
between the eNBs.
If DL of one eNB overlaps with the UL of other eNBs due to propagation delay is more than 
GAP, which results in IoT increasment at eNBs. In order to spot cross slot interference, it is 
needed to monitor I + N measurements for each PRB in GP, UpPTS and UL normal subframe 
respectively. If cross slot interference is founded, reconfiguring of PRACH (format 4) and SRS 
GP
UpPTS
DwPTS
#2
#0
#3
#4
DwPTS
#2
#0
#3
#4
#2
#0
#3
#4
#2
#0
#3
#4
DwPTS
#2
#0
#3
#4
Target BS
Interfering 
BS
DP
GP
UP
Target BS
Interfering
BS
cross slot interf.
DP
GP
UP
delay
40 km delay
80 km delay
200 km delay
300 km delay
DwPTS
DwPTS
cross slot interf.
no cross slot interf.
cross slot interf
cross slot interf.
Figure 5.13  Cross slot interference.
www.ebook3000.com

LTE Optimization Engineering Handbook
200
in UpPTS into UL normal subframe is necessary. Sometimes the worst thing is only a few 
OFDM symbols interfered, in this case, data symbols may suffer cross slot interference, but RS 
symbols do not, IRC doesn’t work and the interference can not be canceled in this scenario.
Antenna orientation and tilt changes at both ends can introduce 50 dB or more isolation in 
addition to pathloss due to distance separation. With proper RF planning, it can have eNBs at 
LOS as close as 34 km using special subframe 7 and not interfere with each other. If sufficient 
pathloss isolation cannot be achieved then consider using a special subframe with a larger GAP.
It notes that when using FDD, the interference between neighboring eNBs is much lower 
than when using TDD.
5.3.3  PUSCH Tx Power Analysis
The eNB received PUSCH power spectral density (PSD) will be compared with the target 
PUSCH PSD and TPC values will be generated based on the difference between the two values. 
The target PUSCH PSD default value will be estimated based on α used by UE in its pathloss 
calculation and the corresponding theoretical optimum operating point based on spectral 
­efficiency. To support network interference control, the target PUSCH PSD will have to be on 
a per UE basis.
In the UL, the power control target for PUSCH and PUCCH can be tuned by the operator. 
The power control target for PUSCH is specified by p0NominalPusch that given by SIB2 and RRC 
connection reconfigration message. Depending on the difference between the SINR measured 
Obvious interference at GP and UpPTS symbols
–60
–70
–80
–90
–100
–110
–120
–130
–140
–150
Amplitude
Power (dBm)
SF1
SF2
SF6
SF7
8220
31280
39480
62520
58368
0
10,000
20,000
30,000
40,000
50,000
60,000
0
10,000
20,000
30,000
40,000
50,000
60,000
Number of samples
Number of subcarriers
–75
–100
–125
–150
–175
Figure 5.14  Time (left) and frequency (right) domain power of all symbols.
Table 5.1  Maximum “visible” eNB to eNB distance based on GP.
Configuation
Normal cyclic prefix
DwPTS
GP
UpPTS
Max eNB to eNB (km)
0
3
10
1
214
1
9
4
1
86
2
10
3
1
64
3
11
2
1
43
4
12
1
1
22
5
3
9
2
193
6
9
3
2
64
7
10
2
2
43
8
11
1
2
22

Internal Interference Optimization
201
and the SIR target, the eNB will send TPC (transmit power control) commands to ask the UE 
to increase or decrease the PPUSCH of its next message, this is the closed loop (slow inner‐loop) 
power control. The parameter is the target PSDrx that can be tuned to find a trade‐off between 
UL coverage and UL capacity as well as UL user bit rates experienced close to the site. Tests 
show that in good channel conditions p0NominalPusch is around −106dBm is enough to reach peak 
rate in a two receive antennas configuration, whereas poor channels require higher values. In a 
four‐receiver antenna configuration, p0NominalPusch can be further lowered by 3 dB.
p0NominalPusch can be adjusted to 2 dB above noise and interference level, to overcome the 
interference. Noise and interference level on PUSCH can be measured by the OMC counter 
(Figure 5.15).
Assuming p0NominalPusch = −106dBm, the thermal noise is −118 dBm/RB, and no interference 
from other UEs since there was no load in the network. The SINR in UL was estimated from 
the UE Tx_power using the following formula:
	
UL SINR
min UETx
power
log n
RS
power
RSRP
RSPo
RB
_
_
,
_
10
106
wer
RSRP
118
	
Increasing p0NominalPucch and p0NominalPusch can help to mitigate the adverse impact on perfor­
mance due to interference. It should be highlighted that increasing the values of p0Nominal would 
imply in a trade‐off between UL coverage and UL capacity. Setting p0Nominals well above noise 
and interference level will lead to high UL interference and UE battery consumption.
Besides, the UE specific parameters of p0UE‐PUSCH’s initial setting is according to the UE’s 
category and RF conditions, the function of the parameter is for compensating the inac­
curate RF link pathloss that works together with p0Nominal, to guarentee the proper UE 
Tx_power. Thus,
	
P
PUSCH
p
p
NominalPUSCH
UE PUSCH
0
0
0
_
	
For the closed loop power control adjustment, two power control methods shown in Table 5.2 
are tested in the field; the absolute type is used in area1 and the accumulated type is used 
in area2.
The result shows that there has similar trend on the PUSCH power consumption per byte in 
two areas. In low pathloss range, averagely, it’s shown that area2 uses less power per byte data, 
in the range of pathloss between 90 dB and 120dBm, it’s shown that area2 also uses less power 
per byte on the high power efficiency side, which is shown in Figure 5.16.
pZeroNominalPusch
–103
Power [dBm]
UE power limited
PUSCH TX power
PUSCH RX power
PUCCH RX power
Path loss [dB]
SINR [dB]
Thermal noise + interference
pZeroNominalPucch
–117
Power [dBm]
PUCCH TX power
Path loss [dB]
SINR [dB]
Thermal noise + interference
Figure 5.15  p0NominalPucch and p0NominalPusch settings (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
202
Higher values of parameters p0NominalPucch and p0NominalPusch shall be deployed in areas that 
suffer from low UL throughput and that average UL RSSI load is not that high (i.e., below −110 
dBm). On the other hand, lower values of parameters p0NominalPucch and p0NominalPusch shall be 
used during special events like concerts, football games and highly loaded areas, for example, 
commercial centers and big squares.
5.3.4  UL Effect of P0 and α
LTE fractional power control allows the operator to adjust the power control target using 
p0NominalPUSCH/PUCCH and α parameters. By setting α less than 1, a “fractional path loss 
Table 5.2  Parameters used in PUSCH power control test.
Parameters used in PUSCH 
power control
Area1
Area2
Cell‐specific (SIB2)
p0‐NominalPUSCH(dBm)
−75
−67
α
0.8
0.7
UE‐specific (RRC  
connection set up)
p0‐UE‐PUSCH(dB)
1
0
deltaMCS‐enabled
0
0
Close loop power control  
mode – accumulation enabled
FALSE
TRUE
15
5
–5
–15
–25
–35
–45
–55
15
25
5
–5
–15
–25
–35
–45
–55
70
80
90
100
110
120
130
140
150
70
80
90
100
110
120
130
140
150
Pathloss (dB)
Pathloss (dB)
PUSCH Power Per Byte (dBm)
PUSCH Power Per Byte (dBm)
Figure 5.16  PUSCH power 
consumption per byte of different 
P0 settings.

Internal Interference Optimization
203
­compensation” is achieved. This has the effect that eNB RX received power gradually drops 
with the cell signal attenuation even though the UE is not power limited. This means that eNB 
RX received power will not be equal to P0_PUSCH.
In a live network, usually tuning these parameters could be a temporary solution for UL 
RSSI. These two parameters can be tuned to find a trade‐off between UL coverage and UL 
capacity and UL user bit rates experienced close to the site.
The setting of P0, that is the power received per RB, affects both coverage and capacity. 
A higher setting leads to higher cell throughput but also higher noise rise. A lower setting 
should reduce peak throughput in low load scenarios but could improve capacity at high load.
Reduction of p0nominal helps reduce the number of UEs reaching maximum power, but the 
impact is not same as α. Reduction of α helps reduce the number of UEs reaching maximum 
power. The example shown in Figure 5.17 is based on UL PRB utilization = 10%.
Figure 5.18 described the UL effect of P0 and α.
●
●power offset P0:
–
– P0 ↑ = > P(i) ↑, potential limitation for cell‐edge users
●
●Pathloss compensation:
–
– α ↓ = > P(i) ↓, especially for cell‐edge users
●
●cell‐edge users discriminated with P0 ↑ and α ↓ (“capacity setting”)
50
40
30
20
10
0
–10
–20
50
40
30
20
10
0
–10
–20
–30
–40
UE TX POWER
RSRP
–62
–65
–68
–71
–74
–77
–80
–83
–86
–89
–92
–95
–98
–101
–104
–107
–110
–113
Power (A = 1)
Power [A = 1]
Power (A = 0.8)
Power [A = 0.8]
Power (A = 0.9)
Power [A = 0.9]
~–93 dBm
–92 dBm
–96 dBm
–99 dBm
~–106 dBm
RSRP
–60
–63
–66
–69
–72
–75
–78
–81
–84
–87
–90
–93
–96
–99
–102
–105
–108
–111
–114
Power (p0 = –100)
Power [p0 = –100]
Power (p0 = –103)
Power [p0 = –103]
Power (p0 = –106)
Power [p0 = –106]
Figure 5.17  Impact of p0 component (α = 1) and compensation factor (P0 = −100).
www.ebook3000.com

LTE Optimization Engineering Handbook
204
Figure 5.19 shows the relation between PUSCH RSSI versus PUSCH SINR both from daily 
average statistics, under two operatos with different power control strategy. For operator A, 
open‐loop power control is used, P0_PUSCH = −106dBm, α = 1, and each dot presents one eNB. 
For operator B, closed‐loop power control is used, RSSI target ~ −100dBm, SINR target ~ 20 dB, 
and each dot presents one eNB.
UL power needs to be set by UL interference, when UL interference is larger/lower than a 
certain value (e.g., −95dBm). Simulations indicate that an α setting around 0.8 may be an opti­
mized setting for the UL peak rates and the UL cell throughput, it is suggested to use the 
parameter settings below as present in Table 5.3.
PUSCH/PUCCH target values will increase if cells suffer from external interference. The cell 
had a very high service drop rate, also DL cell throughput was very low due to high UL/DL 
packet error rate. The reason is the cell suffers from very high UL RSSI (−100dBm) that external 
interference is suspected. One example shown in Figure  5.20 presents the performance 
impacted with the changes of P0. After applying the p0NominalPusch/Pucch changes, p0NominalPusch 
changed to −92dBm from −106dBm, p0NominalPucch changed to −96dBm from −120dBm, several 
KPIs of the cell significantly improved, especially retainability and throughput.
5.3.5  PRACH Power Control
High initial Message3 power means high initial PUSCH transmission power, and will take the 
closed loop power control many steps to bring the PUSCH power to normal, which results in 
further UL interference in the system. A live example of parameter setting is in Figure 5.21.
According the assumptions, Message3’s power is calculated as:
MSG3 Tx_power = 10*log8 dB (RB number) + 32dBm (PRACH power) + 12 dB (deltaPream-
bleMsg3) + 6 dB (TPC) = 9 + 32 + 12 + 6 = 59dBm
Actually, the above Message3’s power is not suitable. Table 5.4 gives four sets of PRACH typi­
cal parameters configuration in two areas, which were tested in field to find out the proper 
PRACH parameters settings.
As shown in Figure 5.22, it can have following observations. For Area 1, F(0) is almost fixed 
at 6 dB, Message3 is almost transmitted at maximum power (23dBm), for Area 2, parameter 
setting is not too aggressive, most of F(0) is −6 dB, Message3 is transmitted at variable power.
It is recommended that deltaPremableMsg3 setting to 2 dB to 4 dB; PC_msg2 setting to 0 dB; 
Mpusch setting to1RB to 3RB.
PL
P(i)
Pmax
α = 1
P0,1
P0,2
α < 1
“capacity”
“coverage”
cell edge
Macro case 3
Macro case 1
Figure 5.18  UL effect of P0 and α.

Internal Interference Optimization
205
(open-loop power control)
(closed-loop power control)
35
30
25
20
15
10
5
0
–5
–10
–15
30
25
20
15
10
5
0
–5
–10
–15
PUSCH SINR [dBm]
PUSCH RSSI per PRB [dBm]
noise floor –119dBm
BTSs with UL interference
–125
–120
–115
–110
–105
–100
–95
–90
–85
–80
–120
–115
–110
–105
–100
–95
–90
–85
–80
PUSCH RSSI per PRB [dBm]
PUSCH SINR [dB]
BTSs with UL
interference
Figure 5.19  PUSCH RSSI versus PUSCH SINR.
Table 5.3  Parameters settings of PUSCH/PUCCH power control.
Parameter
Recommended value
UL interference larger than ‐95dBm
UL interference lower than ‐95dBm
PzeroPUCCH
−103
−103
PzeroPUSCH
−70
−97
α
0.8
1
www.ebook3000.com

LTE Optimization Engineering Handbook
206
5.3.6  SRS Power Control
Every UE in the UL uses SRS (sounding reference signal) and UE used same TPC commands 
for both SRS and PUSCH transmissions. It is used for the following reasons: UL radio link 
supervision, UL channel estimation for UL FSS scheduling, and UL timing alignment.
12-Jan
14-Jan
16-Jan
18-Jan
20-Jan
22-Jan
24-Jan
26-Jan
28-Jan
30-Jan
1-Feb
3-Feb
5-Feb
7-Feb
9-Feb
11-Feb
13-Feb
15-Feb
17-Feb
19-Feb
21-Feb
23-Feb
25-Feb
27-Feb
1-Mar
3-Mar
Time (timezone: Europe/Madrid)
Service_Drop_Rate_SR (%)
Service_Drop_Rate_SR (Total)
12-Jan
14-Jan
16-Jan
18-Jan
20-Jan
22-Jan
24-Jan
26-Jan
28-Jan
30-Jan
1-Feb
3-Feb
5-Feb
7-Feb
9-Feb
11-Feb
13-Feb
15-Feb
17-Feb
19-Feb
21-Feb
23-Feb
25-Feb
27-Feb
1-Mar
3-Mar
Time (timezone: Europe/Madrid)
Downlink_Throughput_Kbps
Downlink_Throughput_Kbps (Total)
30,000
3.50
3.25
3.00
2.75
2.50
2.25
2.00
1.75
1.50
1.25
1.00
0.75
0.50
0.25
29,000
28,000
27,000
26,000
25,000
24,000
23,000
22,000
21,000
20,000
19,000
18,000
17,000
16,000
15,000
14,000
13,000
12,000
11,000
10,000
Service_Drop_Rate_SR
Downlink_Throughput_Kbps
Figure 5.20  p0NominalPusch/Pucch affected the throughput.

Internal Interference Optimization
207
UL parameter pSRSOffset is an offset applied in relative to the PUSCH power that PSRS_OFFSET 
is a power offset configured by parameter pSRSoffset. It had been discovered the pSRSOffset 
values that are being used in the network are more optimistic than needed. This has resulted in 
optimizing the SRS power control parameter, which in turn improved the UL noise and significantly 
improved every metric in the network (retainability, throughput, BLER, UL noise, data volume, 
etc.) (Figure 5.23).
Figure 5.21  A live example of UE Tx_power.
Table 5.4  PRACH typical parameter setting.
Parameter
Area 1
Area 2
(HO RACH)
Set 1
Set 2
Set 1
Set 2
(19:43:14.753)
(19:38:48.689)
(20:11:10.96)
(20:11:12.23)
Mpusch
8
8
3
3
deltaPremableMsg3 (dB)
12
8
0
0
PC_msg2 (dB)
6
8
−6
4
www.ebook3000.com

LTE Optimization Engineering Handbook
208
The transmit power of the SRS signal is set in dBm at the UE as:
	
P
i
P
P
M
P
j
PL
SRS
MAX
SRS OFFSET
SRS
O PUSCH
min
,
log
_
_
10
10
f i
	
where MSRS is the bandwidth of the SRS transmission expressed in number of resource blocks, 
f (i) is the current power control adjustment state for the PUSCH.
In addition to pSRSOffset, there is room for optimizing other SRS related parameters like SRS 
bandwidth.
srsBandwidthConfiguration is set to bw0, which corresponds to 48 RBs in the UL SRS. The 
operator needs to know if it really need 48RBs for UL SRS or it can be configured with 24RBs 
every alternate RB and still accomplish UL FSS. Sometimes by reducing the SRS bandwidth in 
half, it can not only improve UL noise but also UL throughput now that symbol can be used for 
PUSCH(data).
f(0) = ΔPrampup + δmsg2
24
21
18
15
12
9
6
3
0
PUSCH Actual Tx Power
F(i)
Area1
Area2
35
30
25
20
15
10
5
0
–5
–10
19:27:44.44
19:28:47.47
19:31:04.04
19:33:11.11
19:35:29.29
19:40:09.09
19:42:46.46
19:44:25.25
19:45:51.51
19:49:02.02
19:51:58.58
19:54:01.01
19:55:21.21
19:57:49.49
19:59:59.59
20:03:07.07
20:07:21.21
20:11:12.12
20:13:40.40
20:17:48.48
20:21:13.13
20:22:53.53
20:25:46.46
20:28:31.31
Figure 5.22  F(0) and PRACH Tx_power.
uplinkPowerControlDedicated
{
}
p0-UE-PUSCH 0,
deltaMCS-Enabled en0
accumulationEnabled TRUE,
p0-UE-PUCCH 0,
pSRS-Offset 7
soundingRS-UL-ConfigDedicated setup :
{
}
srs-Bandwidth bw0,
srs-HoppingBandwidth hbw3,
freqDomainPosition 0,
duration TRUE,
transmissionComb 0,
cyclicShift cs4
srs-ConfigIndex 17,
Ks = 0 (MCS)
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
The example values
for pSRSOffset is 7,
some networks
proposed value is 3
pSRSPoweroffset (eff)
pSRSPoweroffset (config)
–10.5
–9
–7.5
–6
–4.5
–3
–1.5
0
1.5
3
4.5
6
7.5
9
10.5
12
Figure 5.23  pSRSOffset from RRC connection set up message.

Internal Interference Optimization
209
5.3.7  Interference Rejection Combinin
Interference rejection combining (IRC) is a method to enhance the capacity in UL by mitigating the 
undesirable inter‐cell interference. IRC is a receiver technique using multiple RX antennas (up to 4) 
inputs to suppress interference and achieve better performance in term of SNR and BLER. IRC 
utilizes (unlike MRC) correlation in the spatial domain between antennas and in the time domain 
to suppress interfering signals from other cells. The IRC feature uses a linear MMSE (minimum 
mean square error) estimator algorithm to combine Rx‐signals from two or more antennas to sup­
press interference efficiently. The suppression can be seen as weighting down the signal in the 
direction of an interferer, so that it does not corrupt the signal from the desired user. IRC 
improves the BLER on the PUSCH and PUCCH compared to MRC and improves UL through­
put in UL interference limited systems. The IRC feature uses an “receive signal combining 
algorithm” that can be viewed as an extension of the MRC algorithm (Figure 5.24).
IRC gain at 50%
throughput  
IRC gain at 90%
throughput  
2
epa5_16qam_6rb_1rb, SNR=10dB
IRC
MRC
1.8
1.6
1.4
1.2
1.0
0.8
0.6
0.4
0.2
0
–20
–15
–10
–5
0
5
C/I [dB]
10
15
20
25
Throughput [bps]
x 106
Figure 5.24  IRC gain.
www.ebook3000.com

LTE Optimization Engineering Handbook
210
IRC will maximize SINR of the wanted user by applying complex weights to the antenna 
­elements, IRC is performed per subcarrier, it cannot cancel white noise, just (spatially correlated) 
interferers. IRC can cancel up to N−1 interferers where N is number of antenna elements. In 
LTE network, IRC is applicable to PUSCH only, control channels are received using MRC or 
incoherent combining.
5.4  ­Inter‐Cell Interference Coordination
If the adjacent cell‐edge users use the same resources to transmit/receive in UL/DL, then it will 
be caused by UL/DL inter‐cell interference. Inter‐cell interference coordination (ICIC) func­
tionality can reduce the impact of both UL/DL inter‐cell interference to improve throughput 
performance, particularly important for users with low or medium load. When using dynamic 
ICIC, eNB selects the starting point of UL/DL PRB in frequency randomly, either the lowest or 
highest possible frequency. ICIC limited the use of radio resources among the various cells in 
a inter‐cell coordinated manner, including limit the use of frequency resources or in a certain 
time‐frequency resources limit its transmission power and so on.
UEs in different cells will interfere due to using the same frequencies, ICIC distributes the 
interference between cells.
According to E‐UTRAN network architecture, UL dynamic ICIC program needs information 
interaction between the inter‐cell. There is two interactive information: HII (high Interference 
indicator) and OI (overload indicator), wired interface X2 between neighboring eNB can be 
used to send the HII and OI.
5.5  ­UL IoT Control
Excessively high IoT is observed in certain deployment cases due to the massive UL traffic 
increase or improper parameters settings. For example, in mixed metro/macro‐cell case where 
there’s a huge difference in cell coverage between the neighbors. High IoT leads to high UE Tx 
power (battery drain) as well as degraded UL throughput performance.
5.5.1  UL Interference Issues and Possible Solutions
UL interference problems are likely to increase as networks evolve due to phenomena like traf­
fic increase, Hetnet and network densification. The challenge is to address UL performance 
issues of traffic and external interference, DL/UL unbalanced cells in such evolved networks.
The solutions are short term actions as mentioned before, link adaptation, power control, 
inter‐cell interference coordination and handover, and admission control that is needed to 
work hand‐in‐hand. For handover, the currently existing mobility triggers for bad coverage are 
only based on DL UE measurements are released with redirect, and IRAT and inter‐frequency 
handover.
5.5.2  UL IoT Control Mechanism
Currently UL IoT management is indirectly controlled by FPC (fractional power control) set­
tings in LTE. FPC parameter settings are depicted in Table 5.5. FPC settings determine the UL 
SINR targets, which decides the UE Tx_power allowance based on UL pathloss condition. 
Without FPC, eNB maintains a fixed UL SINR target for PUSCH, so it allows for comparable 
average UL throughput across cell until UE begins to hit the maximum Tx_power.

Internal Interference Optimization
211
Notes:
●
●α = 0.8 has been shown to provide the best overall performance in the field, particularly when 
considering 3D antenna patterns with application of downtilt.
●
●min target SINR = 0 dB, which is chosen to ensure no loss of synchronization of UEs at 
cell edge.
●
●max target SINR = 19 dB, which is chosen to ensure highest MCS level can be achieved for 
UEs in near‐cell conditions.
●
●nominal target SINR and nominal path loss (PLnominal) are chosen for particular scenario 
to give best performance, depends on system loading and desired tradeoff between average 
user throughput and edge user throughput.
In case of limited interference (unloaded neighbor cells) scenario, the higher the setting of 
UL SIR_target for dynamic PUSCH scheduling, the higher the throughput, but also, the higher 
the setting the higher the interference generated in the neighboring cells. In loaded network 
scenarios, the higher the SINR target, the higher the near cell throughput but the higher the 
interference generated in the different cells of the network and thus the lower the cell‐edge 
throughput and at some point the lower overall cell throughput too.
Consequently, the IoT is based on the relative UL pathloss to the neighboring cells. High IoT 
drives UL power control to compensate, which in turn creates more interference to neighbors, 
leading to power control race condition similar to CDMA heavy‐loaded case. Excessively high 
IoT could even deafen the eNB radio, distort the received signal, and severely impact the UL 
operability. Thus, connection/handover success and call drop KPI will be impacted.
eNB uses the local measurement of interference plus noise (I + N) level as the indication of 
IoT. To avoid generating excessively high IoT, the UE Tx power needs to be lowered when high 
IoT is observed. IoT control mechanism in LTE is shown in Figure 5.25.
Table 5.5  FPC parameter settings.
α factor
0.8
uplink SIR_target value for dynamic PUSCH scheduling
19 dB
Max. uplink SIR_target value for fractional power control
19 dB
Min. uplink SIR_target value for fractional power control
0 dB
PLnominal
60 dB
Higher UL_SINR target allows higher cell throughput, but cell edge users create significant
interference to neighboring cells (IoT), and eventually lower total throughput on the UL.
If high SINR target was set close to cell, then linear adjustment (in dB terms) beyond a certain
pathloss  should be done according to fractional power compensation control.
Handover, Call drop rates need to
meet KPI targets
Cell edge rate:
maxSIRtarget = 19dB
Feedback: 8–10 dB might
be appropriate
loT?
Target
SINR
minSIRtarget = 0dB
Would like to maximize cell
capacity and cell edge rate
Cell capacity
Figure 5.25  IoT control mechanism.
www.ebook3000.com

LTE Optimization Engineering Handbook
212
To avoid generating excessively high IoT, the UE Tx_power needs to be lowered when high 
IoT is observed. Cell adjusts UL _SINR target for a given user based on estimated UL pathloss. 
This corresponds to lowering the UL_SINR target at the cell level when elevated IoT level 
beyond acceptance is observed.
5.5.3  PUSCH UL_SINR Target Calculation
PUSCH UL_SINR target can vary from initial target according to experienced path loss. eNB 
computes closed loop target UL SINR for a given UE based on estimated UL pathloss, which is 
as follows:
	
SNR
SIR
PL
PL
CL T
et
_
arg
_
min max
,
Target nominal
nominal
1
min
,max
SIRT
etFPC
SIRT
etFPC
arg
arg
	
where PLnominal = 60dB, it is usually set to the value of the UL pathloss for a UE at cell centre.
Parameter PLnominal configures the nominal path loss and corresponds to the path loss at 
which it wants the SINR target to be UL SIR_target value for dynamic PUSCH scheduling, 
according to fixed UL SINR target in Figure 5.27, which is also the nominal SINR target. The 
slpoe is 1−α.
PL is an estimate of the average path loss based on the power headroom reports of the UE 
and the average SRS power. eNB broadcasts p0NominalPusch to assist UE in computing initial UE 
Tx power:
	
P
SINR
PL
I
T
PUSCH
TOT
0
1
_
_
_
nominal
Target nominal
nominal
xPSD
P
PL
UETx
power
TxPSD
dBm PRB
PUSCH
dBm PRB
/
_
_
/
_
0
nominal
10
10
xlog
#of PUSCH PRBs 	
So, PUSCH SINR target can be represented as the function of UL path loss for a selection of 
IoT levels, as shown in Figure 5.26.
20
18
16
14
12
10
8
6
4
2
0
40
50
60
70
80
90
100
110
120
130
140
150
160
Path Loss (dB)
TargetUL PUSCH SINR (dB)
maxSIRtarget
PLNominal
minSIRtarget
Fixed UL SINR Target
Slope
Figure 5.26  PUSCH SINR target versus UL path loss.

Internal Interference Optimization
213
Note that when the full path loss compensation is used, that is, when α is set to 1.0, the target 
SINR is always equal to UL SIR_target for dynamic PUSCH scheduling and other parameters 
are ignored.
Following equation is also used to compute the p0NominalPusch power based on PUSCH SINR 
target:
	
P
SINR
PL
I
PUSCH
TOT
0
1
_
_
_
nominal
Target nominal
nominal
	
Assume α = 1, and SINR_target_nominal = 1 dB, p0NominalPUSCH = 1 + 0 −112 = −111 dBm
Assume α = 0.7, and SINR_target_nominal = 15 dB, p0NominalPUSCH = 15 + (1−0.7)*140 – 112 = 
−55 dBm
So, if aggressive FPC mechanism is adopted in no‐load scenarios, cell throughput is higher, 
if FPC behavior is toned down in high‐load scenarios, call set up and call drop KPIs will be 
kept at an acceptable level. Figure 5.27 shows an example of PUSCH SINR target versus UL 
pathloss.
Figure 5.28 further illustrates the power control behavior under different pathloss condi­
tions, it can be divided into four regions with different characteristics. For region 1, UE power 
control is working within the dynamic range. The power control target p0NominalPusch is met and 
SINR of PUSCH is constant. For region 2, the UE is transmitting at its maximum power. 
Received power level per RB and SINR for PUSCH decreases with a higher signal attenuation 
until SINR reaches the minimum required SINR for PUSCH. For region 3, the received power 
level per RB and SINR for PUSCH are constant even though the signal attenuation keeps 
increasing, hence the number of allocated RBs decreases in order to meet the minimum 
required SINR. For region 4, the number of allocated RBs has reached its minimum, which is 
two at the moment and SINR for PUSCH decreases with a higher signal attenuation.
By increasing p0NominalPusch, the region 1 will be shrunk, the region 2 will be extended further 
into region 1 and the rest of the region unchanged due to limitation on maximum UE transmit 
power, which is shown in Figure 5.29.
5.5.4  UL Interference Criteria
Two types of quantities were considered as candidates for the UL triggers mechanism: GINR 
(gain to interference plus noise ratio) and SINR. The main difference between the two quantities 
–2
0
2
4
6
8
10
12
14
16
18
20
22
0
20
40
60
80
100
120
140
1
2
3
4
5
160
180
200
UL path loss (dB)
PUSCH SINR target (dB)
FPC - no IoT correction
1
2
3
4
5
PUSCH SINR target For IoT=0dB leading to PUSCH SINR target correction –3dB
PUSCH SINR target For IoT=4dB leading to PUSCH SINR target correction 0.5dB
PUSCH SINR target For IoT=9dB leading to PUSCH SINR target correction 3dB
PUSCH SINR target For IoT=15dB leading to PUSCH SINR target correction 6dB
Figure 5.27  PUSCH SINR target versus UL pathloss (example).
www.ebook3000.com

60
50
40
30
20
10
0
–10
–20
–30
74
77
80
83
86
89
92
95
98
101
104
107
110
113
116
119
122
125
128
131
134
137
140
143
146
149
152
1
2
3
4
path loss
dBm
RB
Pue_TX power used per resource block
SINR
RB
SINR
Pue_TX power used per resource block
Figure 5.28  Power control behavior under different pathloss conditions.
Uplink SINR/UE Tx/RBs
vs RSRP
Total UE Tx Power
UL SINR
UL RBs (PUSCH)
Total UE Tx Power
UL SINR
UL RBs (PUSCH)
100
80
60
40
20
0
35
25
15
5
–5
–15
–25
UL SINR [dB],
UE TX power [dBm]
UL Resource Blocks
Pathloss [dB]
80
100
120
140
160
100
80
60
40
20
0
35
25
15
5
–5
–15
–25
UL SINR [dB],
UE TX power [dBm]
UL Resource Blocks
Pathloss [dB]
80
100
120
140
160
Uplink SINR/UE Tx/RBs
vs RSRP
p0NominalPusch=–106dBm
p0NominalPusch=–97dBm
Figure 5.29  Different p0NominalPusch versus UE behavior.

Internal Interference Optimization
215
is that the gain quantity includes the estimated transmitted power density, not only the received 
power density.
	
GINR
PSD
PSD
N
I
SINR
PSD
N
I
RX
TX
RX
;
	
where,
PSD ‐ power spectral density; N ‐ noise; received noise PSD; I ‐ interference; received 
­interference PSD;
PSDRX ‐ received signal PSD; PSDTX ‐ estimated UL transmit PSD based on power headroom 
reports from the UE;
In a live network, GINR can be chosen as the quantity for the UL interference criteria for the 
following reasons. This quantity is already calculated and used in link adaptation and the vari­
ation of the value of GINR with time and distance from cell is much more significant than the 
variation of SINR. As shown in the picture in Figure 5.30, the expected RSRP, RSRQ, GINR, and 
SINR average behavior, moving from cell center toward border.
The circled lines, it is visible that for GINR a modification of the distance/time quantity 
gives a much larger variation of the measured quantity than for SINR. In fact, the link adap­
tation algorithm tends to maintain a constant SINR. SINR is algorithm‐independent, while 
GINR is not. The trigger shall be based on in eNB calculated UL GINR. It shall be possible 
to trigger bad coverage based on UL when GINR value is below the configured GINR bad 
coverage threshold.
Cell edge
Cell center
RSRP
GINR
RSRQ
SINR
Figure 5.30  Expected GINR and SINR average behavior.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
216
6.1  ­Drop Call Mechanism
Session errors are used to define the event when the FTP session can not be completed for 
whatever reasons. RRC drops can be considered as radio link failure. After a “RRC drop,” UE 
will maintain its context in the MME and SGW and the PGW will continue to anchor the IP 
address. So for internet surfing, the RRC drop may not be considered a user perceived drop as 
voice. Generally call drop during drive test is counted when RRC connection reestablishment 
occurs.
Drop call will cause abnormal release. The definition of an abnormal session release can be 
presented by that the release of the E‐RAB had a negative impact on the end‐user. In a packet 
domain system as LTE it is natural to establish and release E‐RABs. E‐RABs don’t have to be 
released just because they are inactive, they can be kept to have a fast access once new data 
arrives.
Drop call usually caused by radio link failure (RLF). To check this there are two criteria, if the 
E‐RAB was considered active at the time of release and the cause value of the release. There are 
several radio connection supervision schemes in LTE to monitor the air interface link.
●
●UE detected DL sync by decoding PDCCH/PHICH and the BLER performance
●
●UE detected radio link failures (RLF) by T310 expiry, maximum number of RLC retransmis-
sions, integrity check failure, handover failure (T304 expiry) or non‐handover related ran-
dom access problem
●
●eNB detected radio link failures (RLF) by PUSCH RLF, CQI RLF, Ack/Nack RLF, RLC failure 
SRB/DRB, also by vendor specific, like UE capability enquiry time out, security mode com-
plete time out, RRC connection reconfiguration complete time out, RRC connection rees-
tablishment complete time out, tRelocOverall time out (e.g. handover preparation or handover 
execution takes too long time) etc.
●
●eNB initiated release: TA timer expiry and maximum RLC (radio link control) retransmis-
sions exceeded
Radio link failure (RLF) means the radio link between the eNB and the UE is lost. Once the 
eNB has detected the loss of the radio link and the radio link failure condition is met, the eNB 
requests the MME to release the UE context in the eNB, by sending the UE context release 
request message, with the cause “Release due to E‐UTRAN generated reason,” to the MME. 
Finally the UE switches to idle state, and the call is dropprd. Once the UE re‐enter the coverage 
area it may initiate the UE triggered connection re‐activation at any point in time. The main 
radio link failure and call drop reasons are listed in Figure 6.1.
6
Drop Call Optimization

Drop Call Optimization
217
Drop call measurements can be based on drive tests or statistics. The main reasons for poor 
retainability include but are not limited to missing neighbor relations, poor radio environment, 
badly tuned handover parameters, admission reject (due to lack of licenses). For UL, the radio 
link supervision is performed in the eNB, for DL, it is carried out by similar supervision 
function located in the UE.
6.1.1  Radio Link Failure Detection by UE
Usually, radiolink failure will trigger RRC connection reestablishment by UE upon T310 expiry, 
reaching the maximum number of RLC retransmissions and handover failure (T304 expiry), or 
trigger RLF if UEs fail to read MIB/SIB1/SIB2.
UE monitors the DL by decoding PDCCH/PCFICH. Related timers are T310 and T311; 
counters are N310 and N311. UE judges if there is still keeping DL sync1 by decoding PDCCH/
PCFICH. If the percentage of BLER of PDCCH/PCFICH is greater than or equals to 10%, UE 
will consider that it is an out‐of‐sync indication, if the percentage of BLER is less than or equals 
to 2%, UE will consider that it is an in‐sync indication as shown in Figure 6.2.
If there are N310 consecutive out‐of‐sync indications, UE starts T310. If there are N311 
consecutive in‐sync indications, UE stops T310. If T310 expires, UE will consider a radio link 
failure, it means that UE has lost the sync with eNB. Then UE starts T311 and goes to reestab-
lishment procedure (Refer to 3GPP 36331, 5.3.11; see Figure 6.3).
In case of N310 consecutive out‐of‐sync indications on the UE side as shown in Figure 6.4, 
the UE will not initiate reestablishment until T310 has expired. If T311 expires (meaning no 
cell found), then UE goes to IDLE and starts cell reselection.
The UE uses timers T310 and T311 to get time to restore the connection with the eNB. 
During the time T310 + T311 the UE stays in RRC_connected state. If the UE can not reestablish 
1  The UE is expected to monitor the RS in the DL, based on the RSRP. The UE will determine if it can decode the 
PDCCH according to the specs. If the reference signals have enough strength such that the UE can decode 
consistently the PDCCH, then the link is in-sync.
Physical layer failure RLC layer failure
PHY Layer
Failure
Data RLC
Unrecoverable
Error
Handover
Failure
Out of Sync
Coverage or Interference
Problems
Parameter
Settings
RACH Issues
Security Issues
integrity check
failure
Re-configuration
failure
Radio Link
Failure
RLF
Recovery
Call Drop
eNB
Misconfiguration
Mac layer failure PDCP layer failure RRC layer failure
SRB RLC
Unrecoverable
Error
RACH Problems
Figure 6.1  Main possible radio link failure and call drop reasons.
time
BLER of reference 
PCFICH + PDCCH
10%
out-sync
out-sync
out-sync
out-sync
out-sync
out-sync
out-sync
out-sync
in-sync
in-sync
in-sync
2%
Figure 6.2  DL synchronization.
www.ebook3000.com

LTE Optimization Engineering Handbook
218
the connection to the eNB, the UE switches from RRC_onnected to RRC_idle and initiates the 
procedure to establish a new RRC connection. It may then establish a connection to a new eNB. 
The example displays the DL sync situation in Table 6.1 (refer to Figure 6.5), which shows that 
consecutive out_of_sync indications are up to 18 times. The setting of N310 is 20, N311 is 1, 
T310 is 2 s, and T311 is 3 s.
Some random access procedures are triggered by scheduling request when UE needs to obtain 
UL grant to send data. During random access procedure, if UE reaches the RACH maximum 
attempts (preampleTransMax + 1), the random access does not bring success, such as after con-
secutive preambleTransMax message 1, and UE does not receive message 2, or after UE sends 
message 3, and does not receive message 4 (contention failed). In this situation UE will consider 
First Phase
Second Phase
Cell reselection and tracking
area update if RRC re-
establishment fails
RRC connection re-establishment
attempted during t311
n311 consecutive in-sync
indications during t310
n311 consecutive out-
of-sync indications
normal operation
RRC_CONNECTED
radio link failure
radio
problem
detection
no recovery during T310
no recover during T311
goes back to idle
RRC_IDLE
Figure 6.3  RLF due to T310 expiry at UE.
Default RRC timers:
T300 ms 1000,
T301 ms 400,
T310 ms 2000,
T311 ms 3000,
T304 ms 1000,
UE
1st OOS occurrence
N310 times OOS
UE detects radio problems
and starts T310
If one of the following conditions is
met:
1. T310 expires
2. Random access problem indication
from MAC layer
3. Max RLC retransmission reached
Radio link failure detected
Suitable cell found
eNB
Start RRC reestablishment procedure
and start T311
Send RRC reestablishment request
and start T301
N310
times
N310 times out of sync is sent
from lower layers. e.g. not able
to decode 20 consecutive
subframes (PDCCH)
T311, default value is 3s. Start upon 
initiating the RRC connection 
re-establishment procedure, stop at 
selection of a suitable cell. When T311 is at 
expiration, the UE enter RRC_idle state.
T301, default value is 400ms. Start at 
the transmission of RRC connection
reestabilshment request, stop at 
reception of RRC connection
reestablishment or reject message as 
well as when the selected cell becomes 
unsuitable. When T301 is at expiration, 
the UE enter RRC_idle state.
Figure 6.4  UE out‐of‐sync and re‐starts cell reselection.
Table 6.1  DL sync situation.
SFN
Sub_fn
Out_of_sync_BLER
In_sync_BLER
Out_of_sync_count
In_sync_count
144
1
4.4%
53.0%
0
0
145
1
6.3%
58.4%
0
0
146
1
10.5%
60.8%
1
0
147
1
12.7%
65.0%
2
0
…..
…..
……
……
……
……
161
1
42.0%
83.6%
16
0
162
1
46.0%
83.7%
17
0
163
1
51.5%
84.4%
18
0

Drop Call Optimization
219
a radio link failure. Then UE starts T311 and goes to reestablishment procedure, or directly goes 
back idle mode. RLF due to RACH triggered by UL data arrival is shown in Figure 6.6.
UE will send to request an UL grant before UE had sent the maximum number of scheduling 
requests. UE cannot receive UL grants could be due to DL issues (weak DL SINR) or UE 
running out of UL coverage. The parameter of max number of scheduling requests is recom-
mended as 64 in such scenario.
In some random access procedures, the RACH trigger reason is handover. When UE receives 
handover command, it starts timer T304. If RACH procedure to the target cell does not ­succeed 
by the time T304 expires, handover failure occurs, UE tries RRC connnection reestablishment 
with reestablishment cause “handoverFailure.” RLF due to handover failure is shown in Figure 6.7.
200 ms
100 ms
n310
n311
t310
Out-of-Sync
Out-of-Sync
Out-of-Sync
Out-of-Sync
In-Sync
In-Sync
If n311, then
stop timer
If timer
expires,
Radio Link
Failed
20
2s
1
Figure 6.5  The example of DL out 
of sync.
Random access triggered
due to missing PUCCH SR
resources, or PDCCH order
UE attempting random
access to serving cell.
normal operation
First Phase
RRC_CONNECTED
RRC_IDLE
RRC connection re-establishment
attempted to serving cell during t311
RACH failure
radio link failure
Attempting PRACH to 
serving cell
no recovery during T311
goes back to idle
Second Phase
Cell reselection and tracking
area update if RRC Re-
establishment fails
Figure 6.6  Non‐handover–related random access issue result RLF.
normal operation
Handover command
Handover
required
First Phase
RRC_CONNECTED
RRC_IDLE
radio link failure
T304 expires
RLF detected
RACH preamble
RACH
start
Attempting PRACH to 
target cell
no recovery
during T311
goes back to idle
Second Phase
Cell reselection and tracking
area update if RRC Re-
establishment fails
RRC connection re-
establishment attempted to
source or target cell during t311
T304 running while UE
attempting access to
target cell.
T304
T304 is strated by the UE following handover command.
The UE detaches from the source cell and following
acquisition of the target cell, use RA procedure to attempt
access. If the UE is unable to access the target cell before
the expiration of T304, a RLF is detected.
Figure 6.7  Handover failure.
www.ebook3000.com

LTE Optimization Engineering Handbook
220
In addition to RLF and inactivity time out functions, there is a RLC algorithm managing 
generation of RLC failures. The RLC function is responsible for error correction through ARQ, 
protocol error detection, and recovery. UE receives the RLC status report from eNB after 
transmitting data. If UE do not receive the ACK message for relevant RLC block, UE needs to 
re‐transmit the block. If UE reaches the maximum re‐transmitting times, UE considers a radio 
link failure. Then UE starts T311 and goes to reestablishment procedure, or directly goes back 
idle mode (Refer to 3GPP 36322 5.2.1, 36331 5.3.11; see Figure 6.8).
Finally, all the radio link failure situations mentioned above can be detected by UE. The 
parameters related to RLF detection and recovery can be refered to Annex LTE timers.
6.1.2  RadioLink Failure Detection by eNB
6.1.2.1  Link Monitors in eNB
eNB radio link problem detection mechanisms are vendor internally specified. 3GPP does not 
specify eNB radio link failures, but some vendors eNB mimics the behaviour of the UE RLF 
specified in 3GPP. Multiple‐link monitors shown below are defined to detect a radio link problem 
in the popular eNB.
●
●UL PUSCH DTX detection for scheduled UL data. When UE is scheduled for PUSCH trans-
mission, eNB expects to receive UL transmission on the scheduled PRBs. If signal from UE 
cannot be detected, PUSCH DTX is declared, the detection of the radio link problem by the 
UL scheduler is based on the comparison of UL grant assignment and the DTX detection on 
PUSCH for the assigned PRBs. The detection result is received by LTE MAC.
●
●No allocated preamble received as a response to PDCCH order.
●
●CQI DTX detection for periodic CQI reports in PUCCH and PUSCH. If MAC layer receives 
CQI DTX consecutive reports from UL PHY layer, the eNB MAC declares a radio link 
problem.
●
●UL Ack/Nack DTX detection for transmitted DL data. If for consecutive DL resource alloca-
tions to the same UE the HARQ feedback from the UE is always “DTX,” either for a configur-
able period of time or for a configurable number of consecutive DL resource allocation 
attempts, DL scheduler declares radio link problem.
●
●SRS DTX detection for radio link problem detection. If MAC layer receives multiple SRS 
DTXs consecutive reports from UL PHY layer, the MAC declares SRS radio link problem.
Some vendors defined UL MAC RLF by SRS SINR as shown in Figure 6.9.
Each link monitor has its internal criteria and filtering with internal counters to decide when 
there is a radio link problem occurring and when there is a radio link problem recovery occur-
ring. When a radio link problem is detected, an eNB internal radio link recovery timer is started. 
normal operation
RLC retransmission until max
RLC retx threshold is reached
First Phase
RRC_CONNECTED
Radio Bearer Failure
UE Release
dlMaxRetxThreshold
RLC Failure
RRC_IDLE
radio link failure
no recovery during T311
goes back to idle
Second Phase
Cell reselection and tracking
area update if RRC re-
establishment fails
RRC connection re-establishment
attempted during t311
RLC retransmissions until
max value
Figure 6.8  Maximum UL RLC retransmissions reached.

Drop Call Optimization
221
The timer is stopped when in case of radio link failure recovery. In case the radio link recovery 
timer expires the RRC connection is released as well as the S1 released by the eNB using eNB 
initiated S1 release + RRC connection release, S1 release signaling will cause ECM connected 
state change to ECM idle state, so that the timer should be longer than T310 + T311 that the UE 
can perform RRC connection reestablishment to the source cell or to any other cell (Figure 6.10).
6.1.2.2  Time Alignment Mechanism
UL time alignment (TA) update is done periodically on per‐need basis. UE sends to eNB TA 
measurements based on PUSCH, PUCCH signals. eNB calculates the timing advance of every 
UE and deliver it to UE by TAC (timing alignment command) before the expiry of this timer so 
as to keep the UE in sync. UE uses this timing advance to adjust the UL transmission to main-
tain UL sync. As UE detects out‐of‐sync status using a time alignment timer (taTimer, in SIB2), 
the timer shall be started or restarted whenever an initial TA or a TA update command is 
RRC_IDLE
RRC_CONNECTED
TA
UL in-sync
TA
UL out-of-sync
RRC Connection Release
Expiry of Inactivity Timer
RA success, PDCCH order success
RRC Connection Reestablishment
RRC Connection Setup
RRC Connection Release
Radio link failure
SRS SINR > Threshold1
SRS SINR > Threshold2
UL OUT_SYNC
UL IN_SYNC
TA Failure
UE RACH
MAC RLF
Figure 6.9  UL synchronization based on the SRS SINR.
www.ebook3000.com

LTE Optimization Engineering Handbook
222
received (see [3GPP‐36.321], section 5.2). eNB shall send timing advance command in order to 
avoid expiration of time alignment timer as shown in Figure 6.11.
For UE, if time alignment timer expires, UE knows the UL sync is lost, and the UE will not be 
scheduled. In this situation, UE will clear HARQ buffer, release PUCCH/SRS and clear the 
received UL grant. After that, if UE wants to transmit data, it needs to re‐sync UL with eNB by 
random access procedure. The example shown in Figure 6.12 is multiple TA_expire and MAC_
RA_problem, in areas where there are numerous servers of low RSRP.
For eNB, eNB will find out the out of sync of UL when it can not measure the exact TA of UE. 
In a live network, the setting of Timing Alignment Timer can be infinity (0). It means that UE 
will consider that UL is always sync with eNB. With this setting, if eNB find there is UL prob-
lem, such as eNB has lost sync with UE (eNB can not measure the TA of UE), eNB will mark 
this UE as no_sync. With this mark it will not send any signal to this UE. In this situation, if 
there is data which eNB needs to send to this UE, eNB can notice UE by “PDCCH ordered 
random access function” to let UE re‐sync the UL through random access procedure 
(Figure 6.13). The interval between periodic TA update commands is based on the timing 
alignment timer reduced by a configurable offset taTimerMargin.
TA command period = taTimer – taTimerMargin
eNB
UE
MME
S-GW
S1AP: UE Context Release Command
S1AP: UE Context Release Complete
RRC: RRC Connection Release
Release all UE related 
resources,
remove UE context
Set UE to 
RRC-IDLE
Set UE to 
ECM-IDLE
Detect radio link 
problem, T_RLF 
expires
S1AP: UE Context Release Request
S11 interaction to inform S-GW
about connection release
UE in
RRC-CONNECTED
Figure 6.10  RLF triggered by eNB procedure.
Traffic Inactivity
Stop TA
Enter Long-DRX state
UL dedicated
resource = OFF
TA Timer
DRX Inactivity Timer
TA
Ack
TA
Ack
Ack
TA
eNB
RRC connection
release
UE
Figure 6.11  Active to idle state.

Figure 6.12  Example of multiple TA_expire and MAC_RA_problem.
www.ebook3000.com

LTE Optimization Engineering Handbook
224
A configurable parameter taMaxOffset is used to determine the maximum allowed timing 
alignment offset before a per‐need timing alignment update is required. The following parameters 
are recommended for UL time alignment configuration shown in Table 6.2.
6.1.2.3  Maximum RLC Retransmissions Exceeded
If UE/eNB reaches the maximum re‐transmitting times (ulMaxRetxThreshold/dlMaxRetxThresh-
old), that’s RLC max. In this situation, UE considers a radio link failure. Then UE starts T311 
and goes to reestablishment procedure, or directly goes back idle mode.
Example screenshots in the Figure  6‐14 highlight the occurrence of the RLC reset  –  RF 
­conditions are poor (low RSRP with several servers, PDSCH BLER runs beyond target 10%, and 
eNB
UE
MME
S-GW
S1AP: UE Context Release Command
S1AP: UE Context Release Complete
RRC: RRC Connection Release
Release all UE related 
resources,
remove UE context
Set UE to 
RRC-IDLE
Set UE to 
ECM-IDLE
TA timer expires
S1AP: UE Context Release Request
S11 interaction to inform S-GW
about connection release
UE in
RRC-CONNECTED
Figure 6.13  TA timer expires at eNB.
Table 6.2  UL time alignment configuration.
Parameters
Range
Description
Setting
taTimer
500 (0), 750 (1), 
1280 (2), 1920 (3), 
2560 (4), 5120 (5),
10240 (6)
Determines the number of subframes after which a UE 
assumes it is out‐of‐sync in UL if no time alignment 
command was received. The increased TA timer saves 
resources due to reduced number of TA command 
transmissions and also allows UEs more time for 
answering TA command and thus, probability for RLF 
might be less in case of UE is shadowed for short time only 
or not responding for short time.
10240
(6)
taTimerMargin 0…2560
The parameter defines lead with respect to the taTimer 
expiration time for starting to send the periodic timing 
advance command. The actual time interval between 
updates will be TimeAlignTimer – taTimerMargin.
2000
taMaxOffset
0…5, step 0.01
Determines the maximum allowed time alignment offset. 
If the value is exceeded, TA command is sent to the UE to 
adjust UL timing.
52
(0.52us)

Drop Call Optimization
225
RLC retransmissions are necessary) leading the UE to reset. This will be followed by initiation 
of RRC connection reestablishment procedure (Figure 6.14).
After max RLC retransmissions has been reached, eNB starts a timer to wait for an UE trig-
gered RRC connection reestablishment with cause “otherFailure.” If the timer expires, eNB 
releases the UE (S1 + RRC release), otherwise UE has triggered a RRC connection reestablish-
ment procedure and eNB performs the RRC connection reestablishment procedure (as for a 
RLF) (Figure 6.15).
For LTE optimization, proper signaling radio bearer and data radio beare’s RLC retransmis-
sion parameter settings can improve mobility and retainability performance. The recommended 
RLC robustness parameters tuning is shown in Table 6.3.
6.1.3  RadioLink Failure Optimization and Recovery
If RRC drop is due to random access (RA) failure at handover, when UE random access attempt 
to re‐sync, there is no response after the maximum retransmissions, and UE is not able to 
synch to target eNB. It needs to check message1, message2, message3, and message4 informa-
tions and UL interference or timing advance alignment issues with target cell.
After message1, UE has not received message2 until to the maximum RACH attempts is due 
to preamble issue. In this situation, eNB can not decode message1 correctly, or UE can not 
decode message2 correctly. It is usually due to bad DL/UL quality caused by low coverage or 
UE
eNB
AMD PDU (SN=23)
AMD PDU (SN=23)
AMD PDU (SN=23)
AMD PDU (SN=23)
#1
#2
#8
RL Failure
t-PollRetransmit
ReTX
Cause: 
RLC reset
Figure 6.14  Example of RLC reset.
www.ebook3000.com

LTE Optimization Engineering Handbook
226
high interference. If UE does not receive message4 after sending message3, until RACH 
­maximum attempts is due to no TA information in message2, it is contention failed.
If RRC drop is due to RLC maximum re‐transmission, it needs to check PUSCH/PDSCH 
BLER and SINR to see the radio environment. The eNB/UE can not decode (or receive) nor-
mally UL/DL RLC data due to UL/DL quality, which usually caused by interference, low signal 
level, overlapping cell, overshooting cell, or UE terminal.
For very low RSRP in serving cell, or sudden low received level in corner, or missing neighbor, 
or overshooting cell, its solution is to optimize coverage and neighbor relation. For RSRP that 
not too low in the serving cell, but appears very bad quality due to very high interference, its 
solution is to deal with the interference.
Usually, it will expected 3 to 5 sec to recover the RRC connection after RLF detection that is 
described below.
●
●PDCCH BLER monitoring time: N310 * 200 ms = 2 sec (assume N310 = 10, without DRX)
●
●Max Re‐Tx time: Max Re‐Tx Threshold*50 ms = 1.6 sec (assume RLC Max retransmission = 
32, RLC retransmission time = 50 ms)
UE
eNB
MME
RRC Connection Reestablishment procedure
eNB detects RLC 
maximum 
retransmission event
eNB waits for RRC 
reestablishment by 
UE (timer controlled)
Timer expires
Case Timer expiration 
UE detects RLF or 
RLC maximum 
retransmission event
UE CONTEXT RELEASE procedure
S1AP: UE CONTEXT RELEASE REQUEST
UE starts Reestablishment
Figure 6.15  eNB‐triggered release due to maximum number of RLC retransmissions.
Table 6.3  The recommended RLC robustness parameters (SRB and DRB).
MO Attribute
Parameter Description
Range
Recommended
dlMaxRetxThreshold
ulMaxRetxThreshold
Max. number RLC re‐transmissions in DL/UL before 
stopping and indicating to RRC that max. number of 
RLC re‐txs have been reached.
1, 2, 3, 4, 6, 
8, 16, 32
16

Drop Call Optimization
227
●
●RLF wait time: T310 = 2 sec (waiting time for radio link failure)
●
●Random access time: 2*RA‐response size * preamble trans Max = 80 ms (assume RA‐response 
size = 4 ms, preamble trans Max = 10)
●
●Time supervision of successful handover completion: T304 = 1 sec
●
●Cell reselection time: T311 = 3 sec (RRC connection reestablishment timer)
●
●RRC reestablishment time: T301 = 200 ms (RRC reestablishment procedure timer)
6.2  ­Reasons of Call Drop and Optimization
Reasons for poor retainability include but are not limited to coverage issues, handover issues, 
neighbor issues, interference, and other abnormal events.
●
●Poor signal quality in the UL and DL due to poor coverage or path imbalance, fault RRU and 
RF issues, Tx power limited or others, in the field, as the UE approaches an RSRP of ‐110 
dBm or SINR approaches ‐5 dB, the UE may not have sufficient signal strength to maintain 
the session. Further, it needs to check if the radio parameter settings are optimal like power 
setting, PCI collision, and so on.
●
●Interference, for DL quality, this can be evaluated by measuring the scanner SIR and F factor, 
to find if there is PCI pollution or overshooting cell. For UL quality, monitor PUSCH BLER 
and PHICH NACK.
●
●Handover failure in target EPC/eNB or system, that is, no neighbor, no measurement report, 
no handover command, RA failure at handover. Sometimes, Ts1reloc_overall_expiry, or 
Tx2reloc_overall_expiry maybe the reason.
●
●Admission reject, due to lack of licenses
●
●Release due to EUTRAN_generated reason
●
●RLC_failure_DRB, RLC_failure_SRB
●
●Load_balancing_TAU_required
●
●RRC_re‐configuration_time out, RRC_reestablishment_reject, due to parameter misconfiguration
●
●S1_reset, due to S1 link issues
The parameters related to the areas listed in the previous section, the E‐RAB drop rate can 
be easily improved by tuning the timers T310 and T311 as well as out‐of‐sync, N310, and in‐
sync, N311, along with the currently recommended values for maximising retainability perfor-
mance. If the drop event is found, the whole procedure should be investigated, for analyzing 
poor retainability, below parameters in Figure 6.16 are especially needed to pay attention to.
6.2.1  Reasons of E‐RAB Drop
The data radio bearer (DRB) and the S1 bearer carry user plane data between the UE and the 
SGW. S1 bearer carries user plane data between the RAN and the SGW, S1 application protocol 
Investigate UE MR, RSRP/RSRQ 
of serving and neighbor cell......
Investigate UE RLC/PDCP Thp, BLER, Harq 
Nack ratio, RLC Nack ratio, CQI, RSRP/RSRQ,
TA, RANK, and UE Tx_power limitation ratio.....
If HO happened, best ceel 
measurement should be 
investigated.....
Investigate the new (same) cell 
performance after call drop, 
performance and radio quality.
Drop
E-RAB established
Time
Time elapsed
Figure 6.16  Analyzing poor retainability.
www.ebook3000.com

LTE Optimization Engineering Handbook
228
(AP) bearer carries control plane data between the RAN and the MME. S1 application protocol 
is responsible for setting up, modifying, and releasing E‐RABs. Table 6.4 gives a list of the 
­different S1AP procedures.
An E‐RAB drop is counted each time the eNB sends an E‐RAB release indication to the 
MME, and whenever the MME sends the E‐RAB release command to the eNB with a release 
cause other than normal release, detach, user inactivity and CSFB triggered. E‐RAB can 
be released by either of E‐RAB release procedure or UE context release procedure, E‐RAB 
release reasons can be shown in Figure 6.17.
E‐RAB drop due to poor radio
Actually it can be found that UE loss is the most cause for E‐RAB abnormal releases in the 
whole network, although poor radio condition in LTE might be the reason.
Abnormal E‐RAB releases due to radio faults are caused by faults such as the number of RLC 
retransmissions reaching the maximum, UE UL out of synchronization, or signaling procedure 
failures that are resulted from weak coverage, UL interference.
If E‐RAB drop is due to poor radio, it needs to check whether UEs are mostly located in weak 
coverage areas (timing advance) and check the values of the counters related to CQI, bad cover-
age report, and UE_power restricted, and so on.
Table 6.4  S1AP procedures.
Elementary procedure
Initiating message
Successful response 
message
Unsuccessful response 
message
Handover preparation
Handover required
Handover command
Handover preparation 
failure
Handover resource 
allocation
Handover request
Handover request 
acknowledge
Handover failure
Path switch request
Path switch request
Path switch request 
acknowledge
Path switch request 
failure
Handover cancellation
Handover cancel
Handover cancel 
acknowledge
E‐RAB set up
E‐RAB set up request
E‐RAB set up response
E‐RAB modify
E‐RAB modify request
E‐RAB modify response
E‐RAB release
E‐RAB release command
E‐RAB release responseE
Initial context set up
Initial context set up 
request
Initial context set up 
response
Initial context set up 
failure
Reset
Reset
Reset acknowledge
S1 set up
S1 set up request
S1 set up response
S1 set up failure
UE context release
UE context release 
command
UE context release 
complete
UE context modification
UE context modification 
request
UE context modification 
response
UE context 
modification failure
eNB configuration 
update
eNB configuration update
eNB configuration update 
acknowledge
eNB configuration 
update failure
MME 
configuration update
MME configuration 
update
MME configuration 
update acknowledge
MME configuration 
update failure
Write‐replace warning
Write‐replace warning 
request
Write‐replace warning 
response

Drop call 
reason
RRC
MME
MME
RRC
MME initiated
MME initiated
eNB initiated
eNB initiated
S1AP
MME
RRC
S1AP
S1AP
E-RAB RELEASE COMMAND
UE CONTEXT RELEASE COMMAND
UE CONTEXT RELEASE REQUEST
UE CONTEXT RELEASE COMMAND
UE CONTEXT RELEASE COMPLETE
UE CONTEXT RELEASE COMPLETE
E-RAB RELEASE RESPONSE
E-RAB RELEASE INDICATION
Includes a list of E-RABs to be released
All resources for the E-RAB are released
(DRB and S1 Bearer)
All resources for the E-RAB are released
(DRB and S1 Bearer)
All resources for the UE context are released
(DRB and S1 Bearer)
All resources for the UE context are released
(DRB and S1 Bearer)
Includes a list of released E-RABs
Includes a list of released E-RABs
Includes release cause
RRC
MME
S1AP
Other 
reason
HO fail drop call
UE lost
HO analysis
HO preparation fail
Probable cause:
›
Poor radio
›
High UL interference
›
Improper neighbor 
relation
›
IFHO and IRAT 
feature
›
Lost due to UE 
capability
Probable cause:
› IFHO and IRAT 
feature
› TAC/IP configuration 
issue
› Admission control in 
target cell
› RLC mode for ERAB
› Target cell downtime
HO fail
›
tS1relocoverall 
expiry
›
RRU issue
›
Transport issue
Normal release
Abnormal Release
Probable cause:
-
User Inactivity
-
CSFB release
-
IRAT-
redirection
Figure 6.17  E‐RAB release procedure and reasons.
www.ebook3000.com

LTE Optimization Engineering Handbook
230
E‐RAB drop due to handover failures
Abnormal E‐RAB releases due to handover failures are caused by congestion on the target 
cell, intermittent downtimes on target cell, PCI collision, overshooters, and target cell is beyond 
the second‐tier neighbors.
E‐RAB drop due to transmission fault
Abnormal E‐RAB releases due to transmission faults are caused by transmission exceptions 
between the eNB and the MME. For example, the S1 interface experiences intermittent discon-
nections as shown in Figure 6.18.
E‐RAB drop due to congestion
Abnormal E‐RAB releases due to congestion are caused by congestion of radio resources 
on the eNB side. For example, the radio sources are insufficient if the number of UEs 
reaches the upper limit. If service drops due to congestion occurs in a cell for a long time, 
high load cell specific parameters setting and load balancing procedures (idle and con-
nected modes) can be enabled to reduce the cell load. In the long term, the cell requires 
capacity expansion.
6.2.2  S1 Release
Any abnormal events happened in S1/Uu will trigger S1 release procedure. S1 release can move 
the UE from ECM‐connected to ECM‐idle in both the UE and MME, and all UE‐related ­context 
information is deleted in the eNB. The initiation of S1 release procedure is either eNB initiated 
(e.g., radio, user inactivity, release due to UE generated signaling connection release) or MME 
initiated with cause, for example, authentication failure, detach, NAS, other protocol, and so 
on. The reasons are list in Table 6.5.
Figure 6.18  E‐RAB drop due to transmission fault (example).

Drop Call Optimization
231
In a live network, the value of E‐RAB drop rate is more than UE context drop rate. The below 
items will trigger UE context release request. For same cases, the source eNB sends the UE 
context release request with cause “tS1relocoverall‐expiry” to MME followed by the UE context 
release command from MME indicating the unsuccessful handover.
●
●Radio link failure and no RRC reestablishment
●
●S1 (TS1relocoverall‐expiry)/X2 release time out (tx2relocoverall‐expiry)
●
●UE RRC time out (release‐due‐to‐eutran‐generated‐reason)
Usually the operator can extend the parameter tS1relocoverall a little longer to solve the 
problem, which is shown in Figure 6.19, although this is not the best way to resolve this prob-
lem, it must wait for longer to release the source eNB radio resource, which is very wasteful.
The final solution is finding out why there is so long of a delay between handover notify and 
UE context release command in MME and to resolve it. An example of “radio_conection_with_
UE_lost” is shown in Figure 6.20.
Table 6.5  The reasons of S1 release.
UE release cause (3GPP)
UE release cause (3GPP)
Abnormal ‐ cell_not_available (S1_reset)
Normal ‐ CSFB_triggered
Abnormal ‐ failure_in_the_radio_interface_procedure
Normal – detach
Abnormal ‐ radio_conection_with_UE_lost  
(RLC_failure_DRB)
Normal ‐ Handover_desirable_for_ 
radio_reasons
Abnormal ‐ radio_conection_with_UE_lost  
(RLC_failure_SRB)
Normal ‐successful_handover
Abnormal ‐ release due to EUTRAN_generated  
reason (RLC_failure_SRB)
Normal ‐ UE_not_available_for_ 
PS_services
Abnormal ‐ release due to EUTRAN_generated reason
Normal ‐ user_inactivity
Abnormal ‐ TS1relocoverall expiry
Normal ‐ Load balancing TAU required
Abnormal ‐ TX2relocoverall_expiry
Normal_release
Abnormal ‐ radio resources not available
Abnormal ‐ authentication failure
Abnormal – control overload
100
1000
90
80
70
60
50
40
30
20
10
0
900
800
700
600
500
400
300
200
100
0
Day1
Day2
Day3
Day4
Day5
Day6
Day7
Day8
Day9
Sum of HoPrepOutS1AttInterEnb
Sum of S1 HOSR(%)
Figure 6.19  S1 handover success rate (change tS1relocoverall from 5 s to 8 s).
www.ebook3000.com

Figure 6.20  Radio_conection_with_UE_lost.

Drop Call Optimization
233
Upon reception of the handover command message, the source eNB shall stop the timer 
TS1RELOCprep and start the timer TS1RELOCOverall. The parameter TRelocOverall is defined as the 
maximum time for the protection of the overall handover procedure in the source eNB. Upon 
reception of the UE context release command message, the eNB shall release all related signal-
ing and user data transport resources and reply with the UE context release complete message. 
If the UE context release procedure is not initiated toward the eNB before the expiry of the 
timer TS1RELOCOverall, the handover will be failed with cause “TRelocOverall_EXPIRED,” the 
eNB shall request the MME to release the UE context. Two examples are shown in Figure 6.21 
and Figure 6.22.
6.2.3  Retainability Optimization
Retainability is defined as the ability of a user to retain its requested service once connected for 
the desired duration. It can be measured by the number of dropped calls per second or by 
percentage.
As have mentioned before, there could be many reasons when a call drops on LTE. It is 
important to check layer 3 messages specially during last a few seconds of drive in order to 
understand cause of drop. The drop location should also be seen with respect to RSRP and 
SINR surrounding drop. Neighboring sites should also be confirmed for issues near drop loca-
tion. One important thing to remember is terrain. Use Google Earth or any other software that 
can show you terrain for location of drop and elevation profile from serving sector. This will 
help you in understanding the cause of drop.
6.3  ­RRC Connection Reestablishment
The RRC connection reestablishment procedure is defined in 3GPP 36.331 and gives the UE 
the option to try to re‐connect if a radio link failure is detected. In case of lost connection 
(detection of radio link failure or handover failure) to the UE, eNB will keep the context for a 
period of time. During this period it is possible for the UE to do a RRC connection reestablish-
ment request in a cell found after a cell search. This cell can, in principle, be in any eNB. The 
feature allows the UE to reestablish RRC connection in serving cell in case of radio link failure. 
The eNB, instead of dropping the call (releasing the UE S1 + RRC release) immediately in case 
of failure, starts a timer for the reestablishment of the RRC connection; the UE attempts a con-
nection reestablishment in a cell. UE sends identification information in reestablishment mes-
sage such as C‐RNTI used in the cell where the failure occurred, the PCI of the cell where the 
failure occurred and a message authentication code (shortMAC‐I). The procedure is initiated 
by the UE in RRC connection reestablishment in case of detecting radio link failure.
For inter‐eNB cases the RLF report is relayed in X2 RLF Indication based on PCI received in 
reestablishment request. In a number of cases, reestablishment success does not occur (e.g., no 
UE context on the target) and RLF report cannot be delivered (Figure 6.23).
Radio link failure detection is due to for example:
●
●Expiry of the timer T310 (started after detection of physical layer problem)
●
●Random access problem indication from MAC
●
●Indication from RLC that the maximum number of retransmissions has been reached
●
●Handover failure (T304 expiry)
●
●Integrity check failure indication from lower layers
●
●RRC connection reconfiguration failure
www.ebook3000.com

Figure 6.21  An example of expiry of TS1RELOCOverall.

Figure 6.22  An example of expiry of TX2RELOCOverall.
www.ebook3000.com

LTE Optimization Engineering Handbook
236
At the RRC connection reestablishment request, the UE informs eNB about temporary iden-
tity and from which cell it originates. Based on this information it is possible for eNB to activate 
the correct context in eNB and with the, so far, not released bearers to MME/SGW.
The UE sends RRC connection reestablishment request message to the eNB in order to start 
the procedure and the eNB keeps the UE context alive while timer T311 doesn’t expire.
If the UE sends an RRC connection reestablishment request inside this period, the call is rees-
tablished, that is, first the eNB sends DL RRCConnectionReestablishment message for the UE 
to resume SRB1 and security and after reception of RRCConnectionReestablismentComplete 
message the eNB reestablishes the SRB2 and the DRB, which is shown in Figure 6.24.
If the RRC connection reestablishment request is outside the T311 period, the eNB would 
have already released these resources and will reply with an RRC connection reestablishment 
reject, UE will perform cell reselection + TAU. Here is a drop call example shown in Table 6.6.
The related timers of RRC connection reestablishment procedure is shown in Figure 6.25.
UE
eNB
MME
RRC Connection Reestablishment procedure
eNB detects RLC 
maximum 
retransmission event
eNB waits for RRC 
reestablishment by 
UE (timer controlled)
Timer expires
Case Timer expiration 
UE detects RLF or 
RLC maximum 
retransmission event
UE CONTEXT RELEASE procedure
S1AP: UE CONTEXT RELEASE REQUEST
UE starts Reestablishment
Figure 6.23  eNB release due to max number of RLC retransmissions exceeded.
T301
T301
X
UE
UE
eNB
eNB
eNB
RRCConnectionReestablishmentRequest
(SRBO,CCCH)
RRCConnectionReestablishment
(SRBO,CCCH)
RRCConnectionReestablishment
Complete (SRB1, DCCH)
RRCConnectionReconfiguration
procedure to setup SRB2 and DRB
RRCConnectionReconfiguration
RRC Connection Reconfiguration Procedure (re-establishes SRB2 and DRB(s)
RRCConnectionReestablishmentRequest
RRCConnectionReestablishment
RRCConnectionReestablishmentComplete
HO Preparation
Figure 6.24  RRC connection reestablishment at the same and at a different cell.

Drop Call Optimization
237
Since the RRC reestablishment procedure is made up of a couple of steps required to success-
fully reestablish the connection, a rough time estimate per step can be provided. The typical 
control plane outage time measured in the field during an RRC connection reestablishment 
request was measured to be approximately 750 ms. Typically, the time budget is list below: RLF 
detection needs 200 to 600 ms, cell search needs 100 to 800 ms, SIB reading needs 80 to 320 ms, 
and reestablishment procedure needs 60 to 200 ms. The example shown in Figure 6.26 gives an 
interruption time of 790 ms in this case.
RRC connection reestablishment can be based on a common solution for all cases: serving 
cell, incoming and outgoing handover, and unprepared cell. Its operation can be divided in 
three main flows: RRC connection reestablishment in unprepared cell, RRC connection rees-
tablishment during incoming handover, and RRC connection reestablishment during outgoing 
handover.
The solution of reestablishment during incoming handover is such that no reestablishment 
info is stored in the target cell until the handover is completed. If a reestablishment occurs 
prior to the storing of the reestablishment info no matching context will be found in that cell. 
It will instead be handled as a reestablishment in an unprepared cell (an unprepared cell is a cell 
Table 6.6  An example of drop call.
Time
Channel
Direction
Message
10:36:32
DCCH
UL
RRCConnectionReconfigurationComplete
10:36:32
BCCH‐SCH
DL
SystemInformationBlockType1
10:36:32
BCCH‐SCH
DL
SystemInformation
10:36:33
DCCH
UL
MeasurementReport
10:36:34
DCCH
UL
MeasurementReport
10:36:34
DCCH
DL
RRCConnectionReconfiguration (handover command)
10:36:34
DCCH
UL
RRCConnectionReconfigurationComplete
10:36:35
BCCH‐BCH
DL
MasterInformationBlock (In a new cell)
10:36:35
BCCH‐SCH
DL
SystemInformationBlockType1
10:36:35
BCCH‐SCH
DL
SystemInformation
10:36:35
BCCH‐SCH
DL
SystemInformation
10:36:35
BCCH‐SCH
DL
SystemInformation
10:36:35
CCCH
UL
RRCConnectionReestablishmentRequest
10:36:36
CCCH
DL
RRCConnectionReestablishmentReject
10:36:36
BCCH‐BCH
DL
MasterInformationBlock
10:36:36
BCCH‐SCH
DL
SystemInformationBlockType1
10:36:36
UL
TRACKING_AREA_UPDATE_REQUEST
10:36:36
CCCH
UL
RRCConnectionRequest
10:36:36
CCCH
DL
RRCConnectionSetup
10:36:36
DCCH
UL
RRCConnectionSetupComplete
10:36:41
DCCH
DL
DLInformationTransfer
10:36:41
DL
TRACKING_AREA_UPDATE_ACCEPT
10:36:41
UL
TRACKING_AREA_UPDATE_COMPLETE
www.ebook3000.com

1. Radio Link Failure
3. RL Restoration 
before T311 expiry
2. T311 started
6. UE Context Release Request
Cause
9. MME-initiated Connection Release
7.Release Access Bearers Request
8. Release Access Bearers Response
UE
eNodeB
MME
HSS
PCRF
PDN GW
Serving GW
4. RRC Connection Reestablishment Request
5. RRC Connection Reestablishment Reject
RRC Connection Re-establishment Initiated
RRC Connection
Reestablishment received,
T301 Stop
RRC Connection
Reestablishment Request
RRC Connection
Reestablishment
RRC Connection
Reestablishment Complete
T311 / T301 expired
Go back to IDLE
T301 Start, Wait for RRC
Connection Reestablishment
Suitable E-UTRA cell
found, T311 Stop
T311 Start, UE search for a suitable E-UTRA cell
UE
EUTRAN
Figure 6.25  RRC connection reestablishment timers.
UE sends multiple MRs but can’t decode
HO command from eNB due to poor radio.
This is the last MR before UE loses sync
and perform cell reselection.
UE re-establishes RRC connection.
Data radio bearer is setup.
interruption
time
Figure 6.26  Example of reestablishment time.

Drop Call Optimization
239
that does not have a UE context corresponding to the triplet PCI, C‐RNTI, shortMAC‐I) and 
UE context inquiry procedure is started.
●
●If RLF occurs before MR is received, then only source eNB will have the context to support 
reestablishment
●
●If RLF occurs after MR is received and before handover confirm is received, then both eNBs 
will have the UE context
●
●If RLF occurs after handover confirm is received and source has released resources, then 
only the target eNB will have the UE context
For outgoing handover, not all types of handovers are supported. That is, reestablishment is 
handled by an eNB both when the UE returns to the serving cell during intra‐eNB handover 
and X2 handover. S1 handover (intra LTE, IRAT, and SRVCC handover) are not supported.
The unprepared cell will try to fetch the UE context from all neighbor eNBs (including own 
eNB) that have a cell with the PCI received in the RRC connection reestablishment request mes-
sage from the UE. The context fetch procedure consists of proprietary X2AP messages sent 
between the unprepared target and the serving cell (Figure 6.27).
The total time required for a successful RRC reestablishment procedure might vary between 
440 ms and almost 2 seconds. Worst case an outage of 2 seconds might be observed during a 
handover failure or radio link failure when in a VoLTE call. Finally there is a difference in the 
RRC reestablishment procedure depending on whether the cell is considered as prepared on 
un‐prepared (Figure 6.28).2
With (multi‐target) RRC connection reestablishment, the UE‐‐specific connection to MME 
is kept during the time from connection lost until the RRC connection reestablishment proce-
dure is finished. The benefit is improved drop rate and especially for VoLTE calls the user will 
only see it as a short voice outage and no need for re‐dialing.
The following examples are about the failed RRC reestablishment (reject) after RLF due to 
eNB mis‐configuration during handover (Figure 6.29).
The configuration of N310 and T310 will impact of the success of RRC reestablishment. One 
example shown in Figure 6.30 presents reestablishment failure after RLF expires due to T301.
After UE low layer report N310 times of “DL out‐of sync,” UE high layer will start T310 timer 
and wait for UE low layer report “DL in‐sync,” if UE doesn’t receive “DL in‐sync” before T310 
expired, then UE will assume it is “out of sync” in DL. Setting the value low will result in higher 
risk of out of service and easier to go to RRC idle (drop) or RRC reestablishment. It is recom-
mended the default value: N310 = “N20,” T310 = “ms2000.”
In a live network, timers that impact drop call includes: T300, T301, T302, T303, T304, T305, 
T310, T311, T320, and T321; the proper settings of above timers is important to the call drop.
6.4  ­RRC Connection Supervision
There are two main UE EMM states: deregistered and registered. For deregistered, UE location 
is unknown to MME, UE cannot be paged. For registered, EPS default bearer has been ­activated, 
UE has IP address. EMM‐registered has two substates:
●
●Idle (=ECM‐idle + RRC‐idle)
●
●Connected (=ECM‐connected + RRC‐connected)
2  For reestablishment in “unprepared” cell is proprietary, thus not standardized by 3GPP.
www.ebook3000.com

tRelocOverallValue: 5s
T301
UE
Serving Cell
RRCConnectionReestablishmentRequest
Context fetch request
Context fetch response
Context fetch response accept
UE context release
Path switch request
Path switch request acknowledge
Counters stepped:
RRCConnectionReestablishment
RRCConnectionReestablishmentComplete
RRCConnectionReconfiguration
RRCConnectionReconfigurationComplete
Unprepared Target Cell
MME
400ms
tRrcConnectionReconfiguration: 6s
T304
500ms
Tell the serving cell, the reestablish order is got
Figure 6.27  RRC connection reestablishment.

Drop Call Optimization
241
For ECM‐idle/RRC‐idle, UE location is known at TA level. When UE transition to connected 
takes place by: i) paging needed if DL user data arrives; ii) UE triggers RRC connection request. 
UE makes cell reselection and TAU.
For ECM‐connected/RRC‐connected, UE location is known at cell level, UE is in RRC‐connected. 
UE changes cell by handover (Figure 6.31).
The radio connection is supervised by both the UE and the eNB. When the connection 
is  considered as “bad,” the UE may be released from RRC connected mode to idle mode. 
UE
RA preamble
(Msg1)
RA preamble
(Msg2)
RRC conn.
reestab. req.
(Msg 3)
RA preamble
(Msg1)
RA preamble
(Msg2)
RRC conn.
reestab. req.
(Msg 3)
RRC conn.
reestab. cmpl.
Adm.
Control.
Adm.
Control.
Context
fetch
Context
fetch reply
Msg4 with
empty
RRC comp
RRC conn.
reestab./reject
(Msg 4)
RRC conn.
reestab. cmpl.
RRC conn.
reestab./reject
(Msg 4)
T301
48 ms
MAC Contention
resolution
Target
eNB
UE
Target
eNB
Source
eNB
Figure 6.28  RRC reestablishment in case of prepared/un‐prepared cell.
RACH failure and RLF
detected
UE attempting re-
establishment
re-establishment
rejected by eNB
UE moves to Idle and
start new RRC
Connection
eNB configures UE with
2xSRB+ 2xAM
DRB+1xUM DRB
Figure 6.29  Failed reestablishmentafter RLF due to eNB misconfiguration during handover.
www.ebook3000.com

LTE Optimization Engineering Handbook
242
The ­connection is consedered as “bad” when BLER exceeds a certain threshold during a certain 
time duration (T310) or all data radio bearers for a UE are inactive for a certain duration, or if 
the number of RLC retransmissions exceeds a certain threshold. When T310 expires and the 
connection is still bad, the UE may send RRC connection reestablishment request to indicate to 
the eNB that a radio link failure has occurred. When T311 expires and no answer is heard from 
the eNB, the UE may return to the RRC_idle state.
If a data radio bearer (DRB) has been inactive in both UL and DL for a certain period, RLC 
will report inactivity of DRB to the radio connection supervision. If all DRBs are inactive for the 
duration specified by the tInactivityTimer, radio connection supervision will trigger a UE 
release. The tInactivityTimer parameter can be set to 0 to switch off supervision or between 10 
and 86400 seconds. In addition, the number of retransmissions to RLC failure is specified by 
the RLC acknowledged mode (AM) parameters (Figure 6.32).
RLF detected due to L1 failure
UE attempting re-establishment
re-establishment fails because of
RACH failure for the RRC Re-estb
T301 expires and UE moves to
Idle and start new RRC
Connection
eNB configures UE with
2xSRB+ 2xAM
Figure 6.30  Reestablishment failure after RLF expires due to T301.
EMM_Deregistered
ECM_Idle
Power On
Registration (Attach)
EMM_Registered
ECM_Connected
EMM_Registered
ECM_Idle
Release due to 
Inactivity
New Traffic
Deregistration (Detach)
Change PLMN 
• Release S-TMSI
• Release IP addresses
• UE, MME or HSS initiated 
Timeout of Periodic TA
Update
• Release S-TMSI and IP addresses
EMM-REGISTERED
EMM-DEREGISTERED
Detach,
Attach Reject,
Tau Reject
S1 Connection
Established
S1 Connection
Released
Attach Accept,
TAU Accept
ECM-IDLE
ECM-CONNECTED
• Release RRC + S1 connection
• Configure DRX for paging
• eNB initiated (inactivity timer)
• Allocate S-TMSI
• Allocate IP address + default bearer
• Authentication
• Establish security context
• Activate RRC + S1 connection
Figure 6.31  UE EMM states transition.

Drop Call Optimization
243
If ALL DRBs 
are inactive
BLER>Qout
T310
BLER>Qout
T311
dlMaxRetxThreshold
Radio Bearer 
Failure
UE Release
• •
RL Failure -> RRC Connection Re-
establishment Request
tInactivityTimer
UE Release
RLC Failure
RRC Connection Failure
Return to idle
…N310…
RRC Connected
RRC_CONNECTED
Inactivity for
‘tInactivityTimer’
Maximum
number of RLC
retransmissions
No
Yes
Yes
RRC_IDLE
No
RLC Acknowledged
Mode parameters
0 = Off
10 to 86400 seconds
Figure 6.32  Radio connection supervision principles.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
244
This section focuses on parameters that can improve latency in an LTE network. Latency is the 
most important KPI for applications with a bursty traffic profile. Latency is important when 
considering real‐time and interactive services. Latency is generally considered either as control 
plane latency or as user plane latency. Control plane latency involves the network attachment 
operation while user plane latency only considers the latency of packets while UE is in con-
nected state. Low user plane latency is essential for delivering interactive services, like gaming 
and VoIP. The latency related KPI is shown in Table 7.1.
To analyze and optimize the latency profile of the LTE network, ping performance will be 
used as a baseline. Ping is being used for discovering the user plane latency. The main factors 
that are going to contribute to the latency are the UE state (RRC state), whether it’s a MTC or 
MOC and the payload (ping size). The LTE latency overview is shown in Figure 7.1.
User plane latency is the average time between the first transmission of a data packet and the 
reception of a physical layer ACK. One‐way user plane latency is half the round trip user plane 
latency. LTE requirement is that one‐way latency across the radio access network is as low as 
5ms in optimal conditions, but that the value is dependent on the system loading and radio 
propagation conditions. This value corresponds to a round trip time (RTT) of 10 ms, which is 
challenging to achieve in practice.
Control plane latency (connection set up delay) is the time required for the transitions 
between different LTE states. LTE is based on two main states: RRC_idle and RRC connected 
(i.e., active). LTE system needs to support transition from idle into active is less than 100ms 
excluding paging delay and NAS (non‐access stratum) signaling delay.
7.1  ­User Plane Latency
RTT in DL is the interval between sending a datagram to the UE and receiving the corresponding 
reply by the IP host (peer entity). RTT in UL is the interval between sending a datagram by the 
UE and receiving the corresponding reply from an IP peer entity directly connected to the Gi 
interface of the P‐GW.
	
RTT
Average Ping
end time
Ping
start time
_
_
_
_
	
3GPP and NGMN recommend 10 ms1 air interface, 20ms end to end (RTT). For user plan 
latency budget, median round trip delay between UE and eNB backhaul network was about 
1  Measured round trip time with prescheduled uplink meet with 3GPP targrt of 10 ms.
7
Latency Optimization

Latency Optimization
245
19ms, core network transport delay was about 0.4ms round trip. RTT for data applications is 
measured with the ping application of the UEs operating system or with a comparable meas-
urement tool. It records the time difference between sending an ICMP echo request to an IP 
host and the reception of the corresponding ICMP echo reply message (Figure 7.2).
Prescheduling means UL transmissions without receiving scheduling request, which 
means eNB blindly grants PUSCH transmission to UEs. If there is no real data to transmit, 
the UE has to transmit padding bits. In Figure  7.2, UL grants are scheduled after eNB 
receives an SR (scheduling request). If SR period is 5ms, such that the latency will include 
all the time taken for SR transmission and receiving, scheduling delay, and grant transmis-
sion and receiving.
Target figures for the RTT KPI are also distinguished according to the cell position (RF conditions) 
and ICMP packet size. Figure 7.3 is valid for unloaded cells and good RF conditions.
Table 7.1  The latency‐related KPI.
Control Plane
User Plane
KPI Name
Critical
KPI Name
Critical
1st Page response time
Yes
Dedicated bearer activation time
No
UE activation time (idle to active)
Yes
VoIP call end time (Mobile to 
Mobile/PSTN)
No
Service request set up time
Yes
VoIP Mobile‐to‐Mobile Mouth‐to‐
Ear delay
Yes
MO VoIP call set up time (Mobile<>PSTN)
Yes
VoIP Mobile‐to‐Mobile Packet Latency
Yes
Mobile‐to‐Mobile VoIP call set up time
Yes
VoIP Mobile<>Land  
Mouth‐to‐Ear Delay
No
Ping RTT between UE and application 
server (unscheduled and prescheduled)
Yes
VOIP Mobile<>Land over Internet 
Packet Latency
No
Initial attach/detach time
No
VOIP Mobile<>Land over PSTN Packet 
Latency
No
UE
UE
eNB
RTT: X ms
RTT: Y ms
Latency between eNB
and core network
Core Network
Internet
Server
core network
core network latency
server latency
(Internet RTT)
(Network RTT)
Assumption: Y=0 ms
eNB
EPC latency
SGW/PGW
latency
UE
RAN latency 
(UE-eNB RTT) is 
impacted by downlink
PRB utilization/traffic 
load/CQI, uplink
PUSCH SINR/Noise 
etc.
UE
eNB
Figure 7.1  LTE latency.
www.ebook3000.com

UE
eNB
SR (Scheduling Request)
UL Grant
SR Period: configurable to 5ms, 20ms, 40ms
(This period grows as the number of UE increases)
3-4 ms
4 ms
BSR + Data
Data Ack
~8ms processing inside
eNB (up+down)
5 ms
Echo request
Ping Ack
Average
~25 ms
(measured 
in
the field)
Echo
reply
5 ms
3GPP target (Air interface) 
SGW
PGW
0.20ms
12.4ms
6.8ms
server
0.24ms
Pre-scheduled uplink
End -End
Pre-scheduled uplink
No pre-scheduling
0
5
10
15
20
25
ms
eNB
Air interface
Figure 7.2  3GPP recommend and field test user plan latency budget.
Ping RTT-PDF
0.0%
10.0%
20.0%
30.0%
40.0%
50.0%
60.0%
70.0%
80.0%
90.0%
100.0%
13 14 15 16 17 18 19 20 21 22 23 24
27
26
29 30 31 32 33 36 39 40 45
39 40 45 58
Ping RTT-Distributions
13
0.0%
10.0%
20.0%
30.0%
40.0%
50.0%
60.0%
14 15 16 17 18 19 20 21 22 23 24 26 27 29 30 31 32 33 36
40
32Bytes
1000Bytes
1500Bytes
Max
Latency (ms)
Min
Aver
29
25
0
5
10
15
20
25
30
35
40
45
22
14
19
22
24
25
Figure 7.3  User plane latency – RTT 
(no prescheduling).

Latency Optimization
247
In a live network, the result of average RTT without prescheduling (32 bytes), 90% of samples 
are below 20 ms, and 98% of samples are below 23 ms. Configure payload size to maximum 
2400 bytes shows little difference between 32 bytes with maximum UL grant size configured.
Prescheduled user plane latency will meet 3GPP targets, unscheduled user plane latency 
consistent to specification. UP latency with prescheduling function is approximately 10ms less 
than prescheduling off. So RTT optimization mainly focus on scheduling section except RF 
conditions. It notes that overload usually impacts user plane latency (Figure 7.4).
7.2  ­Control Plane Latency
In the ECM_idle state, UE initiated the ping process, or the server to launch the UE ping com-
mand, both can trigger the UE state transitions from idle to active. This state transition delay is 
the time delay of the control plane. Therefore, the test procedure is UE first complete the 
attachment process, and then wait for the timer inactivity time out, UE enters into the idle 
state. UE initiated the ping process, making the UE from ECM_idle to ECM_active state. 
Control plane latency is calculated from the first RACH preamble to RRC connection reconfigu-
ration complete message, which is shown in Figure 7.5.
The maximum re‐transmit of the above messages process is shown in Table 7.2.
The service request set up time is between the time when the UE sends service request 
­(service request NAS IE is included in the RRC connection set up complete message) to the 
MME and the time when initial UE context set up complete is received at the MME. It’s a part 
of the UE idle to active state transition time.
7.3  ­Random Access Latency Optimization
The random access procedure takes two distinct forms: contention‐free and contention‐based 
RACH access. Contention‐free is applicable only to handover and DL data arrival. Contention‐
based is is performed for the initial access from RRC_idle, RRC connection reestablishment, 
and DL data arrival during RRC_connected etc. Note that in both events the UE already has a 
C‐RNTI (Figure 7.6).
Contention‐free RACH duration is defined as from message1 to message2, while average 
RACH duration is around 20ms. Contention‐based RACH duration is defined as from 
­message1 to message4, while average RACH duration is around 90ms (Figure 7.7).
Ping times include UL resource 
allocation and router delay. 
For persistently scheduled 
resources, RTT will be 10 ms.
PC
UE
eNB
Router
PC
˜0.1ms
(eNB to PC)
˜10 ms
PING
PING
Scheduling
Request
DL Grant+PING
PING
PING
PING
UL Grant
Figure 7.4  User plane latency distribution.
www.ebook3000.com

LTE Optimization Engineering Handbook
248
7.4  ­Attach Latency Optimization
This procedure is done when the UE is coming from power off or detach state. During the 
attach procedure, the UE registers itself to the MME. The MME stores the UE context. The MME 
and the UE sets up the default data radio bearer as part of the default EPS bearer. The MME keeps 
the default EPS bearer context even when the UE goes to idle mode after this procedure. The 
UE also keeps its IP address when in RRC_idle.
>220ms
UE
eNB
MME
2.RACH Premble
A: processing delay in UE
B: processing delay in eNB
C: processing delay in MME
D: delay for RACH Scheduling
period
12.Initial UE Message
14. Initial Context Setup Request
19. Initial Context Setup Response
4. TA +Scheduling Grant
6.RRC Connection Request
8.RRC Connection Setup
> 40ms
10.RRC Connection Setup Complete
+NAS Service Request
16. Security Mode Command+
RRC Connection Reconfiguration
18. RRC Connection Reconfiguration Complete
A
Active
State
IDLE
State
A
A
B
B
B
B
C
D
> 50ms
Total time from
idle to activate 
state
Figure 7.5  Procedure for control plane latency.
Table 7.2  The maximum re‐transmit of the listed messages.
1
Rach Preamble
UL
MAX retx (3)
2
Rach Response
DL PDSCH
No HARQ
3
RRC Con Req
UL PUSCH
TM CCCH
5 HARQ
4
RRC Con Setup
DL PDSCH
TM CCCH
5 HARQ
5
RRC Con Setup Complete
UL PUSCH
AM DCCH
5 HARQ
6
Security Mode Command
DL PDSCH
AM DCCH
5 HARQ
7
Security Mode Complete
UL PUSCH
AM DCCH
5 HARQ
8
RRC Con Reconfiguration
DL PDSCH
AM DCCH
5 HARQ
9
RRC Con Reconfiguration Complete
UL PUSCH
AM DCCH
5 HARQ
10
UE Capability Enquiry
DL PDSCH
AM DCCH
5 HARQ
11
UE Capability Information
UL PUSCH
AM DCCH
5 HARQ

Contains a UE contention 
resolution identity. 
If message 4 is successfully 
received and the UE contention 
resolution identity contained in 
the message matches the content 
of message 3, the contention 
resolution is considered 
successful. 
UE
eNB
UE
eNB
1. Dedicated Preamble allocation
(Preamble ID, RACH Resource ID)
2. RACH Preamble
1. RACH Preamble
3. RRC Signaling
4. Contention Resolution
3. Random Access Response (RAR)
2. Random Access Response (RAR)
Figure 7.6  Contention‐free (left) and contention‐based (right) RACH procedure.
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
>0 to < = 10
>10 to
< = 20
>20 to
< = 30
>30 to
< = 40
>40
Duration (ms)
pdf
cdf
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
>30 to
< = 50
>50 to
< = 70
>70 to
< = 90
>90 to
< = 110
>110
to
< = 130
>130
to
< = 150
>150
to
< = 170
>170
Duration (ms)
pdf
cdf
Figure 7.7  Contention‐free (left) and contention‐based (right) RACH access latency.
www.ebook3000.com

LTE Optimization Engineering Handbook
250
After RRC connection, eNB forwards attach request to MME initiating the set up of the S1 
control plane. This triggers authentication and key agreement procedure involving the HSS 
and the AUC. Security keys and vectors are generated and passed on to the MME. When UE 
performs the initial attach procedure, MME need to request for the UE’s IMSI to reconfirm 
UE’s identity and authentication. Then, MME initiates the establishment of the default date 
radio bearer as part of the default EPS bearer to finish attach procedure (Figure 7.8).
Field result shows that under either stationary(good RF) or mobility, the average attach dura-
tion is around 220 to 240 ms, the minimum can even reach to 160 ms.
7.5  ­Paging Latency Optimization
The time duration for paging was measure from paging message to RRC reconfiguration com-
plete message. The latency is determinated by the paramtere DRX paging cycle and RF condi-
tions. Paging procedure and latency analysis is shown in Figure 7.9.
The average latency increase with degraded SNR due to fading conditions, the range of vari-
ation is usually several milliseconds. Prescheduled ping latency outperforms non‐presched-
uled ones as expected, lab result also shows ping latency versus increased path loss in 
Figure 7.10.
7.6  ­Parameters Impacting Latency
Latency is just one of the performance index. Relevant KPIs should be considered and bal-
anced. Control plane latency involves the network attachment operation while user plane 
latency only considers the latency of packets while UE is in connected state. Some mechanisms 
UE
NAS
AS
LTE Uu
RRC Connection Request
Random Access Request / Response (MSG1 / MSG2)
UE Identification / Contention Resolution (MSG3 / MSG4)
ueCapabilityEnquiry / ueCapabilityInformation
NAS Security Mode Command / NAS Security Mode Complete
securityModeCommand / securityModeComplete
RRC Connection Reconfiguration / Reconfiguration Complete
Attach Accept
Attach Complete
NAS Authentication Request / NAS Authentication Response
RRC Connection Setup / RRC Connection Setup Complete
S1- MME
Attach Request
eNB
MME
The attach time is the time 
between the sending of the 
Attach request NAS message 
from the UE (inside the RRC 
connection setup complete 
message) and the receipt at 
the MME of the Attach 
complete message from the 
UE 
Figure 7.8  Attach procedure.

Latency Optimization
251
including scheduling request periodicity, prescheduling, DRX and PRACH parameters, and so 
on, will impact network latency.
Below setting can shorten the latency on air‐interface:
●
●Change SR periodicity from 10ms to 5ms (drawback: increase UE power consumption and 
network interference)
●
●Enable prescheduling (drawback: increase UE power consumption and network interference; 
waste of channel resources; decrease UE throughput when large amount of UEs in the 
network)
●
●Disable DRX (drawback: increase UE power consumption)
PRACH parameters impacting control plane latency (attachment operation) and user plane 
latency are given in Table 7.3.
The inactivity timer will ensure that the UE is active even for busy traffic. If no data is send/
received, the UE goes to sleep and wakes up during the next DRX cycle. Figure 7.11 shows the 
effect of DRX on latency. The result from ping responses suffers the same effect, because they 
need to wait for the maximum long DRX cycle.
UE
eNB
MME
UE
eNB
MME
Paging
S1-AP: INITIAL UE MESSAGE(FFS)
+ NAS Service Request
+ eNB UE signalling connection ID
S1-AP: INITIAL CONTEXT SETUP REQUEST
S1-AP: INITIAL CONTEXT SETUP COMPLETE
+ (NAS message)
+ MME UE signalling connection ID
+ eNB UE signalling connection ID
+ Bearer Setup Confirm (eNB TEID)
+ Security Context
+ UE Capacity Information (FFS)
+Bearer Setup (Serving SAE-GWTEID, QoS
profile)
Paging
RACH Premble
TA+ Scheduling Grant
RRC Connection Setup
10, RRC Connection Setup Complete
Random Access Procedure
NAS: Service Request
RRC: Radio Bearer Setup
(NAS Message)
RRC: Radio Bearer Setup Complete
Paging
Delay for RACH
Scheduling Period
Processing
delay in UE
Processing
delay in UE
Processing
delay in eNB
Processing
delay in eNB
69ms
76 ms
168ms
RRC Connection Request
Paging
Figure 7.9  Paging procedure and latency analysis.
www.ebook3000.com

LTE Optimization Engineering Handbook
252
Userplane Latency_32Bytes 
Non–prescheduled vs. pre–scheduled
A
30
15.4
31.4
15.6
32.4
17.2
B
A
B
A
B
0
high SINR
medium SINR
low SINR
5
10
15
20
25
30
35
Latency (ms)
Non Pre-scheduled
A
B
Pre-scheduled
Ping latency vs pathloss, AWGN
pathloss relative to maximum pathloss (dB)
Ping latency (ms)
0
–50
–45
–40
–35
–30
–25
–20
–15
–10
–5
0
20
40
60
80
100
120
Very poor coverage
causing higher BLER
Figure 7.10  Paging latency for different SNR locations.
Table 7.3  Parameters impacting control plane latency.
Name
Recommended
Name
Recommended
preambleInitialReceived 
TargetPower
94dBm
macContentionResolutionTimer
Sf64
preambleTransMax
n8
maxHARQmsg3Tx
4
preambleTransmitPowerStepSize
dB4
maximumNumberOfDLTransmisions 
RACHMessage4
4
aUGtriggerDelayforRACHmsg4
5

Latency Optimization
253
VoIP Packet 1
eNB
VoIP Packets
Scheduled
Packets
Transmission Delay
PRBs Matrix
UE
DRX State
Talk-Spurt detected
Three types of DRX parameters in live network
drx-Config
DRX-Config:setup
onDuration Timer :psf2
drx-Inactivity Timer:psf100
drx-Retransmission Timer:psf2
longDRX-CycleStartOffset:sf40
sf40 : 1
shortDRX-Cycle :sf20
dxShortCycle Timer:1
drx-Config
drx-Config
DRX-Config: setup
onDuration Timer : psf60
drx-Inactivity Timer : psf80
drx-Retransmission Timer : psf8
longDRX-CycleStartOffset :sf320
sf320:281
DRX-Config: release
Support both long and short -DRX
Only support long- DRX
DRX not supported
On-Duration
On-Duration
DRX cycle
No available PRBs
VoIP Packet 1
VoIP Packet 2
Figure 7.11  DL UE scheduling with DRX.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
254
Mobility is the key procedure for ensuring that users can move freely within a network. The 
LTE mobility can be divided into “intra‐LTE mobility” and “inter‐LTE mobility” (inter‐working 
with 2G/3G and CDMA2000). It can be further divided into RRC_connected and RRC_idle 
mode mobility. Inter‐radio access technology handover (IRAT‐handover) is one type of 
­“inter‐LTE mobility” in RRC_connected mode while cell reselection is referred to as RRC_idle 
mode mobility.
The idle mode tasks can be divided into four processes: PLMN selection, cell selection and 
reselection, location registration, and manual CSG ID selection. The UE performs a PLMN 
selection when switched on, and for example, when a new PLMN is found at return from lack 
of coverage. Cell selection aims to find one suitable cell to camp on, which refers to UE in idle 
mode by monitoring the signal quality of neighbor cell and the current serving cell to choose 
the best cell service signal process. Cell reselection aims to camp on the best cell according to 
the evaluation criteria, which is performed continuously by the UE in RRC_idle.
RRC_connected mobility (LTE handover) consists of four distinct phases: measurement 
­configuration, measurement reporting, handover evaluation, and handover execution. 
Handover process in LTE is hard handover; it means that it has to break the wireless connection 
first and re‐establish the connection after it handover to a new cell, thus it will impact the user 
experience in network.
It is generally assumed that downlink measurements, done by the UE, are used for the handover 
decision. Measurements performed by the source eNB may also assist the decision. The reporting 
can be done on an event triggered and/or periodic basis. In event‐triggered reporting, the UE 
measures, evaluates, and reports standardized events, which are used for triggering network 
actions, for example, handover. The events and parameters are controlled by the network and 
used by the UE, for example, offsets, hysteresis, averaging time, thresholds, and so on. The UE 
sends a report only when the network is interested in the information, that is, only when event 
criteria are fulfilled. As an example to fully understand the scope of each event and how the 
different handover are triggered, Figure 8.1 is provided.
The UE will not perform measurements of neighbor cells when the serving cell RSRP is above 
Threshold1 (Th1). This saves UE battery life and avoids unnecessary handovers in good radio 
conditions. The eNB will command the UE to perform measurement gaps when one of the Th2 
events is reported in a measurement report. Measurement gaps will be cancelled if the serving 
cell RSRP rises above Th2a. As a last resort, if no suitable intra‐frequency or inter‐frequency/
IRAT cells are found by the UE and the serving cell RSRP falls below Th4, an RRC connection 
release with re‐direction can be triggered by the eNB.
Note that if Th2 values are set to a high value, this will increase the measurement gaps. As 
DRX cannot be used in parallel with measurement gaps and measurement gaps have higher 
8
Mobility Optimization

Mobility Optimization
255
priority than DRX the benefits of DRX (i.e., increasing battery time) wouldn’t be observed 
when Th2 values are set too high.
Mobility for UEs is very important to ensure PS service continuity and reduce the interrup-
tion, latency, and PS drops. Tuning the handover thresholds/timers is needed to reduce unnecessary 
handover attempts toward overshooting cells or due to shadowing.
8.1  ­Mobility Management
Mobility management refers to the process of establishing, maintaining, and releasing physical 
channel between E‐UTRAN and UE, which is shown in Figure 8.2. In the system of E‐UTRAN, 
according to the connection state of RRC, the mobility management is divided into two catego-
ries: connected state and idle state.
The purpose of handover is to ensure that a UE in RRC_connected mode is served continu-
ously when it moves. Mobility including intra‐frequency handover, inter‐frequency handover, 
RSRP (dBm)
No measurements
except serving cell
Intra–LTE
measurements
Intra–LTE + Inter
Freq measurements
Intra–LTE + Inter
Freq + WCDMA 
measurements 
Intra–LTE + Inter
Freq + WCDMA +
GSM
measurements
Th4
Th2_GSM
Th2_WCDMA
Th2_InterFreq
Th1
Th2a
RRC
Connection
Release and
re-direction
Figure 8.1  Event thresholds configuration for different handover types.
LTE
LTE
WCDMA/GSM
CDMA
2000
S1 based
• Packet Mobility
• Packet Handover
X2 based
• Packet Handover
Gn based
• Packet Mobility
• Packet Handover
S2a based
• Packet Mobility
S101/103 based
• Packet Handover
S3/S4 based
• Packet Mobility
• Packet Handover
S2a based
• Packet Mobility
CS Fallback
SRVCC
WCDMA/
GSM/
CS
Figure 8.2  Mobility management.
www.ebook3000.com

LTE Optimization Engineering Handbook
256
inter‐RAT handover and handover between TDD and FDD LTE. From the mobility point of 
view, the mobility can be classified into intra‐LTE handover, coverage trigger session continu-
ity, inter‐frequency load balancing, service‐triggered mobility, and subscriber‐triggered mobil-
ity. The parameters of mobility can be derived from SIB message as shown in Figure 8.3.
Figure 8.4 shows the different states of the UE/MS in GSM, 3G, and LTE, also shown the 
transitions of these states while the UE/MS is in RRC_idle and RRC_connected mode. Actually, 
IRAT mobility from LTE is only supported through session continuity or release with redirect. 
When an IRAT mobility event is triggered while in LTE network, the eNB shall intiate a UE 
release with redirect information to reselect to 3G, 2G, or CDMA network.
8.1.1  RRC Connection Management
RRC connection management involves RRC connection establishment, RRC connection 
reconfiguration, RRC connection re‐establishment, and RRC connection release.
●
●RRC connection establishment: This procedure is performed to establish an RRC connec-
tion. RRC connection establishment involves signaling radio bearer 1 (SRB1) establishment. 
The procedure is also used to transmit the initial NAS dedicated information or messages 
from the UE to the E‐UTRAN.
●
●RRC connection reconfiguration: This procedure is performed to modify an RRC connec-
tion, for example, to establish, modify, or release radio bearers, to perform handovers, and to 
configure or modify measurements. As a part of the procedure, NAS dedicated information 
may be transmitted from the E‐UTRAN to the UE.
●
●RRC connection re‐establishment: This procedure is performed to re‐establish an RRC con-
nection after a handover failure or radio link failure. RRC connection re‐establishment 
involves the restoration of SRB1 operation and the re‐activation of security. A UE in RRC_
connected mode, for which security has been activated, may initiate the procedure in order 
to continue the RRC connection. The connection re‐establishment will succeed only if the 
cell has a valid UE context.
●
●RRC connection release: This procedure is performed to release an RRC connection. RRC 
connection release involves the release of the established radio bearers and the release of all 
radio resources.
8.1.2  Measurement and Handover Events
The UE performs radio measurements of its surrounding radio environment. The eNB con-
trols the UE measurement in idle mode with the broadcast system information blocks and in 
From
Mandatory SIB
Optional SIB
To
LTE
SIB1-SIB2-SIB3
SIB4
LTE-Intra-Freq
LTE
SIB1-SIB2-SIB3
SIB5
SIB4
LTE-Inter-Freq
LTE
SIB1-SIB2-SIB3
SIB6
WCDMA
LTE
SIB1-SIB2-SIB3
SIB7
GERAN
LTE
SIB1-SIB2-SIB3
SIB8
HRPD
Mobility types 
Figure 8.3  SIB for handover.

1x
LTE
EVDO
3G
LTE
GSM
Handover
1xRTTCS Active
1xRTT Dormant
E-UTRA 
RRC_CONNECTED
E-UTRA 
RRC_IDLE
HRPD Idle
Handover
Reselection
Reselection
HRPD Active
Handover
CELL_PCH
URA_PCH
CELL_DCH
UTRA_Idle
E-UTRA 
RRC_CONNECTED
E-UTRA 
RRC_IDLE
GSM_Idle/GPRS 
Packet_Idle
GPRS Packet 
transfer mode
GSM_Connected
Handover
Reselection
Reselection
CCO, 
Reselection
CCO with 
NACC
CELL_FACH
CCO, Reselection
Connection 
establishment/release
Connection 
establishment/release
Connection 
establishment/release
Reselection
Connection 
establishment/release
Figure 8.4  LTE Inter RAT mobility procedures.
www.ebook3000.com

LTE Optimization Engineering Handbook
258
connected mode with a RRC measurement control message. Two parameters are used to trigger 
measurements of the neighboring cells, idle mode uses sIntrasearch, and connected mode uses 
sMeasure.
When UE is in connected mode, a UE measurement consists of two parts: measurement 
object and report configuration. This pair is referenced by a measurement ID. In connected 
mode, when the eNB provides the UE with a measurement configuration, it includes the 
­following parameters (Figure 8.5):
●
●Measurement objects: The objects on which describes the radio technology and frequency 
to measure on.
●
●Reporting configurations: A list of reporting configurations where each reporting configura-
tion consists of reporting criterion and reporting format. Reporting criteria triggers the UE 
to send a measurement report (e.g., RSRP). Reporting format quantities that the UE includes 
in the measurement report (e.g., RSRP and RSRQ).
●
●Measurement identities: A list of measurement identities where each measurement identity 
links one measurement object with one reporting configuration.
●
●Quantity configurations: One quantity configuration is configured for intra‐frequency meas-
urements, and one per RAT type.
●
●Measurement gaps: Periods that the UE may use to perform measurements, that is, no (UL, 
DL) transmissions are scheduled.
Measurement procedures distinguish the following types of cells: the serving cell, cells 
listed within the measurement objects, and cells that are not listed within the measure-
ment objects but are detected by the UE on the carrier frequencies indicated by the meas-
urement objects.
When the measurements triggering conditions are met, the UE initiates the measurement 
reporting procedure and sends a measurement report message to the eNB. The message 
includes the information related to the event previously configured by the eNB. From the 
measurement report sent by the UE, the eNB may take a handover decision. Up to now, LTE 
measurement items by eNB and UE are listed below:
●
●UE measurements: CQI, RSRP, RSRQ, and inter‐RAT measurements for handover.
●
●eNB measurements: DL RS Tx power, received interference power, thermal noise power, TA, 
average RSSI, average SINR, UL CSI, detected PRACH preambles, transport channel BLER, 
and so on.
Measurement object
LTE carrier frequency 1
1
2
3
4
5
1
2
3
4
5
1
2
3
4
1
2
3
4
Event A1
Event A3
Event B2
Event B2
5
1
2
3
3
5
LTE carrier frequency 2
UMTS carrier frequency 1
UMTS carrier frequency 2 
GERAN set of carrier frequencies
Measurement
ID
Report
ID
Report
ID
Report config.
ID
Object
ID
Object
ID
Figure 8.5  Measurement configuration.

Mobility Optimization
259
3GPP defines in TS36.331 several handover triggers in LTE. The handover events A1, A2, A3, 
A4, A5, B1, and B2 currently supported by eNB are listed below (Figure 8.6):
●
●Event A0: Periodical reporting
●
●Event A1: Serving becomes better than threshold
●
●Event A2: Serving becomes worse than threshold
●
●Event A3: Neighbor becomes offset better than serving
●
●Event A4: Neighbor cell becomes better than a threshold value. Event A4 is mainly used 
to configure UE to perform measurements on inter‐frequency carriers for offloading 
purpose
●
●Event A5: Serving becomes worse than threshold1 and neighbor becomes better than 
threshold2
●
●Event B1: Inter‐RAT neighbor cell becomes better than a threshold value. Event B1 is use for 
CS fallback to UTRAN and GERAN
●
●Event B2: Serving becomes worse than threshold1 and inter RAT neighbor becomes better 
than threshold2
The parameters of hysteresis of intra_LTE mobility are concluded in Table  8.1 and 
Table 8.2.
Measurement command message is included in RRC connection reconfiguration message. 
Measurement configuration is depicted in Figure 8.8.
RSRP
RSRP
RSRP
RSRP serving
RSRP neigh
RSRP neigh
RSRP serving
RSRP serving
move direction
move direction
move direction
A2 trigger
A3 trigger
A5 trigger
A3 offset
A5 thold, y‘
A5 thold, x‘
A1 threshold
A2 threshold
A1 trigger
Figure 8.6  Handover events.
Table 8.1  Use of hysteresis for various mobility events – intra‐frequency mobility.
Mobility event
Type
Event triggered condition
Event cancelled condition
Start/stop of 
measurements of 
intra‐frequency cells
A1/A2
RSRPserv < threshold1
Better cell handover 
(intra‐frequency)
A3
RSRPneigh > RSRPserv + a3Offset + 
hysA3Offset
RSRPneigh < RSRPserv + a3Offset ‐ 
hysA3Offset
Coverage handover 
(intra‐frequency)
A5
RSRPserv + hysThreshold3  
< threshold3 AND RSRPneigh – 
hysThreshold3 > threshold3a
RSRPserv – hysThreshold3 > 
threshold3 OR RSRPneigh + 
hysThreshold3 < threshold3a
www.ebook3000.com

LTE Optimization Engineering Handbook
260
8.1.3  Handover Procedure
Intra‐LTE handover have two versions: S1‐based and X2‐based. The X2 handover is normally 
used for inter‐eNB handover and is preferred because of its packet‐forwarding feature to avoid 
data loss. If the X2 interface is not available or the source eNB is configured to use S1 based 
handover, then S1 handover is used. From the UE perspective, the two procedures are identical. 
In fact, the UE doesn’t even know which handover procedure is executed. The successful hand-
over was determined by verifying the following message sequence as shown in Figure 8.9:
●
●Measurement report sent from UE to source cell.
●
●RRC connection reconfiguration message including MobilityControlInfo sent by a source cell to UE, and
●
●RRC connection reconfiguration complete sent from UE received by a target cell.
Table 8.2  Use of hysteresis for various mobility events – inter‐frequency mobility.
Mobility event
Type
Event triggered condition
Event cancelled condition
Start of measurements 
of inter‐frequency cells
A2
RSRPserv < threshold2InterFreq – 
hysThreshold2InterFreq
Better cell handover 
(inter‐frequency, 
RSRP based)
A3
RSRPneigh – RSRPserv > 
a3OffsetRsrpInterFreq + 
hysA3OffsetRsrpInterFreq
RSRPneigh – RSRPserv < 
a3OffsetRsrpInterFreq – 
hysA3OffsetRsrpInterFreq
Better cell handover 
(inter‐frequency, 
RSRQ based)
A3
RSRQneigh – RSRQserv > 
a3OffsetRsrqInterFreq + 
hysA3OffsetRsrqInterFreq
RSRQneigh – RSRQserv < 
a3OffsetRsrqInterFreq – 
hysA3OffsetRsrqInterFreq
Coverage handover 
(inter‐frequency
A5
RSRPserv + hysThreshold3InterFreq < 
threshold3InterFreq AND RSRPneigh – 
hysThreshold3InterFreq > 
threshold3aInterFreq
RSRPserv – hysThreshold3InterFreq > 
threshold3InterFreq OR RSRPneigh + 
hysThreshold3InterFreq < 
threshold3aInterFreq
Stop of measurements 
of inter‐frequency cells
A1
RSRPserv > threshold2a + 
hysThreshold2a
Note: Event‐A2—serving cell becomes worse than a threshold—can be triggered by different thresholds. Event‐A2 
can be used to trigger, for example, RRC connection release with redirection, for inter‐frequency measurements, or 
inter‐RAT measurements when UE encountering bad coverage can measure on several inter frequency and/or IRAT 
target frequencies. Mobility control at cell edge needs to define and prioritize the preferred frequencies for 
measurements and mobility actions and possibility to perform blind handover or release with redirect to that RAT at 
critical threshold. In LTE network design, there is a search zone introduced shown in Figure 8.7, at search threshold, 
start inter‐frequency and IRAT measurements.
Search threshold
A2 -> Search activity
Search zone
Search for other Freqs/RATs. If found, do HO or
RwR. Based on A3/A5 + B2 or Blind RwR/HO
Figure 8.7  Search zone.

Mobility Optimization
261
8.1.3.1  X2 Handover
Based on UE measurement and RRM information, the source eNB decides that a handover to the 
target eNB is necessary. The source eNB sends a handover request message over the X2 interface to 
the target eNB. The message contains necessary information to prepare the handover at the target 
side. The target eNB allocates resources for the target cell and the UE is allocated a new  
C‐RNTI for identification in the target cell. The target eNB sends a handover request acknowledge 
message to the source eNB, which in turn sends handover command over the air interface to the 
UE, including necessary information (e.g., the new C‐RNTI) so that the UE can perform the handover. 
From statistics in a live network, about 30% of drop calls was due to X2 is failure (Figure 8.10).
During the X2 handover procedure, the eNB performs (Figure 8.11):
●
●An X2AP handover preparation procedure
●
●An X2AP SN status transfer procedure if the PDCP SN status preservation applies for at least 
one of the (RLC‐AM) radio bearers handed over
●
●An RRC connection reconfiguration procedure for mobility within EUTRAN
●
●A X2 user‐plane data forwarding
●
●An X2AP UE context release procedure
●
●An S1AP path switch request procedure
●
●A UE context deletion in the source eNB (with associated resources)
The source eNB sends PDCP sequence number (SN) information to the target eNB in an SN 
status transfer message. This information is necessary to avoid missing or duplicating PDCP 
packets when the uplink and downlink user data paths are switched from the source eNB to the 
target eNB. Also, the source eNB now forwards the received downlink user data packets to the 
target eNB instead of sending them to the UE. The downlink user data packets are buffered in 
the target eNB until the handover is completed.
As soon as the handover command (RRC connection reconfiguration) message is received, 
the UE buffers the uplink user data until the handover has been completed, detaches from the 
source cell, and synchronizes with the target cell using the non‐contention based random 
access procedure. Next, the UE sends a handover confirmation (RRC connection reconfigura­
tion complete) message to the target eNB to indicate that the handover procedure is completed 
as far as the UE is concerned. Now the UE can start sending the buffered uplink user data and 
the target eNB can forward the downlink user data to the UE. The uplink user data is sent via 
the target eNB directly to the serving gateway, since the uplink tunnel endpoint identifier 
(TEID1) in the S‐GW was conveyed to the target eNB already.
The target eNB sends path switch message to MME to inform that the UE has changed cells, 
including its downlink tunnel endpoint identifier (TEID). MME forwards it to the S‐GW so 
that the S‐GW can send the downlink user data directly to the target eNB. Before the S‐GW 
can release any user plane resources toward the source eNB, it sends one or more “end marker” 
packets to the source eNB as an indication that the downlink data path has been switched. It 
should be noted that these packets do not contain any user data, and are transparently for-
warded by the source eNB to the target eNB to help it decide when the last forwarded packet 
was received. After receiving an acknowledgment message, the target eNB informs the source 
eNB about the success of the handover. As a final step, the source eNB releases all air interface 
and control plane resources associated with the UE context, and the handover is completed. 
Figure 8.12 is an example from eNB trace, which filter out the UE related message.
1  Different S1 bearers are identified by their tunnel endpoint identifier (TEID), which is allocated by the endpoints 
(eNB and S-GW) of the GTP tunnel.
www.ebook3000.com

Measurement
objects 
Reporting 
configurations
Measurement
identity
A carrier frequency
A list of neighboring cell offsets
IRAT neighboring cells (no neighbor list for intra-LTE mobility)
Reporting criteria: periodical or event-triggered
Reporting format: quantities (e.g. number of cells to report)
Reference 
number in 
measurement 
report
Quantity
configuration
e.g. RSRP or RSRQ
One quantity for intra freq, one for inter and one for each RAT type

Figure 8.8  Measurement configuration.
www.ebook3000.com

LTE Optimization Engineering Handbook
264
Handover procedure works as expected, data is forwarded over X2, path is switched to target 
cell and average user plane interruption time was about 200ms but varied between 100ms and 
500ms depending on the loading in the network.
The source eNB issues X2 handover request message to the target eNB by passing necessary 
info to prepare the handover and gets the X2 handover request acknowledge message back. The 
detail content in the two messages is listed in Figure 8.13.
UE
eNB
1. RRC Connection Reconfiguration
(Measurement Control)
2. Measurement Reports
L3 signalling
L1/L2 signalling
5. RRC Connection Reconfiguration
8. RRC Connection Reconfiguration
Complete
3. HO Decision
Packet data
User data
Packet data
UL allocation
Legend
DL allocation
THOoverall
6. Synchronisation
7. UL allocation + TA for UE
4. Admission Control and
Resource Allocation
Detach from old cell and
synchronise to new cell
9. Release
Resources
Handover Completion
Handover Execution
Handover Preparation
Figure 8.9  Intra‐eNB handover.

Mobility Optimization
265
UE
Target
eNB
MME
Serving
GW
Source
eNB
1. RRC Connection Reconfiguration
(Measurement Configuration)
7. RRC Connection Reconfiguration
13. Path Switch Request
17. Path Switch Request
Acknowledge
18. UE Context Release
14. User Plane Update Request
16. User Plane Update Response
2. Measurement Reports
4. Handover Request
6. Handover Request
Acknowledge
8. SN Status Transfer
L3 signalling
L1/L2 signalling
11. RRC Connection Reconfiguration Complete
12a. RRC Connection Reconfiguration (Measurement Configuration)
12b. RRC Connection Reconfiguration Complete
3. HO Decision
Packet data
Data Forwarding
End Marker
Packet data
Packet data
User data
Packet data
Packet data
End Marker
Data Forwarding
UL allocation
DL allocation
Legend
6. Synchronisation
10. UL allocation + TA for UE
5. Admission Control and
Resource Allocation
0. Area Restriction Provided
Detach from old cell
Deliver buffered and in
transit packets to target eNB
Buffer Packets from
Source eNB
15. Switch DL Path
Release S1, X2 signalling
and radio resources.
Continue forwarding packets
19. Release
Remaining Resources
Release Other
X2 Resources
Begin sending
S1-U data
Release X2
Signalling
Connection
Tx2ACLOCoverall
Tx2ACLOCpre
Tx2ACLOCarea
Tx2ACLOCarea/path/assignment
Tx2ACLOCcomp
TDATAtwdsd
TDATAtwdD2
Handover Completion
Handover Execution
Handover Preparation
Figure 8.10  X2 handover procedure.
Figure 8.11  X2AP handover preparation.
www.ebook3000.com

LTE Optimization Engineering Handbook
266
It is worth to pay attention to the X2 round‐trip delay, if it is large and the UE is moving at 
high speed, the UE could lose contact with the source eNB due to increasingly poor radio 
­conditions resulting in failure to send handover commands to the UE and possible call drop. 
Different propagation conditions cause handover performance to be more or less sensitive to 
Figure 8.12  X2 handover procedure from test tool.
X2 HO Request Message
HO Preparation Info
Serving cell configuration
-MIB/SIBs
UE radio configuration and capability
-existing radio bearers (SRBs/DRBs)
Target cell ID
Global MME indentity
UE security capabilites, Last visited cell lists, ...
……
ERAB ID, ERAB level QoS parameters,
X2 Handover Request Acknowledge
Admitted E-RAB list
eNB-UE-X2AP-ID
GTP TEID
Target eNB to Source eNB Transparent Container 
A new C-RNTI
Target eNB security algorithm identifiers
A dedicated RACH preamble (optional)
……
Figure 8.13  X2 handover request message and handover request acknowledge message.

Mobility Optimization
267
this delay. For the most delay‐sensitive applications, a one‐way delay over X2 of up to 50 to 
70 ms is probably not noticeable, for example, for VoIP.
8.1.3.2  S1 Handover
Source eNB decides to initiate S1‐based handover to target eNB based on UE measurement 
report when there is no X2 connectivity to the target eNB, or by an error indication from the 
target eNB after an unsuccessful X2‐based handover. The measurement procedures are per-
formed in the same way as for X2 handover. When S1 handover is executed, the source eNB 
initiates the handover preparation by sending the handover required massage to the serving 
MME. The source MME sends a forward relocation request to the target MME over the S10 
interface. During the S1 handover procedure, the eNB performs:
●
●An S1AP handover preparation procedure
●
●An S1AP SN status transfer procedure if the PDCP SN status preservation applies for at least 
one of the (RLC‐AM) radio bearers handed over
●
●An RRC connection reconfiguration procedure for mobility within EUTRAN
●
●A X2 user‐plane or S1 user‐plane data forwarding
●
●An S1AP handover notify procedure
●
●A UE context deletion in the source eNB
The eNB general procedure for inter‐eNB S1 handover is shown in Figure 8.14.
The target MME sends a handover request to the target eNB. The target eNB may admit or 
reject this request with its admission control function. If it admits the request, the handover 
request is acknowledged. Then the forward relocation is acknowledged with a response and 
now the source MME sends the handover command to the source eNB, which forwards it to the 
UE. Now the UE can perform the random access procedure in the target cell and the handover 
confirm is sent to the target eNB. Handover notify is sent to target MME in order to indicate to 
the target MME that the handover has succeeded. The context in the old eNB is released. From 
an end‐to‐end view, S1 handover can be used to achieve the following:
●
●S1 handover with MME and SGW relocation
●
●S1 handover with MME relocation (no SGW relocation)
●
●S1 handover with SGW relocation (no MME relocation)
●
●S1 handover without any EPC node relocation
8.1.3.3  Key point of X2/S1 Handover
Intra LTE handover phases can be divided into handover preparation phase, handover execu-
tion phase, and handover completion phase.
The handover preparation phase is the phase when the source RAN request the target RAN 
to prepare to accommodate the UE. The target RAN performs admission control and reserves 
cell resources required for the UE and prepares the UE access and sends the needed access 
information in a container sent transparent through the source RAN to the UE.
The handover execution phase starts with the source RAN command the UE to make a hand-
over. The source RAN performs packet forwarding to target RAN during the execution phase. 
The phase ends when the UE access the target RAN and confirm the new connection in the 
target cell.
In the handover completion phase the user data path to the SAE gateway is switched over to 
the target RAN. The handover complete phase starts with the target RAN notice the MME and 
SAE gateway that the handover has occurred. The MME/SAE gateway switches the bearer 
from source RAN to target RAN. Bearer between SAE gateway and the RAN is set up per eNB 
www.ebook3000.com

UE
Source 
eNB
Target 
eNB
Source
S-GW
Target
S-GW
1. RRC Connection Reconfiguration
(Measurement Conf)
2. RRC Measurement Report
(Event A3)
3. HO Decision
4. S1 Handover Required
(Source to target Transparent Container)
8. Admission 
Control
9. S1 Handover Request Acknowledge
13. RRC Connection Reconfiguration
Handover Commond
Regenerate 
Security Keys
14. MAC: Random Access Preamble
15. MAC: Random Access Response (UL Allocation+TA)
16. RRC Connection Reconfiguration Complete
(Handover Confirm)
17. S1 Handover Notify
18. Data Transfer in Target
20. S1 UE Context Release
(Cause: Successful Handover)
19. S10 Forward Relocation 
Complete/ACK
RRC Connected
RRC Connected
Source
MME
Target 
MME
5. S10 Forward Relocation Request
6. S11 Create Session Req/Res
7. S1 Handover Request
10. S10 Forward Relocation Response
11. S11 Create Bearer Req/Res
Up Forwarding
12. S1 Handover Commond
Figure 8.14  Inter eNB S1 handover with MME relocation.

Mobility Optimization
269
and not per cell. The target eNB informs the source eNB that the handover is complete. The 
source eNB finishes the packet forwarding (if used) and releases the UE resources. If the UE is 
moving to a cell in the same eNB then performs no switching of the bearers.
Handover preparation by source eNB and target eNB are shown in Figure 8.15.
Handover user plane interrupt time
UL or DL interrupt time can be calculated from the instant that UE receives handover com-
mand to disconnect user plane to the old cell to the instant that user plane is re‐established. 
Interrupt time is different depending on a) DL or UL b) DL data forward option. With data 
forwarding, DL interrupt time is packet delay time, without data forwarding, DL interrupt time 
is packet loss time. The example in Figure 8.16 showed that user plane S1 handover interrup-
tion time is 48 ms.
S1 handover failure analysis
The symptoms in Figure 8.17 will usually lead to unsuccessful S1 handover, which will bring 
in low throughput and higher call drop rate in a live network.
In Figure 8.17, MME does not reply to S1 handover request till tS1relocprep expired; in 
this case, we tried to prolong tS1relocprep, and will expect more core network rejection 
failures. S1 rejection with “unknown‐target ID,” it is suspected that the interworking 
between source MME and target was unsuccessful due to core network configuration fault 
or mapping fault. IF S1 rejection is with “ho‐failure‐in‐target‐EPC‐eNB‐or‐target‐system,” 
in this case the failure cause is quite clear: core network configuration needs to be checked 
to indicate the fault.
8.2  ­Mobility Parameter
When the UE is powered on, before RRC, it says that the UE is in idle mode. In order to save 
battery power, UEs enter in idle mode where they are connected to EPC only (not to eUTRAN), 
that is, context of UE is deleted from eNB and is maintained at MME and SGW only. eNB 
releases all dedicated resources when UE enters idle mode. In this mode, UE shall only wake up 
at fixed intervals of time to check whether it has any incoming notifications for data, also UE 
can wake up at any time when it has any data to send. This mode is called RRC_idle and state 
is called EMM_registered state. EMM‐registered has two substates: idle (ECM‐idle + RRC‐
idle), and connected (ECM‐connected + RRC‐connected). The two EPS mobility management 
(EMM) states including EMM‐deregistered and EMM‐registered state, which describe the 
mobility management states that result from the mobility management procedures, for 
­example, attach, detach, and tracking area update procedures. The two EPS connection 
­management (ECM) states including ECM‐idle and ECM‐connected state, which describes the 
signaling connectivity between the UE and the EPC.
Table 8.3 depicts RRC idle and RRC connected state. Idle mode mobility management is UE 
chooses a suitable cell to camp according to the system broadcast message sent by the eNB, in 
order to improve the success rate of UE access and quality of service. Connected mode mobility 
management is when UE moves in the connected state; the network offers the continuity of the 
service by handover for UE.
UE moves from idle to connected by sending an initial NAS message. The initial NAS 
­message in 3GPP Rel 8 can be attach request, detach request, tracking area update request, 
service request, or extended service request. When UE goes from RRC_connected to ­RRC_
idle, the bearers marked X are taken down that is shown in Figure 8.18.
www.ebook3000.com

Intra-RBS
Handover
Intra-RBS Handover
Receive X2 Handover
Request message
from Source RBS
X2 Handover
of Intra-RBS?
X2 Handover
of Intra-RBS?
License exceeded?
-number of connected users
Handover Allowed?
-UE Cap OK?
-Resources Avail?
Yes
Yes
Build RRC Reconfiguration Message
Place in Handover Command
RRC Message
Yes
Yes
No
No
No
Send S1 Handover Failure
to MME
Send X2 Handover Preparation Failure
to Source RBS
Send S1 Handover Request Ack
to MME
Send X2 Handover Request Ack
to Source RBS
No
Create Target-To-Source
eNB container
Receive S1 Handover
Request message
to MME
X2 Handover
X2 Handover
Get UE Information
Get Cell Information
Get Handover Preparation Information
-UE/Cell Information
Extract Source-To-
Target S1AP Container
Place UE/Cell Information in Handover
Preparation Information RRC Container
X2 Handover
of Intra-RBS?
Handover preparation by source eNB
Handover preparation by target eNB
X2 Handover
Send X2 Handover
Request message
Send S1 Handover
Required message
S1 Handover:
Place in Source To-Target Transparent
S1AP container with target cell details
Intra-RBS Handover
Intra-RBS
Handover
Place in X2 Handover Request Message
Place in S1 Handover Required Message
Yes
No
S1 Handover
S1 Handover
Intra-RBS Handover
Intra-RBS
Handover
Place in X2 Handove
Figure 8.15  Handover preparation.

Figure 8.16  User plane S1 handover interruption time.
tS1relocprep
expired 
unknown-target
ID
Figure 8.17  Example of S1 handover failure.
Table 8.3  RRC idle and RRC connected state.
UE
Network
RRC connected
›Listens to the PDCCH for its assign cell RNTI
›Knows the UE on a cell level
›Has E‐RABs established
›Has a UE context in core nodes and 
an eNB.
›May send/receive data on the shared channels
›Controls mobility based on UE 
measurement reports.
RRC idle
›Listens to the PD‐CCH for a paging RNTI
›Knows the UE to within a 
tracking area.
›Performs random access and connection 
establishment procedure when it is paged or needs 
to send/receive data.
›Has a UE context only in 
core nodes.
›Controls mobility based on system information
›Needs to page the UE to send/
receive data.
Note: An EPS bearer carries traffic between the UE and PGW using an enhanced radio access bearer (E‐RAB) 
between the UE and SGW. An E‐RAB uniquely identifies the concatenation of an S1 bearer and the corresponding 
data radio bearer. When an E‐RAB exists, there is a one‐to‐one mapping between this E‐RAB and an EPS bearer of 
the NAS. The E‐RAB is can be thought of a PDP context of previous 3GPP releases.
www.ebook3000.com

LTE Optimization Engineering Handbook
272
8.2.1  Attach and Dettach
UE needs to register with the network to receive services by the attach messages when a UE is 
first connecting to the network after being switched on. The UE enters the EMM‐registered 
state by a successful registration with an attach procedure. The RRC connection is established, 
with the NAS message attach request, transferred to the network as part of the procedure. The 
attach request message is provided to the MME in the “initial UE message.” The UE is identi-
fied either by the GUTI or the IMSI (in the attach request message). After registration, a con-
text is established for the UE in the MME, and a default bearer is established between the UE 
and the PDN GW, thus enabling always‐on IP connectivity to the UE.
The HSS provides the subscribed QoS (APN‐AMBR, default EPS bearer QCI) for the default 
APN to the MME. The MME selects and derives the addresses of the SGW and PGW and 
­creates the default EPS bearer in the SGW by sending the message create session request. The 
MME provides the IMSI, APN name, subscribed QoS, PDN GW S5/S8 address, and the PDN 
type to the SGW.
The default EPS bearer is established using the initial radio bearer establishment procedure. 
The TEID and the IP address for the UL of the user plane received from the SGW are used. The 
NAS message attach accept including activate default EPS bearer context request is transferred 
to the UE during the default radio bearer establishment. If the UE was identified by the GUTI 
in the attach request message the MME will re‐allocate the GUTI, that is, the new GUTI will 
be provided in the attach accept message.
Finally, the NAS message “attach complete” (including the session management message 
activate default EPS bearer context accept) is transferred from the UE (Figure 8.19). The MME 
updates the SGW with the TEID and IP address for the DL of the user plane, received from the 
eNB by sending the message modify bearer request.
There are four tunnels that are set up when a UE attaches to the network, two S1 tunnels, one 
S5 tunnel and one S11 tunnel. If a user has dedicated bearers each bearer will be a GTP tunnel. 
First the S11 and S5 tunnel (S5, S1, and S11 tunnels are GTPv2 tunnels) is set up, next is the S1 
tunnel from the SGW to the eNB, and finally the S1 tunnel from the UE to the eNB. There is a 
tunnel setup between the PGW and the PDN, this tunnel is a GTPv1 tunnel. GTPv1 is unse-
cure and the data in the tunnel can be seen using a protocol analyzer. Data within a GTPv2 
tunnel is secure and cannot be seen.
Detach is the process of turning a UE off and disconnecting from the network, which is used 
to remove bearers and clear states in the network. The network or the UE explicitly requests 
detach and signal with each other. There are three types of detach: UE‐iInitiated detach proce-
dure, MME‐initiated detach procedure, and HSS‐initiated detach procedure, which is shown 
in Figure 8.20.
RRC Connection
S1 Connection
S11 Tunnel
S5 Tunnel
NAS Signaling Connection
Signaling Radio Bearer (SRB)
Data Radio Bearer (DRB)
EPS Bearer
S1 Bearer
S5 Bearer
E-UTRAN Radio Access Bearer (E-RAB)
Figure 8.18  The bearers changed as RRC_connected to RRC_idle.

Mobility Optimization
273
The detach procedure allows the UE to inform the network that it does not want to access the 
EPS any longer or the network to inform the UE that it does not have access to the EPS any 
longer.
The UE sends the NAS message “detach request” to the MME, using the UL NAS signaling 
transfer procedure. If the reason for the detach was not “power off,” the MME sends the NAS 
message “detach accept” to the UE, and releases the EPS bearers in the SGW by sending the 
message delete session request. The S5/S8 bearer is released using the S5/S8 bearer release 
procedure.
8.2.2  UE Measurement Criterion in Idle Mode and Cell Selection
When the UE is switched on, it performs the PLMN and cell selection procedure, which 
involves sweeping UE supported frequency bands, and searching the carrier frequencies with 
highest power for cells in a non‐forbidden PLMN. The selection of PLMN can be automatic or 
manual, and pre‐stored frequency and RAT information can be used to accelerate the 
procedure.
The cell selection criteria is defined in 3GPP standards 36.3042 UE procedures in idle mode 
to determine which LTE cell to camp on. It is based on the measured reference signal received 
power (RSRP) level in the cell. Cell selection parameter is shown in Table 8.4. The cell selection 
criterion is fulfilled if:
	
Srxlev
Srxlev
Q
Q
Q
P
rxlevmeas
rxlevmin
rxlevminoffset
co
0,
mpensation	
2  The cell camping criteria in Rel 9 is based on both level and quality while cell reselection to a cell with different 
absolute priority is based on either level or quality.
S11: Create bearer request
S6a: Update Location request
S5: Create bearer request
S11: Create bearer response
S1AP: Initial Context setup request
S1AP: Initial Context setup response
S1AP: Uplink NAS Transport
S5: Create bearer response
S6a: Updated Location answer
The HSS accesses the
database and responds
with user information 
to the MME
Default bearer 
establishment
This message from
the MME is a three
in one message
UE
RRC: RRC Connection setup complete
RRC: RRCConnectionReconfiguration
RRC: RRC ConReconfigComplete
RRC: UL information Transfer
NAS: Attach Request
NAS: PDN connectivity request
NAS: Attach accept
NAS: Activate Default EPS bearer request
NAS: Attach accept
NAS: Activate Default EPS bearer request
NAS: Attach complete
NAS: Activate Default EPS bearer accept
NAS: Attach complete
NAS: Activate Default EPS bearer accept
NAS: Attach Request
NAS: PDN connectivity request
S1AP: Initial UE message
eNB
MME
SGW
PGW
HSS
the first message sent to
the MME to
establish a connection
Authentication and NAS security procedure
S6A (MME to HSS)
diameter signalling
Figure 8.19  Attach procedure with initial EPS bearer establishment (3GPP TS23.401).
www.ebook3000.com

UE
eNodeB
MME
PCRF
PDN GW
Serving GW
1. Uplink NAS Signalling Transfer
 NAS Message =“Detach Request”
2. Downlink NAS Signalling Transfer
 NAS Message =“Detach Accept”
6. MME-initiated Connection Release
4. S5/S8 PDN Connectivity Release
UE
eNodeB
MME
PCRF
PDN GW
Serving GW
1. Downlink NAS Signalling Transfer
 NAS Message =“Detach Request”
5. Uplink NAS Signalling Transfer
 NAS Message =“Detach Accept”
6. MME-initiated Connection Release
3. S5/S8 PDN Connectivity Release
UE
eNodeB
MME
HSS
PCRF
PDN GW
Serving GW
2. Cancel-Location-Answer
3. MME-initiated Detach from ECM-CONNECTED state
2. Delete Session Request
4. Delete Session Response
5. Delete Session Response
3. Delete Session Request
1. Cancel-Location-Request
 IMSI,
Cancellation Type =SUBSCRIPTION_WITHDRAWAL
Figure 8.20  UE‐initiated, MME‐initiated and HSS‐initiated detach from ECM‐connected state.

Mobility Optimization
275
Qrxlevmin configures the cell minimum required RSRP level used by the UE in cell reselec-
tion as shown in Figure 8.21.
Once the cell selection is accomplished, UE dominated reselection is about to happen, the 
following rules are used by the UE:
●
●Intra‐frequency criterion: If Srxlev ≤ sIntraSearch, the UE performs intra‐frequency meas-
urements, if Srxlev > sIntraSearch, the UE does not perform these measurements (Figure 8.22)
●
●Inter‐frequency and/or inter‐RAT criterion: If Srxlev ≤ SNonIntraSearch, the UE performs 
inter ‐frequency and/or inter‐RAT measurements, if Srxlev > SNonIntraSearch, the UE does 
not perform these measurements
●
●sIntraSearch: Specifies the threshold (RSRP) for intra‐frequency measurements, i.e. how bad 
must the serving cell before the UE starts to measure on neighboring cells
Figure 8.23 gives a 4G measurements example. Measurement starts when Srxlev < sIntraSe­
arch. sIntraSearch can be set to 62 to allow smooth intra‐LTE cell reselection. When RSRP < −68: 
start to measure intra‐frequency neighbors. When RSRP < −114: start to measure on inter‐­
frequency LTE and 3G.
Table 8.4  Cell selection parameter.
function
Srxlev
Cell selection RX level value calculated by the UE (dB)
Qrxlevmeas
Measured cell RX level value (RSRP)
Qrxlevmin
Indicates the minimum required receive level used in intra‐frequency E‐UTRA cell 
reselection, which contains information relevant when evaluating if a UE is allowed to 
access a cell and defines the scheduling of other system information, default: −128dBm
Qrxlevminoffset
This parameter defines an offset to be applied in cell selection criteria by the UE when 
it is engaged in a periodic search for a higher‐priority PLMN. (dB). Increasing the value 
of this parameter would determine an earlier reselection of the target neighboring cell. 
Decreasing the value would determine a later reselection of the target neighboring cell. 
If you do not use inter‐PLMN mobility, this parameter is inhibited.
Pcompensation
Pcompensation is a compensation factor to penalize the low power mobiles. 
Max(PMax – UE Maximum Output Power, 0) (dB)
PMax
Indicates the maximum TX power of the UE in the cell. If this parameter is not 
included in the SIB3, the UE uses the maximum TX power
Intra Freq
Target Cell
WCDMA
Target Cell
GERAN
Target Cell
CDMA
Target Cell
Inter Freq
Target Cell
CellReselectionConfLte::
qrxlevmin in SIB5
CellReselectionConfLte::
qrxlevmin in SIB3
CellSelectionReselectionConf::
qrxlevmin in SIB1
CellReselectionConfUtraFdd or Tdd::
qrxlevmin in SIB6
CellReselectionConfGERAN::
qrxlevmin in SIB7
Snonservingcell = –FLOOR (–20 x
log10Ec/Io) in SIB8 (No qrxlevmin)
SourceCell
Figure 8.21  Qrxlevmin configuration.
www.ebook3000.com

LTE Optimization Engineering Handbook
276
To minimize the impact on UE battery performance, it is possible to set the threshold above 
which UE may not measure intra‐frequency neighbor cells. When the UE triggers a cell reselection 
evaluation process, it ranks cells that fulfill the cell selection criteria. The UE ranks the cells 
according to the R criteria.
8.2.3  Cell Priority
In the LTE system, cell reselection from LTE to other LTE frequencies or to the other RATs is 
based on absolute priorities provided to UEs in the system information (SI). The priority of a 
given neighbor relation is set by its cellReselectionPriority. All priority settings range from 0 to 
7 with 7 being the highest priority. Different priority for different IF/RATs, which can be found 
in SIB (SIB8 →CDMA‐eHRPD, SIB7 →GSM, SIB6 →WCDMA, SIB5 → inter frequency, 
SIB3 → for serving cell). UE will periodically search for higher‐priority layer, search for lower 
priority if below a threshold (Figure 8.24).
UE must perform measurements of layers with a priority higher than the priority of the 
­current serving cell regardless of serving cell signal level. Some priority configurations of idle 
mode, connected mode and CS fallback are shown in Table 8.5 and Table 8.6.
8.3  ­Intra‐LTE Cell Reselection
When the UE is in idle mode, it uses reselection for its mobility. In idle mode mobility it is 
largely controlled by the UE (based on broadcast parameters) and so the exact behavior may 
vary somewhat between UE models. UE takes the measurements of the power of signals both 
for serving and neighbor cells in order to camp on better cell with high priority or with better 
power signal. The eNB broadcasts idle mode information that assists and controls the UE to 
Candidate Layer Priority relative to Serving Cell Priority
Lower
Sservingcell >
Snonintrasearch
Measurements
not mandatory
Measurements
not mandatory
Measurements
mandatory
Measurements
mandatory
Measurements
not mandatory
Measurements mandatory
Measurements mandatory
Measurements
mandatory
Sservingcell >
Snonintrasearch
Sservingcell ≤
Snonintrasearch
Sservingcell ≤
Snonintrasearch
Inter-Frequency
Candidate
Layer
Snonintrasearch
is broadcast
Snonintrasearch
is not broadcast
Snonintrasearch
is not broadcast
Snonintrasearch
is broadcast
Inter-RAT
Candidate
Layer
Equal
Higher
Measurements
mandatory
Not Applicable
Figure 8.22  4G measurements.
sIntraSearch =62
RSRP
–68
–114
–130
–140
sNonIntrSearch = 16
qrxLevMin= –130 dBm
Figure 8.23  4G measurements example.

Mobility Optimization
277
Layer 7 with priority = 7 (=highest)
Layer 6 with priority = 6
Periodic
Search
S crit.<
Thresh.
Start’s
Search
Layer 5 and lower (0 is lowest)
priority
7
6
5
f1
f2
UE always tries to reselect on the highest
possible priority layer!
f3
frequency
Figure 8.24  Cell priority.
Table 8.5  Idle mode and Connected mode.
Idle mode
MO
Parameter
Value
EUtranFreqRelation (1825/19825)
cellReselectionPriority
7
UtranFreqRelation (UARFCN = 10638)
cellReselectionPriority
5
UtranFreqRelation (UARFCN = 10662)
cellReselectionPriority
4
GeranFreqGroupRelation (GSM_900)
cellReselectionPriority
1
GeranFreqGroupRelation (GSM_1800)
cellReselectionPriority
0
Connected mode
MO
Parameter
Value
UtranFreqRelation (UARFCN = 10638)
connectedModeMobilityPrio
5
UtranFreqRelation (UARFCN = 10662)
connectedModeMobilityPrio
4
GeranFreqGroupRelation (GSM_900)
connectedModeMobilityPrio
1
GeranFreqGroupRelation (GSM_1800)
connectedModeMobilityPrio
0
www.ebook3000.com

LTE Optimization Engineering Handbook
278
select PLMN and best suitable LTE cell according to LTE inter‐carrier priority information and 
IRAT priority information.
8.3.1  Cell Reselection Procedure
The cell reselection process is run when the UE, in “camped normally” state, has found a better 
neighboring cell than the cell on which it is camping. During cell reselection procedure the UE 
is not continuously measuring neighbor cells in search of a better cell to camp on but only 
­performs these measurements when the (S) criteria below is met:
	
S
Sintrasearch where S
Q
q
q
rxlev
rxlev
rxlevmeas
rxLevMin
rxL
,
evMinOffset
compensation
compensation
maxServingCell
P
P
max p
P;0
	
Pcompensation factor, which considers the UE power (23dBm) and the maximum allowed power 
in the cell (PmaxServingCell). This is done in order to prohibit low power UEs to select large cells.
In the example: sintrasearch = 62, qrxLevMin = 130 dBm, The UE starts measuring for a 
better cell when QrxlevMeas is worse than (62−130) = −68dBm.
If the UE moves, a new cell might become better than the currently selected cell. In LTE there 
is a threshold below which the neighbor cell measurements for cell reselection can be triggered. 
Once the measurements for neighbor cells have been triggered the UE ranks the measured cells 
which fulfill the S‐criterion according to the R‐criterion: intra‐LTE cell reselection occurs when 
neighbor cell becomes better than source cell (Rn > Rs) within a time interval 
(TreselectionEUTRA), as shown in Figure 8.25.
	
R s
Q
Q
R n
Q
Q
meas s
hyst
meas n
offset
_
;
_
,
,
	
where Qoffset is:
qOffsetCellEUtran: Cell individual offset in the intra‐frequency and equal priority inter‐frequency 
cell ranking criteria.
qOffsetFreq: Frequency specific offset in the equal priority inter‐frequency cell ranking criteria.
Different cell reselection parameters settings will lead to different network performance. If 
sintrasearch sets to low, this means neighbor reselections are happening very late and can 
result in paging/RACH/RRC setup failures. This has been proposed that it should to be changed 
to 62, which means neighbors for reselection are always monitored. A drawback for this can be 
increased battery consumption for UEs. Figure 8.26 presents three sets of parameters configura-
tion and their performance. The recommended setting can reduce the number of reselections 
with only moderate decrease in RF performance.
In LTE, it is possible to use different settings for the cell reselection parameters tReselectionEutra 
and qHyst based on the estimated speed of the UE. The UE estimates its speed as the number 
of cell reselections per evaluation period. The speed is divided into normal, medium, and high 
Table 8.6  CS fallback.
MO
Parameter
Value
GeranFreqGroupRelation (GSM_900)
csFallbackPrio
6
GeranFreqGroupRelation (GSM_1800)
csFallbackPrio
4
UtranFreqRelation (UARFCN = 10638)
csFallbackPrio
1
UtranFreqRelation (UARFCN = 10662)
csFallbackPrio
0

Mobility Optimization
279
speed. At higher speeds, the tReselectionEutra timer and the qHyst values can be adjusted to 
trigger the cell reselection quicker and vice versa.
8.3.2  Inter‐Frequency Cell Reselection
LTE cell reselection uses priority‐based levels. Parameter sNonIntraSearch decides when UE 
starts searching and measuring all priority cells. Priority based cell reselection is configured so 
that LTE frequencies have either higher or lower priority than 2/3G serving cell priority. 
60
S (dB)
Time (sec)
50
40
30
20
10
0
–10
–20
1
2
... measurement on any
neighbor will start when
Cell B selected after
 Rn > Rs satisfied for
TReselectionEUTRAN
SservingCell < Sintresearch
3 4
5
6
7
8
9
Cell B
Signal quality on neighbor Cell B gets
better than on serving Cell A but ...
Rs= Qmeas,s + QHyst
Rn= Qmeas,n – Qoffset
Cell A
Parameter values considered:
• TReselectionEUTRAN: 3 seconds
• Qrxlevmin= –110 dBm
• QHyst, Qoffset, Pcomp assumed 0
• Rs= Qrxlev,s; Rn = Qrxlev,n
10 11 12 13 14 15 16
Sintrasearch
Srxlev,s (Cell A)
Srxlev,n (Cell B)
Figure 8.25  Intra‐frequency cell reselection.
Parameter/Metric
Qrxlevmin
Sintrasearch
QHyst
TreselectionEUTRAN
DRX Cycle
Qoffsets,n
Simulated
Setting 1
–120 dBm
62 dB
62 dB
4 dB
0
2 sec
1.28 s
42
0%
–96.84 dBm
–8.9 dB
0%
0%
Number of reselections
Percentage of time OOS
Average RSRP (Camped Cell)
Average RSRQ (Camped Cell)
1.28 s
1.28 s
0
0
8 dB
2 dB
96
–96.74 dBm
–97.82 dBm
–9.7 dBm
–8.8 dB
24
1 sec
4 sec
62 dB
–120 dBm
–120 dBm
Original
Simulated Setting 2
Recommended
Simulated Setting 3
Figure 8.26  Different cell reselection parameters settings.
www.ebook3000.com

LTE Optimization Engineering Handbook
280
In  normal case, LTE frequency is configured to have higher priority, to help push capable UEs 
toward LTE. Cell reselection priority is the main criteria that determines UEs will camp on 
which layer. UE will perform call establishment on the layer it is camped on. Idle mode load 
distribution between layers helps reduce the need for the connected mode load balancing. Load‐
based adaptation of cell reselection thresholds can push cell‐edge UEs down to lower‐priority layer.
Inter‐frequency cell reselection measurement trigger depends on the absolute priorities of 
the serving and non‐serving layers. For each neighboring frequency/layer, it is necessary to 
define the corresponding priority. UEs close to cell center will camp on high priority although 
RSRP is higher on the other frequency, UEs close to cell edge will camp according to priority. 
The idle mode distribution is possible to be adjusted with the thresholds.
Inter‐frequency and inter‐RAT cell reselection are decided by higher‐priority cell reselection 
threshold ThreshXHigh and lower‐priority cell reselection threshold ThreshXLow.
ThreshXLow: Threshold for the Srxlev value of the target cell for cell reselection toward a 
lower‐priority inter‐frequency or inter‐RAT frequency. UE will perform cell reselection 
toward a lower‐priority inter‐RAT when the Srxlev value of the serving cell is below thresh-
ServingLow and the Srxlev value of the target cell is above threshXLow for period of time.
ThreshXHigh: Threshold for the Srxlev value of the target cell for cell reselection toward a 
higher‐priority inter‐frequency or inter‐RAT frequency.
The larger of the two values, it is more difficult to select to the corresponding cell. Table 8.7 
is for reference.
Priority based inter‐frequency/inter‐RAT cell reselection:
1)	 Low priority to high priority transition is shown in Figure 8.27: Periodic search for higher‐
priority layer
	
Qrxlevmeas
qRxLevMinInterF
interFrqThrH
neighbour
	
2)	 High‐priority to low‐priority transition is shown in Figure 8.28: Search for a lower priority 
if the UE received level is below a threshold
Qrxlevmeass
qRxLevMinIntraF
thresholdSrvLow
qRxLevMinOffsett
P compensation
AND
Qrxlevmeas
qRxLevMinInterF
interFreqT
n
_
hrL
P compensation
_
	
Table 8.7  ThreshXHigh and ThreshXLow.
Parameter
Recommend
GERANNFREQGROUP
ThreshXHigh
−11dBm
ThreshXLow
−11dBm
CDMA2000HRPDBANDCLASS
ThreshXHigh
−18dBm
ThreshXLow
−18dBm
UTRANFDDNFREQ
ThreshXHigh
0dB
ThreshXLow
0dB
UTRANTDDNFREQ
ThreshXHigh
0dB
ThreshXLow
0dB
E‐UTRANINTERNFREQ
ThreshXHigh
0dB
ThreshXLow
0dB

Mobility Optimization
281
A: Start to measure inter‐frequency (RAT) target cell (Srxlev ≤ SNonIntraSearch)
B: Srxlev ≤ Threshservinglow, can now attempt to connect to lower‐priority cell
C: The lower‐priority target cell Srxlev > ThreshXLow is met, tReselectionEutra/Utra timer starts
D: The lower‐priority target cell has been above threshold for tReselectionEutra/Utra, the 
UE will reselect to lower cell.
3)	 Equal priority cell transition is shown in Figure 8.29.
Srxlev
Cell Re-selection to Freq-A
PRIO = 2
Search for higher prioritized
layers at reguler intervals
LTE Freq-A PRIO= 2 (highest)
LTE Freq-B Serving cell PRIO= 1
Low prio
Threshx,high
Treselection
PRIO=1
Figure 8.27  Low‐priority to high‐priority transition.
Srxlev
Cell Re-selection to Freq-A
Lower Priority Cell
Higher Priority Cell
Srxlev=Measured RSRP + Qrxlevmin
Srxlev > 0 is a must for suitable cell
Search for lower/same
priority layers starts
LTE Freq-A PRIO= 1 (lowest)
LTE Freq-B Serving cell PRIO=2
Higher Priority Cell
Srxlev
A
B
C
D
tReselectionEutra/Utra
(QrRxlevmin + 
sNonIntra Search)
Threshx,low
Threshserving,low
Lower Priority Cell
Low prio
Threshx,low
Threshserving,low
Treselection
Figure 8.28  High‐priority to low‐priority transition.
www.ebook3000.com

LTE Optimization Engineering Handbook
282
8.3.3  Cell Reselection Parameters
The Qhyst is a hysteresis value of the serving cell used by the UE for ranking criteria in cell 
reselection, preventing too frequent reselection back and forth between cells of nearly equal 
rank. When a neighboring cell is ranked as better than the serving cell (that is, Rn > Rs) during 
a time interval tReselectionEutra (default value is 2s), the UE performs a cell reselection to the 
better‐ranked cell. It is worth to note that Qhyst should theoretically be set to a value at least 
equal to the handover hysteresis as cell reselection in idle mode is not as important as handover 
in connected mode.
Qoffset is an offset in the cell ranking criterion of neighbor LTE cells, pertains to system 
information block 4 (SIB4) or neighbor cell in measurement configuration in RRC connected 
mode. It consists of a cell individual part and a frequency specific part. The frequency specific 
part applies to equal priority inter‐frequency cells only. If cell re‐selection is between the same 
priority, then,
	
For intra
freq,
For inte
Rank
RSRP
qOffsetCell
neighbor
neighbor
r
freq,Rank
RSRP
qOffCell
qOffFrq
neighbor
neighbor
	
Increasing the value of Qoffset would determine a later reselection of the target neighboring 
cell (larger target cell list). Decreasing the value of Qoffset would determine an earlier reselec-
tion of the target neighboring cell (smaller target cell list) (Figure 8.30).
One example of cell re‐selection to the same priority LTE cell between Micro and Macro 
(applicable if Micro is deployed with the same priority as Macro cell) in a live network, the re‐selection 
parameters can be set as:
F1/F1: If there is a need to promote Micro, one must tune qHyst (direction Micro ‐ > Macro) or 
qOffsetCell (Macro ‐ > Micro).
F1/F2: If there is a need to promote Micro, one must tune qHyst (direction Micro ‐ > Macro) or 
qOffFrq (Macro ‐ > Micro). qOffsetCell could be used to further differentiation between cells 
within Micro layer.
The recommended re‐selection parameters are shown in Table 8.8.
Start to measure 
inter-frequency 
target cell (Srxlev≤ 
SNonIntraSearch) 
Srxlev
A
B
C
Serving Cell
Target Cell
(QrRxlevmin + 
sNonIntraSearch)
tReslectionEutra
QHyst
Target cell is above 
QHyst for time 
tReselectionEutra, 
UE will reselect to 
target cell. 
Target cell is 
stronger than 
serving cell 
by QHyst. 
Figure 8.29  Equal priority transition.

Mobility Optimization
283
8.3.4  Inter‐Frequency Reselection Optimization
Idle mode inter‐frequency reselection from lower‐ to higher‐priority cell and from higher‐ to 
lower‐priority cell procedure are shown in Figure 8.31.
Parameter sNonIntraSearch dictates when UE starts searching and measuring all priority 
cells. Higher‐priority carriers and RATs are searched even if UE is in good RF condition, lower 
RSRP
qHyst(s)
sIntraSearch
sNonIntraSearch
Qmeas(n)
Qmeas(s)
time
tReselectionEutra
R(n)
R(s)
qoffset(s)
UE performs cell reselection 
autonomously based on 
measurements
SI: cell reselection parameters
RS: UE measures RSRP
RS: UE measures RSRP
Neighboring 
cell
Serving cell
Rs= QmeasS+ QHyst 
Rn= QmeasN– Qoffset
Cell reselection?
tReselectionEutra
Rn > Rs?
Figure 8.30  Cell reselection parameters.
Table 8.8  Re‐selection parameters.
Parameter
Description
Recommend
q‐Hyst
This parameter configures the hysteresis value of the serving cell used by 
the UE for ranking criteria in cell reselection
2dB ~4 dB
Treselection
This parameter specifies the value of the cell reselection UE timer in the 
cell on the indicated EUTRAN frequency
1s ~2s
qOffsetCell
cell‐specific offset for reselection ‐ > to differentiate between particular 
cells within intra‐freq layer
0
qOffFrq
frequency‐specific offset for reselection ‐ > to differentiate between 
frequency layers
0
www.ebook3000.com

UE camp on serving cell
Measurement
performed by UE
StargetCell
>threshXHigh?
Measurement
performed by UE
Y
Y
Y
Y
Y
Y
N
N
N
N
N
N
Exist inter-freq
neighbor with higher
reselection priority?
Reselection priority of
Inter-fre neighor is
lower than serving
fre?
t-reselectionEUTRA
expires->cell reselection to
target cell
SrxLev< threshServingL
ow & Stargetcell
> threshXLow?
Fulfill S criteria
& Rn >Rs?
SystemInfo
SrxLev>SnonIntraSearch?
Figure 8.31  Idle mode inter‐frequency reselection strategy.

Mobility Optimization
285
thresholds are set in a high‐priority carrier to keep the UEs in the carrier, higher thresholds are 
set in a lower‐priority LTE carrier to encourage the UE to re‐select higher‐priority carriers or 
another RAT.
For reselection from higher priority toward lower‐priority inter‐frequency/IRAT cell, it 
should reduce ping‐pong by appropriately setting tReselectionRAT (in SIB5 or 6), threshServ­
ingLow (in SIB3), and threshXLow (in SIB5 or 6). For reselection from lower priority toward 
higher‐priority inter‐frequency/IRAT cell, it should reduce ping‐pong by appropriately setting 
tReselectionRAT (in SIB5 or 6) and threshXHigh (in SIB5).
An example of the parameters from SIB 3 and 5 messages are shown in Figure 8.32: intra‐frequency 
(1900–1900) and inter‐frequency (1900–700), and intra‐frequency (700–700) and inter‐
frequency (700–1900).
Key idle mode parameter settings for 1900 and 700 MHz band cells can be referred to Table 8.9.
As shown in Table 8.9, a UE reselects from a B2 cell to a B17 cell if the serving B2 cell RSRP 
is < −100 dBm AND the neighbor B17 cell RSRP is > −120 dBm. A UE reselects from a B17 cell 
to a B2 cell if the neighbor B2 cell RSRP is > −96 dBm.
8.4  ­Intra‐LTE Handover Optimization
Intra‐LTE handover feature manages the UE in connected mode and allows for seamless mobility 
from one LTE cell to another. In contrast to idle mode, connected mode mobility is entirely man-
aged by the LTE RAN based on configured and received measurement reports from the UE. Only 
hard handover is supported in LTE. Good handover performance will ensure the UE throughput 
and experience. By modifying the handover parameters can avoid or reduce the too early, too late 
and ping‐pong handovers, so as to improve the system performance. In a live network, either event 
(A3, A4, or A5) can be used in the LTE system with the intra and inter‐frequency handover decision.
8.4.1  A3 and A5 Handover
Event A3 means neighbor becomes offset better than serving cell, event A3 is used for ­connected 
mode handover. The formular for Event A3 triggered is shown below:
	
RSRP at serving cell
a Offset
RSRP at neighbour cell
3
	
The formular for Event A5 triggered is shown below:
	
RSRP at serving cell a Threshold AND RSRP at target a Threshold
5
1
5
2	
Offset, hysteresis, and timetotrigger values play major role in Intra handover. So if it consid-
ers offseta3 = 3dB, hysteresisa3 = 1dB, and timetotriggera3 = 640msec then it could say that 
neighboring sector has to be 4dB higher than serving cell for 640msec to make the UE to gener-
ate event a3 (Figure 8.33).
The formular of event A3 entering condition: Mn
Ofn
Ocn
Hys
Ms
Ofs
Ocs
Off
The formular of event A5 entering condition: 
Ms
hysteresis
thresholdEutraRsrp and Mn
offsetFreq
hysteresis
threshold EutraRsrp
2
●
●Mn = measurement result of the neighboring cell [dBm]
●
●Ofn = MeasObjectEUTRA::offsetFreq, Ofn is the frequency specific offset of the frequency 
of the neighbor cell [dB]
●
●Ocn = cellIndividualOffset for neighboring cell [dB], can be used to fine tune the handover 
hysteresis on a cell‐to‐cell basis, which make the handover from cell1 to cell2 more difficult 
by decreasing the cellIndividualOffset of the cell2
www.ebook3000.com

Figure 8.32  SIB 3 and 5 messages.

Mobility Optimization
287
●
●Hys = reportConfigEUTRA::hysteresis [dB]
●
●Ms = measurement result of the serving cell [dBm]
●
●Ofs = MeasObjectEUTRA::offsetFreq, Ofs is the frequency specific offset of the serving 
­frequency [dB]
●
●Ocs = cellIndividualOffset for serving cell [dB]
●
●Off = eventA3Offset, Off is the offset parameter for this event [dB]
Ocn, Ofn, Ocs and Ofs brings means for optimization of intra‐LTE handovers and/or realization 
of particular mobility management strategy. It introduces cell‐ and frequency‐specific ­offsets, 
which allow for differentiation of handover trigger criteria toward particular frequency layer 
and/or particular neighbor cells. These mobility offsets can be applied to intra‐ and inter‐frequency 
A3 and A5 events. Especially, the cellIndOffNeigh parameter may be of special interest in case 
macro and micro layers run with the same frequency carrier, while offsetFreqInter and 
offsetFreqIntra may be useful for micro‐macro inter‐frequency scenario.
A3 event entry condition (intra‐frequency)
	
RSRP
cellIndOffNeigh
RSRP
cellIndOffServ
a Offset
neigh
serv
3
hysA Offset
3
	
A3 event entry condition (inter‐frequency)
RSRP
cellIndOffNeigh
offsetFreqInter
RSRP
cellInd
neigh
serv
OffServ
offsetFreqIntra
a OffsetRsrpInterFreq
hysA Offset
3
3
RsrpInterFreq
	
Table 8.9  Idle mode parameter settings for high‐priority cell and low‐priority cell.
LTE Cell Selection & Reselection Parameters
B2(1.9GHz)
B17(700MHz)
cellReselectionPriority
5
4
qRxLevMin
−106
−124
sNonintraSearch
6
4
threshServingLow
6
4
threshXHigh(B2 Neighbor)
‐
10
threshXLow(B17 Neighbor)
4
‐
threshXLow(UMTS)
30
30
threshXHigh(Femto)
14
14
RSRP
RSRP
a3offset
Serving Cell RSRP
a5threshold2
a5Threshold1
time
a5TimeToTrigger a5Report Interval
a3TimeToTrigger a3ReportInterval
Meas. Report
Meas. Report
time
Meas. Report
Meas. Report
Equal power borders
RSRP Neighbour Cell
Serving Cell RSRP
RSRP Neighbour Cell
Figure 8.33  Better cell handover concept for A3 and A5.
www.ebook3000.com

LTE Optimization Engineering Handbook
288
For handover procedure, two types of RRC connection reconfiguration message need to be 
investigated as shown in Figure 8.34. The first RRC connection reconfiguration message is sent 
by source RBS to UE indicating all information for target cell like RACH parameters, root 
sequence, reference power, PUSCH/PUCCH nominal values, CQI reporting interval, and 
handover type. If target cell doesn’t have resources, it won’t see this message and handover 
preparation failure is observed. The second RRC connection reconfiguration message after 
3. Resource available confirmation along with target cell specific 
information that UE may need to Sync
10. All bearers are released
now after successful transition
to target eNB
9. Path Switch Request Acknowledge
8. Path Switch Request
1. A3 Measurement Report
5. UE trying to Sync to Target eNB
through RACH process- CBRA
6. UE gets synced with Target eNB
7. RRCConnectionReconfiguration Complete
4. RRCConnectionReconfiguration
(Forwarding target cell infromation to UE)
MME
SGW
EPC
Source eNB
Target eNB
Figure 8.34  Two types of RRC connection reconfiguration message.

Mobility Optimization
289
handover is sent by target (new serving) cell to UE indicating all information for itself like 
­carrier frequency, A3/A2 thresholds and Smeasure parameter values.
Normally, there are three ways of optimizing handovers in LTE, via the modification of the 
parameters a3offset and hysteresisa3, by changing the parameter timetotriggereventa3 and via 
the modification of the parameter filtercoefficient for event a3. The configuration of A3 should 
be different in different areas, considering the factor of overlapping, distance of sites etc. For 
A3 parameters setting shown in Table  8.10, it is recommended to follow the optimization 
rules below.
●
●a3offset should always be larger than hysteresisa3 if you want UE to handover to cells with an 
RSRP at least equal to the RSRP value of its serving cell, and ensuring a3offset > hysteresisa3 
avoids ping‐pongs.
●
●The higher the value of a3offset + hysteresisa3 the more difficult for calls do handover to 
other cells. This is very useful where it has coverage holes (not a one to one deployment 
­scenario on top of 3G cells). The smaller the value of a3offset + hysteresisa3 the faster release 
the calls to neighboring cells. This is useful in those scenarios where a large number of LTE 
cells exist in a given geographical area.
Table 8.10  Intra LTE ‐ A3,A5 parameters.
Parameter
Description
Range
Defaults
a3Offset
The offset value for eventA3
−30…30dB, step 0.5 dB
6(3dB)
hysteresisA3
Parameter for entering/leaving 
measurement report triggering 
condition.
1dB
a3TimeToTrigger
a5TimeToTrigger
The period of time that must be met for 
the UE to trigger a measurement report 
for Event A3 (A5), it depends much on 
the speed of the UE and the coverage 
scenarios.
0ms (0), 40ms(1), 64ms(2), 80ms 
(3), 100ms (4), 128ms(5), 
160ms(6), 256ms (7), 320ms (8), 
480ms (9), 512ms (10),.…, 
5120ms (15)
320ms
a3ReportAmount
a5ReportAmount
Number of reports when periodical 
reporting is used. 0 means that reports 
are sent as long as the event is fulfilled.
1r (0), 2r (1), 4r (2), 8r (3), 16r 
(4), 32r (5), 64r (6), infinity (7)
Infinity (7)
a3ReportInterval
a5ReportInterval
The interval for event triggered 
periodical reporting
120ms(0), 240ms(1), 480ms(2), 
640ms(3), 1024ms(4), 2048ms(5), 
5120ms(6), 1.024s (7), 1min(8), 
… 60min(12)
240ms
cellIndividual
OffsetEUtran
Offset value specific to the neighbor cell 
relationship. This parameter can be 
applied individually to each neighbor cell 
with load management purposes.
low value will delay the HO, and 
the higher the value allocated to 
a neighbor cell, the “more 
attractive” it will be.
‐
a5Threshold1
RSRP threshold1 used for triggering the 
EUTRA measurement report for 
Event A5
0…97 dB, step 1 dB −140 + X
‐
a5Threshold2
RSRP threshold2 used for triggering the 
EUTRA measurement report for 
Event A5
0…97 dB, step 1 dB
‐
Note: increasing TimeToTrigger and hysteresis might reduce ping pong effect and unnecessary handover but at the 
same time increasing too much might lead to handover drop.
www.ebook3000.com

LTE Optimization Engineering Handbook
290
8.4.2  Data Forwarding
This feature of data forwarding works for DL data only and is used during intra‐LTE handover. 
User‐plane tunnels can be established between the source eNB and the target eNB (or S‐SGW 
and T‐SGW) during handover preparation, it helps to decreases the packet loss rate, improve 
end‐user experience in case of time sensitive applications due to data loss or TCP slow‐start 
characteristics.
As soon as the source eNB receives the handover request acknowledge, or as soon as the 
transmission of the handover command is initiated in the downlink, data forwarding is initiated 
if necessary. The packet forwarding function shall forward all buffered and incoming PDCP 
SDUs from the source to the target RAN, that is, IP packets before ROHC and encryption, so 
ROHC context is not needed to be forwarded. Packet forwarding is only performed in down-
link (Figure 8.35 and 8.36).
During handover preparation phase, source eNB attempts to allocate forwarding transport 
bearers toward the target eNB. If this is successful, a forwarding user plane tunnel is estab-
lished for each E‐RAB between the source and target eNB. During handover execution phase, 
all buffered and incoming data is forwarded from the source to target eNB. Once handover is 
complete, the target eNB sends a path switch message to the MME. The MME then sends a user 
plane update request message to the SGW, which switches the user‐plane path from source to 
target eNB. The source eNB continues to forward packets while packets are being received 
from the SGW and the source eNB buffer contains data. When the END MARKER packet is 
S-eNB
T-eNB
IP
S-SGW
T-SGW
S1 HO Packet Forwarding
X2 HO Packet Forwarding
Figure 8.35  Data forwarding.
UE
S-eNB
MME
T-eNB
Handover Command
Handover Required
Handover Command
eNB status transfer
MME status transfer
Handover confirm
Handover Request
Handover Request ACK
Data transfer
Handover notify
Figure 8.36  S1 data forwarding procedure.

Mobility Optimization
291
received in the target eNB or the forwarding ordering timer expires, the target eNB discards 
any further forwarding data packets. Forwarding tunnels are then released.
8.4.3  Intra‐Frequency Handover Optimization
In LTE, the earliest a handover can be set up after security mode completed during an attach 
or idle to active setup. Handover optimization can be done by parameters adjustment, although 
each of the key handover parameters (hysteresis, eventA3offset, filtercoefficientRSRP/RSRQ, 
timeToTrigger) have a unique purpose, adjusting them may have many common effects which 
are illustrated in Table 8.11.
Additional handover‐related parameters includes cellIndividualOffset (allows altering effec-
tive handover hysteresis in a certain direction for a given serving cell ‐ > neighboring cell pair), 
maxReportCells (max number of cells reported by UE on the MR), reportingAmount/report­
ingInterval and s‐Measure (UE will look for neighboring cells only if the serving cell RSRP falls 
below this threshold).
Handover optimization needs to decrease drop call during and after handover procedure. 
The usual phenomenon is UE cannot successfully access the PRACH in the target cell or UE 
drops soon after sending RRC connection reconfig complete in target cell.
●
●Symptom: T304 expires. In this case timer T304 expires and UE makes RRC connection re‐
establishment with cause “handoverFailure.” (T304 is started after receiving handover com-
mand in source cell and stopped in target cell after successful PRACH procedure)
●
●Symptom: UE log indicates RRC connection reconfiguration complete (“PRACH msg3”) is 
transmitted but no further DL messages from target cell are seen and call drops
●
●Solution: increase T304 timer to 1000ms or longer, parameter t304IntraLte
●
●Solution: increase the max number of UL HARQ retransmissions, parameter harqMaxTrUl. 
(Parameter harqMaxMsg3 is for contention‐based RA with non‐dedicated preamble)
●
●Solution: increase initial preamble target receive power, parameter ulpcIniPrePwr (Value of 
−90dBm decreased handover drops considerably in a network)
Handover optimization also needs to decrease drop call before handover procedure. The 
usual phenomenon is handover is triggered too late, UE drops before handover command, 
sometimes ping‐pong handovers increase if A3 used for bad RF.
●
●Possible fix: If using A3 handover reduce a3offset and time to trigger. In some cases also 
­filterCoefficientRSRP may need to be reduced.
Table 8.11  Handover (HO) parameters optimization.
Smaller
Larger
●
●Faster HO trigger – can be useful in fast‐rising cell 
situations
●
●Increased HO ping‐ponging
●
●More frequent throughput interruptions
●
●Increased likelihood for UE served by a stronger cell. 
Hence, can improve HO success rate / throughput /
BLER perf but offset by impact from more frequent 
HO interruptions / HO to momentarily strong cells
●
●More suitable for fast moving UE environments, and 
higher RF loading on the network
●
●Slower HO rate
●
●Reduced HO ping‐ponging
●
●Fewer throughput interruptions
●
●Increased likelihood for UE staying on a weaker 
cell. Reduced HO rate can impact HO success 
rate / throughput / BLER, but offset by fewer 
interruptions / HO to more stable cells.
●
●More suitable for predominantly stationary 
usage / slow moving UE environments usage /
lighter RF loading
www.ebook3000.com

LTE Optimization Engineering Handbook
292
●
●One should consider using A5 triggered coverage‐based handover to quickly trigger handover 
in bad RF. This way, there is no need to reduce A3 trigger time, and less ping‐pong results. In 
this handover strategy, A3 is the handover for normal usage and A5 is for the bad‐RF quick 
reaction handover.
If handover is triggered too early, the target cell SINR can be too weak when handover occurs. 
If handover is triggered too late, the source cell SINR can be too low. This can result in an 
abnormal release before handover.
Besides, optimization of hysteresis and timeToTrigger should be performed in conjunction 
with optimization of parameter filterCoefficientRSRP. Low value of this parameter might allow 
ping‐pong handover operation. High value of this parameter might delay the handover and 
possible lead to lost connection to the serving cell. filterCoefficientRSRP simulation analysis is 
shown in Figure 8.37.
It is recommended filterCoefficientRSRP value = “fc8.” Finding the optimum pair of (filter­
CoefficientRSRP, hysteresis, and timeToTrigger) should be considered to one of the following 
{(fc6,2,80), (fc8,3,40), (fc8,4,20), (fc5,1,100)}, in current cell and neighbor cell. It was proven 
that the time to trigger below 100 ms have the same impact on performance as UE measures 
RSRP every 100ms.
8.4.4  Inter‐Frequency Handover Optimization
The eNB must include consideration of inter‐frequency neighbors in all measurement, handover, 
and redirection algorithms. There are two inter‐frequency mobility preparation methods: 
blind‐based handover and measurement‐based handover. This includes support of measurement 
objects (MeasObjectEUTRA) in the RRC connection reconfiguration message that include 
eutra‐carrierInfo and measurement bandwidth values differing from those of the current 
cell. Gaps must be supported for inter‐frequency measurements to allow the UE sufficient 
time  to retune its radio the frequency being measured. Also the eNB must support the 
–130
–120
–110
–100
–90
–80
–70
1
106
211 316 421 526
631 736 841 946 1051 1156 1261 1366 1471 1576 1681 1786 1891
RSRP_instant
RSRP_FC(K= 4)
RSRP_FC(K= 11)
Figure 8.37  filterCoefficientRSRP simulation analysis.

Mobility Optimization
293
IdleModeMobilityControlInfo (interFreqPriorityList option) in the RRC connection release 
message, which is used to direct UE camping behavior (Figure 8.38).
For inter‐frequency handover, the system supports bad coverage method based on RSRP and 
RSRQ with below triggers: based on bad coverage, based on interference, based on load, based 
on service, and based on subscription (SPID3 information from MME). The example of inter‐
frequency handover in Figure 8.39 shows that when UE in layer F1, mobility control is based on 
coverage, when UE in layer F2, mobility control is based on interference (load).
Usually two types of mobility triggers are used to move UEs between layers for inter‐frequency 
handover control strategy, coverage‐based mobility, and load‐based mobility, used in when 
­losing serving cell coverage and when serving cell load reaches a configurable threshold. The 
use case is for a cell on a low frequency with coverage relation to a cell at higher frequency. In 
such case it is possible to handover UEs to the higher frequency layer when the UE is close 
enough to eNB.
For layer F1(higher frequency), when event A2 (RSRP < −100dbm) is met, UE starts inter‐frequency 
measurement, when event A5 (RSRPf1 < −102dBm & RSRPf2 > −98dBm) is met, load‐based 
inter‐frequency handover to F2.
For layer F2 (lower frequency), when event A2 (RSRQ < −15db or RSRP < −98dBm) is met, 
start inter‐frequency measurement, when A4 (RSRPf1 > −100dBm) is met, load‐based 
inter‐ < frequency handover to F1.
If both inter‐frequency and inter‐RAT neighbors are provisioned, it needs to set event A5 
and event B2 serving cell thresholds such that eventA5 happens first.
Any UE on a frequency band cell moving away from the cluster will perform a measurement 
gap based eventA5 inter‐frequency handoff to another frequency band cell. UE will not be 
scheduled during measurement gap, which impact UE DL and UL performance. UL perfor-
mance will is impacted more. Event A2 means serving becomes worse than threshold, after A2 
reported, the inter‐frequency measurement will be implemented on UE. If EventA2 reported 
too early (A2 threshold is high), there may be 20% throughput drop on UL UE, at good coverage 
samples. In order to reduce the occurrence inter‐frequency measurement, improve the user 
throughput, the recommended A2 parameter setting (Event A3‐based handover) can be set up 
according to 95% RSRP samples of the serving cell; the serving cell’s RSRP samples are received 
from the samples in which the difference with the neighbor cell is not more than 3dB, which is 
shown in Figure 8.40.
On the other hand, if inter‐frequency handover is based on Event A2 + A5, it will lead the 
handover delay and impact the UE throughput. When A5−1 is too high or A5−2 is too low, ping‐pong 
inter‐frequency handover will happen, when A5−1 is too low or A5−2 is too high, handover 
delay will happen. Sometimes A3 is better, event A3 based inter‐frequency coverage/quality 
handover evaluation is given by:
	
RSRPneighbour
RSRPserving
a OffsetRsrpInterFreq
RSRQneighbo
3
ur
RSRQserving
a OffsetRsrqInterFreq
3
	
In a live network, the proposed setting is for UE not to quickly handoff to lower frequency 
band cell, and measurement gap will turn off on low‐frequency band cells, that UE will not 
handoff to a high frequency band cell. As an example, inter‐frequency handover takes place 
3  The parameter Subscriber Profile ID for RAT/frequency priority (SPID) is specified in 3GPP rel-8. It is an index 
referring to user information (e.g., mobility profile, service usage profile, or roaming restrictions). The information is 
terminal specific.
www.ebook3000.com

UE is connected in the cell.
Determine a set of inter-frequency and
IRAT frequency candidates in case of
poor coverage.
yes
Do not start measurements
for poor coverage.
Stop “Target Good
Enough” and “Good
Coverage” measurements
Start “Target Good
Enough” and “Good
Coverage” measurements
Wait for measurement reports
for poor coverage.
Poor coverage
reported
Blind
Handover?
yes
yes
yes
Handover?
no
no
no
12
11
10
7
5
8
2
1
4
3
6
9
Initiate Handover
Initiate Handover
Should
measurements be
started?
Initiate release with redirect
to one of the frequencies.
Initiate release with redirect
to one of the frequencies.
Initiate release with redirect
the reported frequency.
no
Start measurements for poor coverage.
Measurement report
criteria: A1 Event
› Measurement report
   criteria: A5 Event  
› Handover, release
   with redirect
› Measurement report criteria: A2
   Event
› Blind handover (more on this
   later); Blind release with
   redirect start A1/A5
   measurements
“Target Good Enough”
reported
The “Target Good
Enough” measurements
time out.
Good coverage
reported
The
set of frequency
candidates is
empty
Figure 8.38  Inter‐frequency handover.

Mobility Optimization
295
after serving cell RSRP < = −107dBm (high frequency band) and target cell RSRP > = −110dBm 
(low‐frequency band), the related parameters are listed below:
●
●thresholdEutraRsrp (Entering‐coverage‐alarm) = −103dBm, hysteresis = 1dB
●
●thresholdEutraRsrp (eventA5 – high frequency cell) = −105dBm, hysteresis = 2dB
●
●threshold2EutraRsrp (eventA5 – low frequency cell) = −112dBm, hysteresis = 2dB
The reference parameter settings for high‐/low‐frequency band cells are shown in Table 8.12 
and Table 8.13.
From summary in Table 8.14, the inter‐frequency handover triggering point would be:
●
●UE handover from low‐band layer to high‐band layer if the serving low‐band cell RSRP 
is < −117 dBm AND the high‐band layer cell RSRP is > −110 dBm. Note that measurement 
gap is disabled in low band with the assumption that low‐band coverage is ubiquitous. 
Therefore, the connected mode mobility toward high band is not possible. When UE reaches 
A2_below serving floor threshold, it will be released and redirected to UMTS carrier.
●
●UE handoffs from high‐band layer to low‐band layer if the serving high‐band cell RSRP 
is < −107 dBm AND the low‐band under layer cell RSRP is > −101 dBm
RRC reconfiguration(eventA2)
RRC reconfiguration complete
Measurement report(eventA2)
RRC reconfiguration(eventA1/A5)
RRC reconfiguration complete
Measurement report (eventA5)
RRC reconfiguration (IFHO)
RRC reconfiguration complete
UE
eNB
Figure 8.39  Inter‐frequency handover trigger.
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
–114
–112
–110
–108
–106
–104
–102
–100
–98
–96
–94
–92
–90
–88
–86
–84
–82
–80
–78
–76
–72
The recommended 
A2 parameter setting
Figure 8.40  A2 parameter setting.
www.ebook3000.com

LTE Optimization Engineering Handbook
296
8.4.5  Timers for Handover Failures
Several timers/mechanisms exist in the database file that influence handover failure rate/
dropped calls, the recommended value of these parameters are listed below.
T304 (Recommendation: ms2000): Successful transmission of handover confirm (RRC connection 
reconfiguration complete) following receipt of handover command.
Table 8.12  Connected mode parameter settings for high‐frequency band cells.
Measurement Event
Measurement Purpose
ReportConfig
Threshold
Hysteresis
thresholdEutraRsrp B2(EventB2)
Mobility‐InterRAT‐to‐UTRA
16
−115
4
thresholdEutraRscp (EventB2)
Mobility‐InterRAT‐to‐UTRA
16
−112
4
thresholdEutraRsrp (EventA2)
Below‐Serving‐Floor
3
−118
1
thresholdEutraRsrp (EventA2)
Entering‐Coverage‐Alarm
13
−103
1
thresholdEutraRsrp (EventA1)
Leaving‐Coverage‐Alarm
9
−98
1
thresholdEutraRsrp (EventA5)
Mobility‐InterFreq‐to‐EUTRA
18
−105
2
threshold2EutraRsrp (EventA5)
Mobility‐InterFreq‐to‐EUTRA
18
−103
2
Table 8.13  Connected mode parameter settings for low‐frequency band cells.
Measurement Event
Measurement Purpose
ReportConfig
Threshold
Hysteresis
thresholdEutraRsrpB2 (EventB2)
Mobility‐InterRAT‐to‐UTRA
14
−115
4
thresholdEutraRscp (EventB2)
Mobility‐InterRAT‐to‐UTRA
14
−112
4
thresholdEutraRsrp (EventA2)
Below‐Serving‐Floor
2
−118
1
thresholdEutraRsrp (EventA2)
Entering‐Coverage‐Alarm
12
−114
1
thresholdEutraRsrp (EventA1)
Leaving‐Coverage‐Alarm
8
−112
1
thresholdEutraRsrp (EventA5)
Mobility‐InterFreq‐to‐EUTRA
19
−115
2
threshold2EutraRsrp (EventA5)
Mobility‐InterFreq‐to‐EUTRA
19
−112
2
Table 8.14  Summary of inter‐frequency handover triggers.
Low Band
High Band
isMeasurementGapAllowed
FALSE
TRUE
Event A5 – hysteresis
2
2
Event A5 ‐ thresholdEutraRsrp
−115
−105
Event A5 – threshold2EutraRsrp
−112
−103
Event A1 ‐ thresholdEutraRsrp
−112
−98
Event A1 ‐ hysteresis
1
1
Event A2(ECA)‐ thresholdEutraRsrp
−114
−103
Event A2 ‐ hysteresis
1
1
Event A2(BSF)–thresholdEutraRsrp
−118
−118

Mobility Optimization
297
dsrTransMax (Recommendation: n64): Maximum number of scheduling requests (SR) UE will 
send to request an UL grant before declaring SR_Max failure. UE cannot receive UL grants 
could be due to weak DL SINR or UE running out of UL coverage.
T310 (Recommendation: ms1000): DL physical layer break‐down (out‐of‐sync indication 
within UE’s lower layers).
timeAlignmentTimerCommon/Dedicated (Recommendation: 2560ms): UE must receive a time 
alignment (TA) update within this interval, else declares TA failure.
maxRetxThresholdDownlink/uplink (Recommendation: 32): Max number of times eNB on DL/
UE on UL retransmits a RLC packet before declaring max_RLC_RTx failure dopped call.
ulSyncTimer (Recommendation: 3sec): eNB declares loss of UL when unable to detect sufficiently 
strong SRS.
8.5  ­Neighbor Cell Optimization
Neighbor cell optimization must be performed to ensure that UEs in idle or connected mode 
can promptly perform reselection to or be handed over to optimal serving cells.
The purpose of neighbor optimization is to cut the useless growing neighbors and add neighbors 
with a lot of handover attempts, also include correcting missing reciprocities and deleting one 
way neighbor relation. It is needed to identify which neighbors are important and which are 
not, so the engineers will be able to delete the unused or underused neighbor relations and add 
missing neighbors. After neighbor optimization, it would make the handover in network more 
smoothly, especially help in drive test audit.
Unlike 2/3G, there is no need for transmitting neighbor lists to UE in LTE. 3GPP requires UE 
to be self‐sufficient in terms of detecting neighbors without eNB’s assistance; however, a neigh-
bor relationship must exist in the cell for it to process handover request.
Usually, a network may contain thousands of cells and each cell may in average have 20 to 25 
neighbors per frequency. One of the most important item that it would clean up as part of this 
optimization is going to be the neighbor list, hence, having a good neighbor list is very critical 
for improving network performance. Missing neighbors can be characterized by a series of 
measurement reports sent to the eNB from the UE and UE not receiving any response from the 
eNB as the neighbor it is requesting to be handed over to isn’t in the neighbor list.
The main method of neighbor cell list optimization can be based on cluster drive data or other UE 
measurement report data. The basic idea is that if the cells of which RSRP are detected together in 
a large amount of bins should be considered as neighbors. It is recommended to run a drive test that 
covers all the cells within a cluster and its surrounding cells to collect data to support this activity.
For neighbor cell optimization, ANR (automated neighbor relations) is an important feature, 
which will automatically configure necessary measurement reports to detect neighbor cells of 
intra‐frequency LTE or inter‐RAT. When activated, neighbor relations are automatically added 
and removed based on these measurement reports. Without ANR, traditional neighbor tuning 
must be completed.
8.5.1  Intra‐LTE Neighbor Cell Optimization
8.5.1.1  Neighbor Relations Table
Within each eNB there is a neighbor cell list (NCL) and a neighbor relation table (NRT, includes 
intra‐LTE and inter‐RAT). Both of them are logical objects/concepts, so they do not refer to a 
particular implementation. The NCL contains information exchanged between neighbor sites 
via the X2 interface such as the cell global IDs and the physical‐layer cell IDs of the cells belonging 
www.ebook3000.com

LTE Optimization Engineering Handbook
298
to the neighbor sites and the IP address of those neighbor sites. The NRT contains the neighbor 
relation information on cell level, that is, for each cell of site, it contains a list of neighbor 
­relations (NR) identified by the ECGI and PCI and for each NR.
It is possible to optimize the neighbor relations by blacklisting the inefficient ones. Blacklisting 
a neighbor relation cell means preventing mobility (either reselection or handover) to that par-
ticular (unsuitable) cell (typically a far away cell with some signal resurgence). If a UE is not 
allowed to reselect a blacklisted cell, UE will not measure blacklisted cells in connected mode. 
If target eNB is blacklisted in source eNB, source eNB will not send X2 setup request to target 
eNB, no cell relation and X2 connection will be set up, handover will happen over S1 interface. 
If source eNB is blacklisted in target eNB, source eNB will send X2 setup request but get nega-
tive answer from target eNB. A blacklisted cell will therefore not be reported in any ANR or 
handover measurement report, and the UE will not measure blacklisted cells in connected 
mode so the UE will never be instructed from the eNB to handover to a blacklisted cell.
Whitelisting a (suitable) neighbor relation (created manually or by ANR) means preventing 
the eNB from removing it automatically, even if it was not used for a long period (typically due 
to low traffic in a young network).
Adding the neighbor eCGI to the x2BlackList, which will prevent ANR from creating an X2 
association toward the target and hence prevent handover. SIB4 also informs about blacklisted 
cells, up to 16 groups of cells (PCIs) can be blacklisted as shown in Figure 8.41.
Besides, the neighbor reciprocity function can identify the cell that is a neighbor of another 
cell, but the other cell is not a neighbor of the interested cell.
8.5.1.2  ANR
ANR supports for LTE inter‐frequency is the detection of new neighbor LTE cells using thresh-
old based on UE measurements, in intra‐frequency ANR for LTE the measurement is A3 while 
in inter‐frequency ANR for LTE is A5, the related parameters are shown in Table 8.15.
The ANR dedicated threshold for RSRP and RSRQ allows ANR to get the CGI before UE 
reports the cell as best serving and the handover is triggered. It increases the chance for ANR 
to finalize the neighbor relationship setup before it is used in the handover.
Usually, a series of measurement report without any RRC reconfiguration message is a good 
indicator of missing neighbor. UE is sending several measurement reports for PCI 46 as shown 
in Figure 8.42, but handover to this cell is never performed because this site is not defined as a 
Figure 8.41  SIB4 Content from 3GPP TS36.331.

Mobility Optimization
299
neighbor. UE is starting to measure on other PCIs defined as neighbor. Handover is performed 
right after this measurement report.
8.5.2  Suitable Neighbors for Load Balancing
Currently, load‐balancing requires a lot of manual configuration. The operator needs to manually 
specify if each relation is relevant for load‐balancing. In this part, it is discussed what is the 
suitable neighbours for load‐balancing.
First it is needed to decide the calculated UE relevance (Y(A, B)) for each neighbor cell relation 
which symbolizes the percentage of UEs that have reported the neighbor cell as strongest. This 
is calculated by performing background measurements that are exactly the same as other load‐
balancing measurements (A4 event is used to off‐loaded UEs to neighbor cells as well as determine 
the UE distribution) but with lower intensity.
Second, passive load‐balancing cell relations are needed to decide as shown in Figure 8.43.
Y(A, B) symbolizes the percentage of selected UEs that have ranked the associated neighbor 
cell B as the strongest in cell A.
8.6  ­Measurement Gap
Measurement gap enables single‐receiver UE to perform measurement on other frequencies or 
on other radio access technologies. The purpose of these gap assisted measurement is to 
­support inter‐frequency and inter‐RAT mobility in LTE.
8.6.1  Measurement Gap Pattern
Measurement gaps allow the UE to measure neighboring cells for several types of handovers: 
inter‐RAT handover, inter‐frequency handover, network‐assisted cell change, and so on. The 
eNB will command the UE when to start the measurement gaps via RRC connection reconfigu­
ration message. The starting point of these is determined so that the measurements gaps do 
not coincide with the UE’s periodic reporting. During measurement gaps the UE is measuring 
inter‐frequency/inter‐RAT candidates and does not transmit nor receive any data from the 
serving cell. UL and DL scheduler track the measurement gap periodicity and gap pattern in 
order to avoid allocations whilst the UE is not listening.
Table 8.15  ANR parameters.
Parameter
Description
Value
x2SetupPolicy
ANR setup X2 or not
TRUE
cellAddRsrpThresholdEutran
RSRP threshold for PCI report
−100dBm
cellAddRsrqThresholdEutran
RSRQ threshold for PCI report
N/A
a3offsetAnrDelta
ANR A3 event offset
0dB
hysteresisA3
ANR A3 event hysteresis
1dB
timeToTriggerA3
ANR A3 event trigger time
640ms
a5Threshold1RsrpAnrDelta
ANR A5 event offset (serving cell RSRP)
1dB
a5Threshold2RsrpAnrDelta
ANR A5 event offset (target cell RSRP)
1dB
hysteresisA5
ANR A5 event hysteresis
1dB
timeToTriggerA5
ANR A5 event trigger time
640ms
www.ebook3000.com

LTE Optimization Engineering Handbook
300
RSRP
sMeasure
Event A3
Gained Time
time To TriggerA5
SourcLTE RSRP
(dBM)
threshold_a1
threshold_a2
threshold1_a5
threshold2_a5
Target LTE RSRP
(dBm)
Waiting for A5
A5
A1
A2
threshold1_ANR_a5
ANR A5
threshold2_ANR_a5
a5Threshold2RsrpAnrDelta
Distance from eNB
ANR trigger Point
HO trigger Point
a3offsetAnr
a3Offset
LTEIFHO
Target Cell RSRP
Serving Cell RSRP
UE starts Measuring
a5Threshold1RsrpAnrDelta
Figure 8.42  ANR parameters and example.

Mobility Optimization
301
LTE measurement gaps are specified by 3GPP to have 6ms4 gap (see Table 8.16). The periodicity 
of these gaps is specified in periods of 10ms (1 frame). Larger periodicity of the gaps leads to 
better UL/DL throughput performance at the cost of inter‐frequency/IRAT monitoring, which 
could lead to longer required times to perform the handover.
By default, Gap 1 is assigned for ANR while Gap 0 is assigned for mobility as shown in 
Table 8.17.
After measurement gap is configured, the UE searches for cells in the target LTE frequency, 
which will take several measurement gaps since all 504 PCIs need to be scanned. If there are 
several LTE frequency layers, the search and measurement time is multiplied accordingly since 
the UE can only tune its RF receiver to one frequency during a measurement gap.
The measurement procedure is similar if the target frequency is UTRA. However, in that 
case, the number of gaps required for cell search depends on the number of neighbor cells, 
scrambling codes that are not provided in the neighbor list need not be measured by the UE.
For GSM target frequency, the UE is required to decode the BSIC on the 8 strongest meas-
ured BCCH frequencies.
4  6ms is enough to be able to search for primary and secondary synchronization channels of inter-frequency cells, 
even for the worst case frame timing where the gap starts at the beginning of the second or seventh subframe of the 
measured cell. This is because PSS/SSS is transmitted at 5ms interval at the end of the first and sixth subframes.
Initial relation
Relation with F(A,B)> x1%
is moved to passive
Relation configured by ANR 
or operator.
Relation with F(A, B)< x2% is moved to”
initial relation”.
Passive LB
UEs to be off-loaded only due to background measurement
and indirectly due to A4 measurement on active relations on
same frequency
Active LB
Relation with F(A, B) > x3% is moved to active.
If no active relation on a frequency & need for load balancing, if sum of 
F(A, B) for all relations with low enough load > x3%, moved all to active.
UEs to be off-loaded due to started A4 measurement.
Figure 8.43  Load‐balancing strategy.
Table 8.16  Gap pattern configurations supported by the UE.
Gap pattern Id
Measurement gap  
length (MGL, ms)
Measurement gap repetition 
period (MGRP, ms)
Minimum available time for inter‐
frequency and inter‐RAT measurements 
during 480ms period (Tinter1, ms)
0
6
40
60
1
6
80
30
www.ebook3000.com

LTE Optimization Engineering Handbook
302
If a cell is detectable and eligible to trigger a measurement report, the maximum time for UE 
to send the measurement report is called the cell identification time. The maximum allowed 
identification time depends on the C‐DRX long cycle and the target system, which are listed in 
Table 8.18.
Actually, the UE vendor is free to implement faster search and measurement than required 
by 3GPP, but network parameters will in most cases need to be optimized for the worst per-
forming fraction of UE models in the network. For this reason, C‐DRX can be disabled for the 
duration of urgent inter‐frequency measurements to reduce the probability of call drop due to 
measurement delay.
If RRC connection containing inter‐frequency/IRAT ANR comes first, then GP1 (reconfiguration 
message default value) will be used. If Inter‐frequency/IRAT mobility measurement for hando-
ver comes later, then measurement gap will be updated as GP0 (default value). If inter‐frequency/
IRAT mobility and ANR are in the same RRC connection reconfiguration message, GP0 will be 
used, which is shown in Figure 8.44.
An illustrated subframe scheduling in Figure 8.45 has been to show the measurement gap, all 
DL transmissions granted after measurement start‐4 will not be ACK/NACKed, due to the DL 
Table 8.17  Gap 1 and Gap 0.
Gap pattern
Feature
Event Type
Gap 1
IF ANR
Inter‐freq A3/A5
Gap 1
IRAT ANR
ReportStrongestForSON
Gap 0
InterFrequencySessionContinuity
A2/Inter‐freq A3/A5
InterFrequencyLTEHandover
Gap 0
WcdmaSessionContinuity
B2
Gap 0
SRVCCtoUTRAN
B2
Gap 0
InterFrequencyLoadBalancing
A4
Gap 0
InterRatOffloadToUtran
B1
Table 8.18  Maximum allowed time to identify a detectable cell with measurement gaps, per layer.
Long DRX 
cycle length
Max time to identify a 
detectable E‐UTRA FDD  
inter‐frequency cell
Max time to identify a 
detectable UTRA FDD cell
Max time to decode 
BSIC of a GSM cell 
(no other layers 
measured)
40ms gap
80ms gap
40ms gap
80ms gap
40ms gap
80ms gap
no C‐DRX
3.84 sec
7.68 sec
2.4 sec
4.8 sec
2.16 sec
5.28 sec
40ms
64ms
2.56 sec
30 sec
80ms
3.2 sec
‐
128ms
3.2 sec
‐
256ms
5.12 sec
3.2 sec
5.12 sec
‐
320ms
6.4 sec
9.6 sec
6.4 sec
6.4 sec
‐

Mobility Optimization
303
scheduling will stop at measurement start‐4. PUSCH/PUCCH can still be scheduled in the four 
subframes before measurement gap to send CQI/PMI/RI report, and so on, in order to keep 
monitoring the radio.
Measurement gaps are initiated by eNB with RRC connection reconfiguration message when 
Event A2 is triggered. The eNB deactivates measurement gaps once a suitable target cell has 
been reported by the UE or an event A1 is triggered by the UE. When measurement gaps are 
activated, the eNB informs the UE of the gap pattern. Note that DRX and measurement gaps 
are not used in parallel. Measurement gaps have higher priority than DRX.
The gap pattern is configured by parameter measurementGapsPattern. Note, however, that 
when Gap is activated on CSFB trigger, the period is hardcoded to 40 ms regardless of the set-
ting of parameter measurementGapsPattern.
The starting position of the measurement gap in a given gap period is defined by the UE‐specific 
Measurement Gap Offset (MGO). It is determined so that the UE performance is degraded as 
little as possible by measurement gaps. This is achieved by choosing the MGO so as to minimize 
the collision of measurement gaps with the other periodic transmissions listed below: CQI/
PMI/RI reporting and SRS transmissions, ACK/NACK transmissions on PHICH and PUCCH 
(except the last ACK/NACK, that is, when the max number of retransmissions has been 
reached), QCI1 transmissions and SIBs transmissions and so on.
Figure 8.44  Gap parameters from RRC connection reconfiguration message.
PUSCH/PUCCH is transmitted.
No DL scheduling
Frame
0
1
2
3
4
5
6
7
8
9
0
1
2
3
4
5
6 7
8
9
6
7
8
9
7
8
9
0
1
2
3
4
5
6
7
8
9
0
1
2
3
4
5
6
7 8
9
0
1
2
3
4
5
6
7 8
9
0
1
2
3
4
5
0
1
2
3
4
5
6
7
8
9
N–1
N+1
N
Subframe
PDCCH/PDSCH
PUSCH/PUCCH
Measurement gap
Not immediately transmit after gap
Figure 8.45  Scheduling strategy during measurement gap.
www.ebook3000.com

LTE Optimization Engineering Handbook
304
Note that the MGOs of the different UEs are also chosen so that their different measurement 
gaps are distributed over time so that during the measurement gap of some UE, a sufficient 
number of other UEs can transmit (receive) and the total cell throughput performance will not 
degraded. The MGO is in the set {0, 1,…, 39} in gap pattern 0 and in the set {0, 1, …, 79} in gap 
pattern 1.
8.6.2  Measurement Gap Versus Period of CQI Report and DRX
Measurement gap needs to consider periodic CQI report and DRX period to not miss CQI 
reports from the UE sent while the UE is active (on duration). When a measurement gap is 
started, it needs to determine where the measurement gap should start by presenting a MGO 
for the UE. The UEs CQI periodic reporting is also configured with an interval and an offset in 
relation to subframe starts.
Measurement gap has to be aligned (equal to or multiples of CQI and DRX cycle) with CQI 
report configuration to not lose the CQI reports from the UE. Currently DRX is aligned with 
CQI so that CQI reports are sent while the UE is active (on duration). Measurement gap will be 
placed before the UEs CQI measurement, to avoid a collision with CQI measurement and 
reporting and to allow for extended DRX active right after the DRX on period. Figure 8.46 is an 
illustration of measurement gap period, CQI measurement, CQI report, and DRX cycle. Here 
it assumes all the cycles are 40ms.
8.6.3  Impact of Throughput on Measurement Gap
During a measurement gap the UE cannot be scheduled in uplink or downlink, and therefore, 
measurement gaps induce throughput loss for the UE, there is no loss of cell throughput, however. 
From lab trial results, measurement gap with GP0 (40ms) has 25% throughput decrease compared 
with baseline. Measurement gap with GP1 (80ms) shows 12.8% increase compared with GP0.
So up to 15% and 25% DL throughput reductions have been observed for a UE, which is being 
scheduled with 80 ms and 40 ms measurement gaps respectively. Reducing the amount of time 
a connected mode UE is required to make inter‐frequency or inter‐RAT measurements can 
reduce this throughput impact.
From inter‐frequency (2.6G@20M <> 1.8G@10M) handover parameter optimization field 
test, Method1 is basic, Method2 is aggressive, Method3 is Method2‐based plus quick Event A5 
handover.
Three sets of parameters tested are listed below:
●
●Method1: the gap is triggered at −100 dBm, A3 = 3dB
●
●Method2: the gap is triggered at 1.8G to −110 dBm, A3 (2.6G →1.8G) =8dB, A3 (1.8G → 
2.6G) = −12 dB
●
●Method3: method2 based settings plus A5 (2.6G → 1.8G) = −116dBm
0
Measurement gap
40
80
120
CQI Report
CQI Report
CQI Measurement (8 ms before CQI reporting)
CQI Report
DRX on duration
Figure 8.46  CQI report alligned with DRX cycle and measurement gap.

Mobility Optimization
305
From Figure 8.47 it can be seen method2 settings result in UE staying too long (no 2.6G layer 
in bad coverage). For method3 settings, A5 trigger used to push UE quickly to 1.8G in bad cov-
erage. In this case, Method2 and Method3 are recommended.
8.7  ­Indoor and Outdoor Mobility
Indoor hotspots are assumed to be covered by indoor distributed system as well as small cells 
for higher efficiency. Indoor wave propagation losses are frequency dependent.
Indoor and outdoor mobility optimization evolves priority‐based cell reselection, A2 + A5, 
A2 + A4, A2 + A3‐based handover, and load balance and indoor leakage optimization items.
In case of indoor deployment on a dedicated carrier, the indoor leakage outside the building 
will be controlled as much as possible. To ensure service continuity between outdoor macro‐
cell network and indoor network, a good overlap must be guaranteed to execute a handover 
indoor/outdoor. The indoor to outdoor cell overlap is calculated from the scanner measure-
ment. It consists in calculating the RSRP delta between Top1 RSRP of indoor cell and RSRP of 
outdoor macro cell when Top1 RSRP > = RSRP target + indoor outdoor overlapping margin.
Usually, indoor cell will deploy on a dedicated carrier, indoor cells except those covering the 
first floor must have no F1 outdoor macro cells neighbors. The F1 outdoor macro cell must 
have as neighbors the indoor cell covering the first floor. Cells covering the building exits 
located essentially at the first floor, which is called a transition cell (Figure 8.48).
For cell reselection parameters setting, it is similar as outdoor cell (with same or different 
frequency/priority) reselection (Table 8.19).
For handover parameters setting, there are usually three configurations as shown in Table 8.20.
●
●configuration 1: A2 + A5 for both direction between indoor and outdoor, which can keep the 
UE indoors as long as possible, and meanwhile, any signal leaks can be controlled effectively
●
●configuration 2: A2 + A5 is used for indoor to outdoor, A2 + A4is used for outdoor to indoor
●
●configuration 3: A2 + A3 for both direction between indoor and outdoor
0
10
20
30
40
50
60
70
80
90
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
MAC DL throughput, Mbps
cdf
Empirical CDF
basic
basic
aggressive
aggressive
aggressive + quick a5
aggressive + quick a5
Figure 8.47  Different handover parameters impact DL throughput.
www.ebook3000.com

LTE Optimization Engineering Handbook
306
8.8  ­Inter‐RAT Mobility
The part is about the strategy of mobility in RRC idle mode (i.e., inter‐RAT cell reseletction) 
and in RRC connected mode (redirection, PS HO, CSFB or CCO) between LTE and other RAT 
(Utran or Geran). When a LTE cluster or site is driven, it is desired that all the time UE are con-
nected to LTE instead of IRAT to other technology. However, this sometimes is not possible, as 
LTE coverage becomes weaker in some areas it causes UE to switch to IRAT or to a better‐serving 
UMTS or GSM network.
Cell reselection is used for inter‐RAT (IRAT) mobility in idle mode. The UE receives the 
information from the eNB for IRAT and inter‐frequency cell reselection through system 
information messages (SIB3 and SIB6) and dedicated signaling that determine when it is appropriate 
Outdoor macro cell
Indoor pico cell
F2
F2
3rd floor
2nd floor
1st floor
F2
F2
F2
F1
F2
Figure 8.48  Transition cell.
Table 8.19  Reselection parameters setting between indoor and outdoor (example).
Outdoor cell
Indoor cell
1
Outdoor cell priority = 7, indoor cell = 5
Outdoor cell priority = 5, indoor cell = 7
RSRP_out < −102dBm, RSRP_in > −98dBm
RSRP_out > −100 dBm, RSRP_in < −104dBm
2
Outdoor cell priority = 7, indoor cell = 7
Outdoor cell priority = 7, indoor cell = 7
RSRP_in‐RSRP_out > 4dB
RSRP_out‐RSRP_in > 4dB
3
Outdoor cell priority = 5, indoor cell = 7
Outdoor cell priority = 5, indoor cell = 7
RSRP_in > −98dBm
RSRP_out > −100 dBm, RSRP_in < −104dBm
Table 8.20  Handover parameters setting between indoor and outdoor (example).
Outdoor cell
Indoor cell
config 1
RSRP_out < −102dBm, RSRP_in > −98dBm
RSRP_out > −102dBm, RSRP_in < −106dBm
config 2
RSRP_in > −98dBm
RSRP_out > −102dBm, RSRP_in < −106dBm
config 3
RSRP_in‐RSRP_out > 3dB
RSRP_out‐RSRP_in > 3dB

Mobility Optimization
307
to begin measuring other RATs and frequencies along with specifics of how the measurements 
should be triggered, prioritized, and ranked prior to the UE performing IRAT cell reselection. 
The S criterion is again used to select the good cells for cell reselection.
In RRC connected mode, there are in principle two ways of inter‐working between LTE and 
other RATs triggered based on event A2, and optionally, also by event B2. The inter‐working 
can be performed by a prepared handover (network controlled) where the UE does not leave 
the connected state (handover) or by a cell re‐selection/release and redirect (UE controlled or 
network assisted) where UE via idle state performs network assisted cell reselection (Figure 8.49).
8.8.1  Inter‐RAT Mobility Architecture and Key Technology
In Figure 8.50, an inter‐working network between LTE and GERAN/UTRAN is illustrated. The 
network shall ensure that the user has ongoing service performance by providing inter‐RAT 
handover functionalities. The UTRAN/GERAN network must be coverage overlapped with 
the eUTRAN network, and the neighboring frequency and neighboring cell relation shall be 
configured in the RAN nodes.
LTE IRAT capabilities can be divided into two major areas: CS and PS mobility, PS mobility includes 
cell reselection, cell redirection, NACC, and PS handover mode, which is shown in Figure 8.51. 
Table 8.21 presents an example of mobility strategy between LTE and UTRAN PS domain.
LTE will be broadcast as the highest‐priority RAT in all three technologies, followed by 3G, 
and then 2G. Reselection will only be made to a lower‐priority RAT when the destination 
RRC-CONNECTED
RRC-IDLE
“RRC-CONNECTED”
RRC-CONNECTED
“RRC-CONNECTED”
Bad coverage detection 
triggers Release with 
Redirect:
Redirect Information
Frequency
CellReselection according 
to redirect information 
(GSM, WCDMA, LTE IF)
Handover Command
Move to reserved resources
Figure 8.49  Release with redirect and handover.
MS
E-UTRAN TDD
E-UTRAN FDD
MME
S-GW
P-GW/GGSN
HSS/HLR
PCRF
NodeB
RNC
MSC/VLR
GnGp 
SGSN
BTS
BSC
Abis
Iub
A
Iu-cs
Gb
Iu-ps
Gr
PDN
S1-MME
S1-U
S1-U
S1-MME
D
Gn
Gn
S11
SGs
Gs
Gx
UE
UE
UE
Um
Uu
LTE-Uu
LTE-Uu
S5
Rx
Gi/SGi
X2
GERAN
UTRAN
E-UTRAN
S6a
Figure 8.50  IRAT interworking topology.
www.ebook3000.com

LTE Optimization Engineering Handbook
308
­coverage is expected to be better. A non‐zero setting of threshXLow for both 3G and 2G targets 
will be used to achieve this, ensuring that reselection does not occur when LTE and the destination 
RAT have poor coverage. A UE will reselect to a lower‐priority RAT when both the following 
criterion are met:
	
RSRP
qRxLevMin EUtran
threshServingLow
RSCP RSSI
qRxLevMin
/
Utran GERAN
threshXLow
/
	
Table 8.21  Mobility Between LTE and UTRAN PS domain.
UE State
Strategy
Description
LTE
=>
UMTS
idle
Cell reselection
The sib6 message is about the 3G neighbor cells. The 
system send the sib6 message to the UE side. And 
according to the sib6 and the LTE signal, the UE decides 
whether it is necessary to reselect to the 3G.
connected
R8 redirection
eNB sends RRC connection release message with ARFCNof 
UMTS. UE will access
UMTS with the frequency.
R9 redirection
eNB sends RRC connection release message with ARFCNof 
UMTS and ralated SI
information of the cell. UE will access UMTS with the 
frequency. SI is acquired by
RIM procedure.
PS HO
When PS HO is triggered, eNB send mobility from EUTRA 
command message for
UE handover to UTRAN. This feature is an end‐to‐end 
option that requires new
functionalities in the UE, the access and the core network.
UMTS=>
LTE
Idle/cell_PCH/
URA_PCH
Cell reselection
According to SIB19 or UTRAN mobility 
information ‐ > Dedicated priority information, E‐UTRA 
frequency, priority and cell reselection threshold, UE 
reselection from UTRA to LTE.
RRC connected
redirection
UTRA send UE E‐UTRA frequency by RRC connection 
release (redirection info) message for UE accesses to LTE.
cell_DCH
PS HO
Inter‐RAT PS HO feature can provide lossless handover 
between eUTRAN and
GERAN/UTRAN, but the procedure is rather complicated.
IRAT MOBILITY
Circuit Service (CS)
Mobility
Packet service (PS) mobility
(including VOIP)
PS
Handover
NACC (Network assisted
cell Change)
Redirection
Cell
Reselection
Figure 8.51  IRAT strategy.

Mobility Optimization
309
Redirection is a mechanisms to force a UE to switch from RRC‐connected to RRC‐idle mode 
and reselect to inter‐frequency/inter‐RAT neighbor cell for PS session continuation and/or CS 
call setup (CS Fallback). Redirection is triggered by either RSRP based event A2 or RSRQ‐
based event A2. Having both RSRP and RSRQ criterion, UE can be redirected to other LTE 
frequency/RAT layer to avoid performance degradation not only due to poor coverage but also 
due to extensive interference. Redirection target layer is selected by eNB according to param-
eter settings and UE capabilities. Selection of target for redirection is done without triggering 
any target layer measurements, that is, blind selection.
NACC: The serving cell controls the redirection using the UE measurement data. UE receives 
system info from target cell before release from the serving cell. Note that NACC is only 
applicable to GERAN and is an alternative for GERAN that does not support PS handover 
(NACC is not applicable to UTRAN to eUTRAN mobility, but to GERAN to UTRAN)
PS Handover: In addition to cell control used for redirection, target core communicates with the 
source core to establish the UE context. Unsent data in the serving RAN will be forwarded to 
the target UTRAN. This mobility procedure enables the establishment of network resources 
in the target UTRAN system prior to commanding the UE to move to the target cell.
The overview of IRAT classification and mobility actions is shown in Figure 8.52.
8.8.2  LTE to G/U Strategy
The UE shall only perform cell reselection evaluation for E‐UTRAN frequencies and inter‐RAT 
frequencies that are given in system information and for which the UE has a priority provided. 
Through the configuration of the frequency priority, networks can easily lead terminal reselect 
to the high‐priority cell to camp, so as to achieve the balance network loading and improve 
resource utilization, make the UE signal quality better, and so on (Figure 8.53).
In idle mode, priority‐based cell reselection is applied, the order of the priorities is 
LTE > UMTS > GSM. UE will camp on LTE with priority first, then UMTS, GSM finally.
In connected mode, UE will move to UMTS (GSM) by redirection/handover in LTE poor 
coverage. When the user returns to the LTE overlay area in the UMTS (GSM) network, the 
redirection/handover to LTE can be applied.
Figure 8.54 shows an example of LTE<>3G interworking in both idle/connected mode.
To realize LTE<>3G interworking in idle mode, the wireless network needs to software 
upgrade the eNB like 3G neighbor configuration and reselection parameter, RNC needs 
to ­configure 4G neighbor configuration and reselection parameter, the core network needs to 
upgrade MME, MSC (should support SGs interface), and so on.
There are four phases in LTE‐ > UMTS and UMTS‐ > LTE cell reselection: start measurement, 
measurement, decision, and execution. According to SIB3, SIB6, UE proceeds LTE‐ > UMTS 
reselection based on the priority. For UE in UMTS idle mode state or Cell_PCH/URA_PCH 
state, according to UMTS SIB19, which contains priority information (for E‐UTRA frequencies 
and UTRA cells) and LTE serving cell and neighboring cells (Figure 8.55).
For LTE to GSM reselection, all descriptions of UTRAN above apply except UTRAN is 
replaced by GERAN and SIB 6 is replaced by SIB7. SIB7 contains GERAN frequency and neigh-
boring cells for cell reselection mainly. GSM to LTE cell reselection is managed in “blind search” 
mode including PS cell reselection in NC0 mode (mobile controlled cell reselection). This means 
that 2G/LTE reselection algorithm is implemented at the MS side and performed autono-
mously. Inter‐RAT neighboring information and parameters SI2Quater message is broadcasted, 
all the parameters for the existing algorithm and the priority algorithm are sent. Then it is up to 
the MS to decide which algorithm to use in idle mode depending on its capabilities.
www.ebook3000.com

threshHigh
WCDMA
LTE
GSM
Decreasing signal strength
CSFB to WCDMA
(Blind)
Reselect to LTE
(higher priority)
CSFB to GSM
(Blind)
Fast return (Blind)
sNonlntraSearch
threshServingLow
b2ThresholdRsrp
qRxLevMin
utranB1ThresholdRscp
qRxLevMin(Geran)
threshXLow(Geran)
qRxLevMin(Utran)
threshXLow(Utran)
a2CriticalThresholdRsrp
b2Threshold2RscpUtra
a1a2SearchThresholdRsrp
Reselect to 
WCDMA
(lower priority)
HPRIOTHR
QRXLEVMINE
ACCMIN
Coverage Triggered
Session Continuity (Blind)
Reselect to GSM
(lower priority)
LTE Acceptable Performance
Reselect to LTE
(higher priority)
Release with
Redirect to LTE
(Blind)
qRxLevMin (Eutra)
qRxLevMin
PS HO to WCDMA
Coverage Triggered
Session Continuity (Blind)
Figure 8.52  IRAT classification and mobility actions.

Mobility Optimization
311
For 3G to LTE cell reselection, UE starts measuring IRAT cells in search of a better cell to 
camp on when the following criteria is met:
	
Srxlev
Snonintrasearch OR cellReSelPrio inter
RAT
cellReSelPrio serving 	
When the measured RSRP level will be lower than qrxLevMin + sNonintrSearch (i.e., 
−130 + 20 = −110 dB) the terminal will start IRAT measurements as shown in Figure 8.56. The 
Cell Reselection from low to high priority
LTE
UMTS
GSM
Cell Reselection from high to low priority
Coverage based HO/Redirection
Service based HO/Redirection
CSFB
Fast Return
LTE
1
1
1
2
2
2
3
3
3
4
4
5
5
5
6
6
6
UMTS
Figure 8.53  Inter‐RAT frequencies priority.
–122
–120
–112
–118
RSRP (LTE)
RSCP (3G)
1- Event A2 is sent by the UE after
640ms of poor coverage detection
1- UE Idle on 3G Network starts
Measuring on EUtranFreq:
2- UE reselects LTE cell after 2s
1- UE Idle mode on LTE
Network Starts Measuring on
UtranFreq:
2- UE reselects 3G Cell after 2s
CONNECTED MODE
LTE to 3G Session
Continuity
IDLE MODE
LTE to 3G Reselection
IDLE MODE
3G to LTE Reselection
2- Blind RWR to 3G Cell
Figure 8.54  LTE<>3G interworking.
www.ebook3000.com

Start measurement
Start measure UMTS
Start L to U
reselection
Start U to L
reselection
UMTS(SrxlevnonServingCell)>
2*(QRxLevMin+ThreshXHigh)
for TReseIUtran
LTE(SrxlevnonServingCell)>
2*(Eqrxlevmin + ThdToHigh)
for Treselection
LTE(SqualServingCell)≤ 2(QRxLevMin
+ ThrshServLow) and
UMTS(SrxlevnonServingCell)>
2*(QRxLevMin+ThreshXLow)
for TReseIUtran
LTE(SrxlevnonServingCell)>
2*(Eqrxlevmin +ThdToLow) and
UMTS (SqualServingCell)≤ Qqualmin
for Treselection
Start measure UMTS
LTE(SqualServingCell)≤
2(QRxLevMin+ SNonIntraSearch)
UE camps on LTE
(idle mode)
UE camps on 3G (idle
mode, or PCH state)
N
N
Y
N
N
N
N
N
N
Y
Y
Y
Y
Y
Y
Y
LTE_priority>
UMTS_priority
UMTS_priority>
LTE_priority
measurement
decision
execution
Start measurement
Start measure LTE
Start measure LTE
measurement
decision
execution
UMTS(SqualServingCell)≤ Qqualmin
+Sprioritysearch2
Figure 8.55  LTE‐ > UMTS and UMTS‐ > LTE cell reselection.

Mobility Optimization
313
condition regarding priorities is not fulfilled in this case, that is, LTE network has higher priority 
than 3G but it is enough one of the conditions is fulfilled to start measurements.
3G network can have higher or lower absolute priority than the LTE. This will depend on the 
operator’s strategy. If the operator wants to keep the terminals in LTE as long as possible it 
should give lower priority to 3G.
Once the IRAT measurements are started, the cell reselection to the best cell on 3G layer will 
happen if for a time period equal to tResUtra (2 sec in the example):
	
S
threshSrvLow and S
Threshx low
ServingCell
nonServingCell x,
,
	
Based on example values from Table 8.22, when the RSRP level of the serving cell will be 
lower than −130 + 14 = −116dBm and the 3G level is greater than −115 + 8 = −107 dBm.
sNonIntrSearch = 20
IRAT measurements will
start at –110 dBm
RSRP decreases
–110
–130
qrxLevMin = –130 dBm
Figure 8.56  Example of thresholds to start IRAT measurements.
Table 8.22  Example parameter values for IRAT reselection in idle mode.
Inter‐frequency and inter‐
RAT measurements threshold
sNonIntrsearch
20 dB
Defines the threshold (in dB) for inter‐RAT 
and inter‐frequency measurements.
Minimum required RX 
level in cell
qrxLevMin
−130 dBm
Specifies the Mini required RX RSRP level
UTRA minimum required 
received level
qrxlevminUTRA
−115 dBm
Minimum required Rx level in the cell.
Cell reselection priority
cellReSelPrio
7
Absolute priority of the LTE carrier 
frequency
UTRA carrier frequency 
absolute priority
uCelResPrio
3
Absolute priority of the UTRA carrier 
frequency
UTRA cell reselection timer
tResUtra
2s
UTRA cell reselection timer
Threshold serving low
threshSrvLow
14 dB
Threshold for the serving frequency used 
in reselection evaluation toward lower‐
priority LTE frequency or RAT
UTRA inter‐frequency 
threshold low
Threshx,low
8dB
Threshold used in reselection toward the 
frequency X priority from a higher‐priority 
frequency
www.ebook3000.com

LTE Optimization Engineering Handbook
314
8.8.3  Reselection Optimization
Cell reselection information is related about the available inter‐RAT frequencies, the cell 
reselection priorities, and the threshold values for cell reselection is provided to the UE through 
the system information in the cell.
Usually, LTE cell priority is 7 and 3G priority is 4. Snonintrasearch drive cell detection 
­frequency and lower‐priority cell detection for UE. If the Srxlev value of the serving cell falls 
below the threshServingLow value, the UE attempts to reselect a cell on an inter‐RAT frequency 
with cell reselection priority lower than the frequency where the UE is camping. Cell reselection 
occurs if the UE finds a cell with an Srxlev value greater than the threshXLow value for that 
frequency (Figure 8.57).
For 3G, the LTE frequencies and the parameters for priority based cell reselection are sent on 
the broadcast channel in SIB19. For GSM, each GSM cell broadcasts information via the ­system 
information message SI2quater, includes neighboring cells (UMTS and LTE), thresholds for 
IRAT and priority between GSM, UMTS and LTE cells (Figure 8.58).
3G to 4G and 4G to 3G signaling are shown in Figure 8.59.
Signal strength
Signal
strength
Snonintrasearch
Threshservinglow
Threshxlow
ThreshxHigh
High Priority Signal
Low Priority Signal
Time
Time
TreselectionUTRA
TreselectionRAT
Reselection
to UMTS
LTE High Priority
Reselection
to LTE
Qrxlevmin
Condition1:
Srxlev (source) < ThreshServingLow
Condition2:
Srxlev (target) > ThreshXLow
Condition:
Srxlev (target) > ThreshXHigh
Starts measuring
IF or IRAT freq
&
Low Priority Signal
Figure 8.57  IRAT measurement and reselection.

Mobility Optimization
315
8.8.3.1  LTE to UTRAN
The following scenario is used when a UE in idle mode state has to move from a LTE coverage 
area to a 3G coverage area, the UE applies rules as follows. eNB needs to support SIB6 and SIB 
3 broadcasting to the UE as shown in Figure 8.60.
Table 8.23 depicts the IRAT cell reselection parameters.
The SIB 6 message is about the 3G neighbor cells, and according to the message SIB 6 and the 
LTE signal, the UE decide whether it is necessary to reselect to 3G. SIB 6 message: IRAT (LTE 
to 3G) (Figure 8.61).
To avoid ping pong between LTE and 3G, after a UE reselected to LTE from 3G, the 3G signal 
has to be strong enough for the UE to consider LTE to 3G reselection again, so that the UE does 
not measure 3G again.
	
qRxLevmin LTE
sib
sNonIntraSearch LTE
sib
eUtraTargetF
_
_
1
3
requencyQrxlevmin
G sib
eUtraTargetFrequencyThreshxHi
3
19
_
gh
G sib
3
19
_
	
LTE parameter sNonIntraSearch should be set to a value between UMTS parameter threshHigh 
(threshold for going from UMTS to LTE: −118dBm) and LTE parameter threshServingLow 
(threshold for going from LTE to UMTS: −122dBm) to avoid ping‐pong between the two RATs:
	
threshHigh
sNonIntraSearch
threshServingLow
0	
Suggested initial values are:
threshHigh = 10 (dB), corresponds to −118dBm, threshold for UMTS → LTE reselection,
sNonIntraSearch = 8 (dB) corresponds to −120 dBm, threshold for starting UMTS measurements 
in LTE,
threshServingLow = 6 (dB). corresponds to −122dBm, threshold for LTE → UMTS release.
The related parameters will be included in Table 8.24.
The eNB needs to configure the reselected parameter as shown in Table 8.25. The need to 
pay attention to the minimum received at the signal level Qrxlevmin can be in a plurality of 
broadcast news; different broadcast message parameters are different in meaning. Some 
parameters play a part in the both stages of measurement start and reselection decision 
(Figure 8.62). Parameter configurations needed to configure the relevant parameters in the 
corresponding SIB messages, are specifically named in Table 8.25.
IDLE
RSRP
>–116
RSRP>–116
RSRP<–118
& [RSCP>–112
or EcNo>–14]
RSRP<–115
& RSCP>–102
RSRP<–118
& [RxLev>–110]
RSRP<–115
& [RxLev>–109]
[RSCP<–112 or
EcNo<–14] &
RxLev>–95
[RSCP<–105
or EcNo<–12] &
RxLev>–95
EcNo>–12
Fast
Return
RWR
LTE
WCDMA
GSM
LTE
WCDMA
GSM
CONNECTED
Figure 8.58  IRAT cell reselection strategy.
www.ebook3000.com

16. Cancel Location ACK
3G to 4G
4G to 3G
eNodeB
UE
MME
HSS
SGSN
2. TAU Request
12. Update Location Request
17. Update Location ACK
RNC
S-GW
P-GW
PCRF
1. Trigger to start TAU
3. TAU Request
4a. Context Request
4b. Context Response
6. Context ACK
7. Create Session Request
11. Create Session Response
8. Modify Bearer Request
9. PCEF Initiated IP-CAN Session Modification
10. Modify Bearer Response
15a. Iu Release Command
15b. Iu Release Complete
18a. TAU Accept
18b. TAU Complete
5. Security Functions
13a. Cancel Location Request
13b. Cancel Location ACK
old MME
14. Cancel Location Request
MS
eNodeB
new SGSN
HSS
old MME
2. SGSN Context Response
3. Security Functions
1. Routeing Area Update Request
2. SGSN Context Request
6. Update PDP Context Request
6. Update PDP Context Response
7. Update Location
10. Update Location Ack
11. Routeing Area Update Accept
8. Cancel Location
8. Cancel Location Ack
9. Insert Subscriber Data Ack
9. Insert Subscriber Data
4. SGSN Context Acknowledge
P-GW
13. Delete Session Request
13. Delete Session Response
12. Routeing Area Update Complete
S-GW
C3
C2
0. UE changes to UTRAN or GERAN
13. S1-AP: S1 Release
old SGSN
Figure 8.59  IRAT reselection signaling analysis.

Mobility Optimization
317
According to Table 8.25, UE will start searching for a lower‐priority 3G frequency when:
	
RSRP
qRxLevMin
sNonIntraSearch
dBm
128
16
112
	
The UE will reselect to 3G when the below is fulfilled for a time tReselectionUtra:
	
RSRP
qRxLevMin EUtranCellFDD
threshServingLow
128
8
120dBm and
RSCP
qRxLevMin UtranFreqRelation
threshXLow
,
115
4
111dBm
	
In addition, inter‐RAT cell reselection to a even lower‐priority GSM frequency is performed 
by the UE in LTE when the LTE and 3G criteria listed below are fulfilled during tReselection 
seconds:
●
●Serving LTE cell RSRP below qRxLevMin [EUtranCellFDD] + threshServingLow
●
●Target UMTS cell RSCP is NOT above qRxLevMin [UtranFreqRelation] + threshXLow
●
●Target GSM cell RxLev is above qRxLevMin [GeranFreqGroupRelation] + threshXLow
Using the current parameter values, the UE will reselect to GSM cell when LTE RSRP is 
below −120 dBm AND UMTS RSCP is NOT above −111 dBm AND GSM Rxlev is above −98 
(−100 + 2) dBm for 2 seconds at least.
SIB3 contains 
cell reselection 
information 
(intra-freq, 
inter-freq, inter-
RAT) and speed 
dependant 
reselection 
parameters 
CRP-irat > CRP-servingCell?
Is S-nonintrasearch sent in SIB3?
UE performs measurements of the
higher priority inter-RAT frequency.
UE performs measurements of IRAT
frequency cells of equal or lower CRP.
UE may choose not to perform
measurement of inter-RAT frequency
cells of equal or less priority.
Is S-servingcell > S-nonintrasearch?
NO
NO
CRP = Cell reselection priority
YES
YES
YES
NO
Figure 8.60  IRAT cell reselection.
Table 8.23  IRAT cell reselection parameter.
Parameters
Value
Specification
SnonIntraSearch
31
Threshold when iRAT measurement are required for cell 
reselection.
ThreshServingLow
24
Threshold that the signal strength of the serving cell must be 
below for cell reselection toward iRAT cell
ThreshX,low
0
Threshold that the signal strength of the target iRAT cell 
must be above
www.ebook3000.com

3G reselection
Reselection when 
cell>–90dBm,
threshXLow=30
Femto reselection
Reselection when 
cell>–106dBm,
threshXHigh=14
threshXhigh:11 is IE value, real
configure value is 22. TDL
RSRP>–98dBm
Figure 8.61  SIB6 and SIB19.

Mobility Optimization
319
8.8.3.2  UTRAN to LTE
UMTS to LTE cell reselection to a higher‐priority LTE frequency is performed by the UE in 
UMTS if the measured LTE cell RSRP is greater than qRxLevMin + threshHigh during tReselection 
seconds. The measurement in UMTS for LTE neighbor cells will be enabled continuous. Idle 
Table 8.24  LTE to UTRAN reselection parameters.
Parameter
Setting
qRxLevMin
−124 dBm
threshServingLow
4 dB
qRxLevMinOffset
2
threshXLow
6
sintrasearch
46 dB
sNonIntraSearch
8 dB
tReselectionUtra
2
b2Threshold1Rsrp
−120
a2ThresholdRsrpPrim
−118
Table 8.25  Reselection parameters in SIB messages.
Parameter
Impact
Recommended
Measure
Decision
SIB1
Qrxlevmin (LTE)
√
√
−128
PEMAX (LTE)
√
√
23
SIB3
Snonintrasearch (LTE)
√
Threshservinglow (LTE)
√
√
cellReselectionPriority (LTE)
5 ~ 7
SIB6
Threshxlow (to 3G decision threshold)
Qrxlevmin (3G)
P‐MaxUTRA (3G)
t‐Reselection‐UTRA (3G)
2
cellReselectionPriority (3G)
2 ~ 3
LTE to WCDMA
cell reselection
WCDMA
RSCP
tReselectionUtra
qRxLevMin + sNonIntraSearch
qRxLevMin(UtranFreqRelation)
+threshXLow
qRxLevMin (UtranFreqRelation)
qRxLevMin
LTE
RSRP
qRxLevMin (EUtranCellFDD) +
threshServingLow
Figure 8.62  LTE to 3G reselection (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
320
mode cell reselection evaluation is performed every DRX cycle. The UE will reselect to LTE 
when the below is fulfilled for a time tReselectionUtra:
	
RSRP
threshHigh
qRxLevMin EUtranFreqRelation
10
128
118dBM	
The related parameters (threshHigh, qRxLevMin etc.) are included in SIB19 in UMTS.
The whole IRAT reselection strategy is shown in Figure 8.63. It illustrates the hysteresis and 
reselection regions for transition between LTE and UMTS in idle mode.
8.8.4  Redirection Optimization
Cell redirection is a cell reselection when UE is in RRC connected state. It enables a multi‐RAT 
UE to be quickly redirected toward a target LTE (2/3G) cell while a UE is camping in a 2/3G 
(LTE) cell in RRC connected state (and involved in a data transfer). The redirection will make 
sure the retainability of the PS service and good end‐user experience.
8.8.4.1  LTE to UTRAN
The LTE serving cell controls the redirection using UE RF measurement data. Two options are 
supported: blind redirection and measured redirection. Blind redirection from LTE to UTRA is 
used if UE does not support event B2 measurement (measurement purpose = “Mobility‐Inter‐RAT‐
to‐UTRA”), or event B2 measurement report is not available when mobility from LTE to UTRA 
has to be triggered. Compared with a blind redirection without UMTS radio measurements, the 
redirection with measurement improves the end‐user QoE (quality of experience) by redirecting 
the UE from an LTE cell to an UMTS overlay in a timely fashion. Measurement‐based redirection 
from LTE to UMTS is used if PS handover is not supported by the UE or is not activated in eNB. 
eNB may broadcast six UMTS frequencies in redirection message.
The blind redirection is triggered when no PS handover is implemented or activated nor 
­supported between those two systems and when the UE is not supporting inter‐system meas-
urement gap capability. The blind redirection is based on serving cell measurement (Event A2 
measurement) only rather than measured redirection, which is based on serving and target 
measurement (Event A2 and Event B2 measurements).
The measured redirection is the same as the previous one with the enhancement on the 
measurement gap functionality. This procedure is triggered when no PS handover is imple-
mented or activated nor supported and with UE supporting inter‐system measurement gaps 
on radio frames. The enhancement is mainly related to radio side, which improves UMTS 
redirection time duration and efficiency. Measurement gaps periods are set by RRC signaling 
reconfiguration procedure toward UE by fixing, length, periodicity and offset information in 
LTE RSRP
threshHigh
sNonIntra Search
threshServingLow
qRxLevMin
qRxLevMin
threshXLow
UMTS RSCP
Neither is suitable
Fall off LTE and camp on WCDMA
Hysteresis region
Stable on either WCDMA or on LTE
Reselect from WCDMA to LTE
Reselect from LTE to
WCDMA
Figure 8.63  IRAT reselection strategy.

Mobility Optimization
321
radio subframes. The need for measurement gaps by the UE is specified in the UE capabilities. 
This scenario is using event A2 and B2 type measurement to indicate LTE serving cell degradation 
and redirection decision (Figure 8.64).
Event B2 based redirection parameters are shown in Table 8.26.
The example of redirection procedure and related parameters is shown in Figure 8.65.
A2 condition met
Connected Mode
Triggered A2
Decision
Start A1 and B2
B2 reported
A5B2 timer expires
A1 reported
Blind Redirection
Initiate Redirection
Decision
Other case
Other case
iRAT measurement
Sometimes try changing
A2 parameter to trigger
IRAT earlier and reduce
drops during redirect
–110 dBm
threshold4
RSRP
Serving Cell
RSRP
time
reporting condition met
after Time To Trigger
threshold4
2
1
a2TimeToTriggerRedirect
3
Figure 8.64  RRC connection release with redirect procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
322
8.8.4.2  UTRAN to LTE
When UE was in connected mode in UMTS, the UE would receive the event 3A‐ or 3C‐related 
information. And then the UE would start the measurements. UE reported the 3A or 3C, and 
the RNC will send the RRC release information, which include the target frequency and with 
redirection information. There are eight frequency sent by RNC in RRC redirection informa-
tion. And when UE received the command, the redirection will be executed after the 
TimeToTriger timer reached. Table 8.27 is the threshold of the 3A and 3C event.
Figure 8.66 shows the procedure of UTRAN to LTE redirection. When the measurement 
threshold was satisfied, UE send measurement report to RNC. The redirection decision made 
by RNC and if the redirection will be executed, then RRC connection release will be sent to UE 
with target frequency information, finally UE sends the service request to MME and finishes 
tracking area update procedure.
Table 8.28 gives an example of the threshold for trigger of event 3A. If you want to make the 
redirection from UMTS to LTE easily, thres1 can be set a little higher (−50 dBm), thres2 can be 
set a little lower (−110 dBm). These two parameters need to be set consist with reselection 
threshold, for example, the threshold for UTRAN to LTE reselection trigger EqrxlevMinRsrp 
can be set to −112dBm in this case shown in Table 8.28.
8.8.5  PS Handover Optimization
The redirection is based on the RRC release information and found the target frequency and 
cell to access again. While PS handover flow will include the measurement and decision and 
action, and it can based on coverage and capacity and RRM will be discussed between serving 
and target eNB, and then prepare handover and UE finished handover with commands. In 
theory inter‐RAT PS handover feature can provide lossless handover between eUTRAN and 
GERAN/UTRAN, but the procedure is rather complicated.
8.8.5.1  LTE to UTRAN
This part introduces the UE measurement–based packet switched (PS) handover procedure to 
move UE from LTE to UTRAN. eNB will trigger the PS handover when UE is leaving LTE 
­coverage area and moving into UTRAN coverage area, and the UE measurement report indicates 
that the LTE radio condition becomes worse than a threshold and the UTRA radio condition 
becomes better than a threshold.
Comparing with redirection, PS handover from LTE to UTRAN has the advantage of allocating 
the resources in UTRAN prior to the execution of PS handover. Besides, PS handover has the 
capability of data forwarding from source LTE to target UTRAN. It thus reduces the service 
interruption time and ensures better performance to packet loss–sensitive services.
Table 8.26  Redirection parameters.
Parameters
Values
Comments
UEMeasurementsActive
true
Decides whether iRAT measurement should be started
a1ThresholdRsrpPrim
−90
RSRP threshold value for the primary event A1 measurement
a2ThresholdRsrpPrim
−102
RSRP threshold value for the primary event A2 measurement
b2Threshold1Rsrp
−104
RSRP threshold value of the serving cell for the Event B2 measurement
b2Threshold2RscpUtra
−119
RSCP threshold value for the Event B2 measurement
a5B2MobilityTimer
3000
Specifies the time the UE are allowed to perform Event A5 and B2 
measurements

The source eNB will give a
 command to the UE to
reselect a cell in the target
access network via the
RRC connection release.   
Figure 8.65  Field test of redirection procedure and related parameters.
www.ebook3000.com

LTE Optimization Engineering Handbook
324
If PS handover is to be performed, eNB will select the best UTRA cell as the PS handover 
target cell. eNB will send a handover required message to the MME and start timer TS1relocprep. 
If the reservation of resources in the target UTRAN cell is successfully completed, MME will 
send a handover command message to eNB. eNB will then stops the timer TS1relocprep and 
enter the handover execution phase. If timer TS1relocprep expired, or eNB receives a S1 handover 
preparation failure message, handover preparation fails. Once a handover command message is 
received from MME, eNB will stop timer TS1relocprep and start timer TS1relocoverall, eNB will 
send a MobilityFromEutraCommand to the UE with purpose set to “handover” and targetRAT‐Type 
set to “ultra.” If UE context release command is received from MME, PS handover is ­successful. 
eNB will send a UE context release complete to MME. eNB will stop timer TS1relocoverall and 
release UE context and associated resources. If timer TS1relocoverall expires, eNB considers the 
UE to have lost radio coverage and will trigger the release of all UE associated resources by send-
ing an UE context release request to MME and release all UE associated resources in eNB.
8.8.5.2  UTRAN to LTE
For UTRAN to E‐UTRAN handover procedures, the UTRAN has two main tasks: processing 
the handover decision and initiating the handover procedure by sending RANAP relocation 
required message with relevant content to source SGSN. Prior to the handover preparation 
phase, UTRAN has to manage UE LTE capacity, monitor the radio condition change and LTE 
neighboring cells, and eventually activate CM measurements. In the handover execution phase, 
UTRAN will process CN message RANAP relocation command, command the UE to handover 
to the target eNB via the message RRC handover from UTRAN command, which contains the 
transparent container with radio aspects parameters set up by target eNB during preparation 
Table 8.27  3A and 3C.
Events
Event description
In
Leave
3A
RSCPScell < thres1, and
RSRPNcell > thres2
Q
T
H
Used
Used
a
3
2
/
and
M
CIO
T
H
OtherRAT
OtherRAT
OtherRAT
a
3
2
/
Q
T
H
Used
Used
a
3
2
/
or
M
CIO
T
H
OtherRAT
OtherRAT
OtherRAT
a
3
2
/
3C
RSRPNcell > thres
M
CIO
T
H
OtherRAT
OtherRAT
OtherRAT
c
3 2
/
M
CIO
T
H
OtherRAT
OtherRAT
OtherRAT
c
3 2
/
UE
Node B
RNC
eNB
Trigger phase
Measurement phase
RRC_PH_CH_RECFG
RRC_PH_CH_RECFG_CMP
RRC_MEAS_CTRL
RRC_MEAS_RPRT
TrackingAreaUpdateRequest
RRC_RRC_CONN_REL
RRC_RRC_CONN_REL_CMP
Decision phase
Execution phase
Figure 8.66  UTRAN to LTE redirection.

Mobility Optimization
325
phase and perform data forwarding between UE and CN for DL and UL user plane data till 
effective relocation completion.
8.8.6  Reselection and Redirection Latency
The tests show that the delay of LTE to UMTS idle state reselection is about 2.6 to 4.9s. UMTS 
to LTE reselection delay is about 0.3 to 2s. The control plane interrupt time delay of LTE redi-
rection to UMTS is about 3.0 to 5.5s, it is far from searching with out of LTE service (12 to 32s). 
The control plane interrupt time delay of UMTS redirection to LTE is about 0.7 to 1s. They are 
as same as theoretical analysis and laboratory test results. Table 8.29 shows the typical reselec-
tion latency between LTE and UMTS.
There are some differences in the test results of different network, because of the different 
broadcast messages in different UMTS systems, and whether the authentication process of inter‐
system interoperability is on. In the same area, the delay of different terminal chips is slightly 
different, because of the difference of the synchronization to the target cell performance.
In addition, an analysis of difference for the “percentage of Time on LTE” between the idle 
mode users and connected mode users. It aims to focus on improving the connected mode 
time on LTE. it is needed to find the best transition area for all technologies to improve LTE 
coverage and end‐user experience with RF optimization. As an example, one key parameter 
difference between idle‐mode reselection and connected‐mode redirection is the time to 
­trigger as shown in Table 8.30.
Table 8.28  Example of the threshold for trigger of event 3A.
NLTE RSRP > thresholdOtherSystem + 
Hysteresis/2 ‐ CIO and
SUMTS RSCP < thresholdOwnSyste ‐ 
Hysteresis/2
thresholdOtherSystem
−110 dBm
Hysteresis
4 dB
thresholdOwnSyste
−50 dBm
CIO
0 dB
TimeToTrigger
640ms
Table 8.29  Reselection latency.
Attempts
First broadcast message > 
RRC connection request/
channel request(s)
RRC connection 
request— > TAU  
accept/RAU accep(s)
Delay(s)
TD‐L‐ > TD‐S
500
1.488
2.203
3.691
TD‐S‐ > TD‐L
500
0.114
1.06
1.209
Table 8.30  Parameters comparison of idle‐mode reselection and connected‐mode redirection.
Idle mode
Connected mode
Description
Values Idle/connected
Qrxlevmin
N/A
Absolute minimum RF value
−122/−122 dBm
Treselection
Time To TriggerA2Prim
Time to Trigger
2000/640 ms
ThreshServingLow
a2ThresholdRsrpPrim
Minimum RSRP value to trigger
−116 dBm/−116 dBm
qHyst
hysteresisA2P rim
Hysteresis
0 dBm/1dBm
www.ebook3000.com

LTE Optimization Engineering Handbook
326
8.8.7  Optimization Case Study
One of the things that needs to be monitored in LTE mobility domain is related with the success 
rate of the handover procedures on source cell. In order to evaluate this it is advised to check 
success rate indicators, which represents the percentage of the successfully performed hando-
vers. It has possibilities to monitor the different types of LTE‐LTE handover: intra‐eNB, inter‐
eNB, intra‐frequency (X2), inter‐eNB intra‐frequency (S1), inter‐eNB inter‐frequency (X2), 
and inter‐eNB inter‐frequency (S1).
Case 1: ping‐pong reselection
In order to prevent the ping‐pong reselection, the reselection threshold of LTE/UMTS/GSM 
should be considered. In order to prevent the LTE reselection to GSM network quickly after 
reselection to the UMTS network, 3G signal threshold of LTE to UMTS network needs to be 
higher than that of UMTS to GSM. In order to prevent ping‐pong reselection between the LTE 
and UMTS network, the 4G LTE network signal threshold of UMTS to LTE network should be 
higher than LTE reselection to UMTS threshold (Figure 8.67).
Case 2: UE redirection to LTE failure due to EPLMN misconfigured
The function of UMTS to LTE redirection is enabled, it is found that after RNC proceeded 
redirection to LTE, the UE still stayed on UMTS. As shown in Figure 8.68, after UE reported 
event 3C, RRC connection release was transmitted. LTE frequency was carried in the release 
message, but the UE was back to UMTS after LTE SIB reading (Figure 8.68).
Considering the particularity of the live network, the PLMN of UMTS, LTE of the two operators 
were inconsistent. Therefore, 3G/4G are required to configure the equivalent PLMN, the inspec-
tion found that CS domain of LTE and UMTS were configured the IRAT system equivalent PLMN, 
but PS domain of UMTS side was not configured the equivalent PLMN of IRAT system, it can be 
seen by the results of TAU/LAU/RAU attach procedure. After configuring the PS domain equiv-
alent PLMN, UE was redirected to the LTE to initiate the TAU process, as shown in Figure 8.69.
For IRAT operation, when UE redirects the PLMN from one system to another one, if the UE 
cannot access the target system after reading the SIB message, it needs to inspect whether the 
PLMN is consistent and equivalent PLMN is misconfigured by the core network.
8.9  ­Handover Interruption Time Optimization
After a handover command is triggered, the UE disconnects from the serving eNB before set-
ting up a connection with the target eNB and stops receiving data. This is the point in time 
where data interruption starts. For long handover interruption time, interference and missing 
neighbors need to be analyzed. The period of time where the UE can not exchange data is 
referred to as handover interruption time. It includes the time to execute radio access network 
procedures, the time for UL and DL radio resource control signaling, and the time taken to 
notify and execute the data path switching. Handover preparation time is the time duration the 
eNB takes to prepare the handover. Handover execution time is the time duration RRC signaling 
is interrupted during handover. Handover preparation time and handover execution time can 
be according to:
Handover preparation time = T (RRC connection reconfiguration) − T (measurement report)
Handover execution time = T (RRC connection reconfiguration complete) − T (RRC connection 
reconfiguration)
Table 8.31 gives the most popular handover lantency/interruption KPIs.

UE RAT Type
LTE
WCDMA
13:20:03
13:20:07
13:20:11
13:20:15
13:20:19
13:20:23
13:20:27
13:20:31
13:20:35
13:20:39
13:20:43
13:20:47
13:20:51
13:20:55
13:20:59
13:21:03
13:21:07
13:21:11
13:21:15
13:21:19
13:21:23
13:21:27
13:21:31
13:21:35
13:21:39
13:21:43
13:21:47
13:21:51
13:21:55
13:21:59
Time
RAT type
UE RAT Type
LTE
WCDMA
16:47:48
16:47:52
16:47:56
16:48:00
16:48:04
16:48:08
16:48:12
16:48:16
16:48:20
16:48:24
16:48:28
16:48:32
16:48:36
16:48:40
16:48:44
16:48:48
16:48:52
16:48:56
16:49:00
16:49:04
16:49:08
16:49:12
16:49:16
16:49:20
16:49:24
16:49:28
16:49:32
16:49:36
16:49:40
16:49:44
Time
RAT type
Figure 8.67  Ping‐pong reselection optimization before and after.
www.ebook3000.com

LTE Optimization Engineering Handbook
328
Figure 8.68  UE redirection to LTE failure.
Figure 8.69  UE redirection to LTE success after PLMN configured.
Table 8.31  KPIs focused on the volume.
KPI Name
HO interruption delay for VoIP
HO interruption delay for best effort service
LTE TO UMTS PS HO – interruption time and latency
Voice call setup time for CSFB to UTRAN using Redirection/PSHO
Data interruption time due to LTE to UTRAN CSFB via Redirection
Voice call setup preparation time for CSFB to 1xRTT by idle Dual‐Rx UE
LTE to CDMA HO interruption time type HO (data)
Enhanced non‐optimized LTE‐to‐HRPD handover preparation latency
Data interruption time for LTE to GERAN PS mobility using CCO with NACC
LTE‐to‐GERAN handover via Redirection interruption time
Voice call setup time for CSFB to GERAN using CCO with NACC/Redirection
Voice call interruption time for SRVCC HO to UTRAN

Mobility Optimization
329
Take S1 handover, for example, the handover interruption time is estimated in Figure 8.70. 
For CBRA, the interruption time is estimated to approx 62 ms in DL and 32 ms in UL. Transport 
delay in both directions is not included in the figures. For CFRA, eNB knows that it is a handover 
access from the expected UE when receiving random access preamble. This means that the 
eNB can start transfer of DL data earlier which will reduce the interruption time by approx 10 
ms to approx 52 ms.
8.9.1  Control Plane and User Plane Latency
Handover control plane interruption time is defined as the duration between the handover 
command at source eNB and the RRC reconfiguration complete at target eNB. In average the 
time from measurement report to RRC connection reconfiguration took 40 to 50ms. From RRC 
connection reconfiguration message to RRC connection reconfiguration complete, it took the UE 
30 to 40ms (Figure 8.71).
User plane (UP) interruption time has been noticed to be too high in field test, especially 
with FTP, handover procedure works as specified by 3GPP and user plane interruption times 
are varying roughly even between 100ms to 350ms most of the time. After disconnecting from 
the serving eNB, the UE typically waits for the next random access opportunity to execute a 
random access procedure to acquire service with the target eNB and eventually be able to 
resume any data exchange.
An example of X2 handover UP latency test that uses the different eNBs to identify last/
first package is given in Figure 8.72. It shows before handover, UE1 (IP address 10.63.0.2) 
received the last package at T1 = 15.850252s, and in the time UE1 stays at eNB1 (IP address 
10.100.100.10) (as two S1 links are mapped to a same mirror port, so there are two messages 
with same source and destination). At T2 = 15.899244s, the first package is received by UE1 
after handover to eNB2 (IP address 10.100.100.2). So handover UP latency = 15.899244−15.
850252 = 49 ms.
Handover UP is also can be computed the UP handover latency based on the signaling and 
RLC PDU, shown in Figure 8.73.
Figure 8.70  Handover interruption time estimation.
www.ebook3000.com

LTE Optimization Engineering Handbook
330
After optimization with properly tuned parameters, less than 50 to 60ms FTP layer interrup-
tion time can be achieved in good RF conditions.
For more handover interruption reduction improvement that aims to shorten the LTE S1 and 
X2 handover interruption time by triggering the path switch (for X2 handover) and the handover 
notify (for S1 handover) messages to MME earlier when the target eNB receives the RA message 
3 from the UE, which is needed to be earlier than the reception of RRC connection reconfiguration 
UE
Source eNB
Target eNB
UE
Source eNB
Measurement report
RRC Connection Reconfig
Random Access Procedure
Target eNB
Handover Command
40–50 ms
30–40 ms
Measurement Report
RRC Connection Reconfiguration
RRC Connection Reconfiguration Complete
RRC Connection Reconfiguration Complete
RRC Connection Reconfiguration 
1st RLC PDU
Last RLC PDU
T304
starts
T304
stops
Minimize 
PRACH 
access latency
RRC Connection Reconfig Complete
UP
interruption
time
Figure 8.71  Control plane (left) and user plane (right) latency.
Figure 8.72  An example of X2 handover UP latency test.

Mobility Optimization
331
complete message from the UE but with the same confidence on the UE presence in the target cell. 
Figure 8.74 shows for the X2 handover case the point when RA message 3 is received in the target 
eNB and where the path switch request will be triggered. The procedures (in circle) that follow 
this point will therefore trigger the DL data path switch ~12 ms earlier.
Figure 8.73  UP handover latency based on the signaling and RLC PDU.
 
UE
Source
eNB
Target
ANR
MME
SGW
RRC:MEASUREMENT REPORT
HO Decision
X2AP: HANDOVER REQUEST
Resource allocation
RRC: RCC CONNECTION RECONFIGURATION
Switch to Target RAN
MAC: CBRA RACH PREAMBLE
MAC: CBRA RACH RESPONSE
RRC CONNECTION SETUP/MSG4
RRC: RRC CONNECTION RECONFIGURATION COMPLETE
RRC CONNECTION REQ/MSG3
MAC: CBRA RACH PREAMBLE
MAC: CBRA RACH RESPONSE
RRC CONNECTION SETUP/MSG4
RRC: RRC CONNECTION RECONFIGURATION COMPLETE
RRC CONNECTION REQ/MSG3
DL data
S1: PATH SWITCH REQUEST
S1: PATH SWITCH REQUEST
Path
Switch
S11: UP update req
X2AP: HANDOVER REQUEST ACKNOWLEDGE
X2AP: SN STATUS TRANSFER
Figure 8.74  Reduction on the S1 and X2 handover Interruption time.
www.ebook3000.com

LTE Optimization Engineering Handbook
332
The system shall be configured to use RA message 3 instead of RRC connection reconfigura­
tion request for initiating intra eNB switch. During incoming intra‐eNB handover execution 
and upon the reception of RA message 3, the RAN use this message as an earlier trigger to 
confirm internal dispatcher of the UE presence in the target cell and initiate the release of 
resources at the source cell. During incoming X2 handover execution and upon the reception 
of RA message 3, the RAN use this as an earlier trigger to send the S1‐AP path switch message 
to MME. During incoming S1 handover execution and upon the reception of RA message 3, 
the RAN use this message as an earlier trigger to send the S1‐AP handover notify message 
to MME.
8.9.2  Inter‐RAT Mobility Latency
For inter‐RAT mobility, UL trigger can be possible to set per QCI in the same way as bad cover-
age DL trigger based on GINR. GINR can be calculated as:
	
GINR
psdRX
psdTX
N
I 	
where psdRX (Received signal PSD), psdTX is the estimated UL Tx PSD based on power headroom 
reports from the UE; N + I is the received noise and interference averaged over the bandwidth.
Measurement‐based and non‐measurement based “InterRAT cell reselection” and “Release 
with redirection” from the LTE network to both UMTS and GSM are supported as shown in 
Figure 8.75. For inter‐RAT mobility latency, timing is an indication only as it is very terminal 
dependent. Cell search time may be reduced if inter‐RAT measurement done before release 
with redirect.
The UE will take much time for cell search. The UE first performs PLMN selection and finds 
its home PLMN where the MCC and MNC of the PLMN identity match the MCC and MNC 
of the USIM’s IMSI. The UE may optionally use information it has previously stored if it is 
available in order to reduce the time needed to select a PLMN.
8.10  ­Handover Failure and Improvement
Mobility procedure can be divided into handover preparation and handover execution 
phases. Handover preparation is the phase in which the target cell assigns the necessary 
radio resources for taking over the connection and sending back a handover command mes-
sage containing the new radio parameters to the source cell. Handover execution phase 
starts when the previously received handover command message is sent to the UE and suc-
cessfully finished after the UE has arrived at the target cell. In most of the cases, handover 
failure could be due to poor radio conditions or badly tuned handover parameters. For 
example, with too little overlap between cells, handover may fail, with too much cell over-
lap, higher interference occurs and cell‐edge throughput can be reduced. So a balance must 
be achieved by adjusting overlap margins and cell sizes. This can be achieved with param-
eters and physical changes.
Downlink mobility issues include RLC failure on SRB1 that UE doesn’t receive RRC recon-
figuration (handover command) or PDCCH decoding error (UE miss detect the PDCCH 
order). Uplink mobility issues include random access failure in the target cell or target cell 
didn’t receive RRC reconfiguration complete message from UE.
If statistic analysis indicates the main reason for low handover success rate in the network 
was due to downlink, it could be either due to the DL RLC transmission for RRC handover 

Mobility Optimization
333
command reaches max transmit attempts or due to PDCCH decoding issue. Downlink should 
be focused to improve the handover success rate by improving RLC robustness, improving 
PDCCH robustness, and reducing downlink interference by means of RF tuning, and so on.
For mobility troubleshooting, handover preparation failures and handover execution failures 
should be identified when monitoring LTE.
In Figure 8.76, the example is about handover preparation failure. The source eNB initiates 
the procedure by sending the handover request message to the target eNB. When the source 
Triggered
UL trigger
DL trigger
(from UE)
IRAT to WCDMA
IRAT to GSM
Handover
A5, B2, B1
Handover
Redirect
300 ms
4–5 s
5–6 s
12 s
PS handover
Bearer setup
LAU/RAU
Bearer setup
LAU/RAU
Bearer setup
LAU/RAU
SIB reading
SIB reading
Cell search
PS handover
Release with
redirect
Radio link
failure
Cell search
Cell search
Release with
Redirect
with NACC (SI)
2–4 s
300 ms
8–9 s
9–11 s
15+ s
PS handover
Blind
Non-blind
Redirect
Bearer setup
LAU/RAU
Bearer setup
LAU/RAU
Bearer setup
LAU/RAU
SIB reading
SIB reading
Cell search
Cell search
Cell search
Figure 8.75  Inter‐RAT mobility latency.
www.ebook3000.com

LTE Optimization Engineering Handbook
334
eNB sends the handover request message, it shall start the timer Trelocprep. Upon reception of 
the handover request acknowledge message the source eNB shall stop the timer Trelocprep, 
start the timer TX2relocoverall and terminate the handover preparation procedure. If there is 
no response from the target eNB to the handover request message before timer Trelocprep 
expires in the source eNB, the source eNB should cancel the handover preparation procedure 
toward the target eNB by initiating the handover cancel procedure with the appropriate value 
for the cause IE.
Here is another example of handover preparation failure as shown in Figure 8.77. If the target 
eNB does not admit at least one non‐GBR E‐RAB, or a failure occurs during the handover 
preparation, the target eNB shall send the handover preparation failure message to the source 
eNB with the cause IE. If the target eNB receives a handover request message containing RRC 
context IE that does not include required information as specified in TS 36.331, the target eNB 
shall send the handover preparation failure message to the source eNB.
Figure 8.78 presents the possible causes of handover failures. Handover preparation may fail 
because the target eNB cannot provide the necessary resources for the handover during con-
gestion or cannot interpret the contents of the handover request message. If the source eNB 
does not receive a response to its X2AP handover request message from the target eNB, the 
source eNB will send the handover cancel message. Handover execution failure that may be 
caused by incorrect parameter settings in the target cell (e.g., PCI collision in the target cell).
From the possible causes for handover degradation, it can be concluded according to the 
mobility optimization steps as shown in Figure 8.79. To better understand what is happening 
with the handovers use a map to plot the locations of the target and each source cell and also 
draw a xx km (nearly triple inter‐site distance) ring around the target to identify the source cells 
with the highest number of failures and add pointers that show the sector’s azimuth. You must 
first check all KPIs for the site, for example, handover oscillation level, noise floor, interference, 
high or low traffic, PCI conflicts exist or not, handover preparation success rate, and execution 
success rate.
E-RAB QoS information
Resources are 
granted by target 
eNB?
Target eNB
Reserve a C -
RNTI for UE
source
eNB
target
eNB
HANDOVER REQUEST
HANDOVER PREPARATION FAILURE
Configure required
resources
Reserve a RACH 
preamble (optional)
Y
HO 
preparation
failure
Input
N
Default 
value for 
Trelocprep
is: 5s
Figure 8.76  Example of handover preparation failure due to Trelocprep expiry.

Mobility Optimization
335
The meaning of the different handover cause value is described in Table 8.32.
8.11  ­Mobility Robustness Optimization
In live network, it can be found that in certain scenarios measurement report messages count 
is significantly higher than number of handovers which indicates inability to execute handover 
quickly. In such scenarios, UE receives ACKs for PHICH and RLC for the measurement report 
but does not receive RRC reconfiguration message. Boxes in Figure 8.80 indicate the range of 
RSRP/RSRQ values where handovers took place easily.
Figure 8.77  Example of handover preparation failure due to no resource granted.
www.ebook3000.com

LTE Optimization Engineering Handbook
336
The next step will further analysis of handovers for triggering event per LTE cluster, cell or 
user. It needs to find that the number of A3‐, A5‐, B2‐based handovers in a live network. 
Mobility optimization feature enabled in RAN targets the following intra‐LTE mobility issues:
●
●Connection failure is due to too early handover: The UE has a connection failure during a hando-
ver procedure or soon (<1s) after a successful handover and if the UE re‐establishes in the source cell
●
●Connection failure is due to too late handover: The UE has a connection failure during a 
handover procedure or after a long stay (>1s) in the same cell and if the UE re‐establishes in 
a different cell, this usually happened just before handover, it was observed that the UE SINR 
was poor and this caused the UE to drag the call in poor radio environment rather than 
handover faster to a neighbour cell with better RSRP
●
●Connection failure is due to handover to wrong cell: The UE has a connection failure during 
a handover procedure or soon (<1s) after a successful handover and if the UE re‐establishes 
in a cell which was neither the original source or the target cell
HO preparation failures
Possible Causes
1. Resources not granted by target eNB
2. Incorrect parameter settings in target
3. Congestion in target cell
4. Target cannot interpret the contents in
    handover request message
5. License issue
6. Target cell down
7. Improper MME configuration
8. Insufficient SR and CQI resources for
    target
HO execution failures
Possible Causes
1. Incorrect parameter settings in target
    (PCI collision in target cell)
2. Hardware faults
3. Unreasonable weight of handover attempt
    to target cells (If handover is triggered too
    late, the source cell SINR can be too low.
    This can result in an abnormal release
     before handover.)
4. Swapped sectors
5. Overshooting
6. Unreasonable neighbor relation
Other reasons for poor mobility
Possible Causes
1. Poor radio conditions 
    (interference)
2. Badly tuned handover parameters
    -Handover hysteresis and time-to-
    trigger settings are required to
    prevent excessive ping-pong
    handovers.
    -Such behavior increases
    signaling, risk of failure, and
    decreases throughput
Figure 8.78  Possible causes of handover failures.
Low HO Succ
HoPre fail
HoExe fail
Scell->Multi-tcell
Scell alarm?
Tcell alarm?
Alarm processing
Overlapping?
N
N
N
N
N
Check X2
definition
Parameter,
earfcn/pci,
external defining
Checking
interference
Y
Control coverage
Y
Y
Check core
configuration,
cut over...
Y
X2 HO?
S1 HO?
Expansion,
distributary,
control coverage
Y
Alarm processing
Check coverage,
power
Tcell
interference?
Single neighbor
Multi Scell->Tcell
Target Cell congest?
Figure 8.79  Mobility optimization steps.

Mobility Optimization
337
Table 8.32  Root cause analysis (X2).
Radio Network cause
Description
Possible Reasons
Cell not available
The concerned cell is not available.
Target cell down
Handover(HO) target not 
allowed
HO to the indicated target cell is not 
allowed for the UE in question
Check blacklisted neighbor list
Invalid MME Group ID
The target eNB doesn’t belong to the 
same pool area of the source eNB, that 
is, S1 HOs should be attempted 
instead.
Check MME group id of source 
and target. Confirm both are 
belongs to same MME group
No radio resources available 
in target cell
The target cell doesn’t have sufficient 
radio resources available.
Target cell congestion during 
failure needs to be checked
Partial HO
Provides a reason for the HO 
cancellation. The target eNB did not 
admit all E‐RABs included in the HO 
REQUEST and the source eNB 
estimated service continuity for the UE 
would be better by not proceeding with 
handover toward this particular 
target eNB.
Target eNB will send HO 
preparation failure message 
with this cause after 
“TRELOCprep expiry” happens 
in source eNB
Reduce load in serving cell
Load on serving cell needs to be reduced.
Applicable for load‐based HO
Resource optimization HO
The reason for requesting HO is to 
improve the load distribution with the 
neighbor cells.
Time critical HO
HO is requested for time critical 
reason i.e. this cause value is reserved 
to represent all critical cases where the 
connection is likely to be dropped if 
HO is not performed.
A5 triggered (interfrequency 
attempt) (TDD‐ FDD) HO. HO 
failure due to poor radio 
condition.
TRELOCprep Expiry
HO preparation procedure is cancelled 
when timer TRELOCprep expires.
Target eNB will send HO 
preparation failure message 
with this cause after 
TRELOCprep expiry happens in 
source eNB
Unknown MME Code
The target eNB belongs to the same 
pool area of the source eNB and 
recognizes the MME Group ID. 
However, the MME Code is unknown 
to the target eNB.
Check the MME code of 
target eNB
Unknown new eNB UE 
X2AP ID
The action failed because the New eNB 
UE X2AP ID is unknown
X2 link status needs to be 
checked
Unknown old eNB UE 
X2AP ID
The action failed because the Old eNB 
UE X2AP ID is unknown
Unknown pair of UE X2AP ID
The action failed because the pair of 
UE X2 AP IDs is unknown
ExistingMeasurementID
The action failed because 
measurement‐ID is already used
Target cell level parameters 
(mainly HO‐event 
configuration) needs to be 
checked
Unknown eNB measurement ID
The action failed because some eNB 
Measurement‐ID is unknown.
Measurement temporarily not 
available
The eNB can temporarily not provide 
the requested measurement object.
www.ebook3000.com

–55
–55
–65
–4
Serving RSRP vs. RSRQ
Serving vs. Neighbor RSRP
Serving RSRP
Serving vs. Neighbor RSRQ
Serving RSRQ
Serving RSRP
Serving RSRP
Serving RSRQ
Neighbor RSRP
Neighbor RSRQ
Neighbor RSRQ
Serving RSRP vs. Neighbor RSRQ
–7
–10
–13
–16
–19
–22
–25
–28
–31
–65
–65
–75
–75
–75
–85
–85
–85
–95
–95
–95
–105
–105
–115
–115
–125
–125
–105
–115
–125
–65
–4
–4
–7
–7
–10
–10
–13
–13
–16
–16
–19
–19
–22
–25
–28
–31
–4
–7
–10
–13
–16
–19
–22
–22
–25
–25
–28
–28
–31
–31
–75
–85
–95
–105
–115
–125
Figure 8.80  Handovers happen in the range of RSRP/RSRQ values.

Mobility Optimization
339
●
●Ping‐pong handover, as known as unnecessary handover or handover oscillation. Typically in this 
scenario, UE may experience ping‐pong handover between two badly overlapped cells. The major 
reason is that two cells have a big overlapped area in which two cells alternate to emanate the 
stronger signal and multiple handovers occur between cell A and cell B within one second after a 
completion of the handover, back and forth, these results in dropped calls. An oscillating UE is a 
UE does repeated handover between two or more cells. The UE performs a handover from source 
eNB to target eNB and then within a certain time performs a handover back again. Oscillating UE 
is harmful due to increased risk for handover failure, packet loss for UM (unknowledge mode) 
connections, causes unnecessary network load, and reduced throughput (Figure 8.81).
If handover is triggered too early, the target cell SINR can be too weak when handover occurs. 
If handover is triggered too late, the source cell SINR can be too low. This can result in an 
abnormal release before handover.
There are six types of handover failure are defined as shown in Figure 8.82, corresponding 
counters/events will peg when the failure cases happen.
For too late handover (case 4), before handover is initiated in source eNB, UE sends RRC con­
nection reestablishment request to re‐establish radio link connection to a non‐source cell. The 
controlling eNB of the cell sends RRC connection reestablishment reject because it does not 
have the UE context and sends X2AP RLF indication to source eNB to report RLF failure. 
Source eNB increments the “HoTooLate” counter.
For too early handover (case 2), the eNB succeeds with handover of a UE to a target cell. The 
UE subsequently lose connection, and the UE does reestablishment in the source cell. The eNB 
sends RLF indicator to the target eNB. The target eNB detects a too early handover, and sends 
a handover report to the eNB.
X2AP RLF indication is shown below, which is from 3GPP TS 36.423.
RLFIndication-IEs X2AP-PROTOCOL-IES ::= {
  { ID id-FailureCellPCI              CRITICALITY ignore	
TYPE PCI  
  { ID id-Re‐establishmentCellECGI       CRITICALITY ignore	
TYPE ECGI    
  { ID id-FailureCellCRNTI	
  CRITICALITY ignore	
TYPE CRNTI    
Cell-A
Too early HO
Too late HO
Cell-B
Cell-C
Wrong cell HO
Handover margin/Offset
Figure 8.81  Abnormal handovers.
www.ebook3000.com

LTE Optimization Engineering Handbook
340
  { ID id-ShortMAC‐I	
CRITICALITY ignore	
   TYPE ShortMAC-I    
  { ID id-UE-RLF-Report-Container	
CRITICALITY ignore	
TYPE UE-RLF-Report-Container   
  { ID id-RRCConnSetupIndicator	
CRITICALITY reject	
TYPE RRCConnSetupIndicator  
   ...
}
HandoverReport-IEs X2AP-PROTOCOL-IES ::= {
  { ID id-HandoverReportType	
CRITICALITY ignore	
TYPE HandoverReportType 
  { ID id-Cause	
CRITICALITY ignore	
TYPE Cause        
  { ID id-SourceCellECGI	
CRITICALITY ignore	
TYPE ECGI        
  { ID id-FailureCellECGI	
CRITICALITY ignore	
TYPE ECGI        
  { ID id-Re‐establishmentCellECGI	
CRITICALITY ignore	
TYPE ECGI    
}
HandoverReportType  ::= ENUMERATED {
  hoTooEarly,
  hoToWrongCell,
  ...
}
The mobility optimization feature optimizes the cell borders based on the observed output 
of the different error cases and builds up statistics about the relation. Parameter changes may 
only take place if enough statistics is gathered. The statistics that is built up is the number of 
occurrences of the four different types of failures.
These data are weighted depending on the cost of the failure and added up per neighbor rela-
tion, and then determine if a change is required to move the cell border, usually adjust the cel­
lIndividualOffset value per relation and applicable on all UE’s in the cell. Figure 8.83 shows a 
method of handover parameters optimization based on irritative calculation. After change, 
evaluate the relative difference between the current situation compared what the last change 
was made. It is worth to note that maximizing the reduction of handover failure rate is not the 
main objective of this feature, instead tries to find the best balance between handover failures 
and unnecessary handover.
Case 1
Too Early Handover, HO not completed 
Case 2
Too Early Handover, HO completed 
Case 3
Too Late Handover, HO initialized
Case 4
Too Late Handover, HO not initialized
Case 5
Handover to Wrong Cell, HO not completed
Case 6
Handover to Wrong cell, HO completed
eNB
UE
Reest.
Target eNB
eNB
eNB
Handover failure
eNB
RLF
RLF
UE
Reest.
Target eNB
Handover
UE
Reest.
Target eNB
Handover failure
UE
Reest.
Target eNB
Third ENB
Third ENB
Handover failure
RLF INDICATION
HO REPORT
eNB
eNB
RLF
UE
Reest.
Target eNB
Target eNB
Handover
RLF INDICATION
HO REPORT
RLF INDICATION
UE
Reest.
RLF INDICATION
RLF INDICATION
Figure 8.82  Handover failures of the six cases.

Mobility Optimization
341
Parameters to be changed in connected mode and idle mode, for connected mode, the 
UE uses event A3 to evaluate entry, the relation between (Mn‐Ms) and cellIndividual­
OffsetEutran is:
	
Mn
Ms
a offset
hysteresisA
cellIndividualOffsetEutran
cell
3
3
IndividualOffsetEutran
Mn
Ms
cellIndividualOffsetEutr
,
;
an
Mn
Ms
,
;	
For idle mode, cell reselection formula is: Rs = Qmeas,s + Qhyst, Rn = Qmeas,n  –  QOffset, 
Rn > Rs; Relation between (Qmeas,n – Qmeas,s) and Qoffset is Qmeas,n – Qmeas,s > Qhyst + Q
offse,. which leads to Qoffset , Qmeas,n – Qmeas,s ; Qoffset , Qmeas,n – Qmeas,s .
8.12  ­Carrier Aggregation Mobility Optimization
Carrier aggregation (CA) is used to increase the bandwidth by combining up to five carriers 
intra‐band or inter‐band, and thereby increase the peak bitrates. CA UE throughput is much 
higher than signal carrier, due to additional carrier, frequency selection and scheduling gain and 
high category UE gain. The UE have one Primary cell (Pcell), this will also be the cell where the 
UE is connected to, from a EPC perspective. The cell that is not the Pcell will be the Secondary 
cell (Scell). Mobility is based on Pcell coverage, there is no changes in cell selection/reselection 
for carrier aggregation. CA configured eNBs are compatible with non‐CA eNBs (for handover, 
etc.), and that non‐CA UE can co‐exist on a cell simultaneously with CA configured UE.
UE uses Pcell to monitor system information, maintain RRC connection, monitor RLF, 
­random access, and so on, all security input and NAS mobility information is communicated 
Gather statistics 
Evaluate statistics
Enough
Statistics?
Yes
No
Change ICO
by dt+1 dB
Yes
dt+1 = 1
dt+1 = –dlast change
dt+1 = –1
Yes
Did results
worsen?
Increase
ICO?
No
Change
required?
Yes
No
Decide on
change direction
Figure 8.83  Handover parameters optimization based on irritative calculation.
www.ebook3000.com

LTE Optimization Engineering Handbook
342
using Pcell. UL/DL carrier corresponding to Pcell is primary component carrier (PCC) and to 
Scell is secondary component carrier (SCC). The Scell operates on a secondary frequency and 
can be configured once the RRC connection is established. Separate UL PC is required for 
­different CC due to difference in propagation condition in non‐contiguous CA and for different 
interference conditions in UL CC in contiguous CA (Figure 8.84).
The similar Pcell and Scell coverage is the precondition to provide CA capability for the UEs. 
Before the second carrier cell goes on air, single‐site verification shall be conducted carefully to 
make sure there are no defects, and second carrier RF optimization tuning shall be done aligning 
to the first carrier coverage. Similar antenna model, height, downtilt and azimuth is preferred 
for multi‐carriers. There are always coverage mismatching due to the separate mounted antennas 
and different bands, which will degraded CA throughput due to poor Scell performance. The 
mitigation is to activate the feature— dynamic Scell selection as shown in Figure 8.85. It is 
worth to note that CA configuration/deconfiguration is performed on RRC level, CA activa-
tion/deactivation is performed on MAC layer.
At attach, reestablishment and incoming handover, the eNB will check CA license, CA neighbor 
cell configuration (i.e., SCell candidate) and UE capability. Figure 8.86 shows SCell selection is 
performed by RRC connection reconfiguration in attach procedure. SCell activation/deactivation 
is performed by MAC control element, which can be shown through RF conditions, resources 
scheduling, and DL/UL throughput, and so on, in driving test. In CA activated state, the UE is 
ready to receive data transfer on the SCell (DL assignments sent on SCell, HARQ ACKs are 
sent to eNB via PCell) and report the SCell’s CSI to eNB via PCell. SCell activate/deactivation 
can be triggered based on “need” or “coverage.” It notes that eNB will not deconfigure but deac-
tivate the SCell when UE goes out of SCell coverage. PCell always changes due to handover, in 
the new PCell, old SCell is removed and new SCell is configured. All of this is done in the same 
RRC reconfiguration message as the handover itself.
For CA mobility, a new measurement event A6 is introduced for CA, an intra‐frequency neigh-
bor becomes offset better than SCell for which neighbor cells on an SCC are compared to SCell of 
that SCC. A6 works in the same way as A3, it reports the strongest cell that matches the configured 
frequency. If service triggered mobility is used to change the inter‐frequency handover thresholds, 
CA will continue to be possible with the new combination of PCell and SCell (Figure 8.87).
PCC
PCell
PUCCH & PUSCH
PDSCH & PDCCH
PDSCH & Optional PDCCH
PUSCH Only
SCell
SCell
PCell
SCell
SCell
SCC
SCC
PCC
SCC
SCC
Figure 8.84  PCC and SCC.
Active Scell triggered
based on buffer status
Deactive Scell triggered based on
buffer status or poor Scell CQI
Not CA configured
CA configured
RRC reconfiguration, add Scell IE. 
CA activated
Activation MAC control element 
Deactivation MAC
control element
RRC reconfiguration, remove Scell IE.
Figure 8.85  Dynamic Scell selection.

Mobility Optimization
343
Figure 8.86  SCell’s configuration and activation and average DL throughput (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
344
0
1
2
3
4
5
Average DL Throughput (Mbps)
Pcell (CA UE)
Scell (CA UE)
Serving Cell
(Non CA UE)
Pcell and Scell
(CA UE - Total)
6
7
8
9
10
11
12
Low CQI of Scell trigger Scell
deactivation
Scell deactivation observed by DL
MAC transport block
4.3
5.3
6.4
11.5
Figure 8.86  (Continued)
Pcell always changes
due to handover
Serving Cell Info: PCI = 68
Handover type:
Intra Frequency PCC: PCI = 79
SCC configuration during handover
SCC: PCI = 79
2. Handover Command
In the new Pcell, old Scell is removed and
new Scell is configured.
RRC reconfig message becomes bigger. 
Pkt version = 7
SIB Mask in SI = 0x00
Interpreted PDU:
{
{
{
{
{
{
{ {
{
1
sCellToAddModList–r10
sCellIndex–r10 1,
cellIdentification–r10
physCellId–r10 79,
dl–CarrierFreq–r10 2100
},
},
sCellToReleaseList–r10
mobilityControlInfo
targetPhysCellId 79,
carrierBandwidth
dl–Bandwidth n50
handovertype intraLTE :
rrc–TransactionIdentifier 0,
criticalExtensions c1 : rrcConnectionReconfiguration–r8
rrcConnectionReconfiguration:
message C1:
value DL–DCCH–Message :: =
PDU Number = DL_DCCH Message, Msg Length = 93
Freq = 5230
SysFrameNum = N/A, SubFrameNum = 0
Radio Bearer ID = 1, Physical Cell ID = 68
RRC Release Number.Major.minor = 10.7.1
Figure 8.87  PCell and SCell handover.

Mobility Optimization
345
As CA is performed at MAC layer, PDCP and RLC are not aware whether a certain packet 
will be transmitted in the PCell or in the SCell. All counters for MAC and physical layer are 
registered on the cell where the data is transmitted. CA expected to increase PDCP throughput 
in the network since a PDCP packet may be sent using multiple cells in parallel. A CA user 
using SCell resources, may therefore increase observed PDPC throughput in the user’s PCell 
but potentially decrease observed PDPC throughput in the SCell.
CA‐related KPIs include accessibility, retainability, DL throughput, the number of configured 
CA UEs, percentage of CA scheduled, percentage of CA traffic, PDCCH utilization, and so on.
8.13  ­FDD‐TDD Inter‐mode Mobility Optimization
LTE supports mobility of TDD/FDD dual band UE during RRC‐connected mode (intra LTE 
handover) and in idle mode (cell reselection), while this UE is moving between LTE TDD cov-
erage area is adjacent to or overlay with LTE FDD area.
FDD‐TDD carrier aggregation combines excellent FDD coverage with large TDD capacity 
that the way of primary cell on FDD Scell on TDD to boost downlink capacity is many opera-
tors’ choice that own spectrums in both LTE modes. Mobility between LTE FDD and TDD will 
be of increasing importance for operators that have spectrum for both LTE modes, allowing 
operators to seamlessly offer mobile broadband services on FDD and TDD spectrum, increas-
ing capacity and improving end‐user experience. FDD < ‐ > TDD mobility is very similar to 
inter‐frequency mobility, including load management. UE Capability of PS handover between 
FDD and TDD is indicated by FGI (bit 30) (Figure 8.88).
Cell selection is priority (LTE FDD high priority) and threshold controlled, when close to 
antenna the UEs will select high band cell, at cell edge the UEs will select low band cell. 
Table 8.33 gives the cell reselection parameters in FDD‐TDD deployment areas.
For FDD‐TDD connected mode mobility strategy, the eNB takes handover decision based on 
radio criterion or for load balancing or offload reason. The way to manage handover preference 
toward a same or different frame structure, that is, TDD‐ > TDD versus TDD‐ > FDD. X2 hand-
over, which is shown in Figure 8.89 is recommended within MME pool area for TDD to FDD 
handover or FDD to TDD handover (TDD and FDD eNB may be mixed in the same pool area).
FDD‐TDD carrier aggregation introduced in 3GPP R12 will be based on existing LTE CA 
mechanisms. TDD cells are typically deployed on higher bands with reduced coverage. The 
short duration of uplink in many TDD deployments (3DL:1UL) decreases further the coverage, 
eight receive antennas can improve TDD cell coverage but there is still significant gap to cover-
age of FDD cells. FDD‐TDD CA allows to keep PCell on FDD with good uplink coverage and 
only use the TDD downlink for boosting downlink peak rate. From the link budget comparison 
D
S
U
D
D
D
S
U
D
D
Secondary cell
TDD
D
D
D
D
D
D
D
D
D
D
U
U
U
U
U
U
U
U
U
U
Primary cell
FDD DL
Primary cell
FDD UL
aggregation
aggregation
aggregation
Figure 8.88  Example of FDD‐TDD carrier aggregation.
www.ebook3000.com

LTE Optimization Engineering Handbook
346
as shown in Table 8.34, it can be seen that UL cell‐edge throughput is around 300 kbps, and 
there are around 4dB difference, which result in much more TDD sites required.
8.14  ­Load Balance
8.14.1  Inter‐Frequency Load Balance
As LTE networks are deployed, operators will have multiple combinations of technologies and 
carriers to serve their subscribers equipped with multi‐mode devices. Operators want to make 
the best possible use of their spectrum while ensuring the best possible QoS to their subscribers. 
One way to achieve this is through ensuring proper balancing of the load across its technologies/ 
carriers.
Table 8.33  FDD‐TDD cell reselection parameters.
Idle in FDD
Idle in TDD
CRP
Start measurement  
RSRP
Cell reselection  
threshold
CRP
Start measurement  
RSRP
Cell reselection  
threshold
To FDD
6
−76 (sIntraSearch:54)
N > S + 4 dB
6
Always
FDD > −112
To TDD
5
−114
TDD > −112, FDD < −116
5
−76
N > S + 4 dB
To 3G
4
−114
3G > −103, FDD < −116
4
−114
3G > −103, 
TDD < −116
UE
TDD
FDD
MME
>carrierFreq
>SIB1 Info
>>TDD Config
Transparent
Container
dl-CarrierFreq
>antennaPortsCou
nt an2
E-RABs Subject to
transfer
PDCP Receive
Status
UL Count Value
DL Count Value
Old eNB X2AP ID
New eNB X2AP ID
>PUCCH-
ConfiDedicated
>> tdd-
AckNackFeedback
Mode bundling
GW
Measurement Report A5
Handover Request
Handover Request Acknowledge 
RRC Connection Reconfiguration
SN Status Transfer
Path Switch Request
Path Switch Request Ack
UE Context Release
Modify
Bearer
Request
1
2
3
4
5
6
RRC Connection Reconfiguration Complete
Figure 8.89  X2‐based handover procedure between TDD and FDD.

 Table 8.34  Link budget comparison. 
Scenario
2600MHz 
20MHz TDD
2600MHz 
10MHz FDD
2100MHz 
10MHz FDD
1800MHz 
10MHz FDD
900MHz 
10MHz FDD
850MHz 
10MHz FDD 
Uplink link budget
Data
VoIP
Data
VoIP
Data
VoIP
Data
VoIP
Data
VoIP
Data
VoIP 
UE output power
23 
Resource blocks (RBs)
18
2
7
2
8
2
8
2
7
2
7
2 
Feeder loss
0 
Power per RB
10.5
20
14.4
20
14
20
14.1
20
14.3
20
14.4
20 
Thermal noise
−174 
RBS noise figure
3 
User bitrate
0.301
0.012
0.301
0.012
0.33
0.012
0.325
0.012
0.309
0.012
0.305
0.012 
SINR
−4
−10.8
−4
−10.8
−4
−10.8
−4
−10.8
−4
−10.8
−4
−10.8 
RBS sensitivity
−122.4
−129.2
−122.4
−129.2
−122.4
−129.2
−122.4
−129.2
−122.4
−129.2
−122.4
−129.2 
Gains (antenna UL + DL)
20 
Jumper loss
0.2 
Body loss
0
3
0
3
0
3
0
3
0
3
0
3 
Penetration loss
18 
Margins (LNF)
6.7 
Max. pathloss unloaded
128
141.3
132
141.3
131.6
141.3
131.7
141.3
131.9
141.3
131.9
141.3 
Utilization
2%
0%
2%
0%
2%
0%
2%
0%
2%
0%
2%
0% 
Interference margin
0
13.3
0
9.4
0
9.8
0
9.7
0
9.5
0
9.4 
Max. pathloss
128
128
132
132
131.6
131.6
131.7
131.7
131.9
131.9
131.9
131.9 
Range
0.32
0.41
0.49
0.57
1.12
1.19 
ISD
0.48
0.62
0.74
0.86
1.68
1.79
www.ebook3000.com

LTE Optimization Engineering Handbook
348
Inter‐frequency load balancing aims to move connected UEs to another frequency within 
LTE established by load relations when or before the serving cell becomes loaded. Inter‐frequency 
load balancing is used to distribute the load across several carriers, traffic will be managed 
across the two LTE carriers. Load balancing can occur across cells either within the same eNB 
or in a neighbor eNB, over X2. It is worth to note that load relations can be automatically and 
dynamically configured of the optimal inter‐frequency. Cell loading information are provided 
to L3 from L2 in order to calculate DL GBR, DL non‐GBR, and PDCCH load. There are three 
steps for load balancing as following.
Step1: A4 threshold starting the measurement for offload. Estimated DL/UL PRB usage per cell 
is updated by new admitted requests and periodic modem PRB usage reporting. In addition 
to the parameters above, the measurement object and Report ConfigID for the inter‐frequency 
load balancing using A4 threshold mechanism need to be defined in the eNB. For the load 
information exchange between eNB is over the X2 interface. Load balancing is triggered 
when current PRB usage exceeds a configurable percentage of total PRBs available in the cell.
Step2: UE selection, which means a number of UEs are selected as candidates for load balanc-
ing. UE candidates for offloading must support inter‐frequency handover, UE candidates 
start with lowest priority for offloading.
Step3: Execution of offloading to target carrier. MME selects unloaded target carrier for UE 
measurements, based on X2 resource status reporting information. For equal bandwidth car-
riers the handover margin can be decided and tuned based on load balancing, for example, 
for 800M and 1800M layers with 10MHz bandwidth, a3 offsets need to be set asymmetrically, 
to prevent skewed load. If the carriers have different bandwidths, the throughput difference 
between layers should be taken into account as well (Figure 8.90).
Load balancing can also be triggered when load in source cell (SC) is above the pre‐configured 
load threshold, and the load difference is larger than the pre‐configured load difference thresh-
old as shown in Figure 8.91. An load balance magnitude to be determined for each target cell 
(TC), suitable UEs need to be moved (selection/reselection) in order to meet the determined 
magnitudes.
8.14.2  Inter‐RAT Load Balance
The feature of inter‐RAT load balance is applied for reducing the risk of UE trapped in over‐
utilized LTE cells unable to provide acceptable performance and reducing the risk of depleted 
3G cells when the ratio of 3G only UE declines. The load balancing features measure the traffic 
Load status
Exchange
load info.
Select
candidates UEs
Load balance
action (handover)
New load
status
Establish
load relations
Step1
Step2
Step3
Figure 8.90  Load balance procedure.
If load_different> 
load_different_thresh, 
load balancing triggered!
load_SC
load_TC1
load_TC2
Source cell
Target cell1
Target cell2
load_different
Figure 8.91  Load balance strategy (example).

Mobility Optimization
349
load in each LTE cell with different frequency and 3G cell. LTE cells with inter‐frequency load 
balance (IFLB) relations exchange traffic load information and also need to monitor own traffic 
load versus an 3G offload threshold.
Figure 8.92 depicts the IRAT load balance strategy. Inter‐frequency load balance attempts to 
distribute traffic evenly between overlaid LTE inter‐frequency cells that cover the same area. 
Inter‐RAT offload attempts to offload LTE traffic above an offload threshold to 3G cells that 
cover the same area.
The trigger for the report of measurement results is a B1 event (neighbor becomes better 
than threshold) for IRAT load balance. The B1 event represents acceptable coverage for offload 
to the 3G target cell.
Reactive load control is triggered when congestion condition is detected during call/bearer 
admission. Purpose of reactive load control is to move some UEs to less loaded inter‐freq/
inter‐RAT carriers or release some UE/bearers to relieve the congestion condition. Congestion 
conditions include number of calls exceed limits, number of modem contexts exceed, number 
of data bearers exceed limits, and number of PRB consumptions exceed limits.
8.14.3  Load Based Idle Mode Mobility
Load balancing aims to move connected UEs to another frequency within LTE when or before 
the serving cell becomes loaded. Cell load is determined by the total UL/DL PRBs consump-
tion. The idle mode load distribution between layers helps reduce the need for the connected 
mode load balancing. The idle mode distribution is possible to adjust with the thresholds and 
by that the load distribution. Basic load management should primarily be done through steer-
ing of UEs between frequency layers in idle mode.
Good idle mode distribution can be achieved by setting a higher cell reselection priority to 
the higher frequency band, cell‐center UEs will camp on the higher band and cell‐edge UEs will 
camp on the lower band, distribution can be controlled through parameter threshServingLow.
For equal priority based cell reselection, it needs to increase qOffsetCellEUtran for reselec-
tion to non‐congested neighbor cells, or decrease qOffsetCellEUtran for reselection to high 
capacity cell.
Priority‐based cell reselection aims to ecourage easier cell reselection in idle mode. If inter‐
frequency carrier/inter‐RAT frequency is with cell reselection priority higher than the serving 
frequency, then decrease threshXHigh for that frequency relation. If inter‐frequency carrier/
inter‐RAT frequency is with cell reselection priority lower than the serving frequency, then 
decrease threshXLow for that frequency relation (Figure 8.93).
Frequency
Distance
3G cells
LTE cells
Double arrows are IFLB relations; 
single arrows are inter-RAT relations; 
F1
F1
F2
F3
Figure 8.92  IRAT load balance strategy (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
350
Load‐based adaptation of cell reselection thresholds can push cell‐edge UEs down to lower‐
priority layer, as shown in Figure 8.94.
This is able to provide the capability to adjust cell selection settings according to cell load, 
thus helping to balance traffic and load among cells. Load information exchange over X2 inter-
face, allowing the serving eNB to gather load information from the neighboring cells through 
the X2 interface. Automatically adapt SIB3 cell reselection parameters based on serving cell 
load, which used to favor idle UEs cell reselection to less loaded neighbour cells, when serving 
cell is heavily loaded. This feature can be used to impact intra‐frequency, inter‐frequency and/
or IRAT reselection.
Here is an example for F1 (high priority) and F2 (low priority) inter‐frequency reselection. 
Operator can specify the value to use at different load levels for the following parameters: q‐
Hyst, threshServingLow, threshXLow, threshXHigh, s‐nonIntraSearch, s‐nonIntraSearchP, and 
s‐nonIntraSearchQ, and so on, which are shown in Table 8.35.
According to the above parameters settings, downlink/uplink average and edge throughput, 
the ratios of UE distribution in F1 and F2 band are shown in Table 8.36.
Cell radius
Higher priority
Lower priority
Higher priority
Lower priority
RSRP
RSRP threshold +
UE measurement
uncertainty
UEs camping on blue cell
UEs camping on orange cell
Figure 8.93  Load‐based idle mode mobility.
Automatically adapt SIB3
cell reselection parameters
based on serving cell load.
RSRP Serving Cell
time
2
1
4
3
Rn > Rs
qHyst
Qrxlevmin(SIB1)
+Qrxlevminoffset(SIB1)
+Pcompensation(SIB1)
+sNonIntraSearch(SIB3)
Qrxlevmin(SIB5)
+Qrxlevminoffset(SIB1)
+Pcompensation(SIB5)
Traditional “S” criteria
qrxlevminoffset = 0 if same PLMN
tReselectionEUTRAN
or tReselectionRAT
Eutran cell is reselected
with other freq
RSRP equal priority
eUTRAN cell
qOffsetCell
LTE equal priority
cell - criteria not met
UE starts Inter freq meas
(and iRAT) for equal
priority cell reselection
UE starts ranking cells
Srxlev > 0
Figure 8.94  Load‐based adaptation of cell reselection thresholds.

Mobility Optimization
351
8.15  ­High‐Speed Mobile Optimization
The higher the velocity that the UE experiences, the more severe the effect of fast fading that 
the system suffers. Therefore, it is more difficult to achieve the same performance in a high‐
speed scenario as in a normal speed one. 3GPP has defined high‐speed and performance limits 
in case of up to 350km/h UE speed. Fast‐moving UEs cause Doppler shifts (frequency offsets) 
in the received uplink signal as shown in Figure 8.95. Since the UE synchronizes to a Doppler‐
shifted signal in downlink, and in uplink it will be roughly doubled, the Doppler shift is propor-
tional to the velocity of the UE and to the carrier frequency. In this case the eNB uplink signal 
receiver suffers from a huge Doppler shift, which causes severe performance degradations. 
Table 8.35  Parameters settings for different load levels.
Reselection
IFHO
F2‐ > F1
F1‐ > F2
F2‐ > F1
F1‐ > F2
F1‐band, high priority
Load ratio: (F1:F2 = 6:4)
threshXHigh = −92
sNonintraSearch = −90,
threshServingLow = −93,
threshXLow = −125,
a2 = −83,
a5−1 = −80,
a5−2 = −92
a2 = −90,
A5−1 = −93,
A5−2 = −125
F1‐band, high priority
Load ratio: (F1:F2 = 95:5)
threshXHigh = −102
sNonintraSearch = −100,
threshServingLow = −103,
threshXLow = −125,
a2 = −68,
a5−1 = −65,
a5−2 = −102
a2 = −100,
A5−1 = −103,
A5−2 = −125
F1‐band, high priority
Load ratio: (F2:F1 = 99:1)
threshXHigh = −105
sNonintraSearch = −103,
threshServingLow = −106,
threshXLow = −125,
a2 = −65,
a5−1 = −62,
a5−2 = −105
a2 = −103,
A5−1 = −106,
A5−2 = −125
F2‐band, high priority
Load ratio: (F2:F1 = 4:6)
sNonintraSearch = −86,
threshServingLow = −88,
threshXLow = −102,
threshXHigh = −87
a2 = −85,
a5−1 = −88,
a5−2 = −102
a2 = −83,
a5−1 = −86,
a5−2 = −87
When F1, F2 with equal 
priority
qHyst = 1,
qOffsetFreq = 3,
qHyst = 1,
qOffsetFreq = 3,
a2 = −83,
a5−1 = −86,
a5−2 = −88
a2 = −85,
a5−1 = −88,
a5−2 = −86
Table 8.36  Performance of different parameters settings.
DL/UL avg 
THP (Mbps)
DL/UL edge  
THP (Mbps)
HO
IFHO
Ratio in  
F (idle)
Ratio in  
D (idle)
F1‐Hi prio −1 
(60%; 40%)
18.9/9.3
3.9/0.05
176
61
42%
58%
F1‐Hi prio −2 
(95%; 5%)
18.6/13.9
4.6/4.9
118
7
11%
89%
F1‐Hi prio −3 
(99%; 1%)
18.0/14.6
4.7/7.1
106
1
4%
96%
F2‐Hi prio −1 
(60%; 40%)
22.2/8.8
4.4/3.5
203
101
57%
43%
F1, F2 with equal  
priority
21.7/6.6
5.2/0.05
107
20
90%
10%
www.ebook3000.com

LTE Optimization Engineering Handbook
352
Frequency offsets rotate the received signal constellation. If it is too high, the constellation has 
rotated more than 360 degress and the receiver can’t resolve which frequency offset it is.
Scenarios with Doppler shift are mainly line‐of‐sight scenarios where the mobile has a veloc-
ity component into the direction of the eNB. Typical scenarios refers to high speed trains where 
the eNB is mounted near to the tracks or highways where the cars are driving fast and the eNB 
is located quite near to the highway.
The formular of maximum Doppler shifts (fd) and Doppler shift fs(t) are:
	
f
f
f
v
c
f
t
d
c
u
c
d
s
2 57 10
2 69 10
350 3 6
3 10
1705
9
9
8
.
.
/ .
.
,
Hz
f
t
d cos
	
where fc
u, fc
d are UL and DL highest carrier frequencies. v is the UE travelling speed, c is the 
speed of light, and θ(t) is the signal arrival angle shown in Figure 8.96.
The formular is that the UE already sees a shifted signal in DL and does frequency synchroniza-
tion on that and then transmitting in UL the eNB sees roughly twice the shift. Besides, when a 
UE approaches and passes by the cell antennas will cause a quick change in the frequency 
­offset, that is when a UE moves first toward the eNB and then moves away from it causing posi-
tive and negative Doppler shifts respectively. It is difficult to track and compensate for large 
and fast varying frequency offsets of the UE in this scenario.
The effect of the frequency offset is that the subcarriers are no longer orthogonal since the 
side lobes of the interfering subcarriers no longer has a zero crossing at the main lobe of the 
It is needed to estimate the Doppler
spread of the channel, i.e. rate at which
the amplitude and phase of the received
signal changes. Doppler spread occurs
when there are many signal paths with
different Doppler shifts, which are
added constructively or destructively at
the receiver antennas.
Perfect frequency sync
Frequency offset
Railway track
Minimum
Doppler Shift
Maximum
Doppler Shift
eNodeB A
eNodeB B
Ds/2
Ds/2
Dmin
θ
Maximum
Doppler Shift
UE travelling with speed
Doppler shift + ∆f
Doppler shift + ∆f
Doppler shift – ∆f
v
Figure 8.95  Doppler shift.
Reference symbols
∆T = 0.5 ms
PUSCH
symbols:
≈
1750 Hz on PUCCH
1000 Hz on PUSCH
2∆T
1
Subframe (1 ms)
Figure 8.96  Frequency offset compensation for PUSCH/PUCCH.

Mobility Optimization
353
desired subcarrier. High‐frequency offsets cannot be correctly estimated with the frequency 
offset estimators on PUSCH and PUCCH in LTE. Time difference between reference symbols, 
ΔT, gives aliasing at frequency larger than 1/2ΔT, which is shown in Figure 8.96.
For PUCCH the frequency offset will affect the orthogonality of the orthogonal cover used 
for format 1/1a/1b (the orthogonality is used to distinguish different users signal using the 
same cyclic shift). When the frequency offset is severe, these users will disturb with each other. 
When the frequency offset is very high, users using different orthogonal cover may be impos-
sible to separate, that is, the orthogonal cover will look the same at the receiver. To be able to 
maintain a connection at high Doppler, the eNB must be sure that the UE transmits the peri-
odic CQI at every occasion. DRX cycle must be set according to CQI period, to ensure the eNB 
receives CQI periodically.
8.15.1  High‐Speed Mobile Feature
In order to estimate and compensate for high frequency offsets, the high‐speed UE feature is 
introduced in a live network. To mitigate problems in high‐speed deployments eNB shall 
­support a Doppler shift estimation for each UE based on the received signal in different uplink 
physical channels (PRACH, PUSCH, and PUCCH) and signals (SRS). Those estimates shall be 
provided to RRM. Some features deal only with enhancing link level performance for high 
speed users by intoduction of eNB UL receiver improvments (e.g., Doppler shift estimation). 
For example, antanna tuning‐tilt for high‐speed scenario is calculated below:
	
/
*360/ 2*
/2
_
The tilt of antenna á
atan H D
b
e tilt	
where H = antenna height – rail height, D = coverage range, b = beam width.
For high‐speed mobile UE, the mobility characterization will suffer the issues such as frequent 
handover, ping‐pong handover, high handover failure rate and drop rate, group handover, and 
signaling congestion. It is suitable to use frequency diversity mode rather than frequency‐selec-
tive scheduling, or transmit diversity rather than spatial multiplexing for a UE at a high speed.
Distinguish high‐speed UE via speed estimation by layer1 or layer 3 method, for L1 method, 
Doppler frequency estimation is used, that will cost 100 ms for estimation. For L3 method, 
according to v = d/t, UE determines mobility state based on the number of cell changes which 
occur within a defined period.
Judge UE moving direction and set different priorities to forward cell and backward cell as 
shown in Figure 8.97, which is benefit in accelerating handover and alleviating ping‐pong, for 
example, CIO = 3 dB for forward cell, CIO = 0 dB for backward cell as below configuration.
●
●If UE is moving from west to east:1‐ > 2, 2‐ > 3, 3‐ > 4, CIO = 3; 2‐ > 1, 3‐ > 2, 4‐ > 3, CIO = −3
●
●If UE is moving from east to west:1‐ > 2, 2‐ > 3, 3‐ > 4, CIO = −3; 2‐ > 1, 3‐ > 2, 4‐ > 3, CIO = 3
Besides, railway network plan is usually adpot the “Z” plan shown in Figure 8.97, that can 
overcome multipath fading.
Combined cell shown in Figure 8.98 is another important feature in high‐speed scenario, 
which configures multiple sector carriers (RRUs) to belong to same cell. All sector carriers are 
considered as one logical cell, with same PCI, same CRS, and system information as macro cell 
to fit to light load. Drive test results showing throughput gain when using combined cell com-
pared to separate cells.
It is still worth noting that downlink power allocations in terms of reference signal boosting 
can cause unnecessary large coverage areas and handover execution problems, so typically RS 
boosting is avoided for the high‐speed scenarios, and uplink power settings with full pathloss 
compensation while maximizing the signaling robustness is also suggested.
www.ebook3000.com

LTE Optimization Engineering Handbook
354
8.15.2  Speed‐Dependent Cell Reselection
Cell reselection performance optimization is as similar as handover. The main idea is that 
speed up the cell reselection in order to have the UEs always under the best cell, ping‐pong cell 
re‐selections need to be avoided by, for example, speed‐dependent cell re‐selection feature. 
The speed‐dependent scaling of cell reselection criteria is used to influence the cell reselection 
criteria for fast‐moving UE. It helps the UE to respond more quickly to cell changes when mov-
ing at high speed. A UE may enter three different mobility states: normal mobility, medium 
Cell 1
Cell 1
Cell 1
West
West
earlier
earlier
earlier
earlier
earlier
earlier
East
East
Cell 2
Cell 2
Cell B
Cell D
Cell C
Cell A
Cell 2
Cell 3
Cell 3
Cell 3
Cell 4
Cell 4
Cell 4
Figure 8.97  UE movement and eNB site planning.

Mobility Optimization
355
mobility, and high mobility as shown in Figure 8.99. The medium and high states are specified 
by the related parameter nCellChangeMedium and nCellChangeHigh resepectively defining 
number of cell reselections within sliding time window tEvalution [240sec] that determines the 
UE shall enter mobility states medium or high.
High‐mobility state criteria is detected if number of cell reselections during time period 
tEvaluation exceeds nCellChangeHigh. Medium mobility state is detected if number of 
cell reselections (n) during time period tEvaluation exceeds nCellChangeMedium and 
does not exceed nCellChangeHigh. Consecutive cell reselections between two cells are not 
taken into account: the UE does not count consecutive reselections between the same two 
cells into mobility state detection criteria if same cell is reselected just after one other 
reselection.
0
0
0
Throughput [Mbps]
Throughput [Mbps]
5
15
10
20
25
30
Time (s)
0
5
15
10
20
25
30
Time (s)
10
10
20
20
30
40
50
60
70
Separate Vs Combined cell DL Throughput
Separate Vs Combined cell DL Throughput
Combined Cell
Combined Cell
Separate Cells
Separate Cells
Figure 8.98  Combined cell.
www.ebook3000.com

LTE Optimization Engineering Handbook
356
8.15.3  PRACH Issues
High‐frequency offset impact on PRACH also causes problems. Random access preambles are 
generated from same root sequence using cyclic shifts, on the receiver, the detector correlates 
the received signal with the predefined preambles. Frequency offsets will cause correlation 
peaks for other cyclic shifts of the same sequence and too high‐frequency offsets causes the 
original peak to be entirely replaced by another peak, thus may cause false detection as shown 
in Figure 8.100.
Fortunately, high‐speed detection can be realized through this PRACH characteristics. If the 
weighted power sum caused by Doppler shift and spread is greater than a given threshold, the 
UE is high speed.
nCellChange
High
NCRItEvaluation
nCellChange
Medium
normal
medium
high
tEvaluation
nCellChgHigh > n > nCellChgMed
n > nCellChgHigh
Enter
“Normal”
Enter
“Medium”
Enter
“Medium”
Enter
“High”
tHystNormal
time
Figure 8.99  Mobility states determination of a UE.
Additional peak
Main peak
Impact of high
frequency offset
f=625 Hz
f= 0 Hz
f=1250 Hz
Figure 8.100  Impact on PRACH.

Mobility Optimization
357
The high‐speed UE feature applies restricted set of cyclic shifts on PRACH (i.e., the RRC 
parameter highSpeedFlag is set to true), which restricts the number of cyclic shifts that can 
be used for each sequence to make room for higher‐frequency offsets and allows for 
extended detection intervals including additional peaks in matched filter output to ensure a 
properly working PRACH detector at high Doppler shifts. The restricted set of cyclic shifts 
choose a set of cyclic shifts that allows for secondary peaks, the probability of false detec-
tions of the preambles is reduced. In this case, three detection intervals are needed, one for 
the main peak and one for each of the secondary peaks, compared to the unrestricted set 
where only one detection interval is needed. This means that at least three times more 
RACH root sequences are required for a given number of preambles. This increases the 
number of root sequences needed for PRACH in a cell, but improves the PRACH detector 
performance and makes it possible to estimate the frequency offset on PRACH. In general, 
the restricted set can reduce in main peak of matched filter output that does not cause 
missed detection and additional peaks in matched filter output of receiver will not cause 
false detection (Figure 8.101).
The restricted set preambles are generated by masking some of the cyclic shift positions in 
order to retain acceptable false alarm rate while maintaining high detection performance for 
very‐high‐speed UEs. After frequency offset estimation from preamble detector, the result will 
be sent to PUSCH receiver for compensation. The supported cell ranges for restricted set are 
shown in Table 8.37.
UE experiences
higher frequency
offset due to
Doppler shift
which causes false
and aliased peaks.
Main peak
cyclic shift x
Main peak
cyclic shift y
Detection
interval y
Detection
interval x
the additional peaks in a
matched filter are handled by
extended detection interval
Additional peak
cyclic shift x
Cyclic shift y removed
in restricted set
Extended
detection
interval x
Figure 8.101  Unrestricted set and restricted set.
Table 8.37  Supported cell ranges depending on restricted set of cyclic shift length (delay spread = 5.2us).
Ncs Config  
index
Ncs, cyclic 
shift length
length of single 
cyclic shift, μs
km
Ncs Config  
index
Ncs, cyclic 
shift length
length of single 
cyclic shift, μs
km
0
15
9.1
1.4
8
68
59.6
9.0
1
18
12
1.8
9
82
73
11.0
2
22
15.8
2.4
10
100
90.2
13.5
3
26
19.6
2.9
11
128
116.9
17.5
4
32
25.3
3.8
12
158
145.5
21.8
5
38
31
4.7
13
202
187.4
28.1
6
46
38.7
5.8
14
237
220.8
33.1
7
55
47.2
7.1
www.ebook3000.com

LTE Optimization Engineering Handbook
358
In a live network, UL and DL Doppler shift might not a big problem if eNB have 
“High‐speed UE” feature, but Doppler spread will degrade UL and DL performance. Cell 
merge will outperform non‐cell merge because energy overlay gain over bi‐direction 
Doppler loss. The parameter highSpeedFlag can be got from SIB2 and RRC connection 
reconfiguration message. Figure 8.102 gives an example of high‐speed PRACH param-
eters in SIB2.
8.15.4  Solution for Air to Ground
Analyze how is LTE standard affected by Doppler shift in case where UE is moving with speed 
that airplane can reach (relative to the ground), maximum cell size that can be achieved (if cur-
rently supported 100km is not enough) and link budget for that solution, interference with 
services in neighboring frequency bands, and required output power, and so on.
Example for SIB2 extract:
prach-Config
{
rootSequenceIndex 264,
prach-ConfigInfo
{
prach-ConfigIndex 3,
highSpeedFlag TRUE,
zeroCorrelationZoneConfig 9,
prach-FreqOffset 4
}
},
(RACH root sequence)
Range: 0...837
Default: 0
(PRACH high speed flag)
Range: 0 (false), 1 (true)
Default: 0
(PRACH configuration index)
Range: 3...53
Default: 4
(PRACH cyclic shift)
Range: 0...15
Default: 1
(PRACH frequency offset)
Range: 0...94
: 
Default: –
Figure 8.102  Example for SIB2.
0
50
100
150
200
250
300
100
110
120
130
140
150
160
170
180
190
Distance (km)
Path loss (dB)
Pathloss according to the empirical propagation model (EPM-73)
fc = 1 GHz
fc = 1 GHz
fc = 2 GHz
fc = 5.8 GHz
fc = 2 GHz
fc = 5.8 GHz
hRBS=100 m
hAirplane=10000 m
Figure 8.103  The cell range of air to ground coverage.

Mobility Optimization
359
Cell size is around 150 to 250 km, which will bring large round trip times (1 ms for 150 km 
cell radius), and impact on PRACH detector, scheduling, time advance commands, signaling, 
and so on. For transmission gap in TDD, there needs to be larger than maximum round 
trip time.
High Doppler shift,
Downlink (from base station to airplane):
	
f
f
v
c
f
f
d
c
d
c
dl
dl
kHz for
GHz
1
1
	
Uplink:
	
f
f
f
v
c
f
f
f
d
c
c
d
c
c
ul
dl
ul
dl
kHz for
GHz
2
1
	
Path loss and range
High altitude for airplanes is the line‐of‐sight propagation and long reflection region.
The cell range depends on carrier frequency as shown in Figure 8.103, for 140 dB path loss: 
127 km @ 1 GHz, 59 km @ 2 GHz, 22 km @ 5.8 GHz.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
360
9.1  ­Traffic Model of Smartphone
Network traffic is mainly driven by smartphone applications, today’s smartphone applications 
mostly generate relatively small data bursts. It is important to understand the traffic character-
istics for the network optimization purposes.
Some years ago traffic was, if not homogeneous, at least a bit easier to predict. For many years, 
for example, voice has been an important service with very predictable behavior. Today, with the 
advent of mobile broadband there is really no such service, that is, a service with very predicta-
ble behavior that dominates data transfer. Instead, many use mobile broadband all the time to be 
able to remain connected to their favorite social network. This connection is often done using 
apps that may be designed without consideration of cellular network characteristics.
The nature of app traffic is unpredictable. Also, no two users probably have the same user 
patterns (update frequency depends on how many friends you have, what they do, OS, etc.). 
Smartphone’s trigger huge number of small packet in LTE network, always‐on applications 
require keep‐alive message, frequent transitions between LTE RRC states and causing signaling 
increase.
Numerous applications require that an always‐on mobile‐broadband experience is seam-
lessly delivered and presented to the end user. Furthermore, many applications may be designed 
without specific consideration of the characteristics of cellular networks, and consequently 
may exhibit traffic profiles not well suited to those connections. When attempting to provide 
such always‐on connectivity at the RAN level, trade‐offs are often encountered between UE 
power consumption, user experience, data transfer latency, network efficiency, and control 
plane signaling overhead. Furthermore, the optimum trade‐off point may vary according to 
application characteristics, or their activity or status.
Current trends indicate that the above issues will only increase in significance over the com-
ing years. It is imperative, therefore, that the ability of LTE to efficiently handle and manage 
such traffic is continually improved.
On the other hand, applications characterization drives understanding of demand funda-
mentals, for example, web page size, packet size, busy hour attempts, avarage call throughput, 
signaling, and bearer traffic generated by application (Figure 9.1).
This control/user plane activity daily profile shows significant differences for different terminal 
types. Normally, 30% to 60% of all smartphone and M2M terminals are practically “always on,” 
having user plane activity during all hours of the days. This is due to periodical reporting activ-
ity for most M2M terminals and regular background activity for most smartphone terminals. 
PC terminals are usually not “always on,” but their usage is mostly bound to actual user interaction, 
for example, web browsing or social networking. Therefore, user plane activity for PC terminals 
differs significantly from that of smartphones and M2M.
9
Traffic Model of Smartphone and Optimization

Traffic Model of Smartphone and Optimization
361
In such traffic model scenario, the maximum number of active users depends on the capacity 
licenses purchased by an operator. In the case, the maximum number of users is starting to 
limit user traffic inactivity timer that has mentioned before can be tuned to release inactive 
users faster. The parameter dictates the time each UE stays connected without downloading or 
1K
100
100
90
90
80
80
70
70
60
60
50
50
User plane
Avarage call throughput
Video
Streaming
Audio
Streaming
Gaming
MMS
SMS
Busy hour call attempts
Email
Web
Browsing
Interactive
Video
PC-centric network
Mixed network
Smartphone-centric network
40
40
Control plane
30
20
10
0
0
10
20
30
10K
100K
Session Count
Session Count
Session Count CDF
Total Load CDF
1M
10M
Session Payload (bytes)
100%
0%
20%
40%
60%
80%
Figure 9.1  Model reflects variability of mobile application usage.
www.ebook3000.com

LTE Optimization Engineering Handbook
362
uploading data before it is shifted to idle mode. Reducing the value from 61 to 10 seconds can 
increase signaling load due to increased number of RRC setup attempts but can also reduce the 
drop rate as less number of users are connected unnecessarily with a chance of dropping the 
connection as shown in Figure 9.2. This can also reduce congestion in the system due to limitation 
of connected user’s license in the network.
By decreasing inactivity timer, users can be moved earlier from active state to idle state. 
However, this will have impact on user experience, as there are more frequent session estab-
lishments in the case of new data transmission. By changing inactivity timer, an operator can 
compromised between fast‐release system resources due to inactivity and impact on user experience 
due delays caused by frequent session establishments.
In addition, quality of service (QoS) mechanism controls the service performance, reliability 
and usability of a mobile service, because different bearer traffic requires different QoS. The 
following part is about QoS mechanism.
9.1.1  QoS Mechanism
The policy control routing function (PCRF) deploys a set of operator‐created business rules 
that dictate the dservice QoS strategy of the evolved packet system, which is shown in Figure 9.3. 
90
80
70
60
50
40
30
20
10
0
0
1000
2000
3000
4000
5000
6000
7000
21-01-14 0:00
22-01-14 0:00
23-01-14 0:00
24-01-14 0:00
tInactivityTimer
21-01-14 0:00
22-01-14 0:00
23-01-14 0:00
24-01-14 0:00
tInactivityTimer
LTE_02_RrcSetup_Att
Users_connected
RRC Attempts
70
Connected Users
60
50
40
30
20
10
0
70
60
50
40
30
20
10
0
Figure 9.2  When inactivity timer decreased, users reduced, RRC attempts increased.

Traffic Model of Smartphone and Optimization
363
The PCRF communicates with the PGW data and push appropriate policy rules across the Gx 
interface. These QoS requirements can be passed by the PGW to the SGW over the S5/S8 
interface. The SGW communicates these requirements to MME over the S11 interface. Finally 
the MME communicates the QoS requirements to the eNB over the S1‐MME interface. The 
QoS requirements of the EPS bearer are implemented in the radio network with the UL/DL 
scheduler and transport network with IP differentiated services code point (IP DSCP) and 
Ethernet priority bits (Pbits).
In LTE network the service QoS is implemented between UE and P‐GW. The QoS frame-
work for UL/DL basically consists of the following building blocks, a radio network, a transport 
network, the core network, configuration management system, the scheduler for UL/DL data 
inside the eNB, and the function to control the whole QoS handling. LTE QoS architecture is 
defined in TS 23.402 and 23.203 standards, UE negotiates its capabilities and expresses its QoS 
requirements during a SIP session setup or session modification procedure. QoS generally 
refers to the following parameters, QoS class identifier (QCI). VoLTE requires to support 
External IP Networks
IP connectivity
IP connectivity
IP connectivity
PGW
SGW
S11
S1
eNodeB
IMS Layer
Access Layer
3GPP Bearer Protocols
SIP
To Request / Grant
Access QoS for
handling the session
media
To Request / Get
feedback on Loss of
Access Qos except
handling for
Emergency / priority
Calls
MMTEL App
P-CSCF
Rx
Gx
PCRF
PGW
MME
QoS parameters:
Gx
S5/S8
PCRF
QCI/ GBR/ MBR
Figure 9.3  LTE QoS mechanism, Rx and Gx interface.
www.ebook3000.com

LTE Optimization Engineering Handbook
364
dedicated service data flows (SDFs1) assigned with desirable QCI for VoIP SIP signaling and 
RTP packet. In LTE, services are mapped to SDF as shown in Figure 9.4, several SDFs can be 
treated as an SDF aggregate, all SDFs in an SDF aggregate must have the same QCI/ARP. SDF 
aggregates mapped to UL/DL EPS bearers which uniquely defines EPS bearers.
Traffic flow template (TFT) defines rules so that UE and network knows which IP packet 
should be sent on particular dedicated bearer. An UL TFT in the UE binds an SDF (or SDF 
aggregate) to an EPS bearer in the uplink direction, a DL TFT in the SGW binds an SDF (or 
SDF aggregate) to an EPS bearer in the downlink direction. Every dedicated EPS bearer is asso-
ciated with a TFT to classify the packet. It usually has rules on the basis of IP packet destina-
tion/source or protocol used. The TFT can allow all packages or filter on specific IP address 
and/or TCP/UDP port, which is shown in Figure 9.5.
UE negotiates its capabilities and expresses its QoS requirements during a SIP session setup 
or session modification procedure, like media type and bit rate, direction of traffic, packet size, 
packet transport frequency, usage of RTP payload for media, types, and bandwidth adapta-
tion etc.
The QoS concept as used in LTE networks is class‐based, where each bearer type is assigned 
one QoS class identifier (QCI) by the network to ensure proper QoS for bearer traffic in LTE 
networks. QCI is used to determine packet forwarding treatment, it can be used to mark pack-
ets with DSCP. 3GPP has standardized 9 QCI values and mapping to resource type (GBR, 
non‐GBR), priority, packet delay budget and packet error loss rate (Table 9.1).
Besides QCI, allocation and retention priority (ARP) is used to decide whether bearer estab-
lishment or modification request can be accepted in case of resource limitations, ARP can also 
be used to decide which bearer(s) to drop during resource limitations, and has no impact on 
packet forwarding treatment. The ARP allocated to both the default bearer and the IMS signal-
ing bearer should have a high value this minimize the risk of deactivation of these two bearers 
that should be always established until the UE disconnects or detaches from the networks. For 
video telephony, voice bearer has a higher ARP, and video to another bearer has a lower ARP. 
In a congestion situation, the eNB can then drop the video bearer without affecting the voice 
bearer. This would improve service continuity.
Linked EPS bearer ID (L‐EBI): each dedicated bearer is always linked to one of default 
bearers.
L‐EBI tells dedicated bearer which default bearer it is attached to. (L‐EBI = EBI)
The above description is shown in Figure 9.6.
Currently a QoS mapping do exist today in both 3G and LTE but is not aligned between the 
two different radio access technologies. 3GPP TS23.401 has defined mapping between standard-
ized Rel 8 QCIs and pre‐Rel 8 QoS parameter values.
1  SDF: An aggregate set of packet flows associated with an application service. In case of the VoIP service, the SIP 
based IMS signaling and the RTP based voice media flows together build the service data flow.
UL Service Data Flows
DL Service Data Flows
Service Requests
PCRF
Gx
APN-AMBR
PDN GW
eNB
UE-AMBR
UE-AMBR
UE
Radio Bearer
L1/L2 configuration
L1/L2 configuration
Packet Filter
EPS Bearer QoS
- GBR: QCI, ARP, GBR, MBR
- Non-GBR: QCI, ARP
Figure 9.4  SDF.

PGW
UE
Bearer #1
Bearer #2
Bearer #3
TFT
TFT
TFT
TFT
TFT
TFT
Figure 9.5  TFT.
Table 9.1  Standardized QCIs.
QCI
Resource type Priority
Packet delay  
budget
Packet error 
loss rate
Example Services
1
GBR
2
100 ms
10−2
Conversational voice
2
4
150 ms
10−3
Conversational video (Live streaming)
3
5
300 ms
10−6
Non‐conversational video (Buffered streaming)
4
3
50 ms
10−3
Real time gaming
5
Non GBR
1
100 ms
10−6
IMS signaling
6
7
100 ms
10−3
Voice, video (live streaming), interactive gaming
7
6
300 ms
10−6
Video (Buffered streaming)
8
8
TCP‐based (e.g., www, e‐mail, chat, ftp, p2p file 
sharing, progressive video, etc.)
9
9
Notes:
1	 Packet delay budget (PDB), one-way between UE and gateway.
2	 Packet loss rate (PLR) is only air loss counted.
3	 VoIP is a GBR service, which means that VoIP users are prioritized against MBB users in the same network.
4	 Default bearer is set up with QCI 9 (for non-privileged users) or QCI 8 (for premium users).
5	 Guaranteed bit rate (GBR), the minimum guaranteed bit rate per EPS bearer. Specified independently for UL and DL.
6	 Maximum bit rate (MBR), the maximum guaranteed bit rate per EPS bearer. Specified independently for UL and DL.
7	 APN-aggregate maximum bit rate (A-AMBR), limits the aggregate bit rate that can be expected to be provided 
across all non-GBR bearers and across all PDN connections of the APN. Specified independently for UL and DL.
8	 UE-AMBR limits the aggregate bit rate that can be expected to be provided across all non-GBR bearers among 
APNs of a UE. Specified independently for UL and DL
www.ebook3000.com

LTE Optimization Engineering Handbook
366
For uplink, the scheduling of the traffics is important to set correct priority per QCI, and also 
allocate the bearers into logical channel groups (LCG) in such way that the intended scheduling 
strategy will be used in the UL. LCG mapping in eNB and associated signaling are depicted in 
Figure 9.7.
9.1.2  Rate Shaping and Traffic Management
Wireless networks bandwidth changes constantly and it becomes important to support traffic 
shaping or bit rate adaptation to guarantee high QoE. Traffic shaping provides a mean to 
control the volume of traffic being sent into a network in a specified period (bandwidth throt-
tling), or the maximum rate at which the traffic is sent (rate limiting). This control can be 
accomplished in many ways and for many reasons; however, traffic shaping is always achieved 
by delaying packets. Rate shaping in EPS is described in 3GPP TS 23.107 as the so‐called token 
bucket algorithm. The rate shaping function can be seen as a virtual bottleneck that throttles 
QoS of EPS bearers
Qos class identifier (QCI.0–255)
Priority
Non-GBR
GBR
QCI 1–4
AMBR
GBR
TFT
ARP
L-EBI
QCI 5–9
A-AMBR
UE-AMBR
TFT
ARP
L-EBI
QCI 5–9
A-AMBR
UE-AMBR
APN
IP address
ARP
Pre-emption capability
(shall not trigger pre-
emption, may trigger
pre-emption)
(Per bearer)
Allocation and retention priority (ARP)
Default Bearer
Dedicated Bearer
Dedicated Bearer
ARP used for call admission control
Pre-emption
vulnerability
(not pre-emptable,
pre-emptable)
(Per bearer)
Priority
level
(0–15)
(Per bearer)
Resource
type
Packet loss
rate
Packet delay
budget
Figure 9.6  QoS profile.
UE
rrc Connection Reconfiguration
rrcConnectionReconfigurationComplete
Includes pdcp-SN-Size, UM/AM, sn-
FieldLength, t-Reordering,
logicalChannelConfig > priority, and
logicalChannelGroup
LCID:1
LCG0
LCG1
LCG2
LCG3
LCID:2
LCID:x
LCID:y
LCID:z
LCID:w
LCID:q
QC19
QC18
QC17
QC15
QC11
SRB2
SRB1
eNB
LCG mapping example
INITIAL CONTEXT SETUP RESPONSE
MME
INITIAL CONTEXT SETUP REQUEST
(E-RAB Level Qos parameters > QCI, ARP)
QoS Mapping RNL/TNL
Scheduler: Priority/LCG
TNL: DSCP
Figure 9.7  Uplink QOS mapping.

Traffic Model of Smartphone and Optimization
367
the output rate of that buffer to a certain peak burst rate and to a certain average bit rate. The 
tokens are consumed by the data packets, if there are at least as many tokens in the bucket, 
the packet is transmitted. This is the nechanism that shaping the aggregate traffic for a user to 
the aggregate maximum bit‐rate (AMBR).
First is admission control for E‐RAB requests. For non‐GBR type E‐RABs admission con-
trol is simplified since packets are forwarded on a best‐effort basis. However, GBR‐type  
E‐RABs requires more elaborate admission control. Request is rejected if the request 
exceeds available resources. Admission control may consider many different types of 
resources (shared channel, control channel, transport network resources, memory, etc). 
After that, active queue management (AQM) is working, which can be viewed as packet‐
level congestion control. It can, for example, drop packets to indicate a congested state to 
the source at an early stage. GBR queues handled by AQM are not congested, and the sched-
uler has time enough to serve the queues. Then is data rate shaping concept which function 
is delaying packets of the data flow so they conform to MBR or UE‐AMBR, using a token 
bucket as shown in Figure 9.8.
Bucket size, b
R
Buffered before sent to next link
Token rate, r
Incoming packets
Token bucket
Token,
representing the
allowed data
volume
Incoming E-RAB Requests
Admission Control
Max Threshold
Active Queue Management
Queue length > Max: Always drop
Queue length > Min: Never drop
Min < Queue length < Max: Some drops
Min Threshold
AMBR/MBR
Rate Shaping
Traffic rate
Scheduling
Rate Shaping according to a token
bucket, based on AMBR or MBR
(ΣRx ≤ AMBR or R ≤ MBR)
Incoming Rate (Rin)
Rate after packet shaping
(Rshaped)
Figure 9.8  Rate shaping.
www.ebook3000.com

LTE Optimization Engineering Handbook
368
Rate shaping can be seen as an artificial resource limit, resulting in a longer queue if maximum 
bit rate is violated. The token rate is set to the DL‐AMBR value for DL and to the sum of UL‐
AMBR and all GBR values for UL. The bucket size is selected so that sufficiently large packets 
are allowed in order to not reduce the efficiency/capacity of the air interface.
Standardized 3GPP QoS parameters are realized by using QCI and ARP in LTE and EPC as 
well as using DiffServ code points (DSCP) in LTE, EPC, and IMS. ARP decides whether new 
bearer modification or establishment request should be accepted due to resource limitations 
considering the current resource situation. For GBR bearers the QoS Profile additionally 
includes a guaranteed bit rate (GBR) and a maximum bit rate (MBR). Further, all Non‐GBR 
bearers of a UE are limited by an aggregated maximum bit rate, UE AMBR,2 also part of the 
QoS profile (Figure 9.9).
APN‐AMBR shared by all non‐GBR bearers with the same APN, downlink bandwidth man-
agement is done in PDN GW and uplink bandwidth management in UE, UE‐AMBR shared by 
all non‐GBR bearers of the UE.
Bearers and the associated establish/modify signaling procedures are required to reserve 
resources (processing + transmission capacity) before SDFs mapped to that bearer can be 
accepted into the network.
On the backhaul nodes, the network may encounter traffic drops, and poor voice and video 
quality due to lack of prioritizing and congestion management in the backhaul nodes. To allow 
traffic separation in transport network, gateways and LTE RAN translate from bearer‐level 
QoS (QCI) to transport level QoS (DSCP) (Figure 9.10).
From the core network the main important parameter for QoS are received, such as the QCI, 
DSCP, and ARP values. These values are used for QoS translation to find the proper scheduling 
attributes such as the scheduling strategy, mapping of QCIs to logical channel groups (LCG) 
for uplink scheduling based on the data as configured by the OSS configuration management 
system in a so‐called QCI table. DSCPs are used for layer 3 routing and prioritization of differ-
ent traffic types but also used for mapping to P bit (Priority Bits, the values of which are used 
for prioritization by transport equipment handling the Ethernet layer) and queues for layer 2 
2  The UE AMBR is used in eNB to limit the bit rate of a UE and it is defined by the subscription. The core network 
uses APN AMBR, which is the aggregated maximum bit rate allowed across all non-GBR bearers associated with the 
same APN. APN AMBR is not visible in RAN.
Traffic Class
Signalling Indicator
Traffic Handling Priority
Transfer Delay
SDU Error Delay
GBR
Quality of
Service Class
Identifiers
MBR / AMBR
Allocation Retencion Priority
GBR
MBR
Allocation Retencion
Priority
...
..
QCI (Quality of service class identifier,
per bearer);
GBR (Guaranteed bit rate, per bearer);
MBR (Maximum bit rate, per bearer);
ARP (Allocation and retention policy,
per bearer);
AMBR (Aggregated maximum bit rate,
for all bearers for a UE)
Set by PDN-GW
per bearer
Set by HSS
per UE
AMBR
Pre-Rel8 QoS
per bearer
Rel8 QoS
per bearer
Rel8 QoS
per UE
Figure 9.9  QoS profile.

Traffic Model of Smartphone and Optimization
369
traffic handling on the access transport network, which enabling the transport network to 
­prioritize between different data flows over the S1 interface.
DSCP indicates what forwarding treatment, or per‐hop behavior (PHB), shall be applied at 
each node or router along the path. PHBs can be implemented by employing a range of queue 
service and/or queue management disciplines on a node’s or router’s output interface queue. 
The PDN GW and SGW use the QCI information to set the correct DSCP values on the signal-
ing traffic. The DSCP attribute of the QciProfilePredefined defines the mapping between QCI 
and DSCP. Operator controls QoS by defining QCI’s and related characteristics, mapping ser-
vices to QoS profiles, packet filters and bearers, mapping QCIs to DSCP (IP layer) and mapping 
DSCP’s to priority bits (ethernet layer). This corresponds to mapping from RAN to transport 
and IP network (Figure 9.11).
Packet forwarding treatment in transport network is selected based on the DSCP carried in 
the tunnel header (IP). The recommended QoS mapping is shown in Table 9.2.
DSCP is mapped with QCI to realize QoS in LTE network, an example is shown in Figure 9.12.
The eNB scheduler is an essential QoS enabler. DL and UL are treated separately. In DL, the 
priority is simply determined per QCI, traffic can be separated per QCI and a different treatment 
QCI
QCI
DSCP
DSCP
DSCP
3GPP
QoS
Profile
(PCRF)
3GPP
QoS
Profile
Initialize/
Upgrade/Downgrade
3GPP QoS Profile
Ethernet
pBits (UL)
Ethernet
pBits (DL)
Ethernet
pBits (UL)
Packet Core
Ethernet
pBits
Transport
Ethernet
pBits
Transport
Ethernet
pBits
Transport
QoS Scheduling
eNodeB
UL/DL
Radio
Scheduler
Figure 9.10  PCRF controls End‐2‐End QoS including radio and transport.
QCI
IP datagram
Ethernet
frame
Ethernet header
p-bits
(Transport) IP header
DSCP
DSCP
Data
Data
Takes place in devices
on edge between
L3 and L2 network
Mapping
function
Mapping
function
EPC/LTE QoS Profile
MBR/GBR
ARP
Takes place in
RBS and AGW
Figure 9.11  QCI mapping at DSCP and P/bit level.
www.ebook3000.com

LTE Optimization Engineering Handbook
370
per QCI can be applied. In UL, it is determined per LCG, and based on the currently established 
dominant bearer of the LCG to ensure that traffic types are separated in the uplink, traffic 
separation must be ensured between the different data flows within the UE. The QCI of that 
dominant bearer can be different from UE to UE.
The mapping of a radio bearer (or logical channel) to a logical channel group is done at radio 
bearer setup time by the eNB based on the corresponding QoS attributes of the radio bearers 
such as QCI. QCIs can be mapped to different LCGs, then buffer status reporting from the UE 
Table 9.2  Recommended QoS mapping.
Traffic Type
DSCP
P‐bits
DSCP code
4 CoS
3 CoS
Network Synch
LU
7
54
1
1
Routing, network control
CS6
6
48
2
QCI5–IMS Signaling (Non‐GBR)
CS5
6
40
S1AP/X2AP‐Inter‐node Signaling
CS3
6
24
QCI1–GBR Conversational Voice
EF
5
46
QCI3–GBR Real Time Gaming
AF41
5
34
QCI2–GBR Conversational Video (Live Streaming)
AF42
5
36
QCI4‐GBR Non‐Conversational Video (Buffered Streaming)
AF43
5
38
QCI6‐Non‐GBR TCP Specific Services
AF31
4
26
3
2
OAM Access and Bulk Data
CS2
4
16
QCI7‐Non‐GBR Conversational/Speech & Live Streaming
AF11
2
10
4
3
QCI8‐Non‐GBR TCP’Premium bearer’
AF12
2
12
QCI9‐Non‐GBR TCP Default Bearer
AF13
2
14
Voice
Unused
Control(CS4)
COS2(CS3)
COS3(CS2)
Default(BE)
Default(BE)
COS1(EF)
Video
High Priority Data
Regular Priority Data
Low Priority Data
IMS Signaling
1
2
3
4
5
6
7
8
9
Guaranteed Bit Rate
Non Guaranteed Bit Rate
QCI
transport
IMS Core
Figure 9.12  DSCP mapped with QCI.

Traffic Model of Smartphone and Optimization
371
is done for traffic types separately (UE reports an aggregate buffer status for the combination 
of radio bearers in a logical channel group. The eNB knows the radio bearers contained in the 
group and their priorities). The UE prioritizes internally between logical channels according to 
logical channel priorities (derived from QCI). The parameter controlling the mapping of LCG 
to QCIs is logicalChannelGroupRef. In the uplink, the UE has four LCGs, which groups together 
traffic of different logical channels. So a LCG consists of one or more QCIs. For this reason it 
is important to correctly configure the LCGs. This limitation is applied by 3GPP to keep the 
buffer status report (BSR) format small in the uplink MAC layer, the buffer status report is sent 
per LCG and not per logical channel. It also reduces the number of queues required to be 
­supported in the UE side for uplink traffic separation (Figure 9.13).
9.1.3  Traffic Model
As we know, smartphones make it easy for people to surf the web and watch online videos, 
leading to much higher bandwidth use; tablet and notebook devices will send data even higher. 
iPad‐like devices will chew even more bandwidth than the smartphone because of its larger 
screen, which is driving bearer and signaling traffic growth. Video, web browsing, and audio 
streaming will dominate bearer traffic on wireless web, especially user generated content 
(video, photos, data backup) will stress the uplink. Detailed traffic model incorporating average 
user behaviors and key application characteristics. For each application, specific characteristics 
and session attempt rates were estimated.
When UE has attached with the LTE network, there are both idle users and connected users. 
From traffic model perspective, the UE states are connected (UE that is RRC_connected or 
ECM_connected) and idle (UE that is RRC_idle, ECM_idle). The model for packet data service 
session consists of one or more subsessions,3 which are the sequences of user activities through-
out a particular application. The field based characteristics of each application are defined in 
order to estimate user plane model, which is shown in Figure 9.14. Traffic profile is mainly 
defined by:
●
●Duration of simulation – define in seconds length of simulation
●
●Number of subscribers – number of users with given traffic profile
3  If the dormancy timer is larger than the off-time, then a call may consist of several subsessions. If the dormancy 
timer is smaller than the off-time, then one call is composed of only one subsession.
eNB downlink
eNB uplink
DRBn
DRBn
UE uplink
DRB1
DRB1
DRBo
Strict Priority/WFQ per
sector
Strict
Priority/WFQ per Ue
Strict
Priority/WFQ per sector
DRBo
QoS
Aware
QoS
Aware
QoS
Aware
Ue
Scheduler
SRB1/2 is mapped
to LCG 0
Figure 9.13  Schematic overview of downlink and uplink scheduling.
www.ebook3000.com

LTE Optimization Engineering Handbook
372
●
●User type of creation – constant or poisson
●
●Non‐real‐time services parameters: number of packet calls, call volume, reading time, number 
of datagrams in packet call, size of datagram, time between datagrams, and so on.
Take an example of inter‐packet arrival time comparison between Youtube and FTP. The 
mean inter‐packet time of FTP is 0.96 ms, Youtube is 15.9 ms. The maximum inter‐packet time of 
FTP is 0.89 seconds, Youtube is 1.29 seconds. Around 96.6% of Youtube ethernet packets are 
1414 bytes, this corresponds to raw video packet size of 1356 bytes, while the mean FTP packet 
size is 1402 bytes.
9.2  ­Smartphone‐Based Optimization
Smartphone experience includes response time, always on friendly, and battery life, and so on, 
which cause challenges to existing LTE networks. The key to good smartphone experience is 
that UE should maintain active RRC connection; the number of RRC connected users sup-
ported by eNB is an important metric for estimating whether eNB is smartphone‐enabled. 
When UE maintains active RRC connection for longer times, UE battery life and increased 
handover signaling load needs further consideration.
Always‐on applications need to send and receive small packets frequently to keep IP con-
nectivity open—it is called “heart beat” or “keep alive.” Typical frequency is once per minute, or 
once every few minutes. The amount of data is very small, <<1 kB.
9.3  ­High‐Traffic Scenario Optimization
It is common that networks are configured for low‐load and single‐user performance; however, 
high‐traffic situations occur daily, and the network must be configured to support all these 
events at the same time. The higher traffic, the more denser the network is needed, and the 
more challenges for controlling the inter‐cell interference and physical layer optimization. 
Figure 9.15 depicts the performance degradation of high‐traffic scenario.
volume
volume
duration
PC
Smartphone
...
Application
Mix
xx
xx
xx
Outcome
p
q
r
Avg per subscriber metric
%
%
%
Streaming Video
Handset
Device→Appl
mapping
BHCA
BHCA
BHCA
BHCA
DL throughput
...
Gaming
Web browsing
Figure 9.14  Traffic model estimated.

Traffic Model of Smartphone and Optimization
373
With LTE having more and more users, the traffic in some areas have a sharp increase during 
peak events and then some KPIs such as access rate, scheduling request, and/or CQI resource, 
PDCCH CCEs utilization in this area changed sharply. LTE high capacity is focused on:
●
●Control channel dimensioning (PUCCH/PDCCH resources, such as PUCCH allocation 
request for CQI/scheduling request resource could not be granted)
●
●UL noise rise
●
●PRB utilization/cell throughput capacity
●
●CPU processor load, RRC connection setup intensity (due to UE releases by inactivity or UE 
releases by RLC supervision), incoming handover intensity and paging requests, and so on
●
●Connected users license
UL interference increases with a
higher amount of users.
The network is starved
Which consumes all DL power and
leads to power blocking
user license limit causes spill
over to user
The served users are reduced
Poor CS/PS Accessibility
High amount of RRC requests. Leads
to high loaded
Figure 9.15  The performance of high traffic.
www.ebook3000.com

LTE Optimization Engineering Handbook
374
Typical high‐traffic scene including college scene and large scale entertainment activities 
(concert/match…).
As compared to slightly higher peak traffic events, parameters changes can help improve 
performance in high‐traffic scenario. After parameters changed depicted in the following 
chapters, the accessibility success rate can be more than 80% as compared to 50%, retainability 
success rate can be more than 95% as compared to 85%. DL throughput can be more than 
2 Mbps as compared to 1 Mbps.
9.3.1  Resource Configuration
When connected users increase, CPU processor, SRS resources, PUCCH resources, or PDCCH 
resources reach to the intensity limit that will impact the network performance. When high load 
happened, there will be RRC connection setup rejection, incoming handover preparation 
request rejection, and drop calls to cause the KPIs degradation. The load management algo-
rithm dynamically sets the permitted intensity limits for RRC connection setups, incoming 
handover, and pagings based on continuous CPU measurements. When connected users 
increase, control signaling increases, when control signaling is high enough, data transmissions 
decrease, due to increased resource usage for non‐data delivery. When data transmission 
decreases, users stays longer in RRC connected state causing the number of connected users to 
increase. The number of served users will decrease and non‐served users will consider the radio 
link to be broken and do reestablish/reconnect causing control signaling to increase (Figure 9.16).
Usually the number of users will limit with CPU loading, PUCCH resources and SRS 
resources, and so on. CPU loading and the number of users are a strong correlation, when CPU 
load reached 85% (the number of users more than 250 as an example of TD‐LTE, 20 MHz band-
width), it will result in a RRC request to refuse. PUCCH resource constrained will lead to the 
RRC establishment failure and insufficient CQI, and SR resources will cause RRC connection 
reject issue and incoming handover preparation request rejection. When the number of users 
is more than 250, SRS resource allocation failure may be happened and that will lead to the 
RRC establishment failure (Figure 9.17).
Accessibility success is degraded because PDCCH/PUCCH resources are at the maximum 
limit. PDCCH is used for UL/DL scheduling assignments, for example, PUSCH/PDSCH 
resource indication, transport format indication, HARQ information, and PUCCH/PUSCH 
power control commands. PUCCH is used for transmitting scheduling request, HARQ ACK/
NACK, and CQI. UE is allocated scheduling request and CQI resources during setup proce-
dure, and the resources are kept as long as UE is UL synchronized. UE is not allowed to connect 
to a cell if there’s no free scheduling request resources. Retainibility and throughput are 
degraded because of lack of resources and increased interference during the peak event.
Capacity
limit hit!!
Cell throughput
Connected users
Control signaling
“Served users’
Time/load
Figure 9.16  Loading versus performance.

Traffic Model of Smartphone and Optimization
375
For UL control channel resources
●
●PUCCH: nRB, PUCCH depends on number of scheduling request, HARQ ACK/NACK and CQI 
resources. PUCCH is allocated by 2 RB at the band edges (RB‐pair), time domain sharing. 
Each PUCCH is assigned to a UE with a periodicity deciding which subframe UE can access 
PUCCH (default periodicity for CQI is 80 ms, scheduling request is 10 ms)
●
●PRACH: nRB,PRACH in 1 radio frame is independent of bandwidth and is fixed for different 
cell range
For DL control channel resources
●
●PDCCH: nRE,PDCCH depends on CFI
●
●PCFICH: nRE,PCFICH in one radio frame is 160, independent of bandwidth and # of 
antenna ports
●
●PHICH: nRE,PHICH in one radio frame depends on bandwidth and is fixed for different 
bandwidth
●
●PBCH: nRE,PBCH in one radio frame is 240, independent of bandwidth and # of 
antenna ports
Table 9.3 gives the recommended resource parameters for high‐traffic sites.
9.3.2  Capacity Monitoring
In the E‐UTRAN system, resources requiring capacity monitoring are divided into three parts: 
wireless resources, equipment resources, and transmission resources. This part will focus on 
the wireless resources.
If the evaluation results show capacity overload, corresponding suggestions can be found in 
Figure 9.18.
0
50
100
150
0%
20%
40%
60%
80%
100%
0%
10%
20%
30%
0
100
200
300
1
2
3
4
5
6
7
8
0
0.5
1
0
50
100
150
CPU loading
RRC congestion
No. of users
No. of users
RRC congestion due
to PUCCH resource
allocation failure
No. of users
RRC congestion due
to SRS resource
allocation failure
Figure 9.17  CPU loading, PUCCH resources, and SRS resources with increased users.
www.ebook3000.com

LTE Optimization Engineering Handbook
376
If the active user license utilization is greater than 80%, it needs to expand the license capacity 
or add a baseband board. If the active user license utilization is greater than 80%, there are a 
great number of online users and most have no data transmission. In this case, adjust the user 
inactivity timer base on the operator’s strategies to adjust the number of users in the RRC_
connected state.
If the physical resource block (PRB) utilization is greater than 80% and the CPU usage also 
reaches 80%, it needs to expand the board capacity. If the PRB utilization is greater than 80% 
and the CPU usage does not reach 80%, perform flow control on cell resources.
If PUCCH or SRS resource utilization is greater than 70%, turn on the PUCCH adaption 
switch or add more cells. Also it is needed to make sure that the eNB can automatically adjusts 
the number of PDCCH symbols based on the CCE load.
If the total number of preambles exceed 75 to 100 times per second in busy hours, adjust the 
PRACH backoff algorithm or even start the flow control mechanism on the radio interface to 
smooth the RACH load peak and decrease the average RACH delay. At the same time, considering 
capacity expansion is required.
Table 9.3  Resource parameters for high‐traffic sites.
parameters
Recommend Default Comments
noOfPucchSrUsers
200
32
noOfPucchCqiUsers and noOfPucchSrUsers determine the 
number of resources for CQI and SR
noOfPucchcqiUsers
0
32
Aperiodic CQI will be used instead
CommonSrPeriodicity
20
10
pdcchCfiMode
2
0
increase PDCCH PRB
inactivetimer
30
61
reduce RRC release, it is currently set to 10 s, lowering this 
should allow more users to access the network
timer T302
10
5
time between two consecutive RRC attempts in case that 
first attempt is rejected due to congestion
tPollRetrans ul(dl)
SRB/DRB
80
50
reduce RLC signaling by increasing polling interval 
in UL/DL
start
END
Y
Y
Y
Y
OptimizeConfiguration
(e.g.Optimize RB#,
sounding period)
PUCCH,SRS,PDCCH
Utilization>75%
Optimize
inactivity timer
N
N
2. Add cells
N
1. Add Active
User License
DL PRB
Utilization>80%
Active User license
Utilization>80%
Figure 9.18  Capacity monitoring method.

Traffic Model of Smartphone and Optimization
377
9.3.3  Special Features and Parameters for High Traffic
In case of extreme high capacity, it needs to take all actions to avoid overflow in the system as 
degrading performance for the end‐users. This special features for high traffic involves many 
different aspects such as dimensioning, parameter optimization and software features.
If number of admitted users becomes higher than the system can handle, this will lead to that 
the users in the system gets little throughput. The high cell load causes each user already in the 
system to generate even more load. When number of users increases, the DL data payload 
drops after reaching a certain level of users. For high‐traffic sectors, the feature of call admis-
sion threshold can be changed to more than 90% on all these sectors to allow for more users to 
connect to LTE, thereby reducing call failure rate.
Overload control is the key to ensure a good flow of users in the system. It is needed to 
­control the arrival rate of new users. By just letting all users to access the network will in the 
end cause the network to stall with consequences. In overload situations it will always be better 
to serve the users in the network before allowing new users to enter. At high capacity it needs 
also to ensure that voice users can always access, packet domain users can afford to wait in such 
congested situations. The features for high traffic are shown in Figure 9.19.
The dimensioning perspective is also important. Keep control of interference and maximize 
the carrier capacity, keep track of your network bottlenecks, and expand capacity in time. Try 
to be one step ahead when it comes to expand capacity in the radio network.
GBR admission control ‐ To ensure that the QoS is maintained for GBR bearers in the system. 
A headroom is created to allow for fluctuating radio conditions and mobility, also be used to 
control the ratio between GBR and non‐GBR traffic.
Priority paging ‐ At the eNB, the load control and overload protection mechanisms determine 
if any paging messages need to be discarded. If discards are necessary due to high paging 
load or high CPU processing load, the paging messages with highest priority are handled first.
Load based access barring ‐ Uses barring information from SIB2 broadcast messages to inform 
the UE of the congestion level in the system.
To release inactive UE at high load handover ‐ Automatically alleviates PUCCH resource 
exhaust at high load, to improve accessibility in high‐load networks, increase efficiency of 
› Dimensioning
› Maximize network capabilities
› Reduce overhead
› Control interference
› Block new access requests
› Control Arrival rate
› Maximizing carrier
  Efficiency
– Cater for traffic increase
– MIMO / CA /UL COMP / 4way
   RX-div
– Apply admission control
– GBR Admission control
– Priority Paging
– CA based IFLB
– Idle mode settings
– Dynamic Load Control
– Release of inactive UE at handover
– Load based Access Class Barring
– Admission triggered IFLB
– Service/Priority triggered
   IF HO
– Load based uplink time
   alignment timer adjustment
– Monitor capacity bottle necks
– IRAT Offload from LTE
– PDCCH Link adaptation
– PDCCH Power Boost
– ICIC / IRC
– Frequency selective scheduling
– Parameter optimization
Overload
Control
Figure 9.19  Features for high traffic.
www.ebook3000.com

LTE Optimization Engineering Handbook
378
PUCCH scheduling request resource usage. There are two parameters needed to be consid-
ered. One is inactivity timer value to 4 sec for high load eNB’s to reduce load on high capacity 
sites. The other is the time alignment timer (TAT, a timer used for supervision and control 
of uplink synchronization, range, 0, 500, 750, 1280, 1920, 2560, 5120, 10240[ms], 0 means 
UEs always in sync), which is needed to set to an operator controlled value for new UEs, it 
means that these UEs will go out of sync after TAT has expired. The feature has a larger gain 
in handover intense areas as reducing inter‐cell interference, as fewer UEs are connected at 
cell border (Figure 9.20).
The time alignment timer that will (re‐)start every time that a time alignment command is 
received. If the time alignment timer expires, the UE concludes that prior to any uplink trans-
mission the random access procedure must be used to obtain uplink sync and all PUCCH 
resources and any assigned SRS resources will be released.
PDCCH link adaptation (LA) could be used in high traffic scene. If no LA is used, 8 CCEs 
are always required to reach the cell edge. Actually, many users are also likely to require a 
less robust channel coding on PDCCH than the maximum 8 CCEs. PDCCH link adaptation 
can increase efficiency by dynamically assigning CCEs based on link quality. So PDCCH LA 
margin is introduced in LTE, which is added to PDSCH for PDCCH link adaptation, curent 
value is fixed 10 dB in all radio conditions. As many of the UEs don’t require 8 CCEs, reduc-
tion in the PDCCH link adaptation offset reduces the number of medium and good radio 
condition UEs, which are allocated 8 CCEs. It is recommended to reduce the fixed 10 dB 
margin to 3 dB.
RLC parameters also impact performance in a high‐load cell. The transmitting side of the 
RLC connection can request a status message through a poll request. Upon expiry of this 
timer, the transmitting side will consider any PDUs, which have not been positively acknowl-
edged for retransmission. Poll retransmit timer is triggered when the sender doesn’t get an 
acknowledgement back from the receiver about an earlier poll request regarding reception 
of successful PDUs. Default value is 50 ms for RLC (DRB) and 45 ms for SRB, it can be 
changed to 200 ms will give the receiver more time to acknowledge receipt of PDUs, thus 
lowering the need for retransmission from the sender. The parameter Max_Retx_Threshold 
determines the number of times a packet is retransmitted at the RLC layer. The objective 
here is to reduce the number of DL RLC retransmissions (default value is 32, recommend 
changing is to 16) for high load cell, that is, congested sites where resources can be freed up 
by reducing this number.
Still, UE timers and eNB timers need to be modified in a high‐load cell to improve call failure 
rate. For example, increase T300 from default 400 ms to 1000 ms, changing T302 value from 4 s 
Inactivity Timer (10 s)
TAT
TAC
OUT-OF-SYNC
UE RELEASE
DL TRAFFIC
UE SETUP
ALLOC PUCCH
RELEASE PUCCH
NO UL RESOURCES USED EXCEPT RANDOM ACCESS
PUCCH RESOURCES USED
Figure 9.20  Two timers setting of high load cell.

Traffic Model of Smartphone and Optimization
379
to 8 s, increase T301 from default value of 400 ms to 1500 ms, changing T304 value from 1 to 
2 s, and changing T311 from 5 s to 3 s, and so on. eNB timers are vendor specific, need to be 
aligned with UE timers.
9.3.4  UL Noise Rise
The UL noise rise is the key limiting resource in a scenario with many users. It is the amount of 
users active in RRC_connected state that cost resources. Each user consumes part of the UL 
noise rise even though no or very small amount of data is being transmitted. The consequence 
is that cell shrinks, uplink coverage decreases, and as a result, calls are dropped, accessibility 
suffers, throughput is starved. UL noise rise can be observed by:
●
●Distribution of the SINR values calculated for PUCCH/PUSCH
●
●The measured noise and interference power on PUSCH, according to 36.214 of the SINR 
values calculated for PUSCH
●
●The measured noise and interference power on PUCCH, according to 36.214
For a high‐load cell, α factor (i.e., pathloss compensation factor for PUSCH) should be set to 
default 0.8 to ensure that cell‐edge UEs won’t transmit at higher power (increasing interfer-
ence), which in turn forces other UEs to transmit with a higher power.
p0NominalPucch and p0NominalPusch can be used to adjust power control target, it will trade off 
between coverage and capacity. Lowing this should help to improve UL noise rise 
interference.
Current setting of the two parameters are as following (Figure 9.21):
●
●p0NominalPucch = −116 dBm, higher value can cause high UL interference in high load condition
●
●p0NominalPusch = −96 dBm (should be reduced to default −103dBm to reduce UL interference 
peaks at high load)
9.3.5  Offload Solution and Parameter Settings
This part investigates parameter settings to determine if more optimization can be achieved 
and if some of the settings can be applied market wide to improve high‐capacity cell 
performance.
High PDCCH CCEs utilization
In general, PDCCH CCEs utilization above 75% indicates high PDCCH CCEs utilization. 
High PDCCH CCEs utilization can be caused by large number of active UEs, and/or poor 
­coverage. RRC connection setup failure/incoming handover preparation failure under a high‐
capacity condition usually has high PDCCH utilization behind it. High PDCCH CCEs 
utilization indicates the SRB traffic is using the majority of the scheduling opportunities and 
leaves very little opportunities for DRB traffic under high‐load conditions. The eNB is limited 
on CCEs during low throughput.
Scheduling request and/or CQI resource congestion
A UE is allowed to connect to a cell if there are free scheduling request and CQI resources. 
When a UE locates at high‐traffic cell, scheduling request, and/or CQI resource congestion can 
be caused by large number of users. Even sometimes it was accompanied with retainability 
degradation, which indicated a drop caused by MME side. The operator needs to configure the 
number of PUCCH resources for a scheduling request and CQI to control the trade off between 
the number supported users and the uplink peak throughput.
Solution of offloading traffic
www.ebook3000.com

LTE Optimization Engineering Handbook
380
Besides adding carrier/site to balance the high load, the solution of offloading traffic is as 
­efficient way that is summarized below:
●
●By mobility allignment: It can be done by encouraging easier cell reselection in idle 
mode, aims to increase qOffsetCellEUtran for reselection to non‐congested neighbor 
cells for equal cell reselection priority, decreases qOffsetCellEUtran for reselection to 
high‐capacity cell, for priority‐based cell reselection, adjusts parameter threshXHigh and 
threshXLow, and, encouraging early handover in connected mode, aims to increase 
­cellIndividualOffsetEUtran for a certain EUtranRelation to push some traffic to neighboring 
non‐congested cells.
–130
110
115
120
125
130
Lsa,cellrange [dB]
135
140
145
150
–125
–120
–115
–110
–105
–100
–95
P0= –95
P0= –119
P0= –115
P0= –111
P0= –107
P0= –103
P0= –99
5000
0
10000
15000
20000
25000
–62
–64
–66
–68
–70
–72
–74
–76
–78
–80
–82
–84
–86
–88
–90
–92
–94
–96
–98
–100
–102
–104
–106
–108
–110
–112
–114
–116
–118
–120
–122
–124
–126
–5
–10
RSRP (dBm)
5
15
10
UE Tx Power(dBm)
IRB,UL [dBm]
UE Tx Power(kbps)
20
25
30
RSRP vs UE Tx Power/PUSCH Throughput
0
C Total UE Tx Power/RB (pZeroNominalPusch = –96dBm)
D Total UE Tx Power/RB (pZeroNominalPusch = –103dBm)
B PUSCH Throughput (pZeroNominalPusch = –103dBm)
A PUSCH Throughput (pZeroNominalPusch = –96dBm)
B
C
D
A
Figure 9.21  p0 optimization in a high‐load cell.

Traffic Model of Smartphone and Optimization
381
●
●By decrease cell size: RF adjustment to decrease cell coverage, downtilt to reduce coverage 
footprint on the high‐capacity sector, while may require to up tilt the neighboring non‐congested 
sectors. Also it can increase cell size defining parameters: Qrxlevmin or, changed Delta PSD 
for cell specific reference signal relative to the reference from 3 dB to 0 dB to reduce cell size 
under low inter‐site distance. For further, it can decreases p0NominalPusch and p0Nominal-
Pucch in a high‐load condition.
●
●By alleviate PDCCH scheduling congestion: Reduce SRB traffic aims to reduce the number 
of UL/DL RLC retransmissions for SRB and DRB, or, to extends the time for new poll if no 
RLC status report is received for SRB and DRB.
www.ebook3000.com

383
Part 3
Voice Optimization of LTE

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
385
Circuit switched fallback (CSFB) addresses the requirements of the first phase of the evolution 
of mobile voice services, which began on a commercial scale in 2011. CSFB is the solution to 
the reality of mixed networks today and throughout the transition to ubiquitous all‐LTE net-
works in the future phases of LTE voice evolution. On the other hand, CSFB is the first step in 
enabling mainstream LTE handsets with the cost, size, and battery life advantages of single‐
radio solutions to LTE data in combination with 2/3G voice as well as making the initial LTE 
investments smaller.
When the user’s device is paged via LTE with an incoming call, or when the user initiates an 
outgoing call, the device switches from LTE to 2/3G. This is a circuit switched (CS) fallback 
function in EPS, which enables the provisioning of the CS services when the UE is served 
by E‐UTRAN without the need for IP multimedia subsystem (IMS) support. A CS fallback–
enabled terminal connected to LTE can use 2/3G to connect to the CS domain in areas where 
LTE coverage is overlapped with 2/3G coverage, and the call remains in the CS domain until it 
is completed. Compared with VoIP and standby phones, CSFB is easier to realize, that means 
we don’t need to do much to upgrade the network, and CSFB can handle various kinds of 
phones. CSFB may be used as a generic telephony fallback method securing functionality for 
incoming roamers as well.
10.1  ­Voice Evolution
This voice communication evolution can be characterized into three major phases. In the first 
phase, currently underway, all voice traffic is handled by legacy CS networks, while data traffic 
is handled by LTE packet‐switched (PS) networks, 2/3G network used primarily for voice ser-
vice of legacy terminals. Usually, the operator may deploy LTE with 3GPP CSFB solution across 
LTE coverage area. In CSFB, whenever an LTE handset generates or receives a voice call it is 
automatically transferred to the 2/3G networks. Once the call is finished the device reverts to 
LTE. It relies on interrupting the LTE connection when the terminal is forced to move to the 
2/3G network. This might be a big problem, depending on the application that is being used 
prior to the voice call. The second phase in LTE voice evolution introduces native VoIP on LTE 
(VoLTE) along with enhanced IP multimedia services such as video telephony, this solution 
relies on SRVCC (single radio voice call continuity) or PSHO at edge of coverage. Compare to 
CSFB, VoLTE avoids 4G data service interruptions and preserves the LTE data experience 
­during speech communications. The third phase converges the enhanced capacity and services 
of all‐IP networks (voice and video over IP and RCS, such as instant messaging, video share, 
and enhanced/shared phonebooks) for continuous coverage across the broader range of network 
10
Circuit Switched Fallback Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
386
access methods, including LTE, 3G, and WiFi, with interoperability across operators and legacy 
telephony domains (Figure 10.1).
Migration from CSFB to VoLTE is typically done in several steps starting from CSFB, then 
combination of CSFB and VoLTE, and finally, full VoLTE where all calls are fully utilizing 
VoLTE. SRVCC enables handover from VoLTE to CS speech when the UE is running out of 
LTE coverage. Also reverse SRVCC enables handover from CS speech back to IMS‐based VoIP. 
The handling of voice traffic on LTE handsets is evolving, as the mobile industry infrastructure 
evolves toward higher, and eventually ubiquitous LTE availability.
When subscribers are attached to LTE access, the UE informs the network what it supports, 
either data centric, or voice centric. If the UE is voice centric, it shall report what it supports, 
CS voice only (CSFB), IMS PS voice only (voLTE), CS voice preferred (IMS PS voice as second-
ary), or IMS PS voice preferred (CS voice as secondary). CS fallback is triggered to overlapping 
CS domain (2/3G) whenever voice service is requested, and resumed LTE access for PS services 
after call completion.
10.2  ­CSFB Network Architecture and Configuration
10.2.1  CSFB Architecture
The key point from CSFB view is the SGs interface between MSC and MME that SGs interface 
connects the MSC/VLR and the serving GPRS support node and mobility management entity 
(SGSN‐MME). This interface is used for registration in the MSC/VLR of the UE by performing 
combined procedures, to page the UE on behalf of the MSC/VLR and to convey CS‐related 
services. CSFB‐evolved node functions require a software upgrade and are listed in Figure 10.2.
Following functions shown in Table 10.1 need to be enabled in MSC‐BSC (RNC) and SGSN‐
MME for CSFB.
RIM functionality supports NACC/system information distribution for CSFB from LTE to 
2/3G. RIM is recommended to pre‐populate LTE eNB with 2/3G SIB data. RIM procedures 
setup associations between external UTRAN or GERAN cells and the BSS that hosts that cell 
and receive NACC information for the cell. This process occurs automatically, with RNC/BSC 
updating eNB of changes to subscribed cell relations. It is required to enable feature “Release 
with SI” toward 2/3G, which speeds up call setup time toward 2/3G.
Spotty LTE coverage
Areas with continuous 
LTE coverage
Mainly continuous 
LTE coverage
CS
LTE
LTE
LTE
LTE
CSFB
LTE
LTE LTE LTE
LTE
LTE
LTE
LTE
LTE
E
E LTE
E LTE
LTE
LTE
LTE
LTE
SRVCC
CSFB
2G - 3G
LTE LTE LTE
LTE
LTE
LTE
LTE
LTE
E
E LTE
E LTE
LTE LTE LTE
LTE
LTE
LTE
LTE
LTE
E
E LTE
E LTE
LTE LTE LTE
LTE
LTE
LTE LTE
E LTE
LTE LTE
E LTE
LTE LTE LTE
LTE
LTE
LTE
E
E LTE
2/3G coverage
CS
Legacy architecture
CSFB Architecture
SRVCC / ICS Architecture
Mobile telephony
evolution target
IMS Voice service over LTE
and HSPA
VoLTE
phone
LTE
HSPA
MSS
MSS
CS attach
CS attach
Legacy
phone
Legacy CS voice
CS voice service via CSFB
IMS Voice service over LTE and CS access
CSFB
phone
CSFB
MSS
IMS
IMS
CS attach
VoLTE
phone
CSFB
SRVCC
LTE
SRVCC
AKS
Figure 10.1  Voice evolution and network evolution.

Circuit Switched Fallback Optimization
387
The support for RIM procedures show in Figure 10.3 that the feature makes it possible for an 
eNB to receive information for a specific GERAN/UTRAN cell or to create and maintain rela-
tionships with GERAN/UTRAN cells. Such relationships are referred to as RIM associations. 
Once a RIM association is established in the eNB by the operator, the eNB receives updates 
from the BSC/RNC when SI for the GERAN/UTRAN cell in that RIM association changes.
When moving from CSFB region to non‐CSFB region, “data centric” LTE data modems 
should stay on LTE, “voice centric” LTE smartphones should re‐select to 2/3G (Figure 10.4).
CSFB‐configured region is based on tracking area; this CSFB feature can be enabled/disabled 
per the tracking area. When moving from CSFB region to non‐CSFB region, the tracking area 
update is triggered, but tracking area update accept contains a tracking area update but does 
not provide location area information.
It is worth to note that UE ID in 2/3G and LTE is different, as shown in Figure 10.5.
10.2.2  Combined Register
A dual‐mode UE can attach both to the LTE network, and to 2/3G networks before voice calls 
via CSFB can be initiated. The UE with CSFB ability not only can access to EURTAN from EPS, 
but also can access to CS domain from GERAN/UTRAN.
UE
E-UTRAN
SGSN
MME
MSC-S
GERAN
UTRAN
S3
SGs
S1
LTE-Uu
Um
Uu
IuPS
IuCS
Gb
Gs
A
1. CS Fallback (M)
2. DMCR (O)
3. Dual Transfer Mode (O)
1. CS Fallback to GSM 
 
and WCDMA (M)
2. RIM (O)
1. CS Fallback (M)
2. SMS over SGs (M)
3. RIM (O)
4. MSC Pool support (O)
1. LTE to CS Fallback (M)
2. SMS over SGs (M)
3. MSC Pool (O)
4. MT Roaming Forward (O)
5. Dual Transfer Mode in GSM (O)
1. RIM (O)
2. PS Handover (O)
1. RIM (O)
2. DMCR (O)
3. Iu-flex/MSC Pool support (O)
4. PS Handover (O)
1. RIM (O)
2. Fast return to LTE (O)
3. A-flex/MSC Pool support (O)
4. PS Handover (O)
5. Dual Transfer Mode (O) 
M: mandate, O: optional
Figure 10.2  CSFB architecture and functions.
Table 10.1  MSC‐BSC (RNC) and SGSN‐MME functions.
MSC‐BSC
SGSN‐MME
Feature provide and LKF installation on APG 
SGs feature activation 
Check SGs interface parameters 
SGs setup IS part 
SGs interface setup and activation
SMSoSGs and CSFB requirements:
RAN information management (RIM) feature activation
RIM support enables SI transfer between RATs
SMS over SGs and CSFB to GSM and WCDMA feature activation
IP‐based interface configuration
SCTP‐based interface configuration
TA‐LA to MSC‐S BC mapping
SGsAP configuration
www.ebook3000.com

LTE Optimization Engineering Handbook
388
eNodeB
MME
SGSN
BSC
1. Establish RIM Association
 through the CN.
2. Report SI changes for
 
Utran cell belonging to
 
RIM association, to the
 
eNB over the lu.
3. RIM PDU
4. RIM PDU
eNB has the latest system information for the target Utrancell.
SGSN
MME
E-NodeB
RNC
1. eNB Direct Information Transfer
2. RAN Information Relay
6. MME Direct Information Transfer
5. RAN Information Relay
UtranCell=N
ExternalUtranCell=N
RIM Association
Figure 10.3  RIM procedure and association.
Voice centric 
LTE 
smartphones 
should re-select 
to 2G/3G in 
non-CSFB
Cs-domain Registration: FAIL
CS-domain Registration: OK
CS-domain Registration: OK
LTE TDD
TD- SCDMA
GSM
LTE TDD
TD- SCDMA
GSM
Figure 10.4  CSFB region (left) and non‐CSFB region (right).
SGSN
MSC
P-TMSI
TMSI
RNTI (Scheduling)
IP Address (Packet Forwarding)
eNB
S-GW
MME
EPC
P-GW
M-TMSI (Subscriber confidentiality)
Figure 10.5  UE ID in 2/3G and LTE.

Circuit Switched Fallback Optimization
389
The SGs‐interface connects the SAE domain with the classic CS domain with MSCs and 
2/3G radio network. The SAE domain consists of the EPS with the MME node and the LTE 
radio network. The SAE domain is completely packet‐based so the only way to provide CS 
services to SAE is via the SGs interface. The SGs interface use a SCTP (stream control transmission 
protocol) connection between the MME and the MSC/VLR. It is needed to note that all new 
interfaces in the SAE architecture begins with an “S.” The SGs‐interface is an “expansion” of the 
existing Gs interface between the MSC and SGSN. The SGs‐related procedures and messages 
are shown in Figure 10.6 and Table 10.2.
In CSFB deployment, LTE (TA, tracking area)‐2/3G (LA, location area), and LA‐MSC should 
be mapped correctly in MME. The TA and LA are mapped by connecting them to the same 
geographical area in the SGSN‐MME. By this mapping, MME can determine the corresponding 
MSC, and initiate MSC location–combined update request for HSS/HLR.
The combined procedures enable a UE supporting both CS and PS services, to connect to 
both types of services through the EPS network. The UE requests the MME for combined procedures 
in an attach request or tracking area update (TAU) request message. The MME establishes 
initial registration of UE, and maintains UE location information updated with the MSC/VLR. 
The SGSN‐MME sends information regarding the UE’s location to the MSC/VLR. The MSC/
VLR does not have any information about tracking areas, so the SGSN‐MME has to send location 
information based on the location area in which the UE is located by TA‐LA mapping.
a new IE, 
mobile class mark
SGsAP
SGsAP
SCTP
SCTP
IP
IP
BSC/
RNC
SGs
4 and 6, Location Update
Request/Response
MSC/
VLR
MME
G-MSC
2G/3G Circuit
Core
L2
L2
L1
L1
MSC
Server/VLR
7. Attach Complete
2. MME performs
 
authentication & bearer
 
establishment.
3. MME derives VLR number for
 
LA update.
1. Attach request (Type = IMSI/EPS Attach,
 
Additional Info=”SMS Only or Both”)
5. MSC performs location
    update.
MME handles the combined PS and CS 
Attach. For the CS attach it maps TA -> LA 
and makes a location update over SGs
Figure 10.6  Combined register.
Table 10.2  SGs procedures and messages.
SGs Procedure
Used SGsAP messages
Location update
Location update accept, Location update reject, TMSI reallocation complete
EPS detach
EPS detach indication, EPS detach ACK.
IMSI detach
IMSI detach indication, IMSI detach ACK.
Paging
Paging request, Service request, Paging reject and UE unreachable
Alert
Alert request, Alert ACK, Alert reject,
Activity indication
UE activity indication
Reset
Reset indication and reset ACK
SMS
Uplink unitdata, Downlink unitdata and release request
www.ebook3000.com

LTE Optimization Engineering Handbook
390
When a UE send Attach request message to MME, the MME can get a CSFB indicator. 
The attach type is “combined EPS/IMSI attach” in Attach request message, which is shown 
in Figure 10.7.
In attach request message, the following information can be got: EPS attach type, CSFB capa-
bility, and UE’s usage setting. Then the combined (TA/LA) update will be done; it will register 
with the CS domain in a proper MSC. A mapping between LTE TAs and 2/3G LAs that enables 
both SGSN‐MME and MSC/VLR to keep track of UE’s location. Whenever the UE moves and 
changes TA within the LTE network, its position is kept updated in the MSC/VLR according to 
the TA/LA mapping configured. Then MME will send Attach accept message to UE with the 
TMSI and LAI, which is assigned by MSC. MME configures the TA‐LA and LA‐MSC mapping 
relation, determines the MSC, and then MME will do combined registration with MSC, that is, 
they will trigger MSC register in HLR. After the MME derives the LAI from the TAI of the 
­current LTE cell, then MME sends the “location update request” to the target MSC/VLR. If 
EMM causes “network failure,” it is found in the Attach accept message, and it means the com-
bined attach was “successful” and is for EPS services only (Figure 10.8).
MSC sends the UE a TMSI reconfiguration command by location update accept message, 
after the TMSI reconfiguration, UE send TMSI reollocation complete message to the core 
­network, indicates that the TMSI reconfiguration has been completed.
Once the location update is accepted by MSC, it will create/update the SGs association and 
mark the subscriber as IMSI and EPS attached. The MSC will then perform the location update 
procedures toward the HLR in the same way as it is done for an A‐ or Iu‐interface. In attach 
accept message, the following information TAC, M‐TMSI and LAC can be got.
By receiving this message, the UE shall start T3411 and T3402 (refer to Annex). If either of 
these two timers expires, UE will re‐trigger combined TA/LA updating with IMSI attach. If the 
UE is not successful for the non‐EPS part LA updating, UE will try five times each time, since 
after five times, T3402 will start, wait for another 12 mins, and then another five times will initiate.
When UE performs detach procedure, it can either be received as IMSI detach, EPS detach, 
or combined EPS/IMSI detach. The detach procedure can be initiated by UE, MME, or HSS. 
Depending on detach type, the UE is marked as EPS detached or IMSI detached or both. This 
procedure is initiated by EPC (MME) by sending an EPS detach indication or IMSI detach 
indication to the MSC. The MSC removes the SGs association to the EPC (MME).
Figure 10.7  “Combined EPS/IMSI attach” in Attach request message.

Figure 10.8  Attach request and attach accept message.
www.ebook3000.com

LTE Optimization Engineering Handbook
392
10.2.3  CSFB Call Procedure
LTE CSFB call procedure can be divided into five parts: LTE attach request, CSFB process, 
mobile originating call, CS radio bearer session, alerting, and PS radio bearer data transfer.
10.2.3.1  Fallback Options
After CSFB has been deployed, eNB supports one of the following methods to fallback to the 
2/3G network to make a CS voice call. Depending on feature activation, output from RRM 
handover algorithm and UE capabilities, the eNB decides which type of CS fallback will be 
used—RRC release with redirect, PS handover, or (in case of 2G target RAT) inter‐RAT cell 
change order, and so on (Figure 10.9).
●
●Redirect based CSFB to 2/3G – CSFB via redirect allows for a service‐based redirection from LTE 
to UTRAN or to GERAN during the call setup. The operator can configure priorities for the target 
frequency bands per cell. eNB selects the highest priority layer supported by UE. UE does not have 
any pre‐information about the target cell. It is needed to configure the carrier frequency of the target 
RAT by RRC connection release message, then, UE access to target 2/3G cell (can be based on field 
measurements or blind). The baseline method is a blind redirect to target RAT. With blind redirect 
time, the transition from LTE to 2/3G for a non‐stationary UE is around 2 seconds.
●
●Redirect based CSFB to 2/3G with SIB (System information block) – Compare to the upper 
one, the UE does not have to re‐read the whole system information from air interface. RAN 
information management (RIM) procedure may be deployed for retrieving system informa-
tion from 2/3G, and it is possible to provide information about the target cell prior to releasing 
from LTE. The system information provided together with the RRC connection release message 
will reduce the overall call setup time.
●
●Redirect based CSFB to 3G with deferred SIB11/12 reading (deferred measurement control 
reading (DMCR)) – With this feature UE defers reading system information blocks type 11, 
11bis and 12, which may be distributed to several segments depending on the size of the 
neighbor list in the target 3G cell before RACH access. The gain in setup time depends on 
SIB contents and scheduling, but several hundred milliseconds are practical by deferring 
reading SIB the CSFB call setup delay is reduced. Field tests indicate that DMCR reduces the 
SIB acquisition time from 2 seconds to about 1 second. The information whether the 3G cell 
supports DMCR is broadcast in SIB3, which the UE will have to acquire before deciding if 
SIB11/12 reading can be skipped.
●
●PSHO based CSFB to 3G—eNB starts upon the CSFB trigger IRAT measurements to identify 
suitable target cells. eNB performs a PS handover once a suitable UTRAN target cell has been 
found based on measurements during the handover preparation phase, using handover instead 
of release with redirect will give a shorter interruption in the ongoing PS data session and target 
cell SI provided to UE during the handover procedure. Resources are reserved beforehand in 
target radio and call setup delay is reduced and reliability of call setup is increased. The feature 
of a PSHO–based CSFB needs a 3G network to be upgraded to the right software.
RIM
R9 RRC redirect
with 3G frequency
PSC,SI
measure 3G cells
which will fall back
and synchronize
measure 3G cells
which will fall back
and synchronize
camping and
call set up
camping and
call set up
read SI for
target cells
R8 RRC redirect
with 3G frequency
start
a CSFB
Call
without RIM
Figure 10.9  RIM.

Circuit Switched Fallback Optimization
393
10.2.3.2  RRC Release with Redirection
In a live network, the fallback method of RRC release with redirection is widely used so that it 
can be simply deployed. The available variations for CSFB to 2/3G RRC release with redirection 
are the following:
●
●Release with redirection—Basic
●
●Release with redirection—SIB skipping
●
●Enhanced with redirection—SI tunneling (3GPP Rel 9)
The call flows for all three variants are similar and the distinction lies in how the SIB messages 
are handled. Reading of SIBs in the target cell once the UE has moved to the fallback RAN is a 
large contributor to the delay budget. The first variant reads all SIBs and thus causes the long-
est delay. The second reads only the mandatory SIBs—1, 3, 5, and 7—and the remaining SIBs 
are provided once the UE is connected to the target cell. The third variant reads no SIBs at all 
and thus has the shortest delay. All SIB information is tunneled via the core from source to 
target RAN.
In Rel‐8, the CSFB release with redirection, at a voice call origination attempt or when receiv-
ing a page for CS voice (via SGs interface), the fallback RAT’s frequencies is transmitted by RRC 
connection release message. The UE changes RAT and starts accessing the new RAT attaching 
to the indicated target frequency, then transmits a CM service request to the BSC/RNC. Once 
the CS service request is accepted, the terminal will start the CS call. Rel‐8 CSFB, the release 
with the redirection procedure is shown in Figure 10.10.
For Rel 8 redirection, eNB only carries the frequencies of the target cell, and the UE needs to 
select a frequency and read the SIB. For Rel 9 redirection (SI tunneling) shown in Figure 10.11, 
the system information can be regularly updated via RIM signaling and cached at the source 
eNB, it avoids the delay of configuring and performing target RAT measurements. The main 
risk is if the provided information is misaligned or outdated, in which case the UE is forced to 
make the call setup as if there were no system information available. This feature will decrease 
the amount of time required to setup a CS call since it will not be necessary for the UE to download 
all SIB containers.
UE
eNB
MME
S1AP: UE CONTEXT MODIFICATION REQUEST
S1AP: UE CONTEXT RELEASE REQUEST
L2ACK
RRC: RRCConnectionRelease
UE leaves cell
Optionally: DL NAS-PDU Transfer „CS SERVICE NOTIFICATION“ (in case of MTC)
S1AP: UL NAS TRANSPORT
Delete Bearer
RRC: ULInformationTransfer
(EXTENDED SERVICE REQUEST)
(CS Fallback Indicator)
Selection of redirect 
target 
(With Redirect Info)
S1AP: UE CONTEXT RELEASE COMMAND
S1AP: UE CONTEXT RELEASE COMPLETE
S1AP: UE CONTEXT MODIFICATION RESPONSE
UE initiated a 
CFSB call
CSFB release 
with redirection
UE measures the
target frequency 
and sync to 
the new RAT
UE read target 
RAT’s SIB
UE access the
new RAT and
make a call
CSFB is triggered in 
the eNB through
initial context setup 
request and UE 
context modification 
request
The MME sends an 
S1-AP UE context 
modification request 
with a CSFB
indicator to the eNB
Figure 10.10  Rel 8 redirection procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
394
Optional enhancements for 3G, the method of RRC release with redirection (R8) + DMCR 
(deferred measurement control reading function), is also supported shown in Figure 10.12. UE 
awaits reading SIB11 and 12 with instructions from the target cell (SIB3 support deferred 
measurement control reading configuration) and processes other time‐consuming SIBs (related 
to measurement control).
2 / 3G
MM
E
eNB
S3
S1
Gb
IuPS
BS
NodeB
LTE
BSC
RNC
A-bis
Iub
Gb
IuPs
-
5. BSC/RNC provides SI based on regular intervals 
(requests) or when ever the configuration is changed.
7. UE do not need to read SI in 
2/3G => Faster call setup!
6. eNB provides SI 
to UE at CSFB.
2. eNB requests system information (SI) 
for the overlapping 2/3G cells via the 
packet core network. 
3. SI request/response 
relayed by the MME
4. SI request/response 
relayed by the SGSN
SGSN
1. eNB registers information (id and 
signaling strength/quality) about 
neighboring cells from measurement 
reports from the UE’s.
Figure 10.11  RAN information management (RIM).
3G
MME
eNB
SGs
S1
Iu
BS
LTE
RNC
Iub
MSC
1. UE falls back
to 3G
2. UE reads SIB3= 
DMCR on/off 
3a. DMCR on = UE awaits with
reading SIB 11, 11bis and SIB 12=>
Faster call setup! SIB 11, 11bis and
12 are read later during the call
3b. DMCR off = UE reads SIB 11, 11bis 
and 12 at their regular broadcast 
intervals (every 1.4 s). Call setup 
continues after SIB’s are read.
Figure 10.12  Deferred measurement control.

Circuit Switched Fallback Optimization
395
CS fallback will always direct the UE to whichever frequency relation has the highest priority. 
If the same priority is configured for multiple frequencies, the eNB will redirect the UE based 
on a simple round robin algorithm for the load sharing, which is shown in Figure 10.13.
10.2.3.3  CSFB Call Procedure
The UE sends an NAS extended service request message to the MME requesting a CSFB service 
when the UE requests the CS service or as a response to a paging message with a CSFB flag. 
CSFB is triggered in the eNB through initial context setup request and UE context modification 
request message sent by the MME.
For mobile originating (MO) voice calls, the UE sends Extended service request message 
indicating mobile originating voice call from a CSFB terminal. The eNB triggers release with 
redirect, redirecting the UE to the CS domain to continue with the call setup. The eNB makes 
the decision to what neighbor cell the UE should be released to and sends an RRC_release_
with_redirect message to the UE and a S1‐AP UE context release request to the MME. The UE 
changes RAT and starts accessing the new RAT attaching to the indicated target frequency.
Finally, the UE transmits a CS service request to the BSC/RNC or 2/3G network. Once the 
CS service request is accepted, the UE will start the CS call. The PS services are moved to target 
the network if possible.
MO CSFB call procedure is shown in Figure 10.14.
The call flows for mobile (MT) terminating call setup is presented in Figure 10.15.
For terminated CS call in LTE, the MSC pages the UE over LTE via the SGs interface, the UE 
changes radio mode to 2/3G and receives the call.
When MSC/VLR pages users, MSC needs to configure the paging parameters of SGs inter-
face and 2/3G network, including paging times, paging interval, TMSI/IMSI paging, whether 
to continue A/Iu interface paging or SGs and A/Iu interface simultaneously paging after SGs 
paging failure, and so on. Before MSC/VLR pages the UE, it will check the UE’s SGs association 
state. If the SGs association is null, paging UE in 2/3G network in accordance with its storage 
location information, if SGs association is associated, then paging UE by SGs interface, and 
starts the SGs interface paging timer. SGs paging message include IMSI, LAI and TMSI etc.
When MME received paging message from MSC through SGs, it needs to check whether the 
UE is attached or detached, the SGs interface is associated or not, and the LA/TA matches or 
not, and so on. If the UE in the LTE network is detached, MME will response paging reject 
(IMSI detached). If the UE is in RRC connection state, MME directly sends the CS service noti-
fication (IMSI or TMSI) to the UE. If the UE is idle, MME sends paging (S‐TMSI) message to 
CSFB WITH LOAD SHARING
F1 F2 F3 ARE OF SAME PRIORITY
Calls
Calls redirected to frequencles
In Round Robin method
LTE
WCDMA
GSM
F1
F2
F3
F1
F2
F3
Figure 10.13  Fallback frequency selection.
www.ebook3000.com

UE
MME
BSS/RNS
MSC
eNB
Optional Measurement Report Solicitation
Location Area Update
Service Reject
CS MO call
,
S1 UE Context Release
Extended Service Request
SGW/PGW
S1 AP-: S1 UE Context Release Request
Suspend
8Update bearer(s)
SGSN
Suspend Request / Response
Routing Area Update or Combined RA/LA Update 
RRC connection release
If the MSC
is changed
S1 AP-Response message 
CM Service Request
S1 AP-Request message with CSFB indicator
UE changes RAT then LA Update or Combined RA/LA Update or RA Update or LAU and RAU
A/Iu-cs message (with CM Service Request)
Figure 10.14  MO CSFB call procedure.

Circuit Switched Fallback Optimization
397
UE under its TA/TA list for CS and SMS service. When UE received the paging message, MME 
will send paging response (service request message) through SGS interface to MSC. Finally, the 
UE informs the MME that it needs to set up the CS call and it needs the CSFB, via the NAS 
Extended service request message. The UE will be ordered to release the LTE connection it will 
be redirected to the CS domain.
10.2.4  Mismatch Between TA and LA
For CSFB and session continuity, it needs to have a proper TAC‐LAC mapping where the UE 
on 4G will be redirected to the underlying 2/3G site as MME needs to know to which MSC the 
UE should be connected to.
Operators who have existing 2G or 3G networks should plan their TA boundaries to coincide 
with their routing area (RA) or location area (LA) boundaries. LA and RA boundaries used for 
the 2G and 3G systems are likely to be relatively mature and may have already been optimized 
in terms of their locations. Existing 2/3G counter data can be used to estimate the quantity of 
paging, which is likely to be experienced across a specific TA. There might be specific requirem-
ets to coordinate TA code (TAC) planning with LA code (LAC) planning in case of mobility 
during CSFB or in case of cell reselection to 2/3G. When UE makes a combined EPS/IMSI 
attach or combined EPS/IMSI, by TA update request message, it receives a LAC from MME 
inside of the attach/TAU accept message. In case of CSFB call, LAC is needed when MSC is 
paging a UE over SGs interface as MME maps LAC received from MSC to TAC and sends the 
The UE sends a CM service request to the 
BSC/RNC. Once the request is accepted,
the UE starts the CS session
Before call proceeding, only MO UE 
need to analyze. After that, the core 
network starts paging MT UE, MO and 
MT UE need to combind analyze.
Figure 10.15  MO and MT CSFB call procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
398
paging to eNBs over S1AP. Therefore, a mapping table between LA identity and TA identity 
must be configured at the MME. With CSFB enabled, in order to minimize CS call setup delay, 
it is necessary for the MME to inform the MSC in which LA the UE is located. Delays will be 
introduced if MSC is informed with the incorrect LA. There could be two scenarios:
●
●If the incorrect and actual LA are controlled by the same MSC ⇒ minor delay
●
●If the incorrect and actual LA are controlled by different MSC ⇒ more additional delay
Thus, the general rule is TA should be correctly mapping to LA, as shown in Figure 10.16.
LA Update
TA Update
TAC2
TAC1
LAC1
TAL1
TAL2
TAL3
LAC2
LAC3
TAC3
TAC4
TAC5
TAC6
TAC7
TAC8
TAC9
TAC10
TAC11
TAC12
MME uses TA when
roaming in LTE
Coverage!
Mapping table
TA
TA1
TA2
TA3
MME
TA1
MSC/VLR#1
MSC/VLR#2
TA2
TA3
LA
MSC/VLR
MSC/VLR#1
MSC/VLR#2
MSC/VLR#2
LA1
LA2
LA2
Identifying LA and MSC/VLR from TA
LA1
LA2
Figure 10.16  TA and LA mapping.

Circuit Switched Fallback Optimization
399
The TA and LA mapping relationship of MME are pre‐configured. TA should totally match 
the UE’s true LA in ideal situation. UE need to be registered in geographically “correct” LA 
while in LTE so that it can respond to a page to the MSC serving the 2/3G cells in the area 
where the UE currently is located. One LA could contain several TAs, but one TA could only 
belong to one single LA. Any matched LA/TA, UE will establish a call quickly after falling back 
to 2/3G and send CM service request or Paging response message. Otherwise, there will be extra 
LAU procedure. If the MSC changed, the call may failed without LA update procedure 
(Figure 10.17 and 10.18).
Unmatched LA/TA, the target RAT LAC differs from the one UE obtained in LTE, if the two 
different LAs are controlled by the same MSC, it will cause the UE execute LAU procedure 
after fallback to 2/3G network. Usually, it will bring 2 more seconds of delay. Before the CM 
service request or Paging response message on 2/3G, LAU is necessary, and IMEI checking and 
TMSI reallocation may be done at this point, and UE should also mark Follow‐On‐Request 
LTE
PDN
PSTN
Page Response/
Call Setup
Location
Update
Page
MME
AGW
MSC
Same geographical area
2G/3G
RAN
Figure 10.17  Matched LA/TA.
UE
eNB
Time to 
transition to
target RAT
Location
Update
Call setup
CM Service Request
BSC/
RNC
MME
MSS
Transition to target RAT
Authentication, identity request, TMSI reallocation
CS call setup
Location Update Request
Extended service request
Location Update Accept
Figure 10.18  Unmatched LA/TA.
www.ebook3000.com

LTE Optimization Engineering Handbook
400
(MO) to make NAS connectivity and successful CM_service request or CSMT1 (MT). If the 
new LA is served by a different MSS that is not the one registered in combined attachment and 
caused the MT call to fail, because the update location message is received from a MSC, which 
is not aware of any previous paging request, the 3GPP feature of MTRR/MTRF is needed to 
avoid call drop. An example of the areas of unmatched LA/TA is shown in Figure 10.19, it notes 
that with MSC pool solution each MSC within the pool can control all LAs belonging to the 
pool; therefore, in this case the critical areas are limited to the border between the pool areas.
The example shown in Figure 10.20 gives an explanation of how the UE knows if it belongs to 
a different LAC. 3G SIB1 broadcasts common information to all UEs in the cell related to cell 
access parameters and information related to scheduling of other SIBs. The NAS IE inside SIB1 
defines the LAC to which the cell belongs: “cn‐CommonGSM‐MAP‐NAS‐SysInfo” = 7922 Hex 
(which means 31010). At this point the UE already knows it is camping in a cell belonging to a 
different LAC.
Actually, in a live network, a 100% correct mapping of LTE and 2/3G cells (TA‐LA mapping) 
is nearly impossible to maintain, especially due to cell breathing and varying indoor coverage, 
and so on. To address the setup delays and setup failure risks in MSC border areas, as well as 
eliminate the LAU delay time, a few features for overcoming the MSC border issue:
●
●MSC pool: MSC pool architecture, also known as Iu/A‐Flex, conforms to the 3GPP Rel 5 
specifications for connection of RAN nodes to multiple core network nodes. With MSC pool 
architecture, all MSC servers within a pooled area serve all cells in the pool, eliminating MSC 
borders and the time delay of inter‐MSC LAUs within the pool. When the UE falls back 
across the pool and result the call failure problem, there are three solutions: delete the excess 
neighbor cell, delete the excess frequency points, and replane the 2/3G MSC pool border.
1  CSMT: A flag in location update request message used in CS fallback for MT call for shortening the call setup 
time. When the MSC receives a LAU request, it shall check for pending terminating CS calls and, if the “CSMT” flag 
is set, maintain the CS signaling connection after the LAU procedure for pending terminating CS calls. The UE 
includes the “CSMT” flag in the location update request message that informs the new MSS to delay releasing the 
NAS signaling connection in order to wait for the incoming call setup from the gateway MSS.
This TA Streches
over two areas
serviced by two
different MSCs
(or MSC pools)
LA
MSC1
TA1 = LA1
LA23
LA22
A TA list is not
completely located
within an LA, causing LA
is different after UE fall
back (MSC pool is not
changed)
2G/3G LA
LTE TA
TA2
LA5
LA6
TA3
LA3
TA5 = LA5
TA4 = LA4
LA2
Figure 10.19  Unmatched LA/TA areas served by same/different MSC pools.

Figure 10.20  How the UE knows if it belongs to different LAC.
www.ebook3000.com

LTE Optimization Engineering Handbook
402
●
●Mobile terminating roaming retry (MTRR, TS 23.018), allows that the MSC/VLR where 
the UE is registered routes the call further to the MSC where the UE has fallen back to. The 
­probability is higher that this use case occurs if no MSC pool is deployed (at MSC borders) 
or when MSC pool is deployed it can occur as MSC pool borders. The feature of MTRR 
needs upgrade the HLR, GMSC, and MSC. Additional delay has to be added for an inter‐
MSC location update case (2‐10 seconds).
●
●Mobile terminating roaming forward (MTRF, TS 23.018), which is subscriber registration in 
the new MSC and call forwarded from old to new MSC, needs additional call setup delay 
(~5 s) and additional load on HLR2 and MSC. MTRF need MSC software upgraded. MTRF 
is a newer version of the MTRR standard and it solves the MSC border issue by forwarding 
calls directly from the old MSC to the new MSC in case a fallback is done over an MSC bor-
der. MTRF has the advantage over MTRR of not needing inter‐operator agreements and not 
re‐routing calls back to the GMSC for a second HLR interrogation. This makes MTRF more 
reliable and easier to deploy. Field tests show that MTRF activation will enable the failure 
rates decreased from around 9% to less than 3% in the critical areas. The additional call setup 
time due to MTRF for a CSFB call is around 1 sec.
10.3  ­CSFB Performance Optimization
The main CSFB‐specific optimization tasks to be discussed in this section are minimization of 
call setup time, improved call setup success rate, and accelerating the return to LTE after the 
call is completed.
CSFB mobile originated (MO) calls and CSFB mobile terminated (MT) calls are expected to 
have different performances. MO calls are quite easy in that mobility issues can be handled by 
the UE autonomously; apart from the lack of coverage, the UE is normally able to find a suitable 
target cell and establish the call, network is minimally involved in this process. MT calls are 
more tricky that CN mobility is critical as the call is already routed to a specific MSC, and the 
incoming call is pending in the MSC.
10.3.1  CSFB Optimization
10.3.1.1  Main Issues of CSFB
When originated a CSFB call, the main issues lead to unsuccessful calls are listed below:
During paging procedure: the wrong software version of the network, frequency locking of 
the terminal, terminal software problems, 4G weak coverage, user’s implicit detach, when 
the user is during fallback, TAU and other procedure conflicts happened, and so on.
During fallback procedure: the CSFB function of eNB is not enable, 2/3G frequency configured 
is incorrect in eNB, weak coverage of 4G or target network, fallback to different MSC POOL, 
and Pseudo base station case.
Call setup procedure: the CSFB function of 2/3G BSC/RNC is not enable, incorrect setting of 
core network parameter, authentication and handove issues caused by 2/3G weak coverage, 
the terminal setting blacklist, 2/3G network congestion, 2/3G channel assignment failure, and 
so on. CSFB call setup time needs special care of CSFB optimization. The main contributor to 
the additional call setup time is from reading system information (SI) in the new cell.
2  An MTRF call requires some 380% additional load on the HLR and 65% additional load on the VMSC per call 
since HLR registrations are normally not done on a call basis.

Circuit Switched Fallback Optimization
403
Return to LTE procedure: When the call is released, shorter time from 2/3G return to LTE is 
expected, so the reselection failure, reselection with redirect to LTE failure and fast return 
failure may occur.
In summary, the overview of CSFB‐specific optimization tasks is shown in Figure 10.21.
10.3.1.2  CSFB Optimization Method
CSFB solution can provide optimal reliability for originating call setup, that is, the same reliability 
that the target system would offer in a given location. Terminating call setup reliability is more 
challenging and can be affected by TAC/LAC mismatch and/or excessive delay.
For CSFB deployment, the LTE mandate feature includes eNB CSFB function, LTE to 2/3G 
session continuity, redirect (RIM) function, and so on. 2/3G mandate feature includes RIM 
function, fast return function etc. Before RF optimization, 2/3G neighbor and frequency allo-
cation, FreqRelation, and TAC to LAC mapping should be checked. For CSFB optimization, the 
four steps including combined attach, paging, RRC release procedure, and access to 2/3G 
should be detail analyzed to spot the CSFB failure problem. The CSFB optimization KPIs 
include success rate, access, fallback and return latency, and so on, as shown in Figure 10.22.
Table 10.3 gives a simple description of the main CSFB failures, issue‐related nodes, and solutions.
Abnormal call procedure
Low CSFB originated call setup success rate analysis procedure is shown in Figure 10.23. 
According to low fallback success ratio and call setup reject, there are different analysis steps.
The causes of CSFB call connection failure include:
●
●CSFB fallback failure: CSFB fallback failure will directly impact CSFB call connection
●
●2G secure and authentication procedure failure
●
●The added 2G frequency have TCH or SDCCH congestion
UE can not be paged during TAU procedure
LTE coverage issue
UE can not be paged during reselection between
RAT
fallback failure
CS call establish failure-MSC Pool issue
CS call establish failure-non optimal frequency of
target RAT
CS call establish failure--Pseudo base station issue
Reselection, fast return failure
Paging
Fallback
and access
to target
cell
Return back
to LTE
4G-2/3G
neighbour
optimization
RF
optimization
and TAC-
LAC match
optimization
Figure 10.21  Main issues of CSFB.
www.ebook3000.com

LTE Optimization Engineering Handbook
404
Table 10.3  The main CSFB failures and solution.
Failure reason
Issue location
Solution
Failure before 
fallback
SGs paging failure
RF, user
Paging optimization
Paging success, but 
fallback failure
RF
Optimize the issued cell
Failure after  
fallback
Assignment failure
RF
Check MSC and target cell  
response assignment
Call drop
RF
Optimize target cell
Recovery on timer expiry
RF, user
Check RF conditions and  
MSC‐related timers
Low CSFB originated call
setup success rate
CSFB originated 
call setup reject
Authentication failure after
fall back to 2/3G
UE search other RAT 
cell and try to access
CSFB originated call fall
back success ratio
· UE authentication issue leads to implicit detach
· Analyz through EMM cause
The number of CSFB originated fall back + the number of CSFB
originated call setup reject < The number of CSFB originated request
eNB did not transmit RRC 
connection release message, 
the CSFB feature is not 
enable in eNB
The number of UE 
context modified 
failure
· UE context modified failure 
  is due to frequently handover
· Analyze through failure cause
The number of UE 
context setup failure
Analyze 
through 
failure cause
low
high
2/3G issues
UE search
other RAT
cell and try
to access
UE not received RRC release 
with redirection message,need
to check RF coverage and 
interference
The feature of CSFB in eNB
is not enabled, there is no 2/3G
cell frequency in RRC release 
message
LTE misconfigured 2/3G 
neighbour cell frequency
Figure 10.23  The analysis procedure of abnormal call setup.
TAU or handover happened
Fall back with RIM
Multi RRC connection request, interference
LAU
MultiRAB assignment, physical channel reconfig
Extended service request
RRC connection request
RRC connection release
RRC connection request (3G)
Call confirmed
Setup
Setup
Alerting
Latency
Call confirmed
RRC connection request (3G)
Reasons
Interference, sync, poor coverage, wrong
parameter setting or other faults
TAU or handover happened during
extended service request
Interference, congestion, wrong
parameter setting or other faults
Network structure, pilot power setting,
antenna height/tilt etc.
Interference, poor coverage, power
setting etc.
Access failure
Procedure conflict
Access
failure
Service setup failure
Pilot pollution
Call drop
Call
drop
Figure 10.22  CSFB optimization method.

Circuit Switched Fallback Optimization
405
Abnormal combined attach
Un‐optimized TAC‐LAC mapping will lead to undesired location update between MSC 
pools and delays in call setup, in worst cases it will lead to call failure. Check combined attach 
planning by MME signaling trace, analyze the number of S1_release and LAU message, optimi-
zation ECI to CI mapping, and find if there is misconfigured LAC to MSC mapping record in 
MME, check the type of TAU is “combined TA/LA updating with IMSI attach” or not, and 
analyze the EMM cause value.
There are four main type of abnormal combined attach in a live network, CSFB not ­preferred, 
SMS only, EPS only, and low combined attach success rate. According to these four scenarios, 
core network and RF issues should be spot as shown in Figure 10.24.
Abnormal combined attach optimization procedure is shown in Figure 10.25.
Paging failure
CS paging procedure in case of CSFB is based on three steps: paging is transmitted by core 
network (CN), UE is reached by paging message on LTE cell, and redirection to target system, 
and paging answer from the last cell.
The causes of CSFB paging failure include:
●
●If there is a paging through S‐Gs interface while UE is returning to LTE: While the call ended 
and UE return to LTE, if TAU procedures haven’t completed, the S‐Gs interface paging will 
fail in some MME product vendor.
●
●LTE network implicit detach UE: If LTE network is implicit detach UE, the second call would 
fail. There are many possibilities that LTE implicit detach UE, such as defect in equipment 
Combined attach access
SMS only
CSFB not preferred
check CSFB feature for CN
EPS only
check EMM
Cause TA-LA
mapping
1.  poor RF
2. check EMM and Extend
    EMM Cause
low success rate
Figure 10.24  Abnormal combined attach.
Attach success ratio
Attach accomplished 
ratio
Attach
complete ratio
Attach complete 
message is lost, 
check RF coverage
The number of attach reject message is 
big. The reason can be found by EMM 
cause and Extended EMM cause
low
low
high
The number of 
CSFB not 
preferred
The number 
of EPS only
The number 
of SMS 
only
Core network should 
support CSFB 
The reason can be found by EMM cause, if 
EMM cause is MSC temporarily not 
reachable, check TA/LA mapping in MME
low
high
Figure 10.25  Abnormal combined attach optimization.
www.ebook3000.com

LTE Optimization Engineering Handbook
406
and the QoS cannot be modified dynamically (check if the Dynamic QoS Modification 
­feature is enabled).
●
●Poor wireless environment: Poor wireless environment or high interference will lead to a UE 
cannot receive or resolve paging message.
If paging is not transmitted by CN, it is needed to check that UE is doing data service request 
or TAU, or UE is interworking between 2/3/4G, these cases maybe caused by CN issues, or 
there is S1 interface alarm exist. If paging has transmitted by CN, a major cause leading to 
­paging failure on LTE side is the “not camping on a suitable cell,” and it is usually caused by: too 
many recurrent IRAT reselections including fast return from 2/3G, poor RF, and so on. The 
troubleshooting procedure is shown in Figure 10.26.
Receive RRC connection release issue
The normal RRC connection release message includes 2/3G frequency and target cell 
information and BCCH. In some cases, when UE sends Extended service request, UE starts 
T3417ext timer, if no RRC connection release is sent from eNB, at the expiration of this 
timer (10 seconds) UE reselects to UMTS or GSM. eNB logs can be analyzed to find out why 
eNB does not send RRC connection release with redirect. The causes of CSFB call fallback 
failure include:
●
●Poor wireless environment: Poor wireless environment or high interference will lead RRC 
connection failure or cannot receive RRC connection release message.
●
●CSFB to 2/3G feature is not enable: When the CSFB feature not be enabled in eNB, eNB will 
still release RRC connection release message with no frequency. In this situation, the UE will 
fallback to 3G.
●
●CSFBPrio (2/3G) is not set correctly.
●
●eNBs with unreasonable 2G frequency: When an eNB added too many 2G frequency (more 
than 15), there is bad quality, high interference, or across MSC pool 2G frequency will all lead 
to failure in fallback procedure.
For the abnormal case, it is needed to check eNB CSFB feature is enable or not, check the 
cause of service reject and inital context setup failure. RRC connection release issues trouble-
shooting procedure is shown in Figure 10.27.
Check if paging is transmitted by CN
N
Y
1. check terminal UE is on the TAU
    procedure
2. check terminal UE is on 
    IRAT(2/3/4G) procedure
3. check S1 is abnormal or not
1. check TAC is wrong or not 
 a. frequently TAU before
 b. check if last TAU/LAU is abnormal
2. check if RF is poor or not (UE unreachable)
3. check if the number of PDCCH CCE is enough and check if the MCS of paging
    message is suitable
3. check TMSI is valid or not, check TMSI allocation is success or not
4. check UE issues (paging no response)
5. Paging reject
 a. IMSI detached for EPS services
 b. IMSI unknown 
 c. IMSI detached for non-EPS services
 d. rejected by user
Figure 10.26  Paging failure troubleshooting procedure.

Circuit Switched Fallback Optimization
407
Camp on 2/3G cell
After UE received RRC connection release message, the next step is camping on the specific 
2/3G cell. During the procedure, some issues mostly found in a live network. It needs to check 
RF, MSC pool, and pesedo BTS issues, as shown in Figure 10.28.
If the UE is successful camping on 2/3G cell, it is still needed to analyze the signaling in 2/3G 
cell, that is, CM service request/RRC connection setup complete to call proceeding, call proceeding 
to radio bearer setup, radio bearer setup to alerting, and so on. After setup message is transmit-
ted by the MO UE, the network will page the MT UE, and proceed with the extended service 
request procedure of MT UE (Figure 10.29).
Finally, it needs to focus on the return back to LTE issues after the call is completed from RRC 
connection release in 2/3G to tracking area update accept in LTE. Tracking area update accept 
message includes TAU result, T3412, GUTI, TAI, and matched LAC information. Usually long 
fast return (FR) latency and FR failure are due to movement of the UE or frequency planning, 
or ECI planning is unreasonable, and so on.
The main causes of return to LTE failure are listed below.
●
●Poor wireless environment in hook area: Only when the RSRP satisfied Qrexlevmin (120dBm‐
124dBm) can the UE access a LTE network. Thus, if the 4G wireless environment is poor, UE cannot 
access LTE network and stay in 2G.
●
●LTE network implicit detach UE
●
●Wrong setting of cell reselection priority: If the cell reselection priority of LTE network hasn’t 
been set to 7, UE will fail in returning to LTE.
10.3.2  CSFB Main KPI
The CS fallback network capability is realized by using the SGs interface mechanism between 
the MSC server and the MME. The SGs reference point between the MME and MSC server is 
used for the mobility management and paging procedures between the EPS and CS domain, 
and it is based on the Gs interface procedures specified in TS 23.060. The SGs reference point 
is also used for the delivery of both mobile originating and mobile terminating SMS.
Receive RRC connection release
1. check RRC connection release contains
 
CSFB frequency or not
2. check if there is a handover command before
 
RRC connection release
3. check if there is a TAU procedure going on
1. check CSFB feature enable
2. check CSFB 2/3G frequency configured or
 
not 
3. check if there is implicit detach issue
Y
N
Figure 10.27  RRC connection release issues troubleshooting procedure.
Camp on 2/3G Cell
End
1. check 2/3G cell RF (not the best frequency)
2. MSC pool issue
3. check if there is a pesedo BTS
Y
N
Figure 10.28  Camp on 2/3G cell issues troubleshooting procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
408
CSFB E2E optimization, it is mainly focused on CSFB paging success rate, CSFB call fallback 
success rate, CSFB call connection success rate, CSFB return back to LTE success rate, and the 
related latency KPI. CSFB service KPI optimization needs to be carried out with both the core 
network and wireless side to promote CSFB service quality. The key interfaces involved in 
CSFB service such as SGs, S1‐MME, and Mc, and so on, and the key related signaling flows 
need to be analyzed, to find the key process and the performance of each interface in detail, 
mining the hidden troubles of the interfaces in the network.
The CSFB main KPIs from signaling messages are shown in Figure 10.30.
CSFB service processes is complex in that it involves the PS and CS domain. A single indica-
tor of OMC can not reflect the problems. It is necessary that CSFB signaling analysis tools 
require data collection, correlation, and analysis of signaling processes across different domains 
of the interface, including the CSFB MO/MT call setup success rate, return to LTE success rate, 
and the related delay analysis through the 2/3/4G network. The multi‐interface signaling message 
CM Service Request
MO
MT
Routing Area Update Request
Call proceeding
securityModeCommand
Paging/CS service notification 
securityModeComplete
Extended service request
Setup
rrc connection reconfiguration complete
securityModeCommand
rrc connection release
securityModeComplete
rrc connection setup complete
Identity Request
Call confirmed
Identity Response
radio bearer setup
Call Proceeding
radio bearer setup
complete 
radio bearer setup
radio bearer setup complete 
Alerting
Alerting
Secuity key, 
service type, 
and UE 
capability etc.
Bearer
capability,
coding scheme
and called ID
etc.
If apply early assignment,
MO RAB setup will not 
wait for MT Call 
Figure 10.29  Signaling in 2/3G cell.
eNodeB
BSC
Fall back to 2G
MME
MSC
Paging Request
5
6
1
2
3
4
Alerting
Voice
TAU Request
TAU Accept
CSFB paging success rate
CSFB call fall back success rate
CSFB call connection success rate
CSFB return to LTE success rate
1
Paging Request/CS Service Notification
Extended Service Request
UE Context Modification Request
UE Context Modification Response
UE Context Release Request
UE Context Release Command
UE Context Release Complete
Clear Command
Clear Complete
2
3
4
LU Request / Paging Response
Service Request
Figure 10.30  CSFB main KPIs from signaling message.

Circuit Switched Fallback Optimization
409
by real‐time correlation processing, analysis can realize the end‐to‐end optimization, quickly 
locate the CSFB terminal and network equipment issues, and improve CSFB service quality 
and customer perception.
MO (mobile originated) and MT (mobile terminated) KPIs are list below, the related signalings 
are shown in Figure 10.31.
●
●MO CSFB success rate = A_Alerting/S1_Extended_service_request
●
●MT CSFB success rate = A_Alerting/SGs_paging request
●
●MO fallback success rate = A_CR(RRC connection release)/S1_Extended_service_request
●
●MT fallback success rate = A_PAGING_RESP/SGS_Paging request
●
●MO call setup delay = A_Alerting‐‐‐‐‐S1_Extend_Service_request
●
●MTpaging success rate = SGSAP Service request/SGS_Paging request
●
●MT call setup delay = A_Alerting‐‐‐‐‐SGs_Paging
●
●MO fallback delay = A_CR‐‐‐‐‐S1_Extended_service_request
●
●MT fallback delay = A_Paging_response‐‐‐‐‐SGs_paging request
●
●Return time to LTE = Tracking area update complete‐rrc connection release
●
●Return to LTE success rate = Tracking area update complete/MO CSFB call release.
10.3.3  Fallback RAT Frequency Configuration Optimization
In standard CSFB procedure, there is no UE measurement during the fallback, which means 
CSFB RRC release with redirection is a blind release. UE is allowed to pick any cell on the indi-
cated frequency, or may even try other frequencies/RATs if no cell can be found on the target 
frequency. The selected RAT frequency is based on UE capability (band/RAT is supported) and 
prioirty (csFallbackPrio). CSFB frequency priorities defined with the csFallbackPrio parameter 
for each available frequency relation. Based on these two criterias, when several possible target 
frequencies have the same priority, the eNB applies a round robin scheme for the selection. It 
(1) Extended Service Request
(2) InitialContext Setup Respose
(4) CM Service Request
(5) Alerting 
(3) UEContext Release Complete
(6) Release Complete
(7) Tracking Area Update Request
eNB
MME
BSC
MSC
(3) Extended Service Request
(5) InitialContext Setup Respose
(7) Paging Response
(8) Alerting
(6) UEContext Release Complete 
(1) SGSAP Paging Request
(2) Paging/CS Service notification 
(4) SGSAP Service Request
(9) Release Complete
(10) Tracking Area Update Request 
eNB
MME
MSC
BSC
(4) Paging
Figure 10.31  MO and MT KPIs related signaling.
www.ebook3000.com

LTE Optimization Engineering Handbook
410
should add all the 2/3G frequency into one group so that it can be found all the 2/3G frequency 
in RRC release message. If 2/3G neighbor frequencies won’t be defined, CSFB call service 
request would be rejected. Besides, it is needed to define both WCDMA and GSM as candi-
dates, by defining both UtranFreqRelation and GeranFreqGroupRelation. By setting parameter 
csFallbackPrio for UtranFreqRelation to a higher value would set higher CSFB priority for 
­corresponding UMTS frequency.
Take GSM for example, GERAN starting ARFCN is based on the configuration in eNB that 
know how many ARFCNs are defined in OMC database. To speed up CSFB to GSM, it will be 
smart to geographically configure ARFCNs based on the collected 2G ARFCN and neighbor-
ing 2G ARFCNs.
Usually the operator can find that the problem area is the target GSM cells’ frequencies are 
not set in LTE cell, which causes this call back to a bad GSM cell, may lead to poor call quality 
and finally causes the connect failure. An example is shown in Figure 10.32.
Example 1
Assume CSFB GERAN relation frequency is cell A, cell A and cell B is co‐BCCH, B is located in 
mountain, and when UE fallback to cell B, the rx level is −93 to −99dBm, which result to UE lost.
In this case, frequency point of the MSC pool boundary needs to be optimized, to avoid the 
same frequency configured across the MSC pool. Meanwhile it needs to control the 4G and 
2G coverage, to avoid cross coverage. eNB can not configure the GERAN ­frequency point not 
belonging the pool. Through the pool boundary, the configured 2G frequency points need to 
be verified, if the 2G frequency points’ signal Rx lever of the other pools were too strong, it is 
proposed the BTS and antenna parameters need to be adjusted to control coverage.
For GSM, SDCCH establishment success rate impacts CSFB call setup success rate. SDCCH 
assignment success depends on GSM network quality and the degree of interference. In the 
CSFB process, as long as the SDCCH assignment fails, then CSFB call setup will fail. Therefore, 
the fallback GSM cell can be priority selected from the high SDCCH setup success rate cells.
Figure 10.32  Wrong GERAN relation frequency configured.

Circuit Switched Fallback Optimization
411
Example 2
Before call setup in GSM, MT UE camped on the 4G cell belongs to TAC 16640, MSC pool2. 
After fallback to GSM, the GSM cell belongs to LAC 16793, MSC pool1. During the procedure, 
UE did not send paging response, and the call failed. After deleting the GSM neighbor across 
the pool, the issue was solved. Example 2 is shown in Figure 10.33.
10.3.4  Call Setup Time Latency Optimization
CSFB call setup time latency (MO/MT and idle/connected) is calculated as below.
For originating call setup the start trigger is when the call is placed, which triggers the 
Extended service request from the UE to MME. The end trigger is when the UE has moved to 
2/3G RAN and received the CS ringing from MSC on the target cell to setup the call on 2/3G. 
Thus, the call setup delay for originating CSFB call is:
	
Call Setup Latency
ms
T
T
CSFB MO
CS Alert
Extended Service Request	
In the terminating call setup case, the start trigger is when the UE is paged by the MSC via 
the message CS service notification and sends Extended service request to MME. The end 
­trigger is when the UE has moved to 2/3G and received the CS ringing from MSC on the target 
cell to setup the call on 2/3G. Thus, the call setup delay for terminating call setup is:
	
Call Setup LatencyCSFBMT ms
T
T
CS Alert
Extended Service Request	
Figure 10.33  GSM neighbor across the pool.
www.ebook3000.com

LTE Optimization Engineering Handbook
412
Delay is the most critical aspect as CSFB call setup time might be prolonged due to the additional 
time required to measure the target RAN frequency. It can negatively impact the user percep-
tion. MO/MT CSFB call setup time latency is shown in Figure 10.34.
In case of terminating calls excessive delay can bring to failures due to timers in the core 
network. In the best case, the additional delay introduced by CSFB can vary from 0.7 to 2.5 seconds, 
but it can reach 6−10 seconds or more in case of failures. If originating and terminating UE are 
both CSFB calls, the additional delay introduced will be much longer. The most critical issue 
affecting the delay is the redirection to a wrong 2G or 3G frequency, that is, the target RAT/
frequency is not suitable to allow the radio access (Figure 10.35).
Let’s take an example of LTE to UMTS, to explain CSFB delay (one side) main contributor 
and statistics:
●
●LTE release delay, time for signaling on LTE: ~100 ms for idle UEs
●
●UMTS cell access delay, time to find and select a UMTS cell: 0.4 sec
●
●SIB reading, time to read relevant system information from UMTS cell: 0.2 sec
CSFB call setup time latency
Start: NAS extended
 
service request;
End: NAS alerting.
Figure 10.34  CSFB call setup time latency.
the additional delay introduced by CSFB
LTE release delay
(fallback to 2/3G)
time to find and select a 2/3G cell and read
relevant system information from 2/3G
LAU procedure in MSC pool
LAU in different MSC pool
+MTRF (terminate UE)
2/3G call
LTE release delay
(fallback to 2/3G)
time to find and select a 2/3G cell and
read relevant system information from 
2/3G
2/3G call
LTE release delay
(fallback to 2/3G)
time to find and select a 2/3G cell and
read relevant system information from
2/3G
2/3G call
Figure 10.35  CSFB typical delay.

Circuit Switched Fallback Optimization
413
●
●Call setup delay, time to establish call from RRC connection request to alerting: 6.7−8.5 sec
●
●If originating and terminating UE are both CSFB call, the additional delay introduced will be 
1.2−1.8 sec under RIM procedure.
As mentioned earlier, CSFB will prolong the call setup time. Longer call setup time can result 
in bad end‐user experience and would be perceived as outages. If we compare a call in the classic 
GSM network with a CSBF call it will be seen that there are some extra interfaces and ­procedures 
that are used. The main contributor to the additional call setup time is from reading system infor-
mation (SI) in the new cell. CSFB to 2G (GSM) today takes ~1.0−1.5 sec longer than CSFB to 3G 
in both MO and MT. The reason is slower reading of SIB information in 2G compared to 3G.
As you can see the call flows in Figure  10.36, CSFB causes this delay because of the 
­additional interfaces and procedures involved. While in a normal 2G‐2G call it has two nodes 
and the UE in the CSFB cases it has four nodes involved. Therefore, in 3G, it is typical to 
cause delays of 1.5 sec while in 2G it increases to 2.5 seconds. As we have discussed in 
Section 10.2.3.1, there are two features on top of CSFB to improve the call setup delay—one 
is RIM, the other is DMCR.
As mentioned earlier, there are four basic methods for directing the UE to the target system 
in CSFB call setup, these methods can be either blind or measurement‐based. Call setup time 
latency of these methods to fallback to 2/3G network is listed in Table 10.4. For redirect, the 
time to access 3G is typically around one second; obviously this assumes optimized neighbor 
list and target RAT with sufficient radio quality.
Call setup time with PS handover can be optimized by shortening the time to trigger to first 
measurement report and by optimization of target RAT neighbor lists. In case of a CSFB with-
out PSHO, the data might take 5 to 10 sec to resume, while for CSFB with PSHO it is done 
almost directly.
Page
Page
MSC
UE
2/3G
Cell change
Read SI
Page
Page
Extended service request
Release
Page response
MSC
UE
MME
2/3G
Page
LTE
Release
Call setup
Page response
Call setup
RIM:
–1.2 s improvement for 3G
–2.0 s improvement for 2G
DMCR: 0.7s improvement for 3G
Figure 10.36  Comparison of classic CS call setup in 2/3G (left) and CSFB call setup (right).
Table 10.4  Call setup time latency of the four methods.
Mobility method between LTE and 3G
3G/LTE in same  
CSFB MSS
Overlay 
CSFB MSS
1) Redirect based CSFB to 3G
+1.0 − 1.5 sec
+2.0 − 3.0 sec
2) PSHO based CSFB to 3G, (delta to 1)
−0.4 sec
−0.4 sec
3) Redirect based CSFB to 3G with SIB, (delta to 1)
−0.3 sec
−0.3 sec
4) Redirect based CSFB to 3G, deferred SIB 11/12  
reading (delta to 1)
−0.4 sec
−0.4 sec
www.ebook3000.com

LTE Optimization Engineering Handbook
414
CSFB with measurement‐based redirect takes some 440 ms longer compared to CSFB with-
out measurements, timing limit for the number of 2/3G cells and carriers must be considered 
during parameters setting and network planning. The example delay between Extended service 
request to RRC connection release with redirect info to 3G is listed in Table 10.5.
For GSM neighbor cell frequency planning, it is recommended to configure the overlapping 
cells’ BCCH (3*7 = 21) frequencies as the fallback frequencies.
The measured call setup time can also be improved (for incoming calls) with DRX paging 
cycle optimization and other parameters. By adjusting, that is, parameter DRXPagingCycle 
from 1280 ms to 640 m, call setup time can decrease 400 ms, decrease T3413PagingTimer 
(interval between two paging in S1 interface) also can decrease call setup time. In a live ­network, 
the paging parameters should be analyzed and fine‐tuned according to the real traffic. 
Figure 10.37 gives the parameters related with CSFB call setup latency.
For CSFB and session continuity, it needs to have TAC to LAC mapping where the UE on 4G 
cell will be redirected to the underlying 2/3G site. Every TAC can be mapped to one and only one 
LAC. Accordingly, one TAC can be defined in two TALs but shall be fully included within one 
LAC to have 1 TAC to LAC mapping. If TAC and LAC does not match in co‐site LTE and 2/3G 
cells, it will lead to even longer call setup times due to an additional LAU procedure. At the border 
of MSC pool, it will even cause connect failure, or increase a 1‐second time delay. Figure 10.38 
gives an example of CSFB call setup latency under TAC and LAC matches and not matches.
Table 10.5  Call setup time latency of different number of 3G cells and carriers.
Modus
average time
redirect without 3G measurement
110 ms
redirect with 3G measurement 1 neighbor 3G cell @ 1 UTRAN carrier
556 ms
redirect with 3G measurement 6 neighbor 3G cells @ 1 UTRAN carrier
707 ms
redirect with 3G measurement 12 neighbor 3G cells @ 1 UTRAN carrier
760 ms
redirect with 3G measurement 6 + 6 neighbor 3G cells @ 2 UTRAN carriers
853 ms
UE
MME
MSC
T3413: 3~5s
SGs-Paging-Request
S1 Paging
RRC Paging
DRX : 
1.28~0.64s
RRC Paging
maxNoOfPaging Records: 16
nB: T (1 PO in 1 PF)
N3413 : 4
pagingDiscardTimer: 3s
eNB
eNBs in 
TAI List
S1 Paging
S1 Paging
S1 Paging
CSFB To 2/3G
SGs-Paging-Request
Service Request
RNC
defaultPagingCycle
maxNoOfpagingRecords
nB
PagingDiscardTimer
tInactivityTimer
S1_T3413-PagingTimer
1.28 Sec
16
¼T
3 Sec
3 Sec
5–10 Sec
Paging Response or LU
Figure 10.37  CSFB call setup latency–related parameters.

Figure 10.38  CSFB call setup latency under TAC and LAC matches (left) and not matches (right).
www.ebook3000.com

LTE Optimization Engineering Handbook
416
10.3.4.1  ESR to Redirection Optimization
For CSFB, UE initiates the call by sending Extended service request (ESR) to MME. The time 
of transition to target RAT can be measured from Extended service request to RRC connec-
tion release. Once the UE is in target RAT, it initiates location update procedure if the 
unmatched LAC is met or even MSS is changed; this will increase the location update time, 
moreover, IMEI checking and TMSI reallocation may be done at this point. The duration of 
the procedure can be measured from RRC connection release to CM Service request. After 
that, the UE is able to start the actual CS call setup and the duration of this procedure can be 
measured from CM Service Request to Alerting. After the CS call is finished, the UE should 
return back to LTE and the duration of this procedure can be measured from channel release 
to TAU accept.
The duration between CM Service request to alerting, is basically the same for ordinary CS 
call in the target system. Comparing to other network, the delay in 4G (ESR to RRC redirection) 
is a little bit longer in Table 10.6.
Test result showing the variation of ESR to RRC redirection is still great; from procedures 
comparison between idle and connect mode, it can be seen that CSFB from idle mode took 
much longer time than connected mode due to its signaling exchange to MME which occupies 
the longest time (Figure 10.39).
For CSFB latency in 4G (ESR ‐ > RRC connection release), as call from idle mode takes much 
longer time than connection mode, one solution to reduce the 4G CSFB latency is to increase 
the inactivetimer setting to keep the UE in RRC connection.
10.3.4.2  Twice Paging
MSC server paging parameter is 9 s + 6 s, namely if the first paging failure (MSC server does not 
receive the paging response message), MSC server will send the second paging after 9 s, this is 
LTE twice paging strategy.
Combining MO and MT call signaling to analysis as shown in Figure 10.40, it can be found 
left signaling reflect that MO’s setup is sent on 10:41:48.789; however, TC fallback time is 
10:41:58.189, that means MT UE call prepare to fallback to GSM after 10s waiting. Obviously, 
Table 10.6  Typical CSFB to GSM call setup latency distribution (second).
Extended service 
request‐‐ > Alerting
Extended service 
request
‐‐ > RRC connection 
release
RRC connection  
release
‐‐ > CM service 
request
CM service 
request‐‐ > Alerting
channel 
release‐‐>
TAU Accept
11.4
0.066
1.941
9.363
1.223
5.1
0.115
1.488
3.545
0.448
5.3
0.11
1.94
3.235
0.474
6.8
1.004
2.39
3.406
0.465
4.6
0.082
1.261
3.257
0.47
14.6
0.202
1.403
12.996
0.47
5.7
0.204
1.83
3.68
0.537
5.5
0.114
2.093
3.346
0.454
6.6
1.509
1.597
3.469
0.444
6.1
0.956
1.822
3.272
0.484
5.6
0.218
1.929
3.491
0.455
5.2
0.521
1.475
3.209
0.63

ESM
UEContextModification
Procedure
rrcConnectionRelease
initialContextSetup
Procedure
rrcConnectionRelease
rrcConnectionSetup
Procedure
(SecurityMode
Procedure)
0.004s
0.000s
0.001s
0.066s
0.017s
0.168s
(0.027s)
0.001s
Idle mode
Connected 
mode
Figure 10.39  ESR to RRC redirection from connected mode and idle mode.
UE
MME
MSC
x
x
x
x
1st SGs paging request
2nd SGs paging request
UE Unreachable
S1/RRC page
S1/RRC page
Ts5 = 9s
Incoming call
Voice mail service
S1/RRC page
S1/RRC page
3s
3s
3s
3s
Figure 10.40  LTE twice paging strategy and an example from field test.
www.ebook3000.com

LTE Optimization Engineering Handbook
418
MT UE did not receive the first paging message due to poor coverage of LTE, and this cause the 
total call connection period lasts over 18 seconds.
10.3.5  Data Interruption Time
If a user is in an active PS data session (e.g., streaming media) when a voice call is initiated, the 
inter‐RAT transition and routing area update will interrupt the data transfer. The interruption 
time will depend on the mobility mechanism, as summarized in Figure 10.41 for an example 
of UMTS.
Using handover‐based CSFB, the data stream interruption time of 0.3 seconds is unlikely 
to be noticeable. The user will experience much higher (5 seconds) data stream interruption 
CSFB call
LTE
LTE
Time (s)
Data rate (kbps)
WCDMA
GSM
(DTM)
2) Resume
~5–10s w/o PSHO
3) Resume
3) Suspend
4) Resume
Handover
RRC Release
Acquisition on UTRAN
Read MIB & SIBs
Camp on Cell
Connection Setup
Total Data Interruption Time
Optional RAU Procedure
Handover
Redirection
Rel-8/
Rel 9
Rel 9
Rel-8
Skip SIBs
0.3
Basic
2.0
0.4
0.1
0.1
0.1
4.8
5.1
6.8
4.0
4.0
4.0
0.3
0.3
0.3
0.2
0.2
0.2
0.2
0.2
0.2
S1 Tunnel
0.3
Figure 10.41  Data interruption time.

Circuit Switched Fallback Optimization
419
in the redirection‐based Rel 9 SI tunneling and Rel 8 Skip SIBs methods, which may be 
mitigated in practice by the fact that user attention will already be diverted to initiating an 
outgoing call or receiving an incoming call.
10.3.6  Return to LTE After Call Complete
After the CSFB call is finished, the UE should return back to LTE if LTE network is a preferred 
access and coverage exists. This is possible by either UE‐controlled normal inter‐RAT cell rese-
lection or by redirect/handover based on a vendor‐proprietary trigger or by fast return mechanism. 
Return to LTE after call completion procedure is shown in Figure 10.42. Especially, the 2/3G 
feature release with redirect to LTE functions as well as fast return, to prevent a UE from being 
stuck in 2/3G after a CS session. It is not a coverage triggered release with redirect, and is triggered 
based on 2/3G channel switching state changes, it is a blind mobility mechanism.
The latency of return back to LTE measurement can be calculated as:
Start: UMTS/GSM RR channel release message; End: LTE NAS Tracking area update accept 
message.
Release with redirect to LTE is an IRAT mobility function that provides basic mobility for an 
LTE‐capable UE from 2/3G to LTE. Redirection to LTE is controlled by the network and can be 
initiated at several trigger points. A redirection to LTE can be initiated from the active states 
CELL_DCH, CELL_FACH, or URA_PCH. When the LTE coverage is good, UE redirected 
quickly to LTE (~2 to 3 s). With bad or non‐existing LTE coverage, UE will search for 10s for 
LTE frequencies included in the Release with redirect message; if not successful, UE shall search 
all LTE frequencies, which most likely will return to UTRAN more than 15 s (Figure 10.43).
RNC
UE
MSC
MME
eNB
Rrc connection release
Rrc connection release complete
Tracking Area Update
RRC connection establishment
Authentication Request
Authentication Response
Security Mode Command
Security Mode Complete
Tracking Area Accept
Tracking Area Complete
EMM Info
RRC Connection Release
UE Context Release Command
UE Context Release Complete
HLR
After the RRC connection 
release, a new combined 
attach process is need
Location update
Figure 10.42  Return to LTE procedure.
www.ebook3000.com

The info of redirect to LTE in the RRC release message was sent, 
meaning the feature “Release with redirect to LTE” can be 
achieved. The LTE-CSFB-UE can return to LTE as soon as CS 
call ending.
Figure 10.43  Release with redirect to LTE.

Circuit Switched Fallback Optimization
421
For the feature of fast return (FR), there are two methods. One is network side FR, and when 
the call is ended, the 2/3G network releases the user channels and distributes LTE frequencies, 
and without waiting for changing to an idle state, the UE will access LTE cells according to the 
indicated LTE frequencies. The other one is UE independent FR, and when the call ends, based 
on the cell information before fallback, the UE return 4G independently (need UE support). 
Field tests show that the minimum fast return to LTE latency is 0.5 s (Figure 10.44).
Without the feature of fast return, the normal procedure is that the user stays in 2/3G after 
the CS call has been released and perform normal idle mode mobility. For idle mode cell rese-
lection, when the call ended, the user stays in 2/3G cells, it can reselect to a high priority LTE 
cells by reading the 2/3G system information, which contains LTE neighbor cell information. 
User may stay in 2/3G for at least 10−15 s, as shown in Figure 10.45, which will have impact to 
data performance.
Fast return to LTE after call release is introduced to decrease the packet data transfer outage 
time in order to ensure that 4G‐capable UEs will spend as much time as possible under LTE 
coverage. With that feature, multi‐RAT mobiles can be requested to select an LTE cell directly 
after the speech call release, hence preventing the mobile to first select a 2/3G cell and then 
re‐select an LTE cell. As soon as the CS speech call is over, the UE is redirected to the LTE layer 
by methods list below:
Fast return is done by including the LTE EARFCN in the IE “Cell selection indicator after 
release of all TCH and SDCCH” of the channel release message. UE will skip the LA and RA 
update procedures in 2/3G, and the user can quickly resume data services in LTE. When the 
network side enable fast return function, it can be seen carrying a 4G macro base stations and 
ventricular frequency division sites in Release 2/3G talk after the end of the message, so that 
the UE can be quickly re‐select back to the 4G network. Fast return to LTE at CS call comple-
tion needs about 1 second, which is a faster procedure than 2/3G to LTE cell reselection 
(15–20s).
Longer return time to LTE can affect end‐user experience. Longer or delayed return time to 
LTE can exploit UE behavior and would delay return to LTE through chain reactions in certain 
circumstances. TAU rejections or PS session deactivation can also result in delays in return 
time to LTE.
CS call 
release
Measure LTE
neighbor cells
Sync to target LTE cell
and read SIB
TAU
2G
4G
Figure 10.44  Fast return.
4.62s
1.2s
Read 2G SIB,
Location
area update
Return to
LTE
2G Release
UE out of service 
Routing area
update
9.73s
2.87s
1.75s
8.53s
Measure LTE cell
UE out of service
Figure 10.45  CSFB to 2/3G, cell reselection back to LTE, and typical latency.
www.ebook3000.com

LTE Optimization Engineering Handbook
422
10.4  ­Short Message Over CSFB
Short message in LTE is the same service as in GSM and WCDMA. The solution re‐uses the 
SGs interface between MSC and MME defined to CSFB to carry SMS messages encapsulated 
in the NAS signaling channel between MME and terminals. In the SGs interface, NAS proce-
dures are used to translate circuit based SMS messages from the legacy network into the equiv-
alent packet–based SMS messages for the LTE network and vice versa, which does not require 
“fallback” to 2/3G network to send or receive SMS. Thus, the “SMS over SGs” method can be 
deployed without deploying CSFB. The solution is ideal for initial LTE services considered to 
be too complex for these initial terminals and so the NAS signaling based solution developed 
for CSFB has been extended to offer a low‐cost solution for SMS to data‐only devices.
”SMS over SGs” method can be used in an LTE data only network to provide SMS coverage 
for LTE UEs. At least one MSC in the legacy network must be equipped, through a software 
upgrade, to use the SGs interface.
If CSFB is set up between the legacy network and the LTE network, then all the MSCs in the 
legacy network are already set up with the SGs interface. So it does not need to do any addi-
tional work to support SMS, if CSFB is already set up.
UE needs SMS service but CSFB does not indicate this specific condition with the “SMS‐
only” indication in the EPS/IMSI attach request and combined TA/LA update procedures. This 
allows an operator to deploy the SGs for SMS delivery over LTE only (without CSFB support), 
as shown in Figure 10.46. In addition, this allows the MME to use a dedicated algorithm for the 
selection of the MSC that supports those UEs.
In a live network, it is possible that only certain MSCs in the network (one in minimum) is 
configured to support SGs when the network only supports SMS for SGs operation. However, 
such a minimal configuration can cause inter‐MSC location updates to be performed at every 
movement into/out of LTE coverage. SMS is delivered over signaling channel and no data path 
needs to be established. Once the UE is attached to both MSC and EUTRAN and if MSC wants 
to deliver a SMS to UE, it will simply send a downlink unit data to MME with SMS content. 
MME will dump this message in NAS message and send it to UE and in the same way if UE 
MSC-S
eNB
SGs
S1
Uu
LTE
1. Subscriber registers in MSC by CS signaling over Uu, S1-
and SGs-interface (attach/Location update).
2. Incoming SMS to 
subscriber in LTE
SMS-SC
4. UE responds and 
receives CS-SMS while 
roaming in LTE
3. SMS page over SGs, 
S1, Uu
MME
Figure 10.46  SMS over SGs Interface.

Circuit Switched Fallback Optimization
423
wants to send a SMS it will dump the message in NAS message and send it to MME. Mobile 
originating and terminating SMS procedure is shown in Figure 10.47.
10.5  ­Case Study of CSFB Optimization
CSFB optimization e2e view
The common reasons of CSFB failures include pseudo GSM base station, GSM TCH/SDCCH 
channel congestion, not received paging messages by the called terminal, 4G coverage issues 
like poor RSRP as well as with good RSRP but poor SINR, 4G cell overlapping, and overshoot-
ing, and so on, neighbor cell issues, PCI mod 3 issues, handover issues, TAC‐LAC mapping 
issues, and other issues.
10.5.1  Combined TA/LA Updating Issue
It is a combined TA/LA updating when CSFB UE is doing TA updating. It required not only 
tracking area updating success, but also location area updating success. For CSFB optimiza-
tion, when MT failure occurred, it should be firstly checked whether LA/TA is mapping 
correctly.
In this case as shown in Figure 10.48, only track area updating success in TAU accept 
but no TA/LA updated, location area updating is failure and cause is MSC temporarily 
not reachable. Then UE will send track area update request every 10s until reach tracking 
area updating attempt counter. Finally, the UE starts to select UTRAN radio access 
technology.
The other example is misconfiguration of TAC/LAC that results CSFB UE can not camp on 
LTE network. When the phone is powered on, 4G signal flashes quickly, then access to 3G 
immediately. From the signaling shown in Figure 10.49, it is found that when the UE finishes 
the attach procedure, detach request follows up.
UE attach request message and core network gives the attach result, which are shown in 
Figure 10.50.
As shown in Figure 10.49, it is found that after obtained the subscriber information from 
HSS, the UE sends session request to SGW without combined TA/LA update. After investiga-
tion, it is found the reason is that there is no configuration of TAC‐LAC‐MSC mapping in 
the MME.
UE
LTE
RAN
EPC
CS
Core
1. Service Request
2. Uplink SMS Delivery
3. Downlink SMS Delivery report
SMS
Delivery
report
UE
LTE 
RAN
EPC
SMS
CS
Core
1. Paging
2. Service Request
3. SMS Delivery / Downlink data
4. SMS Delivery report / Uplink data
Delivery
report
Figure 10.47  Overview of mobile originating and terminating SMS.
www.ebook3000.com

Figure 10.48  Combined TA/LA updating issue.

Circuit Switched Fallback Optimization
425
10.5.2  MTRF Issue
Without MTRF feature, MSC pool boarder issue will cause call setup failure. When the UE 
attached it is associated with an MSC based on the TA/LA mapping, if at the borders of two 
cells, a CFFB is triggered and the UE selects a 2/3G cell belonging to an MSC (pool) other than 
what the subscriber is registered with, and in the this case normally the CS call should fail. In 
order to avoid call setup failures, the MTRF features was implemented and with MTRF the call 
and subscriber is transferred from the registered MSC to the MSC, which was selected during 
the CSFB call.
MTRF is a supplementary feature to CSFB for boarder cases where the LTE cells overlap with 
2/3G cells belonging to different MSC, but it can be used in 2/3G only networks to decrease the 
call setup failure rates. Usually, there are two scenarios for the MTRF: one on borders where 
mapping of TA/LA might not be correct and another for physical movement of UE between 
two MSCs.
In a field test shown in Figure 10.51, it is found the call failure in 3G LA 54057(MSC2). 
After the terminated UE location area update procedure in 54507(MSC2), UE can not 
receive the setup message, and stay in connected state, after 10 secs receive the signaling 
connection release message from the network, the RF conditions is really good during the 
whole procedure.
This is the typical issue related with LA update.
After signaling analysis, it can be positioned as MTRF issue between MSC1 and MSC2, 
resulting in the failure of the called. When the UE fallback to different MSC, it will not be 
able to acquire the information of the initial attached MSC. The cause of the case is the 
possibility that TAs and LAs are not 100% overlapped at the border between MSCs coverage. 
For this kind of failure, it needs to make sure the LTE subscriber is physical located in the 
identified critical area, and the LTE subscriber to be called is registered in old MSC, and 
further verified that the LTE subscriber sends a location update request with CSMT flag 
toward the new MSC.
10.5.3  Track Area Update Reject After CSFB
When the CSFB call is completed, tracking area update reject usually happened after release 
with redirect to LTE. It would delay the reestablishment time for PS service.
UE capture the 
subscriber information
from HSS
UE sends session 
request to SGW
Figure 10.49  UE signaling after power on.
www.ebook3000.com

UE request :
Combined
EPS/IMSI attach
Core network
assign: EPS only
Figure 10.50  Attach request and result.

Figure 10.51  Signaling procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
428
10.5.3.1  No EPS Bearer Context Issue
UE needs to initiate track area update request after UE finishes call session and return to LTE 
network, but network replies track area update reject sometimes, the cause value (40) is “No 
EPS bearer context,” as shown in Figure 10.52.
Compare rejecting “Track area update request” with accept “Track area update request,” as 
shown in Figure 10.53, it shows if there are not any EBI (EPS bearer identity) active specially 
EBI5 inactive. But accept “Track area update request” with EBI5, which is the default EPS bearer.
The UE shall delete the list of equivalent PLMNs and deactivate all the EPS bearer contexts 
locally, if any, and shall enter the state EMM‐DEREGISTERED.NORMAL‐SERVICE. The UE 
shall perform a new attach procedure. For some vendor, it had been found if eNB doesn’t enable 
dynamic QoS modification feature, UE will still use 2Mbps UL/DL bandwidth or be detached 
directly when it returns LTE form 2G with data traffic. So it is needed to enable the feature so 
that the different networks can negotiate the user’s QoS dynamically.
10.5.3.2  Implicitly Detach Issue
For implicitly detached, the network detaches the UE, without notifying the UE. MME doesn’t 
inform any other node about it, so when new TAU is coming, it’ll be rejected, and new attach 
will be performed by UE. This is typically the case when the network presumes that it is not 
able to communicate with the UE, for example, due to radio conditions. The UE shall delete the 
list of equivalent PLMNs and delete any mapped EPS security context or partial native EPS 
security context, and shall enter the state EMM‐DEREGISTERED.NORMAL‐SERVICE. If the 
rejected request was not for initiating a PDN connection for emergency bearer services, the UE 
shall perform a new attach procedure.
An example shown in Figure 10.54 that as checked UE previous behavior in UMTS network, 
it is found that UE deactivated PDP context before UE entered LTE network.
Further to check the trace signaling in MME, it is found that before UE sends TAU to come 
back LTE after CSFB, MME receives the “delete bearer request” from SGW and responses the 
request, so MME deletes the bearer but cannot inform UE, which was in 2/3G, also, that is why 
the UE TAU fails due to implicitly detach. When UE re‐enters LTE network, UE has no EPS 
context, and its state in EPC is EMM‐DEREGISTERED, which will cause UE implicitly detach. 
EPC will reject any behaviors of UE before UE performed a new attach, so “Track area update 
request” was rejected by EPC (Figure 10.55).
UE fallback to UMTS network, when UE has no PS service, PDP context will be deactivated. 
If UE has PS service, PDP context will be hold on. “Track area update reject” is a normal 
­phenomenon when PDP is deactivated by UE.
10.5.3.3  MS Identity Issue
From field tests, sometimes the reason for TAU rejection is “MS identity cannot be derived by 
the network” cause #9 as shown in Figure 10.56.
These cases usually happened for communication problem between SGSN and MME.
10.5.4  Pseudo Base Station
The LAU procedure failed after UE fallback to illegal 2/3G base station and call failed. One 
example shows that the UE starts the CSFB call in the LTE cell and fallback to GSM cell (ARFCN/
BSIC: 67/52,RxLev: −54dBm, LAC: 14555, Cell ID: 4113) in Figure 10.57. Then the LAU request 
is rejected by the network and call failure. After verification, the GSM cell (LAC:14555, Cell 
ID:4113) does not exist in the GSM network, which is an illegal GSM base station cell.
The solution of these kinds of issues is trying to get rid of the illegal base station or delete the 
illegal 2G base station frequency point relation in the LTE cell.

Network starts 
the connection 
release, and at 
the same time, 
UE sends an 
attach request
Figure 10.52  Track area update reject.
www.ebook3000.com

Figure 10.53  Two‐track area update request message.

Figure 10.54  Implicitly detach.
www.ebook3000.com

Figure 10.55  TAU reject caused by implicitly detached.
Figure 10.56  MS identity issue.

Figure 10.57  Pseudo base station.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
434
Voice over LTE (VoLTE1) enriches LTE network with more voice‐related capability with com-
mon EUTRAN and EPC infrastructure. Common packet‐based mobility is also applicable for 
both LTE data and VoLTE services. In this book, “VoLTE” is used as the collective notation for 
both voice and conversational video over LTE. VoLTE voice call is based on GSMA PRD IR.92 
and VoLTE video call is based on GSMA PRD IR.94. Introducing VoLTE on IMS provides the 
service provider with a true converged network where services are available regardless of the 
access type network.
VoLTE provides a first line telephony service with high voice quality and short call setup. 
Voice and video are using QoS bearers with guaranteed bit rate to secure the service character-
istic. Voice over LTE allows very fast call establishment (~1 sec) versus CSFB toward 3G (~5 sec) 
and even more in case of CSFB toward the GSM (~8 sec). VoLTE avoids 4G data service inter-
ruptions and preserves the LTE data experience during speech communications while the 
throughput of concurrent data session is typically reduced in case of CSFB to 3G and even 
suspended in case of CSFB to 2G. Table 11.1 depicts the differences between CSFB and VoLTE 
UE call procedure.
The LTE standardization work has established that voice will predominantly be supported by 
an all‐IP network centralized on the IP multimedia subsystem (IMS). IMS architecture pro-
vides integrated voice, data, and multi‐media services interworking between different access 
networks. IMS‐based VoLTE puts the IMS in the center of the voice core network, managing 
the connectivity between subscribers and the implementation of policy control. The voice ser-
vice is then managed by a specially designed VoIP application server. IMS‐based VoLTE is 
standardized by 3GPP and it’s considered to be the target network infrastructure from long‐
term perspective. Usually initial LTE coverage is non‐contiguous, when UE is out of LTE cover-
age, single radio voice call continuity (SRVCC,2 voice call handover to CS in GSM or UTRAN) 
is used to keep the voice call continuity.
VoLTE phone can work in a variety of modes, attached to the different networks (2G, 3G and 
LTE), even also attached to two networks by dual standby terminal and therefore when UE 
originate/terminate the call, terminal/network needs to select which the network to be accessed. 
This process is called domain selection according to the network registration information. 
Terminating access domain selection (T‐ADS) realizes the function of domain selection,  
T‐ADS is processed by application server to determine if the call is for PS or CS domains.
11
VoLTE Optimization
1  In this part, VoLTE also called non‐native VoLTE, which is SIP client‐based. Third‐party applications can register 
to IMS system and establish VoLTE call.
2  OTT call might drop in this case.

VoLTE Optimization
435
VoLTE signaling and payload packets are supported by VoIP‐specific protocol stacks. E2E 
connections are managed using SIP with IMS, it requires specific QoS for voice bearers and SIP 
signaling to achieve performance for a satisfactory user experience and requires specific  
feature enhancement to achieve capacity and performance.
11.1  ­VoLTE Architecture and Protocol Stack
11.1.1  VoLTE Architecture
Voice service on EUTRA is available when IMS is installed in the core network. The VoLTE 
network architecture consists of E‐UTRAN, LTE core, PDN, and IMS. It interworks with 3G, 
which consists of UTRAN, UMTS core, and a circuit switched (CS) network. The MME pro-
vides functions that allow LTE and 3G to interwork. Voice service is based on VoIP session, 
which is controlled by a companion SIP session. Both devices need to be registered on IMS for 
VoLTE to VoLTE calls.
The solution is characterized by a SIP proxy, VoIP application server (AS), and media 
­gateway (MGW) co‐located with the MSC. It uses pre‐configured policy rules on the PDN‐
GW for binding VoIP sessions to EPS bearer and for QoS provisioning. IMS core network is 
also needed to be with centralized CSCF, HSS, and VoIP AS, using dynamic policy provisioning 
with co‐located PCRF (Figure 11.1).
The P‐CSCF is the first point of contact in IMS system for the UE for mobile access net-
works. The P‐CSCF forwards the SIP messages received from the UE to an I‐CSCF, E‐CSCF or 
S‐CSCF (and vice versa).
11.1.2  VoLTE Protocol Stack
All new interfaces of VoLTE and the new network protocols are represented in Table 11.2.
Protocol stack for VoLTE audio packet, extracted from official document IR.92 – “GSMA 
PRD IMS Profile for Voice and SMS.” Session initiation protocol (SIP) is a popular protocol 
used to create, modify, and terminate multimedia sessions, essentially negotiating a media ses-
sion between two users. SIP is not a transport protocol and does not actually deliver media, 
leaving that task to RTP/RTCP. Session description protocol (SDP) negotiates the multimedia 
characteristics of the session between sender and receiver (codecs, addresses, ports, formats, 
bandwidth require for the session).
IMS multimedia uses real‐time transport protocol (RTP) over UDP, RTP was originally 
defined in 1996 then redefined in RFC 3550 in 2003. RTP added a sequence number in order to 
Table 11.1  Difference between CSFB and VoLTE UE call procedure.
CSFB UE ‐ LTE access selected
VoLTE UE ‐ LTE access selected
Detect available network
Attach to the EPC and CS network over LTE
Setup Internet APN and do some browsing
Paging/call preparation between UE and MSC over LTE
Place a call/receive a call
Detect available network
Attach to the LTE network
Setup IMS APN and find P‐CSCF(s)
Register in IMS
Place a call/receive a call (keeping current 
LTE access)
www.ebook3000.com

LTE Optimization Engineering Handbook
436
identify the lost packets. Together with a new timestamp field it allows the receiver to play the 
packets in the correct order. Other new fields are SSRC (synchronization source, all the packets 
have the same SSRC identifier indicating that they are from the same source) and CCRC  
(contribution source) allow the tracking of one or multiple (in case of a conference) sources 
for the packet.
RTP is used in conjunction with the real time transport control protocol (RTCP). While RTP 
carries the media streams (audio or video), RTCP monitor transmission statistics and quality 
of service information. RTCP uses a separate flow from RTP. It is transported over UDP as well, 
and its purpose is to collect statistics on a given media connection including packet loss, jitter, 
round trip delay, and monitor the quality of the data transmission. RTCP provides feedback on 
the transmission and reception quality of data carried by RTP periodically. Each RTCP packet 
always contains either a sender or receiver report, sender report includes an absolute timestamp, 
Call control signalling
GERAN/UTRAN
User plane traffic
Other control signalling
S1-MME
MME
PCRF
HSS
Sh
TAS
Ma, ISC
MGCF
Mb
MGW
I/S-CSCF
BGCF
P-CSCF
Mw
P-GW
S-GW
Mi
Mn
Cx
Rx
Gx
S6a
D
MGW
MSS
S11
SGs
Sv
S1-U
LTE-Uu
eNB
Figure 11.1  Nodes for VoLTE.
Table 11.2  Interfaces of VoLTE and protocols.
Interfaces
Components LTE
Protocol
Sv
MSC server – MME(SGSN)
GTP‐Cv2
I2* Mj/Mg/Mx
MSS‐Server – IMS‐I‐CSCF
SIP
Cx
HSS(NSN)‐IMS Core
Diameter
Mw
P‐CSCF –Core IMS
SIP
Gm
P‐CSCF –UE
SIP
Mb
ATGW‐ MSC server
RTP
Rx
AF‐PCRF
Diameter
Gx
PCEF –PCRF
Diameter

VoLTE Optimization
437
to enable synchronization with different streams, receiver report includes number of received 
packets, to enable QoS determination. For VoLTE, RTCP is not sent during active media trans-
fer but is sent when the call is placed on hold.
IMS signaling is carried by SIP messages, which are carried over UDP or TCP, and compared 
to TCP, UDP has less overhead and no transport layer retransmission (to avoid increase in 
end‐to‐end delay) (Figure 11.2).
The response codes are consistent with, and extend, HTTP 1.1 response codes. There are 
six classes SIP messages defined: 1xx provisional, 2xx successful, 3xx redirection, 4xx request 
failure, 5xx server internal error, and 6xx global failure, which are shown in Figure 11.3 and 
Table 11.3.
ROHC
UM
AM
MAC
AM
IP
TCP
IMS Signaling
LTE Signaling
VOIP Traffic
RTP
RTCP
SIP*/
SigComp/
IPSec
UDP
PHY
RLC
PDCP
RRC
NAS
SDPSIP
SDPSIP
P-CSCF
BGF
PDN-GW
PDN-GW
S-GW
S-GW
Gm
Mb
eNodeB
eNodeB
UE
UE
AMR
RTP/RTCP
UDP/IP
PDPC
RLC
PDPC
PDPC
RLC
RLC
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
UDP/IP
RTP/RTCP
GTPv1-U
GTPv1-U
GTPv1-U
GTPv1-U
GTPv1-U
GTPv1-U
GTPv1-U
GTPv1-U
UDP/IP
PDPC
RLC
MAC
MAC
MAC
MAC
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L1
L2
L2
L2
L2
L2
L2
L2
L2
L2
L2
L2
L2
Relay
Relay
Relay
Relay
Uu
Uu
S1/u
S1/u
S1/S8
S1/S8
SGI
SGI
UDP/IP
Figure 11.2  VoLTE‐related protocol stack.
www.ebook3000.com

LTE Optimization Engineering Handbook
438
11.1.3  VoLTE Technical Summary
VoLTE delivers voice with high QoS (QCI 1, GBR EPS bearer) in transport and radio schedul-
ing, but admission and congestion control may be efficiently used to preserve the voice quality 
experience in presence of heavy traffic loads, so non‐GBR EPS bearers (QCI = 5) are used for 
REGISTER
INVITE
ACK
BYE
CANCEL
OPTIONS
MESSAGE
SUBSCRIBE
PUBLISH
NOTIFY
INFO
UPDATE
REFER
PRACK
REQUESTS/METHODS
RFC 3261
OWN RFCs
100–199
100 Trying
180 Ringing, and
183 Session progress
> 199
2xx Success
3xx Redirect
4xx Client Mistake
5xx Server Failure
6xx Global Failure
FINAL
PROVISIONAL
SIP MESSAGES
RESPONSES
Request
A
B
Provisional
response
Provisional
response
Final
response
Figure 11.3  SIP messages.

VoLTE Optimization
439
SIP and XCAP. In a live network, voice domain selection is IMS PS voice preferred and CS 
voice is secondary. VoLTE can provide base telephony service and supplementary services and 
supplementary service management using Ut with XCAP procedures. The main part of VoLTE 
need focused is described as the following:
VoLTE bearer management, includes PDN connection for IMS APN,3 signaling bearer setup, 
P‐CSCF discovery, home‐routed PDN connection/APN for Ut, handling of loss of PDN con-
nection, signaling, and GBR bearer.
IMS feature part, includes ISIM based authentication (USIM fallback), IPSec protection of 
signaling, both Tel‐URI and SIP URI, SigComp, GBA (recommended) or http digest authen-
tication for Ut, early dialogues and media, and IMS emergency.
IMS media, includes AMR narrow‐band and wide‐band codec and payload format, RTP pro-
file/data transport, RTCP usage, and Jitter buffer management.
SMS, includes SMS over IP (IMS) and SMSoSGs.
Wireless feature as shown in Table 11.4, includes CDRX, semi‐persist scheduling, TTI‐bun-
dling, forward handover with context fetch, and so on.
11.1.4  VoLTE Capability in UE
The UE indicates its E‐UTRA capabilities in the UE E‐UTRA capability information element at 
connection setup (RRC UE capability information message). The FGI (feature group indicator) 
indicates the functionalities supported by the UE. FGI 3, 7, and 27 will indicate the VoLTE 
capability of UE, and more information can be found in 3GPP TS 36.331 V9.16.0 (2013‐09), 
which is shown in Figure 11.4 and Table 11.5.
Table 11.3  SIP messages code.
100 Trying
180 Ringing
181 Call Is Being 
Forwarded
182 Queued
183 Session Progress
200 OK
202 Delivered
300 Multiple Choices
301 Moved 
Permanently
302 Moved 
Temporarily
305 Use Proxy
380 Alternative 
Service
400 Bad Request
401 Unauthorized
402 Payment Required
403 Forbidden
404 Not Found
405 Method Not Allowed
406 Not Acceptable
407 Proxy Authentication 
Required
408 Request Timeout
409 Conflict
410 Gone
411 Length Required
413 Request Entity 
Too Large
414 Request‐URI Too Long
415 Unsupported 
Media Type
416 Unsupported 
URI Scheme
420 Bad Extension
421 Extension Required
423 Registration Too Brief
480 Temporarily Unavailable
481 Call/Transaction does 
not exist
482 Loop Detected
483 Too Many Hops
484 Address Incomplete
485 Ambiguous
486 Busy Here
487 Request Terminated
488 Not Acceptable Here
491 Request Pending
493 Undecipherable
500 Server 
Internal Error
501 Not Implemented
502 Bad Gateway
503 Service Unavailable
504 Gateway Time‐out
505 Version Not 
Supported
513 Message Too Large
600 Busy Everywhere
603 Decline
604 Does Not Exist 
Anywhere
606 Not Acceptable
3  In the VoLTE work in GSMA, access point name (APN) used for IMS services has been defined in GSMA IR.88. 
The IMS APN shall be added to the list of APN names that are used in the LTE/EPC network, this means that IMS 
APN is added to the subscriber EPS profile in HSS and policy controller.
www.ebook3000.com

Table 11.4  VoLTE main wireless feature.
Features
Description
Benefits
CDRX
Connected mode short DRX allows UE 
to go to sleep between frames
Better talk time
HD vocoder
Core network and device support for 
AMR‐WB
HD voice with high quality
Semi‐persist scheduling(SPS)
Efficient scheduling for VoIP‐type traffic
System efficiency and capacity
TTI‐bundling
Bundle 4 TTI together in UL
Improve VoIP link budget
E‐911 support w/positioning
Emergency call with positioning over UP 
or CP, using E‐CID with TA,OTDOA 
with PRS and A‐GPS
LBS application
Voice call continuity(VCC)
Voice call continuity to 3G/2G CS and 
PS domain
Needed if LTE coverage is not 
ubiquitous
Forward handover with 
context fetch
Improve handover reliability
Robust mobility
Figure 11.4  FGI bits – extract of VoLTE‐related bits.
Bit
Definition
Note
3
. 5 bit RLC UM SN
. 7 bit PDCP SN
VoLTE
VoLTE
Bit 7 = 1
4
Short DRX cycle
Bit 5 = 1
5
Long DRX cycle, DRX command MAC control element
7
RLC UM
9
EUTRA RRC_CONNECTED to GERAN GSM_Dedicated handover
SRVCC
Bit 23 = 1
11
EUTRA RRC_CONNECTED to CDMA2000 1xRTT CS Active handover
SRVCC
Bit 24 = 1
20
If bit number 7 is set to ‘0’:
-SRB1 and SRB2 for DCCH + 8x AM DRB
If bit number 7 is set to ‘1’:
-SRB1 and SRB2 for DCCH + 8x AM DRB
-SRB1 and SRB2 for DCCH + 5x AM DRB + 3x UM DRB
-Regardless of what bit number 7 and bit 
number 20 is set to, UE shall support at least 
SRB1 and SRB2 for DCCH + 4x AM DRB
-Regardless of what bit number 20 is set to, if bit 
number 7 is set to ‘1’, UE shall support at least 
SRB1 and SRB2 for DCCH + 4x AM DRB + 1x 
UM DRB
27
. EUTRA RRC_CONNECTED to UTRA FDD or UTRA TDD CELL_DCH 
CS handover, if the UE supports either only UTRAN FDD or only UTRAN 
TDD
. EUTRA RRC_CONNECTED to UTRA FDD CELL_DCH CS handover, if 
the UE supports both UTRAN FDD and UTRAN TDD
SRVCC
Bit 13 = 1
28
TTI bundling
29
Semi Persistent Scheduling
RRC featureGroupIndicators= ‘11111110 00001101 11011000 10000000’
The indexing starts from index 1, which is the leftmost bit in the field

Figure 11.4  (Continued)
www.ebook3000.com

LTE Optimization Engineering Handbook
442
11.2  ­VoIP/Video QoS and Features
11.2.1  VoIP/Video QoS
The introduction of VoIP poses a number of challenges over LTE access network. To make 
VoIP attractive for commercial deployment, the capacity will also be desired to be either com-
parable to or more than that of legacy circuit system. To provide the quality of CS voice without 
excessive degrading the system capacity, end‐to‐end quality of service (QoS) support in the 
wireless and wireline packet network infrastructure is essential.
Voice is sensitive to data loss, but robust coding and well‐functioning error concealment 
units makes voice more tolerant to data loss than the other media types. Voice communica-
tion has very stringent end‐to‐end delay requirements and voice is thus very sensitive to 
delay and jitter.
Video telephony is very sensitive to data loss, video telephony requirements on frame errors 
are almost a factor of 10 less than for voice. Video telephony has also very stringent end‐to‐end 
delay requirements and is thus very sensitive to delay and jitter.
SIP signaling, XCAP4 signaling and other signaling must be error‐free for the transaction to 
be successful. TCP and SIP retransmissions are the mechanisms that guarantee that the data 
transfer becomes error free even though the EPS bearer introduces packet losses. SIP signaling 
is time critical (to allow fast call setup, etc.) and thus have a rank sensitive for delay/jitter, 
whereas XCAP signaling has less‐stringent delay/jitter requirements.
Policy and charging control (PCC) enables QoS supervision and control for the media parts 
of a SIP session. Policy and charging rule function (PCRF) supports 3GPP standardized PCC 
procedures and makes policy and charging decisions based on input from user subscription 
information, services information, and so on. PCRF creates policy rules based on session 
data and push appropriate policy rules (bandwidth, QoS, traffic flow) to P‐GW, and P‐GW 
interprets the rules and takes actions to establish required EPS bearers for VoLTE. PCC rules 
contain service data flow (SDF) description and charging and QoS properties to be applied for 
the flow identified by the SDF through the Rx and Gx interface.
When a VoLTE call is to be setup, a dedicated bearer for voice with QCI1 will be setup, initi-
ated from the P‐CSCF over Rx to PCRF, and then PCRF check the policy control and request 
Table 11.5  Feature group indicator (bit number 3, 7, and 27).
3
5bit RLC UM SN; 7bit PDCP SN
can only be set to 1 if the 
UE has set bit number 7 to 1.
Yes, if UE 
supports VoLTE
7
RLC UM
can only be set to 0 if the 
UE does not support VoLTE
Yes, if UE 
supports VoLTE
27
‐ EUTRA RRC_CONNECTED to UTRA  
FDD/TDD CELL_DCH CS handover, if the UE 
supports either only UTRAN FDD or only 
UTRAN TDD ‐ EUTRA RRC_CONNECTED to 
UTRA FDD CELL_DCH CS handover, if the UE 
supports both UTRAN FDD and UTRAN TDD
related to SRVCC ‐ can only 
be set to 1 if the UE has set 
bit number 8 to 1 and 
supports SR‐VCC from 
EUTRA defined in TS 24.008
Yes for FDD, if 
UE supports 
VoLTE and 
UTRA FDD
4  XML Configuration Access Protocol (XCAP) is the protocol that is used by the UE to configure various parameters 
for supplementary services such as call hold and call wait.

VoLTE Optimization
443
the dedicated bearer to the PGW through the Gx interface, and all the way through the net-
work to the UE (Figure 11.5).
In LTE, eNB only knows about the service is the QCI, service can be dependent triggered 
by QCI, for example, scheduler, coverage thresholds (individual bad coverage settings per QCI, 
for example, QCI1 = −80dBm, QCI9 = −85dBm), RLF settings per QCI, DRX settings per 
QCI, redirected carrier based on QCI, and handover trigger based on QCI, and so on.
Operator also marks DiffServ DSCP (diffserv code point) properly based in the QCI value of 
the used bearer, which is related to transport QoS. For VoLTE, SIP control signaling and RTP 
audio packet is assigned with the higher priority of LTE QCI (5 and 1) and DSCP marking over 
transport network. Transport network QoS is provided by mapping QCI to DSCP for the 
uplink over S1 and in the downlink for packet forwarding over X2. eNB marks DSCP priority 
on S1‐U, S1‐MME and X2 interfaces by mapping from LTE QCI, SGW, and PGW marks DSCP 
priority on S5/S8 and SGi interface by mapping from LTE QCI.
6b) Session 
Management Response
4) Create Bearer
Request
5) E-RAB Setup
Request
6a) Session Management
Request incl. TFT
3) Policy and 
Charging 
Rules 
Provision
Rx
2) Application/
Service Info
(start/end session)
EPS Bearer QoS
EPS Bearer QoS
EPS Bearer QoS
EPS Bearer QoS
1a) SIP INVITE (on SIP bearer)
1b) SIP 18x/200 (on SIP bearer)
P-CSCF/
IMS AGw
PCRF
S&P
GW
MME
eNodeB
7) RRC Reconf.
Applic
ation
LTE
radio
unit
8*) Optional:
Bearer
established
notification
PGW
8
8
TFT3
TFT2
IMS
(P-CSCF)
Control Sig
INVTE sip
Content-Type: application/sdp
Content-Length: 540
v = 0
o = sip:+16309798028
s = session
c = IN IP4 135.185.13.175
b = CT:1000
t = 0 0
m = audio 51306 RTP/AVP 4
a = rtpmap:4 AMR-WB/8000
m = video 7834 RTP/AVP 34 35
a = rtpmap:35 H264/90000
a = rtpmap:34 GVA/90000
a = sendrcv
QCI 6/7 H.264/GVA
QCI 5 -SIP SIGNALLING
QCI 1 – AMR-WB
8
Packet
Filter(s)
1
Packet
Filter(s)
1
Packet
Filter(s)
1
MGW or
UE
Audio
TFT1
UE
Video
IMS PGW
P-CSCF
PCRF
Audio RTP/RTCP: QCI 1, ARP, GBR
Video RTP/RTCP: QCI 6/7, ARP, GBR
m =audio RTP/RTCP, AMR-WB,BW*
m =video RTP/RTCP, H264/GVA,BW*
PGW
Figure 11.5  QoS negotiation principles at session setup.
www.ebook3000.com

LTE Optimization Engineering Handbook
444
Example: QCI 5 and 1 to DSCP mapping
SIP
Speech
11.2.2  Voice Codec
For VoLTE UE to VoLTE UE call, voice codec is negotiated by the UEs during the SIP session 
opening. They have to select a common type. Possible codecs for voice include EVCR‐A, 
EVCR‐B, AMR, AMR‐WB5 (AMR‐wideband) and even EVS.6 For instance, AMR 12.2, which 
RTP payload size is 32 bytes, AMR‐WB 12.65 RTP payload size is 33 bytes, AMR WB 23.85 
RTP payload size is 60 bytes, and SID RTP payload size is 7 bytes. The UE must be able to oper-
ate with any subset of the 8 modes for AMR and any subset of the 9 modes for AMR‐WB. 
Tandem free operation (TFO) and transcoder free operation (TrFO) must be supported in the 
IMS core network for CS interworking.
VoLTE performance specifications, including video, is listed below. Video quality in terms of 
the objective estimate is from PEVQ (ITU‐T J.247). Rule of thumb and need to optimize and 
fine‐tune per operator basis is relevant as a service KPI requirement (Figure 11.6):
●
●Speech latency (end‐to‐end delay) requirement is from standard ITU‐T G.114 and 3GPP TS 
22.105, no more than 150 ms is preferred, at maximum 400 ms.
●
●Packet loss, E2E conversational voice packet loss rate is defined as 1% in TS23.203 for VoLTE 
audio packet transported between UE and PGW, at maximum 3% FER), video telephone at 
maximum 1% FER, and data service requires 0% FER.
●
●Radio performance is linked to speech quality (MoS) through:
M-to-E
Codec
64 kbps
FER
5%
1%
300 ms
225ms
Users very
satisfied
Users
satisfied
Some users
dis-satisfied
Many users
dis-satisfied
12.2 kbps
Figure 11.6  Radio performance is linked to codec, FER, and mouth‐to‐ear delay.
5  AMR‐WB specification: 3GPP TS 26.171 and GSMA IR.36.
6  EVS, codec for enhanced voice services, the EVS standard is the first 3GPP codec to deliver speech and audio in 
super‐wideband full‐HD voice quality, bringing mobile audio on par with the audio experienced through today‘s 
digital media services. The algorithm delivers speech and audio up to 20 kHz audio bandwidth, outperforming the 
audio quality of today’s mobile phone calls.

VoLTE Optimization
445
Codec, AMR 12.2 kbps and above provides good speech quality,
Frame erasure rate (FER), less than 1% provides good speech quality,
Mouth‐to‐ear delay, less than 225 ms provides good speech quality.
●
●The packet delay budget (PDB) requires no more than 80 ms for voice, and no more than 
130 ms for video. PDB is measured from entering PDCP in eNB to leaving PDCP in the UE 
and vice versa, which includes 20 ms budget for interactions between PCRF, PGW, and eNB 
(20 ms (PCRF‐eNB) and 80 ms (air interface). The Number of HARQ retransmissions should 
be considered that cannot exceed PDB 80 ms in live network.
●
●Call setup time is 3 to 6 sec.
●
●Video path delay (camera‐to‐display delay) should less than 400 ms.
●
●Video frame loss: as well as video frame rate > = 25 Hz and video frame loss <0.2%7 (less than 
one visible degradation per 20 sec “watching” sequence), unlike for speech, most common is to 
split a video frame over to RTP packets, hence when looking at the residual packet loss ration 
(PLR), the target is to be <0.1% for the video call, assuming evenly distributed random packet 
loss and two packets per video frame. The maximum allowed video frame loss is 1% FER.
●
●Video path delay and audio‐video “lip” sync, the audio shall not be more than 25 ms ahead of 
the video, and video shall at the most be <60 ms ahead of speech to perceive acceptance lip‐
sync performance.
During VoLTE call setup, codec negotiation is needed. End‐to‐end codec negotiation with 
SIP(‐I)‐based networks and HD voice across network borders is enabled. All 3GPP codecs cur-
rently supported by SIP(‐I) and G.729 can be negotiated end‐to‐end. Codecs are negotiated 
between UEs at session setup and potentially at session modification using SDP offer/answer 
over SIP. The UEs may also explicitly negotiate max bandwidth to be used for voice and video.
For example, here are the user accepts and response with DTMF during a VoLTE call.
UE1 initiates a call by sending invite message to a SIP client (DTMF host), SDP contains nar-
rowband and wideband codec support for both speech and DTMF (telephone‐event). UE2 
responds with 200 OK and receives ACK; 200 OK contains a SDP answer that selects AMR‐
WB as the codec to be used in this call.
UE1
UE2
INVITE SDP
200 OK SDP
m=audio 49152 RTP/AVPF 97 98 
99 100 101 102
m=audio 4 9152 RTP/AVPF 97 
98 99 100 101 102
a=rtpmap:97 AMR‐WB/16000/1
a=rtpmap:97 AMR‐WB/16000/1
a=fmtp:97 mode‐change‐ 
capability=2; max‐red=22 0
a=fmtp:97 mode‐change‐ 
capability=2; max‐red=220
a=rtpmap:98 AMR‐WB/16000/1
a=rtpmap:98 AMR‐WB/16000/1
a=fmtp:98 mode‐change‐ 
capabi1ity=2; max‐red=22Q;  
octet‐
a=fmtp:98 mode‐change‐ 
capability=2; max‐red=220; octet‐
align=l
align=l
a=rtpmap:99 
telephone‐event/16000/1
a=rtpmap:99 
telephone‐event/16000/1
a=fmtp:99 0‐15
a=fmtp:99 0‐15
a=rtpmap:100 AMR/8000/1
a=rtpmap:100 AMR/8000/1
7  The measured time between visible degradations for the end user should be once per 20 seconds for video 
telephony (maybe longer for “premium” video conferencing services.” Given one packet per frame and a frame rate of 
25 Hz, that would correspond to a frame error rate of 1/500 = 0.2% end‐to‐end.
www.ebook3000.com

LTE Optimization Engineering Handbook
446
a=fmtp:100 mode‐change‐ 
capabi1ity=2; max‐red=220
a=fmtp:100 mode‐change‐ 
capability=2; max‐red=220
a=rtpmap:101 AMR/8000/1
a=rtpmap:101 AMR/8000/1
a=fmtp:101 mode‐change‐ 
capabi1ity=2; max‐red=220;  
octet‐
a=fmtp:101 mode‐change‐capa-
bility=2; max‐red=220; octet‐
a1ign=1
align=l
a=rtpmap:102 
telephone—event/8000/I
a=rtpmap:102 
telephone‐event/8000/1
a=fmtp:102 0‐15
a=fmtp:102 0‐15
a=ptime:20
a=ptime:20
a=maxptime:24 0
a=maxptime:240
a=sendrecv
a=sendrecv
11.2.3  Video Codec
A conversational video8 service session is an additional IMS service that can be added or 
removed by the end user as complement to a voice session in IMS or it can be established with 
voice at the same time. The 3GPP standards offer a variety of terminal, radio, and core network 
configuration options when launching IMS voice and video services over an LTE/EPC network. 
Therefore, GSMA has defined two service profiles. IR.92 defines the conversational voice pro-
file and IP.94 defines the conversational video profile. These two profiles define a minimum set 
of features to be implemented in the terminal and network (Figure 11.7).
IMS
– Video call setup.
– Add/drop of video media to established voice call.
– “video” media feature tag in SIP headers.
– Same as IR.92.
– Add/drop of video media also in multi-party conferences
EPS bearer management
– Voice media as IR.92.
– Video media using QCI = 2 GBR, or a non-GBR bearer.
LTE radio capabilities
– Support for video.
– EPS bearer with QCI = 2 implemented with RLC 
  AM or RLC UM data radio bearers.
EPC
IMS
Media
IMS
Features
LTE
IMS media
– Voice media same as IR.92.
– H.264 level 1.2 as mandatory video codec.
– RTCP for lip sync and video codec control.
MMTEL
services
Supplementary services
IR.92/94
phone
Figure 11.7  IR.94 profile.
8  Video telephony is a service providing interactive communication with a two‐way full‐duplex audio and associated 
video image, with the output audio and video temporally synchronized.

VoLTE Optimization
447
3GPP has standardized that QCI1 is used for the transmission of voice RTP packets and 
QCI2 is used for the transmission of video RTP packets. QCI1 and QCI2 will be triggered from 
PCRF on demand, while QCI2 will always exist together with QCI1. QCI1 and QCI2 will both 
carry RTCP packets. Actually, video can either be supported on a GBR bearer (QCI2) or on a 
non GBR bearer9 (QCI6/8).
Video standards are mainly from:
●
●ITU‐T (International Telecommunication Union, H series standards, e.g., H.261, H.263, and H.264).
●
●MPEG (Motion Picture Experts Group), formed by ISO (International Organization for 
Standards) and IEC (International Electrotechnical Commission), MPEG standards are 
MPEG1, MPEG2, and MPEG4.
●
●3GPP, support of ITU‐T recommendation H.264 Constrained Baseline Profile (CBP) Level 
1.2 as specified in 3GPP TS 26.114, is mandatory in the UE and in the IMS core network. 
CBP primarily for low‐cost applications, this profile is most typically used in videoconfer-
encing and mobile applications. It corresponds to the subset of features that are in common 
between the baseline, main, and high profiles.
The recommended video codec for conversational video service in VoLTE is H.264.10 It is 
recommended to use a low complexity profile (baseline profile level) of that video codec. The 
frame rate should be 25 Hz.
Given a video format of 240p, the widescreen format of QVGA, a video bitrate of more than 
350 kbps is the target for medium‐motion video and more than 225 kbps for low‐motion content, 
when shown in native format. If the video is shown upscaled, or if a higher video format is used, 
significantly higher video bitrates are required. For VGA video format, H.264 video codec, 480p 
(VGA) native video format (applicable for a smartphone), it is recommended video bitrate should 
be higher than500 kbps. Table 11.6 shows the various video resolution and the required bitrate.
3G video telephony (176 x 144 pixel = > 25344 pix) requires 64 kbit stream, 12 frames per 
second (FPS). Video over LTE, two levels of video quality is described for video telephony in 
this book: one is the lower quality level, which is corresponding to the minimum requirement 
for video quality specified in GSMA IR.94 that needs to be mentioned due to its reference in 
Table 11.6  Video telephony bitrate.
Level
Resolution
FPS
Requested BW (kbps)
3.1
720P (1280 × 720)
30
2176
3.0
VGA (640 × 480)
30
1216
2.2
VGA (640 × 480)
15
896
1.3
QVGA (320 × 240)
30
640
1.2
QVGA (320 × 240)
15
424
9  Video will in some deployments be sent over a non‐GBR dedicated EPS bearer with, for example, QCI 6 or 8, 
which uses the same configuration as for the internet data services.
10  H.264 is perhaps best known as being one of the video encoding standards for Blu‐ray Discs, all Blu‐ray Disc players 
must be able to decode H.264. It is also widely used by streaming internet sources, such as videos from Vimeo, YouTube, 
and the iTunes Store, web software such as the Adobe Flash Player and Microsoft Silverlight, and also various HDTV 
broadcasts over terrestrial (ATSC, ISDB‐T, DVB‐T or DVB‐T2), cable (DVB‐C), and satellite (DVB‐S and DVB‐S2).
11  Prefix Q means a quarter of the original resolution, for example, the QVGA resolution is 25% of the VGA 
resolution. The Q formats are more suitable for handheld devices due to the lower resolution.
www.ebook3000.com

LTE Optimization Engineering Handbook
448
the IR.94 document. This quality level is optimized for operation using a resolution of QVGA11 
(320 × 240 pixels). The other higher‐quality level is the preferred level given today’s smart-
phones with large high‐resolution screens, it is optimized for operation using a VGA resolution 
(640 × 480) pixels.
The following recommendations of video (as per IR. 94) on bit‐rate are suggested in Table 11.7:
●
●Provided QVGA, H.26412 Constrained Baseline Profile (CBP), 12.5 or 15 fps (frames per 
second) shall be higher than 350 kbps in order to achieve a good video quality.
●
●VGA, H.264 CBP Level 2.2 or H.264 Constrained High Profile (CHP), 25 or 30 fps, shall be 
higher than 500 kbps in order to achieve a good video quality.
It is important to understand that bitrate with video does not work as bitrate with speech. For 
speech, the codec choice commonly implies an exact bitrates. For video, the specifications sup-
port video from a few kbps up to several hundred Mbps. Even when a specific implementation 
has expressed a certain level limit, that limit is a maximum limit and any bitrate lower than the 
limit can be received and may be sent. Video is inherently variable‐rate, the rate control algo-
rithm that allows setting a target bitrate and may also control the bitrate variability. This rate 
control is not standardized, so there is simply no guaranteed behavior. An average variation per 
10 seconds or more video of 5% from an encoder must be considered good constant bitrate 
video. The peak rate overshoot per 1 second moving average can be 50% and the instaneous bit 
rate overshoot can be up to 200% when I‐frames are sent.
Table 11.7  The recommended video properties.
Property
VGA resolution Recommendation
QVGA resolution (IR.94 minimum 
requirement)
video format 
(Picture size)
VGA (640 × 480)
QVGA (320 × 240)
video codec
At least H.264 Constrained Baseline Profile 
(3.0) or Constrained High Profile
At least H.264 Constrained Baseline 
Profile (1.2), low complexity
video refresh
25 or 30 fps recommended
At least 15 fps for the video telephony 
service
Min bit rate
225 kbps (based on ER quality tests)
125 kbps (based on ER quality tests)
Recommended 
bit rate
> = 500 kbps
> = 350 kbps
Video path 
delay (VPD)
<400 ms
Residual packet 
loss ratio
<0.1%
Session Setup time
<4.0 sec
ROHC
ROHC will not be used on the video flow
Scheduler
Proportional fair scheduler with minimum rate, rate adaptation
TTI bundling
Also be used for the video transmission
12  H.264 also known as advanced video coding (AVC), MPEG‐4 Part‐10 or Joint Video Team (JVT) is the most 
advanced video codec, was standardized in 2003. H.264 is for video compression and is currently one of the 
most commonly used formats. It is capable of providing good video quality at substantially lower bitrates than 
H.263 standards.

VoLTE Optimization
449
When it comes to definition of good video quality bitrate is definitely an important factor. 
Bitrate requirements for video for a given resolution and frame rate depends a lot of the con-
tent. Typical low motion video is of the type “talking heads.” Normal usage more likely repre-
sents the “medium motion” class. Extensive subjective experiments hint at a preferred bitrate 
of >350 kbps for handheld devices to meet quality requirements, large tablets will even require 
higher bitrates for user satisfaction. Actually, the VoLTE device shall dynamically optimize 
the video encoding to adapt the network bandwidth conditions. Optimally, the client adapts 
the codec rate to the changed conditions by increasing robustness and lowering the data 
rate. The most probable cause for this situation is that the radio cannot sustain the guaranteed 
bit rate for a particular UE due to too low SINR for that particular UE or congestion in the cell.
For video, the effective bitrate is calculated as below:
Example: calculate the effective bitrate for a codec bitrate of 384 kbps with a frame rate of 30 
fps. The frame size is 384000/(8*30) = 1600 bytes, which exceeds the MTU size. Hence this 
frame needs to be split into two RTP packets, each one with an overhead of 42 bytes. The effec-
tive bitrate is (1600 + 2*42)*30*8/1000 = 404.2 kbps. Table 11.8 shows effective bitrates for a set 
of codec bitrates used for video.
One key service KPI is the video quality, measured in the unit MoS (mean opinion score) 
derived from subjective viewing tests. Video quality depends on different network and termi-
nal capabilities like screen size and resolution, video codec, frame rate as well on the packet 
loss, delay and jitter in the EPS, and IP backbone. HQ video does require high bitrates and has 
a high elasticity, which means a high ariation in bandwidth requirements. As shown in 
Figure 11.8, video bitrates variations related to MOS and different type of motion, there are 
high bandwidth requirements in case of slow and medium motion13 in combination with an 
acceptable MOS 3.5.
Actually, extensive subjective experiments hint at a preferred bitrate of more than 350 kbps 
for handheld devices to meet quality requirements, large tablets will require higher bitrates for 
user satisfaction. Video bitrate demands for high quality video H.264 VC is shown in Figure 11.9.
One LTE‐related issue for video telephony is the fact that there are only four logical channel 
groups in LTE, and one is reserved for radio layer/NAS signaling. Hence, there are only three 
groups to use for VoLTE and internet services. The probable setting is to have QCI1 and two in 
same group and QCI = 5 in a separate group. Video telephony user plane of calling side is shown 
in Figure 11.10.
11.2.4  Radio Bearer for VoLTE
For VoLTE, PDN connection (EPS session) handles flows of the IP packets, that are labeled 
with UE IP addresses, between a UE and a PDN, which is represented by UE IP address and 
Table 11.8  Effective bitrates.
Codec bitrate [kbps]
Effective bitrate [kbps]
110
120.1
220
240.2
384
404.2
13  Typical low motion video is of the type “talking heads.” Normal usage more likely represents the “medium 
motion” class.
www.ebook3000.com

1.0
1.5
2.0
2.5
3.0
3.5
4.0
4.5
5.0
0
125
250
375
500
[kbps]
MOS
Medium
Motion
Low Motion
H.264 MoS scores
for QVGA
(handheld device)
Figure 11.8  Video bitrates variations related to MoS and different type of motion.
Simple content
(white shade)
“S-shape” distribution observation when high and low end device
implementations are used to play content with varying encoding difficulty
Difficult content
(grey shade)
2.5Mbps
1
2
3
4
2.0
1.5
1.0
0.5
suggested MOS target
Difficult content (sport)
Video bitrate to be above
(prerequisite high-end
VC implementation)
Easy content (News)
1.5
2.0
2.5
3.0
3.5
4.0
4.5
225
350
500
650
800
1000
1500 kbps
Typical target
to be above
Typical target
to be above
MOS-VQS 3.5
360p upscale 25Hz
480p 25Hz
480p=864x480 pixel
300–500kbps
1–1.5 Mbps
Figure 11.9  Video bitrate demands for high quality video H.264 VC.

PCRF
RTP Audio DL stream
RTP Audio UL stream
RTCP Audio DL stream
RTCP Audio UL stream
RTCP Video DL stream
RTCP Video UL stream
RTP Video DL stream
RTP Video UL stream
PGW
S5-U DL TEID, 4 associated TFT, Bearer QoS
S5-U UL TEID, 4 associated TFT, Bearer QoS
QCl 2
S1-U DL TEID
Dedicated Radio Bearers
QCl 2
QCl 2
QCl 2
QCl 2
QCl 2
SGW
MME
eNB
UE
IMS
UE IP address listening on:
part1 for RTP audio,
part1+ 1 for RTCP audio,
part2 for RTP video,
part2+ 1 for RTCP video,
part3 for RTP audio,
part3 + 1 for RTCP audio,
part4 for RTP video,
part4 + 1 for RTCP video,
Sending on:
S1-U UL TEID
Figure 11.10  Video telephony user plane.
www.ebook3000.com

LTE Optimization Engineering Handbook
452
APN (access point name, IMS APN is for VoLTE). EPS bearer is a pipe through which IP packets 
are delivered over the LTE network between UE and P‐GW. UE can have multiple EPS bearers 
concurrently (up to 11 EPS bearers, EBI range is 5‐15, which is allocated by an MME). E‐RAB 
is a bearer between UE and S‐GW, and consists of a DRB and an S1 bearer. Different E‐RABs 
are identified by their E‐RAB ID, which is allocated by an MME, E‐RAB ID = EBI.
At least the following radio bearer combination at UE and eNB are required for VoLTE: 
SRB1 + SRB2 + 2x AM DRB + 1x UM DRB. SRB1 and SRB2 is required for RRC and NAS signal-
ing. One acknowledged mode (AM) DRB is required as the default bearer (QCI‐8/9), one AM 
DRB is required for SIP signaling (QCI‐5), and one unacknowledged mode (UM) DRB is 
required for VoIP traffic (QCI‐1).
SIP signaling default bearer14 is dedicated bearer that is allocated during attach time. SIP 
signaling with QCI 515 over the default bearer is always established on IMS PDN/PGW to 
reduce extra message handshaking and call setup delay. Additional dedicated bearer with QCI 
1 for VoIP RTP bearer or QCI 6/7 for video bearer is allocated on the same IMS PDN/PGW. 
Figure 11.11 is an illustration of default and dedicated bearers.
Radio Bearer
E-RAB
EPS Bearer
UE
eNB
S1
S5
IP packet
IP packet
IP packet
IP packet
P-GW
SGi
PDN
S-GW
LTE-Uu
EPS Bearer ID (Default Bearer) = 5
E-RAB ID = 5
DRB ID
UL S1 TEID
UL S1 TEID
UL S5 TEID
UL S5 TEID
DRB ID
DRB ID
DRB ID
DL S1 TEID
DL S1 TEID
DL S5 TEID
DL S5 TEID
E-RAB ID = 10
EPS Bearer ID (Dedicarted Bearer)= 10, LBI= 5 (Default EPS Bearer ID)
S1 Bearer
S5/S8 Bearer
Figure 11.11  Default and dedicated bearers and mapping among EPS bearer IDs.
14  A default bearer is the first EPS bearer established to the network and maintained until UE is switched off or out 
of coverage, at least one default bearer remains active. A dedicated bearer is established by network to allow flow of 
traffic between UE and PGW and is maintained until data is transferred (various QoS). An EPS bearer is composed 
of three parts: the data radio bearer (over the air), the S1‐U bearer (between eNB and S‐GW), and the S5 bearer 
(between S‐GW and P‐GW). Dedicated bearer acts as an additional bearer on top of default bearers, which provide 
the tunnel to one or more traffic (VoLTE, video…), it can be GBR or non‐GBR.
15  GSMA IR.92 defines that QCI5 will be the default bearer for SIP signaling/VoLTE services. The UE sets up the 
default bearer by attaching the IMS APN. Once the IMS APN default bearer (QCI5) is established, the UE can 
register in the IMS system using SIP signaling. Upon successful registration the UE will make and receive calls using 
SIP signaling over QCI5.

VoLTE Optimization
453
The default EPS bearer keeps the UE connected to the network. When there is no user traffic 
and thus the UE state changes to idle, E‐RAB is deactivated and only the S5 bearer stays on. 
However, as soon as new user traffic arrives, E‐RAB is re‐established, allowing the traffic to be 
delivered between the UE and the P‐GW.
For uplink, different RB mapping of the logical channels to the UL logical channel groups, 
QoS for default bearer is provided by HSS, QoS for dedicated bearer is provided by PCRF, 
shown in Table 11.9.
LTE supports up to two VoIP bearers per UE. For UE with two VoIP bearers established and 
semi‐persistent scheduling (SPS) method is configured, SPS transport block size (TBS) shall 
be the sum or the maximum of the payload size of the two VoIP bearers. The downlink semi‐
persistent scheduler shall multiplex MAC SDU of two VoIP bearers into one MAC PDU in each 
SPS period. In the uplink direction, eNB MAC layer shall be able to demultiplex two MAC 
SDUs from one MAC PDU and deliver each MAC SDU to corresponding RLC entity for each 
VoIP bearer.
The following voice RB metrics are mainly used to measure the quality of service for VoIP. 
One is bandwidth, the other is E2E delay. The bandwidth depends on the type of voice codec. 
Generally, the required bandwidth for a single call, one direction, is 12.2 kbps for AMR‐NB 
codec or 23.85 kbps for AMR‐WB codec. Typically, these codec delivers one voice packet each 
20 ms. For AMR‐NB, each packet is sent in one ethernet frame. With every packet of size 256 
bits, headers of additional protocol layers are added. These headers include RTP + UDP + IP 
headers and PDCP/RLC/MAC headers with preamble of sizes 32 + 8 + 8 + 8, respectively. 
Therefore, a total of 312 bits needs to be transmitted 50 times per second in one direction. The 
guaranteed bit rate (GBR) for VoLTE is determined by the formula below:
	
BW
VAD
VoTE IP PayloadSize
Overhead
Voice SamplingRate
VA
_
_
_
1
D
Silence IP PayloadSize
Overhead
Silence SamplingRate
_
_
_
8bit byte
/
	
Table 11.9  RB mapping of the logical channels to the UL logical channel groups.
LCG ID
0
1
2
3
Scheduling  
strategy
IR92
SRBs with highest 
priority
QCI5
QCI1
QCI2  
Prio. < QCI1 
and QCI5
QCI 7/8/9 
Prio. < QCI2
Prio. > QCI1
VoLTE
QCI1
QCI5
Prio. > QCI5
HighCap
QCI5
QCI1
QCI2
Prio. > QCI1
Prio. > QCI2
QoS
QCI5 scheduled with non‐GBR, low delay, very low packet loss rate
QCI1 scheduled with GBR/MBR DL/UL = 40 kbps, low delay, moderate packet loss rate, uses 
RLC‐UM and usually only 2 HARQ transmissions
QCI2 scheduled with minimum rate proportional fair 400Kbps
QCI 7/8/9 scheduled with minimum rate proportional fair 0 kbps
www.ebook3000.com

LTE Optimization Engineering Handbook
454
Where:
●
●VAD is the voice activity factor from 0% to 100%
●
●Voice_SamplingRate is the frame transmission frequency per standards: 20 ms
●
●Silence_SamplingRate is the silent indicator: 160 ms
●
●VoLTE_IP_PayloadSize (32 bytes) + Overhead (40 bytes) for AMR 12.2 kbps = 72 bytes
●
●Silence_IP_PayloadSize (5 Bytes) + Overhead (40 bytes) for AMR 12.2 kbps = 45 bytes
●
●Number of packets per second: 1000/20 = 50
●
●The GBR for a VoLTE call with 100% activity factor using only AMR 12.2 kbps codec mode 
should consume a bandwidth of 28.8 kbps
●
●BW = [1 × (72)/20 ms + (1 – 1) × (45)/160 ms] × 8 bit/byte = 28.8 kbit/s
From Figure 11.12, we can see that the average rate of QCI 1 is 11.8 kbps, QCI 5 is 10.5 kbps, 
the defaulkt QCI 9 is only 0.04 kbps in a field test.
End‐to‐end latency including bearer delay (RTP packets) and signaling delay (SIP signaling). 
Table 11.10 shows the typical voice delay budget. According to ITU G.114, less than 200 ms of 
mouth‐to‐ear audio packet delay is needed to make the user very satisfied and no more than 
280 ms is needed to make the user satisfied.
11.2.5  RLC UM
An RLC entity can be configured to operate in TM, UM, or AM mode, which are shown in 
Table 11.11. There are RLC services and RLC functions. The RLC functions that are performed by 
the RLC entities are concatenation, padding, data transfer, error correction, in‐sequence delivery, 
duplicate detection, flow control, RLC re‐establishment, protocol error detection, and recovery.
The RLC UM (unacknowledged) mode provides a unidirectional data transfer service with-
out sending any feedback to the transmitting entity, therefore, there are no re‐transmissions of 
packets. UM RLC is mainly utilized by delay‐sensitive and error‐tolerant real‐time applica-
tions, especially VoIP, and other delayed sensitive streaming services. RLC UM mode can be 
configured per bearer type, eNB will choose RLC mode to use based on the bearer setup pro-
cedure and QoS requirements.
RLC UM is useful for services that tolerate a higher packet loss rate but require lower latency, 
unlike RLC AM with a OTT ARQ reordering mechanism by RLC ARQ. RLC UM is “in‐ascend-
ing‐order delivery,” which unlike RLC AM with “in‐sequence order delivery,” same but gaps 
allowed (Figure 11.13).
The RLC UM machine starts re‐ordering when detecting a gap, same as RLC AM. But when 
the timer expires, UM does not, like AM, do its own retransmission but rather trusts lower lay-
ers to have provided enough time for re‐ordering. RLC UM ignores any gaps that might still 
occur and continues to deliver in ascending order to higher layers. If any missing RLC SDUs 
arrive later they will be discarded since they arrive outside the re‐ordering window.
The RLC mode is configured for each QCI by eNB. If the source eNB has a bearer with QCI 
configured with the RLC UM feature and the target eNB has mapped the same QCI to RLC 
AM, the bearer is rejected.
Data forwarding at intra‐LTE (X2) handover for RLC (UM)
Data forwarding is executed in user plane (UP) tunnels, established between the source eNB and 
the target eNB during the handover preparation. Data forwarding must be supported for X2 hand-
over for both UM and AM bearers. Also X2 handovers including data forwarding will work for 
VoIP only and for the combination of VoIP and data simultaneously. There is one tunnel estab-
lished for DL data forwarding per each E‐RAB for which data forwarding is applied (Figure 11.14).

Table 11.10  Voice delay budget.
Delay component
Range(ms)
Comments
UE delay (UL/DL)
31‐44
Air interface one‐way 
delay(UL/DL)
4 ~ 53/1 ~ 37
For 6 HARQ transmission using dynamic scheduling as the 
worse case
eNB delay
2 ~ 4
eNB processing delay for packet L1/L2 processing
SGW
0.1 ~ 0.5
Packet forwarding
PGW
0.1 ~ 0.5
S1‐U
2 ~ 15
Propagation delay is mainly proportional to distance(5us/km)
S5
2 ~ 15
IP network
18 ~ 41
Assuming 2 ms processing and queuing and 2000 miles OC3
15
10
5
Number of bits [Kbit]
2
2.1
2.2
2.3
2.4
SIP_200_OK
SIP_200_OK
SIP_183_SESSION_IN_PROGRESS
SIP_180_RINGING
2.5
2.6
2.7
Time
100
50
0
Bit rate (Kbit/s)
0
100
200
300
400
500
600
700
1000
0
5
10
15
20
25
30
35
PDCPThrput   Qci9_UL(kbps)
PDCPThrput   Qci5_UL(kbps)
PDCPThrput   Qci1_UL(kbps)
SIP message
Average rate
Figure 11.12  Data rate of RB in field test.
www.ebook3000.com

LTE Optimization Engineering Handbook
456
Table 11.11  Three modes of RLC.
Transparent Mode
Unacknowledged Mode
Acknowledged Mode
No segmentation and 
reassembly of RLC SDUs
Segmentation and 
reassembly of RLC SDUs
Segmentation and reassembly 
of RLC SDUs
No RLC headers are added
RLC headers are added
RLC headers are added
No delivery guarantees
No delivery guarantees
Reliable in sequence delivery 
service
Suitable for carrying voice
Suitable for carrying 
streaming traffic
Suitable for carrying TCP traffic
New RLC
AMD PDU-s
(MAC) Backpressure
Transmitter
Receiver
Transmission
buffer
MUX
DEMUX
Re-ordering
“3” was lost
Time
1
2
4
1
2
4
3
Insequence
RLC AMD PDU-s
Link
Figure 11.13  RLC UM insequence order delivery.
UE
Source eNB
Target eNB
MME
SGW
Handover
request
Handover
Request ack
RRC conn
reconf
SN Status
Transfer
RRC conn
reconf Cmp
Path switch
request
Modify bearer
request
Modify bearer
response
Path switch
request ack
UE context
release
GTP-U
Figure 11.14  Signaling flow (data forwarding at X2 handover for RLC_UM).

VoLTE Optimization
457
RLC UM will be applied to VoLTE (QCI 1 or QCI 2). The RLC in UM feature provides the 
means to deliver VoIP without delays due to retransmission and may be configured to reduce 
the control signaling overhead of RLC and PCPC layers. Another advantage is a faster delivery 
but with a higher risk of packet loss.
The QCI = 2 characteristics defined in 23.203 (PELR ≤ 10−3, PDB ≤ 150 ms) can be realized 
with RLC UM, but also with RLC AM, as RLC AM minimizes packet loss at the expense of an 
increased delay. However, using RLC AM may give rise to delay spikes, which are caused by the 
RLC AM protocol while it waits for a retransmission. RLC AM will give rise to quite a few RLC 
status reports as the overhead is insignificant since video packets are relatively larger. The RLC 
status reports will just get a “free ride” with the data packets of the reverse direction of the bi‐
directional video flow.
The operator can improve the network performance by optimizing RLC parameters, includ-
ing the maximum number of ARQ retransmission, the length of poll retransmit timer, and 
especially SN lengths of RLC PDU and PDCP PDU, which are described below.
It is recommended to configure the VOIP media bearer (RLC UM) to reduce the control 
signaling overhead of RLC and PDCP layers by shortening the default sequence number length 
from 12 bits to 5 bits for RLC and to 7 for PDCP, as specified in 3GPP TS36.322 and TS 36.323,16 
respectively. Further information can be found in the reference RLC in unacknowledged mode. 
The relevant eNB parameters are:
●
●rlcSNLength, 5 bits (with rlcMode = UM)
●
●pdcpSNLength, 7 bits (with rlcMode = UM)
For RLC UM bearers, both RLC and PDCP SN are reset at handover and eNB starts sending 
UM packets with PDCP SN starting from 0 in the target. Actually, improper configuration for 
pdcpSNLength and rlcSNLength would also cause negative effects. Setting them to abnormally 
small values will lead to wraparound on the sequence numbers and hence increase the drop 
rate if RLC/PDCP SN length for QCI 1 has a mismatch in source and target cell.17 If they are 
set differently in serving cell and target cell, it would result in handover failures or drops after 
handover.
11.2.6  Call Procedure
VoLTE services high level steps include detect available network, attach to the LTE network, 
setup IMS APN and find P‐CSCF, register in IMS, and place/receive a call.
From the attach procedure, UE may include capabilities such as UE SRVCC capability in 
the “Attach request” message. In the “Attach accept” message as well as in the “Tracking area 
update accept” message, MME provides information to the UE on the network capabilities, 
for example, emergency service support indicator, location service support indicator, and IMS 
voice over PS session supported indicator.
When the PDN connection for the IMS APN is established in the setup IMS APN and find 
P‐CSCF procedure, the list of P‐CSCF addresses are provided by the PGW to the UE in the 
“PDN connectivity accept” message and the IMS APN default bearer QCI 5 is established for the 
IMS signaling. After register in IMS, MO/MT call triggers UE to do service request to move UE 
to connected mode and then it can send and receive user plane traffic (SIP invite) (Figure 11.15).
16  3GPP TS36.322: Radio link control (RLC) protocol specification. 3GPP TS36.323: Packet data convergence 
protocol (PDCP) specification
17  In a live network, In some cases it was observed that PDCP SN length was same in both the source and target cell 
but the HO failed.
www.ebook3000.com

LTE Optimization Engineering Handbook
458
11.2.6.1  LTE Attach and IMS Register
As part of attach procedures, VoLTE‐related capabilities and relevant network information 
(voice and emergency support, and P‐CSCF address) are provided between UE and network. If 
the IMS APN is not default APN, the UE will initiate a separate PDN connection after attach to 
establish the IMS PDN. In the attach request message the UE signals if it supports SRVCC to 
GERAN/UTRAN, or if the UE is performing a combined attach procedure. If it supports 
SRVCC, it indicates its supported speech codecs for CS speech calls. In the attach accept mes-
sage the UE is informed whether the network supports IMS VoIP, emergency calls, and EPS/CS 
location services (Figure 11.16).
The UE need to register (authenticate) toward the IMS before any services can be utilized. 
The registration may take place any time after the UE has attached to LTE and acquired an IP 
address to P‐CSCF. Once the LTE attach is performed, the terminal start registration at the 
IMS (S‐CSCF) to be able to receive IMS services. Prior to registering with IMS the UE must 
establish another PDN connection to the IMS APN by a SIP registration request. VoLTE man-
dates the use of IMS AKA (i.e., UICC based authentication based on same authentication 
mechanism as for the access). As a consequence of the authentication, IPsec is established for 
SIP signaling security between UE and P‐CSCF (Figure 11.17).
UE needs to perform re‐registration procedure before registration timer expires. For VoLTE, 
the application servers also need to know about registration status through a third‐party regis-
ter. The registration may take place any time after the UE has attached to LTE and acquired an 
IP address to P‐CSCF. If the user profile includes a service trigger for register, the S‐CSCF 
sends a third‐party register message to the application server indicated in the trigger, to inform 
the application server about the change in registration status. The IMS registration latency is: 
IMS registration latency [ms] = T200 OK − TREGISTER where TREGISTER is the timestamp for SIP 
register (step 3) being sent from the UE (start trigger for the registration procedure), T200 OK 
is the timestamp for 200 OK (Figure 11.18).
11.2.6.2  E2E IMS Flow
After register to the IMS domain with a SIP register message the UE can initiate a VoLTE ses-
sion, using SIP invite. The SIP invite is used to find the called party, and negotiate the media to 
be used. Figure 11.19 shows that the originating (MO) call triggers UE to do a service request 
Registration
Call release
eNB
EPS Registration, Default bearer setup and VoLTE support discovery
IMS registration and user authentication
IMS VolP session setup
EPS dedicated bearer setup
Ongoing voice call
IMS VolP session and dedicated bearer release
MME
S/PGW
HSS
PCRF
CSCF
AS
Radio setup
Call
establishment
Figure 11.15  High level e2e VoLTE call flow.

VoLTE Optimization
459
UE
eNB
MME
HSS
EPG
SAPC
P-CSCF
Attach
NAS:Attach Request
Diameter:AIR
Diameter:AIA
NAS:Authentication Request
NAS:Authentication Response
NAS:Security Mode Complete
NAS:Security Mode Command
GTPv2:Create Session Request
EBI:5, QCI:9(Default Bearer)
Diameter:CCR
Diameter:CCA
GTPv2:Create Session Response
EBI:5 , QCI:9(Default Bearer) 
GTPv2:Create Bearer Request
Linked EBI:5, QCI:5(IMS SIP Signaling)
S1AP:Initial Context Setup
EBI:5, QCI:9(Default Bearer)
NAS:Attach Accept, activate default EPS bearer request
EBI:5, QCI:9(Default Bearer)
S1AP:UE capability info indication
S1AP:Initial Context Setup Response
NAS:Attach Complete, activate default EPS bearer accept
GTPv2:Modify Bearer Request
GTPv2:Modify Bearer Response
Default Bearer(EBI:5, QCI:9) is established
S1AP:E-RAB Setup Request
EBI:6, QCI:5(IMS SIP Signaling)
NAS:activate dedicated EPS bearer context request
EBI:6, QCI:5(IMS SIP Signaling)
S1AP:E-RAB Setup Response
NAS:activate dedicated EPS bearer context accept
GTPv2:Create Bearer Response
EBI:6
Dedicated Bearer(EBI:6, QCI:5) is established
IMS SIP REGISTER Procedure via Dedicated Bearer for QCI:5
Figure 11.16  Attach procedure for VoLTE user.
LTE Attach
(1) Power-on
VoLTE
terminal
LTE/EPC
(2) Attach request
(7) Completion of Attach
(8) IMS registration request
(9)b. Authentication
(10) Completion of IMS registration
SIP
bearer
(6) Bearer response
eNodeB
MME/SGW
PGW
P-CSCF
S-CSCF
IMS
AS
(4) Setting up of
bearer for VoLTE
IMS registration (SIP)
(P-CSCF address)
(P-CSCF address)
HSS
(9) a. Registration and authentication
(9) c. Service information download
(3) Location registration
(Download APN for VoLTE)
(5) Terminal IP address
and P-CSCF allocation
Figure 11.17  LTE attach and IMS register.
www.ebook3000.com

LTE Optimization Engineering Handbook
460
Step 1 and 2 is
the LTE attach
procedure and
UE acquires IP
address from
PDN gateway.
Step 5 and 6 are
optional IMS
services for
subscribing to
registration state.
401 unauthorized
response occurs
when UE has not yet
been assigned a
serving CSCF.
200 OK 
200 OK 
200 OK 
6: NOTIFY
5: SUBSCRIBE
401 Unauthorized
2: UE requested PDN connectivity
1: Attach procedure, P-CSCF discovery
4: REGISTER
3: REGISTER
UE
UE power on
UE ready to use
LTE RAN
EPC
IMS/MTAS
Figure 11.18  IMS registration latency.
UE
UE
MME
MME
PGW
PGW
Service 
Request
Service 
Request
Authentication
(if required) 
Authentication (if required)
Initial Context 
Setup
Radio Bearer
Establishment
Initial Context 
Setup 
Complete
Modify Bearer 
Request
Modify Bearer 
Request
IP-CAN 
Session 
Modification
Modify Bearer 
Response
Modify Bearer 
Response
Service Request Procedures
eNB
eNB
SGW
SGW
PCRF
HSS
SIP INVITE
FROM IMS
DOWNLINK DATA
Downlink data
Notification
Paging
 Stop Paging
Paging
DDN ACK
[SIP INVITE]
DOWNLINK DATA
[SIP INVITE]
Figure 11.19  MO and MT call service request.

VoLTE Optimization
461
and move the UE to connected mode and then it can send and receive SIP invite. For termi-
nated (MT) call, the incoming SIP invite results in that a UE in idle mode is paged and as 
response the UE initiates service request to establish user plane connectivity and the SIP invite 
can be forwarded to the UE.
SIP session establishment start from UE transmits SIP invite to UE received SIP 200 OK mes-
sage, including dedicated radio bearer setup and session establishment procedure, and so on. 
The E2E IMS signaling flow is described below and shown in Figure 11.20 and Figure 11.21:
●
●100 Trying: IMS core sends 100 trying message to originating UE once the message is 
­forwarded to the destination.
●
●183 session progress: this message is basically indication that the call is being processed. It’s 
typically used either to prevent the call from being timed out, as we await the destination 
user answering the call. It can also be used to support what’s called early media, that is, the 
SIP 200 OK
SIP INVITE
SIP 100 Trying
SIP183 Session Progress
SIP PRACK
SIP UPDATE
SIP 200 OK
SIP 180 Ringing
SIP 200 OK
SIP ACK
User initate a 
call
Dedicated EPS Bearer Establishment 
Service Request Procedure
Rx/Gx: MMTel Session 
Est. 
Update of flow status of affected PCC rules (if required)
Rx/Gx: Flow/gate update
SDP answer with resource 
reservation. If needed, establish 
resources for early media (ring 
tones or announcements)
Confirmation of resources available
Reestablishment of bearers 
if UE is in idle mode
If early media used, ring tone is from 
network, otherwise generated locally in UE
Call picked up and media 
flowing in both directions. 
Only DL media 
enabled (for early 
media)
PCC update to open 
gates for bi-
directional media
IMS
EPC
eNB
UE
Figure 11.20  Originating call flow.
SIP 200 OK
SIP 100 Trying
SIP 183 Session Progress
SIP 200 OK
SIP 180 Ringing
SIP 200 OK
SIP ACK
User answers
the call
Indication of 
incoming call
SIP INVITE
Service Request Procedure 
Paging
SIP INVITE
Dedicated EPS Bearer Establishment
Rx/Gx: MMTel Session 
Est. 
SIP UPDATE
Update of flow status of affected PCC rules 
Rx/Gx: Flow update
SDP answer
with resource
reservation
Confirmation
of resources
available
Wake up UE
if in idle
mode
Reestablishment
of bearers if UE is
in idle mode
PCC update to
open gates for
bi-directional
media
IMS
EPC
eNB
UE
SIP PRACK
Figure 11.21  Terminating call flow.
www.ebook3000.com

LTE Optimization Engineering Handbook
462
ability to send media (in‐band ringing or network announcements) to the calling party before 
the call is completed. Destination UE indicates codec choice in SIP183 session progress. 
SIP183 message also triggers network‐initiated dedicated EPS bearer setup at source and 
destination UE.
●
●PRACK (provisional response acknowledgement): PRACK improves network reliability by 
adding an acknowledgment system to the provisional responses (1xx). PRACK is sent in 
response to provisional response. Source UE sends a SIP PRACK message indicating codec 
selection and preconditions extension, “Precondition” increases establishment time by 0.5 s 
in RRC connected state but reduces probability of call establishment failure in live network. 
Destination UE responds with a SIP 200 OK acknowledging SIP PRACK. Network‐initiated 
EPS bearer setup and transfer of SIP PRACK and SIP200 messages occurs concurrently.
●
●180 Ringing: Destination UE locally alerts the user and sends across a ring back tone to the 
source UE through SIP180 ringing. When the user responds to the alert, destination UE 
sends SIP200 OK response to original SIP Invite.
●
●200 OK: The request was successful.
●
●Source UE responds with an SIP ACK message. Media streams are established.
An example of originating call and terminating call flow in alive network is shown in 
Figure 11.22.
Source UE IMS client forms a SIP invite message, which includes QoS preconditions18 and 
order of preference for audio codecs. SIP invite message transmitted as part of IPSec packet to 
EUTRAN. For QoS preconditions, resources reserved before users receives ring tone, when 
user answers, the users are guaranteed to be able to talk. However, the reservation of the 
resources prior alerting the user can increase the call setup time. Two different set of traffic 
flow templates (TFTs) for audio and video is provided to UE when both reservations are suc-
cessful. For without QoS preconditions, UE are alerted and can answer the call prior resource 
reservation, there is no guarantee that the user will be able to get any resources for the call 
(Figure 11.23).
When UE A and UE B are belong to different home network, the E2E call procedure is shown 
in Figure 11.24.
Figure 11.25 shows the SIP invite message details. It is identified by a call identifier, local tag, 
and a remote tag. A call‐ID contains a globally unique identifier for this call, host name, or IP 
address. The combination of the To tag, From tag, and call‐ID completely defines a peer‐to‐
peer SIP relationship between two users and is referred to as a dialog. Figure 11.23 shows a SDP 
message carried as message body in the SIP message, describing the session parameters. Default 
EPS bearer is used to send the initial SIP invite that contains the SDP information. SDP carries 
the requested media, bandwidth, and source transport address (audio).
11.2.6.3  Video Phone Session Handling
A VoLTE and video‐calling device performs the same network attach, IMS domain authentica-
tion and registration procedures as a VoLTE device, plus adding video capability information. 
At video call setup the client signals in the SDP included in the SIP invite message that 
two media streams shall be setup by IMS in the EPS. These two media streams shall be full 
18  UE supports SIP preconditions per GSMA IR.92 recommendations. The recommendation is to support 
preconditions for the reason to avoid “ghost ringing” in case resource allocation fails after 180 rings. QoS 
precondition also prevents that voice/video traffic by mistake is sent on the IMS signaling bearer (which could cause 
disturbance on other traffic).

MO
RACH+RRC Conn. Setup
Paging+RRC Conn. Setup
E2E RTP Audio
RRC Reconfig
RRC Reconfig
SIP: 183 Session Progress
SIP: PRACK
SIP: 200 OK (PRACK)
SIP: 200 OK (UPDATE)
SIP: 200 OK (SDP Answer)
SIP: UPDATE
SIP: 180 Ringing
Alert User
User Answer
SIP: ACK
SIP: PRACK
SIP: 200 OK (PRACK)
SIP: 200 OK (UPDATE)
SIP: 200 OK (SDP Answer)
SIP: UPDATE
SIP: 180 Ringing
SIP: ACK
SIP: Invite (SDP Offer) 
SIP: 100 Trying
SIP: Invite (SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
NW/IMS
MT
Call Orig
Inform User
Figure 11.22  Call procedure with “precondition.”
www.ebook3000.com

UE A
QCI = 1
QCI = 1
QCI = 5
eNB
EPC
Call initiation
Call initiation
Resource reservation
Resource reservation
Ringing
Ringing
Answer
Answer (SDP)
RTP
RTP
RTP
RTP
RTP
Note: Time between resource reservation until QCI= 1 bearer is up is undefined.
Note: Time between resource reservation until QCI= 1 bearer is up is undefined.
IMS
UE A
eNB
EPC
IMS
QCI = 5
Figure 11.23  With QoS preconditions and without QoS preconditions.
ACK
ACK
ACK
ACK
ACK
ACK
ACK
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
PRACK
PRACK
PRACK
183
183
183
183
INVITE
INVITE
INVITE
INVITE
INVITE
INVITE
UEA
P-CSCF
S-CSCF
I-CSCF
HSS
S-CSCF
P-CSCF
UEB
AS
AS
UEB ’s home network
UEA ’s home network
INVITE
INVITE
183
PRACK
183
UPDATE
UPDATE
UPDATE
UPDATE
UPDATE
PRACK
PRACK
PRACK
UPDATE
UPDATE
Dedicated bearer
(QC11) established
180 (Ringing)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
180 (Ringing)
180 (Ringing)
180 (Ringing)
180 (Ringing)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
200 (OK)
183
183
100 Trying
100 Trying
100 Trying
100 Trying
100 Trying
LIA
LIR
200 (OK)
200 (OK)
200 (OK)
180 (Ringing)
180 (Ringing)
180 (Ringing)
Ringing
User
Answers
Dedicated bearer
(QC11) established
Figure 11.24  Call procedure when UE A and UE B are belong to different home network.

VoLTE Optimization
465
duplex and synchronized for lip sync. The P‐CSCF, based on the negotiated SDP, creates one 
Rx session toward the EPC per call leg and uses the Rx interface toward the PCRF to request 
two dedicated EPS bearer one for voice and one for video on top of the already existing default 
EPS bearer used for SIP. The EPS is responsible to set up the two dedicated EPS bearers using 
the network‐initiated bearer setup procedures in sequence. Adding video to ongoing voice call 
procedure is described in Figure 11.26.
UE IP address
IP address used for media stream
Time session created and how long intended to last
Media negotiation
Precondition: resource reservation
maxptime: maximum limit of 12 speech frames (240ms) per RTP packet
ptime: one speech frame (20ms) encapsulated in each RTP packet
Required bandwidth for RTP traffic is 30 kbps
No required bandwidth for RTCP traffic (RS=0, RR=0)
WB DTMF
NB DTMF
Payload type: 104
Codec: AMR-WB
SR: 16000 Hz
Codec mode: 0, 1, 2
Mode-change-cap: capability
to restrict the mode change
Max-red: elapses between
the first transmission of a
frame and any
redundant transmission
Figure 11.25  Session description protocol.
User adds
video
SIP Re-INVITE
(voice/video)
SIP Re-INVITE
(voice/video)
SIP 200 OK
SIP Re-INVITE
(voice/video)
AAR
SIP 200 OK
AAA
AAR
SIP 200 OK
P-CSCF updates
with new video
P-CSCF updates
with new video
Dedicated EPS Bearer establishment
(video component)
Ongoing active voice call
Ongoing active call with voice and video
Originating
network
Terminating
network
Dedicated EPS Bearer establishment
(video component)
IMS interacts
with PCC to
create a new
video bearer for
the ongoing call.
IMS
IMS
PCRF
PGW
UE
PCRF
PGW
UE
AAA
Figure 11.26  Adding video to ongoing voice call.
www.ebook3000.com

LTE Optimization Engineering Handbook
466
11.2.7  Multiple Bearers Setup and Release
LTE permits UE to establish up to eight simultaneous data radio bearers (DRB) and each radio 
bearer can have a unique QoS profile.
Prior to introducing VoLTE, a LTE user typically set up one default bearer for data on QCI 
{7,8,9}. A default bearer is bearer able to carry all kinds of traffic (no filter) without QoS and it 
is first established for a new PDN connection and remains established throughout the lifetime 
of the PDN connection. It is typically created during the attach procedure. The UE will have 
one IP address used for all data services. All the traffic for the user is sent across one DRB and 
there is no QoS‐based traffic separation. VoLTE introduces a second default bearer. A VoLTE 
user in the eNB will always have at least two default bearers configured—one for IMS signaling, 
one for internet connection. Voice/video traffic shall be separated from data traffic for the UE 
therefore dedicated bearers will be set up on demand for the voice and video components to 
enable this traffic separation. QCI1 and QCI2 are dedicated bearers associated to the IMS APN 
default bearer (QCI5). Dedicated bearers apply packet filters or traffic flow templates (TFTs) 
on top of the default bearer. The TFTs are installed in the UE to make sure that media traffic is 
forwarded on the respective dedicated bearers. TFTs consist of IP address, port and protocols 
to specify which traffic shall run upon the dedicated bearer.
Two separate steps are considered before the UE is successfully registered in both LTE and 
the IMS domain. The first part will be the combined PS and CS (for SMS over sGs) attach 
procedure including the activation of the default internet APN. The second part is the setup 
of the IMS default bearer and the IMS registration. After completing these two parts success-
fully the UE is registered to the network and IMS domain. If both the UE and the network are 
VoLTE capable, the user is now able to start a VoLTE service. Once the radio bearers are estab-
lished for the UE (now in RRC_connected mode) at the eNB for the default IMS APN (QCI 5) 
and default internet APN (QCI 7–9) the UE will only change back to RRC_Idle mode in case 
there is no activity more for the duration of tInactivityTimer on both default non‐guaranteed 
bit rate bearers.
For VoLTE, voice media should always be mapped to a separate EPS bearer as it has GBR 
running the RLC unacknowledged mode protocol. Voice service can tolerate error rates on the 
order of 1%, while benefiting from reduced delays. SIP signaling should also be protected 
against congestion by being mapped to a separate EPS bearer running RLC acknowledged 
mode protocol. So, the biggest challenge in the LTE RAN within VoLTE is to handle the rela-
tion between signaling (SIP) and media (RTP), the SIP signaling is carried on the QCI 5 bearer, 
which has highest priority to accommodate, for example, fast call setup. For example, in a live 
network, 2.6 billion eRAB setups out of which 16 million are VoLTE, that is, only 0.6% of all 
eRAB attempts are VoLTE (QCI1).
In conclusion, an IMS UE will have two bearers allocated all the time, the default bearer to 
internet APN is QCI = 9 (non‐GBR RLC‐AM), the default bearer to IMS APN is QCI = 5 (non‐
GBR RLC‐AM). During a VoLTE call a third bearer will be activated (QCI = 1), voice bearer 
QCI1 would be configured during voice call initiation (SIP invite). QCI1 is a dedicated bearer 
to the IMS APN (GBR RLC‐UM), dedicated bearers are created for QoS differentiation pur-
poses (Figure 11.27).
When the UE changes state from EPS connection management (ECM)‐connected to ECM‐
idle all radio resources are released but information about the PDN connection remains stored 
in the packet core. All radio resources are restored again when a network or UE‐initiated ser-
vice request is received.
QCI 8(9), default bearer setup is always the first step for any service when UE attaches to EPC 
and remains active as long as UE is attached to EPC (always on). IMS default bearer (QCI5), the 

VoLTE Optimization
467
first dedicated radio bearer, is set up for SIP control signaling right after the default bearer 
setup during the initial attach. QCI5 will be established with the second PDN connection with 
IMS APN. This will avoid SIP control signaling setup delay when VoLTE call is invoked. QCI 1, 
MO UE requests a voice call through SIP invite. MT UE CQI1 bearer is only established after 
MT UE responds with SIP OK to original SIP invite. The above QCI profiles re shown in 
Table 11.12.
Once a VoLTE has been established, the user might want to end the VoLTE call (video phone). 
It is expected that the user will have two separate buttons on its terminal in order to end the 
video only or to directly end both voice and video call according to IR.94 from GSM associa-
tion. Figure 11.28 gives an illustration of VoLTE call end and bearer release procedure.
After VoLTE call end, the UE still has both default bearers active, which might be used for 
additional SIP signaling or uplink and downlink data transmission. In the case the UE (still in 
RRC_connected mode) does not send or receive anything any more on both the default bearer’s 
timer, tInactivityTimer, is started, which is currently set to 60s in more live network. Once the 
timer, tInactivityTimer, expires the UE will move from RRC_connected mode to RRC_idle 
mode and the radio bearers are released for the non‐GBR default bearers.
11.2.8  VoLTE Call On‐Hold/Call Waiting
For VoLTE call on‐hold/call waiting, it has been decided to modify the bandwidth only in 
the “call waiting” call case since it will need to double the bandwidth. Only at release of the 
second call will trigger another bearer modification. For the “call on‐hold” call case, no bearer 
MO
NW/IMS
MT
RACH + RRC Conn. Setup (DRB3 + DRB4)
SIP: Invite
SIP: 100 Trying
Paging + RRC Conn. Setup (DRB3 + DRB4)
SIP: Invite
SIP: 100 Trying
RRC Reconfig (DRB5)
SIP: 180 Ringing
RRC Reconfig (DRB5)
SIP: 200 OK
SIP: 180 Ringing
SIP: 200 OK
SIP: ACK
EPS
ID
5
3
9
AM
BE
6
4
5
AM
SIP
7
5
1
UM
RTP
DRB
ID
RLC
QCI
Use
E2E RTP Audio
SIP: ACK
QCI 9 and QCI 5
are established
during the attach
procedure
time
RRC_IDLE
RRC_CONNECTED
Connection
Established
Default bearer
established
(QCI9 & QCI5)
Call established
(SIP)
Dedicated bearer
established (QCI1)
Figure 11.27  Multiple bearers setup.
www.ebook3000.com

LTE Optimization Engineering Handbook
468
modification is triggered since the bandwidth will not be set to “0” but only the packet filters 
will be adapted, which will not trigger an E‐RAB modification (Figure 11.29).
11.2.9  Differentiated Paging Priority
The problem occurs if an operator would need to use a more aggressive paging for VoLTE calls 
than for VoLTE SMS. Both services are handled by the same IMS APN. If the IMS APN is used 
for additional IMS services than VoLTE, such as RCS, then additional non–call‐related signal-
ing can be expected on the IMS APN. The same UE will need different paging profiles depend-
ing on the service.
If the SGW receives a downlink packet while the UE is IDLE, a data downlink notification is 
sent to MME requesting paging of the UE. It is possible to configure number of tries for the last 
visited eNB, TA, and TAI list.
Profile 1: MME sends paging messages to all eNB in the TAI list held by MME
Profile 2: MME starts by paging eNBs in last visited tracking area, if no success the TAI list 
is paged
Profile 3: MME starts by paging last visited eNB, if no success the MME pages eNBs in last 
visited TA, if still no success all eNBs in the TAI list are paged.
Table 11.12  QCI configuration.
QCI 1
QCI 2
QCI 5
QCI 8/9
Priority
1
4
2
8/9
Scheduling strategy
Delay based
Proportional 
fair with 
Min rate
Resource  
fair
Resource fair or 
proportional fair
Logical channel group
1
2
1
3
DRX Profile
1
2
0
0
DRX Priority
99
100
1
1
RLC mode
UM
UM
AM
AM
AQM mode
GBR (2)
GBR (2)
OFF (0)
Non‐GBR (1)
pdb
80
150
100
300
pdbOffset
50
50
0
0
pdcpSNLength
7
12
12
12
rlcSNLength
5
10
10
7
ROHC
TRUE
FALSE
FALSE
FALSE
QCI = 2, Video
QCI=1, Speech
QCI = 8, internet
QCI = 5, IMS signaling
QCI=1, Speech
QCI=8, internet
QCI=5, IMS signaling
QCI = 8, internet
Switch
from RRC_Connected
to RRC_Idle state
VoLTE + ViLTE DRBs
IMS + internet default bearers
ViLTE DRB
released
VoLTE DRB
released
User inactivity
on default bearers
tInactivity Timer expires
on default bearers
QCI = 5, IMS signaling
Figure 11.28  VoLTE call end and bearer release.

VoLTE Optimization
469
The timer for paging messages is configurable in 2 to 15 s. The default value is 3 seconds. For 
Profile 1, successful paging will take less than 3 s. The number of messages needed is equal to 
the number of eNBs in the TAI list. For Profile 3, the time for paging a UE that has not moved 
is less than 3 s. The number of messages needed is ~1.
If the UE has moved since last connected, the time for successful paging of the three profiles 
is less than 3 s, less than 6 s, and less than 9 s depending on how many paging messages are 
needed.
So differentiated paging using separate bearers or APN for VoLTE calls and other IMS ser-
vices, this way paging profile 1 could be used for VoLTE calls and paging profile 3 be used for 
other IMS services. In this case that MME will need additional information for deciding which 
paging profile to be used. One proposal is to provide a service class IE in the data downlink 
notification message so that MME can decide which paging profile to use. When SGW receives 
a DL packet and the UE is idle, the DL packet needs to be marked with the service class to be 
eNodeB
UE
1) E-RAB Modify Request
List of RABs and corresponding
QoS profile to be modified as well as
an optional NAS message per RAB
Admission Control (if features are enabled)
1) Admission GRANTED
2) Admission BLOCKED
*) E-RAB Modify Response
4) E-RAB Modify Response
Contains a list of all
successfully modified RABs
and possibly a list of all RABs
that failed to be modified
Inside this message “E-RAB Failed to Modify List”
Cause Value: Radio resources not available
2) RRC Reconfiguration Message
3) RRC Reconfiguration Complete Message
Includes the optional NAS
message “Radio Modify Setup”
conditional
MME
Figure 11.29  Call flow for the bearer modification due to “call waiting.”
www.ebook3000.com

LTE Optimization Engineering Handbook
470
used for paging differentiation. SGW will use this information when sending the data downlink 
notification. A proposal is to have the P‐CSCF mark service class using the DSCP field (IPv4 
and IPv6) or alternatively the IPv6 flow label field (not present in IPv4 packets).
11.2.10  Robust Header Compression
11.2.10.1  RoHC Feature
IPv4 and IPv6 protocol headers are large relative to voice payload. These headers are transmit-
ted frequently for every voice packet, which has negative performance impacts on over‐the‐air 
capacity and cell‐edge performance. Header compression is necessary in order to provide voice 
services on the packet switched (PS) domain with similar packing efficiency associated with 
the circuit switched (CS) domain. For VoLTE, the IP/UDP/RTP header added to a voice packet 
for VoIP services is significant (e.g., AMR 12.2 kbps with 32 bytes payload is encapsulated by 
40/60 bytes of overhead for IPv4/IPv6). During talk spurt period, ROHC (IETF RFC3095, 
robust header compression) is expected to compress IP/UDP/RTP header to about 4/6 bytes in 
average for IPv4/IPv6. Figure 11.30 shows the VoIP frame size of MAC transport block when 
RoHC is used.
For all these codecs, the RTP header part (IP + UDP + RTP) is 40 bytes in IPv4 and 60 bytes in 
IPv6, and the compressed packet length is between 1 and 42 for IPv4, 1 and 62 for IPv6, which 
obtaining a reduction up to 50% and more in the best case that shown in Table 11.13.
Dimensioning aspect by examples below are described.
Example 1: AMR‐WB 12.65 RTP payload is 33bytes,
Step 1: [33(AMR‐WB 12.65) +3(RoHC) + 7(PDCP, RLC, MAC, BSR, PHR header)]*8 = 344 bits.
Step 2: The desired transport block size (TBS) of 344 is compared with 3GPP TS 36.213 TBS 
table. The result is 344. The total number of information bits including CRC = 344 + 24 = 368 
bits, the effective Layer 1 bit rate: 368/20 = 18.4 kbps.
Example 2: AMR 12.2 RTP payload is 32bytes, the effective layer 1 bits with and without RoHC 
are shown in Table 11.14.
Basically the UE could support up to nine different RoHC profiles.19 If it would support any 
RoHC profile it will always need to support also the uncompressed mode variant. At minimum, 
UE and network must support “RTP/UDP/IP” profile (0x0001) to compress RTP packets and 
“UDP/IP” profile (0x0002) to compress RTCP packets, the format of the header of the RoHC 
packet is different from profile 0x0001. The UE and network must support these profiles for 
both IPv4 and IPv6. Below an example of a UE, which reports in the RRC UE EUTRA capability 
message that RoHC profiles it supports. Multiple “packet streams” will be created per bearer 
that can use different profiles and different modes of operation, each packet stream is identi-
fied by context ID (CID). RoHC profiles can be got from S1AP initial context setup message, 
which is shown in Figure 11.31.
11.2.10.2  Gain by RoHC
IETF RoHC is the only protocol selected by 3GPP to support IP packets header compression. 
The RoHC algorithm establishes a common context at the compressor and decompressor by 
transmitting full header and then gradually transition to higher level of compression. In RoHC 
layer, the compressed IP packet streams flow from compressor to the decompressor inside a 
RoHC channel, which multiplexes different IP packet streams that are compressed differently 
using different profiles. In the opposite direction, the RoHC channel carries the compressed IP 
19  GSMA PRD IR.92 “IMS Profile for Voice and SMS” 4.0, March 2011.

VoLTE Optimization
471
VoIP frame
VoIP frame
RoHC H
PDCP H
RLC H
MAC H
VoIP frame
RTP H
UDP H
IP H
VoIP frame
RTP H
UDP H
IP H
VoIP frame
RTP H
UDP H
VoIP frame
RTP H
Application Layer
RTP Layer
UDP Layer
IP Layer
PDCP Layer
RLC & MAC Layers
VoIP frame
RoHC H
PDCP H
40 bytes (IPv4) or 60 bytes (IPv6)
4 bytes
61 octets
33 octets
AMR wide-band 23.85 kbps
AMR wide-band 12.65 kbps
24 octets
AMR wide-band 8.85 kbps
18 octets
AMR wide-band 6.6 kbps
32 octets
AMR 12.2 kbps
22 octets
AMR 7.95 kbps
16 octets
AMR 5.9 kbps
14 octets
AMR 4.75 kbps
22 octets
7 octets
1 octet
EVRC 8.8 kbps
SID1
Protocol
Payload
Protocol
PDCP
1 octet
1 octet (basic header)
RLC UM header
MAC
2 octets (header in MAC if present)
BSR
2 octets
1–60 octets
PHR
RTP/UDP/IP header
Header
Figure 11.30  VoIP frame size with RoHC.
www.ebook3000.com

LTE Optimization Engineering Handbook
472
packet streams, as well as the possible RoHC feedback packets for the associated RoHC chan-
nel. Figure 11.32 shows the RoHC channels and contexts. Each context corresponds to an indi-
vidual compression profile, which has different compression algorithms. A context is identified 
with a context ID (CID).
At RoHC layer, the compressed IP packet streams flow from compressor to the decompres-
sor inside a RoHC channel, which multiplexes different IP packet streams that are compressed 
differently using different profiles. In the opposite direction, the RoHC channel carries the 
compressed IP packet streams, as well as the possible RoHC feedback packets for the associ-
ated RoHC channel.
ROHC has three modes of operation, unidirectional (U‐mode), bidirectional‐optimistic 
(O‐mode), and bidirectional‐reliable (R‐mode). U‐Mode packets are only sent in one direction, 
from compressor to decompressor, but will not be used as the preferred mode of operation for 
VoLTE as it is mainly for unidirectional traffic. This mode, therefore, makes RoHC usable over 
links where a return path from decompressor to compressor is unavailable or undesirable. O‐
Mode (bidirectional optimistic) is similar to the U‐mode, except that a feedback channel is 
used to send error recovery requests and (optionally) acknowledgments of significant context 
updates from the decompressor to compressor. The O‐mode aims to maximize compression 
efficiency and sparse usage of the feedback channel. R‐Mode (bidirectional reliable) differs in 
many ways from the previous two. The most important differences are a more intensive usage 
of the feedback channel and a stricter logic at both the compressor and the decompressor that 
Table 11.13  Robust header compression gains.
Protocol
Total hdr 
size (bytes)
Min. compressed 
hdr size (bytes)
Compress 
gain (%)
IP4/TCP
40
4
90
IP4/UDP
28
1
96.4
IP4/UDP/RTP
40
1
97.5
IP6/TCP
60
4
93.3
IP6/UDP
48
3
93.75
IP6/UDP/RTP
60
3
95
Table 11.14  The effective layer 1 bits of AMR 12.2 payload.
Protocol overhead
AMR NB 
12.2 w/RoHC
AMR NB 
12.2 w/o RoHC
Source payload
bits
256
256
RTP/UDP/IP header
bits
32
320
PDCP header
bits
8
16
RLC header
bits
8
16
MAC header
bits
8
8
Total size
bits
312
616
PHY TBS
bits
328
616

• 0x0000 ROHC uncompressed (RFC 4995)
• 0x0001 ROHC RTP (RFC 3095, RFC 4815), this profile
 compresses RTP headers efficiently. Such headers are
 common in a VoIP call or in a video stream;
• 0x0002 ROHC UDP (RFC 3095, RFC 4815), this profile will
 be used to compress the control signaling of the VoIP call,
 i.e. the RTCP packets
• 0x0003 ROHC ESP (RFC 3095, RFC 4815)
• 0x0004 ROHC IP (RFC 3843, RFC 4815)
• 0x0006 ROHC TCP (RFC 4996)
• 0x0101 ROHCv2 RTP (RFC 5225)
• 0x0102 ROHCv2 UDP (RFC 5225)
• 0x0103 ROHCv2 ESP (RFC 5225)
• 0x0104 ROHCv2 IP (RFC 5225)
Pkt stream 1 (RTP/UDP/IP): CID #X, profile 0x0001
Pkt stream 2 (UDP/IP): CID #Y, profile 0x0002
QCI 1 bearer
Figure 11.31  Possible RoHC profiles.
www.ebook3000.com

LTE Optimization Engineering Handbook
474
prevents loss of context synchronization between compressor and decompressor except for 
very high residual bit error rates. The optimal RoHC operation mode depends on feedback 
abilities, error probabilities and distributions, effects of header size variation, and so on. RoHC 
always starts in U‐mode and transitions to another mode based on the decompressor feedback 
(Figure 11.33).
RoHC can provide coverage and capacity utilisation improvements to the network. 
Figure 11.34 shows the RoHC header size distribution in a live network, 98% of RoHC headers 
size is smaller or equal to 40 bits.
The most important factor for high VoIP capacity is RoHC functionality, especially in uplink. 
With RoHC functionality, coverage will be improved and inter‐site distance can be increased. 
For link budget purposes RoHC header size is assumed to be 40 bits. Compare to without 
RoHC, 3 dB gain due to less bandwidth needed per user (lower MCS used). In conclude, RoHC 
eNB RoHC
UE RoHC
Feedback Packets
Feedback Packets
RoHC channel 2 (DTCH UE = > eNB)
Decompressor
RoHC channel 1 (DTCH UE< = eNB)
CID 0 - IP Stream
CID 1 - RTP/UDP/IP Stream
CID 2 - TCP/IP Stream
CID 3 - ESP/IP Stream
CID 0 - IP Stream
CID 1 - RTP/UDP/IP Stream
CID 2 - TCP/IP Stream
CID 3 - ESP/IP Stream
Compressor
Compressor
Sequence Numbering
In-order delivery and
duplicate detection
IP
UDP
RTP
Data
IP
CH
UDP
RTP
Data
Data
Compress
Ciphering
Add PDCP Header
Decompress
Deciphering
Remove header
ROHC Context
ROHC Context
Decompressor
Figure 11.32  RoHC compression architecture.

VoLTE Optimization
475
will be enabled for voice (QCI 1) to improve coverage and system capacity. In case there is less 
data to transmit, UL interference is reduced and thereby increases the over‐the‐air capacity for 
best effort users and the cell range specifically for the uplink.
11.2.11  Inter‐eNB Uplink CoMP for VoLTE
LTE has frequency reuse of 1. That means a lot of interference on cell edges. In effect, cell‐edge 
UEs are received with similar power by serving a neighbor cell, but to the neighbor cell, this is 
interference. Uplink coordinated multi‐point reception (UL CoMP) is a feature that combines 
antenna signals from multiple cells of the same carrier frequency in order to improve uplink 
FB (R)
FB (O)
U mode
Packet direction
Error feedback
Efficiency
No
Low
High
High
Some
Intensive
unidirectional
Unidirectional Mode
Optimistic Mode
Reliable Mode
IR
FO
SO
IR
FO
SO
IR
FO
SO
bidirectional
bidirectional
O mode
R mode
FB (R)
FB (U)
FB (U)
FB (O)
FB: feedback channel
RoHC feedback packets carry the header 
compression control information: 
ACK: decompression success, 
NACK: decompression failure,
STATIC-NACK: static context, invalid/
not established, 
D_MODE: indicating the desired, 
compression mode.
Figure 11.33  RoHC modes.
0%
20%
40%
60%
80%
100%
504
120
24
32
40
56
40
PDF
RoHC header size [bits]
75%
80%
85%
90%
95%
100%
24
32
40
56
120
504
CDF
RoHC header size [bits]
Figure 11.34  RoHC header size 
distribution.
www.ebook3000.com

LTE Optimization Engineering Handbook
476
throughput by increasing the received signal power and taking this interference and turn it to 
the useful signal, while the neighbor cell can do it too.
The objective of UL CoMP is to improve UL SINR by combining antenna signals from 
­multiple sector carriers belonging to different cells. The benefit is largest for UE that are in 
the border between two sectors, either two macro sectors, or between a macro sector and 
a small cell. UL CoMP for VoLTE can realize soft handover for VoLTE bearer, but X2 delay 
limits the gains. When UL CoMP is used, the expected gains such as increased coverage 
for   VoIP, improved VoIP satisfaction, and reduced call drop rate could be achieved 
(Figure 11.35).
Since the VoIP capacity is limited by the worst users (cell‐edge users), CoMP may be even 
more beneficial for VoIP than for full buffer traffic.
Uplink CoMP can be used if digital processing is centralized in a common point in the 
network, connecting with remote radio units via fiber. These solutions are not feasible with 
uncoordinated small cells connected to the macro network via the S1/X2 interfaces. Both 
macro diversity and interference suppression can be achieved depending on the type of sig-
nal combining. Further, a spatial division multiplexing (SDM) scheme can be applied, where 
multiple users are scheduled at the same time in different nodes, using the same uplink 
resources.
Up to three cells can be included in so called CoMP set ‐ > serving cells can have up to two 
neighbor cells in each CoMP set. For each UL transmission in the serving cell, a linear SINR 
average over 4 RX antennas is calculated:
SINR S lin
SINR S lin
SINR S lin
SINR S lin
_
_
.
*
_
_
_
_
_
_
0 25
1
2
3
SINR S lin
_
_
4
Decoding
As usual
1. Measurement report A3
Entering/or leaving
5. UE Grant
6. VoIP packet
X2
4.
–20ms
(3b.) Start/Stop
7. Decoded VoIP data
8. RLC Data
3a. UL Comp Req. C-RNTI, PCI, MCS, PRB, ...
2. Start Relaxed UL
CoMP?
Decoding
Only send
data if
CRC = ok
Serving
eNB
Co-
operating
eNB
Figure 11.35  Inter‐eNB uplink CoMP.

VoLTE Optimization
477
For each UL transmission in the neighbor cells from the serving cell CoMP set, a linear SINR 
average over 4 RX antennas is calculated:
	
SINR N
lin
SINR N
lin
SINR N
lin
SINR N
l
_
_
.
*
_
_
_
_
_
_
1
0 25
1
1
1
2
1
in
SINR N
lin
SINR N
lin
SINR N
lin
SIN
3
1
4
2
0 25
2
1
_
_
_
_
.
*
_
_
R N
lin
SINR N
lin
SINR N
lin
_
_
_
_
_
_
2
2
2
3
2
4
	
11.3  ­Semi‐Persistent Scheduling and Other Scheduling Methods
PDCCH becomes a bottleneck when VoIP capacity is growing and adoption of semi‐persistent 
scheduling (SPS) allows a reduction of the PDCCH consumption, which in turns allows an 
increase in the number of data users accessing the cell and improves the cell throughput for 
non‐VoIP applications. Without SPS, the 100 VoIP bearers would use the entire PDCCH capac-
ity, thus user perception of the VoIP quality is very bad (delays, frames drop) and also cell 
throughput is heavily impacted as regular traffic could not be granted at all. It notes that TTI 
bundling and SPS can’t be enabled simultaneously for TDD as defined by 3GPP.
11.3.1  SPS Scheduling
Persistent allocation of time and frequency resources can be used for each initial HARQ to 
each VoIP flow, retransmissions are dynamically scheduled in frequency is also fixed in time 
due to synchronous HARQ. At the admission accords to a predefine frequency‐time pattern, 
resource allocation can be with a fixed MCS and number of PRBs, for each initial Tx and sub-
sequent re‐Tx of a VoIP frame, a scheduler grant is sent, the unused semi‐static resource can 
also be used by the dynamic scheduler.
SPS scheduling mechanism is a combination of persistent scheduling for initial transmissions 
and dynamic for retransmissions. Compared to a dynamic scheduler, SPS minimizes control 
overhead and low DL grant usage, since grants are required only for retransmissions, but semi‐
persistently scheduled VoIP users do not have the benefit of channel‐sensitive scheduling. 
Frequency selective dynamic scheduling may provide some gain over frequency hopping for 
VoIP users at low dopplers and MCS and PRB allocation are based on control channel feedback, 
buffer occupancy and UE power headroom. Usually, we use dynamic scheduling for select users 
at the cell edge at low to medium speeds who need the extra performance boost to meet VoIP 
quality targets, use semi‐persistent scheduling for the remaining users. SPS gives the ability to 
support non VoIP traffic along with high VoIP load. Table 11.15 describes the comparation of 
dynamic scheduler and semi‐persistent scheduler. This part of optimization aims to enable the 
network achieved the target performance by how to use the two‐way scheduling strategy.
SPS parameters are included in the “RadioResourceConfigDedicated” IE of the RRC connec-
tion reconfiguration message. An example is described below:
Example
RRC : rrcConnectionReconfiguration 
	
.......
	
sps-Config { 
	
semiPersistSchedC-RNTI ‘00...010’B, 
www.ebook3000.com

LTE Optimization Engineering Handbook
478
	
sps-ConfigUL setup : { 
	
semiPersistSchedIntervalUL sf640,
	
implicitReleaseAfter e2 
	
.......
	
}
11.3.2  SPS Link Adaptation
Different from the dynamic scheduler is the MCS/PRB/modulation assignment, which will 
vary depending on the air link condition, SPS link adaptation is enhanced to minimize the pad-
ding, thereby improving initial BLER. This is done through a combined selection of the number 
of PRB and MCS (based upon SINR and TBS input to each), instead of a sequential approach, 
selecting first the MCS then the number of PRB. In the case of the SPS allocation, the MCS is 
decided at the start of the talk spurt and used throughout the talk spurt. After SPS activation, 
the same PRBs are used every 20 ms for the initial transmission of the VoIP frame. For example, 
uplink MCS/PRB/modulation is fixed at 2PRBs, MCS = 10 when SPS is activated. UL SPS also 
SPS-Config parameter
Value
SPS C-RNTI (UE ID used to schedule an SPS
unicast transmission, activation, reactivation and 
retransmission)
003D –FFF3
SPS DL Config
SPS interval DL 
10 –640 ms 
No. of configured HARQ processes for SPS 
1–8
SPS UL Config 
SPS interval UL 
10 –640 ms 
Implicit release after (No. of empty transmissions
(padding PDU) on the UL before the UE
implicitly releases the UL SPS grant)
2,3,4,8
Table 11.15  Dynamic scheduler versus semi‐persistent scheduler.
Dynamic scheduler
Semi‐persistent scheduler
VoIP priority 
over data
Adaptive QoS weighting algorithms
Fixed absolute priority of SPS VoIP over data
PDCCH grant 
signaling
High: At every initial Tx in DL/UL 
Also at HARQ Retx on DL
Low: At SPS activation on DL/UL; At SPS 
release and HARQ Retx on OL; At explicit UL 
SPS release.
Link adaptation
MCS/PRB determined per packet 
(every 20 ms) based on user’s RF 
and BLER
MCS/PRB determined per talk spurt (every 
several seconds)
UL Power 
Control
Slow power control (200 ms)based on 
FPC, fixed target SINR based on 
pathloss
Fast power control (~20 ms) with adaptive SINR 
target based on BLER performance
RLC 
segmentation
Yes
No

VoLTE Optimization
479
adds an outer loop power control (since there is no rate control) to avoid packet segmentation 
issue, which makes it even more efficient with scheduling grants compared to dynamic 
scheduler.
DL and UL SPS activation are enabled by RRC configuration, including SPS‐C‐RNTI, UL 
transmission pattern interval, implicit release after count, and so on. When a SPS bearer is 
established, the eNB sends a RRC connection reconfiguration message with the new SPS bearer 
added. To activate the SPS, the DL/UL scheduler sends an SPS grant in PDCCH, addressed to 
the SPS‐C‐RNTI assigned to the UE. If the UE correctly decodes the grant and correctly 
receives the first SPS transport block (first SPS MAC packet), it sends an ACK. When the eNB 
receives the ACK for the SPS packet transmission, the SPS activation is considered successful, 
and vice versa, the reserved PDCCH resources are freed (as no longer needed).
The minimum radio link quality conditions for SPS activation includes the UE is in speech 
active state, the normalized power headroom, the wideband SINR, no measurement gap 
actived for the UE and no SPS activation prohibit timer is running. DL and UL SPS activation 
is shown in Figure 11.36 and Figure 11.37.
To deactivate the SPS, the DL/UL scheduler will send another SPS grant, if the UE correctly 
decodes the grant, it sends an ACK. When the eNB receives the ACK, the SPS deactivation is 
considered successful. DL always uses explicit release procedure by sending special form of 
DCI1A to the UE in case of:
●
●VoIP inactivity (more than 20 ms‐periods have elapsed with the SPS buffer empty)
●
●Measurement gap activation procedure
●
●SPS activation failure
●
●Potential collision with PDSCH carrying common channels (e.g., paging, D‐BCH) or posi-
tioning reference signals or eMBMS
●
●After inactivity timer of SPS release expires
●
●BLER is higher than threshold for SPS
●
●SPS grant parameter value (i.e., MCS or number of PRBs) changed due to GBR 
modification
Figure 11.36  DL SPS activation.
www.ebook3000.com

Figure 11.37  UL SPS activation.

VoLTE Optimization
481
●
●Last VoIP bearer deletion
●
●SINR falls below the minimum SINR For SPS
In such above cases, SPS is released by an implicit release. An example of implicit release is 
shown in Figure 11.38 that the release will occur after two consecutive MAC PDUs without any 
MAC SDUs.
When an SPS release is initiated, all transmissions (intial and retransmissions) are managed 
by the dynamic scheduler. The SPS release is considered successful if an ACK is received.
11.3.3  Delay Based Scheduling
On top of the QoS aware scheduler, the idea is that VoIP packet is not scheduled immediately 
but that several packets are packed in the same transport block. eNB shall check whether there 
is a need to allocate resource to the UE at every UL scheduled TTI. A delay‐based scheduler 
will prioritize users whose packets are getting close to their PDB (packet delay budget). The 
amount of bundling is determined by the setting of bundling time, which, in turn, is influenced 
by the operator via the parameter PDB (Figure 11.39).
The goal of delay‐based scheduling is to ensure that all VoIP packets of UEs in good and poor 
channel conditions are received correctly within assumed delay target, that is, delay–based 
scheduling is a mechanism that allows to match the packet aggregation level to the delays on 
radio interface. Figure 11.39 shows that under relatively fair channel conditions, aggregation 
can be increased, while in good channel conditions, more packets can be aggregated. The 
scheduler evaluates the actual scheduling delay of voice packet and compares it with a delay 
target to decide UE priority, if measured delay is bigger than delay target, UE priority is 
increased, otherwise UE priority is decreased.
The idea is that VoIP packet is not scheduled immediately but several packets are packed in 
the same transport block. So depending on the configured threshold, one can control on how 
many VoIP packets are bundled at one transport block by knowing the VoIP packet size of 328 
bits. However, there is also a requirement for delay, so that buffering is not possible in all cases.
Delay‐based scheduling provides the ability to observability for real‐time service in terms of 
the degree to which packets meet their packet delay. The benefit of DBS (delay based sched-
uler) is improved capacity. It provides more opportunities to schedule best effort traffic. Uplink 
packet sizes can be predicted so as to allow uplink grants requests to be minimized, thereby 
reducing control channel usage. VoIP packets for UEs in good radio conditions can be bundled 
without compromising VoIP quality. When VoIP packets are bundled, resources are freed that 
can be used for scheduling of MBB services. The main key areas where this scheduler contrib-
utes to are voice performance, smartphone efficiency, and network efficiency.
drxShortCycle= 40 ms
eNB
SR
VoIP SID RLC SDU detected
Grants are sent until implicit release
PDU with
0 MAC SDU
2 MAC PDUs with
0 MAC SDUs detected
Implicit Release
Implicit Release
BSR+ Data (SID)
UE
2 MAC PDUs with
0 MAC SDUs sent on sps
grant
PDU with
0 MAC SDU
spsActGrant
4
ms
4
ms
4
ms
160 ms
x
ms
4
ms
grant
BSR+ Data (SID)
spsActGrant
Figure 11.38  SPS implicit released (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
482
The combined DBS and SABE (service aware buffer estimation) scheduler is prefered in a live 
network that will automatically keep track of whether the user is in TALK or SID (silence indi-
cator) state in order to control the packet‐bundling periodicity and grant estimation size. The 
combinded DBS and SABE scheduler adapts to handle different codec rates, RoHC on/off, IPv4 
or IPv6, and so on. The delay added by combined DBS and SABE is expected to be less than 
PDB + pdbOffset; therefore, these two functions should work together without a problem.
It’s worth to note that DBS and SABE are not beneficial or efficient for video. It is not possible 
to recognize a video packet in the system in the same way as a VoIP packet is recognized as it 
is not possible to determine the age of a video packet.
11.3.4  Pre‐scheduling
For LTE uplink, the scheduler is located in the eNB and the buffers are in the UE. Therefore, 
the uplink scheduler has no direct knowledge of the amount of data available in the UE. The UE 
can inform the uplink scheduler that it has data by sending a scheduling request (SR) on 
PUCCH or PUSCH. The terminal can also send a buffer status report (BSR) together with data 
on PUSCH indicating the size of every priority queue in the UE. There will always be a delay 
between the time when the data arrives in the buffer and the time when the uplink scheduler is 
informed. VoIP is a very delay‐sensitive service so minimizing the delay of the uplink will 
increase the VoIP capacity.
Pre‐scheduling is a method to minimize UL delay by means of blindly giving PUSCH grants 
to a UE in advance, without receiving buffer status information (SR, BSR). Pre‐scheduling 
w
P2
P1
PX
No Aggregation
Aggregation Level 2
Aggregation Level 3
PDB1
PDB2
Scheduler
internal
parameters
P3
PDB3
remaining delay budget [ms]
80
70
60
50
40
30
10
–10
20
40
60
80
100
Delay Term
20
0
Figure 11.39  Packet delay budget and its configurable attributes.

VoLTE Optimization
483
means the eNB periodicity grants the UE even if UE reported BSR = 0 (UL buffer empty) or 
the UE has not sent an SR. Pre‐scheduling improves UE response time and thereby reduce 
latency, but with the cost of higher UE battery power consumption and also occupy the 
resources of the network without guarantee that these resources will be used for transmis-
sion, since the grants are giving blindly to the UE. The UE will respond to the UL grants even 
if it has no data to send. In this case it will send padding data (the BSR is called “Padding 
BSR”) and thus UE will not go DRX and UL out‐of‐sync state. All in all, the UE will less often 
be in a battery saving state when the UE has no data to send when pre‐scheduling is enabled. 
Pre‐scheduling can be automatically deactivated (timer controlled) to reduce the impact on 
UE power consumption.
As mentioned in Chapter 2, the most common benchmark for observability of the IP packet 
latency in the network latency is the ping test. It is used to test the reachability of the host on IP 
network and to measure the round trip delay in the network. The theoretical analysis, which 
has been confirmed by the measurements in the network, shows that when prescheduling was 
used in uplink transmission, the latency performance was about 6 ms better than the case with 
ordinary scheduling request (see Figure 11.40).
One example is shown in Figure 11.41, one advantage is paging time can be reduced by 30% 
to 50% by pre‐scheduling, and another one is the corresponding time inprovement on a com-
plete web download is 3% to 10%.
Pre‐scheduling targets the cases where the traffic load in the network is low or moderate. 
Actually, prescheduling grants are sent only if there are free resources and only in good radio 
condition. In other hand, counters and drive tests results show that uplink is heavily impacted 
by the prescheduling, due to increase of UL interference. In particular, the selected transport 
format and the uplink BLER is much worse when prescheduling is active, power consumption 
while transmitting doesn’t change too much.
Delay Breakdown
Time [ms]
SR
Grant
PING
PING
PING
PING
5
SR encod. and alignment
1
eNB processing
3
1
11
1
1
3GPP specified delay
4
Core network delay
3
2
5
10
15
20
UE
eNB
Server
10
0
Delay Breakdown
PING
PING
Time [ms]
PING
Grant
PING
PING
PING
PING
PING
11
1
1
3GPP specified delay
4
Core network delay
3
2
5
15
20
UE
eNB
Server
0
Figure 11.40  Total round trip 
delay(23 ms) versus total round 
trip delay with pre‐scheduling 
(13 ms).
www.ebook3000.com

LTE Optimization Engineering Handbook
484
11.4  ­PRB and MCS Selection Mechanism
Varying transport formats (modulation, coding scheme, number of RBs and TBS) result in dif-
ferent SINR requirements. VoLTE data rate may vary depending on codec rates. Coverage for 
VoLTE users depends on the cell‐edge SINR in relation to chosen TBS.
Enhance the UL coverage of VoLTE in bad radio conditions, the mechanism of PRB and MCS 
selection that the UL scheduler uses to control the minimum number of PRBs and the mini-
mum MCS value assigned to scheduled PRBs. PRB override and MCS override usually working 
together only for VoIP calls. The scope is to be able to achieve the VoIP codec rate (e.g., 
12.65 kbps AMR‐WB) and thus obtain a good call quality even in bad radio conditions.
11.4.1  Optimized Segmentation
For a UE in bad radio conditions, the UL scheduler is going to start segmentation of packets in 
order to use a more robust MCS for the transmission of each individual packet. Segmentation 
of the VoIP packet introduces delay to transmission of the packet, thus limiting the maximum 
useful bit rate achievable on the radio link.
To ensure the reasonable reliable VoLTE services at poor UL RF condition, two types of con-
straints need to be addressed to residual block error rate (rBLER) and the packet transfer delay.
When the uplink scheduler struggles to maintain its target initial block error rate (iBLER) 
performance when the total amount of power used for the transmission cannot be increased. 
The typical behavior of the uplink scheduler is to start segmenting the packets to allow the use 
No Prescheduling, m=27ms, std=3ms 
1ms Prescheduling, m =14ms, std=1ms 
5ms Prescheduling, m =16ms, std =2ms 
10ms Prescheduling, m =18ms, std =3ms
0
0
1
2
3
[s]
[ms]
4
5
6
5
10
20
25
30
15
35
No Prescheduling, mean DL time = 6325 ms
1 ms Prescheduling, mean DL time=5690 ms
5 ms Prescheduling, mean DL time=6065 ms
10 ms Prescheduling, mean DL time = 6139 ms
Figure 11.41  The example of pre‐scheduling.

VoLTE Optimization
485
of more robust MCS for the transmission of each individual packet. The number of payload bit 
per transmission is consequently reduced, thereby increasing the amount of power per trans-
mitted bit, which in turns leads to an improved iBLER performance. The packet segmentation 
introduces delay to the transmission of the packet and inherently introduces a bottleneck to the 
maximum useful bit rate that can be achieved on the radio link (since the number of bit per TTI 
is restricted). Beyond a critical level of segmentation (i.e., below a minimum payload size per 
TTI) the radio link throughput becomes lower than the VoLTE codec rate and the overall 
packet delay start to build up.
Under various fading channel conditions, optimized segmentation yields 3‐4 dB improve-
ment in terms of maximum acceptable uplink path loss (MAPL) for an AMR 12.2 kbps codec 
managed with uplink dynamic scheduler, comparing with the case no optimized segmentation 
is enforced.
11.4.2  PRB and MCS Selection
If initial BLER is too low, meaning MCS/PRB selection is too conservative, then PRBs used for 
initial SPS packet transmission will be high even if the retransmission will be low. If initial 
BLER is too high, meaning MCS/PRB selection is too aggressive, then the retransmission of the 
SPS packet may be high and also, when users move to a worse RF condition, SPS may not work. 
In this part, we try to find the right MCS/PRB table to make the initial BLER to be around 10% 
for SPS packets. There is a trade‐off between the initial BLER for SPS and the total PRB usage. 
SPS PRB and MCS selection procedure is shown in Figure 11.42.
Example
The 12.65 kbps AMR‐WB codec delivers a 32‐byte speech frame every 20 ms, consequently 
the total payload to be transported over four segments is:
3byte RoHC header + 1byte PDCP header + 6 bytes for 1st segment header size + 3 x (4 bytes 
for subsequent header size) + 32 bytes useful payload = 176 bit header + 256 bits useful pay-
load = 432 bits → Consequently the minimum transport block size per segment is 432/4 = 108 
bits, and the four prefered TBS can be selected in Table 11.16.
In a live network, as described in the example above, the following MCS rules should there-
fore be used for enforcing a maximum of four segments per speech frames as different number 
of scheduled RBs will affect uplink coverage. In Table 11.15, if the PUSCH grant size is 1 PRB, 
Figure 11.42  SPS PRB and MCS selection.
www.ebook3000.com

LTE Optimization Engineering Handbook
486
the minimum MCS = 8, if the PUSCH grant size is 2 PRB, the minimum MCS = 4, if the 
PUSCH grant size is 3 PRB, the minimum MCS = 2, and if the PUSCH grant size is 4 PRB, the 
minimum MCS = 1.
11.5  ­VoLTE Capacity
As specified by 3GPP, the requirement for VoIP capacity is at least 200 users for each cell in the 
5 MHz bandwidth. Basically, three things can limit the VoIP capacity in an LTE system: control 
channel capacity, the number of resource blocks, or UE power. In other words, VoLTE capacity 
mainly depends on scheduling capacity and PUSCH capacity. More symbols allocated for the 
PDCCH per TTI gives better capacity, lower voice codec bit rates permits more users, and 
higher allowed radio interface delay also permits more users. From network design point of 
view, smaller cell size permits more users.
Some features in VoLTE can also help increasing capacity. RoHC is deployed in VoLTE, 
which increases the VoIP capacity in cases where PDSCH or PUSCH capacity is the limiting 
factor. RLC UM increases the VoIP capacity in cases where the number of transmissions per 
TTI is limited. DBS and SABE scheduling can also increase the capacity for VoIP users.
The VoLTE capacity is defined according to the number of QCI 1 bearers managed by the 
cell. Based on the actual bitrate per VoIP call listed in Table 11.17, we can calculate the number 
of simultaneous VoIP calls.
VoIP system capacity is defined as the number of users in the cell when more than 95% of the 
users are satisfied. VoIP capacity is defined as the min of the two capacities. Outage criteria: 
less than 5% of VoIP users in the system are in outage; Delay criteria: less than 5% of VoIP users 
have its 98th percentile delay greater than 50 ms. User outage criteria includes:
●
●Packet error rate (PER): the ratio between num of packets in errors after max num of HARQ 
Tx plus num of packets discarded at UE and num of total packet transmitted by the UE. VoIP 
outage: a UE is in VoIP outage if its PER exceeds 2%
●
●Call dopping criteria: A VoIP call is dropped if more than a certain percentage (10%) of the 
VoIP packets is lost in an observation window of 10s (sliding window of talk time).
●
●Lost VoIP packet criteria: A packet (or any segment) is discarded at eNB if not sent within the 
delay budget or a packet (or any segment) is discarded at UE if received beyond the delay 
budget (it can happen in case of retransmission) or a packet (or any segment) is lost due to 
HARQ failure.
Table 11.16  Transport block size.
TB size 
(in bits)
IMCS
0
1
2
3
4
5
6
7
8
9
10/11
NPRB
1
16
24
32
40
56
72
328
104
120
136
144
2
32
56
72
104
120
144
176
224
256
296
328
3
56
88
144
176
208
224
256
328
392
456
504
4
88
144
176
208
256
328
392
472
536
616
680
5
120
176
208
256
328
424
504
584
680
776
872

VoLTE Optimization
487
11.5.1  Control Channel for VoLTE
With a baseline dynamic VoIP packet scheduling approach, where each packet is transmitted 
by layer1 control signaling, multi‐UE channel sharing is an important aspect when optimizing 
air interface capacity for VoLTE traffic. PDCCH being transmitted to each scheduled terminal, 
its overhead can be significant and limiting factor since VoIP consists of many small packets. 
This can result in insufficient control channel resources for scheduling all physical resource 
blocks while wasting part of PDSCH capacity.
Highest achievable PDCCH capacity [users per cell] is given by:
	
N
N
SE per TTI consumption
N
N
N
VoIP
grants
grants
CCE
CCE ave
,max
,
2
	
Factor 2 in the formular above appears because required Ngrants is sum of requirements for 
UL and DL. NCCE is the number of allocated CCEs in the cell which depends on bandwidth. 
NCCE,ave is the average number of CCEs per PDCCH which depends on cell size and load.
In a live network, DL scheduling entity (SE) consumption estimation can be got from:
	
DL
VAF
VAF
Retrans
SEperTTI VoLTE
,
*
%
40
1
160
1
.
	
In the live network, segmentation and TTI‐Bundling will occur on the UL due to UE UL 
power limitation, average UL SE considering mixed radio condition (neither segmentation nor 
TTI‐Bundling, segmentation, TTI Bundling) is given below.
	
UL
Seg
TTI
VAF
VAF
SEperTTI VoLTE
Bunding
,
%
.
%
*
1
40
1
160
%
.*
*
%
*
*
Seg
VAF
VAF
TTIBunding
2
40
1
160
4
VAF
VAF
Retrans
40
1
160
1
*
%
.
	
Table 11.17  Source codec bit‐rates for the AMR codec (from 3GPP TS26.071) and AMR‐WB codec 
(from 3GPP TS26.171).
Codec mode
Source codec bit‐rate
Codec mode
Source codec bit‐rate
AMR_12.20
12.20 kbit/s (GSM EFR)
AMR‐WB_23.85
23.85 kbit/s
AMR_10.20
10.20 kbit/s
AMR‐WB_23.05
23.05 kbit/s
AMR_7.95
7.95 kbit/s
AMR‐WB_19.85
19.85 kbit/s
AMR_7.40
7.4 kbit/s (IS‐641)
AMR‐WB_18.25
18.25 kbit/s
AMR_6.70
6.70 kbit/s (PDC‐EFR)
AMR‐WB_15.85
15.85 kbit/s
AMR_5.90
5.90 kbit/s
AMR‐WB_14.25
14.25 kbit/s
AMR_5.15
5.15 kbit/s
AMR‐WB_12.65
12.65 kbit/s
AMR_4.75
4.75 kbit/s
AMR‐WB_8.85
8.85 kbit/s
AMR_SID
1.80 kbit/s
AMR‐WB_6.60
6.6 kbit/s
AMR‐WB_SID
1.75 kbit/s
www.ebook3000.com

LTE Optimization Engineering Handbook
488
According to the network Ng = 1 configuration, PDCCH resources are aggregated in groups 
of 1, 2, 4, and 8 CCEs, and different aggregation level needs different RS SINR that is shown in 
Table 11.18.
According to the real user distribution in a live network, we can estimate the number of VoIP 
users in a cell in a simple way,
	
444 3 10
222 2 10
111 2 10
55 3 10
216
*
*
*
*
/
/
/
/
	
In a live network, VoLTE packets consists of two parts: activity (Talk) and inactivity (Silence). 
Standard voice is packetized in 20‐ms intervals. With DBS it will be 40 ms, for the calculations 
20 ms is used, for the inactivity part, SID frames arrive in 160 ms interval. In this case, the VoIP 
capacity in a cell can still be higher.
For UL, the L1/L2 control signaling is carried by PUCCH, CQI information indicating the 
channel quality estimated by the terminal, and UL scheduling requests indicating that the ter-
minal needs UL resources for PUSCH transmissions, as the number of served UE increases, the 
CQI overhead can increase significantly, which may become prohibitively large with VoLTE 
traffic while a large number of UEs must be supported. To maintain the UL control overhead at 
a reasonable level, CQI feedback should be reduced both in time and in the frequency domain. 
A reduction of CQI overhead can be achieved with slightly reduced traffic capacity by means 
of wideband CQI with loss of frequency scheduling gain.
11.5.2  Performance of Mixed VoIP and Data
VoLTE call quality is dependant on the LTE network handling thousands of concurrent SIP 
sessions per second. Due to the fact that VoIP is a guaranteed bit rate (GBR) service it will be 
served (scheduled during time domain scheduling phase) before all non‐GBR services, dedi-
cated QoS for voice in LTE will impact data applications running on the same limited band-
width resources.
The average data throughput for a user with a VoIP bearer established is decreased compar-
ing to the case when only the data bearer is established. Non‐GBR UE throughput decreases 
with an increase of the number of VoIP UEs in the cell, due to PDCCH block and the low prior-
ity, as compared with VoIP UE. VoIP UE throughput is stable regardless of the number of VoIP 
UEs in the cell. UL non‐GBR UE throughput is almost zero when the number of VoIP UEs is 
larger than 130, because non‐GBR traffic has no chance to be scheduled (Figure 11.43).
From Figure 11.44, total cell throughput decreases with higher number of VoIP users in the 
cell. VoIP traffic increases linearly, has higher priority thus is not blocked. Due to lower priority 
non‐GBR traffic has much less scheduling occasions; therefore, throughput generated by non‐
GBR UEs decreases when more VoIP UEs are in the network.
Using SPS for VoIP alleviates the demand for scheduling grants on PDCCH, allowing higher data 
throughput. UL SPS adds outer loop power control (since there is no rate control) to avoid packet 
segmentation issue, which makes it even more efficient with scheduling grants ­compared to DS.
Table 11.18  SINR versus CCE.
Aggregation level
1
2
4
8
Max number of CCEs
444
222
111
55
Swith point (dB)
6.3
2.4
0.5
−2

VoLTE Optimization
489
Overall, there is a degradation in data throughput with DS compared to SPS, and the degra-
dation increases with the number of voip users increases. In Figure 11.45, we can see that 100 
voice calls, the degradation is around 34%; 50 voice calls, the degradation is about 13%; 20 voice 
calls, no degradation is found.
Both UL and DL show that SPS scheduler improves the residual data throughput when the 
number of voip users is large, which causes grant shortage, that is, for 50 VoIP users, the UL 
and DL gain of SPS versus DS is 13% and 5%, respectively. For 100 VoIP users, the UL and DL 
gain of SPS versus DS is 34% and 13%, respectively. When the number of VoIP users is small, 
or the grant is not the limiting factor, SPS scheduler performs similar with DS scheduler.
In a live network, voice outage in a cell is sensitive to interference over thermal (IoT). Higher 
IoT level is due to inreasonable network structure, more users, higher SINR targets, and higher 
bandwidth occupancy with SPS compared to DS. Figure 11.46 gives the relation between IoT 
and number of UEs.
0
2
4
6
8
10
Parameter
Layout
3GPP Macro Case 1 according to TR 25.814
Setting
500 m
Ideal
Real
Ideal
Real
Ideal
Real
Ideal
Real
Ideal
Real
Ideal
Real
Ideal
Real
10
50
100
130
140
150
175
Number of VoIP UEs Per Cell
UL mean # of scheduled UEs Per TTI
non-GBR
VoIP
ISD
Link
Duplex mode
TDD DL/UL Config
Antenna type
Transmission modes
Operational band (MHz)
Bandwidth (MHz)
Output power
indoor penetration loss
Receive Diversity
Slow fading
Fast fading
DL + UL
TDD
DL/UL:TDD Conifg 1
Special subframe: Config 5
according to 3GPP TR 25.814
3GPP_TR25814_3sector_70deg_14dBi
TM1
2 GHz
10M Hz
eNB 0.8W per PRB
UE 23dBm
20 dB
2 RX
Std. dev = 8 dB; corr. distance = 50 m
TU3
Figure 11.43  10 MHz TDD cell UL mean # of schedeled UEs per TTI.
www.ebook3000.com

LTE Optimization Engineering Handbook
490
Figure 11.44  Performance of mixed VoIP and data.
0
50
100
150
200
250
10
50
100
120
130
140
150
175
UE Throughput (kbps)
Number of VoIP UEs Per Cell
Mean UL non-GBR UE TP
3
4
5
6
7
8
10
50
100
120
130
140
150
UE Throughput (kbps)
Number of VoIP UEs Per Cell
Mean UL VoIP UE TP
0
1000
2000
3000
4000
5000
6000
7000
10
50
100
130
140
150
175
Cell Throughput (kbps)
Number of VoIP UEs Per Cell
DL mean TP
Total TP
no-GBR TP
VoIP TP
0
500
1000
1500
2000
2500
10
50
100
130
140
150
175
Cell Throughput (kbps)
Number of VoIP UEs Per Cell
UL mean TP
Total TP
Non-GBR TP

VoLTE Optimization
491
11.6  ­VoLTE Coverage
As the industry moves toward deployments of VoLTE, one of the most important performance 
aspects is to be able to provide similar coverage for VoLTE as end users have come to expect 
from 2/3G voice. However, VoLTE introduces several coverage challenges that were not pre-
sent in 3G circuit switched voice. For instance, VoLTE deployments have targeted use of high‐
definition voice codes such as AMR 12.65 kbps for improved voice quality, while many 2/3G 
voice network designs have been based on lower rate narrow band voice even AMR 5.9 kbps, 
which can provide larger coverage since fewer bits need to be sent. Further, VoLTE has 
0.00
2.00
4.00
6.00
8.00
10.00
12.00
14.00
16.00
0
50
100
150
200
Residual data throughput
(Mbps) 
Number of voice calls
DS
SPS
Figure 11.45  Benefits of SPS for VoIP on uplink (10 MHz carrier, TDD, multicell).
0
2
4
6
8
40
50
60
70
80
90
100
110
IoT dB
UE Number
DS, AL=4
SPS
0
14
20
50
100
Number of Voice Calls
12
10
8
IoT (dB)
6
4
2
0
Figure 11.46  IoT versus number 
of UEs.
www.ebook3000.com

LTE Optimization Engineering Handbook
492
­additional IP, PDCP, RLC, and MAC header overhead compared to circuit switched based 
voice. This extra IP overhead for VoLTE compared to 2/3G CS voice again means fewer bits for 
coding, reducing receiver sensitivity. Fortunately, there are aspects of LTE that help make up 
for the shortcomings that will be discussed in this part.
In order to get good VoIP coverage, segmentation and TTI bundling is used. With segmenta-
tion, VoIP packets are split into smaller parts in order to distribute transmission over several 
TTIs. Since the UE output power is limited, it is important to achieve continuous transmission 
to maximize the transmitted energy. TTI bundling is used to minimize overhead, by autono-
mous retransmission over four consecutive TTIs. This reduces the need for segmentation and 
also control signaling needed to schedule each transmission. Also, minimum bandwidth allo-
cation could be adopted to enhance the UL coverage. The techniques discussed in this part will 
achieve different compromises in terms of experienced BLER, protocol overhead, required 
scheduling grants, efficient MCS, bandwidth utilization, and packet delay.
11.6.1  VoIP Payload and RoHC
VoIP coverage mainly determined by VoIP throughput requirement. VoIP throughput is 
defined by the voice codec and overhead introduced by lower layers. The VoLTE voice codec, 
L2/L1 SDU bits is shown in Table 11.19.
Different voice code rate have different SINR requirement, reducing AMR codec rate from 
12.2 kbps to 5.9 kbps brings additional ~1 dB gain in DL and ~1.2 dB gain in UL. Table 11.20 
gives the SINR requirement of three types voice code rate.
Use of RoHC can considerably compress the header size in voice packets and reduce the user 
plane traffic over the air interface. The high compression ratio obtained not only increases 
network capacity but also provides coverage improvements for VoLTE compared to other VoIP 
alternatives. The test result of bandwidth consumption for AMR and AMR‐WB (Figure 11.47).
Table 11.21 and Table 11.22 gives the UL and DL VoIP bitrate requirement with and with-
out RoHC.
Here is an example of field test, under two UEs VoIP call with mobility slow speed (30 km/h 
EVA), the inter‐arrival time of originator/terminator VoIP calls, and average VoIP throughput 
are shown in Figure 11.48, Figure 11.49, and Figure 11.50.
1)	 Originator is under the condition of inter‐arrival VoIP packets are 20 ms, inter‐arrival SID 
packets are 160 ms; first DTXed packets inter‐arrival is 60 ms. We can get the average VoIP 
inter‐arrival time is 30 ms, the maximum inter‐arrival time is 167 ms, the minimum inter‐
arrival time is 0 ms.
2)	 From terminator, impact of the network jitter can be noticed, and we can get the average 
VoIP inter‐arrival time is 30 ms, the maximum inter‐arrival time is 180 ms, the minimum 
inter‐arrival time is 0 ms.
3)	 From the throughput pattern and statistics, we can observe the ‘DTX on’ effect, SID frames 
will be sent if there is no speech activity. We can get the average throughput is 24 kbps, the 
maximum throughput is 38 kbps, the minimum throughput is 4 kbps.
11.6.2  RLC Segmentation
When a VoLTE UE moves toward the cell edge, SINR received by eNB starts to decrease due to 
UE power limitation. To maintain the initial block error rate (iBLER), UL dynamic scheduler 
automatically starts segmenting the VoIP packets from PDCP into multiple smaller packets. 
This is called a packet segmentation algorithm, which is used as an extension to link adaptation 
for uplink cell edge coverage improvement.

 Table 11.19  VoIP payload and L2/L1 throughput. 
Voice Codec
Codec Source 
Rate [kbps]
Frame 
Size [bit]
Padding [bit]
PDCP 
Header [bit]
L2 SDU [bit]
RLC 
header [bit]
MAC 
header [bit]
CRC [bit]
L1 SDU [[bit] 
AMR‐NB 1.8
1.8
36
4
40
80
8
8
24
120 
AMR‐NB 4.75
4.75
95
1
40
136
8
8
24
176 
AMR‐NB 5.15
5.15
103
1
40
144
8
8
24
184 
AMR‐NB 5.9
5.9
118
2
40
160
8
8
24
200 
AMR‐NB 6.7
6.7
134
2
40
176
8
8
24
216 
AMR‐NB 7.4
7.4
148
4
40
192
8
8
24
232 
AMR‐NB 7.95
7.95
159
1
40
200
8
8
24
240 
AMR‐NB 10.2
10.2
204
4
40
248
8
8
24
288 
AMR‐NB 12.2
12.2
244
4
40
288
8
8
24
328 
AMR‐WB 1.75
1.75
35
5
40
80
8
8
24
120 
AMR‐WB 6.6
6.6
132
4
40
176
8
8
24
216 
AMR‐WB 8.85
8.85
177
7
40
224
8
8
24
264 
AMR‐WB 12.65
12.65
253
3
40
296
8
8
24
336 
AMR‐WB 14.25
14.25
285
3
40
328
8
8
24
368 
AMR‐WB 15.85
15.85
317
3
40
360
8
8
24
400 
AMR‐WB 18.25
18.25
365
3
40
408
8
8
24
448 
AMR‐WB 19.85
19.85
397
3
40
440
8
8
24
480 
AMR‐WB 23.85
23.85
477
3
40
520
8
8
24
560
www.ebook3000.com

 Table 11.20  SINR requirement of different voice code rate. 
Codec
AMR‐NB 12.2
AMR‐NB 7.95
AMR‐NB 5.9 
Bits/frame
328
240
200 
DL
#PRBs
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx)
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx)
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx) 
[dB]
[dB]
[dB]
[dB]
[dB]
[dB] 
1
18
11,87
1,46
15
9,65
0,27
13
7,87
–0,81 
2
11
5,54
–2,03
8
3,73
–3,31
 7
3,35
–3,61 
3
 7
2,72
–4,09
6
2,23
–4,17
 4
0,76
–5,36 
6
 3
–0,10
–5,63
2
–0,92
–6,27
 1
–1,55
–6,72 
UL
#PRBs
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx)
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx)
MCS 
index
10% BLER 
(1 st Tx)
2% BLER 
(4 th Tx) 
[dB]
[dB]
[dB]
[dB]
[dB]
[dB] 
1
17
11,43
1,95
15
9,37
1,28
13
7,95
0,41 
2
10
5,36
–1,97
8
3,83
–2,75
 7
3,11
–3,07 
3
 7
2,54
–3,62
6
1,35
–4,25
 4
0,78
–4,73 
6
 3
–0,33
–5,58
2
–1,37
–6,43
 1
–1,89
–6,79

VoLTE Optimization
495
Packet segmentation algorithm is not an event‐triggered mechanism, it is done automatically 
and only for UEs with poor radio channel. In worsening radio conditions scheduler performs 
packet segmentation on layer 2 in order to use more robust MCS and transmits the packet over 
multiple TTIs. Since RLC/MAC overhead is transmitted more than once, more resources are 
consumed to transmit the same amount of user data, more resources on PDCCH are utilized 
and also on PHICH due to transmission of ACKs/NACKs for HARQ purposes.
Also the basic dynamic scheduler has the problem that it may excessively segment voice 
packets trying to maintain 10% iBLER as the path loss increases, leading to build‐up of voice 
frame segments in the queue leading to excess delay and this becomes the factor which limits 
the link budget (Figure 11.51).
RLC segmentation reduces the payload bit per transmission and increases the amount of 
power per transmitted bit. It allows to use more robust MCS. Consequently, iBLER is reduced.
Each segment occupies a separate HARQ process, the RLC layer reassembles the packet 
when all segments are successfully received. Each segment needs an additional grant, more 
resources on PDCCH are utilized, which increases the burden on the PDCCH.
Link adaptation in dynamic scheduler (DS) reduces MCS level to a point where eventually a 
VoIP packet is segmented into many separate smaller MAC SDUs, and improves the link 
budget.
Table 11.21  VoLTE bitrate estimation – downlink.
AMR12.2
AMR WB12.65
AMR WB23.85
No RoHC
RoHC
No RoHC
RoHC
No RoHC
RoHC
Payload and headers
616
320
624
328
848
552
Number of segments
1
1
1
1
1
1
TBS per segment
616
328
648
328
872
568
CRC added
640
352
672
352
896
592
Bitrate[kbps]
30.8
16.4
32.4
16.4
43.6
28.4
SID packet size (bit)
56
56
56
56
56
56
Number of SID packet/sec
10
10
10
10
10
10
SID bitrate[kbps]
0.56
0.56
0.56
0.56
0.56
0.56
Activity factor
60%
60%
60%
60%
60%
60%
Overall bitrate[kbps]
18.7
10.1
19.7
10.1
26.4
17.3
60.0
40.0
20.0
0.0
Normal
Consumption
Consumption With
RoHC
Consumption With
RoHC & VAD
0%
50%
100%
150%
% Reduction
Kbps
Figure 11.47  RoHC versus VoIP throughput.
www.ebook3000.com

 Table 11.22  VoLTE bitrate estimation – uplink. 
AMR12.2
AMR WB12.65
AMR WB23.85 
Segmentation
TTI Bundling
Segmentation
TTI Bundling
Segmentation
TTI Bundling 
No RoHC
RoHC
No RoHC
RoHC
No RoHC
RoHC
No RoHC
RoHC
No RoHC
RoHC
No RoHC
RoHC 
Payload with RTP/UDP/IP/PDCP
584
288
584
288
592
296
592
296
816
520
816
520 
Payload and all headers
616
320
616
320
624
328
624
328
848
552
848
552 
Number of segments
4
4
4
4
4
4
4
4
4
4
4
4 
Size per sub‐packet
162
88
616
320
164
90
624
328
220
146
848
552 
TBS per segment
176
104
632
328
176
104
632
328
224
176
904
552 
CRC added
200
128
656
352
200
128
656
352
248
200
928
576 
Bitrate[kbps]
35.2
20.8
126.4
65.6
35.2
20.8
126.4
65.6
44.8
35.2
180.8
110.4 
SID packet size (bit)
56
56
56
56
56
56
56
56
56
56
56
56 
Number of SID packet/s
10
10
10
10
10
10
10
10
10
10
10
10 
SID bitrate[kbps]
0.56
0.56
0.56
0.56
0.56
0.56
0.56
0.56
0.56
0.56
0.56
0.56 
Activity factor
60%
60%
60%
60%
60%
60%
60%
60%
60%
60%
60%
60% 
Overall bitrate[kbps]
21.3
12.7
76.1
39.6
21.3
12.7
76.1
39.6
27.1
21.3
108.7
66.5

VoLTE Optimization
497
Each segment is wrapped with RLC/MAC header and CRC checksum and is transmitted in 
a separate transport block causing additional overhead. VoIP packet size with RLC segmenta-
tion and overhead analysis are presented in Table  11.23. One example of segmentation of 
AMR‐NB 12.2 kbps is shown in Figure 11.52. Due to smaller segment sizes, RLC segmentation 
can help the link budget that the RLC segmentation allows higher total energy accumulation 
within the delay budget, and more robust MCS can be used increasing coverage but in cost of 
capacity degradation.
180
160
140
120
100
80
60
40
Inter-Arrivel [ms]
20
0
:04
:17
:24
:30
:37
:43
:00
:55
:02
5.6
:01
:02
:02
:34
:41
:46
:52
:59
:05
:10
:17
:23
:30
:37
:42
:48
:55
:12
:18
:25
:33
:38
:45
:52
:58
:5.4
:09
:16
:23
:29
:34
2.1
5.7
Figure 11.48  Inter‐arrival time of originator VoIP calls from field test.
180
160
140
120
100
80
60
40
20
Inter-Arival [ms]
0
14.8
17.8
14.8
10.9
17.7
13.2
19.6
15.9
12.2
16.6
13.3
10.4
17.0
14.3
11.2
16.1
12.7
14.7
19.7
16.7
10.0
15.5
18.3
12.4
15.5
18.8
13.2
15.9
18.8
12.9
16.7
12.2
15.8
18.9
12.3
17.2
10.4
13.5
17.5
10.5
15.4
19.2
13.2
Figure 11.49  Inter‐arrival time of terminator VoIP calls from field test.
Throughput IP [kbits/sec]
40
35
30
25
20
15
10
5
0
Figure 11.50  VoIP throughput distribution.
www.ebook3000.com

LTE Optimization Engineering Handbook
498
Segmentation is also one of the methods for reducing the number of retransmissions. RLC 
SDUs are segmented at the RLC layer and the resulting segments transmitted in subsequent 
TTIs. When a RLC SDU is divided into many segments, each transport block has its own RLC/
MAC header. The transport blocks are transmitted in consecutive TTIs using different HARQ 
processes. The size of each RLC/MAC header is at least 24 bits but can be more. In addition, 
layer 1 adds 24 bits of CRC to each transport block. This means that segmentation increases 
the number of bits used for MAC and RLC headers as well as for CRC.
Sending packet segments in consecutive TTIs allows more energy per voice packet to be 
aggregated, increasing coverage. Packet segmentation can provide up to ~5 dB coverage gain 
(by sacrificing capacity).
Real gains will depend on used codec, link adaptation settings and number of segmentations. In 
a live network, the typical VoLTE RLC PDU distribution can be shown in Figure 11.53. Table 11.24 
gives the coverage gain of AMR12.2 VoIP codec of regular transmission and segmentation.
Since the maximum number of supported VoIP users per cell depends mostly on PDCCH 
resources, it significantly drops with the increase of segmentation order. Each segment (and 
HARQ retransmission) will require a new PDCCH allocation and a new PHICH in DL (for 
transmission of ACKs/NACKs per segment). The higher the achieved coverage gain, the 
greater is the capacity loss. Table 11.25 gives the PDCCH resources occupation with regular 
transmission and different segmentations.
11.6.3  TTI Bundling
TTI Bundling is intended particularly for addressing LTE uplink link budget issues and balance 
the uplink coverage with the downlink coverage footprint. The main reason for the imbalance 
of the UL/DL link budgets is that UE maximum transmit power is 200 mW, as opposed to tens 
of watts for the downlink. UE cannot use enough energy during one TTI in order to send suc-
cessfully a VoIP packet. The uplink, however, is believed to be coverage limited, and therefore, 
TTI bundling can be very beneficial when the UE is close to the cell edge specifically for VoLTE 
services. The eNB activates TTI bundling if the SINR for the UE drops below a configurable 
threshold when BLER increases and link adaptation has no more options for MCS/PRB reduc-
tion. When TTI bundling is activated,TTI bundling uses four automatic retransmissions in 
four consecutive uplink TTI with a common ACK/NACK for HARQ and that means the 
receiver waits over the total transmission period (four TTIs) before sending feedback. The four 
consecutive uplink TTIs are called TTI bundle, and these four transmissions are non‐adaptive 
with identical MCS/RB location but different redundancy versions. Different redundancy 
­versions are employed to achieve incremental redundancy soft combining gain. Only one 
uplink grant and one HARQ feedback channel is transmitted for a bundle. HARQ retransmission 
MAC
(1Byte)
MAC
(1Byte)
MAC
(1Byte)
Segment 1
(N1 Bytes)
Segment 2
(N1 Bytes)
Segment 3
(N1 Bytes)
CRC
(3Byte)
CRC
(3Byte)
CRC
(3Byte)
RLC
(1Byte)
RLC
(1Byte)
RLC
(1Byte)
Pad
(1Byte)
41 Bytes (328b)
MAC
(1Byte)
AMR12.65
(33 Byte)
CRC
(3Byte)
RLC
(1Byte)
ROHC
(4Byte)
PDCP
(1Byte)
RLC payload is
segmented
To fit 3GPP defined TBS of
328
Figure 11.51  RLC segmentation.

 Table 11.23  VoIP packet size with RLC segmentation and overhead analysis. 
Voice Codec
no segment
2 segments
4 segments
8 segments  
Segment 
Size
L1 SDU
Segment 
overhead
Segment 
Size
L1 SDU
Segment 
overhead
Segment 
Size
L1 SDU
Segment 
overhead
Segment 
Size
L1 SDU
Segment 
overhead  
[bits]
[bits]
[bits]
[bits]
[bits]
[bits]
[bits]
[bits] 
AMR‐NB 1.8
120
120
0%
80
160
33%
64
256
100%
56
448
233% 
AMR‐NB 4.75
176
176
0%
112
224
23%
80
320
68%
64
512
159% 
AMR‐NB 5.15
184
184
0%
112
224
22%
80
320
65%
64
512
152% 
AMR‐NB 5.9
200
200
0%
120
240
20%
80
320
60%
64
512
140% 
AMR‐NB 6.7
216
216
0%
128
256
19%
88
352
56%
64
512
130% 
AMR‐NB 7.4
232
232
0%
136
272
17%
88
352
52%
64
512
121% 
AMR‐NB 7.95
240
240
0%
144
288
17%
96
384
50%
72
576
117% 
AMR‐NB 10.2
288
288
0%
168
336
14%
104
416
42%
72
576
97% 
AMR‐NB 12.2
328
328
0%
184
368
12%
112
448
37%
80
640
85% 
AMR‐WB 1.75
120
120
0%
80
160
33%
64
256
100%
56
448
233% 
AMR‐WB 6.6
216
216
0%
128
256
19%
88
352
56%
64
512
130% 
AMR‐WB 8.85
264
264
0%
152
304
15%
96
384
45%
72
576
106% 
AMR‐WB 12.65
336
336
0%
192
384
12%
120
480
36%
80
640
83% 
AMR‐WB 14.25
368
368
0%
208
416
11%
128
512
33%
88
704
76% 
AMR‐WB 15.85
400
400
0%
224
448
10%
136
544
30%
88
704
70% 
AMR‐WB 18.25
448
448
0%
248
496
9%
144
576
27%
96
768
63% 
AMR‐WB 19.85
480
480
0%
264
528
8%
152
608
25%
96
768
58% 
AMR‐WB 23.85
560
560
0%
304
608
7%
176
704
21%
112
896
50%
www.ebook3000.com

LTE Optimization Engineering Handbook
500
of a TTI bundle is also transmitted as a bundle, occurs 16 TTIs after the previous transmission 
in order to be synchronized with normal (non‐bundled) HARQ retransmissions (8 TTIs). TTI 
bundling effectively utilizes more time resources by bundling a single VoIP packet into four 
consecutive TTIs. UL coverage is improved by allocating more energy per packet avoiding the 
excessive overhead from packet segmentation. Usually TTI bundling can provide gains up to 
2 to 4 dB in uplink coverage.
From Figure 11.54, we can see that TTI bundling needs reduced segmentation with less RLC 
and MAC overhead compared to normal operation, and also less control signaling, that is, 
HARQ feedback and PDCCH grants sent to UE.
Figure 11.55 shows the measurements of RSRP, PUSCH BLER, and POLQA MoS without 
and with TTI bundling. The HARQ retransmissions ratio increases quickly after certain point 
in pathloss has been experienced. Once target BLER of ~10% cannot be maintained, MoS 
decreases quickly. Without TTI bundling, the VoLTE coverage RSRP threhold is around −114 
dBm, with TTI Bundling is −117 dBm.
Figure 11.56 shows the measurements of UL_SINR without and with TTI bundling. UL_SINR 
is more than 3 dB better when UE is TTI‐B on than off.
The activation and de‐activation of TTI Bundling in the eNB is dynamic and is based on the 
channel quality. To prevent continuous (ping‐pong) activation and de‐activation of TTI bun-
dling, hysteresis are available to avoid this behavior and unnecessary processor load increase in 
the eNB. TTI bundling is configured (is activated/deactivated) per UE via RRC control messaging 
as shown below.
2
4
8
328
184
112
80
161.13
162.51
164.22
165.16
1
(no
segmentation)
Number of
Segments
Segment
Size
[bits]
Maximum
Allowable
Path Loss*
[dB]
No fragmentation,
ROHC, same as TTI-B
case (OH 23%)
2 fragments
(OH 32%)
3 fragments
(OH 37%)
4 fragments
(OH 43%)
8 fragments
(OH 58%)
MAC
(1B)
MAC
(1B)
MAC
(1B)
MAC
(1B)
MAC
(1B)
RLC
(1B)
CRC
(3B)
CRC
(3B)
CRC
(3B)
CRC
(3B)
CRC
(3B)
RLC
(1B)
RLC
(1B)
RLC
(1B)
RLC
(1B)
AMR12.65
(34B)
(20 B)
(13 B)
(10 B)
(5 B)
7Bytes (56b)
12Bytes (96b)
ROHC
(4B)
PDCP
(1B)
When a RLC 
SDU is divided 
into many 
segments, each 
transport block 
has its own 
RLC/MAC 
header.
15Bytes (120b)
41Bytes (328b)
22Bytes (176b)
Figure 11.52  Example: AMR‐NB 12.2 (uplink).
40
35
30
25
20
15
10
5
0
PDCP PDU is 
segmented into small 
RLC PDUs due to poor 
RSRP, size from 6 byte 
to 40 byte
Figure 11.53  RLC PDU distribution.

VoLTE Optimization
501
value DL-DCCH-Message ::= 
{  message c1 : rrcConnectionReconfiguration : 
      { rrc-TransactionIdentifier 3,
        criticalExtensions c1 : rrcConnectionReconfiguration-r8 : 
            { mac-MainConfig explicitValue : 
                  {ul-SCH-Config 
                    { maxHARQ-Tx n16,
                      periodicBSR-Timer sf5,
                      retxBSR-Timer sf320,
                      ttiBundling TRUE
                    },
Table 11.24  Coverage gain of AMR12.2 VoIP codec of regular transmission and segmentation.
regular(1tx)
regular(4tx)
2 segments
3 segments
From PDCP
bits
304
304
304
304
No of segments
#
1
1
2
3
L2 overhead (RLC + MAC)
bits
16
16
16
16
Segment size
bits
320
320
168
120
No of HARQ transmissions
#
1
4
4
4
Modulation and coding scheme
MCS3
MCS3
MCS2
MCS0
No of PRBs
#
6
6
4
5
Actual transport block size
bits
328
328
176
120
Energy gain (frequency domain)
dB
0
0
1.76
0.79
% of VoIP per TTI
93%
93%
86%
84%
TX power per VoIP per TTI
dBm
22.67
22.67
22.36
22.27
Total energy per packet
dBm
22.67
22.67
25.37
27.04
Total energy per packet (HARQ)
dBm
22.67
28.69
31.39
33.06
Energy gain (time domain)
dB
0
6.02
8.72
10.39
Required SINR (10%/1Tr)
dB
−1.3
−1.3
−1.1
−3.6
Total delta compared to 10% BLER  
dimensioning
dB
0
6.0
10.3
13.5
Table 11.25  PDCCH resources occupation with regular transmission and segmentation.
regular(1tx)
regular(4tx)
2 segments
3 segments
PRB used per VoIP packet (cell edge)
6
24
32
60
PDCCH used per VoIP packet (cell edge)
1
4
8
12
PDCCH capacity used per VoIP packet (cell edge)
1.2%
4.8%
9.7%
14.5%
PDCCH capacity used per VoIP packet (non cell edge)
0.36%
0.36%
0.36%
0.36%
No. of supported VoIP users (5% users in cell edge)
247
171
121
93
No. of supported VoIP users (10% users in cell edge)
224
123
77
56
No. of supported VoIP users (40% users in cell edge)
142
46
24
17
www.ebook3000.com

LTE Optimization Engineering Handbook
502
When TTI bundling mode20 is activated, PUSCH single transport block is transmitted over 
four consecutive TTIs but with different redundancy version, only one UL grant is given for the 
transmission of the whole bundle, retransmission of a TTI bundle, which is also transmitted as 
a TTI bundle, occurs 16 TTIs after previous (re)transmission. The procedure of FDD and TDD 
UL transmission with TTI bundling are shown in the Figure 11.57 and Figure 11.58.
TTI bundling gain is introduced by the energy collected from additional transport blocks 
received during the assumed service delay budget. Higher air link latency budget of VoIP 
­services (typically 50 ms) allows for up to seven packet retransmissions (initial transmission + six 
retransmissions). From Figure  11.59, we can see that TTI bundling gain can be calculated 
according to:
	
TTI bundling gain
dB
10
12 7
2 34
* log
/
.
	
In conclusion, in those poor radio conditions, UL resources over multiple consecutive TTIs 
can be assigned with a single grant, which decreases the signaling overhead. While TTI bun-
dling is a very useful feature to increase coverage, it comes at the impact of capacity. VoIP 
capacity will be reduced when large number of VoIP users have TTI bundling enabled, since 
four consecutive subframes are used by these users.
In a live network, we should limit the use of TTI bundling only when it have reached the 
limits of MCS/PRB override. TTI bundling activation requires a higher layer RRC reconfigura-
tion to enable, and only a single specific format (MCS = 6, 1 PRB) can be used to take advantage 
of the 4 ms subframe bundling, thus will limit scheduler’s link adaptation flexibility. It should 
be known that for FDD LTE, HARQ round trip doubled from 8 ms to 16 ms, with TTI bundling, 
VoLTE data rate is (328 + 24 bits)/(4 HARQ Tx * 4 ms TTI) = 22 kbps.
11.6.4  TTI Bundling Optimization
Since TTI bundling will take four subframes of uplink, which impact the capacity greatly, for 
TTI bundling optimization, it’s reasonable and necessary to restrict the TTI bundling user 
number, based on the configured SINR and TTI bundling number.
TTI bundling increases the probability of successful transport block decoding by eNB. The 
UE eligibility for TTI bundling is evaluated at context creation (i.e., call setup, handover, call 
re‐establishment) and updated during normal call operation (bearer creation or deletion or 
maybe bearer modification). In a situation when BLER increases and link adaptation has no 
RLC
PDU
RLC PDU
TB
Overhead
RLC SDU
RLC
PDU
RLC
PDU
RLC
PDU
TB
Over
head
RLC SDU
TB
TB
TB
time
time
One RLC SDU transmitted 
in one RLC PDU
-One PDCCH allocation
-One HARQ feedback
Segmentation –i.e. one RLC
SDU using 4 RLC PDUs
-Four PDCCH allocations
-Four HARQ feedbacks
Figure 11.54  Segmentation and TTI bundling.
20  Feature group indicator processing required to determine if UE supports TTI bundling.

–100
–124
–120
–116
–112
–108
–104
–100
–124
–120
–116
–112
–108
–104
RSRP[dBm]
RSRP[dBm]
RSRP[dBm]
POLQA MOS
POLQA MOS
POLQA MOS
Poly. (RSRP[dBm])
RSRP[dBm]
Poly. (RSRP[dBm])
TTI Bundling OFF
TTI Bundling ON (retrans 24times)
RSRP : –114.5dBm
+2.5dB gain
RSRP : –117dBm
POLQA : 2.5
POLQA : 2.5
5
4
3
2
1
0
5
4
3
2
1
0
100
80
60
40
20
0
100
80
60
40
20
0
PUSCH BLER[%]
Poly. (PUSCH BLER[%])
Poly. (POLQA MOS)
POLQA MOS
Poly. (POLQA MOS)
PUSCH BLER[%]
PUSCH BLER[%]
41:16.8
42:43.2
47:02.4
51:21.6
47:31.2
51:50.4
59:02.4
57:36.0
56:09.6
54:43.2
53:16.8
50:24.0
48:57.6
49:55.2
48:28.8
45:36.0
44:09.6
TTIB ON
VoLTE coverage (above POLQA2.5) increased by 2.5dB if harqMaxTrUITti Bundling is 24.
PUSCH BLER[%]
Poly. (PUSCH BLER[%])
Figure 11.55  With TTI Bundling the RSRP level goes down to −117 dm, 2.5 dB gain achieved.
www.ebook3000.com

LTE Optimization Engineering Handbook
504
more options for MCS/PRB reduction while radio conditions for handover are not fulfilled, 
TTI bundling can be triggered to keep the voice call quality (in terms of delay and packet loss 
rate) before UE will either change the cell or RF conditions becomes better (Figure 11.60).
The eNB periodically monitors every 100 ms the eligible UEs for TTI bundling activation/deac-
tivation. Once the criteria for entering TTI bundling mode are fulfilled, eNB triggers ­intra‐cell hando-
ver procedure by sending RRC connection reconfiguration message toward the UE (Figure 11.61).
0
10
20
30
40
50
60
70
80
–124
–122
–120
–118
–116
–114
–112
–110
–108
–106
–104
–102
–100
–98
–96
PUSCH BLER [%], POLQA  MOS * 10
RSRP [dBm]
RSRP
PUSCH BLER
POLQA MOS
–3 –2 –1 0
1
2
3
4
5
6
7
8
9
10 11 12 13 14 15 UL_SINR
UL HARQ NACK Rate
Tti-Feature-ON
TTI-Feature-OFF
Poly. (Tti-Feature-ON)
Poly. (TTI-Feature-OFF)
Figure 11.56  UL_SINR is more than 3 dB better when UE is TTI‐B on.
TTI#
UL grant on
PDCCH
Tx on PUSCH
Decoding
ACK/NACK
on PHICH
RV0 RV2 RV3 RV1
RV0 RV2 RV3 RV1
1st bundle transmission
Retransmission of bundle
HARQ RTT: 16 TTIs
4 redundancy versions of the same packet
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
N
N
Figure 11.57  FDD UL transmission with TTI bundling.

VoLTE Optimization
505
TDD Configuration 1
UL grant
R
V
1
R
V
3
R
V
1
R
V
3
R
V
2
R
V
2
R
V
0
R
V
0
R
V
1
R
V
3
R
V
2
R
V
0
NACK
NACK
D
D D
D D
D
D
S U U
S U U
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
D
S U U
D
S U U
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8
9
6
6
6
8
8
7 ms
Figure 11.58  TDD UL/DL configuration 1 with TTI bundling.
1
2
3
4
5
6
7
8
9
10
11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
1
2
3
4
5
6
7
8
9
10
11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
N
N
N
N
N
N
N
N
N
328
328
328
328
328
328
328
328
RV0
328
RV1
328
RV2
328
RV3
328
RV0
328
RV1
328
RV2
328
RV3
328
RV0
328
RV1
328
RV2
328
RV3
TTI Bundling
16ms RTT
(12 TBSs)
Classical
transmission
8ms RTT
(7 TBSs)
PHICH
Decoding
PUSCH
TTI
PHICH
Decoding
PUSCH
TTI
Figure 11.59  TTI bundling gain.
Decision to
switch UE to
TTI Bundling
Time
Channel
Quality
TTI Bundling area
HO
conditions
fulfilled
TTI-B
activation
LTE frequency2
layer
LTE frequency1
layer
Figure 11.60  TTI bundling triggered.
eNB decides to configure UE with TTI bundling
mode based on UL channel quality
RRC: RRC Connection Reconfiguration
(includes MobilityControllnfo)
DCCH/UL-SCH/PUSCH (SRB1)
PHY: CBRA Random Access Preamble
√RACH/PRACH
MAC: CBRA Random Access Response
√DL-SCH/PDSCH
MAC: Random Access Msg3
DCCH/UL-SCH/PUSCH (SRB1)
RRC: RRC Connection Reconfiguration
Complete (sent in TTI Bundling mode)
DCCH/UL-SCH/PUSCH (SRB1)
UL Grant PDCCH
UE
eNB
Figure 11.61  Dynamic switching to/from TTI bundling.
www.ebook3000.com

LTE Optimization Engineering Handbook
506
TTI bundling activation ccriterias include load criteria and poor RF performance conditions. 
For load criteria, current total GBR PRB utilization in the cell should be less than TTI bundling 
activation load threshold, and number of users in the cell already in TTI bundling configura-
tion should be less than the maximum number of TTI bundling users. The consideration to 
disable the feature might be in heavily loaded eNBs due to high VoIP traffic load at cell edges. 
If the majority of this VoIP traffic experiences poor channel conditions it may trigger an excessive 
number of UEs using TTI bundling. This might have impact on the end‐user experience and 
performance. For poor RF performance criteria, the estimated achievable UL_SINR with 1PRB 
grant should be less than uplink link budget threshold for a period time, and the ­measured 
BLER at TTI bundling measurement points (HARQ Tx point) should bigger than TTI bundling 
activation BLER threshold within the IIR filter window.
With TTI bundling ON, the PRB allocation size for the UE is restricted to NPRB < = 3 and the 
modulation order is limited to QPSK of the VoLTE service.
TTI bundling can improve uplink quality in weak signal (‐120 dBm). BLER is reduced from 
40%‐50% to below 1%, which improves MoS from below two (bad quality) to more than three 
(good quality). The field test result is shown in Table 11.26.
TTI bundling is a UE capability that can be used to improve uplink coverage for VoLTE ser-
vices at lower delay and to reduce the amount of PDCCH control channel usage in cases where 
normal transmission would have required RLC segmentation. TTI bundling is only beneficial 
for users close at the cell border that suffer from power shortage. On the other hand, increased 
latency and jitter after TTI bundling is activated, and sometimes with increased packet drops 
(PDCP timer discards). The example with 18 UE loading is shown in Figure  11.62 from a 
field test.
Table 11.26  TTI bundling gain.
TTIB
UE#
MoS
UL 
PRB
MCS
Tx Power  
PUSCH
PUSCH  
BLER[%]
Phy Thrp  
[kbps]
PDCP Thrp  
[kbps]
DL RSRP  
[dBm]
OFF
1
2.4
5.0
0.1
24.0
54.4
47
13
−118.7
2
1.8
4.9
0.1
23.9
39.6
38
15
−120.6
ON
1
3.2
3.0
10.1
23.5
0.6
125
14
−122.1
2
3.0
3.0
12.0
23.3
0.1
128
15
−115.6
250
200
150
100
Latency [ms]
50
0
TTI-B activation
Figure 11.62  E2E packet latency versus TTI bundling.

VoLTE Optimization
507
In field test, actual cause of call drop can be attributed to the UL/DL control channels failing 
due to poor SINR. It is worth to know that only increasing the TTI bundling threshold (to pre-
serve the UL failure) would not help when the DL control channels fail at the poor SINR 
(around −5 dB) (Figure 11.63).
11.6.5  Coverage Gain with RLC Segmentation and TTI Bundling
Packet segmentation algorithm is used as an extension to link adaptation for uplink coverage 
improvement, it is done automatically and only for UEs with poor radio channel. Uplink packet 
are segmented by providing according grants in order have smaller packets with more robust 
coding but at the cost of additional signaling load and additional header load. As the number of 
transmitted packets increases, more resources on PDCCH are utilized which also happens on 
PHICH in DL due to the transmission of ACKs/NACKs for HARQ purposes. The alternative 
solution is TTI bundling at low/medium loaded networks. The energy per transmitted bit in 
uplink is increased by allocating one transport block to four instead of one TTI that reduce 
signaling as only one UL grant and one ACK/NACK is used per TTI bundle. Table 11.27 shows 
the comparation of TTI‐bundling with packet fragmentation.
With TTI bundling there can be a lot of unnecessarily retransmissions as compared to the 
early termination gain of segmentation, which obviously saves power resources of an UE. 
However, using both bundling and light segmentation gives best coverage (1 dB improvement), 
but this comes with a cost of PUSCH resource usage.
The UL power control function manages to keep the UE received power to a constant value. 
The UE received power is dropping and the power is not sufficient for sending the VoIP packet, 
Codec
SINR [dB]
AMR wide-band 23.85 kbps
EPAS
–3.1
–4
–4
–3.7
–4.5
–7.8
–7.8
–7.9
–5.6
–8.5
–8.5
–8.9
EVA70
ETU300
AMR wide-band 12.65 kbps
AMR 12.2 kbps
AMR 5.9 kbps
Figure 11.63  Downlink RS SINR and uplink SINR values for VoIP failure.
Table 11.27  TTI‐bundling comparing with packet fragmentation.
TTI‐bundling pro
●
●No extra RLC/MAC overhead associated with packet fragmentation
●
●Avoids multiple UL grants to transmit framgents of a packet
●
●Any fragment loss causes the entire packet discard w/RLC‐UM.
TTI‐bundling con
●
●Dependency on UE support, which is optional in standard.
●
●Prolonged HARQ timeline which may limit the HARQ retx operation.
●
●Requires RRC‐level activation/deactivation. Not as flexible as packet based 
fragmentation.
●
●Limited RF transmission choices: at most 3PRB can be used for TTI bundling 
packet transmission, and only QPSK is allowed.
www.ebook3000.com

LTE Optimization Engineering Handbook
508
therefore segmentation into two smaller packets will occur. Segmentation occurs in power 
limited parts of the cell where distance d > d1(segmentation transition point for d = d1). From 
uplink link budget it should be possible to identify SINR threshold for transition to 
segmentation.
When UE moves close to cell border, as the SINR value falls below a pre‐defined threshold 
where distance d > d2 (TTI bundling transition point for d = d2), TTI bundling will occur 
(Figure 11.64).
In a live network, the fraction of VoIP users in different regions depend on the cell size and 
frequency, larger cells will have more users in segmentation and TTI bundling, higher ­frequency 
also leads to more users in segmentation and TTI bundling. Figure 11.64 gives a field test result 
of TTI bundling comparing with packet fragmentation (Figure 11.65).
Although coverage gain can be expected with RLC segmentation and TTI bundling, the voice 
frame delay for UEs at the coverage limit for min MCS/PRB–based RLC segmentation and TTI 
bundling are increased. From test in a live network, the average increasement of ninety‐eighth 
RTP delay %‐tile is 30 ms and 50 ms for RLC segmentation and TTI bundling respectively. The 
results here are based on single user. In a loaded scenario, grant limitations may increase 
the delay for RLC segmentation.
dmax
–100
20%
d1/dmax
d2/dmax
40%
60%
80%
–105
–110
–115
Prx rb [dBm/RB]
d/dmax [%]
–120
–125
d2
d1
Region with no segmentation and
TTI bundling
Region with segmentation only
Region with TTI bundling
dmax=cell range
d1=point for transition to segmentation
d2=point for transition to TTI bundling
0%
100%
Figure 11.64  Cell regions for segmentation and TTI bundling transition point.
with TTI bundling
without TTI bundling
250
200
150
100
50
0
0.00
PDCCH cost of cell edge users
2.00
4.00
6.00
Coverage Gain (dB)
8.00
10.00
12.00
4 segments
no TTI bundling
4 segments
TTI bundling
2 segments
TTI bundling
2 segments
no TTI bundling
no segmentation
TTI bundling
no segmentation
no TTI bundling
Figure 11.65  TTI‐bundling comparing with packet fragmentation in a live network.

VoLTE Optimization
509
11.6.6  MCS/TBS/PRB Selection
The basic dynamic scheduler has the problem that it may excessively segment voice packets 
­trying to maintain 10% iBLER as the path loss increases, leading to a build‐up of voice frame 
­segments in the queue leading to excess delay and this becomes the factor that limits the link 
budget. Some amount segmentation is good for increasing subframe utilization, but too much 
segmentation can lead to excessive queuing delay since since each segments of a VoIP packet 
needs separate grant and uses a separate HARQ process, and the PDCCH consumption is higher.
The semi‐persistent scheduler does not do any voice frame segmentation, instead the packet 
size is held constant and hence the iBLER will rise as the path loss increases, eventually leading 
to post‐HARQ errors, and this becomes the factor which limits the link budget.
Based on RLC segmentation and TTI bundling, the usual TBS sizes for VoIP are suggested in 
Table 11.28 under dynamic and SPS scheduler. The PRB allocation size is derived from the 
smallest size that fits the initial TBS, rounded up to the RBG boundary. The TBS is obtained by 
adding the PDCP/RLC/MAC overhead.
	
TBS
VoIP codec VoIP frame size
bytes RoHC header
MAC RLC ov
4
 
 
 
,
erhead	
Table 11.28  TBS index table for VoIP.
ITBS
NPRB
1
2
3
4
5
6
7
8
9
10
0
16
32
56
88
120
152
176
208
224
256
1
24
56
88
144
176
208
224
256
328
344
2
32
72
144
176
208
256
296
328
376
424
3
40
104
176
208
256
328
392
440
504
568
4
56
120
208
256
328
408
488
552
632
696
5
72
144
224
328
424
504
600
680
776
872
6
328
176
256
392
504
600
712
808
936
1032
7
104
224
328
472
584
712
840
968
1096
1224
8
120
256
392
536
680
808
968
1096
1256
1384
9
136
296
456
616
776
936
1096
1256
1416
1544
10
144
328
504
680
872
1032
1224
1384
1544
1736
11
176
376
584
776
1000
1192
1384
1608
1800
2024
12
208
440
680
904
1128
1352
1608
1800
2024
2280
13
224
488
744
1000
1256
1544
1800
2024
2280
2536
14
256
552
840
1128
1416
1736
1992
2280
2600
2856
15
280
600
904
1224
1544
1800
2152
2472
2728
3112
16
328
632
968
1288
1608
1928
2280
2600
2984
3240
17
336
696
1064
1416
1800
2152
2536
2856
3240
3624
18
376
776
1160
1544
1992
2344
2792
3112
3624
4008
19
408
840
1288
1736
2152
2600
2984
3496
3880
4264
20
440
904
1384
1864
2344
2792
3240
3752
4136
4584
www.ebook3000.com

LTE Optimization Engineering Handbook
510
The MCS is derived by comparing The UE reported SINR to the thresholds configured by 
MCS transition table. It is worth to note that the derived MCS is limited to the first 15 MCSs 
that are supported for SPS.
Next step, it needs mapping to MCS/#PRBs with regards to the required TBS, each combination 
of MCS/#PRBs is correlated with SINR value required for proper signal reception and decoding 
by a receiver. Allocating more PRBs brings required SINR improvement due to the fact that lower 
MCS can be used, but UE power will be constrainted in most cases limit UL #PRBs. For optimiza-
tion, MCS/#PRBs is one of the items which need to consider. Table 11.29 gives the required TBS, 
combination of MCS/#PRBs and SINR requirement in VoIP packet transmission.
For VoLTE coverage, how to configure the upper bound the number of RLC segmentation 
that a voice packet can be broken into by limiting the smallest MCS and number of PRBs that 
can be selected by the scheduler, is one of the important work.
After enforcing the minimum number of PRBs, MCS override approach would look like this:
	
2
3
4
PRB grant
min MCS
A
PRB grant
min MCS
B
PRB grant
min MCS
C
,
,
	
Different values of (A, B, C) have been investigated via simulations to find the optimum 
­combination in terms of maximum achievable uplink path loss for an AMR 12.65 kbps codec, 
which is shown in Figure 11.66.
In Figure 11.66, the simulation result show optimized segmentation (three segments with 2 
PRB grant → min MCS = 4, 3 PRB grant → min MCS = 2, 4 PRB grant → min MCS = 1) will yields 
2.5 to 3 dB gain in terms of maximum acceptable uplink path loss for an AMR 12.65 kbps codec. 
When TTI bundling is also activated in the eNB, optimized segmentation may deferred the 
time when TTI bundling is needed to be configured.
11.6.7  Link Budget
AMR‐WB operates like AMR with nine different bit rates. The lowest bit rate providing excellent 
speech quality in a clean environment is 12.65 kbit/s. Higher bit rates are useful in background 
noise conditions and for music. Also lower bit rates of 6.60 and 8.85 kbit/s can provide reason-
able quality especially if compared to narrow band codecs. The different voice transport 
­formats (modulation, coding scheme, number of resource blocks, and transport block size) 
have different SINR requirements. When TTI bundling is active/disable, the related SINR 
requirement can be shown in Table 11.30.
HARQ retransmissions will further lead to lower SINR requirements resulting in higher 
­coverage (in cost of lowered capacity), as shown in Table 11.31.
Based above assumption, calculating a link budget for VoIP is very similar to the method 
used for a data service. The UL link budget, maximum acceptable uplink path loss(Lpmax) is 
given by the following equation:
	
L
P
S
B
B
L
L
G
L
pmax
UE RB
eNB
IUL
LNF
BL
BPL
a
J
,
	
where
PUE,RB is the UE output power per RB [dBm],
SeNB is the eNB sensitivity [dBm],
BIUL is the interference margin (“noise rise”) [dB],
BLNF is the log‐normal fading margin [dB],
LBL is the body loss [dB],
LBPL is the building penetration loss [dB],
Ga is the antenna gain [dB],
LJ is the jumper loss [dB]

 Table 11.29  SINR requirement in VoIP packet transmission. 
MCS 
Index
Mod. 
Order
N PRB 
1
2
3
6
9
12
15
… 
TBS
TBS
req.
TBS
req.
TBS
req.
TBS
req.
TBS
req.
TBS
req.
TBS
req.
… 
Index
SINR
SINR
SINR
SINR
SINR
SINR
SINR 
0
2
0
16
–0,5
32
–2,2
56
–2,7
152
–2,7
224
–3,2
328
–3,1
392
–3,3
… 
1
2
1
24
0,1
56
–1,2
88
–1,7
208
–1,9
328
–2,1
424
–2,3
520
–2,5
… 
2
2
2
32
0,6
72
–0,6
144
–0,4
256
–1,4
376
–1,7
520
–1,8
648
–1,8
… 
3
2
3
40
1,0
104
0,4
176
0,2
328
–0,3
504
–0,6
680
–0,7
872
–0,6
… 
4
2
4
56
1,7
120
0,8
208
0,8
408
0,3
632
0,2
840
0,1
1064
0,1
… 
5
2
5
72
2,3
144
1,3
224
0,9
504
1,0
776
0,8
1032
0,7
1320
0,7
… 
6
2
6
328
#N/A
176
2,0
256
1,4
600
1,6
936
1,6
1224
1,4
1544
1,4
… 
7
2
7
104
3,7
224
3,1
328
2,5
712
2,5
1096
2,5
1480
2,5
1800
2,3
… 
8
2
8
120
4,4
256
3,8
392
3,5
808
3,3
1256
3,3
1672
3,2
2088
3,2
… 
9
2
9
136
5,0
296
4,6
456
4,4
936
4,3
1416
4,2
1864
4,0
2344
4,0
… 
10
2
10
144
5,4
328
5,4
504
5,1
1032
4,8
1544
4,7
2088
4,7
2664
4,8
… 
11
4
10
144
6,2
328
5,9
504
5,7
1032
5,6
1544
5,4
2088
5,4
2664
5,5
… 
12
4
11
176
7,0
376
6,5
584
6,3
1192
6,3
1800
6,1
2408
6,1
2984
5,8
… 
13
4
12
208
8,0
440
7,5
680
7,4
1352
7,1
2024
6,9
2728
6,9
3368
6,7
… 
14
4
13
224
8,5
488
8,3
744
8,0
1544
8,1
2280
7,7
3112
7,8
3880
7,7
… 
15
4
14
256
9,4
552
9,2
840
8,9
1736
8,9
2600
8,7
3496
8,7
4264
8,5
… 
16
4
15
280
10,1
600
9,9
904
9,5
1800
9,3
2728
9,2
3624
9,1
4584
9,2
… 
17
4
16
328
11,4
632
10,4
968
10,1
1928
9,7
2984
10,0
3880
9,6
4968
9,8
… 
18
4
17
336
11,6
696
11,3
1064
11,1
2152
10,9
3240
10,8
4392
10,9
5352
10,6
… 
…
…
…
…
…
…
…
…
…
…
…
…
…
…
…
…
…
…
www.ebook3000.com

LTE Optimization Engineering Handbook
512
For VoLTE coverage, downlink is not the limitation, especially for voice service. Voice with 
enhancements such as TTI bundling or RLC segmentation could outperform 2G voice, but TTI 
bundling and RLC segmentation are done at the cost of the number simultaneous users. Voice cov-
erage can be also improved by reducing AMR codec rate. Table 11.32 gives the VoLTE link budget 
under TDD 20 MHz system bandwidth, DL:UL(2:2), ETU3 channel model, and 50% cell loading.
In addition, it is known that IMS signaling coverage is not limited for VoLTE. The SIP message 
size has about 1000byte, according to its QoS requirements, the SIP message should be trans-
mitted to IMS core in 80 ms. Assuming the edge of the average data rate is 100 kbps, the SIP 
coverage radius can be estimated by above link budget method, and the conclusion is IMS 
signaling coverage is not limited by using dynamic scheduling.
For uplink control channel link budget estimation, the following comparision of VoLTE 
PUSCH and CCH is described. PUSCH, wideband SRS, RACH message 1 (including Format 0, 
2, 3), and message 3 (including 56 bits and 104 bits length) are compared under dense urban, 
urban, suburban and rural environment. Assuming the maximum of HARQ of message 3 is 3 
and 5 accordingly, we can see in Table 11.33:
Wideband SRS is not uplink coverage limitation in VoLTE coverage. Comparing to the VoLTE 
coverage with TTI bundling, message 3 (104 bits) with Max. HARQ = 3 is uplink coverage 
130.5
130
129.5
129
128.5
128
127.5
127
(10,7,5)
1 segment
(6,3,2)
(4,2,1)
(3,2,1)
< 2 segments
< 4 segments
< 3 segments
Figure 11.66  Different values of MCS override with the minimum number of PRBs allocation.
Table 11.30  SINR requirements for voice codec (TTI bundling is active/disable).
TBS
MCS TBS Modulation Veh‐A, 3 km/hr
Veh‐A, 50 km/hr
Veh‐A, 120 km/hr
Ped‐A, 3 km/h
AMR 12.2, 328
6
6
QPSK
–5.6/1.4
–4.8/2.7
–3.1/3.2
–5.6/0.4
AMR 4.5, 144
10
10
QPSK
–8.0/–2.9
–7.4/–1.9
–5.8/–1.3
–7.9/–3.7
AMR 5.9, 224
14
13
16QAM
–1.5/1.7
–1.1/2.9
0.73/3.4
–1.5/0.6
AMR 7.95, 256 15
14
16QAM
–0.9/3.0
–0.06/3.8
1.5/4.4
–0.9/1.2
AMR 12.2, 328 17
16
16QAM
–0.5/0.9
0.3/1.5
1.9/2.0
–0.5/–1.1
Table 11.31  HARQ gain.
Number of transmissions  
(2% BLER target)
Required UL SINR  
(MCS7/3 PRBs) [dB]
HARQ gain [dB]
1 (initial tx., 10% BLER)
2.54
–
2
0.19
2.35
3
–2.05
4.59
4
–3.62
6.16

VoLTE Optimization
513
­limitation (assuming Max. HARQ = 3 = 5, message 3 is not the coverage bottleneck with ­current 
configuration). TTI bundling can provide about 4 dB improvement in VoLTE link budget 
­compared to no TTI bundling.
11.7  ­VoLTE Delay
Delay is crucial for VoIP, therefore delay target must be controlled by the scheduler. It is done 
by a special delay term DT(t) added to criterion calculation in time domain scheduling (this 
step in the list of UEs that will be scheduled is now created). VoIP UEs are scheduled before 
non‐GBR UEs and within the pool of UEs with GBR bearers, and the selection of users for 
scheduling in given TTI is based on the following formula:
	
C t
PF t
DT t
*
	
Table 11.32  VoLTE link budget (TDD 20 MHz).
Uplink
AMR12.2 k
AMR23.85 k
PUSCH
Antenna configuration
1Tx*8Rx
1Tx*8Rx
1Tx*8Rx
1Tx*8Rx
Modulation
QPSK
QPSK
QPSK
QPSK
Code rate
0.16
0.2
0.31
0.31
User data rate(kbps)
104
164
256
512
# of Occupied RBs
3
3
8
16
UE EIRP
MS power (dBm)
23
23
23
23
MS EIRP (dBm)
18.2
18.2
14.0
11.0
eNB sensitivity
BS antenna gain (dBi)
16.5
16.5
16.5
16.5
BS diversity gain (dB)
0
0
0
0
Transmission line loss (dB)
0.50
0.50
0.50
0.50
Thermal noise (kT) (dBm/Hz)
–174.0
–174.0
–174.0
–174.0
Subcarrier separation (KHz)
15
15
15
15
BS noise power (dB)
–117.9
–117.9
–117.9
–117.9
BS noise figure (dB)
3.5
3.5
3.5
3.5
SNR for MCS Level ‐ 1%BLER (dB)
–5.3
–4.3
SNR for MCS Level ‐ 10%BLER(dB)
–7.8
–7.8
BS sensitivity ‐ composite
–123.2
–122.2
–125.7
–125.7
Shadow fading margin (dB)
8.3
8.3
8.3
8.3
Interference margin (dB)
4.0
4.0
4.0
4.0
Penetration loss (dB)
20
20
20
20
MS body loss (dB)
3
3
0
0
Terminal loss (dB)
6
6
6
6
Total system margin (dB)
41.3
41.3
38.3
38.3
Outdoor maximum allowable path loss
136.6
135.6
137.9
134.9
www.ebook3000.com

LTE Optimization Engineering Handbook
514
where PF(t) is proportional fair term, DT(t) is delay term, the delay term is based on VoIP 
packet delay, that is, the longer the packet stays in the buffer the higher DT(t) value is.
It is worth a reminder that in Chapter 11.2.2, the packet delay budget (PDB) requires no more 
than 80 ms for voice, and no more than 130 ms for video. PDB is measured from entering PDCP 
in eNB to leaving PDCP in the UE and vice versa. PDB will be increased as more UEs are in a 
cell due to PF(t) and DT(t) (see Figure 11.67), the 98%‐ile per‐UE VoIP packet delay; however, 
Table 11.33  Comparision of VoLTE PUSCH and UL control channel.
Coverage comparison
DU
U
SU
RU
RACH
Msg1
Format0
1.4 km
2.3 km
4.5 km
16.8 km
Format2
1.7 km
2.7 km
5.2 km
19.9 km
Format3
1.7 km
2.7 km
5.3 km
20.0 km
Msg3  
(HARQ = 3)
56 bits
1.1 km
1.7 km
3.6 km
13.6 km
104 bits
1.0 km
1.5 km
3.2 km
12.2 km 
Limitation
Msg3  
(HARQ = 5)
56 bits
1.3 km
2.0 km
4.3 km
16.4 km
104 bits
1.1 km
1.8 km
3.9 km
14.7 km
WB‐SRS
WB‐SRS
48 RBs
1.7 km
2.8 km
6.4 km
24.3 km
VoLTE  
WB‐AMR 12.65
PUSCH
SPS and  
No TTI‐B
0.7 km
1.1 km
2.5 km
7.7 km
Dynamic  
scheduling
0.9 km
1.4 km
3.0 km
10.2 km
max 4  
segments
1.0 km
1.6 km
3.6 km
13.4 km
TTI‐B
1.2 km
1.9 km
4.2 km
14.3 km
95%
50%
0%
40
50
0.9
50 ms
50 ms target
80 ms target
At 170 calls, > 95% of the calls have delay less than 50 ms,
but at 180 calls, the delay is larger than 50 ms for ~40% of the calls
80 ms
60
70
80
98 percentile delay (sec)
170 VoIP call's, delay target 50 ms
180 VoIP call's, delay target 50 ms
200 VoIP call's, delay target 80 ms
210 VoIP call's, delay target 80 ms
0.85
0.8
0.75
0.7
0.65
0.6
0.55
0.45
0.4
0.35
0.3
0.25
0.2
0.15
0.1
0.05
At 200 calls > 97% of calls have delay less than 80 ms
& at 210 calls, the delay is larger than 80 ms for ~5% of the calls
Figure 11.67  PDB versus No. of UEs.

VoLTE Optimization
515
capacity with a 50‐ms delay target is ~170 VoIP calls/sector and capacity with 80 ms delay 
­target is ~210 VoIP calls/sector, thus we can see that from ~30 ms longer VoIP delay, 
1.23 × (210/170) capacity improvement will be achieved.
An example shown in Figure 11.68, it is possible to aggregate VoIP packets into larger transport 
block and send them all at once, for example, only one UL grant is needed to send three aggre-
gated VoIP packets, and thus will cause long packet delay.
For a typical VoLTE to VoLTE call flow, the key focused MO (mobile originated) metrics 
includes ring back delay, call setup time, and conversation delay, and so on, and the key MT 
(mobile terminated) metrics includes paging delay and media delay, and so on, as shown in 
Figure 11.69.
Scheduling 
Request
SR
20ms
VoIP frame
20ms
UL Grant
UL Transm.
UL Grant
UL Transm.
SR
UL Grant
UL Transm.
1. With packet aggregation these packets are delayed. They will be 
send when proper aggregation level is achieved
2. Without aggregation packet should be send 
here but scheduler doesn’t provide UL grant
3. 3 packets are aggregated. Once the SR is send
after 3rd packet arrival, UL grant is provided.
4. TB in this UL transmission 
contains 3 VoIP packets. 
VoIP frame
VoIP frame
Figure 11.68  Packet aggregation causes longer delay.
MO UE
EUTRAN/IMS
MT UE
Ring back
delay
Call setup
time
Conversation
delay
Disconnect
delay
Media
delay
Paging
delay
SIP: INVITE (SDP Offer): UE_TO_NETWORK
RACH + RRC Connection procedure + Default: Bearer Setup
Paging+ RACH + RRC Connection procedure + Default: Bearer Setup
SIP: INVITE (SDP Offer): NETWORK_TO_UE
SIP: 100 TRYING
SIP: 180 Ringing
SIP: 200 OK (PRACK)
SIP: 200 OK (INVITE)
SIP: PRACK
SIP: 100 TRYING
SIP: 180 Ringing
SIP: 180 Ringing
SIP: PRACK
SIP: 200 OK (PRACK)
SIP: 200 OK (Invite)
SIP: 200 OK (BYE)
SIP: 200 OK (BYE)
SIP: ACK: UE_TO_NETWORK
SIP: ACK: NETWORK_TO_UE
SIP: BYE: (UE_TO_NETWORK)
SIP: BYE: (NETWORK_TO_UE)
Dedicated Bearer Setup
Dedicated Bearer Setup
Alert User
Answer
Voice Call In-Progres  (RTP Media)
Figure 11.69  Typical VoLTE delay.
www.ebook3000.com

LTE Optimization Engineering Handbook
516
11.7.1  Call Setup Delay
11.7.1.1  Call Setup Time
Call setup time is the time from the VoLTE user initiates the call until the user receives notifica-
tion about the called party being alerted. This call type, VoLTE to VoLTE, and call setup time is 
measured entirely from the UE, which originates the call.
The typical call setup time is 3 to 5 seconds. For originating UE, SIP invite to a 180‐ring mes-
sage is around 4.7 s. For terminated UE, paging message to 200 OK messages is 390 ms, as 
shown in Figure 11.70.
Note: Network logs are required to check delays between nodes to spot precondition and 
early media delay. Sometimes the high value of operator’s call setup time is caused by the addi-
tional functions: “precondition, early media.” Precondition needs additional ~600 ms delay, 
while early media needs additional ~700 ms delay.
The call setup time are specified for preconditions are used or early media is used. 
Preconditions ensure resources are allocated prior to call setup completion and early media is 
network ring back tone enabled as announcements prior to call start.
In a live network, engineers usually modify call setup time calculation formula with appropri-
ate end trigger depending on call case. The following list states the possible combinations of all 
call cases and corresponding end triggers. Note that start trigger is always SIP Invite for all cases.
●
●No preconditions and no early media – end trigger is 180 rings
●
●Preconditions and no early media – end trigger is 180 rings
●
●No preconditions and early media – end trigger is 200 OK (PRACK)
●
●Preconditions and early media – end trigger is 200 OK (UPDATE)
Assuming media negotiation should be done during call setup between two UEs to use the 
same types of voice media, but both initial negotiation bandwidth was inconsistent. At that 
time, SBC open the proactive transcoding function to ensure that the subsequent media nego-
tiations have enough bandwidth to increase the bandwidth of the SDP. After the completion of 
the subsequent media negotiations, which are then sent back to the original bandwidth results 
(see Figure 11.71): first reserved 49 kbps bandwidth and subsequent modified the reserved 
bandwidth to 38 kbps. Media negotiation is necessary during call setup, but it increased the 
interface of Rx, Gx, and EPS unnecessary overhead.
The call setup time is very much impacted by the activity state in the two UEs involved in the 
test call. The activity state referred to is the ECM state (EPS connectivity management). The 
ECM state has two states: ECM‐idle and ECM‐connected. The call setup time 95th percentile 
target is: idle UE < 4 s; connected UE < 2.5 s.
For call setup time, UE1 establishes a VoLTE call to UE2. For call release time, UE1 and UE2 
have an existing VoLTE call. UE1 ends the VoLTE call. The typical call release time is shown in 
Figure 11.72.
11.7.1.2  Reasons for Long Call Setup Time
VoLTE call setup delay is one of the important KPIs, long setup delay can make poor user 
experience about VoLTE call. In a live network, the reasons for long call setup time could 
­possibly be due to any of the following:
●
●RACH procedure (only applicable for ECM idle mode – both originating and terminating 
calls).
●
●Paging strategy (in case of terminating calls in ECM idle mode) unreasonable, defaultPaging-
Cycle, delayed paging.

Figure 11.70  Typical call setup time and analyzed.
MO
18. Dedicated Bearer Setup for UE2 (VolP media/UM DRB/QCI_1)
IMS: SIP INVITE
IMS: SIP INVITE
183 Session
183 Session
Progress
Progress
PRACK/200OK
PRACK/200OK
Update
Update
200OK
200OK
200OK
180 Ringing
180 Ringing
Alert User
Answer Call
200OK
ACK
ACK
MT
6. Dedicated Bearer Setup for UE1 (VolP media/UM DRB/QCI_1)
www.ebook3000.com

Originating UE
Initiate
call
INVITE
100 Trying
183 Session Progress
200 OK (invite)
ACK
Audio video path setup
Audio video path setup
120 ms
IMS
Terminating
UE
600 ms
1500 ms
73 ms
INVITE
100 Trying
180 Ringing
200 OK (invite)
ACK
Ring
Answer
60 ms
1300 ms (call script delay)
152 ms
3100 ms
65 ms
Figure 11.70  (Continued)

VoLTE Optimization
519
●
●Radio condition affecting dedicated bearer setup time.
●
●Rx/Gx interface issues.
●
●Features involved in the call, for example, pre‐condition, early media, call forwarding, 
­network location etc.
●
●Retransmission of signaling messages (applicable for UDP transport).
●
●Traffic congestion/overload.
●
●ICS being used (O‐SDS, T‐SDS, T‐ADS).
●
●If VoIP is not supported in the LTE coverage area, this would result in CS breakout causing 
longer call setup time.
●
●Timer misalignment on different domains, it should be verified that call setup related timers 
are optimized and aligned across all the domains.
●
●IP Backbone latency including RAN backhaul latency.
The shortest call setup latency is achieved when both UEs involved in the test call are in 
ECM‐connected and the longest when both UEs are in ECM‐idle. In the worst‐case scenario, 
where both UEs in idle mode (not connected), this time was about 3.5 to 4 seconds, which is 
competitive with 2G/3G performance in the field (Figure 11.73).
Note: For VoLTE UE to PSTN or PSTN to VoLTE UE, the signaling delay is about 
3.0 seconds.
11.7.2  Conversation Start Delay
Conversation start delay is the time from the instant the call has been answered until the media 
RTP stream starts in either direction, which formula is:
	
Conversationstart delay s
t RTPstreamstarts
t user answ
 
 
 
 
erscall
 
	
183 [38,49]
183 [38,49]
PRACK
200OK
UPDATE [0,38]
UPDATE [0,49]
200OK[38,49]
200OK[38,38]
183 [38,38]
UE 1
SBC-1
SBC-2
UE 2
Invite [0,49]
Invite [0,128]
Resource reservation 38kbps
180 Ring
180 Ring
The meaning of [x,y]:
x is session bandwidth;
y is media bandwidth.
Resource reservation 49kbps
Finally resource reservation 38kbps
Figure 11.71  Media negotiation.
www.ebook3000.com

38 ms
UE1 Orig
eNB
To/From IMS
UE2 Term
2 ms
Invite
100 Trying
100 Trying
Invite
478 ms
42 ms
BYE
BYE
4 ms
200 OK
216 ms
200 OK
180 Ringing
180 Ringing
259 ms
374 ms
Paging and Reactivation
Dormant to Active
Figure 11.72  Typical call release time.

VoLTE Optimization
521
Observations from field we can get the maximum conversation start delay is less than 300 ms, 
as shown in Figure 11.74.
11.7.3  RTP Delay
The RTP delay represents the one‐way IP transport delay between the two UEs, including both 
the network delay and also the LTE and IP stack processing in the UEs. The main contributors 
to the speech path delay are AMR sampling time and coding/encoding, RTP delay (trans-
port + LTE and IP stack delay) and UE internal processing, for example, JB management, play 
out delay, and so on.
To avoid time synchronization issues, the RTP delay is measured one‐way in both directions 
between the UEs involved in the test call. The final one‐way delay is then calculated as the 
­average of the two measurement series. This method makes the assumption that the delay is 
idle-idle
(field)
0.0
1.0
2.0
3.0
4.0
5.0
6.0
2.4
2.2
1.8
0.9
3.8
6.0
idle-idle
connected-
idle
connected-
connected
3G idle-idle CSFB-CSFB
VOLTE
CS voice
0
1
2
3
4
5
6
IDLE-IDLE
IDLE-
CONNECTED
CONNECTED-
IDLE
CONNECTED-
CONNECTED
Lab tests
Field tests
Figure 11.73  VoLTE session setup time results.
www.ebook3000.com

LTE Optimization Engineering Handbook
522
symmetrical in both directions, which is a reasonable assumption. Achieving sub‐millisec time 
sync between the two UEs is very complex and difficult.
An outline of the calculation follows below: first, measure the RTP delay for each packet from 
UE A to UE B: a1, a2,…aN, and measure the RTP delay for each packet from UE B to UE A: b1, 
b2,…bM, and normalize the measurement series to min {M,N}. Then, calculate average one‐way 
delay for every packet pair: (a1 + b1)/2, (a2 + b2)/2,…(aN + bN)/2. The two delay values (aj, bj) must 
be from opposite directions in order to cancel out the time offset. If they are from the same 
direction the calculation will be wrong. The delay values will have opposite sign for each direc-
tion if the time offset is large enough, which is typically the case. The final one‐way average 
delay is calculated as the average of the series above.
In Figure 11.75, it illustrates the trigger points and the abstract formula for the average one‐
way RTP delay. Note that the X and Y values in the example below corresponds to aj and 
bj above.
Within VoLTE on the terminal side there is a small buffer, which can cope with delays. This 
buffer is also used to buffer in case of a VoLTE call to ensure the lip sync between voice and 
video. Next to delay in the IP backbone and access transport also a significant part of the delay 
is added on the radio air interface. The total delay is around 180 ms + backhaul delay + IP net-
work delay that is shown in Figure 11.76. Also the scheduler on the eNB will contribute some 
delay since a VoLTE packet is scheduled every 40 ms (20 ms).
Based on QoS verification the end‐to‐end latency of 2G and 3G calls are about 260 to 290 ms 
(with small delay, no congestion IP transmission).
One of paramount importance for VoLTE is the ability to achieve end‐to‐end delay for 
voice packets such that the delay meets user expectations. In order to maintain the voice 
quality of wireless VoIP network, it is needed to maintain the mouth‐to‐ear user plane delay 
to be less than about 200 ms make user very satisfied and less than about 280 ms make user 
satisfied. This is defined in ITU G.114 guideline and assumptions in the below delay budget 
calculations as encoding delay 30 ms, decoding delay 5 ms, UE processing delay 5 ms, air‐
interface delay (UL + DL) 100 ms, eNB processing delay 5 ms, S/P‐GW delay 1 ms, and trans-
port delay 10 ms.
18
16
14
12
10
% Total
8
6
4
2
0
(Min, 20)
(20, 40)
(40, 60)
(60, 80)
(80, 100)
(100, 120)
(120, 140)
(140, 160)
(160, 180)
(180, 200)
(200, 220)
(220, 240)
(240, 260)
(260, 280)
(280, 300)
(300, 320)
Figure 11.74  Conversation start delay.

44ms
Air
Interface
Uu
IP
Network
Air
Interface
4ms
eNB
S1-U
SGW
S5
SGi
PDN-GW
0.5ms
0.5ms
variable
SGi
SGW
eNB
PDN-GW
0.5ms
4ms
0.5ms
variable
variable
De-jitter buffer
delay
IP
Backbone
Iu-CS
Nb
Nb
CS-Core
3G
RNC
MGW
MGW
RNC
3G
80–100 ms
80–100 ms
100 ms
(incl. 30 ms Jitter buffer in MGW)
Figure 11.76  Delay in the network impacting the mouth‐to‐ear budget.
0
LTE voice end to end delay
20
40
60
80
100
ms
120
140
160
180
200
SAE GW
Transport
Downlink transmission
Uplink transmission
UE processing
AMR decoding
AMR encoding
eNodeB processing
T4
T1
UE A
UE B
S1-U
SGW
PGW
S5
T2
T3
RTP Packets
RTP Packets
Figure 11.75  RTP delay measurement.
www.ebook3000.com

LTE Optimization Engineering Handbook
524
Application layer delay is determined by TCP behavior, transport, and internet delay is deter-
mined by congestion and path length and network topology (1 ms per 200 km), and air delay is 
determined by scheduling and processing capability (3 ~ 200 ms).
Total no transport delay for VoLTE to VoLTE call is around 180 ms. Assume average total 
transport delay should be less than the 280 ms requirement. The detail delay budget and 
assumption for each network entity are listed in Table 11.34.
The test tool can measure speech path delay by using the known reference speech samples 
from the POLQA reference source file during POLQA voice quality evaluation. Figure 11.77 
and Figure 11.78 give the packet delay test result of VoIP only and FTP + VoIP scenarios. With 
20 UE’s VoIP‐only traffic, packet delay is very stable, when under 10FTP + 10VoIP condition, 
the delay variations increase but still stay less than 50 ms (80 ms target), it seems that packet 
scheduler allocates VoIP traffic with priority to keep delay under control.
In addition, the target for video path delay end‐to‐end between two VoLTE terminals with 
both voice and conversational video support is calculated in the VoLTE and is estimated to be 
Table 11.34  The detail delay budget for each network entity.
Delay Component
Max value
(ms)
Range
(ms)
Remark/Assumptions
UE delay UL/DL
44/39
31–44
15 ms processing time is assumed as worst case 
number for UE implementation
Air interface one‐way  
delay (UL/DL)
48/41
4–48
For 6 HARQ transmissions using dynamic 
scheduling as worst case
eNB delay
8
2–8
eNB processing delay for scheduling and 
packet L1/L2 processing
SGW
0.5
0.1–0.5
Packet forwarding
PDN‐GW
0.5
0.1–0.5
Packet forwarding
S1‐U or S5
–
2–15
Propagation delay is mainly proportional to 
distance (5us/km)
IP Network
–
18–41
Assuming 2 ms processing and queuing, and 
2000 miles OC3
Inter Packet Delay (ms)
0
10
Avg Delay
Max Delay
Avg Jitter
Max Jitter
20
30
40
50
20
20
37
33.2
37
45
0.8
1.9
2.1
2.9
6
4
4.7
6.2
20
20
Excellent (4UE′s)
Good (3UE′s)
Fair (2UE′s)
Poor (3UE′s)
Figure 11.77  Packet delay (20 UE’s VoIp only).

VoLTE Optimization
525
less than 400 ms. Of this delay, roughly half of it is dedicated to handle the delay jitter originated 
from scheduling and retransmissions in LTE RAN. In order to keep lip sync, the audio shall not 
be more than 25 ms ahead of the video, and the video shall not be more 40 ms ahead of the 
audio. Adjustments of the lip sync is made in the decoding node (the UE).
11.7.4  Handover Delay and Optimization
Voice interrupt time during handover (HO) means discontinuity of voice media flow (also 
called “voice gap”) due to hand‐over in UL and DL directions. To be measured on the listener 
and on the talker side in DL, and UL directions, respectively. Measuring the variation of inter‐
arrival times of IP packets carrying voice payload at the time of the handover in DL, and 
measuring the discontinuity of RTP packet send intervals in UL.
Uplink voice interruption is measured in the remote UE. The uplink voice interruption is the 
duration from the last voice packet received in the remote UE (sent from the handover UE 
immediately before the handover) to the first voice packet from MSC/MGW received in the 
remote UE (immediately after the handover). The abstract formula is list below.
	
T
T
T
DL
st packet received in HOUE after HO
last packet received in t
1
he HOUE before HO
jitter buffer size
UL
st packet received in r
T
T
T1
emote UE after HO
last packet received in the remote UE before HO
T
Tjitter buffer size 	
The feature of data forwarding at intra‐LTE handover will minimize the voice interruption 
and DL packet loss at X2 handover. For data forwarding during X2 and S1 handover, only fresh 
S1 SDUs from old S1 path will be forward since VoLTE bears utilize UM RLC, which is not 
lossless. Data forwarding at intra‐LTE handover is to ensure that no downlink data packets are 
lost when performing an X2 intra‐LTE handover or intra‐eNB handover. In that case, data for-
warding is not possible and leads to throughput degradation. Data forwarding does not apply 
to S1 handover (Figure 11.79).
Note that due to latency in the de‐jitter and play out buffer the remote UE may still have voice 
frames that haven’t been played out yet when the handover commences and could, in reality, 
reduce the perceived interruption.
The VoLTE characteristics requirement specifications require a handover performance of 
less than 50 ms speech interruption time in 90% of the cases. The radio transport interruption 
time (at layer2) in a intra‐LTE handover (X2 handover) will be around 45 ms in normal network 
0
20
19.3
19.7
20
47.1
1.2
5.1
9.3
9.9
3.2
8.5
21.1
Avg Delay
Max Delay
Avg Jitter
Max Jitter
20
Inter Packet Delay (ms)
40
60
80
100
Excellent
Good
Fair
Poor
16.8
95.1
94.2
37.1
Figure 11.78  Packet delay (10FTP +10 VoIP).
www.ebook3000.com

LTE Optimization Engineering Handbook
526
operating radio conditions. With a contention‐free handover, a random access preamble is 
reserved in the target cell, and the interruption time could be even shorter (down to 30 ms) 
(Figure 11.80).
Usually long handover interrupt time can be found in a live network. In most cases, this is 
due to handover. Two examples are shown here to solve the issues.
Example 1: SIB read failure during handover.
The main reason for the handover failure is SIB read failure on target cell on DL during 
intra‐frequency handover for the weak RF coverage and many neighbors with weak RSRP, 
which is shown in Figure 11.81.
Example 2: Total handover interrupt time is 781 ms due to a RLF happened during handover.
VoLTE interruption time during this RLF is 781 ms on DL, which is not that bad because the 
RLF re‐establishment worked well and VoLTE DL packets could flow after that. The main 
­reason for the RLF is maximum UL RLC re‐transmission for SRB‐2 AM PDUs, while the DL 
RSRP of the serving cell is very weak. This area in general suffered weak RF coverage and many 
neighbors with weak RSRP in addition to pilot pollution, as shown in Figure 11.82.
S-GW
end marker
Source eNB
6
5
4
Target eNB
Status:
ACK 4 & 5
X24ANext SN= 7
Figure 11.79  Data forwarding at intra‐LTE 
handover.
Target:
less than 50 ms speech
interruption time in 90
percent of the cases
UE
RRC Connection Reconfiguration
User data stop in Source eNB
User data start in Target eNB
First DL grant from target eNB
(LTE RLC UL UM Data PDU)
Source eNB
HOIT UP
HOIT CP
Target eNB
Random Access Channel Response Initial Access
RRC Connection Reconfiguration Complete
Figure 11.80  Handover interrupt time of control and user plane (CP and UP).

VoLTE Optimization
527
11.8  ­Intra‐LTE Handover and eSRVCC
LTE intra‐frequency/inter‐frequency with handover is supported for mobility for RF reason, 
and for offloading. SRVCC includes a seamless handover of an ongoing VoLTE call in LTE to 
CS access in GSM/WCDMA. This part specially referenced GSMA recommendations in IR.64, 
and 3GPP specifications in 3GPP TS 23.216 and TS 23.237.
11.8.1  Intra‐Frequency Handover
For data calls, operators have been using the handover success rate as a criterion in simulation 
to optimize the mobility‐related parameters to maximize the data call coverage with reasona-
ble handover success rate, and the other is to minimize number of handover. For VoIP/GBR 
calls, since VoIP calls are more sensitive to RF condition, they may need to trigger handover 
earlier. Besides handover success rate, voice quality–related criteria may need to be used to 
optimize the mobility‐related parameters.
Since there are no service‐based triggers (QCI1) for A3 events in intra‐frequency handover, 
it is important to keep voice interrupts during intra‐LTE mobility as short as possible and X2 
delays should be kept to a minimum (Figure 11.83).
If handovers are triggered too late, high DL BLER will cause handover command decode 
failures.
RTP loss primarily occurs at handover regions due to delayed handovers and poor DL/UL 
conditions, and if measurement report counts are significantly higher than number of handovers 
–130
–120
–110
–100
–90
–80
–70
–60
4:32:38.109
4:32:39.029
4:32:39.949
4:32:40.869
4:32:41.789
4:32:42.599
4:32:43.509
4:32:44.429
4:32:45.264
4:32:46.029
4:32:46.949
4:32:47.799
4:32:48.544
4:32:49.249
4:32:50.169
4:32:51.089
4:32:52.009
4:32:52.909
4:32:53.849
4:32:54.769
4:32:55.689
4:32:56.549
4:32:57.469
4:32:58.324
4:32:59.159
4:33:00.089
4:33:01.009
4:33:01.879
4:33:02.544
4:33:03.449
4:33:04.369
4:33:05.244
4:33:05.989
4:33:06.959
4:33:08.529
4:33:09.449
4:33:10.369
4:33:11.289
RSRP [dBm]
Cell ID 53
Cell ID 81
Cell ID 82
Due to bad RF on source and target, the UE fails to read the SIB on 
the target, SIB wait timer expires and RLF indicated
SIB read fail and RLF
Even new serving is 
weak after re-
establishment
4:33:06.959
4:33:08.529
Figure 11.81  Long handover interrupt time due to SIB read failure during handover.
Last RLC-UM PDU before RLF
UE hits Max RLC
re-tx on SRB AM
PDUs and
attempting re-
establishment
First RLC-UM PDU before RLF
Figure 11.82  Long handover interrupt time due to RLF happened during handover.
www.ebook3000.com

LTE Optimization Engineering Handbook
528
that indicates an inability to execute handover quickly, it is necessary to optimize A3 event–related 
parameters to trigger handovers earlier.
Meanwhile, reducing the time duration of declaring RLF can also reduce RTP loss during 
handover failures and RLF as VoLTE is more time‐sensitive than data traffic. The optimal 
parameters of N310 can be set to 5, T310 can be set to 1000 ms, N311 can be set to 2, which are 
shown in Table 11.35.
11.8.2  Inter‐Frequency Handover
Actually there is not much difference between the intra‐ and inter‐frequency VoLTE handover 
call flow. Inter‐frequency handovers are measurement‐based and prepared and executed after 
a A5 measurement report is received at the eNB. VoLTE call is kept in source cell until another 
handover attempt succeeds or UE enters A2 threshold area, which triggers inter‐freq/­
inter‐RAT redirection. In contrast to the intra‐frequency LTE handover there are special 
­service‐based triggers (QCI1) for A2/A5 events intended for inter‐frequency LTE handovers in 
some network (Figure 11.84).
VoLTE mobility measurement support measurement parameter offsets for VoIP calls, which is 
shown in Figure 11.85. Threshold values used to configure UE for event A1, event A2, event A4, event 
A5, event B1, and event B2 measurements can be adjusted by VoIP‐specific offset parameters. 
UE
A3 Measurement Report
RRC Connection Reconfiguration
Handover Request
Handover Request Acknowledge
eNodeB Status Transfer
UE Context Release Command
UE Context Release Complete
Path Switch Request
Path Switch Request Acknowledge
Source
eNodeB
Target
eNodeB
Data Forwarded
from Source eNodeB
to Target eNodeB
MME
SGW
RRC Connection Reconfiguration Complete
Figure 11.83  Call flow for “VoLTE call – intra‐frequency handover.”
Table 11.35  The optimal parameters related to RLF.
Parameters
Current setting
Optimal setting
Comment
N310
20
5
Current setting prolongs RLF declaration
T310
2000 ms
1000 ms
Current setting prolongs RLF declaration
N311
1
2
Current setting makes RLF recovery easy

VoLTE Optimization
529
Measurement‐based inter‐frequency handover with A5 measurement in the UE occurs after 
receiving an A2 (bad coverage) measurement report.
1)	 UE with voice (QCI1) will be configured with A5/B2 measurements when serving LTE 
cell < (A2ThresholdRsrp ‐ hysteresisA2) + A2 threshold offset
2)	 UE with voice (QCI1) triggers inter‐frequency handover when the thresholds below are 
fulfilled:
●
●Serving cell < (A5Threshold1Rsrp ‐ hysteresisA5) + A5Threshold1 offset
●
●Target cell > (A5Threshold2Rsrp + hysteresisA5) + A5Threshold2 offset
The upper scheme enables mobility of VoIP calls to be triggered sooner or earlier than other 
type of calls.
11.8.3  Single Radio Voice Call Continuity Procedure
To be able to support and maintain VoLTE services with good end‐user experience and quality, 
it is required to support handovers of VoLTE calls to legacy RATs in poor LTE coverage areas 
or areas where no LTE coverage is yet present. Due to a lack of IMS VoIP service support by 
target RAT, voice continuity will be ensured by using an inter‐RAT service transfer from PS 
domain to CS domain by processing the SRVCC (single radio voice call continuity) procedure 
to UTRAN or GERAN. For SRVCC, single radio means that the UE transmits and receives 
signals on only one radio access at a given time (LTE, WCDMA or GSM) in order to minimize 
power consumption and radio emission.
QCI 2, QCI 5 and QCIs 7 to 9 will not be handed over to UTRAN in case of a SRVCC 
­procedure, but all of them are released at SRVCC handover. The data part might be 
A2 Threshold
Locations where IFHO will take place: A5 
threshold1(serving cell) and A5 threshold2 
(target cell)
B4
B13
Locations where measurement gaps is active
Figure 11.84  Inter‐frequency handover threshold for VoLTE.
LTE Freq 1
(Serving LTE Cell)
LTE Freq 2
(Target LTE Cell)
–113dB
–109dB–113dB
–117dB
Voice
Without Voice
Ue Without Voice
Ue With Voice
Voice Service Area
MBB Service Area
Figure 11.85  Separate configurable handover thresholds of VoLTE.
www.ebook3000.com

LTE Optimization Engineering Handbook
530
­re‐established once the VoLTE call is successfully handed over to UTRAN whether by the UE 
or by the network.
SRVCC to 2/3G feature provides voice call continuity from a PS access (LTE) to a CS access 
(2/3G) for calls that are anchored in IMS. SRVCC gives a CS‐handover‐like user experience for 
voice calls when changing between LTE PS access and legacy CS access. During the IRAT 
handover there are two call legs that the MSC must initiate, one toward the new radio link and 
another one to the IMS where the ongoing call must be connected again. This functionality is 
useful to keep voice call continue when a single transceiver UE is moving from a LTE network 
toward a legacy network that does not support VoIP call. SRVCC has been standardized from 
3GPP release 8 and onward. When supporting SRVCC mobility toward UTRAN, new 
­functionality is required in LTE RAN, EPC, MSS, IMS, HSS/HLR, and UE (Figure 11.86).
Prepare 
Handover
Connect CS
leg to IMS
Handover
trigger
PS Call leg
SRVCC
CS Core
(MSS)
2G/3G 
RAN
LTE
RAN
Evolved
Packet Core
SV
IMS Core
SR-
VCC
SR-
VCC
SR-
VCC
SR-
VCC
NodeB
RNC
S1-MME
Abis/
lub
A/luCS
Gm
Mb
Mb
SGi
S11
S1-U
Mw
MSS
HLR
MME
P-CSCF
ATCF
ATGw
I-/S-
CSCF
S&P
GW
eNodeB
HSS
SCC AS
Sv
I2
SR-
VCC
Figure 11.86  SRVCC diagram and related interface.

VoLTE Optimization
531
Both the LTE and 2/3G are connected with an IMS capable core network. SRVCC enhanced 
MSC server acts as anchor MSC server either performing inter or intra‐MSC handover to 2G/3G. 
The MSC needs to be upgraded to support the Sv interface (a new interface introduced between 
the MME and MSC‐S based on GTP v2‐C) with MME and functionalities to receive the handover 
requests from the MME communicate with GTP tunnels over a GTP‐based interface, prepares the 
GERAN/UTRAN handover with the target MSC server, and initiates the service continuation 
toward the SCC‐AS and responses toward MME. The other interface called Mw interface, between 
MSC and ATCF, can be based on the standard SIP solution of the MSC server (Figure 11.87).
Figure 11‐88 shows the SRVCC architecture for LTE to 2/3G based on radio condition (Event 
B2). The SRVCC‐based handover is triggered by the same radio handover conditions and mech-
anisms as for a LTE to 2/3G PS handover. The MME receives a handover request from the LTE 
with the indication for SRVCC, then triggers the SRVCC procedure with the 2/3G MSC 
enhanced for SRVCC via the Sv reference point based on the UE measurement reports. The eNB 
will send a “handover required” to the MME, which includes an SRVCC handover indication 
indicating to the MME that this is for CS‐only handover or PS + CS handover. The MME selects 
the MSC based on supplied target cell‐id in the handover request. The SRVCC enhanced MSC 
server then initiates the IMS service continuity procedures and co‐ordinates it with the CS 
handover procedure to the target cell. If the target MSC is different from the SRVCC enhanced 
MSC, then the SRVCC MSC uses normal MSC‐MSC handover procedures with the target MSC 
to perform the handover. The remote end is connected to the CS access leg via the MGW and 
the source IMS access leg is released. The MSC then sends a response back to the MME, includ-
ing the necessary CS handover command information for the UE to access the 2/3G network. 
The MME sends a handover from LTE command to the UE, which then tunes to 2/3G and com-
pletes the handover. The MME preserves the non‐GBR bearers and deactivates the voice bearer 
(the assumption is that DTM (dual transfer mode) with simultaneous circuit and packet sessions 
will not be supported in the 2/3G network, therefore only the voice bearer in LTE is handover, 
all packet services in LTE are suspended when UE moves to 2/3G network) (Figure 11.88).
Notes:
●
●New interface: Sv: interface between MME and MSC server, S3: interface between MME 
and SGSN
●
●Sv interface = GTP‐C tunnel per UE, opened by the first Sv message from MME to MSC : 
“SRVCC PS to CS request,” closed on the last Sv message from MME to MSC: “SRVCC PS to 
CS complete acknowledge”
MME
MSC
MSC
ATCF
GTP-C
UDP
IP
L2
L1
GTP-C
UDP
IP
L2
L1
Sv
SIP
UDP/TCP
IP
L2
L1
SIP
UDP/TCP
IP
L2
L1
Mw
Figure 11.87  SRVCC‐related interface procotol.
www.ebook3000.com

LTE Optimization Engineering Handbook
532
eNB should know UE, eNB, MME, and target BSC cell’s SRVCC support status to decide 
whether SRVCC to 2/3G network should be triggered or not. Each network entity’s SRVCC 
function is listed in Table 11.36. eNB can get UE/network capabilities by feature group indica-
tors during NAS attach and tracking area update procedures. Actually, there are four kinds of 
method for eNB to get UE’s SRVCC capability by:
●
●S1 initial context setup request, to indicate MME and UE are SRVCC capable, UE radio capa-
bility:: UERadioAccessCapabilityInformation
●
●RRC UE capability information
●
●X2 handover request, RRC context:: HandoverPreparationInformation
●
●S1 handover request, source to target transparent container:: Source eNB to target eNB 
transparent container, RRC Container:: HandoverPreparationInformation
In Figure 11.89, the S1 initial context setup request message from MME in the attach procedure 
should contain the SRVCC operation possible (value “SRVCCOperationPossible” possible) to 
indicate MME and UE are SRVCC capable.
During SRVCC, two parameters are used E2E over several domains, they are correlation 
MSISDN (C‐MSISDN) and session transfer number for SRVCC (STN‐SR). The C‐MSISDN is 
used to identify the UE for which an access transfer is being performed. The C‐MSISDN is an 
E.164 number, the same as the MSISDN (or basic MSISDN in case of multi‐numbering) and 
ATCF identifies the user using the C‐MSISDN. The STN‐SR is an E.164 routing number sent 
by MME in SRVCC PS to CS request that is identifies the ATCF that will handle the SRVCC 
access transfer. The ATCF is allocated to the user at IMS registration. The STN‐SR is used by 
the MSC to request access transfer of the media path from LTE PS to CS. When the user attach 
to the LTE, the STN‐SR and the C‐MSISDN are downloaded to the MME from the HSS, when 
UE
eNodeB
S-GW/
PDN-GW
SGi
MSC
Server
IuCS/A
MME
Sv
SGSN
IuPS/Gb
Gn/S3
IMS
S1-U
S1-MME
HSS
S6a
S11
UE
UTRAN/
GERAN
IMS anchored voice bearer path before handover
IMS anchored voice bearer path after handover
SIP signaling path before handover
Figure 11.88  SRVCC architecture for LTE to 2/3G network.

VoLTE Optimization
533
an SRVCC access transfer is triggered, the MME sends the STN‐SR and the C‐MSISDN to the 
MSC, ATCF will redirect the media in the ATGW (from LTE to CS) and inform the SCC AS 
about the access transfer. Figure 11.90 gives an explenation of ATCF receives invite from the 
MSC with STN‐SR in the request URI and the C‐MSISDN.
Notes:
STN‐SR is configured in each ATCF (access transfer control function), it is a public telecom-
munication number, as defined by ITU‐T recommendation E.164 and is used by the MSC 
server to request session transfer of the media path from the PS domain to CS domain. The 
STN‐SR identifies the ATCF allocated to the user at IMS registration. The STN‐SR is configured 
for the subscriber at the time of SRVCC service provisioning. (TS 23.237).
Table 11.36  SRVCC function in network entity.
SRVCC function
UE
●
●Sending UE SRVCC capability and voice preference to the network, sending UE GERAN/
UTRAN capability
●
●IRAT measurement reports, handling alerting calls and mid‐call services
eNB
●
●Read and store UE and MME SRVCC capability, identify voice bearer for a user (QCI = 1)
●
●Fetching UE GERAN/UTRAN capability, measuring and triggering SRVCC, release UE 
context after completion
MME
●
●Checking user and UE SRVCC capability, fetching STN‐SR from HSS
●
●Splitting bearers in voice‐ and non‐voice bearers
●
●Handing over voice bearers to MSC including target cell, RAN node id, STN‐SR, C‐MSISDN, etc.
●
●Handling SRVCC handover preparation and execution, release E‐UTRAN and MME 
resources after completion
MSC
●
●Selecting correct ATCF based on STN‐SR, selecting correct MSC, RNC or BSC based on 
target RAN information
●
●Registering the subscriber in IMS when ICS flag is received via the Sv
●
●Registering the subscriber in HLR without a trigger from the UE
●
●Coordinating the CS handover and session transfer procedures, anchoring the call in the 
CS domain
Figure 11.89  SRVCC capability of UE and MME.
www.ebook3000.com

STN-SR
ATCF
C-MSISDN
New Dialog
Figure 11.90  ATCF receives invite from the MSC with STN‐SR in the request URI and the C‐MSISDN.

VoLTE Optimization
535
ATCF acts as SIP signaling anchor point and is located in the SIP signaling path between P‐SCSF 
and S‐CSCF and informs the SCC AS that the session transfer has taken place. It’s implemented 
as part of P‐CSCF.
When event B2 or event B1 UE measurement report is received and eNB determines to trigger 
SRVCC, it will select the best candidate cell for voice bearer transfer. SRVCC to UTRAN triggering 
conditions are shown in Figure 11.91.
SRVCC is also used for reactive offloading and preventive offloading. When event B2 or 
event B1 UE measurement report is received and eNB determines to trigger SRVCC, it will 
select the best candidate cell for voice bearer transfer regardless the cell supports “CS only” or 
“PS and CS.”
When serving eNB receives an event B2 or event B1 UE measurement report with measure-
mentPurpose = “Mobility‐Inter‐RAT‐to‐UTRA” and target UTRA cell is incapable to support 
VoIP, SRVCC to GERAN/UTRAN for VoIP calls will be triggered. Figure 11.92 summarizes the 
SRVCC handover procedure for GERAN/UTRAN. SRVCC support PS handover and also supports 
the procedure without PS handover.
MME invokes SRVCC by sending PS‐CS request via Sv (GTPv2 over UDP) interface to 
SRVCC enhanced MSS, which acts as anchor MSC server either performing inter or intra‐
MSC handover to 2G/3G. MGW resources are reserved by the MSS during SRVCC procedure. 
MME also provides specific STN‐SR in this request, which is then used by MSS to establish 
session toward SCC AS/ATCF. The whole SRVCC call procedure is shown in Figure 11.93.
The upper call flow shows a high‐level messages flow between the different network ­elements 
during SRVCC transfer. The detail flow description is as below:
●
●Handover initiation: UE sends measurement reports to eNB based on UE measurement 
reports the source eNB, decides to trigger an SRVCC handover to GERAN/UTRAN.
●
●Source E‐UTRAN sends handover required (target ID, generic source to target transparent 
container, SRVCC handover indication) message to the source MME. The SRVCC handover 
indication indicates to the MME that target is only CS capable, hence this is a SRVCC handover 
operation only toward the CS domain. The S1 message “handover required” contains SRVCC 
handover indication set to (CS‐only) and the value (Handover type) for SRVCC handover.
●
●Based on the QCI associated with the voice bearer (QCI 1) and the SRVCC handover indica-
tion, the source MME splits the voice bearer from the non–voice bearers and initiates the 
PS‐CS handover procedure for the voice bearer only toward MSC server.
●
●The MME sends a SRVCC PS to CS request (IMSI, Target ID, STN‐SR, C‐MSISDN …) mes-
sage to the MSC server. (MME received STN‐SR and C‐MSISDN from the HSS as part of the 
subscription profile downloaded during the E‐UTRAN attach procedure). MSS also makes a 
call toward the VCC anchoring point (SCC AS) based on received STN‐SR.
●
●Target MSC performs resource allocation with the target BSS by exchanging handover 
request/acknowledge messages
●
●The MSC server initiates the session transfer (using the STN‐SR). Standard IMS service 
continuity procedures are applied for execution of the session transfer.
●
●During the execution of the session transfer procedure the remote end is updated with the 
CS access leg. The downlink flow of VoIP packets is switched toward the CS access leg at this 
point. Source IMS access leg is released.
●
●MSC server sends a SRVCC PS to CS response message to the source MME.
●
●Source MME sends a handover command message to the source E‐UTRAN. The message 
includes information about the voice component only.
●
●Source E‐UTRAN sends a handover from E‐UTRAN command message to the UE.
●
●UE moves to GERAN/UTRAN. Handover detection at the target BSS occurs. The UE sends 
a handover complete message via the target BSS to the target MSC.
www.ebook3000.com

A VoIP call with or without data bearers
UE sends event B2 measurement report
UE send event B1 measurement report
Yes
PS handover is
performed for both VoIP
and date bearers to the
best reported cell
No
UE enters
A2_Coverage_Alarm area
UE selected as reactive/preventive
offloading candidate
UE is configured to perform event B2
measurements on candidate UTRAN
carriers
- SRVCC is ‘CS only’ (VoIP CS HO to UTRAN, data bearers dropped) to best reported cell
- SRVCC is ‘PS and CS’ (VoIP CS HO to UTRAN, data bearers PS HO to UTRAN) to best reported cell
- If SRVCC can be supported
- If SRVCC cannot be not supported, UE is kept in source cell
UtraFddNeighboringCellRelation::voiceOverlpCapability
set to ‘capable’
UE is configured to perform event B1
measurements on candidate UTRAN
carriers
Figure 11.91  SRVCC to UTRAN triggering conditions.

UE
Ue
eNB
RNC
eNodeB
MME
MME
Voice
Measurement
report
Voice
Preparation of target RAT
IMS Service Continuity
HO from
EUTRAN
Command
UTRAN lu Access Procedures
Relocation Complete*
MSS
SGSN
GSM BSC
6. Initiation of session Transfer (STN-SR)
IMS
IMS
4. PS to CS Request
8. PS to CS Response
14. PS to CS Ack
12. Release bearer
Target MSC
3. Bearer
Splitting
7. Session
transfer
SGW
5. HO Request/Ack
2. HO Required (SRVCC)
9. HO command
13. HO complete
10. HO to GERAN
1. HO initiation
11. HO to GERAN
Handover to UTRAN
complete
Handover Command
Handover Required
PS to CS Req
L1/L2 interruption
of 100 – 200 ms
Figure 11.92  SRVCC handover procedure.
www.ebook3000.com

User Plane termination reserved from target MGW for
A/Iu resource towards target BSC/RNC
2.Relocation/Handover Request
7.Relocation/Handover Detect
8.Relocation/Handover Complete
SRVCC PS to CS Complete
Acknowledge
9.SRVCC PS to CS Complete
Notification
4.Initiation of Session Transfer
(STN-SR)
5.200 OK
ISD
MAP Update Location Ack
10.MAP Update Location (IMSI)
TMSI Reallocation
3.Relocation/Handover
Request Ask
MME
MSS
(SRVCC)
Target
RNC/BSS
HLR
UE
IMS
(SCC AS)
User Plane 
termination reserved 
from anchor MGW for 
outgoing Call Control 
leg towards IMS (this 
is anchor termination 
for SRVCC call).
User Plane through connection for speech path !
After SRVCC HO 
procedure is successful, 
the MSS(SRVCC) 
performs a TMSI 
reallocation procedure 
toward the UE. MAP is 
sent to the HLR after the 
TMSI reallocation 
procedure.
1.SRVCC PS to CS Request
6.SRVCC PS to CS Response
Ack
Figure 11.93  SRVCC call procedure (refer to 3GPP, 23.216, section 6.2.2).

VoLTE Optimization
539
●
●The MME starts the preservation of non‐GBR bearers and the deactivation of the voice 
bearers.
●
●BSS sends a handover complete message to the target MSC
●
●MSC server sends a SRVCC PS to CS complete notification message to the source MME, 
informing it that the UE has arrived on the target side. Source MME acknowledges the infor-
mation by sending a SRVCC PS to CS complete acknowledge message to the MSC server. 
MSC server may perform a MAP update location to the HSS/HLR if needed. This may be 
needed for MSC server to receive GSM/WCDMA supplementary service information and 
routing of mobile terminating calls properly in certain configuration.
It is worth to mention that if there is no support for the PS handover in the SRVCC CS only 
handover procedure, the PS part is released in LTE. However the UE or network might re‐
establish the data session again once it succeeded the SRVCC handover successfully. The 
feather of “SRVCC‐CS + PS” performs SRVCC on the voice bearer in conjunction with the 
handover of the data bearers, into a multi‐RAB configuration on 3G. The interruption time for 
both voice and data is on the order of 300 ms.
When performing SRVCC, if the MSC/MGW does not even support AMR‐WB/NB 
transcoding, then the transcoding will happen in the P‐CSCF. P‐CSCF will try to select the 
codec used for the original call if possible, but if the UE only offered with AMR, it will trig-
ger transcoding.
11.8.4  SRVCC Parameters Optimization
11.8.4.1  Handover Parameters
If SRVCC handovers are supported and allowed by both UE and the network, it is stored in 
both the HSS and MME. Within the RAN there are different thresholds, which will start, stop 
measurement events or actual trigger SRVCC handovers to GERAN/UTRAN events. A1, A2, 
and B2 are different events that the UE reports to the eNB based on thresholds of RSRP or 
RSRQ (Figure 11.94).
UE will receive GERAN/UTRAN measurement configuration to activate GERAN/UTRAN 
measurements after it sends a measurement report of A2 (RSRP lower than the threshold). 
Then, GERAN/UTRAN measurements for SRVCC targets are activated in the UE (together 
with measurement gaps activated/DRX deactivated if related conditions apply). QCI1 offsets 
for the thresholds for Event A1, A2, A5, and B2 are possible to configure to distinguish between 
users having a VoIP over LTE services or just a plain packet data session (Figure 11.95).
VoLTE calls, which are still in the (pre‐)alerting phase and will enter bad LTE coverage, will 
be dropped if the SRVCC handover procedure is initiated since this functionality is not sup-
ported by the LTE RAN up to now.
MoS scores a quantifier for speech quality is also an important performance indicator, which 
should be used to determine the need for specific triggers for VoLTE SRVCC handover. The 
threshold values used to configure UE for event A1, A2, A4, A5, B1 and event B2 measure-
ments should be adjusted by VoIP specific offset parameters. It is mentioned that speech 
codecs within VoLTE to VoLTE, but also in other call cases such as VoLTE to UTRAN (NB), 
VoLTE to UTRAN (WB), VoLTE to GERAN (HR, EFR, FR), and so on, are need to be opti-
mized if this will work as expected with or without additional transcoding.
11.8.4.2  SRVCC–Related Timer
There is a specific set of timers that guard the SRVCC procedures in the eNB. The timers 
related to SRVCC preparation phase and SRVCC execution phase. Table 11.37 gives the trigger 
points of the two phases.
www.ebook3000.com

UE
eNB
eNB send configuration for A2
Search (RSRP & RSRQ)
eNB sends A1, B2, A5 and A2
Critical threshold
Measurement Report for Utran
Cell
SRVCC Handover
Handover to Utran completed
VoLTE call performed
Event A2 triggered–A2 Search
threshold reached
RRC Connection Reconfiguration
(A2 Search RSRP & RSRQ)
RRC Connection Reconfiguration
(VoLTE Bearer added)
RRC Connection Reconfiguration
(A1/A5/B2/A2 Critical)
Measurement report
(A2 Search)
SRVCC HO Command
Handover to Utran Complete
Measurement report
(A2 Critical)
Figure 11.94  SRVCC handover trigger event.

A2 
measurement 
report
measurement 
configuration
Figure 11.95  SRVCC handover RRC connection reconfiguration.
www.ebook3000.com

LTE Optimization Engineering Handbook
542
During the SRVCC preparation phase (from eNB sending the handover required to receiving 
either handover command or handover preparation failure), the related timer is:
●
●GSM/WCDMA: TS1RELOCprep,
It is used to guard against failure of the MME to respond in preparation phase of S1 handover 
to GSM, it’s supervision timer for handover preparation to 2/3G. If TS1relocprep expires, or a 
S1‐AP handover preparation failure is received from MME indicating resource reservation in 
target network fails, serving eNB will abort the SRVCC to GERAN/UTRAN procedure and 
sends S1‐AP handover cancel with cause “tS1relocprep‐expiry,” eNB will return UE call context 
to the state before SRVCC was triggered.
If S1‐AP handover command message is received from MME before timer TS1relocprep expires 
indicating resource reservation in the target network is successfully completed, serving eNB 
stops timer TS1relocprep and starts timer TS1relocoverall from receiving handover command to 
receiving of the UE context release command. TS1RELOCOverall is delta for supervision timer for 
the execution phase of a S1 handover to 2/3G.
●
●GSM/WCDMA: TS1RELOCoverall = t304 + t311 + t301 + TS1RELOCOprep
If UE context release command is received from MME before timer TS1relocoverall expires, SRVCC 
to UTRA is successful, eNB will send a UE context release complete to MME and release UE context 
and associated resources. If timer TS1relocoverall expires, eNB considers the UE to have lost radio 
coverage and will send an UE context release request to MME to release all UE‐associated resources.
Note that t304 (Timer T304 for InterRAT) value is used eNB internally to estimate the time 
the UE may spend to access the target system after receiving mobility from E‐UTRAN ­command 
before starting RRC re‐establishment. It is used by eNB internally to calculate the supervision 
timer for the handover execution phase. T304 timer as such in the context of the inter‐RAT 
mobility procedures based on handover is not provided to the UE by the eNB (like its for ­intra‐LTE 
mobility or CCO to GSM) (Figure 11.96).
In case of canceling the SRVCC, from sending handover cancel message (to MME) to receiving 
handover cancel acknowledge. The related timer is:
●
●GSM: timer tS1RelCanG, WCDMA: timer tS1RelCanU
TS1RELOCcancel guards the respond to a S1AP handover cancel with a S1AP: handover cancel 
acknowledge.
Table 11.37  The trigger points by UE and eNB for SRVCC preparation phase and SRVCC execution phase.
UE side
network side
Handover preparation  
time
Begin
UE sending “Measurement 
report (IRAT)” to source eNB
eNB receiving “Measurement report 
(IRAT)” from UE and sending the 
handover required
End
UE receiving “Mobility from 
EUTRA command” from 
source eNB
eNB receiving handover command from 
MME and sending “Mobility from 
EUTRA command” to UE
Handover execution  
time
Begin
UE receiving “Mobility from 
EUTRA command” from the 
source eNB
LTE eNB sending “Mobility from 
EUTRA command” to the UE
End
UE sending “Handover to 
UTRAN complete” to the 
target NB
3G NB receiving “Handover to UTRAN 
complete” from the UE

VoLTE Optimization
543
11.8.5  aSRVCC and bSRVCC
Typically LTE coverage needs to be maximized in order to have as many UEs in LTE ­network 
as long as possible, so reselection threshold from LTE is typically set very low (e.g., −124dBm). 
On the other hand, VoLTE performance needs to be good so SRVCC threshold is typically set 
to relatively higher threshold (e.g., −116dBm). This creates a problem where terminal can 
access the network and initiate VoLTE call when RSRP is below SRVCC threshold but above 
reselection threshold that UE initiates VoLTE call, which triggers SRVCC, aSRVCC, and 
bSRVCC support and are specified in 3GPP TS 24.237. In case the function of a/bSRVCC is not 
enabled, the UE cannot reselect to 3G and remains in LTE, but cannot make any VoLTE call.
aSRVCC, alerting phase SRVCC, which means SRVCC handover happened after SIP 180 
Ringing has been received by originating UE while terminating UE has not yet answered with 
SIP 200 OK. Alert phase may last several seconds. bSRVCC means pre‐alert phase SRVCC, 
defined in 3GPP for originating leg. aSRVCC and bSRVCC are shown in Figure 11.97.
Operator has to avoid SRVCC occuring during ringing as much as possible. The solution is 
expanding VoLTE area, which means SRVCC threshold (B2 threshold: −116 to 118dBm) should 
be set to a lower value. If SRVCC triggering threshold is changed to lower value, the user will 
use VoLTE in a worse RF condition, and it is better to introduce RSRQ‐based SRVCC trigger-
ing. In a field test, VoLTE cannot keep the quality clear when RSRQ becomes lower than −14 dB 
(according to UL BLER = 20% in Figure 11.98), so it is defined RSRQ −14 dB as a reference value 
of voice quality degradation. Portions below RSRQ −14 dB are 5% (in rural) and 10% (in high-
way) and VoLTE cannot guarantee good quality for these users.
11.8.6  SRVCC Failure
Outgoing SRVCC failures can be spotted by:
●
●S1AP UE context release command message received from MME with cause other than 
“Successful handover.”
UE
MME
Target 
BSS
Source 
eNB
P-GW
S-GW
UL & DL Payload PDUs
2. S1AP:HANDOVER REQUIRED
4. S1AP:HANDOVER COMMAND
5. RRC:MOBILITY FROM EUTRAN
UL & DL Payload PDUs
7. S1AP:UE CONTEXT RELEASE COMMAND
1. Decision to perform 
SRVCC to GSM
6. Detach from old cell and complete handover to GERAN
SGSN
3. Handover Preparation
TS1RELOCoverall
TS1RELOCprep
Handover Preparation
8. S1AP:UE CONTEXT RELEASE COMPLETE
Handover Completion
Handover Execution
Figure 11.96  TS1RELOCprep and TS1RELOCoverall.
www.ebook3000.com

LTE Optimization Engineering Handbook
544
●
●Reception of measurement report for a carrier with a higher priority than the one for which the 
SRVCC handover preparation is ongoing, that leads to cancel the ongoing SRVCC handover
●
●S1AP reset received from the MME or S1AP reset is eNB initiated.
●
●Reception of measurement report Event A1 “Leaving‐Coverage‐Alarm,” which leads to 
­cancel the ongoing SRVCC procedure due to radio reason.
●
●S1AP UE context modification with CS fallback requested is received from MME.
●
●A reactive offloading (or apreventive offloading) mobility preparation procedure is in pro-
gress and eNB sends a S1AP handover cancel message toward MME upon reception of S1 AP 
Originating UE
IMS
Terminating UE
INVITE
100 Trying
INVITE
180 Ringing
180 Ringing
200 OK
UPDATE
UPDATE
200 OK
200 OK
100 Trying
183 Session Progress
OPTIONS
200 OK
200 OK
200 OK
ACK
ACK
183 Session Progress
PRACK
200 OK
Voice/video session
Answer
Ringing
PRACK
QCI=1 establishment
triggered by 183,
ready when UE
sends UPDATE
SRVCC capability starts
Timewindow for active
call/held call SRVCC
Timewindow for 
alertphase SRVCC
Timewindow for
pre- alertphase
SRVCC
Figure 11.97  aSRVCC and bSRVCC.
–9
–10
–11
–12
–13
–14
–15
–16
–17
–18
Legend
Clear voice
Call drop
Partially
missing voice
Almost Missing
voice
–19
BLER[%].MCS[#]
100
90
80
70
60
50
40
30
20
10
RSRQ[dB]
0
UL BLER
–5.3
–6.1
–6.6
–7.1
–7.6
–8.1
–8.6
–9.1
–9.6
–10.1
–10.6
–11.1
–11.6
–12.1
–12.6
–13.1
–13.6
–14.1
–14.6
–15.1
–15.6
–16.1
–16.6
–17.1
–17.6
–18.3
–18.8
–19.3
–20.3
–19.8
Clear voice quality
UL MCS
Partially
missing
Almost
missing
Call
drop
RSRQ
Figure 11.98  Relation between RSRQ and UL BLER for VoLTE.

VoLTE Optimization
545
handover command without QCI1 bearer admitted or upon triggering of a procedure having 
higher priority – not applied for “CS only” SRVCC.
SRVCC failures causes include:
●
●Handover preparation failure (S1AP handover preparation failure received from MME)
●
●TS1RelocPrep for SRVCC handover to 2/3G timer expiry
●
●RRC connection re‐establishment on serving/other cell requested by UE
●
●TS1RelocOverall for SRVCC handover to 2/3G timer expiry
11.8.7  Reducing SRVCC Voice Gap and eSRVCC
Discontinuity of voice media flow (also called “voice gap,” which strongly impacts the user experi-
ence) caused by IRAT cell change from LTE PS domain to 2G/3G CS domain in UL and DL direc-
tions. Similar as intra‐LTE handover, UL/DL voice interrupt time on UE side can be calculated as:
●
●Begin: last RTP packet sent/received in source LTE cell
●
●End: first CS voice frame sent/received in target 2G/3G cell by listening UE
The voice interrupt time requirements are summarized in column “mean” of Table 11.38 for 
the UE side of handover preparation, handover execution, and voice interrupt times. The Min 
and Max (95%‐ tile) values and the network side latencies are given for orientation only.
11.8.7.1  Voice Interruption Time during SRVCC
With respect to SRVCC characteristics and voice interrupt time requirements, the estimations 
extracted from SRVCC staudies indicate that the voice break due to SRVCC can be comparable 
with CS handover figures (when SRVCC is executed in the home network). The objective is for 
the voice service interruption for a SRVCC handover to not be greater than 300 ms specified in 
the 3GPP requirement.21 The processing times/delay estimations of SRVCC performance in 
home network, include the following procedures:
●
●handover preparation: 600 ms (on pair with existing CS networks)
●
●handover execution: 110–200 ms (on pair with 2G‐ > 3G or 3G‐ > 2G handover in CS)
●
●IMS session transfer + remote end update: 140–430 ms in home network
Actually, speech interruption time is dependent on the packet handover interruption time 
and media buffers in the device and network. Due to the buffers, the speech interruption time 
may in some cases be smaller than the packet handover interruption. It means that voice break 
can be possible between 140 and 430 ms in home network depending on size of network and if 
the called user is on CS or LTE.
The expected SRVCC handover delay depends on how parallel the above three procedures 
take place. It shall be noted that the possible voice gaps that can be experienced are in general 
dependent on the time it takes from MSC sending an invite until 200 OK is received. In a 3GPP 
Release 9 architecture without any ATCF, the invite would reach a SCC AS that would have to 
perform a remote end (B‐party) SDP negotiation. When roaming or in cases with large dis-
tances between MSC, SCC AS, or when the remote party would be in another country or 
roaming, due to the distance traversing the nodes in the chain, the time could be more than 
21  3GPP TS 22.278, chapter 7.1.4: It shall be possible to support continuity of an established voice call, that is, 
between a TS11, TS12, and an equivalent PS service, when the UE moves between two different domains and RATs. 
The user experience shall be as far as possible unaffected by the change of domain and RAT. The RAT change 
procedure executed to enable service continuity for an established voice call shall target an interruption time not 
higher than 300 ms.
www.ebook3000.com

LTE Optimization Engineering Handbook
546
300 msec. With the ATCF and ATGW anchoring the call close to MSC (in serving network), 
the voice gaps will be reduced, the signaling and media’s route is shown in Figure 11.99.
Handover interrupt time is measured from the terminal by using speech or multitone 
­samples. Sample is send and recorded between subscribers from terminal audio port when 
handover takes place. Signaling related the executed handover will be recorded as well. Both 
directions (UL and DL) will be analyzed separately.
The downlink voice interruption is the interruption experienced by the UE performing the 
SRVCC handover, uplink voice interruption is measured in the remote UE which is the ­duration 
from the last voice packet received in the remote UE (sent from the SRVCC UE immediately 
before the handover) to the first voice packet from MSC/MGW received in the remote UE 
(immediately after the handover). The abstract formula is list below:
T
T
T
HOIT
DL
st packet received in SRVCC UE after SRVCC
last packet
1
received in the SRVCC UE before SRVCC
jitter buffer size
HOIT UL
T
T
T
T
st packet received in remoteUE after SRVCC
last packet receiv
1
ed in the remote UE before SRVCC
jitter buffer size
T
Table 11.38  The voice interrupt time requirements of SRVCC.
SRVCC procedure and Voice interrupt time [ms]
Field target
UE side
NW side
Handover Preparation (Measurement  
Report‐Handover Command)
Min
Mean
Max (95%‐tile)
Mean
LTE to 3G CS with PS Handover
517
520
550
500
LTE to 2G CS w/o DTM and PS Handover
463
470
500
495
Handover Execution (Handover  
Command‐Handover Complete)
LTE to 3G CS with PS Handover
234
240
280
300
LTE to 3G CS w/o DTM and PS Handover
285
290
340
350
Handover Completion(Handover Complete)
LTE to 3G CS with PS HO,PS ‐Until Update  
PDP Context Response
375
LTE to 3G CS with PS Handover, CS ‐Until  
SRVCC PS to CS Complete Acknowledge
90
LTE to 2G CS w/o DTM and PS Handover 
(w/o Suspend) ‐Until SRVCC PS to CS  
Complete Acknowledge
90
Voice Interrupt Time (last voice packet in  
LTE‐first voice frame in CS)
LTE to 3G, UL/DL
260/315
275/330
300/360
n.a.
LTE to 2G, UL/DL
310/370
325/385
350/410
n.a.
Notes:
1 The voice interrupt time is measured before jitter de‐compensation in the receiving UE.
2 Handover interrupt time to be measured during active speech periods.
3 The objective is for the voice service interruption for a SRVCC handover to not be greater than 300 ms specified in 
the 3GPP requirement.

VoLTE Optimization
547
Note that due to latency in the de‐jitter and play out buffer, the remote UE may still have 
voice frames that haven’t been played out yet when the handover commences and could, in 
reality, reduce the perceived interruption. However, the size of this buffer is typically not known 
and not accounted for in the HOIT measured interruption. The example is shown in 
Figure  11.100, the HOIT (VoLTE bearer) using QXDM logs is measured from mobility-
FromEUTRACommand to first UMTS vocoder packet.
Handover UL/DL interruption is shown in the Figure 11-101. Normally, eSRVCC effective 
HOIT test result in a live network is handover to 3G: HOIT DL is 230 to 320 ms, HOIT UL is 
370 to 400 ms; handover to 2G: HOIT DL is about 410 ms, HOIT UL is about 420 ms. As com-
pared with a reference CS handover interruption times in lab: WCDMA handover to GSM: DL 
is about 125 ms, UL is about 200 ms; GSM handover to WCDMA: DL is about 140 ms UL is 
about 210 ms (Figure 11.101).
UE
P-CSCF 
ATCF
Target 
MSS
Nb
eNb
RNC
CS GW
IM GW
ATGW
S-/PGW
UE
SRVCC 
MSS
S-CSCF
SCC AS
Control
Plane
User
Plane
Before HO
After HO
HO request
HO request
HO request
HO resp.
HO resp.
HO Command
HO Command
INVITE
HO detect
HO complete
OK
Tprep
Texe
Prepare HO
IMS session transfer + remote end update
Execute HO
Voice break
Determined by HO 
execution
ATCF
eMSC
MME
Target RAN
EUTRAN
UE
Figure 11.99  Voice gap and signaling and media’s route.
www.ebook3000.com

LTE Optimization Engineering Handbook
548
Except difference between terminal vendors and test tools, the impacted factors of HOIT of 
network level include:
●
●SRVCC‐MSS and target‐MSS are in the same network element or not
●
●VoLTE termimal transfers to 3G or 2G
●
●SCTP or TCP protocol used in network
●
●Original call type is VoLTE to VoLTE, or VoLTE to CS, or VoLTE to PSTN before handover
●
●Transcoding free call changes to transcoding call after handover vs. staying transcoding free
●
●Packet connection during handover vs. no packet connection
The performance of SRVCC handover is mainly dependent on the delay brought by the 
call to SCC AS and remote update procedure. SRVCC voice break in visited network might 
increase depending on the need to perform IMS session transfer + remote end update 
toward the home network. Voice gap in SRVCC can be controlled by minimizing signaling 
delays between the MSC and the “remote leg” pivot point. In Figure 11.102, we can make 
an assumption that step a1 is performed by MSC enhanced for SRVCC at the same time 
with step b1, or within a neglectable short period, so transmission time for IMS bearers is 
short enough to be neglected.
2013 Feb 20  22:35:49.509  [24]  0x7144  UMTS DL (Rx) 
Vocoder Packet Characteristics v2
Mode: AMR-NB
Encoded Flag Word = 0x0007 ( Speech Good 12.2kbps )
Data: 0xAD36 0xE78C 0xA037 0x6687 0x2F0F 0x122D 
0x12B0 0x79E5 
0xBE58 0x6131 0x2DF7 0x7A41 0xDE12 0xCB1C
0x0726 0x5000 0x0000 
2013 Feb 20  22:35:49.066  [1F]  0xB0C0  LTE RRC 
OTA Packet  -- DL_DCCH
Radio Bearer ID = 1, Physical Cell ID = 435
Freq = 2100
value DL-DCCH-Message ::= 
{
message c1 : mobilityFromEUTRACommand : 
{
rrc-TransactionIdentifier 0,
criticalExtensions c1 : 
mobilityFromEUTRACommand-r8 : 
{
cs-FallbackIndicator FALSE,
purpose handover : 
{
targetRAT-Type utra,
targetRAT-MessageContainer 
'1031027C600883C25B20020A2801E794'H,
nas-SecurityParamFromEUTRA '0A'H
}
}
}
}
2013 Feb 20  22:35:49.533  [25]  0x7143  UMTS UL
(Tx) Vocoder Packet Characteristics v2
Mode: AMR-NB
Encoded Flag Word = 0x0007 ( Speech Good 12.2kbps )
Data: 0xE304 0x3FBA 0xF849 0x6000 0x0000 0x0018 
0x5B3D 0x63F5 0x8869 0x58AD 0x99BD 0xAD49
0xB04F 0x5D24 0x9F5E 0x5000 0x0000
DL
UL
Figure 11.100  HOIT measurement.
MME
SRVCC MSS
SCC AS
HO command
Relocation detect
UE sends UL 
packets to 
eNB
UE sends UL 
packets to NB
UL interrupt
time
INVITE
Mod Term
DL packets 
send to 
eNB
DL interrupt
time
VoLTE call
CS call
Handover
200 OK
Mod Term
DL packets 
send to NB
UE
MGW
Figure 11.101  Handover UL/DL interruption.

VoLTE Optimization
549
Analysis
●
●Interruption time of the downlink flow: Td = MAX (Ta1 + Ta2 + Ta3 + Ta4, Tb3)
●
●Interruption time of the uplink flow: Tu = MAX (Ta1 + Ta2 + Ta3 + Ta4, Tb3)
●
●Optimum: max(Td, Tu) = Tb3
For SRVCC, call legs for RAN and IMS are setup independently, which is shown in 
Figure 11.103. So, in a live network, it is possible that silence may occur during SRVCC hando-
ver until call is end‐to‐end completed. This silence will be noticeable if the IMS handover call 
leg and RAN handover call leg differ too much, and this may be troublesome for inter‐­
continental roaming cases.
11.8.7.2  eSRVCC
In theory, SRVCC HOIT is able to meet the requirements specified in 3GPP Rel 8 TS25.913, 
that is, less than 300 ms (handover to 2/3G) in bearer level, but its session conversion process 
can not be completed in 300 ms, thus resulting the voice interruption time is more than 300 ms. 
In this case, the SRVCC feature have evolved between 3GPP Rel 9 and 10, the main intention 
of the SRVCC Rel 10 work was to lower the voice interuption delay (200 ms) and handover of 
calls in alerting state and held calls. By using a different technique, known as enhanced SRVCC 
(eSRVCC), to pivot closer to the MSC is supported in the procotocal of 3GPP 24.237 Rel 10 that 
reduces the bearer switching delay during the SRVCC handover. The difference of eSRVCC 
UE
MSC
MGW
Remote
a4.200 OK
b1.HO CMD
Downlink
IMS Bearer before HO
Uplink
a1.Invite
Downlink
SCC AS
a3.Answer
a2.Offer
MME
/eNodB
b2.HO CMD
Uplink
IMS Bearer after HO
b3.Tune to CS
CS Bearer after HO
Figure 11.102  SRVCC voice break in visited network.
RAN
UEA
MME
MSC
BSS/UTRAN
IMS / AS
UEA
MSC
MME
RAN
IMS HO call leg
RAN HO call leg
The time to access the remote
end may vary drastically
(HPLMN vs inter-continental roaming)
Remote end change to MSC
port instead of UE port (silence...)
UE change to a 2/3G cell
(silence...)
SRVCC HO request triggered by eNB
Split up of SRVCC HO in to
two separate call legs
Remote end (UEB)
Find IMS Session
Figure 11.103  Call legs during SRVCC.
www.ebook3000.com

LTE Optimization Engineering Handbook
550
and SRVCC is the introduction of a new anchor for the SRVCC domain transfer in eSRVCC, 
ATCF (acess transfer control functionality) and ATGW (access transfer gateway), the anchor 
point of the IMS call leg is moved to the ATCF which is much closer to the MSC, ATGW con-
trolled by the ATCF is the media anchor for sessions that are subject to to eSRVCC. ATCF 
controls the media switch in ATGW at session transfer via H.248 interface and provides the 
main anchoring in the serving network and the SCC‐AS provides anchoring in the home 
­network. Based on the local policy of the serving network, the ATCF is included in the session 
control plane for the duration of the call before and after access transfer.
The main idea of eSRVCC is to anchor the media (user plane) in one point in network. 
SRVCC and eSRVCC comparison is shown in Figure 11.104. SRVCC and eSRVCC data flow 
are shown in Figure 11.105 and Figure 11.106.
Requirement for SRVCC and eSRVCC of each network entity is shown in Table 11.39.
After transfer
Serving Network
UE
After transfer
UE
Home Network
MSC
Server
Before transfer
Remote 
End
I/S-CSCF,
SCC AS
Network of remote party
I/S-CSCF,
SCC AS
Figure 11.105  SRVCC data flow.
3GPP R8/R9 solution 
3GPP R10 solution 
bearer path after SRVCC handover
bearer path before SRVCC handover
PDN GW
CS MGW
B-Party
Handover
B-Party
ATGW
Stable bearer leg between
ATGW and B-Party
CS MGW
A-Party
Handover
PDN GW
Figure 11.104  SRVCC and eSRVCC comparison.
After transfer
Serving Network
UE
Remote
Leg
Home Network
MSC
Server
UE
Before transfer
Remote 
End
ATCF
ATGW
I/S-CSCF,
SCC AS
Network of remote party
I/S-CSCF,
SCC AS
After transfer
Figure 11.106  eSRVCC data flow.

VoLTE Optimization
551
Table 11.39  Requirement for SRVCC and eSRVCC.
Product
Requirement for SRVCC
Requirement for eSRVCC
eNB
●
●SRVCC to 2,3G
●
●Same as in SRVCC
●
●EPS bearers for conversational voice
●
●Support of multiple EPS bearers
MME
●
●Sv interface MME‐MSS
●
●Same as in SRVCC
●
●SRVCC to UTRAN with or without PSHO
●
●SRVCC to GERAN without PSHO
●
●SRVCC to GERAN with suspend
●
●Indication of SRVCC capability of UE and 
MME to eNB
●
●Indication of SRVCC support to HSS
●
●Retrieve the STN‐SR from HSS during LTE attach
●
●STN‐SR update from HSS
SAE GW
●
●QCI 1 dedicated bearer relase with SRVCC 
indication
●
●Same as in SRVCC
SGSN
●
●RAU handling in SRVCC
●
●Same as in SRVCC
MSS
●
●SRVCC to 2G/3G– 3GPP rel8 support needed 
(mid‐call optional)
●
●SRVCC to 2G/3G– 3GPP rel10 
support needed (mid‐call optional)
Trfo/TFO (optional)
●
●TrFO/TFO (optional), transcoding 
possibility in case not chosen to be in 
ATCF/ATGW
●
●Sv, Mg/Mj (co‐located)
●
●Mw interface (colocated with Mg/Mj)
MGW
●
●IR.92 service profile for IMS – CS interworking
●
●Same as in SRVCC
EPC HSS
●
●To provide STN‐SR to MME during LTE‐attach, 
and updated value in case SCC AS (over Sh)/
provisioning request arrives.
●
●Support for Sh mandatory
Support for STN‐SR over Sh optional
VoLTE AS
●
●SCCAS with SRVCC
●
●SRVCC to 2G/3G– 3GPP rel10
●
●Sh for STN‐SR because of AS pooling (optional)
●
●STN‐SR, UE SRVCC capabilities 
queried over Sh
●
●Ma‐interface between SCC AS and 
I‐CSCF
●
●Control of selected AMR mode set to 
avoid transcoding (optional)
I/S‐CSCF
●
●VoLTE
●
●Delivery of “Embedded 
register/200OK” to SCC AS over ISC
●
●Routing of session transfer call to correct 
serving SCC AS
●
●Ma‐interface between SCC AS and 
I‐CSCF
P‐CSCF
No depedency
●
●ATCF, possibly transcoding as well if 
not chosen to be done in MSS
BGW
No dependency
●
●ATGW
PCRF
●
●QCI as basic requirement
●
●Same as in SRVCC
●
●PCC rules removal for QCI 1 with SRVCC 
indication
www.ebook3000.com

LTE Optimization Engineering Handbook
552
VoLTE solution includes the ATCF and ATGW IMS functions to provide seamless and rapid 
call handover between LTE and circuit‐switched 2/3G mobile networks. eSRVCC improves the 
setup times of the IMS call leg. Still the interruption time is mainly depending on the setup of 
the IMS call leg, which very much depends on the IMS architecture. eSRVCC structure is 
shown in Figure 11.107.
The ATCF receives the call from the MSC server, and based on the session transfer number 
finds the voice stream (and optional other streams) associated to the transferred call. If additional 
streams are associated with the call, the SCC AS initiates closure of streams associated to the 
call via a session renegotiation with the remote network. The ATCF instructs the ATGW to 
route voice media to the target MSC instead of to the LTE access leg. In this case, part of the 
access transfer functionality of the SCC AS is moved to the serving network. Anchoring of the 
session and media is done in the serving network, to avoid remote end update. eSRVCC handover 
procedure is shown in Figure 11.108.
When UE in LTE with established call to remote subscriber, ATCF is inserted in the signaling 
path, ATGW is inserted in user plane. When eNB decides handover is required and sends 
request to MME, MME will send request to MSC enhanced with Sv interface, MSC prepares 
handover, signals RNC, and initiates call to ATCF using STN‐SR. ATCF acknowledge the MSC 
invite and configures the ATGW to switch LTE leg by MSC leg, ATCF forwards the MSC invite 
to the SCC‐AS using ATU‐STI (Figure 11.109).
11.8.8  Fast Return to LTE
After a successful IRAT handover to 2/3G, the UE can continue his call in the 2/3G network. 
The UE is re‐directed to LTE directly after the call ended when the fast return was active on the 
2/3G cell where the speech call was ended. If fast return has been enabled in the 2/3G cell, the 
call is being re‐directed to the LTE frequencies as indicated in the channel release message in 
the 2/3G cell (Figure 11.110).
Fast return time can be calculate from start RR signaling “channel release,” to end TAU 
­complete in LTE.
IMS
IMS Core
E-UTRAN
eNB
HSS/HLR
TAS
RNC/BSC
NB
MSC
SCC AS
MGCF
P-CSCF
ATGW
PCRF
ATCF
MGW
Signaling
Voice media
Enhanced Packet Core
(Voice + Data)
PGW
SGW
MME
SGSN
GERAN
UTRAN
Figure 11.107  eSRVCC structure.

BTS
eNB
S&P
GW
MME
BSC
SCC AS
P-CSCF
ATCF
eMSC
/MGW
ATGW
B
I/S-
CSCF
Visited network
HO request
Signaling
voice media
A
Sv
SRVCC
handover
1 eNB decides 
eSRVCC HO
2 MME sends HO 
required message to 
eMSC via Sv (STN-
SR,LAI,C-MSISDN)
3 eMSC and BSC reserve resources. eMSC sends 
call setup request to ATCF by STN-SR
7 Session transfer by (ATU-
STI,C-MSISDN)
Home network
4 ATGW sends media 
update to eMGW
5 UE setup media 
connection
S11
Mb
Mb
Gm
Mw
8 SCC AS response to 
ATCF with SSI
9 ATCF sends eMSC SSI
HLR
6 After HO, eMSC send 
location update to HLR
MME
Figure 11.108  eSRVCC handover procedure.
www.ebook3000.com

UE
(A-Party)
CSCF 
(B-Party)
MME
eNB
BSC/RNC
Measurement 
Reports
2. Handover 
Required
3.PS-to-CS Request
(IMSI, Target-ID, STN-SR)
8. PS-to-CS
Response
9. Handover
Command
10. Handover
Command
12. Handover
Complete
13.PS-to-CS
Complete/Ack
18. SIP BYE
ATCF configures ATGW with SDP = MGW which
switches the bearer from PDN-GE (LTE)
to the MGW (CS)
5. SIP Invite
(STN-SR, SDP =MGW)
SCC-AS 
(A-Party) 
Deactivation of Dedicated EPS Bearer for VoIP
UE 
(B-Party)
I-/S-CSCF 
(A-Party)
MGW
ATCF /
ATGW 
(A-Party)
P-CSCF 
(A-Party)
6. SIP 200 OK
7. SIP ACK
15. SIP Invite (without SDP update)
16. SIP 200 OK
17. SIP ACK
the SCC-AS initiates the release of 
the old leg in the LTE access. 
the P-CSCF informs the PCRF which informs the PDN-
GW, which deactivates the Dedicated EPS Bearer
that was used for VoIP over LTE
Dedicated EPS Bearer Setup for VoIP packets 
Media Path (voice)
4. Handover
Request/Ack
Media Path
(voice)
MSC-S
14. MAP Update 
Location 
in HSS/HLR
Figure 11.108  (Continued)

VoLTE Optimization
555
11.8.9  Roaming Behavior According to Network Capabilities
If a UE requires for IMS roaming and if Ravel (or home routing) is available in the visited 
­network, the VoLTE call can be set. If IMS is not supported for roaming, the UE requires CSFB, 
and if CSFB is available in a visited network, roaming voice service operates in the visited 
­network with the same restrictions as in today’s roaming environment (Figure 11.111). If a UE 
requires CSFB and CSFB is not available in a visited network, the UE will disable E‐UTRAN 
capability and select a GERAN/UTRAN network (3GPP TS 23.221 Annex A).
11.9  ­Network Quality and Subjective Speech Quality
Traffic profile in packet switch domain is substantially altered once VoLTE calls are served on 
PS bearers. Average call holding time in PS domain was just 5 seconds, while peak bit rate could 
reach 100 Mbps. VoLTE average call holding time is 90 seconds, but call will reach just up to 
24 kbps bit rate. VoLTE calls don’t consume much bandwidth, but use a lot of the time. For 
example, in some network, 6 months after LTE launch less than 5% data volume (in bits) results 
MSS initiates the session transfer call towards the
ATCF/SCC AS using received STN-SR
STN-SR
MME
MSS
(SRVCC)
I-/S-
CSCF
ATCF/
P-CSCF
Sv
STN-SR
ATCF generates the dynamic STN-SR when user
registrates and provides it to IMS/SCC AS
Figure 11.109  ATCF function.
QCI = 8, internet
QCI = 8, internet
QCI = 5, IMS signaling
QCI = 5, IMS signaling
QCI = 1, Speech
LTE
Speech
Speech
GSM
LTE
TA
Update
WCDMA
SRVCC handover
(CS only)
1
2
3
6
7
5
4
Ending call on GSM will lead
to Fast Return to LTE
(in case of LTE coverage)
IRATHO
Disconnect
Fast Return to LTE
Figure 11.110  Fast return to LTE.
www.ebook3000.com

LTE Optimization Engineering Handbook
556
from VoLTE, and more than 50% data bearer active time (in call seconds) results from VoLTE. 
From subjective speech quality point of view, VoLTE traffic impact on PS domain is different 
from data traffic, which is shown in Table 11.40.
In VoLTE, digitized voice must share network resources with a variety of other bandwidth‐
hungry services. Although LTE uses a QCI to prioritize the delivery of less tolerant media such 
as voice and video, VoLTE performace will degade due to congestion, misconfigurations and 
conflicting, and so on. When this happens, packet loss, jitter, and delay and sequencing errors 
can surface resulting in a poor audio experience for the subscriber. The suggested KPI of VoLTE 
is given in Table 11.41.
Hence, continuous coverage, optimized mobility, balanced DL and UL, reduced overlap and 
interference is desired in VoLTE performance. The whole voice quality building blocks is sum-
marized in Figure 11.112, similar VoLTE end‐user requirements as 3G voice.
Voice service needs full duplex functionality and is very sensitive to jitter, delay, and packet 
loss. VoLTE requires LTE enhancements such as to guarantee the voice quality of VoIP, ensure 
the QoS of VoIP, which involves the parameters or indicators mainly include the following 
aspects, coding rate, guaranteed bit rate, packet loss rate, ARP‐priority level, ARP‐preemption 
capability, and so on.
VoLTE speech quality consists of subjective and objective speech quality estimations, speech 
path delay (SPD), and frame error rate (FER) measurements. For VoIP capacity evaluations, 
which is defined as the number of users in the cell when more than 95% of the users are satisfied, 
UE is set to IMS
voice preferred,
CS voice
secondary
UE initiates EPS
attach procedure
(non combined)
 Not
supported
Voice centric
Data centric
UE checks for
voice centric or data
centric setting
UE performs
combined TAU for
CSFB as in TS
23.272
UE checks for IMS
voice supported
Indication from
Network
UE reselects to
other RAT
UE stays in current
RAT
UE uses CSFB
UE uses IMS
Voice
Supported TAU performed
Success with no “SMS -only”
and no “CSFB
Not Preferred” indication
Fail or Success with “SMS only”
indication or Success with
“CSFB Not Preferred” indication
Figure 11.111  Roaming behavior.

VoLTE Optimization
557
a VoIP user is in outage (not satisfied) if 98% radio interface tail latency of the user is greater 
than 50 ms. This assumes an end‐to‐end delay below 200 ms for mobile‐to‐mobile communications. 
Tha factors of speech quality estimation and VoIP capacity evaluation described in Chapter 11.5 
are shown in Figure 11.113 and Figure 11.114.
Table 11.40  VoLTE traffic impact on PS domain.
PS domain – Data traffic
PS domain – VoLTE traffic
Coverage
Bearer rate depends on received 
power and interference
If RF is not good enough, VoLTE call will fail and 
subscriber will be stacked (when RF condition is 
bad, eNB and UE will allocate big number of PRB 
and UE tx power)
Accessibility
On call failure, new call request 
will be initiated soon after, impact 
to subscriber is just delay
On call failure, subscriber will have to dial again
Retainability
On call drop, new call request will 
be initiated soon after, impact to 
subscriber is just less throughput
On call drop, subscriber will lose connection and 
will have to dial again
Mobility
At 5 sec mean call holding time 
mobility is reduced, and HO as 
little impact on performance
At 90 sec mean call holding time, mobility is 
important. HO will have impact on quality 
including data interruption during handover. 
Reaching out of coverage will result in dropped call 
and connection.
Signaling
Utilization of common channels 
for signaling, less idle time
Signaling need optimization: RRC state transition 
optimization
Signaling features: DRX in RRC connected and 
smart DRX
Table 11.41  Target VoLTE experience KPIs.
No.
KPI name
Source
Target values
1
MOS: VoLTE to VoLTE WB12.65/12.2NB
Drive test
>3
2
Speech path delay
Drive test
<200 ms
3
Call setup time (ECM connected mode)
Drive test
<4 Sec
4
Handover interruption time (CP + UP)
Drive test
<200 ms
5
Jitter of Rx RTP packet
Drive test
<60 ms
6
IMS registration
Drive test
<2 Sec
7
Packet loss rate
Drive test
<1 %
8
SRVCC Interruption time
Drive test
<300 ms
9
Drop call rate
OSS Stats
<1%
10
Access failure
OSS Stats
<1 %
11
SRVCC success rate
OSS Stats
>98.5%
12
Handover success rate
OSS Stats
>99%
13
UL/DL BLER
OSS Stats
<10 %
14
Paging success rate
OSS Stats
>99%
www.ebook3000.com

LTE Optimization Engineering Handbook
558
To ensure the voice quality, in addition to the wireless side as far as possible to ensure that the 
best wireless resources, the most timely and adequate scheduling allocation. Terminal capacity 
and core network transmission also need to ensure the service quality. The terminal coding and 
decoding ability, and code rate adaptive adjustment also need to ensure the smooth and quality 
of the whole service.
The overall service KPIs can be calculated as described in Table 11.42. The KPIs shall have 
effects on the solution from all areas in RAN, EPC, and IMS domain as well as the transport 
network and the VoLTE UE itself, like, IMS registration latency, IMS registration success ratio 
(%), call setup success ratio (%), call completion success ratio (%), call setup time, intra‐LTE 
handover media interruption time, intra‐LTE handover success ratio (%), and voice/video quality, 
and so on. VoLTE KPIs considered below are the measurable performance indicators from 
driving test.
11.9.1  Bearer Latency
One of paramount importance for VoLTE is the ability to achieve end‐to‐end delay for voice 
packets such that the delay meets user expectations. In order to maintain the voice quality of 
wireless VoIP network, we need to maintain the mouth to ear user plane delay to be less than 
Speech Codec
Frame loss
Hand-over interruption
Network Echo Canceller
Acoustic Echo Canceller
Noise Reduction
Microphone
Speaker
Delay
Audio Fidelity
Speech level
Audio Level Compensation
Call Set-up
Hand-over
Voice
Voice
Call Release
Jitter Buffer Management
Figure 11.112  The factors affecting the performance of VoLTE.
Conversational speech quality
Codec, Jitter, 
Echo canceller etc.
Frame 
Error Rate
Speech path delay
Scheduling, RLC transmission,
SINR, cell loading, etc.
Figure 11.113  Speech quality estimation.
Packet
loss Rate
Dejittering
delay
Packet
size
Codec
Header
compression
Capacity
Voice quality
Figure 11.114  VoIP capacity evaluation.

VoLTE Optimization
559
Table 11.42  VoLTE KPIs calculation.
KPI
Measurement definition
IMS Initial Registration Time
IMS Registration Delay [ms] = T200 OK – TREGISTER
Call Setup Time
VoLTE – VoLTE
Call Setup Delay [ms] = T180 Ringing – T invite
Call Setup Time VoLTE – PSTN or 
CS PLMN
Call Setup Delay GSM/UMTS MO [ms] = TCC Alerting – T CM Service 
Request
Call Setup Delay 1xRTT CDMAMO [ms] = TService Connect Complete – T 
Origination
Call Setup Delay PSTN MO [ms] = TRingback Tone received – T Last DTMF 
digit sent
Call Setup Time
VoLTE – ICS
Call Setup Delay GSM/UMTS MO [ms] = TCC Alerting – T CM Service 
Request
Call Setup Delay 1xRTT CDMAMO [ms] = TService Connect Complete – T 
Origination
Call Setup Delay PSTN MO [ms] = TRingback Tone received – T Last DTMF 
digit sent
Call Setup Time – VoLTE 
Emergency Call
Call Setup Delay normal emergency call [ms] = T180 Ringing – T PDN 
Connectivity Request
Call Setup Delay emergency call in limited service mode [ms] = T180 
Ringing – T Attach Request
Conversation Start Delay
Conversational Start Delay [ms] = T1st RTP packet in either 
direction – T200 OK
Voice Quality
Voice quality [MOS‐LQOSWB] = f (codec type, mode/bit rate, 
frame loss,PLC, time scaling, jitter)
Speech Path Delay
Speech Path Delay = T analog event received – T analog event transmitted
RTP Delay
Averageone wayRTP delay
-
a
b
N
j
j
j
N
2
1
.
Intra‐LTE Handover Media 
Interruption Time
THOIT ‐UL [ms] = T1st frame received in remote UE after HO – T last frame received 
in the remote UE before HO – T jitter buffer size
THOIT ‐ DL [ms] = T1st packet received in HO UE after HO – T last packet received in 
the HO UE before HO – T jitter buffer size
Video Quality
Video quality [MOS‐VQO] = f (codec type, encoded bit rate, 
frame rate, image size,frame loss, FLC, resolution, GoP structure/
contents,time scaling, jitter)
Video Path Delay & A/V Sync
Video Path Delay [ms] = T video frame captured in sending UE – T video frame 
viewed in receiving UE
A/V Sync [ms] = T video frame viewed in receiving UE – T audio frame played in 
receiving UE
SRVCC HOIT Control Plane UMTS
Texe [ms] = THandover Complete – TMobilityFromEUTRACommand
Tupd [ms] = T200 OK – Tinvite – T1
THOIT Control Plane [ms] = max {Texe | Tupd}
www.ebook3000.com

LTE Optimization Engineering Handbook
560
about 200 ms make user very satisfied and less than about 280 ms make user satisfied. Speech 
path delay has a very significant impact on end‐user perception and too long of a delay results 
in cross talk between the users. This is defined in ITU G.114 guideline. In order to measure 
voice satisfaction, the end‐to‐end delay is also important. To keep the delay low it might be 
better to use a higher minimum MCS to reduce overhead and buffering in the UE (Figure 11.115).
There are five major call cases in VoLTE calls, in which end‐to‐end delays are different: 
VoLTE to VoLTE, VoLTE to landline non‐VoLTE, landline non‐VoLTE to VoLTE, VoLTE to 
mobile non‐VoLTE and mobile non‐VoLTE to VoLTE. Take VoLTE‐VoLTE call, for example, 
for LTE network latency components, define maximum latency for 95% of calls: AMR encoding, 
LTE air uplink and downlink including de‐jittering, eNB to PGW (both ends), PGW to SBC 
(both ends), SBC (session border controller) to SBC, and AMR decoding, which is shown in 
Figure 11.116 and Table 11.43.
A session border controller (SBC) is a device regularly deployed in VoIP networks to exert 
control over the signaling and the media streams involved in setting up, conducting, and tear-
ing down telephone calls or other interactive media communications. It connects the operators 
LTE and CS networks to the IMS network and provides also connection to the peering IMS 
networks. Its location is in the access network border that is optimal to support the ATCF and 
ATGW functions as well (Figure 11.117).
An example from field test in a live network includes: the average E2E latency (voice media 
latency) is 273 msec, 6 VoIP user in a cell (2 AMR‐NB user at cell edge and 4 AMR‐NB user at 
cell center).
From the field test, we also can see that the more path loss, the longer packet latency. In 
Figure 11.118, 98th percentile for packet latency started to increase at path loss 137 dB, at 
137 dB, the packet latency 98th percentile increased by about 68 msec compared to 136 dB. 
Besides, vertical range of the latency reflects the jitter at each path loss. It is found that at path 
loss 136 dB, the Jitter range is 56 ms, at path loss 137 dB, the Jitter range is 124 ms.
Assume the VoLTE E2E packet delay requirement is in the order of 250 ms; as an example, if 
the delay for the core network is approximately 100 ms, the acceptable delay for MAC buffer-
ing/scheduling and detection must not exceed 250‐100 = 150 ms. For an LTE to LTE VoIP 
­session, the one‐way delay for MAC buffering and scheduling must be kept within half of the 
above RTT. The acceptable LTE air interface delay is approximately 50 ms. For LTE FDD, the 
0
2.00
MOS
2.50
3.00
3.50
4.00
4.50
50
100
150
200
250
300
350
400
450
time delay (ms)
3%
2%
1%
0%
3%
2%
1%
packet loss = 0%
Figure 11.115  Bearer latency versus MoS.

VoLTE Optimization
561
average HARQ RTT is approximately 8 ms and thus a maximum of 6 HARQ retransmissions is 
acceptable for a VoLTE packet. In the uplink, at most 1 HARQ retransmission is allowed and 
this corresponds to 40 ms HARQ RTT with 10 ms TTI. Figure 11.119 gives a field test of packet 
level air interface delay, the average air delay is 43 msec, 6 VoIP user in a cell (2 AMR‐NB user 
at cell edge and 4 AMR‐NB user at cell center).
In conclude, from VoLTE E2E packet latency detailed analysis, assuming the turning point at 
packet loss rate > 2% or Jitter range > 60 ms (Jitter range = packet latency 98th percentile – minimum 
packet latency), that performance metrics will have a turning point at path loss value of 137 dB.
11.9.2  MoS
11.9.2.1  Voice Quality
Speech quality is one of the most important factors for the attractiveness of a speech service. 
Voice quality in VoLTE is measured using the MoS score (Mean opinion score). A pre‐recorded 
audio signal is compared with the VoLTE audio recorded at the UE—an industry standard 
algorithm such as POLQA (perceptual objective listening quality assessment, also known as 
Table 11.43  VoLTE‐VoLTE voice bearer delay analysis.
Delay component
Delay
Source
Packetization and codec
35 ms
20 ms packetization, 10 ms codec processing, 5 ms look‐ahead
SBC proccessing
3 ms
ACME packets requirement
Jitter buffer and decoding
50 ms
40 ms dejitter, 10 ms codec processing
Air interface to PGW both 
directions
RTT
Path taken by the packets and equipment processing same as RTT
Mouth
RLC
PDCP
MAC
PHY
RLC
PDCP
MAC
PHY
UDP/IP
GTP-U
L2
L1
eNB
UDP/IP
GTP-U
L2
L1
IP
SGW/PGW
IP
SBC
AMR encoding 
latency:35 ms
RTP/UD
AMR
IP
Ear
RLC
PDCP
MAC
PHY
RLC
PDCP
MAC
PHY
UDP/IP
GTP-U
L2
L1
eNB
UDP/IP
GTP-U
L2
L1
IP
SGW/PGW
IP
SBC
AMR decoding
latency:5 ms
RTP/UD
AMR
IP
LTE UL latency
(LTE UL + LTE DL, including 
de-jittering)
Transport, 
eNB to PGW
Transport, 
PGW to eNB
Transport, PGW to 
SBC
LTE DL latency
(LTE UL + LTE DL, 
including de-jittering)
Transport, SBC to 
PGW
Figure 11.116  VoIP latency.
www.ebook3000.com

LTE Optimization Engineering Handbook
562
6 VoIP (2VoIP AMR-NB @ EC + 4 VoIP AMR-NB @NC)
Voice Media Latency for EC users
0
50
100
150
200
250
300
1
4
7 10 13 16 19 22 25 28 31 34 37 40 43 46 49 52 55 58
Instance
Mouth-to-Ear VML (msec)
VML (msec)
273
270
275
1
Std Dev
Maximum
Mean
Minimum
Figure 11.117  An example of E2E latency from field test in a live network.
900
800
700
600
500
400
300
200
100
0
122
123
124
125
126
127
128
129
130
131
132
DL Pathloss (dB)
Latency [ms]
133
134
135
136
137
138
139
140
141
142
Packet Latency 98th percentile
started to increase
Avg-StDev
Avg
Avg+StDev
98%
E2E Latency
Figure 11.118  Packet latency and Jitter versus path loss.
6 VoIP (2 VoIP AMR-NB @EC + 4 VoIP AMR-NB @ NC)
E2E VoIP Packet Latency, VQ Harvard Sentences
0
10
20
30
40
50
60
70
80
90
100
1
5001
10001
15001
Packet Index
Delay (msec)
Avg
39.64015428
min
19.962
max
86.817
stdev
9.156980575
median
43.097
Figure 11.119  An example of air interface delay from field test in a live network.

VoLTE Optimization
563
ITU‐T Rec. P.863) is used to compare the two audio files and MoS is calculated. POLQA is a 
perceptual method, which transforms the original and degraded speech signals into a psycho-
physical representation that approximates human perception and maps this into an objective 
MoS score; it is designed to handle new types of degradations (codec conditions and network 
specific degradations) and is also designed to improve known PESQ weaknesses (wideband 
versus narrowband, variable delays, strong linear distortion, support for all standardized and 
commercial codecs, etc.). This metrics provides a MoS‐LQO score in the range 1 to 5. The 
evolution of ITU‐T recommendations for voice quality testing is shown in the Figure 11.120, 
which is from 3GPP TR 26.976.
ITU‐T also recommendates E‐model with R‐factor, which is a non‐perceptual method by 
general physical or technical measures, combines a number of values measuring the effect 
of various network impairments such as codec bitrate, jitter, packet loss as well as mouth‐
to‐ear delay, which contributes to conversational quality (Figure 11.121 and 11.122).
The calculation of MoS values presumes the measurement of end‐to‐end voice delay, jitter 
and packet loss over the LTE network (UE R interface), and optionally the measurement of 
voice frame error rates (if supported by the terminal and voice decoder used). The relation 
betweem MoS and frame error rate is shown in Figure 11.122.
The POLQA model is a full reference22 perceptual model of the next‐generation voice quality 
testing technology for fixed, mobile, and IP‐based networks, that is, the media payload is analyzed 
(perceptual) and a reference source and the impaired target are compared (full reference). 
A pre‐defined reference file with speech samples is injected into the originating UE, traversing 
22  Some methods of objective quality assessment compare the signal presented to the end user with the original 
signal. The original then serves as a reference against which the end‐user’s signal is measured. If a video frame 
presented to the viewer is identical to the original, the highest possible score is obtained for that frame. The more the 
original has been distorted, the lower the score. A no‐reference method, in contrast, deals only with the received 
signal by judging the quality of the received signal on its own merits.
1996
ITU-TP.862
02/2001
Speech codecs
Variable Delay
E2E Network
Quality
PESQ
MOS-LQO
P.862.1
11/2003
MOS Mapping
for Mobile
Network
Benchmarking
POTS
Wide-band (WB)
7kHz
Super-wide-band (SWB)
14 kHz
Narrow-band (NB)
3.4 kHz
2000
2005
2010
P.862.2
11/2005
Wide-band
Extension
to 7 kHz
P.862.3
PESQ
Application Guide
11/2005
PESQ-
WB
POLQA
P.863 (draft)
2010
HD Voice
Speech Codes
E2E Network
Quality
Variable Delay and
Time Scaling
Level & Linear
Filtering Effects
Acoustical
interfaces
POTS and HD Voice
(NB and WB/SWB)
VQE Enhanced
Networks
Enhanced Accuracy
of MOS Prediction
PSQM
PESQ
ITU-TP.861
08/1996
(Withdrawn)
Speech codecs
Fixed Delay
Figure 11.120  Evolution of ITU‐T recommendations for voice quality testing.
www.ebook3000.com

LTE Optimization Engineering Handbook
564
over LTE/EPC and received in the terminating UE. The POLQA algorithm compares the 
reference speech samples sent from the originating UE and the impaired speech samples 
received at the terminating UE. A quality estimate, MoS‐LQO SWB is produced representing 
the POLQA score.
VoLTE speech quality consists of subjective and objective speech quality estimations, speech 
codec, discontinuous transmission (DTX), network echo canceller, speech path delay (SPD) 
and frame error rate (FER) measurements. The abstract formula for an objective and perceptual 
voice quality metrics model is as below (Figure 11.123):
	
Voice quality
f
codectype mode bit rate frameloss IP pack
 
 
 
 
 
,
,
/
/
et loss
packet loss concealment time scaling jitter
 
 
 
,
,
,
	
100
90
80
70
60
50
100
220 ms
300
ITU-T G-114
400
500
Mouth to ear delay (ms)
600
Very satisﬁed users
Satisﬁed users
Some dissatisﬁed users
Many dissatisﬁed users
Nearty all dissatisﬁed users
Figure 11.121  E‐model rating.
1
1,5
2
2,5
3
3,5
4
4,5
5
0%
1%
3%
FER (%)
MOS-LQSW
AMR-WB 12.65
AMR-NB 12.2
AMR-NB 6.60
Figure 11.122  MoS versus frame error rate.

VoLTE Optimization
565
POLQA requires voice samples from both originating and terminating end points in order to 
estimate the voice quality. In case of VoLTE‐to‐VoLTE calls, this is retrieved through the SIP/
VoLTE client; however, if one of the end point is PSTN or CS PLMN (GSM, UMTS or 1 × RTT 
CDMA) with break out/in via MGW/MGCF, the voice samples need to be A/D converted 
before collected for quality evaluation. The test result in Figure 11.124 and Table 11.44 is from 
VoLTE stationary test in real radio environment. The relation of MoS with RSRP, MoS with 
SINR, MoS with BLER and MoS with delay are given in the figure.
From above stationary result, it can be observed that the correlation as the path loss increase 
the MoS decrease and packet loss increase. In Figure 11.125, at cell edge (path loss is 137 dB), 
VoLTE MoS is around 2.6, it can be the coverage boundary of VoLTE service design and 
optimization.
Service Quality
Network Quality factors
Scheduling
Signal/Noise ratio
Load
L2 retransmissions
Transmission power
Frame
Error Rate
Transport
Delay (e.g. SPD)
Codec
Jitter Buffer,
Echo Canceller
etc.
Conversational
Speech Quality and Session
Set-up Time
End-to-end perceived voice quality (MOS)
Sender
Receiver
Encoder
Packetizer
Voice
source
coding distortion
codec delay
delay
delay
buffer-delay
buffer-loss
codec
impairment
delay
Voice
receiver
De-
packetizer
Jitter
buffer
Decoder
packet loss
network delay
jitter
IP Network
Figure 11.123  The factors affecting MoS.
www.ebook3000.com

LTE Optimization Engineering Handbook
566
Figure 11.124  VoLTE stationary MoS 
test in real radio environment.
0
0.5
1
1.5
2
2.5
3
3.5
4
4.5
5
–130
–110
–90
–70
–50
MOS vs RSRP
0
0.5
1
1.5
2
2.5
3
3.5
4
4.5
–20 –15 –10
–5
0
5
10
15
20
25
30
35
MOS vs SINR
10
–110
–113
–116
–117
–118
–119
–120
–121
RSRP (dBm)
0
0.5
1
1.5
2
2.5
3
3.5
MOS
4
0
0.5
1
1.5
2
2.5
3
3.5
MOS
4
3.67
3.71
3.64 3.44
3.15
3.2
3.09
2.8
2.46
1.92
2.44
2.63
3.19
2.84
2.92
3.18
3.24
3.68
3.75
3.63
3.38
3.33
3.21
3.16
3.21
3.24
3.21
3.02
3.74
3.69
7
4
1
–2
SINR (dB)
–3
–4

VoLTE Optimization
567
Frame error rate (from 3GPP TR26.975) is also a form of expression of the voice quality of the 
network as shown in Figure 11.126. In engineering, frame error rate and IP packet loss is equiv-
alent, assuming 1‐1 for voice, that is, no bundling of voice frames into one RTP packet. If voice 
frames are bundled, for example, as a result of DRX with long cycle (40 ms) then the error ratio 
must be calculated based on voice frames and not IP packets.
The prime analysis methods for speech quality analysis are subjective listening and conver-
sational tests. As a complement, objective measurements using the POLQA algorithm are 
done. But, objective speech quality scores and subjective speech quality judgment were not 
always related. From engineering point of view, there is a simple way for MoS calculation that 
MoS can be got from packet loss and delay as shown in Figure 11.127.
where R is transmission rating factor, R = 94.2‐Id‐Ief;
Id = impairments caused by delay,
Ief = impairments caused by low bitrate codecs.
Id = 0.0024*d + 0.11*(d−177.3)*H(d−177.3),
H(x) = 0 if x < 0 else 1 for x > =0, where H(x) is the heavy side function.
	
MoS
ifR
R
R
R
R
if
R
1
0
1
0 035
0 000007
60
100
0
,
.
*
.
*
*
*
,
100
4 5
100
. ,
ifR
	
3.8
3.1
1
2
3
4
5
6
7
8
DL BLER %
Peak Delay (ms)
9
10 11 12 13 14 15 16 17
3.15
3.2
3.25
3.3
3.35
MOS
3.4
3.45
3.5
AVERAGE MOS
3.6
3.4
3.2
3
2.8
2.6
2.4
2.2
1
11
21
31
41
51
61
71
81
91 101 111 121 131 141
Average MOS per BLER (Red)
Moving average, window size 5 (Green)
Average MOS per peak delay (Red)
Moving average, window size 10 (Green)
Figure 11.124  (Continued)
www.ebook3000.com

Table 11.44  VoLTE stationary MoS test with RSRP/SINR (ok means MoS is higher than 3.5).
RSRP\SINR
–5
–4
–3
–2
–1
0
1
2
3
4
5
6
7
8
9
10
–120
2.4
1.7
ok
3.3
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–119
3.3
3.1
2.2
ok
ok
2.9
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–118
2.7
3.4
3.1
3.0
3.4
3.0
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–117
3.4
2.9
ok
ok
2.4
3.4
3.2
ok
ok
ok
ok
ok
ok
ok
ok
ok
–116
3.5
3.3
3.2
3.1
3.3
3.4
3.5
ok
ok
ok
ok
ok
ok
ok
ok
ok
–115
ok
ok
ok
3.2
ok
ok
3.3
ok
ok
ok
ok
ok
ok
ok
ok
ok
–114
3.4
3.3
3.3
3.5
ok
3.4
ok
3.5
3.3
ok
3.4
ok
ok
ok
ok
ok
–113
3.7
3.7
3.1
ok
3.4
3.4
ok
ok
3.4
ok
ok
ok
3.5
ok
ok
ok
–112
3.3
3.5
ok
ok
ok
3.4
3.3
4.1
3.4
ok
ok
ok
ok
ok
ok
ok
–111
3.1
3.2
3.3
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–110
3.1
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–109
3.1
3.1
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–108
3.4
3.4
ok
ok
ok
ok
ok
ok
3.5
ok
ok
ok
3.2
ok
ok
ok
–107
3.3
3.3
3.5
ok
ok
ok
ok
ok
3.6
ok
ok
ok
ok
ok
ok
ok
–106
ok
ok
ok
ok
ok
ok
ok
3.5
3.7
ok
ok
ok
ok
ok
ok
ok
–105
ok
ok
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–104
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–103
ok
ok
3.4
3.5
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–102
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–101
3.5
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–100
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–99
3.4
ok
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–98
3.3
3.5
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–97
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–96
3.2
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–95
3.9
ok
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–94
3.4
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–93
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–92
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–91
3.3
ok
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–90
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–89
ok
ok
3.4
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–88
ok
3.3
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–87
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–86
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–85
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–84
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–83
ok
ok
3.2
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–82
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
ok
–81
ok
ok
ok
3.5
ok
ok
ok
ok
ok
3.3
ok
ok
ok
ok
ok
ok

VoLTE Optimization
569
4.0
3.5
3.0
2.5
EMOS
2.0
1.5
1.0
0.5
0.0
0
7
6
5
Packet Drop Rate
4
3
2
1
0
128
130
132
134
136
138
140
PL average
EMOS
Packet Drop Rate
Figure 11.125  MoS at cell edge.
–3.00
–2.50
–2.00
–1.50
–1.00
–0.50
0.00
0.50
0.001%
0.01%
0.1%
1%
10%
100 %
FER
MOS degradation as a function of the FER
(FR Tests in Clean Speech)
12.2
7.95 FR
5.9 FR
FER MoScomment
0%:4.05;
1%:3.7;
2%:3.42;
4%:2.98;
D MOS
Figure 11.126  Delta‐MoS versus FER.
One-way Delay (MS)
ld
Packet Loss (%)
lef
R
MOS
Figure 11.127  MoS model.
www.ebook3000.com

LTE Optimization Engineering Handbook
570
MoS calculation is depicted in Table 11.45.
11.9.2.2  Video Quality
The recommended video quality metrics for VoLTE video is PEVQ, defined in ITU‐T J.247. 
This is an objective perceptual and full‐reference video quality metrics model providing a video 
MoS‐VQO score in the range 1 to 5. Real world experience and results are somewhat limited 
for PEVQ and very few network monitoring tool vendors offers PEVQ quality evaluation at 
this time.
The PEVQ model is perceptual, that is, a reference source and the impaired target are 
­compared. A pre‐defined reference file with video samples is injected into the originating UE, 
traversing over LTE/EPC and received in the terminating UE. The receiving video samples are 
extracted from the terminating UE and the PEVQ algorithm compares the reference samples 
sent from the originating UE with the impaired video samples received at the terminating UE. 
A quality estimate, MoS‐VQO, is produced representing the PEVQ score. The abstract formula 
for an objective and perceptual video quality metrics model is as below:
	
Videoquality
f codectype encoded bit rate framerate i
 
 
 
 
 
 
 
(
,
,
, mage size frameloss IP
packet loss frameloss concealmen
 
 
 
 
 
 
,
,
/
t resolution GoP structure contents
time scaling dela
,
,
,
,
 
 
 
 
 
 
/
y jitter Audiovideo synch
,
,
)
 
 
 
 
	
Table 11.45  MoS calculation.
R‐factor
Quality of voice
MoS
One‐way 
delay (ms)
Id
90 < R < 100
Best (5)
4.3 ~ 4.5
0
0
80 < R < 90
High (4)
4.03 ~ 4.34
25
0.9
70 < R < 80
Medium (3)
3.6 ~ 4.03
50
1.5
60 < R < 70
Low (2)
3.1 ~ 3.6
75
2.1
R < 60
Poor (1)
2.58 ~ 3.1
100
2.6
125
3.1
Provisional planning values for the equipment factor Ief under 
conditions of packet loss, codecs G.729 A + VAD and 
G.723.1‐A + VAD
150
3.7
175
5
200
7.4
% Packet loss
G.729A + VAD
G.723.1.A + VAD 
6.3 kbps
225
10.6
250
14.1
0
11
15
275
17.4
0.5
13
17
300
20.6
1
15
19
325
23.5
1.5
17
22
350
26.2
2
19
24
375
28.7
3
23
27
400
31
4
26
32
8
36
41
16
49
55

VoLTE Optimization
571
Unlike voice, frame error ratio and IP packet loss is not 1‐1 for video. One video frame composed 
of at least 2 RTP packets and in many cases more than that, especially if many details have 
changed from previous frame. A frame start is tagged in the RTP packets and is displayed in 
Wireshark. One lost RTP packet is considered sufficient condition for counting corresponding 
video frame as lost.
Obviously, resolution and video frame rate are important KPI for end‐user perception of 
video. Video frame rate is directly connected to bit rate since the bit rate determines how fast a 
frame is transferred for a given resolution and screen size. Frame rate is captured together with 
PEVQ score per sample period to correlate the frame rate with video quality. Frame rate is one 
of the parameters used in the PEVQ algorithm model.
Not only bitrate that matters, delay is also very important as it does not make the end user 
very happy if video is lagging considerably behind the audio, not to mention the poor interac-
tivity that one get, therefore, it is important to realize that there are requirements on the delay. 
The E2E video path delay (camera to display delay) shall be less than 400 ms of which roughly 
200 ms is dedicated to handle jitter in the radio transmission. When congestion occured in the 
network, RTP over UDP/IP in forward direction carries the video from sender to receiver, once 
the packets arrive at the sender, the sender determines whether or not congestion occurs, 
RTCP (also over UDP over IP) carries congestion information in reverse direction, the sender 
adjusts its bitrate according to information in RTCP. This is the feature of rate adaption in video 
phone, which is necessary in order to reach the requirements for real time interactive video.
Audio video sync, the difference between audio and video delay, is of crucial importance for 
the end‐user perceived quality and should be an end‐to‐end KPI. The requirements for differ-
ence between speech and video (“lip‐sync”) should be (same as for TV): less than 40 ms if video 
ahead of speech, and less than 25 ms if speech ahead of video (Figure 11.128).
11.9.3  Jitter
The variance in the inter‐arrival time of the RTP packets is defined as jitter. Jitter is the differ-
ence between the time interval between the arrival of two successive packets and the time 
interval between the transmissions of these two packets, the formular of jitter calculation is 
shown as below. 3GPP specifies jitter buffer management to be implemented in devices, nor-
mally jitter buffer typical size range is 40 ms to 80 ms, thus a jitter of about 40 ms between the 
device and the eNB is acceptable.
Call setup
delay
A/v e2e delay
AV sync error
Objective video quality
Video bit rate and
frame rate (UL)
Video frame
drop rate
A/v RTP level 
round‐trip time
QDJ/VDJ
delay
Rate
adaptation
Video play out frame
rate and jitter(DL)
A/v RTP jitter
A/v RTP packet loss
BLER
PDCP/RLC/PHY rate
Figure 11.128  Video call quality KPI overview.
www.ebook3000.com

LTE Optimization Engineering Handbook
572
	
j t
s t
s t
r t
r t
abs
1
1
	
Excessive jittered/delayed packet could be discarded by UE de‐jitter buffer to ensure in‐order 
delivery to the codec with appropriate frames erased. The de‐jitter capability of a buffer 
depends on its depth, the larger a de‐jitter buffer is, the more jitter it can handle. The time 
stayed in this buffer between arrival time and packet playout time is called buffer delay. Larger 
de‐jitter buffers produce longer end‐to‐end delays (Figure 11.129).
Real‐time applications, like VoIP, must balance good de‐jitter capability and minimal end‐to‐end 
delay. At the time, two kinds of de‐jitter buffers are commonly used static (fixed buffer size), 
which works well if RTP delay variation is constant and known, and dynamic (adaptive buffer 
size), which tries to adapt to changing transmission delay variance. Normally, the size of jitter 
buffer shall be such that a delay jitter of at least 100 ms is handled.
Usually, the recommended VoIP RTP packet jitter range is less than 10 ms. The jitter distri-
bution of RTP frames shows “jitter peaks” at ‐10 ms, 0 ms, and 10 ms. This is caused by an eNB 
scheduling timer of 10 ms. Figure 11.130 shows the jitter distribution in uplink direction on S1 
user plane interface.
From the field test, it is known that for the Skype service when jitter is not higher than 26 ms, 
the voice call delay is less than 400 ms, while for VoLTE when the jitter is not higher than 
86 ms, the voice call delay is less than 200 ms. For Skype, when the jitter is not higher than 326 ms, 
Skype voice call quality is in the range of tolerance (MoS > 3.0). For VoLTE, when the jitter is 
not higher than 86 ms, the quality of voice calls is better (MoS > 4.0). In a live network, the jitter 
98%‐ile is below 60 ms to 89 ms. It is worth to note that the jitter increased as more UEs are 
added in the call load, but quality of some samples are affected by increased jitter; however, 
some are not, as it seems there is no clear correlation with MoS and jitter.
11.9.4  Packet Loss
The number of RTP packets not received by the UE is calculated based on RTP timestamp, 
sequence number, and SSRC. The number of dropped packets E is calculated per RTP flow by 
adding up the number of RTP packets lost. Similarly, the number of RTP packets N is calculated 
per RTP flow by counting the number of RTP SN and payload for which direction equal to 
“downlink.” The RTP downlink error rate for a 1‐second interval is calculated as E/(E + N).
i-2
Si+2
Si+1
Si
Si+1
Si+2
Si+3
i-1
i
i+1
i+2
i+3
i-2
Playout time
Receive time
Send time
(a)
(b)
(c)
i-1
i
i+1
i+2
i+3
time
Ri+2
Ri+1 Ri Ri+1
Ri+2Ri+3
Pi+2
Pi+1
Pi
Pi+1
Pi+2
Pi+3
time
time
Late arrival loss
i-2
i-1
i
i+1
i+2 i+3
Figure 11.129  Jitter example.

VoLTE Optimization
573
3GPP recommendation is end‐to‐end packet loss at maximum 3% for voice, which is shown 
in Figure 11.131. Its recommended network planning and implementation by max 1 % packet 
loss (FER/BLER) is radio access and max 1% packet loss in core network.
Packet loss can be acquired from the RTP23 packet sequence number that received by UE. 
Analyze sequence numbers recorded in Wireshark to calculate packet loss. The RTP packet 
header is shown in Figure 11.132.
Delay Jitter from one radio link -Illustrative
0
0,01
0,02
0,03
0,04
0,05
0,06
0,07
0,08
–10
0
10
20
30
40
50
60
Delay
Probability density
Spread due to queuing 
delay (many users)
Spread due to HARQ retransmissions and 
scheduling cycles
90.00%
Jitter distribution on S1up, call12
80.00%
70.00%
jitter (ms)
60.00%
50.00%
40.00%
30.00%
20.00%
10.00%
0.00%
–20 –18 –16 –14 –12 –10 –8 –6 –4 –2
# of frames with that jitter
0
2
4
6
8
10
12
14
16
18
20
Series 1
Figure 11.130  Delay spread due to radio.
23  For VoLTE voice, this metrics also represents voice frame loss if only one AMR speech frame is encapsulated in 
each RTP message. For VoLTE video, there is no one‐to‐one relationship between RTP packets and media frames. 
RTP encapsulated video spans across multiple RTP packets for one single video frame. So is its need to have metrics 
for both RTP packet loss and video frame loss.
www.ebook3000.com

LTE Optimization Engineering Handbook
574
Notes:
●
●sequence numbers – for packet loss and reordering detection
●
●timestamp – for playback at appropriate intervals
●
●payload type – format of payload e.g. codec used
Voice traffic generated by iperf can be analyzed in Wireshark to more accurately measure 
E2E packet loss. Iperf UDP traffic generation sequence number is embedded in the UDP pay-
load data. Iperf uses this sequence number to calculate packet loss and to detect out‐of‐order 
packets.
Packet loss will cause speech/video frame errors, which is due to inadequate link adapta-
tion, UE power limitation, interference, too late scheduling, and so on. For packet loss 
measurement, an example is shown in Figure 11.133, it can be checked UL RTP SN#5979 
send on MO side, to examine if all UL transmission is ACKed in the PHICH. It can be seen 
that the RTP packet is sent to eNB and receive ACK, means eNB received the packets 
successfully.
For VoLTE voice, this metrics also represents voice frame loss if only one AMR speech frame 
is encapsulated in each RTP message. For VoLTE video, there is no one‐to‐one relationship 
between RTP packets and media frames. Typically, RTP encapsulated video spans across mul-
tiple RTP packets for one single video frame. In this case it’s useful to have metrics for both 
RTP packet loss and video frame loss.
The frame error ratio (FER) is measured for the voice packets equivalent to packet loss rate. 
If any segment is not received after the maximum number of HARQ transmissions, it is counted 
as a frame error. Also if the packet is older than 100 ms in the UE and no part has been transmitted 
in a segmented, the packet is dropped in the UE and it is counted as a frame error.
Payload
Type
Sequence Number
7 bits
16 bits
32 bits
32 bits
Time Stamp
Synchronization Source Identifier
Misc
Fields
Figure 11.132  RTP packet header.
IP
Backbone
A
Iu-CS
Nb
Nb
eNodeB
MME
PS-core
SAE GW
Mb
CS-Core
< 1%
< 1%
< 1%
FER
2G
BSC
MGW
MGW
RNC
BSC
RNC
TC
TC
3G
2G
3G
BLER
Figure 11.131  RTP packet loss ratio.

VoLTE Optimization
575
11.9.5  One Way Audio
While not a contributing factor for MoS or acceptable call quality KPIs, one way audio can have 
a major impact on the subscribers’ VoLTE calling experience. One‐way audio occurs when RTP 
flows in only one direction.
In many cases, one way audio is caused when a call is abruptly released by IMS due to an 
RTP timeout, RTP timeout happens when there is continuous packet loss or VoLTE inactivity 
either in the UL or DL. Issues at the core/transport network, eNB issues, UE issues or fading 
dip due to coverage holes are some of the possible causes for the packet loss or VoLTE inactiv-
ity. RTP ­protocol is implemented at the IMS layer, either EPC or UE detects RTP time out and 
IMS releases the VoLTE call. As a result, the eNB receives an E‐RAB release or UE_context 
release signal from the MME, and the release cause is set to “normal release” in eNB. Actually, 
there is no observability mechanism available in eNB to correlate RTP timeout with such 
abnormal call releases.
Besides one direction RTP timeout, when one way audio happened right after call establish-
ment, the causes of the problem could also be firewall issue or codec issue. It is needed to 
check if there is firewall in the RTP path between calling and called party, check if NAT 
(network address translation) has been used for VoLTE subscribers. This could be an issue 
when mobile operator using private IPv4 for VoLTE (IMS APN) instead of public IPv4 or 
IPv6. Usually, media codec has to be negotiated before the call establishment. However the 
UE may have a problem in encoding the media, so the verification of SIP messages during 
media negotiation and the actual RTP packet may be needed. Some cross‐domain calls, for 
example, VoLTE < ‐ > 3G, VoLTE < ‐ > PSTN, may need transcoding. Since 2G/3G and PSTN 
support different codec than VoLTE, the transcoder is needed in order to have the same 
codec communicated in VoLTE. There may be issues on the transcoder itself where you 
have to investigate.
When one way audio happened during ongoing call, especially during X2 handover, the RTP 
UL/DL paths have to be transferred from source eNB to target eNB. There might be confusion 
in routing between UE < ‐ > eNB, eNB < ‐ > SGW or between source/target eNBs which could 
block forwarding of the packets. Verification whether the RTP has been forward to the right 
path is needed.
Figure 11.133  Normal RTP packet transmission.
www.ebook3000.com

LTE Optimization Engineering Handbook
576
11.9.6  PDCP Discard Timer Operation
During handover, delivery of PDCP PDUs to lower layers is stopped and they are buffered 
within the UE PDCP buffer. A discard timer is associated with each PDCP SDU, and it keeps 
running during the handover data interruption period. After handover, the unsent PDCP SDUs 
in the buffer can be transmitted if discard timer has not expired. In the following example, in 
Figure 11.134, the UE experiences a 20 ms data interruption, and one PDCP SDU is dropped 
because the discard timer has exceeded the configured timer settings.
Here is an example of SIP register failure due to poor RF and incorrect PDCP discard timer 
setting. The SIP register message size is 1990 byte, it has to be split into two PDCP SDUs before 
transmitted over the air. However due to poor RF condition, only small grants are allocated, it 
takes quite a long time to transmit one single PDU. The other PDCP SDU is discarded due to 
discard timer (PDCP discard timer of QCI5 is configured as 300 ms) expiry. As a result the 
complete SIP message failed to be sent out. Finally, SIP registered procedure time out at the UE 
side (Figure 11.135).
The key point of the issue is that SIP register message length is 1990 byte, while PDCP UL 
PDU size is 1426 byte. SIP register message has to be split into two PDCP PDUs to send over 
the air, although this is one of the PDCP PDUs. PDCP SDU discarded can be observed from the 
measurement in Figure 11.136.
PDCP Buffer
Delivery of PDCP PDUs
to Lower Layers stopped
HFN & SN Reset
for RLC-UM
Discard Timer
running
PDCP Buffer
20ms
20ms
40ms
0ms
40ms
Expired
Source
Cell
Discard
Timer
Step1: During LTE Handover
Step2: After LTE Handover
HFN = 21
SN = 100
HFN = 21
SN = 99
HFN = 21
SN= 98
HFN =0
SN =0
HFN =0
SN =1
PDCP
SDUs
Target
Cell
Figure 11.134  PDCP discard timer operation.
IMS
UE
SIP : REGISTER
SIP : REGISTER
SIP : REGISTER
SIP : REGISTER
SIP : REGISTER
0×1835 IMS Registration
Timer= 3s
Timer= 6s
Timer= 12s
Result = Request_Timeout
SIP : 401 UNAUTHORIZED
Figure 11.135  PDCP UL PDU size.

VoLTE Optimization
577
11.10  ­Optimization
The aim of VoLTE is to provide voice and video call quality equal or better than experienced on 
a 2/3G network. VoIP services require careful monitoring as every performance ­degradation is 
directly perceived by the end user. VoLTE performance can be derived by collecting drive data, 
MoS scores, call traces and network statistics. As VoLTE is deployed over LTE network using 
IMS, it is needed to look into SGi, Mw, Ma, ISC interfaces along with Uu, X2, S1, and S11 inter-
faces to consider the performance of UE, eNB, MME, S‐GW, P‐GW, SBC, P‐CSCF, S‐CSCF, 
PCRF, AS, and so on. To identify whether a particular VoLTE session is experiencing any prob-
lem, that session needs to be characterized with indicators at all possible interface involved in 
transporting control and data plane ­messages with correlation and synchronization or packets 
of data for that session. VoLTE E2E performance challenges also include multiple data sets and 
performance tools to identificate and isolate of issues affecting VoLTE performance across 
RAN, core, and IMS network. For optimization, data capturing of VoLTE is necessary and 
evolves such items, which is shown in Figure 11.137:
●
●UU/X2: Filter control signaling
●
●S1‐MME: Filter traffic with associated IP addresses of eNB and MME
Ma
As
SCSCF
PCSCF
SBC
IMS
PCRF
EPC pcap
Sv
MSC
server
MME
S1
S11
ENB
DT Log
eNB
Trace
EPC/IMS pcap
IMS Trace
(Mw, Ma,ISC,
Rx etc.)
SIP,
RADIUS, DIAMETER
S1AP,GTPv2,
RADIUS, DIAMETER
RRC, X2AP, S1AP
Protocols
Log/Trace
DT LOG
eNB Trace
EPC Trace
(S1, S11)
RRC
S/P GW
IMS pcap
Data Processer
Uu
Mw
Rx
In order to analysis the voice 
performance as well as delay,
interruption time and RTP
loss, all SIP related signaling 
and media to and from the 
ATGW should be collected. 
Figure 11.137  Data capturing of VoLTE to troubleshoot call issues.
Figure 11.136  PDCP SDU discarded.
www.ebook3000.com

LTE Optimization Engineering Handbook
578
●
●S1‐U: Filter IP address range for IMS APN + P‐CSCF IP address
●
●Mw: Filter control signaling between MSC server and ATCF
●
●ISC: used for third‐party registration, session originate/terminate for anchoring and session 
transfer requests
●
●Sv: access transfer from PS to CS (handover request/response), STN‐SR/C‐MSISDN
●
●Rx: Interface between P‐CSCF and PCRF, used for control of policies and charging, and for 
authorizing media connections
●
●Gm: Filter IP address of P‐CSCF
●
●Mb: Filter IP address range for IMS APN
For data capturing, it is needed logging RF statististics, logging RRC messages, logging IMS 
SIP message (direction, SIP message type, response code, and SIP call ID plus complete SIP/
SDP message as plain ASCII), logging RTP statistics each second (direction, SSRC, payload, 
PayloadLen, NumPackets, LostPackets, MaxConseqLostPackets, delay, relativeJitter, and 
­absoluteJitter, etc.), logging last RTP packet before and first RTP packet after handover (RRC 
connection reconfiguration).
The MME uses the Sv interfaces toward MSC server to coordinate the handover of the voice 
call and S3 interface toward SGSN for other PS bearers. The MSC server uses Mw interface 
toward ATCF to initiate session transfer in IMS. It is needed to find out the IP and UDP port 
for UE and MSC/MGW based on the SDP in the SIP message, an example illustrated in 
Figure 11.138. It also acts as an interface to construct E2E call flows using various imported 
data sets to easily isolate points of call failure in order to expedite analysis process, collect fol-
lowing traces or logs for same time period shown in Table 11.46.
UE to ATGW
UE IP: 10.63.0.2
UDP port: 14850
MGW to ATGW
MGW IP: 223.168.146.13
UDP port: 14254
Figure 11.138  IP and UDP port for UE and MSC/MGW (example).
Table 11.46  Collection of traces or logs.
Log/Trace
Protocols
DT Log
Text export of DT log include RRC, NAS, SIP and RTP protocol messages
eNB Trace
RAN KPIs are calculated from eNB events
EPC Trace (S1,S11)
Traces from EPC (S1 (S1‐AP) and S11 (GTPV2) interface) in PCAP format
IMS Trace (Mw,Ma,ISC, 
Rx etc.)
Traces in PCAP (SIP signaling) format from various interfaces internal to IMS 
(e.g. Mw, Ma etc.)
Note: MME invokes SRVCC by sending PS‐CS request via Sv (GTPv2) interface [TS 29.280] to SRVCC enhanced 
MSC server, and MGW resources are reserved by the MSC server also need to be traced for duration of SRVCC 
procedure.

VoLTE Optimization
579
It is recommended tat users pload collected traces for a cluster into VoLTE E2E analyzer and 
then analyze E2E call flow for the problematic calls. Tools can automatically process the data 
and generate optimization reports. From the summary report, the engineers will identify the 
poor KPIs and problematic calls/sessions contributing to the KPI.
From performance measurement framework, the support is enabled with QCI1 specific 
counters, following LTE KPIs exists for VoIP performance monitoring: number of VoIP users 
active in UL/DL, VoIP users activity time, average PDCP layer UL/DL throughput per cell for 
QCI1, average scheduled IP throughput for QCI1, average latency in UL/DL for QCI1 DRBs, 
QCI1 E‐RAB setup attempts and setup success ratio, E‐RAB QCI1 drops and drop ratio, trans-
mitted/lost UL/DL QCI1 PDCP SDU packets, and so on.
VoLTE service KPIs (dropped call rate, handover interruption time, call setup time, MoS, 
speech path delay, call completion rate) could be adversely affected in an un‐optimized net-
work (Figure 11.139).
The voice quality a user perceived is determined by several parameters. Some rely on the 
network capabilities for example, core network, eNB capability, and transport network. Some 
rely on radio conditions and paramaters like voice codec type, and delay and jitter is much 
crucial to enable high‐quality VoLTE services.
Form the VoLTE services QoS perspective, there are several main service KPIs to achieve, 
call setup time, RTP latency, jitter, quality, mouth‐to‐ear latency, and handover interruption 
time. Call setup time was in the range of 900 to 4000 msec depending on UE activity state, RTP 
latency showed very consistent results in the range 30.0 to 50.0 msec, jitter showed consistent 
results in the range 2 to 10 msec, quality shows a very good MoS score of 3.5 to 4.0, mouth‐to‐
ear latency showed some variability and ranged from 180 to 280 msec, less than ideal variability 
but within acceptable magnitude, handover interruption time showed consistent results in the 
range 45.0 to 55.0 msec.
Among all these service KPIs, accessibility and retainability are the most important for the 
operator focused on due to they are stongly impact user experience. Table 11.47 gives some 
reasons for both issues.
• Cell Availability
• Connection Setup Time
• Connection Success Rate
• Attach Failure Rate
• RAB Setup Success Rate
• SIP Registration Success Rate
• Attach Setup Time
• SIP Registration Setup Time
• User Throughput
• Latency/Delay
• Handover Success Rate
• IRAT Handoff
• Packet Loss/Errors
• Jitter
• RAB Abnormal Release Rate
• RF Coverage (SINR)
• …
Voice quality
MOS ≥ 3.5
Speech path delay
<225ms
HO Interruption
Time
<200ms
Call setup time <3-4s
Drop rate <1%
Setup 
success
≥ 99%
Service KPI’s
≥ 2G3G CS
Figure 11.139  VoLTE service KPI.
www.ebook3000.com

LTE Optimization Engineering Handbook
580
11.10.1  Distribution of Main Indicators of Field Test
Measuring RSRP and SINR distribution in realistic radio environment is the first step as shown 
in Figure 11.140, the drive route planning should involve varying RF conditions in locations 
with good SINR (more than 10 dB) ranging to poor SINR (less than −2 dB), whereas the latter 
represents locations close to the cell edge and should be accompanied with good to poor RSRP 
respectively. Also, part of a realistic scenario is necessary to add background load to artificially 
generate traffic through the cell where the test calls are made.
Besides RSRP and SINR, the measurements should be collected together with the relevant RF 
metrics SINR, RSRP and PDSCH BLER. The distribution of these measurements is preferably 
presented as PDF and CDF graphs, with RF metrics and background load as accompanying infor-
mation. The goal should be to meet the 95th percentile for the agreed target. Figure 11.141 shows 
the distribution of RSRP and SINR under no loading and 50% loading conditions.
Except RSRP/SINR, the other indicators shown in Table 11.48 should also be analyzed, to 
determine whether they are at an acceptable level, or require optimization. Here is an example 
DL and UL indicators of engineering records of narrow band AMR testing.
With eNB dynamic scheduler, link adaptation maintains the configured BLER, while at the 
same time MCS and nPRB decrease as pathloss increases as UE is in power limited. Table 11.49 
gives an example of VoLTE mobility coverage RF metrics versus path loss.
From the field test, it can be found that VoLTE call performance significantly degrades in 
locations where average RSRP ≈ −115dBm, as shown in Figure 11.142, much more call failures 
happened at cell edge.
It is also observed that in a live network, non‐GBR UEs report higher mean SINR compared 
to VoLTE UEs as shown in Figure 11.143, because scheduler selects the non‐GBR UEs more 
rarely, therefore, only the best UEs (closer to cell, with higher SINR) have the possibility to 
Table 11.47  VoLTE wireless issues signature.
Access failures reasons
Drops reasons
Bearer deactivation on both UEs
RLF‐eNB detected
480 temporarily unavailable
Bearer deactivation on both the UEs
500 Internal server error
Potential product issue, RAN misconfigurations
487 request terminated
SRVCC failure
503 service unavailable
Handover failure
Non RF issue
Simultaneous SRVCC issue
QC1 not setup on both UEs
RLF‐UE detected
Radio link failure‐eNB detected
RRC connection re‐establishment rejects
Attach failure
RTP timeouts including one‐way audio for xx seconds
408 request timeout on MT UE (Call redirected)
SRVCC in alerting phases with CC NAS 
UNSPECIFIED
Create bearer request timeout followed by 
timeout failure
SRVCC failure with 404 not found
Create bearer request during X2HO
Call release by MSC with cause = 41 right after SRVCC
Call released by SGC after registration with cause 404
MSC rejects SRVCC PS to CS request due to incorrect 
STN‐SR

VoLTE Optimization
581
transmit. VoIP UEs have higher priority and they are scheduled more frequently thus UEs in 
good and bad radio conditions contribute to the statistics.
Different with data service, although SINR is much higher, MIMO penetration for VoIP UEs 
is on lower level because most of the time VoIP traffic doesn’t need dual stream transmission 
and can send its data in one RBG. It doesn’t like much higher dual stream utilization for non‐
GBR users, because for increasing number of VoIP UEs, the dual stream utilization is also 
going up as well (Figure 11.144).
<= –110
(–110, –105)
(–105, –100)
(–100, –95)
(–95, –85)
(–85, –75)
(–75, –40)
> – 40
0%
20%
40%
60%
80%
100%
120%
0%
20%
40%
60%
80%
100%
120%
<=3
(–3, 0)
(0, 3)
(3, 6)
(6, 9)
(9, 15)
>15
SINR (50% loading)
SINR (No loading)
RSRP (50% loading)
RSRP (No loading) 
Figure 11.141  The distribution of RSRP and SINR under no loading and 50% loading conditions.
Figure 11.140  RSRP and SINR distribution. (See insert for color representation of the figure.)
www.ebook3000.com

LTE Optimization Engineering Handbook
582
13.8
–20
–15
–10
–5
–85
–10.3
–8.1
–95
20.4
14
20.8
22.7
23 22.9
21
–10.4
–9.3
–12.9
–11.6
–13.1
–12.5
–13.8
–15.3
–16.7
–16.6
–14.9
–15.4
–115
–120
RSRP [dBm]
0
0
0
0
8
9
23.1 23
17 23.1 23.1
23.1
23.1
23.1
23.1
22.5
27
24
–110
–15.1
0
0
1
–100
0
0
1
–105
0
1
0
5
10
15
20
25
30
–16.6
RSRQ [dB]
PUSCH Tx Pwr [dBm]
Call Failures [#]
Figure 11.142  VoLTE call performance significantly degrades at cell edge.
Table 11.48  VoLTE test indicators.
Downlink
Uplink
Average RSRP
2 CW (%)
PUSCH Tx Power
Average PUSCH 16QAM
Average RSRQ(dB)
DL TB Size(bits)
Path Loss
UL TB Size
Average # of RBs
Activity(%)
Average BSR index
Activity
Average MCS0
MAC Padding Overhead
Average UL MCS
MAC Padding overhead
Average MCS1
Average PDCP Tput
Average UL RBs
Average PDCP Throughput
Schedule Rate
Average L1(kbps)
Average Scheduling Rate
Average L1 Thut
%Packet drop
Latency
Table 11.49  An example of VoLTE mobility coverage RF metrics versus path loss.
Metric(avg)
Near cell
Far cell
Call Setup Statistics
Near cell
Far cell
RF
RSRP[dBm]
−57.8
−106.1
Number of 
VoLTE calls
30
30
RSRQ[dB]
−8.2
−12.3
VoLTE calls 
success rate
100%
93%
SINR[dB]
23.5
4.7
Pathloss[dB]
78.8
120.6
Handover Count
0
17
LTE DL PHY
PDSCH C‐RNTI 
BLER 1st Tx
0.5
1.7
Number of Failures
Near cell
Far cell
MCS
4.57
3.27
Radio Link Failures
0
0
Num RB
6
7.1
Handover Failures
0
0
LTE UL PHY
MCS
17.2
11.9
SR Failures
0
0
UL Num RB
2.2
2.8
RACH Failures
0
0
PUSCH Tx Power[dB]
−26.2
21.3

VoLTE Optimization
583
12
10
8
6
4
2
0
0
50
100
150
200
Number of VolP UEs per cell
mean DL SINR
250
300
350
400
non-GBR
12
10
8
6
4
2
0
mean UL SINR
0
50
100
150
200
Number of VolP UEs per cell
250
300
350
400
VolP
non-GBR
VolP
Figure 11.143  SINR statistics by non‐GBR UEs and VoLTE UEs.
45.0%
40.0%
35.0%
30.0%
25.0%
20.0%
15.0%
10.0%
5.0%
0.0%
0
50
100
150
200
250
Number of VolP UEs per cell
Dual Stream utilization
300
350
400
VolP
non-GBR
Figure 11.144  MIMO statistics by VoLTE UEs.
www.ebook3000.com

LTE Optimization Engineering Handbook
584
The reduction of MCS and nPRB will cause VoIP packet segmentation, as indicated by the 
number of PUSCH transmissions per VoIP packet. Hence with dynamic scheduler, the VoLTE 
link budget is not constrained by BLER/CRC error but by packet segmentation and the result-
ing latency increase. VoLTE performance indicators at cell edge are shown in Figure 11.145. 
Note that some of the latency increase would incur packet drops due to PDCP discard timer 
(default 100 ms).
11.10.2  Compression Ratio and GBR Throughput
As mentioned in Chapter 11.6.1, IMS‐capable UEs supporting VoIP shall support ROHC pro-
files 0x0000, 0x0001, 0x0002, and be able to compress and decompress headers corresponding 
to supported IMS voice codecs. If used for different application flows, it means two or more RTP 
flows on the same bearer with video and voice, this will result in sub‐optimal compression ratio. 
It means that something need to be considered when this feature is enabled and when VoLTE 
and video traffic is growing fast, there might be an impact on the processing load of the eNB. 
Sometimes this could be a possible reason to have this feature disable for either video or both 
VoLTE and video services.
In case it would be necessary to disable the ROHC feature for QCI 2, there might be another 
possible problem observed between the inter‐working of a VoLTE + video call. It might also be 
that the UEs despite IR.92 compliant are not fully compatible and having problems with com-
bination QCI 1 (RoHC) and QCI 2 (no RoHC).
With RoHC enabled, the GBR requirement of VoLTE decreases to around 30 kbps. In the 
field test, 8 stationary UEs VoIP AMR‐WB, at edge cell, the E2E VoIP throughput is shown in 
Figure 11.146.
11.10.3  RB Utilization
The utilization number of voice RBs is determined by scheduling cycle, voice activity, and 
MAC padding overhead. Actually, in a live network, it has been found some samples with high 
number of RBs allocated, due to weak coverage and QPSK used, SPS with large TBS and huge 
padding overhead and SIP signaling. The allocation method of voice RBs will impact VoLTE 
capacity and coverage, it is needed to optimize.
The number of RB occupied and the MCS can be got from UE test logs or OMC statistics, as 
shown in Figure 11.147.
25
20
15
10
5
0
130
131
132
133
134
135
136
DL Pathloss (dB)
137
138
139
140
141
Tx Power
MCS
nPRB
#PUSCH per pkt
initial BLER
BLER after 2nd tx
BLER after 3rd tx
BLER after 4th tx
Figure 11.145  VoLTE performance indicators at cell edge.

VoLTE Optimization
585
Figure 11.148 gives a diagram of the relation of RSRP/SINR versus DL/UL number of RBs. It 
is from driving test log. It is found that the average allocated DL/UL number of RBs are too big 
for VoIP service, especially for poor RF conditions downlink, it is necesary to be optimized.
Up to now, DL RB allocations were confined to use type 0 that limited the smallest resource 
entity to at least one RBG (4RB for 100RBs bandwidth), which can be wasteful for VoIP services 
especially in large system bandwidth (Figure 11.149).
45
35
IP uplink (kbps)
Average
18.06
Downlink
Uplink
Range
Value
Value
< 10
19.96
10.99
30.16
2.21
StDev
Max
Min
40
35
30
25
20
15
10
5
0
< 10
20 to 30
40 to 50
80 to
100
Throughput (Kbps)
30
25
20
15
10
5
.49.84
0
.01.84
.13.84
.25.84
.37.84
.49.84
.01.84
.13.84
.25.84
.37.84
.49.84
.01.84
.13.84
.25.84
.37.84
.49.84
.01.84
.13.84
.25.84
.37.84
.49.84
.01.84
.13.84
.25.84
10 to 20
20 to 30
30 to 40
40 to 50
50 to 80
80 to 100
> 100
40.78
38.64
0.03
0
0
0.09
0.51
39.84
33.75
25.74
0.67
0
0
0
0
Downlink
Uplink
DL
15.94
12.35
506.56
41.59
UL
Mean
Max
Figure 11.146  VoIP application throughput (kbps).
Figure 11.147  RB occupied and the MCS allocation.
www.ebook3000.com

100
90
80
60
70
50
40
RB
30
20
–135
10
0
–125
–115
–105
–95
RSRP
–85
–75
100
90
80
60
70
50
40
RB
30
20
10
–20
0
–15
–10
–5
0
5
10
15
20
25
30
SINR
LTE_UE_RB_Num_DL
LTE_UE_RB_Num_UL
LTE_UE_RB_Num_DL
LTE_UE_RB_Num_UL
Figure 11.148  RSRP/SINR versus DL/UL number of RBs.
1
0.9
0.8
0.7
0.6
0.5
0.4
Probability
PRBs
PRBs per TTI and per User (240 SPS users)
0.3
0.2
0.1
0
0
2
4
6
10
8
12
14
16
18
20
22
24
26
28
30
32
34
36
38
40
42
44
46
48
50
prb/user SPS PRB alloc
prb/tti SPS PRB alloc
prb/user SPS RGB alloc
prb/tti SPS RGB alloc
Figure 11.149  DL RB utilization in a live network.

VoLTE Optimization
587
As similar as downlink, two RBs at QPSK are primarily used for UL RTP packets. In the 
case of 1 RB, 16QAM is the modulation used. Cases where the number of RBs assigned are 
more than 40 are typically at the beginning or end of a VoLTE call for SIP signaling, SIP 
signaling messages (e.g., SIP update) are being granted more than 50RBs with QPSK modu-
lation. More than 90 RBs usually occur before a handover when multiple measurement 
report messages are sent. This will result high PDCP discard rate. Table 11.50 shows some 
typical SIP message size.
In a live network, usually it can be observed some issues of higher UL PUSCH throughput for 
QCI 1, even much higher PUSCH throughput (two to three times) than UL PDCP. It is ­normally 
due to high UL scheduled TBS for 12.2 kbps, UL RB scheduled per TTI is almost two, UL TBS 
is between 840 and 904 bits. For 23.85 kbps, UL RB scheduled per TTI is almost three, sched-
uled UL TBS is between 1288 and 1384 bits.
It is known that the more the RB occupied, the lower the VoIP capacity of the network. Take 
TDD LTE as an example, DL/UL configuration SA2 (DL:UL = 4:1) is applied in the network. UL 
RB resources will be the bottleneck of VoLTE capacity, even though there is some resources 
waste in DL. In theory, number of VoLTE users can be calculated by:
	
No of VoLTE users
No of RBs for PUSCH
No of RBsoccup
.
.
.
 
 
 
 
 
 
 
 
 
 
/
ied byoneuser
ULtime schedulerate
 
 
 
 
 
 
/
	
According to the mobility narrow band AMR long call test, average number of UL RB is three 
with the schedule rate of 14.4%. Assume that there are 90 RBs in UL available for PUSCH, the 
total VoLTE users in one cell should be 90/3/14.4% = 208 VoLTE users.
11.10.4  BLER Issue
It has been observed that high BLER setting for VoLTE may result in higher packet 
loss and consequently poor voice quality. It could also result in lower MoS. Tests have 
been conducted where VoLTE target BLER was changed from 10% to 1% and which 
resulted in substantial improvements. When UL BLER becomes 20%, VoLTE voice 
quality starts degradation, when UL BLER becomes above 50%, VoLTE call dropped. 
The BLER target for UEs with QCI1 bearer can be adjusted between 1% to 10% (10% 
is legacy), at which the QCI1 bearer releases the BLER target for remaining bearers 
and the target is reset to 10%. The lower UL BLER target will reduce the packet loss 
Table 11.50  SIP message size (examples).
SIP message used in IMS
Estimated byte counts
invite
1299–1793
100 Trying
250–540
183
1414–1615
PRACK
614–1341
UPDATE
1287–1482
200 OK
255–1104
180 Ringing
561–911
ACK
453–576
www.ebook3000.com

LTE Optimization Engineering Handbook
588
rate for VoLTE calls thus improve VoLTE quality KPI and MoS score. The relation of 
BLER and other indicators is shown in Table 11.51.
It is recommended that VoIP call has higher DL/UL BLER requirement than FTP service. 
Target BLER can be configured per QCI, which aims to bring UL data throughput degradation. 
In a live network, some vendors use unnecessary low downlink BLER for QCI1 scheduling, 
which result wasting capacity. Actually, it has no benefit from low BLER because retransmissions 
are so fast (8 ms) in FDD‐LTE (Figure 11.150).
80.0
70.0
60.0
DL BLER
50.0
40.0
30.0
20.0
10.0
0.0
280
290
300
310
320
330
340
350
360
370
380
390
400
410
420
430
440
450
460
470
480
490
500
510
520
530
540
550
560
570
580
590
UL BLER
35.0
30.0
25.0
20.0
15.0
10.0
5.0
0.0
–100 –102 –104 –106 –108 –110 –112 –114 –116 –118 –120 –122 –124 –126 –128 –130 –132
AMR_DL BLER
FTP DL_DL BLER
AMR_UL BLER
AMRWB_UL BLER
FTPUL_UL BLER
Figure 11.150  VoIP and FTP UL/DL BLER.
Table 11.51  BLER versus other indicators.
Traget BLER
3%
6%
10%
12%
15%
Avg MCS
16.1
17.5
19.16
18.99
18.38
No.of RB/TTI
5.56
4.87
4.67
4.49
4.54
iBLER
3.34
6.02
9.87
11.6
13.76
MoS
3.73
3.56
3.5
3.67
3.47
Packet loss rate
0.68
1.15
1.4
1.56
1.98

VoLTE Optimization
589
11.10.5  Quality Due to Handover
Handover, especially pingpong handover and handover failure has negative impact on VOLTE 
quality, like RTP packet loss rate and jitter, and latency. The main handover failure root cause 
is RACH fail due to bad RF condition or parameters. VoLTE survivability during handover 
failure can be performed by RRC reestablishment, and then perform service request to MME via 
new eNB, and MME sets up QCI5, QCI1 immediately in intital context setup request message 
(eNB receives “SRVCC operation possible” IE included with S1AP intital context setup request 
or with a S1AP/X2AP handover request (“EPC supports SRVCC”)). When handover failure 
happeded, the call continues without drop but with voice interruption time (around 1.3 sec of 
voice interruption time for the first handover failure, 1.5 sec of voice interruption time for the 
second handover failure). In a live network, if there is no RTP traffic for 30 sec in BGF, or 10 sec 
in SBG, or 10 sec in UE, the core network will send SIP_BYE message and call dropped.
It is known that before handover, SINR from the source eNB is lower and lower, which is 
about ‐10 dB to 0 dB shown in Figure 11.151, SINR from the target eNB is a little higher (2 to 
3 dB) than source eNB. In the handover areas, the performance is degraded strongly as shown 
in Figure 11.152. Decreasing the handover areas is the main task of mobility optimization.
Long speech interruption time due to handover impacts the VoLTE performance seriously, 
which usually happened in case of packet loss in QC1, Timer T304 timeout (RRC connection 
reconfiguration/cell change order), and Timer TRELOCoverall (relocation procedure) timeout, and 
so on. In a live network, the average inter‐vendor handover execution time and VoLTE traffic 
interruption time should be focused on. In a live network, the normal values in the expected 
range are shown in Figure 11.153 and Figure 11.154.
11.10.6  eSRVCC Handover Issues
Call drops during SRVCC is the largest contributor to overall VoLTE call drop rate in the live 
network. It is necessary to note that one target for SRVCC optimization is to reduce the num-
ber of SRVCCs by providing adequate LTE coverage, by implementing features extending the 
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
–20
–15
–10
–5
0
5
10 SINR (dB)
120km/h TeNB
120km/h SeNB
120km/h TeNB
120km/h TeNB
30km/h TeNB
30km/h TeNB
30km/h SeNB
30km/h SeNB
CDF
Figure 11.151  DL reference signal SINR during handover: SeNB versus TeNB.
www.ebook3000.com

Very low SINR
Very high PLR
Very high BLER
Handover
Time
17:39:37
17:39:19
17:39:01
17:38:42
17:39:56
17:40:14
17
31
148
215
0.0
20.0
40.0
60.0
–10.0
–20.0
0.0
10.0
20.0
30.0
0.0
20.0
40.0
60.0
80.0
P863 (POLQA)
4.5
80.0
Audio Rx Packet Loss (%)(VOLTE_HIGH_LOAD-M1)
LTE KPI SINR(dB)(VOLTE_HIGH_LOAD-M1)
LTE KPI PDSCH BLER(%)(VOLTE_HIGH_LOAD-M1)
LTE KPI Serving PCI(VOLTE_HIGH_LOAD-M1)
68.468
Packet Loss
60.0
40.0
20.0
0.000
58.333
40.0
215
148
31
17
20.0
0.000
27.776
SINR
PDSCH BLER
Serving PCI
20.0
10.0
–10.0
–20.0
0.0
4.018
3.5
3.0
2.5
2.0
1.397
1.0
1.0
1.5
2.0
2.5
3.0
3.5
4.0
4.5
Big MOS dip
–13.717
–13.717
MOS P863(POQLA)(VOLTE_HIGH_LOAD-M1)
Figure 11.152  Quality degredation due to handover.

VoLTE Optimization
591
coverage (e.g., TTI bundling) and by not setting the triggering threshold for SRVCC too early 
nor too late. The other target for SRVCC should be to find the point of target system where the 
probability of dropping the call during SRVCC gets lower than the probability of dropping the 
call by maintaining it poor radio environment.
VoLTE optimization process will cater to SRVCC optimization by addressing: SRVCC Timer 
analysis (across all domains), SRVCC related parameter configuration (across all domains), and 
identifying root cause for specific issues being observed during SRVCC. Especially, timer misalign-
ment within various domains can cause problems in eSRVCC, for example, RAN timers, MME 
timers, IMS timers, MSS timers need to be aligned for optimal eSRVCC handovers.
The main issues observed in SRVCC scenarios include:
●
●MobilityFromEUTRA command followed by re‐establishment request and multiple service 
requests
●
●MobilityFromEUTRA command followed by re‐establishment request and TAU NAS non 
delivery for TAU accept
●
●Successful SRVCC on callee UE1 but drop on called UE2
●
●SIP 503 service unavailable sent by MO SBC
●
●Call drop on 3G/CS
●
●ATCF sends BYE to MSC before SCC AS sends 200 OK for the invite SIP 408 send out 
by MT SBC
●
●Simultaneous eSRVCC on both UEs
1
140
120
100
80
60
40
20
0
Time (ms)
2
3
4
5
6
7
8
9
10
Figure 11.154  Traffic interruption time.
0
5
10
15
20
25
30
Time (ms)
35
40
45
50
1
2
3
4
5
6
7
8
9
10
Figure 11.153  Handover execution time.
www.ebook3000.com

LTE Optimization Engineering Handbook
592
●
●MobilityFromEUTRA command followed by re‐establishment request and TAU with 
active flag
●
●SRVCC during call setup
The usual cases of SRVCC failures (disconnection during eSRVCC) are shown in Figure 11.155. 
For example, fallback timer expires before re‐invite from UE is received, when BYE message is 
received from source leg and target leg has been released previously, then fallback timer is 
stopped and BYE is sent immediately to remote side and to MSC. Other cases like UE discon-
nection after handover, before fallback timer expiry, and loss of radio link before handover 
command, and so on.
11.10.7  Packet Loss
RTP packet loss is a serious issue in IP based network, especially for VoIP service. RTP packet 
loss is normally due to poor RF, high loading of the cell, insufficient UL grant, handover, and 
network packet drop etc.
RTP packet loss observation can be done by RTP SN (sequence number) order. If it is found 
that at the receiver end the RTP packet serial number is not continuous, RTP packet loss can 
be spot. Further it is needed to analyze if the packet loss was due to air interface, to check the 
downlink PDCP data packets SN is continuous or not, to determine the reason of RTP 
packet loss.
Figure 11.156 is a section of the test log of eNB‐ > MO UE. From the graph, it can be seen in 
the RTP SN 290 to 334, a total of 45 RTP packets, there are 9 times of packet loss (number 
lost = 1), that means 9 RTP packets were lost, the lost SN serial number is 291, 297, 301, 307, 
311, 317, 321, 327, and 333, respectively.
11.10.7.1  Packet Loss due to Poor RF
RTP packet loss is usually due to poor RF. From Figure 11.157, it is found that at RSRP ‐115dBm, 
according to path loss 137 dB, RTP packet loss rate is higher than 2% (RTP packet latency is 
more than 150 ms at this time), which impacts user experience seriously.
From Figure 11.158, 98th and average packet drop rate has been analyzed, it is found that:
●
●At path loss = 136 dB, average packet drop rate is 1.95%.
●
●At path loss = 137 dB, average packet drop rate is 3.72%, average packet drop rate is greater 
than 2%.
●
●At path loss = 137 dB and above, the range of packet drop will start to be wider;
●
●Till path loss = 139 dB, packet drop is becoming higher and higher, but some talk spurts still 
had 0% packet drop rate. Starting from path loss = 140 dB, the minimum packet drop value 
increased and lose this luxury of having a talk.
11.10.7.2  Packet Loss due to Massive users
It is clear that as the number of VoIP UEs increases, more and more packets are lost after they 
exceed delay target under the high loading network. Especially, uplink delay is higher due to 
packet aggregation and additional time needed for buffer status reports (Figure 11.159).
11.10.7.3  Packet Loss Due to Insufficient UL grant
For each UE with VoLTE bearer, it shall be checked whether the voice connection is currently 
active in uplink. This is inspected from received data size of the VoLTE bearer. If received data 
amount is not between the thresholds for a certain period of time, voice connection is assumed 
to be inactive.

VoLTE Optimization
593
eNB
MME
MSC
ATCF
Handover required
PS to CS Request
INVITE (STN-SR)
200 OK
PS to CS Response
1. timeout
1. HO Cancel 
Notification
Start Prep. HO timer
Notification
UE
(RE-)INVITE (487)
1. HO Cancel ACK
Fallback timer 
expires
BYE
SCC-AS
Start fallback timer
BYE
BYE
INVITE (ATU-STI)
200 OK
Release of ATGW
CS call leg bearer
Release of
MSC resources
BYE
Keep 
PS call
200 OK
200 OK
Release of 
remote side
Release of ATGW 
PS call leg bearer
200 OK
200 OK
ACK (200 OK)
eNB
MME
MSC
ATCF
PS to CS Request
INVITE (STN-SR)
200 OK
PS to CS Response
PS to CS Complete
UE
HO to 3G
SCC-AS
Start fallback timer
BYE
INVITE (ATU-STI)
200 OK
Release of ATGW
CS call leg bearer
Release of
MSC resources
BYE
Keep
PS call
200 OK
200 OK
RNC
Relocation request
HO 
command
BYE
BYE
Release of
remote side
Release
PS call leg
504 error
Fallback timer 
expires
ACK (200 OK)
Disconnect
HO command
1. Handover required
Relocation complete
PS to CS Cancel Notification
PS to CS Cancel Notification ACK
Fallback timer expires before re-invite from UE is received
UE disconnection after HO, before fallback timer expiry
PS to CS Comp. ACK 
Figure 11.155  The usual cases of SRVCC failures.
www.ebook3000.com

LTE Optimization Engineering Handbook
594
eNB
MME
MSC
ATCF
HO required
PS to CS Request
INVITE (STN-SR)
200 OK
PS to CS Response
HO command
UE
BYE
SCC-AS
Start fallback timer
BYE
INVITE (ATU-STI)
200 OK
Release
CS call leg
Release of
MSC resources
BYE
Keep
PS call
200 OK
200 OK
Release of
remote side
Release
PS call leg
504 error
Radio coverage lost to both LTE and 3G, unsuccessful HO to 3G, fallback to LTE not possible
HO timer
expires
BYE
Start HO timer
ACK (200 OK)
HO command
eNB
MME
MSC
ATCF
PS to CS Request
INVITE (STN-SR)
200 OK
PS to CS Response
UE
SCC-AS
INVITE (ATU-STI)
200 OK
Release of ATGW
CS call leg bearer
Release of
MSC resources
200 OK
RNC
Relocation request
Release of remote side
Loss of 
radio link
BYE
HO timer
expires
Start HO timer
Release of
RNC resources
BYE
1. timeout
ACK (200 OK)
PS to CS Cancel Ack
Fallback 
timer expires
Iu Release
HO 
command
Handover required
PS to CS Cancel Notification
Unsuccessful HO, no radio contact to 3G nor LTE
Loss of radio link before HO command
Fallback
timer 
expires
Start fallback timer
Figure 11.155  (Continued)

Figure 11.156  RTP packet loss observation.
www.ebook3000.com

LTE Optimization Engineering Handbook
596
0.0%
2.0%
4.0%
6.0%
8.0%
10.0%
12.0%
14.0%
16.0%
–120 –115 –110 –105 –100 –95
–90
–85
–80
PLR
RSRP
0
125
130 131 132 133 134 135 136
Pathloss (dB)
137 138 139 140 141 142
0
10
20
30
40
50
60
70
80 Packet
drop (%)
50
100
150
200
250
300
350
400
Latency
Packet loss start exceeding 2%
latency (ms)
Figure 11.157  Packet loss rate versus path loss.
90
80
70
60
50
Drops % per 5 Second window
40
30
20
129
130
131
132
133
DL Pathloss (dB)
134
135
136
137
138
139
140
141
142
10
0
–10
E2E Packet Drop Rate
Avg–StDev
Avg
Avg+StDev
98%
Figure 11.158  98th and average packet drop rate versus path loss.

VoLTE Optimization
597
In normal, the scheduling request triggers a small grant that only allows a BSR and a 
small amount of data. For service aware UL grants estimation, eNB can use knowledge 
about the service behavior to guess arrival times and packet sizes, which is shown in 
Figure 11.160.
For VoLTE service, UL grants are arriving every 20 ms and grants for silence frames arrive 
every 160 ms. In cases where poor RF, RLFs, or handover issues are occurring, the UL grants 
might arrive at more than 60 ms. From the two vendors OMC statistics of VoLTE shown in 
Figure 11.161, it can be seen that the most used DL scheduling interval of the two vendor eNBs 
are: 40 ms scheduling cycle is applied in vendor2 eNBs, while 20 ms is used in vendor1 eNBs. It 
is obvious that the two vendors use different scheduling strategy.
Because UL grants are arriving infrequently, the UE’s MAC buffer will accumulates the RTP 
payloads. The buffer can increase significantly if multiple 20 ms intervals go without receiving 
an UL grant. The delayed or lack of UL gants will impact voice quality and even lead to a RTP 
timeout and packet loss. Figure 11.162 gives an example of non‐optimal UL scheduling grants 
inter‐arrival distribution in a live network.
So, if there is the packet lost, eNB may consider more UL scheduling in time domain if one 
RTP packet could not be transmitted in one subframe. The statistics of UL grant can be got 
from UE test log, LTE DCI information report (Figure 11.163).
In a live network, some of the packet drops are due to PDCP discards when UE sends multi-
ple SR before receiving UL grants, which cause long PUSCH scheduling interval due to no 
response to PUCCH scheduling request. Usually, two different cases illustrate why the long 
PUSCH scheduling interval is observed (Figure 11.164 and 11.165).
0.00%
2.00%
4.00%
6.00%
8.00%
10.00%
12.00%
14.00%
10
50
100
130
140
150
175
Number of VoIP UEs Per Cell
Ideal
Real
Figure 11.159  Packet loss rate versus No. of users (TDD 10 MHz bandwidth).
SR
Grant
Grant 280 bits
TX + BSR 280
NEW
NEW
Buffered packets
TX + BSR 320
Response time 
depends on load
320 bits
SR
Grant 640 bits
NEW
NEW
EMPTY
TX
Buffered packets
UE
eNB
UE
eNB
Figure 11.160  UL grants estimation of normal mode (left) and service aware (right).
www.ebook3000.com

LTE Optimization Engineering Handbook
598
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
0
30%
25%
20%
15%
10%
5%
0%
1
2
3
4
5
6
7
8
9
10
11
12
15
20
25
30
35
40
45
Scheduling Interval (ms)
50
55
60
70
80
90
100
110
120
130
140
150
160
1
2
3
4
5 10 15 20 25 30 40 50 60 80 100120140160
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
More
PDF
CDF
Vendor 1
Vendor 2
Figure 11.161  UL gant inter‐arrival distribution.
500
480
460
440
420
400
380
360
340
320
300
280
260
240
220
Gap in msec
200
180
160
140
120
100
80
60
40
20
0
No UL Grants
No UL Grants
High Uplink
Grant delay
Figure 11.162  UL scheduling grants inter‐arrival.

Figure 11.163  UL scheduling grants observation.
www.ebook3000.com

LTE Optimization Engineering Handbook
600
●
●No response to PUCCH scheduling request, repeated scheduling request with period =40 ms, 
thus lead to long PUSCH scheduling interval.
●
●No UL grant is assigned when UE has sent a BSR report, UE has to wait BSR retransmit timer 
(320 ms) expired to retransmit BSR.
The current SR period is generally set to 40 ms. If the number of SR Tx is more than 3, it is 
possible for QCI1 PDCP discard timer to fire. From the OMC statistics in a live network in 
Table 11.52, the percentage for the number of SR Tx >3 is 6.6%. So, it is needed to optimize the 
parameter of SR period in the UL scheduling of VoLTE.
Notes: It’s a known feature that UE quits working in case UE does not get grant despite 16 
scheduling requests and goes into out of sync. The amount of allowed missed SR is adjusted by 
scheduling
request
0 ms
PUSCH Transmit, UL data
PUSCH Transmit, UL data and BSR report
+30 ms
1st PUCCH Transmit, Scheduling Request
SR period = 40 ms
SR period = 40 ms
2nd PUCCH Transmit, scheduling request
3rd PUCCH Transmit, scheduling request
eNodeB send a UL grant
No UL Grant is assigned
No UL Grant is assigned
120ms has elapsed since last PUSCH
scheduling.
+40 ms
+40 ms
+6 ms
+4 ms
Figure 11.164  No response to SR.
PUSCH Transmit, BSR report included.
PUSCH Transmit, BSR report retransmit
No UL Grant is assigned
360ms has elapsed since last PUSCH
scheduling, some RTP packets are
discarded due to PDCP discard timer
PUCCH Transmit, scheduling request
0 ms
+320 ms
+40 ms
eNodeB send a UL grant
Retx BSR timer
(320 ms)
expired
Figure 11.165  BSR timer expired.

VoLTE Optimization
601
dsr‐transMax. The UE stops receiving an UL grants and thus, after the time dSrTransMax * 
cellSrPeriod = 64*10 = 640 ms is reached, UE releases PUCCH resources and performs the 
scheduling request via random access.
The parameter of pdcpDiscardTimer should be adjusted according to the statistics of the 
percentage for the number of SR Tx >3,this parameter configures the UE’s PDCP discard timer 
when setting up data radio bearers. If the value is set to “infinity,” the UE does not perform 
PDCP discard. The suggested optimized value can be QCI5 PDCP Discard Timer = infinity, 
QCI1 PDCP Discard Timer = 100 ms, and QCI6 PDCP Discard Timer = 150 ms.
11.10.7.4  Packet Loss due to Handover
It is worth to mention that intra‐LTE handover contributes most of the RTP packet loss. The 
longer handover interruption time, the more RTP packet will be lost.
By statistics, the number of packet loss is correlated with the user plane latency of handover. 
When intra‐LTE user plane handover interrupt time is 150 ms, the average number of packet 
loss is 4. In a live network, it is suggested that the maximum allowable number of packet loss 
should less than 5 per handover (Figure 11.166).
The RTP interruption time due to handover is especially much higher with the inter‐MME 
pool handover. One example is shown in Figure 11.167—before handover, UE received last RTP 
packet, SN is 2984, UE received the first RTP packet after handover success, SN is 2994, the 
number of lost RTP packet is 9. The downlink RTP interruption time is 174 ms, which is almost 
double compared with the intra‐MME group handover.
11.10.7.5  Packet Loss Due to Network Issue
Sometimes packet loss was due to the transmission line and the core network. Following statis-
tics are from stationary good RF AMR‐WB long call test under the conditions of no handover, 
no RLF, and very low DL/UL first BLER. During the call duration shown in Figure 11.168, at the 
Tx end, all RTP packets are transmitted to the network in the UL successfully. While at the Rx 
end, in total, 199 RTP packets are missing.
Packet loss in the network may trigger media inactivity detection in BGF, which releases the 
call after xx seconds. End users will experience no audio/one way audio and dropped call.
11.10.8  Call Setup Issues
Call setup success ratio means the probability of being able to successfully initiate a VoLTE 
­session, it is one of the most important KPI for VoLTE service.
If the cell’s call setup success rate is too low, it needs to analyze the following main indicators 
during the call setup: call establishment, media negociation, domain selection, the establishment 
of a dedicated bearer and the success rate of paging success rate. The main issues during call 
setup are shown in Table 11.53.
Table 11.52  The number of SR Tx distribution in a live network.
No.of SR Tx
1
2
3
4
5
6
7
8
9
10
>10
percentage
90.2%
2.4%
0.8%
0.7%
1.0%
0.6%
0.8%
0.6%
0.8%
0.6%
1.5%
www.ebook3000.com

LTE Optimization Engineering Handbook
602
In this part, the usual issues of call setup will be discussed. It can be classified to missed 
pages, IMS issues, dedicated bearer setup issues, CSFB call issues, aSRVCC issues, and RF 
issues, and so on.
11.10.8.1  Missed Pages
In mobility and dense urban environments, the usual case is that the MT UE frequently misses 
the first and second page due to idle cell reselection after the previous call ended, and finally 
the MT UE responds to the third page (TA wide), as shown in Figure 11.169. Since there is no 
response from the MT UE within 12 s (operator configured) of the SIP invite message, the IMS 
network will send a SIP 480 (unreachable) to the MO UE.
In this case, it is needed to optimize the paging scheme to minimize missed pages by the UEs 
and optimize paging retries and number of paging records to minimize MT UE call setup time 
and maximize PDCCH capacity. The related optimal parameters are shown in Table 11.54.
0
0
50
100
150
200
250
300
350
400
2
4
6
8
10
12
14
16
User plane interrupt time during HO (ms) 
Number of packet loss during HO 
Only partially transmitted over air
interface due to reasons other than HO
No part transmitted over air interface
due to reasons other than HO
Total packets received
in the PDCP layer
Lost due to HO
SGW
Discarded in Ethernet
Forwarded to target cell at HO:
Figure 11.166  DL No. of packet loss during handover versus handover latency.

Figure 11.167  Example of packet loss due to inter‐MME pool handover.
www.ebook3000.com

LTE Optimization Engineering Handbook
604
11.10.8.2  IMS Issues
Here are some examples related to IMS issues.
1)	 VoLTE call setup failure due to server_Internal_Error (500) (reason: “service_unavaila-
ble” 503)
When the MO UE initiated to setup a call, after receiving SIP 100 trying from IMS 
­network, MO UE received 503 errors sent by the network, and the cause value is “service 
unavailable.” From the side of the EPC, the MO UE releases the call request after 10 
­seconds due to UE did not receive SIP 183 session progress message for a long time 
(Figure 11.170).
This type issues is obviously due to core network, it needs to further investigate the configuration 
of RX interface, and user data cconfiguration of HSS and EPC.
After SBC received SIP invite, the RX interface shsould be triggered, but from the trace log, 
it is found that SBC did not trigger the RX port, report 503 errors instead. After checking the 
configuration of RX interface capacity license, it is found that only 100 users were configured. 
The reason is insufficient RV capacity.
Figure 11.168  Packet loss due to network issue.
Table 11.53  Call setup issues summary.
Call setup failure
Call setup time more than 6 sec
●
●Network not activate dedicated bearer after receive SIP 183 
session progress
●
●Network release dedicated bearer
●
●MT is registering on IMS
●
●No Paging to MT, paging issue, MT on GSM
●
●RF issue
●
●HO failure, aSRVCC failure
●
●SIP message issues
●
●IMS error (server_internal_error (500))
●
●redirection to GSM
●
●RACH problem
●
●MT CSFB
●
●frequent TFT updates/
modifications
●
●Paging late
●
●Network response for IMS msgis 
too late
●
●Bad RF
●
●RLF
●
●activate dedicated bearer late
●
●RACH problem

VoLTE Optimization
605
Table 11.54  The optimal parameters of paging.
Parameter
Recommended
Paging Scheme [1]st,[2]nd,[3]rd,[4]th page
[1]Last eNB or Last eNB + X neighbors,[2]TA,[3]TA list
Paging Retries
3
Paging interval(T3413)
Reduce to align with 2G network
Idle DRX Paging Cycle
1.28 seconds
Nb
2 (T)
maxNumber Of Paging Records
6
Paging Discard Timer
Align with T3413 and 2G network
Last eNB
Current eNB
Page 1(last eNB)
Page 2(last eNB)
Page 3(TA)
Page 3(TA)
RACH attempt
SIP: INVITE (SDP Offer): UE_TO_NETWORK
SIP: INVITE (SDP Offer): NETWORK_TO_UE
SIP 487(Request Terminated)
SIP: 100 TRYING
RACH + RRC Connection procedure + Default Bearer Setup
RACH + RRC Connection procedure + Default Bearer Setup
SIP: 100 TRYING
SIP: 180 Ringing
SIP: 180 Ringing
SIP Cancel
SIP CANCEL OK
Page 1
MT UE performed
Idle cell reselection
Page 2
Page 3
SIP Invite: 480(Unreachable)
MT Device received 3rd page
MO UE
Call Setup
failure
eUTRAN/IMS
Core
MT UE
UE Initiates a VoLTE
call
Idle Cell reselection
Figure 11.169  Missed pages.
www.ebook3000.com

MO UE
IMS
Case 1
Case 2
MO UE
IMS
RACH+RRC Conn. Setup
SIP: Invite(SDP Offer)
SIP: Invite(SDP Offer)
SIP: 183 Session Progress
SIP: SERVER UNAVAILABLE (503)
SIP: ACK
SIP: 100 Trying
SIP: 100 Trying
RRC Release
RACH+RRC Conn. Setup
SIP: SERVER INTERNAL ERROR(500)
SIP: ACK
RACH+RRC Conn. Setup
MO UE receives SIP 100
Trying message and then
receive
Service_unavaible (503)
from network with cause
of ‘media bearer lost’
Figure 11.170  VoLTE call setup failure due to server_Internal_Error (500).

VoLTE Optimization
607
2)	 SIP message issues‐VoLTE call setup failure due to SIP message missing
In the case of poor RF channel, SIP signaling is sent or received incomplete or cannot be 
delivery in time, thus will result in IMS related timer timeout and cancel the initiate conversation 
(Figure 11.171).
After the analysis according to the procedure in Figure 11.171, SIP message transmission 
failure was due to insufficient UL grant and even improper configuration of PDCP discard 
timer for QCI5 (300 ms), where RF coverage was poor. When the uplink delay became larger 
under poor RF condition, it would easily lead to QCI5 signaling packet loss. After PDCP QCI5 
discard the timer modified by the 300 ms to infinity, VoLTE call setup success rate was significantly 
improved (Figure 11.172).
3)	 No response to SIP 183 session progress message
MT UE sends SIP 183 session progress to network (4 times) successful at the interval 
of 3 s, 6 s and 12 s, but it doesn’t receive any response from network, finally MO UE can-
cel the call after 30s. It needs to further investigate the trace log of IMS network 
(Figure 11.173).
4)	 MO UE initiates to call when MT UE is doing registration on IMS.
The case of the MO UE call setup failure was due to MT UE was doing registration on IMS 
at the time, and MT UE did not receive paging message from the network. When MT UE com-
pletes registration on IMS, MO UE receives SIP 183 session progress message with the cause of 
“no user responding.” About 11 s after MO UE receives SIP PRACK 200 OK, it receive SIP 487 
request terminated with cause of “There were no URIs in the target set after the application of 
explicit preferences.”
SIP 183 session progress
www.ebook3000.com

MO
NW/IMS
RACH+RRC Conn. Setup
RRC Reconfig
RRC Reconfig
E2E RTP Audio
SIP: Invite(SDP Offer)
SIP: Invite(SDP Offer)
Paging+RRC Conn. Setup
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 100 Trying
SIP: 183 Session Progress
SIP: 183 Session Progress
SIP: PRACK
SIP: PRACK
SIP: 200 OK (PRACK)
SIP UPDATE 200
OK and SIP 180
Ringing missing.
SIP: 200 OK (PRACK)
SIP: UPDATE
SIP: 200 OK (UPDATE)
SIP: 180 Ringing
SIP: UPDATE
Alert User
User Answer
SIP: 200 OK (UPDATE)
SIP: 180 Ringing
SIP: ACK
SIP: ACK
SIP BYE
SIP BYE
SIP BYE (200 OK)
SIP BYE (200 OK)
SIP: 200 OK (SDP Answer)
SIP: 200 OK (SDP Answer)
MT
HO from
480 to 481
HO from 481 to
147 and TAU, then
HO from 147 back
to 481 and TAU.
Call Orig
Figure 11.171  VoLTE call setup failure due to poor RF.

VoLTE Optimization
609
SIP 487 request terminated
11.10.8.3  Dedicated Bearer Setup Issues
Dedicated bearer setup issues usually happened after UE received SIP 183 session progress mes-
sage, but network did not activate the dedicated bearer. It needs to further check the IMS trace 
why the call was cancelled by the network after resource allocation failure (Figure 11.174).
Sometimes dedicated bearer released by network happened during handover process. On 
the call setup process, the UE received SIP 100 Trying and send A2 report simultaniously, and 
redirection to another frequency, dedicated bearer was released then the UE change to idle 
mode (Figure 11.175).
Packet is discarded
Long Timer is needed
Figure 11.172  Longer QCI5 PDCP discard timer is needed.
www.ebook3000.com

LTE Optimization Engineering Handbook
610
This is a very common case that the call dropped due to dedicated bearer released during 
handover. When handover was trigged, the dedicated bearer that had established in source 
cell is released in target cell. It is also needed to check if the target cell support VoLTE func-
tion or not.
30s
183 Session Progress is
not forwarded to MO
3s
6s
12s
Call Orig
RACH+ RRC Conn. Setup
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: Cancel
SIP: ACK
SIP: Cancel
SIP: ACK
SIP: Invite(SDP Offer)
SIP: 100 Trying
Paging+RRC Conn. Setup
No response from network
SIP: 183 Session Progress
SIP: 183 Session Progress
SIP: 183 Session Progress
SIP: 183 Session Progress
MO
NW/IMS
MT
Figure 11.173  No response to SIP 183 session progress message.
MO
NW/IMS
MT
RACH + RRC Conn. Setup
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: Invite (PRECONDITION FAILURE (580))
SIP: Invite (PRECONDITION FAILURE (580))
SIP: ACK
SIP: ACK
SIP: Invite(SDP Offer)
SIP: 100 Trying
Paging + RRC Conn. Setup
~8s, MT does not receive
RRC Reconfig msg to
activate dedicated bearer
1st SIP 183 @16:21:52.620
SIP: 183 Session Progress
SIP: 183 Session Progress
Call Orig
2nd SIP 183 @16:21:55.627
Figure 11.174  No dedicated bearer activated.

Network release
dedicated bearer
in handover
process
Call Orig
RACH + RRC Conn. Setup
RRC Reconfig (DRB setup)
RRC Reconfig
RRC Reconfig (HO command, DRB released)
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: PRACK
SIP CANCEL
SIP CANCEL
SIP CANCEL (200 OK)
SIP CANCEL (200 OK)
SIP: 200 OK (PRACK)
SIP: PRACK
SIP: Invite (487 Request Cancelled)
SIP: Invite (487 Request Terminated)
Paging+RRC Conn. Setup
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: ACK
SIP: ACK
MO
NW/IMS
MT
Figure 11.175  Network release dedicated bearer in handover process.
www.ebook3000.com

LTE Optimization Engineering Handbook
612
11.10.8.4  CSFB Call Issues
Sometimes when the UE initiates a VoLTE call setup, the UE turns to CSFB call due to unspecific 
reasons. This is an usual case in a live network. The typical procedure is shown in Figure 11.176, 
where one UE is VoLTE call, another one is CSFB call, thus this will lead to long call setup time 
(about 20 seconds).
The case usually happened in a non‐VoLTE supported cell, two cases happened: one UE is 
CSFB call, and both UE are CSFB call. Sometimes if MT UE was in the non‐VoLTE cell, call 
setup was usually failed even MT UE CSFB is triggered by the network (Figure 11.177).
11.10.8.5  aSRVCC Failure
If the feature of aSRVCC is not enable, which means SRVCC handover happened after SIP 
180 Ringing has been received by originating UE while terminating UE has not yet answered 
with SIP 200 OK. The call setup will be failure. Alert phase may last several seconds 
(Figure 11.178).
11.10.8.6  RF Issues
From drive test analysis, it was observed that a large portion of the call setup failures were due 
to a poor radio environment. Some examples are shown below.
RACH+RRC Conn. Setup
MO UE
IMS
MT UE
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: PRACK
SIP: 183 Session Progress
ESR
RRC Reconfig
~ xx seconds
CS Paging + RRC Conn. Setup
UMTS Vocoder audio
MT UE CSFB
SIP: 200 OK (PRACK)
SIP: 180 Ringing
SIP: 200 OK (UPDATE)
SIP: 200 OK (SDP Answer)
SIP: ACK
RTP Audio
SIP: (UPDATE)
Figure 11.176  Long call setup time due to CSFB call.

VoLTE Optimization
613
1)	 VoLTE call setup failure due to RACH problem
The long call setup time is due to MO UE can’t perform RACH successful and MT UE 
receives paging late. MO UE tries to make VoLTE call, send multiple message1 and not receive 
message2. After 1 s, RACH was aborted due to T300 expires, RRC connection setup is failed 
due to RACH problem (Figure 11.179).
MO UE
IMS
MT UE
MO UE
IMS
MT UE
RACH + RRC Conn. Setup
RRC Reconfig
Only MT UE CSFB
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: PRACK
RACH + RRC Conn. Setup
RRC Reconfig
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: PRACK
SIP: PRACK
SIP REQUEST_TIMEOUT (408)
SIP SERVER_TIME_OUT (504)
Extended service request
SIP PRACK(481 Call Leg/Transaction Does Not Exist)
Paging +RRC Conn. Setup
CS Notification
UMTS UE OTA – CALL CONFIRMED
MT CSFB
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP Cancel
SIP Cancel (200 OK)
Paging+RRC Conn. Setup
CS Notification
CS Notification
Both MO UE and MT UE CSFB
UMTS UE OTA – CALL CONFIRMED
Disconnect: Normal, unspecified
MT CSFB
MO CSFB
UMTS UE OTA – PROGRESS
UMTS UE OTA – CALL CONFIRMED
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: 183 Session Progress
SIP Cancel
SIP Cancel (200 OK)
Figure 11.177  Two cases of CSFB call.
www.ebook3000.com

LTE Optimization Engineering Handbook
614
2)	 Long VoLTE call setup time due to RLF during call setup
MO UE sends SIP PRACK (it is successful in fact as MT UE has received it) but it does not 
receive DL RLC ACK. The CRC results of PDSCH are failed in all DL subframe for the data of 
C‐RNTI type. About 2 seconds later, MO UE declares RLF due to MAX retransmission reached. 
MO UE reestablishes RRC connection successfully on the same PCI, and it resends SIP PRACK 
and receives DL RLC ACK. This case is due to RLF (maximum retransmission reached) during 
VoLTE call setup, the call setup delay is 7.8 s (Figure 11.180).
3)	 MO UE tries to make VoLTE call, but RF is very poor
Right before MO UE tries to set up a call and RRC connection on 230/37900, RF of serving 
cell (PCI 230/37900) bacame very poor, RSRP = ~ −124dBm, SINR = ~ −9 dB, as shown in 
Figure 11.181. Then the UE intra‐frequency cell reselection to PCI 36/37900 is triggered, 
but it is failed due to SIB read failure. Finally, MO UE returns to 230/37900 and RRC con-
nection is setup successful finally. Right after QCI 5 was setup, MO UE is RRC realeased and 
redirected to 3G.
HO complete
SIP 180 Ring
HO command
Call drop
Figure 11.178  aSRVCCfailure.
Figure 11.179  VoLTE call setup failure due to RACH problem.

RACH +RRC Conn. Setup
RRC Reconfig
RRC Reconfig
RLF due to MAX RETRX
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
SIP: 180 Ringing
SIP: PRACK
SIP: PRACK
SIP: PRACK
SIP: 200 OK (PRACK)
SIP: 200 OK (PRACK)
SIP: 200 OK (UPDATE)
SIP: UPDATE
SIP: 180 Ringing
SIP: 200 OK (UPDATE)
SIP: UPDATE
Paging + RRC Conn. Setup
MO UE
3s
350ms
4s
3s
1.8s
IMS
MT UE
SIP: Invite(SDP Offer)
SIP: 100 Trying
SIP: 183 Session Progress
Figure 11.180  The CRC results of PDSCH are failed in DL frame 744 to 978.
www.ebook3000.com

Initiate a call on
serving cell
PCI 230/37900
Reselection to
cell 36/37900
SiB read failure
of cell 36/37900
return back to
cell 230/37900
QCI5 setup at
cell 230/37900
RRC release at
cell 230/37900
serving cell
230/37900,
RSRP is
pretty low
Improper
threshX-Low
configuration,
inter-freq cell
reselection can
not be triggered
Figure 11.181  VoLTE call setup failure due to poor RF.

VoLTE Optimization
617
RSRP: about 
-123dBm; SINR: 3dB; 
In the process of call 
setup, BLER became 
higher to 30%;
 
Since the UE didn’t 
receive SIP 200 OK 
within a certain period 
of time, the UE sent a 
CANCEL. 
Figure 11.182  Call failure due to high BLER.
It is also found that a high value of parameter “threshX‐Low” (set to 15), which delays rese-
lection even though the signal strength of the current serving cell (PCI 230/37900) is rela-
tively weak. The minimum RSRP requirement for reselection to low priority inter‐frequency 
neighbor cell (PCI 261/38350) is −94 (−124 + 15*2) dBm, though RSRP of neighbor cell (PCI 
261/38350) is 23 dB higher than serving cell, but it doesn’t match the reselection criterion at 
that time.
4)	 Call failure due to high BLER
The B‐party terminal sent a 180 ringing to the UE, but the UE didn’t receive SIP 200 OK in 
200 ms, then it sent a CANCEL after about 4.9 s, thus blocked calls happened after establish-
ment of dedicated EPS bearer (Figure 11.182).
The reason is poor wireless environment and high BLER, which caused a high latency about 
the B‐party UE sending a 200 OK with the final SDP answer.
11.10.8.7  Frequent TFT Updates
In dedicated bearer establishment procedure during call setup, resource allocation request is 
needed to to create a new traffic flow template for dedicated bearer. Here is an example of dedicated 
bearer TFT from NAS EPS session management messages:
0000 .... = Spare half octet: 0
.... 0101 = Linked EPS bearer identity: EPS bearer identity value 5 (5)
Traffic Flow Template - Traffic flow aggregate
Length: 13
001. .... = TFT operation code: Create new TFT (1)
...0 .... = E bit: Parameters list is not included
.... 0001 = Number of packet filters: 1
Packet filter 0
0011 .... = Packet filter direction: Bidirectional (3)
.... 0000 = Packet filter identifier: 0
Packet evaluation precedence: 0x00 (0)
Packet filter length: 0x09 (9)
Packet filter component type identifier: (16) IPv4 remote address type
IPv4 address: 10.102.50.0
IPv4 address mask: 255.255.255.0
Request to create a new 
traffic flow template
Packet filter for the TFT, 
requested by UE
Bearer resource allocation request (0xd4)
EPS quality of service - Required traffic flow QoS
www.ebook3000.com

LTE Optimization Engineering Handbook
618
Sometimes, frequent TFT updates happened for resource allocation and negociation due to 
eNB/IMS network wrong configuration. Frequent TFT updates will impact the call setup time 
and call setup success rate. Figure 11.183 gives an example to explain the issue.
11.10.8.8  Encryption Issue
When E‐RAB establishment failure during call setup is analyzed, it is found some failures were 
due to 3GPP cause 32 (encryption and/or integrity protection algorithms not supported). Some 
UEs can only support EIA0 in UE capability information, but EIA0 is only used in limited ser-
vice mode emergency call. If eNB did not have the LSMEC feature license, the eNB would 
reject this kind of E‐RAB establishment and caused call setup failure (Figure 11.184).
Figure 11.184  Encryption issue.
Modify max bit rate
Add packet filters
to existing TFT
SIP 183 session
progress
SIP PRACK
Resend SIP PRACK
SIP PRACK 200 OK
Replace packet
filters in existing TFT
Replace packet
filters in existing TFT
SIP 180 Ringing
Figure 11.183  Frequent TFT updates/modifications.

VoLTE Optimization
619
11.10.9  Call Drop
The criteria for a successful call completion is that the call is established successfully and in the 
end BYE and 200OK (BYE) has been executed by two sides. A call drop indicates an abnormal 
release of the established call, which can be triggered by nodes in LTE, EPC, MSS, and IMS 
with a variety of reasons, for example, UE failure, RF issues, loss radio connection, power fail-
ure, RAN or EPC initiate bearer release, IMS or MSS initiate session termination, or BYE has 
been initiated from UE but the session termination fails.
Call drop usually acts as RRC abnormal release, dedicated bearer abnormal release, UE 
entered idle mode during the call, or UE or IMS core transmits SIP cancel message.
RRC connection re‐establishment should be payed more attention to for analyzing call 
retainability. RRC connection re‐establishment is triggered by UE in the following situations: 
RLF is detected, handover failure, inter‐RAT handover failure from LTE, integrety check fail-
ure indicator received by layer 1, RRC connection reconfiguration failure, and so on. The rea-
sons of RRC connection re‐establishment include “reconfigurationFailure,” “handoverFailure,” 
and “otherFailure,” and so on.
11.10.9.1  Call Drop
Call drop is a special case compared to the normal call since this use case is when contact 
between UE and network gets lost. Abnormal release of VoLTE call that is not following the 
general call flow, or when a SIP BYE is received by the UE or network that does not have reason 
code “user release triggered.” Figure 11.185 gives a typical call drop due to RTP inactivity that 
leads to SIP BYE message was sent to UE.
A packet is discarded at eNB if it is not sent within the delay budget, or packet is discarded at 
UE if received beyond the delay budget (it can happen in case of retransmission), or packet is 
lost due to HARQ failure. Dependent on the number of lost packets, VoIP UEs are dropped (if 
15% of packets are lost in 10s window). Drop call will be significantly increased after more than 
300 VoIP UEs is observed. As shown in Figure 11.186 and Figure 11.187, UEs are dropped 
mainly from the cell edge. In reality it is expected that dropped ratio will be lower because 
admission control will not allow connect to the network UEs with very poor radio conditions.
Here are four examples to explain the reasons of the usual cases of call drop.
MO UE
MT UE
Core network
RTP Packet Stream
RTP Packet Stream
No UL grant for UE
Multiple SR sent to get UL Grant
RTP
inactivity
leads to
Network
sending
SIP BYE to
MO/MT
SR Failure due to UE sending Dsr-TransMax SRs
RACH (UL_Data) Abort (no Msg2) leads to RLF
RLF Recovery on Target PCI
SIP:BYE (NETWORK TO UE) 
SIP:BYE (NETWORK TO UE) 
RTP
NETWORK
LOSS
RTP
NETWORK
LOSS
Multiple measurement report sent
without HO command from eNB
Figure 11.185  RTP inactivity leads to SIP BYE was sent to UE.
www.ebook3000.com

LTE Optimization Engineering Handbook
620
Example 1: Call drop due to QCI‐1 profile not defined
As shown in Figure 11.188, UE initiates a call and default bearers (Internet and IMS) are set 
up. When MME requests eNB to setup QCI1 bearer (VoLTE bearer), eNB fails to setup QCI 1 
and responds with “not‐supported‐QCI‐Value.” The reason is QCI‐1 profile was not activated 
in the site.
Example 2: handover failure due to S1 path switch issue
As shown in Figure 11.189, UE sends measurement report to eNB for handover, and handover 
preparation is successful, then eNB sends RRC connection reconfiguration message (handover 
execution phase). UE responds to target cell with RRC connection reconfiguration complete. 
When target eNB sends S1 Path switch request to MME, MME does not respond with S1 path 
switch acknowledge. The reason is tx2relocoverall timer expires and the call drops.
1.400%
1.200%
1.000%
0.800%
0.600%
0.400%
0.200%
0.000%
0
50
100
150
200
Number of VolP UEs per cell
% of dropped VolP UEs
250
300
350
400
For low number of UEs even 
1 dropped UE significantly 
affects overall statistics. 
Figure 11.186  Call drop versus No. of UEs.
1,000
900
800
700
600
500
400
300
200
100
0
–100
–200
0
250
500
750
X-Axis
Y-Axis
1,000
1,250
Session dropping positions
Figure 11.187  Call drop distribution. (See insert for color representation of the figure.) 

VoLTE Optimization
621
Example 3: handover failure (cell range issue)
UE sends measurement report to eNB for handover as shown in Figure 11.190, handover 
preparation is successful and eNB sends RRC connection reconfiguration message. UE attempts 
RACH for handover, but RACH fails at message2, RACH failed as the target cell is 18 kms away 
from the handover attempt location.
Example 4: call drop due to uplink issue
In this case, the serving cell’s RSRP is about −90 to −86 dBm, the downlink coverage is not an 
issue obviously. The uplink first transmission BLER raises up to 65% before RRC connection 
release is received during last second. This implies a serious uplink issue. The scheduled 
PUSCH MCS was 23 even though the BLER is very high. PUSCH uplink link adaptation seems 
not working properly (Figure 11.191).
Figure 11.188  Call drop due to QCI‐1 profile not defined.
Figure 11.189  Call drop due to S1 path switch issue.
www.ebook3000.com

LTE Optimization Engineering Handbook
622
11.10.9.2  Radio Link Failure
As mentioned in Chapter 6, radio link failure (RLF) can be UE detected or eNB detected. If the 
RLF is UE detected and can make a successful RRC re‐connection before MME releases the UE 
context, then VoLTE call will continue. If the RLF is eNB detected then eNB will request MME 
to release the bearers resulting in VoLTE drop.
Radio link failures primarily impact the following VoLTE KPIs, but about 85% of RLFs can be 
revived, the remaining 15% RLFs may result into a VoLTE drop. Tests show that call dropped 
on poor point at RSRP around −120 to −118dBm, SINR around −3 to −6 dB. The Figure 11.192 
shows SINR versus RSRP distribution for VoLTE drops that occurred as a result of RLF 
(Figure 11.192).
When RLF happened due to high physical layer BLER, it is needed to check PUSCH Tx 
power versus UL MCS versus PHICH NCK statistics. In Figure 11.193, N310 was expired at 
SFN #189, and Timer T310 (1000 ms) started. T310 was expired at SFN#289 and RLF was 
­triggered due to high physical layer BLER finally.
If RLF is due to maximum RLC retransmissions are exceeded, as shown in Figure 11.194, 
from SFN#25, all PDSCH in C‐RNTI CRC results failed. As UE could not decode PDSCH for 
C‐RNTI, it could not get the RLC ACK info from the network. Therefore, it will be re‐transmitted 
in UL RLC layer. And finally, RLF is triggered.
Except for poor coverage, VoLTE drop can be caused by high interference, PCI confusion 
neighbor relation, or missing inter‐frequency relation, and so on. For improving VoLTE retainability, 
it is essential to configure RLF Timer per QCI in LTE network. LTE enables different settings 
between voice, data and other services. Service based RLF configuration settings will sent via 
RRC connection reconfiguration or RRC connection reestablishment messages to UE. The RLF 
timers and constants includes n310, n311, t301, t310, t311.
Example 1: RLF due to RACH problem and no UL grant received
UE didn’t get UL grant after sending consecutive 64 scheduling requests, the scheduling 
request interval is 40 ms, then it initiate RACH procedure, but message4 was not received. This 
RLF case is due to RACH failure caused by MAC contention resolution timer expired. In 
this case, RACH reattempted every 100 ms (this is because RACH resource re‐occurring every 
20 ms and contention resolution timer set to 64 ms, RACH response window size =10 ms), after 
8 consecutive RACH attempts, the radio link failure is triggered due to RACH problem 
(Figure 11.195).
Figure 11.190  Call drop due to handover failure.

Figure 11.191  Call drop due to uplink issue.
www.ebook3000.com

LTE Optimization Engineering Handbook
624
Example 2: handover failure
UE transmitted measurement report and no reply from eNB, 5 sec later, MT UE eNB 
tRelocOverallValue (5 sec) timer was expired and abnormal release occurs. When UE lost and 
after 8 sec, the UE re‐camped back to LTE cell, but SIP connection had already dropped by eNB 
initiated release (Figure 11.196).
In such case, call retainability related parameters change should be taken into account to 
avoid earlier SIP drop. The possible solution is that tRelocOverall timer was changed to 10s, 
T311 also needs to be adjusted based on tRelocOverall, T311 was changed from 3 sec to 10 sec. 
When UE tried to RRC connection again and SIP was still alive, end user would experience the 
voice interruption instead of drop call (Figure 11.197).
11.10.9.3  RTP‐RTCP Timeout
Another usual scenario of VoLTE drops are caused by RTP‐RTCP timeout, declared by telephony 
application server as an example below.
As shown in Figure 11.198, 10 seconds prior to BYE from telephony application server, UE 
was in poor SINR zone, RLF was seen on layer 3 shortly. UE re‐establishment of RRC connec-
tion along with QCI‐1 and QCI‐5 was done successfully. QCI 1 deactivation was seen along 
with the BYE message. IMS log would be able to show the cause of the 10 sec gap on uplink RTP 
packets even with the presence of QCI 1 bearer.
RLF
PCI 109/38350
PCI 120/37900
35
–80
–85
–90
–95
–100
–105
–110
–115
30
25
20
15
10
5
0
–5
–10
–15
–20
–120
N310 expired,
T310 start
T310 expired,
RLF triggered
RLF due to low RSRP/SINR
RSRP
SINR
VoLTE Drops - RSRP vs SINR
–95
–5
0
5
10
–10
–15
–100
–105
–110
–115
Majority RLFs at
cell edge
RSRP (dBm)
90% RLFs occur in SINR<0
Serving Cell RSRP (dBm)
–120
SINR (dB)
Figure 11.192  Radio link failure.

Out of Sync BLER(%)
N310 start, SFN#170
80
70
60
50
40
30
20
0
350
0
100
150
200
250
300
Out of Sync Count
SFN
10
50
T310 expired,
SFN#289
N310 expired,
T310 start, SFN#189
Figure 11.193  RLF due to high BLER.
www.ebook3000.com

LTE Optimization Engineering Handbook
626
11.10.9.4  RLC/PDCP SN Length Mismatch
Serving cell and neighbor cell’s RLC/PDCP SN length mismatch is a typical cause for VoLTE 
drop without RRC drop, when PDCP SN length for QCI 1 mismatch in source and target cell 
or RLC SN length for QCI 1 mismatch in source and target cell.
An example is shown in Figure 11.199, UE was served by cell PCI 458. When Event A4 is triggered 
for IFLB handover, source cell PCI 458 sends handover request message to target cell, target cell 
accepts two default bearers but does not admit VoLTE bearer. In this case, handover is successful 
but VoLTE bearer is dropped, 20s later, S1 UE context is released due to user inactivity.
11.10.9.5  IMS Session Drop
SIP errors usually lead to session drop. Typical SIP errors shown in Table 11.55 are due to 
abnormal SIP procedure. If SIP invite response from network is with cause value 606 not acceptable, 
blocked calls will happen. Abnormal SIP BYE message will lead to UE session release. Sometimes 
sudden Bye request sent to VoLTE UE during a call, and this is tagged as a VoLTE dropped call. 
The usual reason of SIP erroes include cause 503, “Service Unavailable” and cause 500, “server 
internal error,” and so on.
Figure 11.194  RLF due to maximum retransmissions exceeded.

VoLTE Optimization
627
UE
. . . . .
Last MAC UL PDU sent
UE sends 64 consecutive scheduling request
No UL Grant is received
No UL Grant is received
UE repeat RACH procedure for 8 times, but MSG4
was not received, RACH failure due to contention
resolution timer expired
eNB
Scheduling Request Count
RACH attempt Count
64
dsr-TransMax=64, Preamble trans max=8
6517
6597
6677
6757
6837
6917
6997
7077
7157
7237
7317
7397
7477
7557
7637
7717
7797
7877
7957
8037
8117
8197
8277
8357
8452
8652
8852
9052
SYS FN+SUBFN
70
60
50
40
30
20
10
0
10
9
8
8
7
6
5
4
3
2
1
0
Radio Link Failure
due to RACH problem
Figure 11.195  RLF due to RACH problem.
Figure 11.196  Call drop due to handover failure.
www.ebook3000.com

Measurement Report
UE
S-eNB
T-eNB
New-eNB
MME
HO request
HO request ack.
RRC Reconfiguration
Out of sync
Expire
= Radio link failure
Before change,
voice drops
voice
voice
Stop
Service Request
TRelocOverall
Value 10sec
RRC Connection Procedure
UE Context release command
Initial Context
Procedure
(Abnormal)
T311:
3 sec
T310: 2 sec
Find a cell
Measurement Report
UE
S-eNB
T-eNB
New-eNB
MME
HO request
HO request ack.
RRC Reconfiguration
Out of sync
Expire
=Radio link failure
voice
Stop
Stop
Stop
TRelocOverall
Value 10sec
RRC Connection Re-
establishment Request
UE Context
Release
Path Switch Req.
T311: 10sec
T310: 2 sec
Find a cell
RRC Connection Re-establishment Complete
RRC Connection Re-establishment
T301:
400 ms
Path Switch Req. Ack.
Figure 11.197  Retainability related parameters change.

Figure 11.198  RTP‐RTCP timeout declared by telephony application server.
www.ebook3000.com

LTE Optimization Engineering Handbook
630
Figure 11.199  RLC/PDCP SN length mismatch.

VoLTE Optimization
631
Sometimes SIP 503 and many cases of SIP 480, 481 are also due to radio causes. There is no 
audio can be seen during ping‐pong or X2 handover, the reasons include too many PCI with no 
dominance, poor RF, missing neighbor, ANR not activated, and so on.
If the procedure missing SIP PRACK request/PRACK response/invite response (200OK) from 
IMS during call establishment procedure, then IMS sent SIP BYE request with error cause “503 
service unavailable.”
Resulting 487 request terminated due to the SIP cancel signaling message, which leads the 
UE to initiate a CSFB call. Figure 11.200 gives a description of IMS session drop category and 
distribution in a live network.
If missing SIP BYE response message from IMS (to response SIP BYE request message from 
UE) for the normal call clearing or RTP timeout, IMS will send SIP BYE request again to UE 
with error cause “503 service unavailable.” Periodic SIP re‐registration failure will lead to SIP 
BYE with cause “500 server internal error” from IMS. For more detail IMS session drop, it is 
needed to analyze SIP session drop cause codes distribution and impact of IMS network on 
VoLTE drop call rate.
51%
38%
11%
VoLTE drop duing call
established (503 Service
Unavailable)
Normal call clearing w/o
IMS Response (503 Service
Unavailable)
Periodic SIP RE-
REGISTRATION failure
(500 Server Internal Error)
Figure 11.200  IMS session drop category and distribution in a live network.
Table 11.55  Typical SIP errors.
Issue description
Resolution plan
Abnormal SIP BYE 503 service unavailable. Confirmed to be radio issue
Radio optimization
SIP 480 temporarily unavailable. Confirmed to be caused by non VoLTE leg.
Radio and core 
optimization
SCTP failures caused mainly by physical link flapping.These IP connectivity issues 
can result in dropped calls and out of sequence packets.
Transimission
SIP 408, S‐CSCF forwards invite for cancelled call to UE which answers with  
200 OK but hears nothing and call drops
S‐CSSF
www.ebook3000.com

LTE Optimization Engineering Handbook
632
11.10.9.6  eNB/MME Initiated Drop
As mentioned in Chapter 6, abnormal E‐RAB releases due to radio are caused by faults such as 
the number of RLC retransmissions reaching the maximum, UE uplink out of synchronization, 
or signaling procedure failures that are resulted from weak coverage, and uplink interfer-
ence etc.
The E‐RAB release procedure may be initiated by the MME by sending an “E‐RAB release 
command” (or “UE context release”) message containing a list of E‐RABs to be released to the 
eNB. Alternatively the eNB can initiate the release of the E‐RAB by sending an “E‐RAB release 
indication” message containing at least one E‐RAB to be released toward the MME. In a live 
network, more than 20% of MME initiated VoLTE drops out of total VoLTE drops, most of 
release causes are “unspecified” (Figure 11.201).
The mostly case of call drop is due to eNB send UE context release request to MME with cause 
“radio‐connection‐with‐ue‐lost,” and MME response UE context release command to eNB.
Another example of call drop was due to “implicitly detached”24 as UE has been detached by 
MME. It is a common cases found in a live network that sis due to MME internal bugs to detach 
the UE (Figure 11.202).
For more detail eNB/MME initiated drop, it is needed to analyze S1 abnormal release cause 
codes distribution for dedicated bearers. Improvements targeted at SIP 408, 481, 404, and 500, 
will reduce the overall abnormal SIP BYE KPI.
11.10.10  Packet Aggregation Level
Packet aggregation level is an important indicator for VoLTE performance. Under the premise 
of guaranteeing the user’s speech perception, the bigger the average packet aggregation level, 
the more efficient the network will be. In downlink, packet aggregation depends on load and 
configured voice target delay. For 80 ms packet aggregation is mostly not needed and used quite 
rare. Uplink packet aggregation level is determined by UE’s TBS, which decides the largest 
number of packets that can be assembled together.
0
1000
2000
3000
4000
5000
6000
7000
8000
9000
2015-01-05 0:00
2015-01-06 0:00
2015-01-07 0:00
2015-01-08 0:00
2015-01-09 0:00
2015-01-10 0:00
2015-01-11 0:00
2015-01-12 0:00
2015-01-13 0:00
2015-01-14 0:00
Average of VOLTE_ENB_DROPS
Average of VOLTE_MME_DROPS
Figure 11.201  VoLTE drop reasons.
24  Implicit detach: The network detaches the UE, without notifying the UE. This is typically the case when the 
network presumes that it is not able to communicate with the UE, for example, due to radio condition.

VoLTE Optimization
633
Assume uplink packet aggregation is mandatory (3 packets) for VoIP. SID packets (30% of all 
packets) cannot be aggregated therefore mean aggregation level should be about 2.2. In fact it 
is a bit lower because for power limited users segmentation can occur. Under ideal buffer con-
ditions, in uplink, since SID packets cannot be aggregated, packet aggregation level can be 1.8.
	
Assume second
traffic
SID packet aggregation
So
1
24 20
3 160
2
*
*
,
,
the real packet aggregation
(
)
*
*
/
.
12 2
3 1
15
1 8
	
Under real buffer simulation, the estimated handover delay is larger than that under ideal 
buffer simulation. Therefore, the packet aggregation level under real buffer simulation is 
smaller than that under ideal buffer simulation (Figure 11.203).
11.10.11  VoIP Padding
A high percentage of MAC padding of VoLTE packet will degrade the system capacity, especially 
if it needs to pay more attention to uplink. MAC padding is occurring primarily at the lower pay-
load size region. In live network, if a significant amount of MAC padding is used on the UL, it 
0
0.5
1
1.5
2
2.5
10
50
100
130
140
150
175
Number of VoIP UEs Per Cell
UL mean VoIP packet aggregation level
PA = 1
PA = 2
Ideal buffer
PA = 2
Figure 11.203  Packet aggregation level.
Figure 11.202  Implicitly detached.
www.ebook3000.com

LTE Optimization Engineering Handbook
634
needs to be optimized. Some is expected due to RTP and TB size granularity mismatch. As shown 
in Figure 11.204, it needs to be optimized when the MAC padding is higher than 50%.
If Grant sizes granularity does not match RTP payload size granularity, some high paddings 
are expected. It has been found that in live network, there’s a relation between percentage of 
MAC padding and UL grant inter‐arrival.
From Figure 11.205, it can be seen that if grants is less than 20 ms or more than 30 ms, UL 
transmissions will have more than 75% padding. When the grants is between 20 and 30 ms, the 
padding is minimal and expected.
Some amounts of padding are expected due to RTP payload size and TB size granularity. For 
grants arriving less than 20 ms, a VoIP payload has not been generated and the grant must then be 
used with close to 100% padding. For grants arriving more than 30 ms, the UE’s MAC buffer has 
accumulated VoIP payloads and the eNB conservatively over‐grants on the UL that will lead to 
high padding.
Need to optimize
0.00%
5.00%
10.00%
15.00%
20.00%
25.00%
30.00%
35.00%
40.00%
45.00%
50.00%
55.00%
60.00%
65.00%
70.00%
75.00%
80.00%
85.00%
90.00%
95.00%
100.00%
0.25
1
CDF
0
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0.2
0.15
0.1
0.05
0
MAC PDU
(bytes)
UL GRANT
(bytes)
% of padding
Comments
43
43
43
43
43
47
55
67
97
125
8.51
Best Assignment
Conservative Grant allocation to accommodate
ROHC O-mode fluctuation between SO    FO
Most Conservative Grant to fit RTP packet with
No ROHC Compression.
21.82
35.82
55.67
65.60
PDF
Figure 11.204  UL MAC padding statistics.

VoLTE Optimization
635
11.10.12  VoIP Ralated Parameters
VoIP performance–related parameters include:
●
●LogicalChannelSR‐Mask: Prevents the SRs (scheduling request) from being triggered for a 
specific logical channel (carrying voice traffic) when a UL SPS grant is configured;
●
●SR‐Prohibit Timer: Prevents unnecessary SR transmissions during a VoLTE call;
●
●Short SR period: SR periodicity was reduced from minimum 5 ms to 2 and 1 ms to ensure the 
voice packet is served within 10 ms;
●
●CQI‐Mask: Limits the transmission of the CQI, RI, PMI reports to the on‐duration period 
during the connected‐DRX cycles;
●
●Explicit congestion notification (ECN): Enables the eNB to control the initial codec rate 
selection and/or trigger a codec rate reduction;
●
●Handover parameters (A3 parameters): Optimize A3 event related parameters shown in 
Table 11.56 to trigger handovers earlier than data service.
●
●RLC and HARQ parameters (see Table  11.57): The operator can improve the network 
­performance by optimizing RLC parameters, including the maximum number of ARQ 
retransmission, the length of poll retransmit timer, and SN lengths of RLC PDU and PDCP 
PDU. Increase UL/DL HARQ process will be holding on to resources longer, and that may 
impact latency/voice quality.
11.10.13  Video‐Related Optimization
Video telephony is possibly the most challenging application because it needs stringent end‐to‐end 
delay requirements and multi‐media synchronization (“lip sync”).25
It is recommended not to use the delay‐based scheduler for video phone traffic since it 
might in case of very poor radio conditions or high system load cause possible starvation of 
MBB users. Selecting proportional fair as the scheduling strategy is supposed to show better 
0
0.00%
15.00%
30.00%
45.00%
60.00%
75.00%
>75%
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
Grants Inter Arrival <20ms PDF
Grants Inter Arrival <20ms CDF
Grants Inter Arrival 20ms to 30ms PDF
Grants Inter Arrival 20ms to 30ms CDF
Grants Inter Arrival >30ms PDF
Grants Inter Arrival >30ms CDF
Figure 11.205  UL grant inter‐arrival versus percentage of MAC padding.
25  The audio and video signals take different amounts of time and processing power to compress, and they may be 
sent in separate flows (RTP “sessions”).
www.ebook3000.com

LTE Optimization Engineering Handbook
636
overall network performance and more fairness between video and MBB users. The possi-
ble drawback, however, of a proportional fair scheduling strategy might be about fulfillment 
of the delay requirements for a video user. It might results in poor perceived video quality 
(not be able to fulfill bandwidth requirements for HD video) or out‐of‐sync between voice 
and video.
In video telephony service, the VoIP and video streams are sent synchronously but car-
ried on separate bearers with different QCIs and different delay budgets. If the video 
stream fails to get established, gets lost during the session, or does not fulfill quality 
requirements, the call can continue as VoIP only or be terminated. Audio and video 
Table 11.56  Handover parameters for VoLTE.
Parameter
Recommended
Comments
Triggerquantity
RSRP & RSRQ
Both RSRP and RSRQ triggering can allow for faster handover 
especially in loaded cells
reportQuantity
Both
Hysteresis
4 (2 dB)
Small values can cause cases of going out of triggering 
conditions earlier and TTT reset
a3‐offset
6 (3 dB)
Low value would cause more handovers and possible ping 
pongs impacting VoLTE interruption
timeToTrigger
240 ms
Higher value delays handover
ReportAmount
1
It stopped after only one measurement, otherwise causing 
delayed handover especially if there is no reply to the first MRM
filterCoefficient
fc8‐11
If this value is set too low, measurement reports could be 
triggered by rapid, temporary, short term fluctuations in RSRP
ReportInterval
240 ms
Currently does not apply since only ReportAmount = 1
Table 11.57  RLC and HARQ parameters for VoLTE.
Managed object
Parameter
Existing value
New value
SignalingRadioBearer = 1, DataRadioBearer = 1
dlMaxRetxThreshold
8
32
SignalingRadioBearer = 1, DataRadioBearer = 1
ulMaxRetxThreshold
8
32
QciProfilePredefined = qci1
tReorderingDl
35
75
QciProfilePredefined = qci1
tReorderingUl
35
60
SignalingRadioBearer = 1, DataRadioBearer = 1
tPollRetransmitDl
80
60
SignalingRadioBearer = 1, DataRadioBearer = 1
tPollRetransmitUl
80
60
SignalingRadioBearer = 1
tStatusProhibitDl
0
0
SignalingRadioBearer = 1
tStatusProhibitUl
0
0
DataRadioBearer = 1
tStatusProhibitDl
25
15
DataRadioBearer = 1
tStatusProhibitUl
25
15
MACConfiguration = 1
dlMaxHARQTx
4
7
MACConfiguration = 1
ulMaxHARQTx
4
7
Note: tReordering timer is used by the receiving side of an AM RLC entity and receiving UM RLC entity in order to 
detect loss of RLC PDUs at lower layer.

VoLTE Optimization
637
­synchronization can be achieved in the UE by using timing information carried in the 
RTCP packets for both sessions.
11.10.13.1  Video Bit Rate and Frame Rate
A particular frame rate drives the bit rate required for a certain screen size and resolution 
and measuring bit rate is very important due to its paramount importance to video quality. 
A too low bit rate will produce too low frame rate for the particular screen/resolution and 
results in sluggish screen updates, possibly also with partly corrupt image (frozen pixels). 
Video bit rate on IP level can be calculated from the IP traces and is typically supported by 
measurement tools. Note that this will produce bit rate including headers for RTP, UDP and 
H.264. These headers need to be removed from the calculation to derive the raw video pay-
load bit rate.
Video frame rate (frames/sec) is one of the important KPI for end‐user perception of video. 
Video frame rate is directly connected to bit rate since the bit rate determines how fast a frame 
is transferred for a given resolution and screen size. Frame rate is captured together with PEVQ 
score per sample period to correlate the frame rate with video quality. Frame rate is one of the 
parameters used in the PEVQ algorithm model.
Frame rate can be calculated based off the IP traces using the frame marker in RTP header 
but preferred method is to have network tool support, especially for the per sample correlation 
with other video parameters. Alternatively, a video test pattern can be used to determine 
whether frame rate is below or above a certain reference rate.
It should be noted that multiple RTP packets are required to transfer one single video frame. 
Typically two packets are required but up to 10 RTP packets have been observed. The H.264 
codec encodes the delta information needed for transferring subsequent frame and this 
amount requires varying number of RTP packets, depending on level of detail and movements.
11.10.13.2  Video MoS and Audio/Video Sync
Perceived video quality is content‐dependent. The basic video quality is dependent of a set of 
parameters: the codec used, bit rate, resolution, frame rate. To produce high‐quality video, it is 
necessary to consider that fine detail and complex movement are difficult to encode and require 
high bitrate, while low detail, little movement and static scenes can be reproduced with good 
quality using relatively low bitrate. A MoS value of 3.5 is used as the acceptance threshold.
The video path delay is the metrics for measuring the delay from the time a video frame is 
captured in the sending UE until viewed in the receiving UE.
FER (Frame error rate) is the frame error rate after, for example, forward error correction 
schemes. Assumption of acceptable visible degradations: FER not more than 2*10−3 per 20 
seconds (Figure 11.206).
The A/V sync is the offset in delay between video and audioand is of crucial importance for 
the quality perceived by the end‐user. This offset may be positive or negative relative to the 
video frames, that is, the audio may be ahead or behind the video when measured. According 
to ITU‐T J.100, audio must at the most be 20 ms ahead of video and video must at the most be 
40 ms ahead of audio. It’s preferred that video is ahead of audio, because from user experience 
it’s perceived less annoying if video can be viewed but audio is delayed (Figure 11.207).
11.10.14  IMS Ralated Timer
IMS‐related timers in Table 11.58 configured by IMS also impact the VoLTE performance.
At every SIP invite, the state machine starts Timer A, whose initial value is T1 (500 ms). If no 
provisional response, that is, 100 TRYing or 180 RINGing, or final response, that is, 200OK, has 
www.ebook3000.com

LTE Optimization Engineering Handbook
638
been received, the timer value is doubled and a new invite is retransmitted, until a timeout 
value Timer B is reached, after which the transaction is terminated.
If the user agent (UA) client, sender side, receives a provisional response, it stops timer A and 
waits for a final response for a period of time lasting at maximum Timer D.
In Figure 11.208 (a), Timer A is doubled at every retransmission of invite message and limited 
by Timer B. In the second case, a similar scheme is applied to Timer G (500 ms) (whose timeout 
is Timer H) to handle the retransmissions of final responses 3xx at the server side, as shown in 
Figure 11.208 (b). As far as the correspondent user is concerned, in Figure 11.208 (c), Timer J is 
the timeout value for the UA client at correspondent side. When it expires no more final 
responses are sent.
11.11  ­UE Battery Consumption Optimization for VoLTE
Lower average UE battery consumption depending on background activity, device hardware, 
and network settings. When UE is in RRC idle state, it only wakes up periodically to check if 
there is any paging indication from the network. This feature is called DRX (discontinuous 
reception), intends to provide UE battery power saving when between active data transactions, 
or the long inactivity duration before UE is moved to RRC idle state. During DRX off state, UE 
shuts down the RF circuitry for Tx/Rx, stops transmitting on PUCCH/SRS, which may reduce 
the interference on those channels.
eNB
eNB
Terminal
Terminal
<10^4 PLR on the Wireline
Packet Loss budget
<10^3 PLR
<10^3 PLR
Figure 11.206  Frame error rate.
0
0,5
1
1,5
2
2,5
3
3,5
4
4,5
5
–140
–100
–60
0
60
100
140
240
ms
MOS
Audio ahead of video
Video ahead of audio
25 Hz
12.5 Hz
8.33 Hz
Figure 11.207  Video MoS versus A/V sync.

VoLTE Optimization
639
Power saving is possible also in connected mode. Connected mode discontinuous reception 
(C‐DRX) allows the UE to monitor the PDCCH periodically and enter sleep mode between the 
monitoring periods while still remaining in RRC connected state. Thus C‐DRX reduces UE 
current consumption in RRC connected state when no data is transmitted.
The DRX cycle pattern can be divided in two parts: the long DRX cycle, which can range 
from 20 ms to 2.5 s, and the optional short DRX cycle, which is usually defined between two 
and four times smaller than the long DRX cycle. Using a combination short cycle and long cycle 
enables the usage of a shorter DRX inactivity timer and more frequent monitoring right after 
the last data is processed, while allowing for higher battery savings when new data takes longer 
to arrive.
According to GSMA IR.92 it is required for terminals and LTE RAN to support DRX during 
an active VoLTE call to save terminals battery life, and a longDRxCycle or a shortDRxCycle is 
configured. In LTE, QCI dependent DRX settings feature makes it possible for different ­services 
to have different DRX settings, so as to save UE battery without sacrificing system perfor-
mance. Therefore, whenever a VoLTE call is established, this feature allows specific DRX con-
figuration to be used (Figure 11.209).
When UE is in persistent awake mode, DRX is switched off and there is no power saving for 
UE, this is used for large continous volume traffic, for example, data cards, streaming services, 
non‐DRX capable UEs, and so on. When UE is in power saving mode, short and long DRX 
cycles can be used to save a battery with an accepted service latency for web browsing, VoIP, 
or any other always‐on applications with small volume and long inactivity periods, and so on. 
Table 11.58  IMS‐related Timer.
Timer
Default value
Meaning
T1
500 ms
Round‐trip time (RTT) estimate. SIP retransmit interval.
T2
4 sec.
Maximum retransmission interval for non‐invite requests and 
invite responses
T4
5 sec.
Maximum duration that a message can remain in the network
Timer A
initially T1
invite request retransmission interval, for UDP only
Timer B
64*T1
invite transaction timeout timer
Timer C
3 min.
Maximum time a SIP Proxy Server waits to receive a 
provisional response to an invite
Timer D
32 sec.
Wait time for response retransmissions
Timer E
initially T1
Non‐invite request retransmission interval
Timer F
64*T1
Non‐invite transaction timeout timer
Timer G
initially T1
invite response retransmission interval
Timer H
64*T1
Wait time for ACK receipt
Timer I
T4 for UDP
Wait time for ACK retransmissions
0 sec. for TCP and SCTP
Timer J
64*T1 for UDP
Wait time for retransmissions of non‐invite requests
0 sec. for TCP and SCTP
Timer K
T4 for UDP
Wait time for response retransmissions
0 sec. for TCP and SCTP
www.ebook3000.com

LTE Optimization Engineering Handbook
640
UE’s DRX capability can be got in initial context setup messages, there are three DRX types UE sup-
ported as following.
●
●No DRX support (FGI 5 = 0)
●
●Partial DRX support (FGI 5 = 1 and FGI 4 = 0, the UE only support long cycles)
●
●Full DRX support (FGI 5 = 1 and FGI 4 = 1)
When the UE enters the DRX mode, it monitors the PDCCH discontinuously. DRX allows 
the UE periodically turn off its receiver for a certain time period (configurable by network) 
before wakes up again to listen to PDCCH channel to see if the network has new data for the 
Timer A=2 j–1T1
UA Client
(Sender side)
(a)
UA Server
(SIP Proxy)
INVITE
INVITE
200 OK
ACK
200 OK
ACK
100 TRYing
180 RINGing
Timeout=Timer B
Timeout=Timer D
Session closed
(b)
(c)
ACK
200 OK
INVITE
100 TRYing
180 RINGing
INVITE
INVITE
3xx Resp.
ACK
3xx Resp.
UA Client
(Sender side)
UA Server
(SIP Proxy)
UA Client
(Correspondent
side)
UA Server
(SIP Proxy)
Timeout=Timer H
Timeout = Timer J
Timer G=min
(2r–1T1,T2)
Session closed
Session closed
Figure 11.208  Timers in the SIP state machine.

VoLTE Optimization
641
device. This makes it possible to save UE battery during periods when the UE is in RRC_­
connected mode (Figure 11.210).
The feature of DRX/DTX for connected UE reduces the battery consumption of UEs while 
being in RRC_connected while there is no more data to be transmitted and waiting before timer 
tInactivityTimer expires which will release the dedicated radio bearer(s) and the terminal is 
switched from RRC_connected to RRC_Idle state. Assuming there is enough capacity for RRC 
connected users, longer RRC inactivity timers can be used in order to reduce signaling load. DRX 
profiles adjustment to save signaling resources and keep UEs out‐of‐sync to save battery life.
When configured with DRX, the UE can get into DRX mode due to the expiration of its DRX 
inactivity timer or eNB DRX MAC command. Every time that a packet is sent or received, the 
DRX inactivity timer is re‐started, and the UE keeps monitoring the PDCCH until the timer 
expires. After this happens, the UE goes to DRX sleep mode for a time period defined by the 
DRX cycle. DRX function is characterized by a DRX cycle (long or short), an on‐duration 
RRC_CONNECTED
RRC_IDLE
(ECM – IDLE)
RRC_IDLE
Continuous/
Active
Long DRX
Activity
DRX cycle P1
Short DRX
T3
T2
DRX cycle P2
DRX cycle P3
DRX Inactivity
RRC Inactivity 
UE monitors paging channel
UE monitors PDCCH
T1
shortCycleTimer 
Figure 11.210  DRX mode state transition.
3G Voice, DG09
VoLTE without DRX
VoLTE (1 Carrier)
20msec DRX
VoLTE (1 Carrier)
40msec DRX
0
20
40
60
80
100
120
140
160
Up to 75% lower current
consumption during the inactivity
periods depending on background
activities, UE hardware and
network settings.
14% low average UE current
consumption with active use of
multiple favorite apps (browser,
qq, Wechat, email......
Figure 11.209  VoLTE UE power consumption.
www.ebook3000.com

LTE Optimization Engineering Handbook
642
period, and an inactivity timer. The UE wakes up and monitors the PDCCH at the beginning of 
every DRX cycle for the entire on‐duration period. If no scheduling assignment is received the 
UE falls asleep again (Figure 11.211).
For DRX support operation, DRX parameters are defined as shown in Figure 11.212, where 
the offset is derived from a lookup table designed with an effort to spread the DRX offsets over 
the time between the different users. The onDurationStartOffset parameter is determined 
dynamically by the eNB when the DRX is configured.
	
SFN
subframe number modulo LongDRXCycle
DRXStart Of
*10
ffset	
DRX parameters are sent to UE depending on capabilities when the first dedicated bearer is set 
up. The activation of DRX in the UE takes place during setting up of first dedicated bearer (RRC 
connection reconfiguration message). DRX parameters are sent to UE depending on the feature-
GroupIndicators in UE‐EUTRA‐Capability, bit 4 for short DRX cycle, bit 5 for long DRX cycle.
In LTE, there is a feature available, which allows to differentiate between DRX specific 
settings on a service level, which is able to differentiate between DRX settings for VoLTE 
and the default internet bearer. Especially for VoLTE this could make a significant differ-
ence in battery consumption. For VoLTE calls the DRX cycle length should be about 20 ms,26 
RBS
RRC connection request
RRC connection setup
RRC connection setup complete
RRC connection reconfiguration
RRC connection reconfiguration complete
UE may be in DRX mode 1
DRB1
SRB1
UE
UE capability inquiry
UE capability information
Short DRX Cycle
capability info
Long DRX Cycle
capability info
Figure 11.212  DRX configuration in RRC connection reconfiguration message.
On Duration Timer
Long DRX Cycle
One successful decoding of PDCCH frame
Starts the Inactivity Timer
Short DRX Cycle
Inactivity Timer elapses
Might start the Short DRX Cycle
drxlnactivity Timer drxShortCycleTimer
DRX Start Offset-
Time before ﬁrst
DRX cycle
Figure 11.211  DRX operation.
26  If a UE is assigned resources through SPS, the UE’s DRX cycle length must be a divisor of the SPS periodicity, 
which is usually fixed at 20 ms.

VoLTE Optimization
643
it is inefficient to use this small value for non‐VoLTE UEs. Service‐specific DRX allows the 
operator to configure service‐specific connected mode DRX parameters. A mechanism for 
which different QCIs are allowed to have different DRX settings are defined by the operator. 
The UE will be configured to use the DRX mode with the highest priority among the active 
bearers on the UE, when the first QCI = 1 bearer is setup, the DRX configuration of the UE 
will be changed from the regular configuration to the VoLTE configuration, and when the 
last QCI = 1 bearer is released, the DRX configuration of the UE will be changed back to the 
regular configuration.
11.11.1  Connected Mode DRX Parameter
In order to fulfill the low battery consumption requirement for VoLTE capable terminals a 
short on duration and DRX Inactivity Timer is necessary. Low delays do require a short long 
DRX cycle. With the proper settings the UE can sleep 85% of time with negligible delay 
increases. DRX configuration selection is triggered in the following scenarios:
1)	 Add, release or modification of E‐RABs
●
●A DRX profile associated to the E‐RAB that has the highest DRX priority is chosen
●
●Depending on the UE capabilities whether it supports short cycle DRX or not, the associ-
ated drxConfigId is chosen.
●
●Updated DRX configuration is communicated to UE in RRC reconfiguration message 
along with E‐RAB update information. New DRX configuration takes effect at eNB upon 
receiving UE’s RRC reconfiguration complete message.
2)	 DRX configuration for ANR CGI measurement takes a higher priority than QCI‐based 
DRX configurations.C‐DRX can significantly reduce power consumption (more than 90%) 
when the UE is in RRC connected state—depends on traffic characteristics and DRX param-
eters. UE needs to read the PDCCH only at DRX active and can switch off parts of the 
receiver during DRX inactivity. Operator can configure up to 5 DRX profiles, which can be 
assigned to different QCI profiles, for example,
●
●QCI 1 DRX cycle: 20 ms (If SPS is on, DRX cycle length must be equal to or shorter than 
SPS periodicity)
●
●QCI 7 DRX cycle: 80 ms
●
●QCI 9 DRX cycle: 2.5 s
For the DRX profile only a specific profile is given to QCI 1 and QCI 2. QCI 5 will not have 
its own DRX profile but uses the same profiles as assigned for the MBB default internet QCIs. 
A DRX priority needs to be assigned in order to decide which DRX profile is going to be used 
in case a UE has multiple 
QCIs assigned (e.g., QCI 7, 5, 1, and 2). QCI 2 will get the highest priority, second highest is 
given to QCI 1 followed by the default internet bearers QCIs (6, 7, 8, and 9). The lowest priority 
is assigned to IMS signaling (QCI 5) since this one should never override DRX settings of the 
default internet bearers.
A long DRX period is beneficial for lengthening the UE’s battery life and a shorter DRX 
period is better for faster response when data transfer is resumed. If short DRX cycle is configured, 
UE starts the short DRX and transitions to long DRX after X number of short DRX cycles. 
Short DRX cycle configured and no short DRX cycle configured C‐DRX profiles will have 
different performance during VoLTE packet transmission, which are shown in Figure 11.213 
and Figure 11.214.
Both cycles can have the same On Duration period.
www.ebook3000.com

LTE Optimization Engineering Handbook
644
11.11.2  DRX Optimization
DRX is a method to reduce battery consumption in the UE by allowing the UE to turn off the 
receiver during certain time periods (stop monitoring the downlink control channel). The opti-
mal DRX settings for VoLTE service will be enable the end‐user performance maintained by 
keeping the user in a RRC connected state instead of switching down to the idle state.
11.11.2.1  State Estimation
When UE enters the speech active state, in every 40 ms interval, the amount of data delivered 
to the UL RLC entity associated to UL VoIP bearer is compared to the threshold sIDframeDe-
tection bytes, if UL VoIP data is less than sIDframeDetection threshold bytes, it is considered 
that either 1 SID frame was received or no frame was received, else, it is considered that speech 
frames were received. If the number of consecutive non‐speech frames reaches ActiveToInactive 
threshold, the bearer is transitioned to “speech inactive” state. Speech state estimation and 
transition procedure is shown in Figure 11.215.
The decision of speech inactive to speech active transition does not only rely on sizes on 
recived RLC SDUs. Switching from TALK to SID is based only on received padding, switching 
from SID to TALK is done when the time between SDUs is smaller than a threshold. Switching 
from from TALK to SID will be slightly delayed (since the time between two SDUs needs to be 
measured).
Talk packets arrive at every frame, one frame has the duration of certain time. When silence 
starts the SID_FIRST arrives in the next frame. In the silence period SID_UPDATE arrives in 
every eighth frame, at least Talk can be resumed at any frame after last SID_UPDATE. In most 
applications, the first SID_UPDATE arrives after three frames. It should arrive after three 
frames, however, for more detail, refer to 3GPP 26.093 (Figure 11.216).
11.11.2.2  DRX Optimization and Parameters
The selection of DRX profile is a main task of DRX optimization, which is dependent on the UE 
capabilities and allocated bearers and the balancing UE power consumption and signaling load. 
Inactivity_Timer
On_Duration_Timer
Long_DRX_cycle
Long_DRX_cycle
On_Duration_Timer
Long_DRX_cycle
On_Duration_Timer
On_Duration_Timer
wake
sleep
On_Duration_Timer
Inactivity_Timer
On_Duration_Timer
Long_DRX_cycle
Long_DRX_cycle
On_Duration_Timer
Long_DRX_cycle
wake
sleep
On_Duration_Timer
=TTI where PDCCH successfully decoded
Figure 11.213  No short DRX cycle configured with two/ten successful decodings.

Short_DRX_cycle_timer
On_Duration_t (long)
Inactivity_Timer
On_Duration_t (long)
Long_DRX_cycle
On_Duration_t (long)
Long_DRX_cycle
Short_DRX_cycle
Long_DRX_cycle
Short_DRX_cycle Short_DRX_cycle Short_DRX_cycle
On_Duration_t (short)
On_Duration_t (long)
Short_DRX_cycle
Short_DRX_cycle
wake
sleep
Inactivity_Timer
On_Duration_t (long)
Long_DRX_cycle
Short_DRX_cycle_timer
On_Duration_t (long)
Long_DRX_cycle
Short_DRX_cycle
Long_DRX_cycle
Short_DRX_cycle
Short_DRX_cycle Short_DRX_cycle
On_Duration_t (short)
On_Duration_t (short/long)
Short_DRX_cycle
Short_DRX_cycle
Inactivity_Timer
Short_DRX_cycle_timer
wake
sleep
Figure 11.214  Short DRX cycle configured with two/three successful decodings.
www.ebook3000.com

LTE Optimization Engineering Handbook
646
Only long DRX cycles and combined long and short DRX cycles can be switched dynamically 
depending on the QCI. In case of VoLTE, QCI 1 and non‐QCI 1 are setting different DRX pro-
files. When VoIP call is being established, DRX profiles is switching to the highest priority DRX 
profile of QCI 1.
UE maintains DRX call state locally based on PDCCH grant receptions. Figure 11.217 gives 
an example to explain how DRX call state according to PDCCH grant receptions.
5.2
12.2
14.0
15.2
28.8
time
momentary bit rate [kbit/s]
codec bit rate
Initial state
Data
Data
TALK packet
Padding
SID
TALK
Two RLC SDUs received within 40 ms
Two consecutive TBs with only padding received
SID packet
SID packet
Data
SR
Grant
SR
T ms
TALK packet
SID packet
SID packet
Padding
T<40 ms
=>Switch to TALK
Two consecutive
paddings received
=> Switch to SID
UE switches
to SID
Data
Grant
Data
Grant
Grant
Grant
silence period
Header compression
active
Figure 11.215  Speech inactive to active state estimation and transition.
60 ms
160 ms
20 ms
100 ms
Figure 11.216  VoLTE packets arrive.

VoLTE Optimization
647
Actually, even eNB uses identical DRX call state transition method like UE as shown in 
Figure  11.217, UE and eNB call state mismatch can still happen due to imperfect channel 
reception in wireless communications, which is described below.
Mismatch type‐1: UE misses a grant eNB sent down hence entering DRX OFF while eNB thinks 
UE is still in active time, or, eNB falsely detects a SR that UE has never sent up hence thinks 
UE is active while UE is in DRX OFF. This type of mismatch should be avoided as eNB may 
waste RF resource trying to transmit/receive packets to/from the user in vain, and also 
causes DL packet losses.
Mismatch type‐2: UE falsely detects a grant eNB has never sent down hence remains in active 
time while eNB thinks UE already goes to DRX OFF, or, eNB misses a SR UE sends up hence 
doesn’t know UE is already in active time. This type of mismatch casts a slight impact on UE 
battery usage, but has no other performance consequence.
In a live network, sometimes deactivation of C‐DRX can improve VoLTE dropped call rate 
considerably (about 0.7% to 0.4%), due to C‐DRX, which will cause delays to the UE measure-
ments and possibly terminal radio link failure detection inaccuracy. Where to deactivate the 
feature of C‐DRX is another task of DRX optimization. It is suggested that DRX is disabled in 
weak signal area and enabled again in good signal area. The suggested DRX disabled and ena-
bled area is shown in Figure 11.218.
Besides, DRX feature should interact with VoIP call, is SPS scheduling strategy is engaged, 
DRX should be released, after SPS released, DRX will be engaged again, as shown in 
Figure 11.219.
Choosing the optimal parameter settings for DRX is the third task of DRX optimization, 
which is important to minimize the current consumption while keeping suitable delay, and 
reduce the extra load generated on RACH channel for obtaining uplink sync. However, optimal 
settings also depend on the type of services and the traffic pattern.
The DRX setting used is the recommended parameters setting for battery saving while maintaining 
good voice quality, DRX‐Config is provided in the “MAC main config” IE of the “Radio resource 
control” IE. Each parameter above will have an array of with two values each, one value for 
PDCCH
PDSCH
PUSCH
PUCCH
DRX State
ACK
SR
UL grant
DRX OFF
DRX Active
OnDurationTimer
DL grant
inactivityTimer
OnDuration offset
Figure 11.217  DRX call state based on PDCCH grant receptions.
www.ebook3000.com

LTE Optimization Engineering Handbook
648
regular DRX mode and one value for VoLTE DRX mode, some examples are shown in 
Table 11.59 and Figure 11.220 (TS36.321):
The example below shown in Figure 11.221 gives an explanation of DRX operation during 
each phase of VoLTE call procedure.
Phase 1: During this short time (about 300 ms) there is no DRX.
Phase 2: During this time (about 500 ms) UE uses a default DRX, but the UE is active so DRX 
sleep ratio is 0%.
Phase 3: During this time (about 10 seconds) UE uses a default DRX, the UE is inactive ‐ > DRX 
sleep ratio is about 97%.
Phase 4: During this time (about 4 minutes) of VoLTE conversation, DRX sleep ratio is about 
80% to 85%.
11.11.2.3  KPI Impacts with DRX
DRX is an ideal feature to save the UE battery under low network load and good radio quality. 
However, the network is not ideal in the reality. There are some call drops, packet losses, and 
so on. When the DRX feature is enabled, it will amplify these defects. Currently, it is unknown 
how DRX settings can affect KPIs and what are the optimal DRX settings. Therefore, it is 
important to have this knowledge in order to configure the network correctly. The optimiza-
tion goal of activating DRX is to save UE battery without degrading the network KPIs.
From field test in a live network, it is found that different DRX configuration will impact the 
user experience slightly. In Figure 11.222, it is found that VoLTE MoS is not affected by differ-
ent DRX settings and scores around 3.9 in all cases. In Figure 11.223, it is found that approxi-
mately 30 ms average increase in delay when 40 ms DRX cycle is configured for VoLTE.
It is also found that same or even better VoLTE current consumption than 3G CS with 
­optimized C‐DRX settings (40 ms DRX cycle + 4 ms On Duration), the best results is provided 
which is shown in Figure 11.224.
It has been shown that the call drop rate increases when DRX is activated if no special 
­handling is done in eNB to handle this case, and also shows that using a typical VoLTE DRX 
0
2
4
6
8
10
12
14
16
0
50
100
150
200
250
300
350
400
450
UE Reported WB CQI CW0 and DRX State
(0=OFF, 1 =ON)
Time (seconds)
WB CQI CW0
DRX State
Figure 11.218  The suggested DRX disabled and enabled in fading channel.

Figure 11.219  SPS versus DRX.
www.ebook3000.com

LTE Optimization Engineering Handbook
650
setting will give much lower average throughput compared with a typical MBB type of DRX 
setting. Due to missed assignments or grants by the UE on PDCCH there is a risk that the UE 
will go to DRX sleep but the eNB thinks the UE is awake, and this may result in too many RLC 
retransmissions which may result in a dropped call. For throughput degradation, the reason is 
to access the UE in downlink will take longer time if the UE is in DRX sleep when the downlink 
access is needed (Figure 11.225 and 11.226).
Inactivity_Timer
On_Duration_Timer
Long_DRX_cycle
Long_DRX_cycle
On_Duration_Timer
Long_DRX_cycle
On_Duration_Timer
DRX_Retransmission_Timer
HARQ_RTT_Timer
wake
sleep
Figure 11.220  SRVCC parameters.
Table 11.59  DRX parameters.
Parameter
Description
QCI1 Setting
Non–QCI1 
Setting
drxInactivityTimer
Inactivity duration before entering the DRX cycle (if 
offset is met), which forces the UE to stay on after 
the reception or transmission of a PDU. While the 
Inactivity Timer runs, it is restarted upon reception 
of any new DL assignment or UL grant.
4 ms
50 ~ 200 ms
onDurationTimer
The duration during which the UE is monitoring 
the PDCCH during the DRX cycle, the number of 
consecutive PDCCH‐subframes at the beginning 
of a DRX cycle, long or short.
4/6 ms
10 ms
longDrxCycle
The periodic repetition of an active time, defined 
by the ondurationTimer followed by a possible 
period of inactivity.
40 ms
320 ms
shortDrxCycle
Same as above, when the UE follows the short 
DRX cycle
20/40 ms
80 ms
shortDrxCycleTimer
Number of short DRX cycles before transitioning 
to the long cycle
4
16
drxRetransmission
Timer
The duration during which UE is expecting HARQ 
retransmission on the DL before turning off the 
receiver, it forces the UE to stay on until it receives 
the expected DL HARQ retransmission. While the 
RetransmissionTimer runs, i.e., when an 
assignment for a DL retransmission could arrive 
(non‐synchronous HARQ in DL)
2/4/8 ms
16 ms
Note:
1 Multiple timers are running at the UE during connected DRX to ensure the UE won’t go “off” during the “on 
duration” period when UL or DL (re)transmission or HARQ feedback is expected to be transmitted or received.
2 QCI 5/9 can be set to drxProfile4, 320 ms cycle, 10 ms on dration timer.

3.48
3.90
3.97
3.94
3.91
3.90
–11%
0%
2%
1%
0%
0%
11%
–20%
0%
20%
40%
60%
80%
100%
0.00
0.50
1.00
1.50
2.00
2.50
3.00
3.50
4.00
4.50
5.00
3G CS
AMR-NB
3G CS AMR-
WB
noDRX
DRX
20ms
6ms OnDur
DRX
40 ms
6 ms OnDur
DRX
40 ms
4 ms OnDur
Viber
POLQA SWB
MOS
Gain
4.31
Figure 11.222  Mos versus DRX.
Connection
Request
Attach
IMS
Register
Connection
Release
Connection
Request
Service 
Request
VoLTE Call
Established
Connection
Release
1
2
3
1
2
4
Attach & Register
VoLTE Call
3
VoLTE Call
Released
Idle Time
Idle Time
Figure 11.221  DRX operation during each phase of VoLTE call procedure.
249
243
319
320
300
18%
17%
31%
32%
23%
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
0
50
100
150
200
250
300
350
Mouth To Ear Delay [ms]
M-t-E Delay
Gain
286
288
0%
2%
3G CS
AMR-NB
3G CS AMR-
WB
noDRX
DRX
20ms
6ms OnDur
DRX
40 ms
6 ms OnDur
DRX
40 ms
4 ms OnDur
Viber
3G CS
AMR-NB
3G CS AMR-
WB
noDRX
DRX
20ms
6ms OnDur
DRX
40 ms
6 ms OnDur
DRX
40 ms
4 ms OnDur
Viber
Figure 11.223  Mouth to ear delay versus DRX.
www.ebook3000.com

LTE Optimization Engineering Handbook
652
11.11.3  Scheduling Request Periodicity and Disabling of Aperiodic CQI
Scheduling request periodicity aperiodic CQI will also impact UE battery comsumption, it 
needs to be optimized according to the traffic model and number of users in a cell.
With DRX feature on, the RTT will increase with about average 50% of the long DRX cycle. 
A UE always scheduled would never use DRX, hence a short ping interval is not affected 
of DRX.
Scheduling request (SR) periodicity decides how frequently a UE have chance to send scheduling 
request to eNB. Setting the parameter CommonSrPeriodicity from 10 to 5 will reduce Ping RTT 
about 4 to 5 ms according to field test observation. However, noOfPucchSrUsers has to be 
reduced from 160 to 80. SR periodicity config and relation between SR configuration index and 
SR periodicity are shown in Figure 11.227.
On the other hand, for data transmission, currently the eNB triggers UE request of ap­periodic 
CQI reports as soon as there is data in the downlink RLC buffer. At low load this will a cause 
129
125
235
154
131
121
248
4%
0%
88%
24%
5%
–3%
99%
–20%
0%
20%
40%
60%
80%
100%
0
50
100
150
200
250
300
3G CS
AMR-NB
3G CS AMR-
WB
noDRX
DRX
20ms
6ms OnDur
DRX
40 ms
6 ms OnDur
DRX
40 ms
4 ms OnDur
Viber
Current (mA)
Current [mA]
Gain
Figure 11.224  VoLTE current consumption versus DRX.
TCP DL
Transmission
OnDuration period
UE IAT
RLC ACK
in UL TCP ACK
in UL
UE IAT
RLC ACK in DL
UE IAT 
UE IAT 
TCP DL
Transmission
RTT=time between TCP ack and next TCP packet
Efficient if the UE is
in DRX active time
when the next TCP
packet arrives
Figure 11.225  drx‐InactivityTimer is long enough to handle the TCP RTT.

VoLTE Optimization
653
CQI‐only transmission, which will increase the UE battery consumption. At high load the CQI 
will typically be piggybacked on other uplink transmissions (i.e., Uplink VoIP packets), which 
will increase the number of PRBs required for the transmission and decrease the uplink VoIP 
capacity.
For VoLTE users the periodic CQI will provide the neccessary channel quality informa-
tion and hence the aperiodic CQI is not very important. It need to either fully disable/
relax aperiodic CQI (if periodic CQI is activated) or at least disable it if VoLTE is active. 
Right now it is causing significant battery performance issues with operators and device 
partners.
TCP DL
Transmission
UE IAT
RLC ACK
in UL
TCP ACK
in UL
UE IAT
RLC ACK in DL
UE IAT
UE IAT
TCP DL Packet
received in eNB
RTT = time between TCP ack and next TCP packet
UE is in DRX sleep until next OnDuration
Inefficient if the
time until next
OnDuration is too
long for the next
TCP packet.
Using short and
long DRX cycles
may result in
shorter time until
next OnDuration.
TCP DL 
Transmission
Figure 11.226  drx‐InactivityTimer is not long enough to handle the TCP RTT.
0–4
5–14
15–34
35–74
75–154
5
10
20
40
80
155
SR configuration
Index ISR
SR periodicity
(ms)
SR subframe
offset
Reserved
ISR
ISR– 5
ISR– 15
ISR– 35
ISR– 75
Figure 11.227  SR periodicity config and relation between SR configuration index and SR periodicity.
www.ebook3000.com

LTE Optimization Engineering Handbook
654
11.12  ­Comparation with VoLTE and OTT
A alternative proprietary rich communication services (OTT) are challenging traditional 
mobile voice and messaging business. Operators need a voice evolution strategy, which must 
include the right timing for the introduction of VoLTE, as well as a defined position on OTT 
VoIP and alternative SIP VoIP.
Before VoLTE deployment, operators can consider offering VoIP services based on IMS 
infrastructure and SIP VoIP clients over best effort mobile broadband access. Such a “pre‐
VoLTE” service could be offered over LTE as well as over HSPA and Wi‐Fi. OTT refers to ser-
vices provided independently over the mobile operators’ internet access services. Skype is 
probably the most well known OTT VoIP service. Skype and many other VoIP services are 
today commonly available from application stores for all major smartphone platforms. Many 
OTT applications that support VoIP include also rich communication features, such as instant 
messaging, file sharing, presence, and video calls. Therefore, operators must take OTT 
­communication services into account in their strategies. Operators can compete with 
OTT services, but can also collaborate with OTT service providers. In both cases, operators 
must understand how the user experience with OTT services compares with the operator com-
munication services, including VoLTE. Operators should also understand how the growing 
adoption and use of OTT communication apps affects the mobile network.
11.12.1  OTT VoIP User Experience
Although wideband codecs improve the quality and is used by some OTT VoIP services, mobile 
VoIP quality is not that straightforward to guarantee, because IP and radio layers introduce 
undesired impairments such as jitter and packet loss, for example, in cell edge conditions. The 
researchers compare the voice quality in excellent radio conditions in an empty cell, OTT VoIP 
can provide better speech quality. Figure 11.228 shows that Skype voice quality exceeds nar-
rowband CS voice in good 3G/HSPA radio conditions, but Viber and TuMe have lower quality. 
On the other hand, OTT VoIP services must have a connectivity solution for the varying net-
work address translation (NAT) and firewall environments of mobile networks. Therefore, 
OTT VoIP calls may have to be routed via gateway nodes on the public Internet, which increases 
the mouth‐to‐ear delay. The throughput and current consumption under connected state DRX 
functionality are also shown in Figure 11.228.
VoIP call test result was proceeded by which team placed the system under various non‐
guaranteed Bbit rate (GBR) loads, including best‐effort services such as file downloads, e‐mail, 
and internet browsing, all in poor radio conditions. It turned out that VoLTE voice quality is 
not affected at all by non‐GBR traffic thanks to QoS configuration, so VoLTE voice quality was 
kept at a good level. But for OTT VoIP call, when high non‐GBR load causes up to 65%, the calls 
started drop (Figure 11.229).
NAT traversal can be managed by OTT services, but there can be a negative effect on call 
setup time due to the complex solutions needed. Figure 11.230 describes how FaceTime estab-
lishes a video call using multiple protocols. Call invite is based on an Apple push notification 
service, which can take 3 to 6 s. The main problem occurs when the called party accepts the 
call. Actual call establishment has a huge variation in latency from accepting the call to opening 
a connection.
Battery life is also an important customer experience factor for operators, current con-
sumption during OTT VoIP call depends mainly on the hardware components of the smart-
phone, as in practice, HSPA or LTE radio must be continuously in a high power connected 
state. On the other hand, VoLTE is specified to support a connected state DRX during the call. 

Current consumption
Throughput
0
50
100
150
200
250
300
AMR-NB AMR-WB No DRX DRX 20 
ms/6 ms
DRX 40
ms/6 ms
DRX 40
ms/4 ms
Viber
3G CS  
VoLTE
OTT
mA
Power consumption
35.8
10.2
0
5
10
15
20
25
30
35
40
45
50
SIP EFR
SIP AMR 
WB 
OTT AP1
OTT AP2
OTT AP3
VoLTE
Throughput (kbps)
5,0
700
600
500
400
300
200
100
0
4,5
4,0
3,5
3,0
2,5
2,0
1,5
1,0
0,5
0,0
Galaxy S3
iPhone 5
Lumia 920
MoS scores
OTT VoIP mouth-to-ear latency
Galaxy S3
iPhone 5
Lumia 920
CS call
Skype
Viber
TuMe
Skype
Viber
TuMe
17.3
8.3
17.6
42.8
Figure 11.228  OTT VoIP user experience.
www.ebook3000.com

LTE Optimization Engineering Handbook
656
Therefore, VoLTE is expected to have lower current consumption during the call than any 
other OTT VoIP service over LTE.
Table 11.60 summarizes the expected key differences between VoLTE and alternative 
VoIP services.
Quality loss=0%
VoLTE
OTT VoIP
*Mean
 Opinion
Score
MOS*
Tests by Smart Labs with various network loads (non-GBR traffic)
Data load
-Low-
-Medium-
-High-
Drop Call Rate
OTT
VolP
VoLTE
65%
100%
0%
0%
Quality loss=–20–30%
Figure 11.229  VoLTE and OTT MoS comparison.
Press
call
button
Hear
alerting
signal
DNS
UDP
TCP
STUN
TCP
Calling
party
UE
Calling
party
UE
STUN
SIP Invite
TCP, STUN
TCP, STUN
SIP
First RTP packet
Time
RTP
UDP
Phone
ringing
Accept
call
connection
open
connection
open
TCP
TCP
DNC
UDP
Figure 11.230  FaceTime call establishment.

VoLTE Optimization
657
11.12.2  OTT VoIP Codec
Silk codec is used by some OTT voice service. Silk, the super wideband audio codec, is the 
recent codec used in Skype and WeChat. It is developed specifically for Skype to replace the 
older audio codec and was introduced in the 4.x release of Skype clients. This codec has been 
added to the latest release of Skype clients and functions at the same levels of compatibility as 
the Lync 2013 clients. Both ends will support the same list of resolutions, frame rates, and tem-
poral scaling layers. It has also been extended into the Internet standard Opus audio codec.
The Silk codec has four operating modes, which are narrowband (NB, 8 kHz sampling rate), 
mediumband (MB, 8 or 12 kHz sampling rate), wideband (WB, 8, 12 or 16 kHz sampling rate), 
and super wideband (SWB, 8, 12, 16 or 24 kHz sampling rate). Its basic speech frame is 20 ms 
(160 samples at 8 kHz sampling rate). The core Skype encoder uses similar techniques, which 
include pitch estimation (every 5 ms) and voicing decision (every 20 ms), short‐term prediction 
(LPC), and long‐term prediction (LTP), LTP scaling control, LPC transformed to LSF coeffi-
cients, together with noise shaping analysis (Figure 11.231).
The following features are based on this design and make the voice call adapted to the net-
work circumstances.
●
●Sampling rate: Skype supports the sampling rates of 8, 12, 16, or 24 kHz, which can be 
updated in real‐time to support NB, MB, WB, and SWB voice applications.
●
●Bit rate: Skype supports bit rates from 6 to 40 kb/s. Bit rates can be adapted automatically 
according to network conditions.
●
●Packet loss rate: packet loss rate can be used as one of the control parameters for the Skype 
encoder to control its forward error control (FEC) and packet loss concealment mechanisms.
●
●FEC mechanism can be controlled whether to use or not depending on network conditions. 
Perceptually important packets for example, speech transition frames can be encoded at a 
lower bit rate and sent again over the channel. At the receiver side, if the main speech packet 
is lost, its lower bit rate packet can be used to recover the lost packet and to improve overall 
speech quality. However, FEC increases bandwidth usage as extra information is needed to 
be sent through the network.
Table 11.60  Key differences between VoLTE and alternative VoIP services.
VoLTE
SIP VoIP
OTT VoIP
User experience
Voice quality‐audio
Wideband codec
Wideband codec
Wideband codec
Voice quality‐latency
Minimal
Minimal. Potentially 
longer jitter buffer.
Large variance due to traffic 
routing, jitter buffers & 
different packetization
Voice quality‐loaded cell
GBR bearer
Best effort
Best effort
Voice coverage
Optimized voice 
coverage with TTI 
bundling and RoHC
Lower voice quality at 
cell edge
Lower voice quality at 
cell edge
Call setup time
Minimal
Minimal
Large variance due to NAT 
traversal
Battery life‐talk time
20 and 40 ms DRX
No DRX
No DRX
Battery life‐standby time
Minimal activity in 
background
Minimal activity in 
background
Frequent keep‐alive and 
presence activity
www.ebook3000.com

LTE Optimization Engineering Handbook
658
Take WeChat for example, scheduling RB number is similar with VoLTE WB‐AMR, but 
WeChat voice packets does not have RoHC function, TB size is greater than VoLTE WB‐AMR. 
At the beginning of the transmission scheduling time, WeChat voice packets was scheduled 
significantly higher than of the VoLTE, about 50 times, since there is no silence voice packet. 
The above two reasons lead to WeChat voice PDCP rate (about 40 kbps) is higher than VoLTE 
(around 10 kbps). WeChat and VoLTE field test indicators comparisons under different RF con-
ditions were shown in Table 11.61, Table 11.62, and Table 11.63.
In poor wireless environment, the packet loss and the delay will be deteriorated for both 
VoLTE and OTT VoIP service. RB resource consumption will be increased. From the present 
field test case, in the case of SINR = 0, RSRP = −110dBm, the number of RB occupied by WeChat 
will reach to 12, which means the resource occupancy increased by three times. Same in VoLTE 
as there will be (the number of RB occupied for VoLTE is 9) increased by a factor of two. But in 
radio resources limited conditions, due to VoLTE QoS guarantee mechanism, the indicators of 
VoLTE will be far better than WeChat. This guarantees VoLTE MoS will be more stable under 
poor RF conditions.
From Table 11.62, WeChat in good points (RSRP = −88.3dBm, SINR = 12.7), the MoS can 
reach to 3.78. In poor RF conditions, WeChat MoS can only reach to 1.9. In poor RF conditions, 
the delay, jitter, packet loss of WeChat are all in the sharp rise, while the user perceived experi-
ence of WeChat is sharply reduced. Due to VoLTE is with QoS protection, its MoS is relatively 
stable, no significant fluctuations is observed. From the trend of RSRP shown in Figure 11.232, 
the in lower than RSRP = −111dBm area, OTT’s quality will sharply decrease, MoS will decrease 
to be lower than 3.22. From the SINR trend, it can be seen in higher than SINR = 3 area, WeChat 
quality will be significantly improved, MoS will be more than 2.85. At the SINR = 9 and above 
area, OTT’s MoS value has little difference with VoLTE.
11.12.3  Signaling Load of OTT VoIP
One of the key concerns of operators is the signaling load generated by smartphones. Part of 
the load is caused by the mobile operating system services, but a significant proportion is generated 
Silk
AMR-WB
Speex
Source
Silk
AMR-WB
Speex
Source
0
8.85 12.65
Bit Rate (kbps)
18.25 23.05
40
Office Noise, 15 dB SNR
MOS
3.30
Source
3.22
SILK
3.14
AMR-WB
2.74
Speex
0
2
Packet Loss (%)
5
10
5
• Highest quality under all conditions1
4
3
MOS
2
1
5
4
3
MOS
2
1
Figure 11.231  Silk vodec versus other audio codec.

 Table 11.61  WeChat versus VoLTE (test indicators comparison 1). 
 SINR 
 (dB) 
Downlink
Uplink 
Phy Thp(kbps)
PDCP Thp(kbps)
Avg MCS
No. RB/TTI
TB size(byte)
Phy Thp(kbps)
PDCP Thp(kbps)
MCS
No. RB/TTI
TBsize(byte) 
OTT
18.26
58.14
40.27
19.77
3.28
1268.24
52.76
40.33
22.45
2.5
1285.1 
VoLTE
20.02
18.2
11.13
15.26
2.8
819.47
21.82
11.21
22.01
1.68
1086.7
www.ebook3000.com

LTE Optimization Engineering Handbook
660
Table 11.62  WeChat versus VoLTE (test indicators comparison 2).
SINR
(dB)
Phy Thp(kbps)
PDCP Thp(kbps)
TM
MCS
No. RB/TTI
Total RB
TB size
OTT
−0.09
50.48
36.23
2.00
6.31
11.94
910.89
668.44
VoLTE
0.02
15.61
10.44
2.15
4.95
8.78
227.22
590.79
Table 11.63  WeChat versus VoLTE (test indicators comparison 3).
RSRP(dBm)
SINR(dB)
E2E(ms)
Jitter (ms)
Packet loss rate
MoS
OTT
−88.3
12.7
−
7
0.33%
3.7
−116.9
0.94
1151
28
4.73%
1.9
VoLTE
−89.5
11.7
255
8
0.09%
3.8
−114.8
0.53
227
5
0.25%
3.9
1.88
2.15 
1.79 1.78
1.78 1.78 1.98 1.90 1.74 1.74 1.71 1.57 1.51 
1.88
3.22 
2.6
2.9
2.9
2.9
2.9
3
3.3
WeChat vs. VoLTE
WeChat vs. VoLTE
3.3
3.4
3.4
3.5
3.6
3.6
3.7
3.7
0.00
0.50
1.00
1.50
2.00
2.50
3.00
3.50
4.00
4.50
5.00
–125 –124 –123 –122 –121 –120 –119 –118 –117 –116 –115 –114 –113 –112 –111
1.83 1.82 1.91 1.76 1.84 1.87 2.01
2.30
2.85
2.55 2.59 2.53
3.19
3.50 3.70 3.80
3.5
3.6
3.6
3.6
3.6
3.7
3.7
3.7 3.8
3.8
3.8
3.8
3.8
3.8
3.8
3.8
0.00
0.50
1.00
1.50
2.00
2.50
3.00
3.50
4.00
–5
–4
–3
–2
–1
0
1
2
3
4
5
6
7
8
9
10
VoLTE-MOS
Wechat-MOS
Wechat-MOS
VoLTE
0.00
RSRP
SINR
0.50
1.00
1.50
2.00
2.50
3.00
3.50
4.00
Figure 11.232  WeChat and VoLTE MoS versus RSRP/SINR.

VoLTE Optimization
661
by online applications. OTT communication services are particularly challenging, because 
always‐on reachability requires a persistent connection to the network. OTT VoIP applications 
are a common reason for frequent data transactions. These transactions include, for example, 
keep‐alive messages for the persistent connections. Figure 11.233 depicts how VoLTE, Skype, 
and Viber in the same device (iPhone 5) have different activity after the user has finished a VoIP 
call. Skype generates frequent, low‐volume data transactions, which spread over time so that 
the short inactivity periods (around 5 to 10 s) will trigger UE RRC state changes. These ­frequent 
RRC state changes increase the signaling load in the whole mobile networks.
VoLTE
OTT
0s
100s
200s
Low volume, frequent data transactions
300s
400s
0s
100s
200s
300s
Total (UL + DL)
User inactive
DL traffic
VoIP call
UL traffic
Figure 11.233  Comparison of VoLTE, Viber, and Skype behavior in iPhone 5.
www.ebook3000.com

663
Part 4
Advanced Optimization of LTE

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
665
12.1  ­Overview
Random access (RA) is a basic procedure within cellular technologies for the terminal establishing 
uplink synchronization and starting the uplink transmission. The PRACH modulation is phase 
modulation as the sequences used are generated from Zadoff‐Chu sequences with phase differ-
ences between different symbols of the sequences. The random access transmission is the only 
non‐synchronized transmission in the LTE uplink. Although the terminal ­synchronizes to the 
received downlink signal before transmitting on RACH, it cannot determine its distance from 
the base station. Thus, timing uncertainty caused by two‐way propagation delay remains on 
RACH transmissions. In LTE, the random access is used for several purposes, some of them are:
●
●Initial access or tracking area updates when establishing a radio link (RRC_idle to  
RRC_connected)
●
●To re‐establish a radio link after a radio link failure
●
●During the handover process to establish uplink synchronization to the target cell
●
●UL/DL data arrival during RRC_connected requiring random access procedure, when UL TA 
synchronization status is “non‐synchronized” or there are no PUCCH resources for SR available
●
●For positioning purposes, when timing advance is needed for UE positioning
An appropriate PRACH design means providing frequent enough RA opportunities and an 
accurate UE synchronization estimation. Besides, PRACH must adapt to different cell ranges 
and network conditions, such as traffic, propagation delay, and UE mobility, but without using 
suitable PRACH resources, which would lead to a decrease in uplink channel capacity. All 
these requirements make a robust PRACH design be a very complex procedure.
Random access process is described in Figure 12.1. The UE selects randomly a preamble 
from a list of parameters broadcasted in BCCH (SIB2) and transmits it in the PRACH with an 
initial power result of a basic downlink pathloss estimation. If there is no answer from the eNB, 
the UE makes a retry with higher power level. The random access procedure starts in target cell 
by UE sending the pre‐allocated RA preamble after receiving RRC connection reconfiguration 
message from source cell.
Zadoff‐Chu sequences belonging to CAZAC are used as RACH preamble sequences due to 
several desirable sequence properties:
●
●They have a periodic cross‐correlation and autocorrelation function that is zero except for the 
zero shift value. This is desirable for preamble detection and timing estimation. Additionally, 
the cyclic, or circular, shifts of a sequence are orthogonal to each other. As a result, multiple 
preamble sequences are obtained from a single Zadoff‐Chu sequence with cyclic shifts.
12
PRACH Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
666
●
●As the preamble sequence length is set to a prime number of 839, there are 838 sequences 
with optimal cross‐correlation properties. The uth (0 ≤ u ≤ 837) root Zadoff‐Chu sequence is 
defined by (Nzc is the length of the Zadoff‐Chu sequence):
	
x
n
e
n
N
u
j un n
N
1
0
1
ZC
ZC
,
	
●
●16 different cyclic shift separations can be configured for a cell, providing 1 to 64 preambles 
from a single Zadoff‐Chu sequence.
●
●Sequences also have reasonable cubic metric properties, which translates to reasonable 
back‐off at the power amplifier and, thus, more efficient transmission.
Number of preambles from each root sequence depends on cell size and high‐speed mode. 
The larger the cell, the larger the cyclic shift required to generate orthogonal sequences, and 
consequently the larger the number of ZC root sequences necessary to provide the 64 required 
preambles. In LTE network, for smallest cell, 64 preambles/root sequence can be used; for larg-
est cell, 1 preamble/root sequence can be used. The relationship between cell size and the 
required number of Zadoff‐Chu (ZC) root sequences allows for system optimization. The eNB 
should configure the cyclic shift offset independantly in each cell, as the expected inter‐cell 
interference and load increases as cell size decreases, therefore smaller cells need more protec-
tion from co‐preamble interference than larger cells. It is recommended to use as few root 
sequence as possible in each cell in order to reduce root sequence planning complexity and 
reduce interference between preamble transmissions (Figure 12.2).
The cyclic shifts used as different preambles need to have a sufficient separation. For PRACH 
design, different sequences provided first by different cyclic shifts, then by different root 
UE
Measurement Report
HO Request
HO Request Ack
RRC Conn Reconf +
RA Preamble Assign
SN Status Transfer
RRC Conn Reconf Complete
RRC Conn Reconf: Measurement Configuration
RRC Conn Reconf Complete
RAR: UL Allocation + TA trough (Contention+Free)
Source_eNB
Target_eNB
LTE ML1 random access request (MSG1)
Version:4
Preamble_Sequence : 39
Physical_root_Index : 84
Cyclic_Shift : 138
PRACH_Tx_Power(dBm) : –12
Beta_PRACH : 242
N_ra_prb : 1
Preample_Format : 0
Duplex_Mode : FDD
Random_access_request_timing
 Starting_subframe_number : 4
 Starting_system_frame_number : 409
Random_access_response_window_start
 Starting_subframe_number :7
 Starting_system_frame_number : 409
Random_access_response_window_end
 Starting_subframe_number :7
 Starting_system_frame_number : 410
RA_RNTI : 5
AC & Res Alloc
Preamble on PRACH (Contention Free)
HO Decision
Figure 12.1  PRACH procedure and related parameters.

PRACH Optimization
667
sequences. The cyclic shift separation needs to be sufficiently wide to accommodate the uplink 
timing uncertainty, as illustrated in Figure 12.3.
When it comes to PRACH planning/optimization, the principle is that PRACH configura-
tion of two cells should not be identical within the PRACH re‐use distance. The PRACH of two 
cells can be separated by time (prach configuration index), frequency (prach frequency offset) 
and sequence (prach cyclic shift and rootSeqIndex). PRACH design process is given by 
Figure 12.4. The parameter rachRootSequence provides the first logical root index to generate 
all 64 preambles in a cell and it is operator configurable parameter. The PRACH cyclic shift 
(parameter zeroCorrelationZoneConfig) controls how many preambles can be generated from 
Root sequence: 1,...,10
Root
sequence: 11
RACH root sequence is 
cell-specific information 
and neighboring cells 
should have a different u 
values for used root 
sequences
High-speed cell
Root sequence: 12,13,14
Figure 12.2  PRACH sequence in different scenarios.
0
Propagation
delay
Delay
spread
Other possible
preambles
Transmitted
preamble
Received
preamble
Uplink timing
uncertainty
838
Cyclic shift
Figure 12.3  Illustration of cyclic shift separation NCS between preamble sequences.
www.ebook3000.com

Cell Range
Traffic
Time Domain
Frequency Domain
Code Domain
60 preambles in a cell
PRACH Planning
PRACH Dimensioning
ZC Root Seq.
Cyclic shift number
One logical sequence
index
(rachRootSequence)
The max. No. of
sequences from
a single root sequence
No. of root
sequences
required
Freq. Offset
Resource Config.
Preamble Format
Cell
Azimuth
PrachConflndex
PrachFreqOff
PrachCs rootSeqIndex
1
2
3
1
2
3
0
120
240
0
120
240
Prop. Delay
UE Mobility
Figure 12.4  PRACH planning/optimization the principle.

PRACH Optimization
669
one root sequence and is derived from cell range. PRACH planning principles should consider 
the interference which are generated as follows:
●
●The interference between PRACH and PUSCH: PRACH and PUSCH resources need to be 
separated in time domian
●
●The interference between PRACHs of different cells, which is generated if the same PRACH 
resource is used for a different cell of eNB. The interference between PRACH and PUSCH is 
more serious in PRACH planning.
RACH optimization can be done by OMC statistics, like preamble allocation, random 
­preamble detection and PUSCH loading information and so on. Preamble group and PRACH 
configuration of each cell can be adaptive adjusted. If the eNB receives a small number of ran-
dom preambles and current PUSCH is high loading, it needs to reduce the PRACH resources 
in each radio frame. If the number of PRACH received by the eNB is higher and the current 
PUSCH loading is not high, it will increase the PRACH resources in each frame. If the number 
of dedicated preambles is sufficient, then it needs to be reduced and visa versa. If the preamble 
group or PRACH configuration changes, eNB will broadcast to UEs by SIB2 through the ­system 
message, UE will use the new PRACH configuration, so that the cell’s random access perfor-
mance will be optimized.
When a UE transmits a PRACH preamble, it transmits with a specific pattern and this 
­specific pattern is called a “Signature.” The column “signatures per root sequence” indicates 
how many signatures are in the zero correlation zone, and the root sequence indices (#root 
sequence required per cell) are required for that specific PrachCS configuration and the respective 
maximum cell range. In each LTE cell, a total 64 preamble signatures are available and UE 
select randomly one of these signatures. As explained above, two cells that are assigned the 
same root sequence could interfere with each other and potentially lead to ghost RACHs, 
therefore, the set of logical root sequence index assigned to each cell should be planned avoid-
ing re‐use in neighbor sites.
12.2  ­PRACH Configuration Index
The PRACH transmission is composed of a preamble sequence and a preceding cyclic prefix 
with five different formats. Four of the RACH formats are common with LTE FDD and TDD, 
while the LTE TDD specific RACH preamble format 4 known as short RACH (S‐RACH) due 
to the short preamble sequence duration. The difference of Formats is cyclic prefix length and 
random access sequence length. Random access repetition like Formats 2 and 3 is used to 
improve the coverage by repeating the preamble sequence as shown in Figure 12.5.
It is provided that Format0 is usually used in a live network to support cell radius not 
more than 15 km. For cell ranges up to 15 km the PRACH has a bandwidth of 72 subcarriers 
and uses 12 RBs per radio frame, in the time domain the length is 1 ms, in cells with cell 
range exceeding 15 kilometers the length in the time domain is doubled to 2 ms and uses 24 
RBs per radio frame.
The PRACH Configuration Index (prachConfIndex) parameter specifies the index, which 
informs UE of which frame number and which subframe number (SFN) within the frame has 
PRACH resources. So this parameter gives the time domain information, which means the 
number of times the PRACH slot is scheduled per frame and the slot number employed. 
Additionally, this parameter also defines the preamble format. Table 12.1 shows the possible 
values of prachConfIndex for different Formats.
www.ebook3000.com

Zadoff-Chu (ZC)
sequence
Gap time reflects the
timing uncertainty due
to round trip
propagation delay
UE at cell center
UE at cell edge
CP
GT
CP
sequence
PRACH slot duration
PRACH preamble
sequence
0
1
2
3
4
0.10 ms
0.68 ms
0.20 ms
0.68 ms
0.015 ms
0.10 ms
0.52 ms
0.20 ms
0.72 ms
0.009 ms
1 ms
2 ms
2 ms
3 ms
0.15 ms
15 km
78 km
30 km
108 km
1.4 km
30 km
156 km
60 km
216 km
2.79 km
0.8 ms
0.8 ms
1.6 ms
1.6 ms
0.13 ms
Preamble
Format
Cyclic
Prefix Length
Sequencs
Length
Guard
Time
Guard
Time
Typical Max.
Cell Range
Total
Length
RA sequence
TX
CP
≈103 µs
839 samples = 800 µs
RA sequence
time
TX
CP
Format 0
(a)
≈684 µs
800 µs
RA sequence
time
TX
CP
Format 1
(b)
≈203 µs
1600 µs
RA sequence
time
TX
CP
Format 2
RA sequence
(c)
TX
Format 3
CP
≈684 µs
TX
1600 µs
RA sequence
time
RA sequence
(d)
Figure 12.5  PRACH formats and cell range.

 Table 12.1  TD‐LTE PRACH resources configuration. 
 prachConf  
 Index 
Preamble format
PRACH density (D RA )
 Verson 
 (r RA ) 
 prachConf  
 Index 
Preamble format
PRACH density (D RA )
 Verson 
 (r RA )     
0
0
0.5
0
29
1
6
0 
1
0
0.5
1
30
2
0.5
0 
2
0
0.5
2
31
2
0.5
1 
3
0
1
0
32
2
0.5
2 
4
0
1
1
33
2
1
0 
5
0
1
2
34
2
1
1 
6
0
2
0
35
2
2
0 
7
0
2
1
36
2
3
0 
8
0
2
2
37
2
4
0 
9
0
3
0
38
2
5
0 
10
0
3
1
39
2
6
0 
11
0
3
2
40
3
0.5
0 
12
0
4
0
41
3
0.5
1 
13
0
4
1
42
3
0.5
2 
14
0
4
2
43
3
1
0 
15
0
5
0
44
3
1
1 
16
0
5
1
45
3
2
0 
17
0
5
2
46
3
3
0 
18
0
6
0
47
3
4
0 
19
0
6
1
48
4
0.5
0 
20
1
0.5
0
49
4
0.5
1 
21
1
0.5
1
50
4
0.5
2 
22
1
0.5
2
51
4
1
0 
(Continued )
www.ebook3000.com

 prachConf  
 Index 
Preamble format
PRACH density (D RA )
 Verson 
 (r RA ) 
 prachConf  
 Index 
Preamble format
PRACH density (D RA )
 Verson 
 (r RA )     
23
1
1
0
52
4
1
1 
24
1
1
1
53
4
2
0 
25
1
2
0
54
4
3
0 
26
1
3
0
55
4
4
0 
27
1
4
0
56
4
5
0 
28
1
5
0
57
4
6
0
Table 12.1 (Continued)

PRACH Optimization
673
The Table 12.1 also lists the mapping to physical resources for the different random access 
opportunities needed for a certain PRACH density value DRA. The information is given in sets 
of 4 values, that is, {fRA,t0
RA, t1
RA,t2 RA}, these 4 values tell the exact location of random access 
resource of the cell.
When preamble Format 4 is applied in TDD LTE, PRACH is transmitted on UpPTS. The 
cyclic prefix length and random access sequence length of Format 4 are much smaller than 
Format 0. PRACH Format 0 can also be more easily decoded by eNB than Format 4, thus 
Format 0 has higher handover success rate. In some field test case, after the cell parameter of 
prachConfigIndex changed from 51 to 3, it has been found that PRACH access success rate 
increases. The following example is for TDD preamble configuration as shown in Figure 12.6.
	
(Assumption: NUL
RB = 25, NRA
PRBoffset = 19, PRACH configuration 12, UL/DL conf 0)
The current recommendation is to set the prachConfIndex to the same value for cells belong-
ing to the same site. By doing this though, the PRACH allocations in one cell will interfere with 
PRACH allocations in other cells of the site. However, simulations have shown that PRACH‐
PRACH interference is less serious than PRACH‐PUSCH interference (i.e., this would be the 
case when allocating different prachConfIndex to the cells of the same eNB). The reason for 
this is that the PUSCH Rx power (UL_SINR) can be very high compared to PRACH SINR in 
the neighbor cell and hence effectively swamp the PRACH preambles and/or resulting in mis-
detections (ghost RACH). Figure  12.7 shows the relation between SNR PUSCH and the 
required PRACH SNR for a probability of misdetection (Pmd) of 1%, that is, the probability 
that a preamble is not detected by the eNB.
12.3  ­RACH Root Sequence
The logical root sequence index (RSI) used to create a random preamble. Different values 
should be assigned to neighboring cells. Root sequence collision may result in failed RACH 
attempts, if the failure is due to RSI issue and two sites have same RSI (i.e., either serving and 
neighbor have same RSI or two neighbors have same RSI), then it is recommended to change 
RSI on either of the site. RACH root sequence’s planning is dependent on PRACH cyclic shift.
0
subframe0
subframe1
subframe2 subframe3 subframe4 subframe5
subframe6
subframe7 subframe8 subframe9
Config
24
23
22
21
20
19
18
17
16
PRACH
Opportunit
y A
PRACH
Opportunit
y B
PRACH
Opportunit
y C
PRACH
Opportunit
y D
uplink
uplink
uplink
special
pwPT
GP
JpPTs
wPT
GP
JpPT
downlink
uplink
uplink
uplink
special
downlink
15
14
3
2
1
0
Figure 12.6  TDD preamble configuration example.
www.ebook3000.com

LTE Optimization Engineering Handbook
674
There are 64 preambles available in each cell. The set of 64 preamble sequences in a cell 
includes all the available cyclic shifts of a root Zadoff‐Chu sequence with the logical index 
v = rootSequenceIndex. This index is broadcast in system information. Additional preamble 
sequences are generated from the root sequences with the consecutive logical indexes 
(i.e., for v = rootSequenceIndex + 1, v = rootSequenceIndex + 2, …) until all the 64 sequences 
are found.
For example, RACH root sequence’s range is 0 to 837, select eight consecutive root sequences 
out of Table 12.2 for each cell, for example, for cell 1, select logical root sequence numbers 0 to 
7 (i.e., rootSeqIndex = 0), for cell 2, select logical root sequence numbers 8 to 15 (i.e., rootSeqIndex = 8), 
for cell 3, select logical root sequence numbers 16 to 23 (i.e., rootSeqIndex = 16), and so on, the 
RACH root sequence of neighbor cell is n*8.
The relation between a logical root sequence index and physical root sequence index is given 
by Table 12.2 (FDD) and Table 12.3 (TDD). There are 838 possible root sequence indices for 
format 0–3 and 138 possible root sequence indices for format 4.
12.4  ­PRACH Cyclic Shift
12.4.1  PRACH Cyclic Shift Optimization
The cell range, that is, the requirement for guard period defines the length of the cyclic shift, 
NCS, which therefore determines how many root sequences are needed per cell for a certain 
coverage. The sequences generated from a cyclic shift of a single root sequence are orthogo-
nal. Sequences obtained from cyclic shifts of different root sequences are not orthogonal. 
Therefore, orthogonal sequences obtained by cyclically shifting a single root sequence should 
be favored over non‐orthogonal sequences, additional ZC root sequences should be used 
only when the required number of sequences (64) cannot be generated by cyclic shifts of a 
single root sequence. The cyclic shift dimensioning is therefore very important in the RACH 
design (Figure 12.8).
–10
–20
–15
–10
–5
0
5
–5
0
5
10
15
20
SNR PUSCH [dB]
PRACH SNR for Pmd = 1%
Figure 12.7  Simulation results for SNR PUSCH versus required PRACH SINR.

PRACH Optimization
675
Table 12.2  Root Zadoff‐Chu sequence logical index‐to‐physical index mapping for preamble format 0–3.
Logical root 
sequence 
number v
Physical root sequence number u
(in increasing order of the corresponding logical sequence number)
0–23
129, 710, 140, 699, 120, 719, 210, 629, 168, 671, 84, 755, 105, 734, 93, 746, 70, 769, 60, 779
2, 837, 1, 838
24–29
56, 783, 112, 727, 148, 691
30–35
80, 759, 42, 797, 40, 799
36–41
35, 804, 73, 766, 146, 693
42–51
31, 808, 28, 811, 30, 809, 27, 812, 29, 810
52–63
24, 815, 48, 791, 68, 771, 74, 765, 178, 661, 136, 703
64–75
86, 753, 78, 761, 43, 796, 39, 800, 20, 819, 21, 818
76–89
95, 744, 202, 637, 190, 649, 181, 658, 137, 702, 125, 714, 151, 688
90–115
217, 622, 128, 711, 142, 697, 122, 717, 203, 636, 118, 721, 110, 729, 89, 750, 103, 736, 61, 
778, 55, 784, 15, 824, 14, 825
116–135
12, 827, 23, 816, 34, 805, 37, 802, 46, 793, 207, 632, 179, 660, 145, 694, 130, 709, 223, 616
136–167
228, 611, 227, 612, 132, 707, 133, 706, 143, 696, 135, 704, 161, 678, 201, 638, 173, 666, 106, 
733, 83, 756, 91, 748, 66, 773, 53, 786, 10, 829, 9, 830
168–203
7, 832, 8, 831, 16, 823, 47, 792, 64, 775, 57, 782, 104, 735, 101, 738, 108, 731, 208, 631, 184, 
655, 197, 642, 191, 648, 121, 718, 141, 698, 149, 690, 216, 623, 218, 621
204–263
152, 687, 144, 695, 134, 705, 138, 701, 199, 640, 162, 677, 176, 663, 119, 720, 158, 681, 164, 
675, 174, 665, 171, 668, 170, 669, 87, 752, 169, 670, 88, 751, 107, 732, 81, 758, 82, 757, 100, 
739, 98, 741, 71, 768, 59, 780, 65, 774, 50, 789, 49, 790, 26, 813, 17, 822, 13, 826, 6, 833
264–327
5, 834, 33, 806, 51, 788, 75, 764, 99, 740, 96, 743, 97, 742, 166, 673, 172, 667, 175, 664, 187, 
652, 163, 676, 185, 654, 200, 639, 114, 725, 189, 650, 115, 724, 194, 645, 195, 644, 192, 647, 
182, 657, 157, 682, 156, 683, 211, 628, 154, 685, 123, 716, 139, 700, 212, 627, 153, 686, 213, 
626, 215, 624, 150, 689
328–383
225, 614, 224, 615, 221, 618, 220, 619, 127, 712, 147, 692, 124, 715, 193, 646, 205, 634, 206, 
633, 116, 723, 160, 679, 186, 653, 167, 672, 79, 760, 85, 754, 77, 762, 92, 747, 58, 781, 62, 
777, 69, 770, 54, 785, 36, 803, 32, 807, 25, 814, 18, 821, 11, 828, 4, 835
384–455
3, 836, 19, 820, 22, 817, 41, 798, 38, 801, 44, 795, 52, 787, 45, 794, 63, 776, 67, 772, 72
767, 76, 763, 94, 745, 102, 737, 90, 749, 109, 730, 165, 674, 111, 728, 209, 630, 204, 635, 117, 
722, 188, 651, 159, 680, 198, 641, 113, 726, 183, 656, 180, 659, 177, 662, 196, 643, 155, 684, 
214, 625, 126, 713, 131, 708, 219, 620, 222, 617, 226, 613
456–513
230, 609, 232, 607, 262, 577, 252, 587, 418, 421, 416, 423, 413, 426, 411, 428, 376, 463, 395, 
444, 283, 556, 285, 554, 379, 460, 390, 449, 363, 476, 384, 455, 388, 451, 386, 453, 361, 478, 
387, 452, 360, 479, 310, 529, 354, 485, 328, 511, 315, 524, 337, 502, 349, 490, 335, 504, 324, 515
514–561
323, 516, 320, 519, 334, 505, 359, 480, 295, 544, 385, 454, 292, 547, 291, 548, 381, 458, 399, 
440, 380, 459, 397, 442, 369, 470, 377, 462, 410, 429, 407, 432, 281, 558, 414, 425, 247, 592, 
277, 562, 271, 568, 272, 567, 264, 575, 259, 580
562–629
237, 602, 239, 600, 244, 595, 243, 596, 275, 564, 278, 561, 250, 589, 246, 593, 417, 422, 248, 
591, 394, 445, 393, 446, 370, 469, 365, 474, 300, 539, 299, 540, 364, 475, 362, 477, 298, 541, 
312, 527, 313, 526, 314, 525, 353, 486, 352, 487, 343, 496, 327, 512, 350, 489, 326, 513, 319, 
520, 332, 507, 333, 506, 348, 491, 347, 492, 322, 517
630–659
330, 509, 338, 501, 341, 498, 340, 499, 342, 497, 301, 538, 366, 473, 401, 438, 371, 468, 408, 
431, 375, 464, 249, 590, 269, 570, 238, 601, 234, 605
(Continued)
www.ebook3000.com

LTE Optimization Engineering Handbook
676
Parameter NCS (ZeroZoneCorrelation broadcast by eNB) specifies the number of cyclic shifts 
between preamble sequences. Therefore, the number of preambles per root ZC sequence is 
839/NCS, each cell is configured with 64 preambles, so the number of root ZC sequences 
required to generate 64 preambles is 64/(893/NCS).
PRACH cyclic shift’s planning is based on cell coverage, if PRACH Format0 is used, the cell 
range is 15 km, from Table 12.4, it can be found the value of PRACH cyclic shift is 12 if the cell 
radius is not more than 15 km.
Each UE will utilize a different cyclic shift of a root ZC sequence in a cell. However, the delay 
(and delay spread) of the channel will make the ZC sequence of a far UE look just the same as 
the ZC sequence of a close UE that has been cyclically shifted. In order to prevent this, the 
cyclic shift of the UEs must be kept further apart than the round trip delay time + delay spread. 
NCS can be calculated as:
	
N
N
RTD
Delay
T
cs
zc
seq
	
For example, assuming a 5 km cell radius, the RTD is 5/3*10e8 * 2 = 33.3us, assuming the 
additional delay is 5us, so the total delay is 38.3 us; Tseq is 800 us. So Ncs > 41 (38.3/800 * 
839 = 41). Thus, we can get Ncs value and vice versa (given Ncs determines cell radius).
The cell radius input through parameter cellRadius should be rounded up to the closest cell 
radius value in Table 12.4.
PRACH preamble sequences generated from different “root sequences” are not orthogonal. 
Table 12.4 highlights how the intra‐cell interference is optimized with respect to cell size, the 
smaller the cell size, the larger the number of orthogonal signatures and the better the detec-
tion performance. The relationship between cell size and the required number of ZC root 
Logical root 
sequence 
number v
Physical root sequence number u
(in increasing order of the corresponding logical sequence number)
660–707
257, 582, 273, 566, 255, 584, 254, 585, 245, 594, 251, 588, 412, 427, 372, 467, 282, 557, 403, 
436, 396, 443, 392, 447, 391, 448, 382, 457, 389, 450, 294, 545, 297, 542, 311, 528, 344, 495, 
345, 494, 318, 521, 331, 508, 325, 514, 321, 518
708–729
346, 493, 339, 500, 351, 488, 306, 533, 289, 550, 400, 439, 378, 461, 374, 465, 415, 424, 270, 
569, 241, 598
730–751
231, 608, 260, 579, 268, 571, 276, 563, 409, 430, 398, 441, 290, 549, 304, 535, 308, 531, 358, 
481, 316, 523
752–765
293, 546, 288, 551, 284, 555, 368, 471, 253, 586, 256, 583, 263, 576
766–777
242, 597, 274, 565, 402, 437, 383, 456, 357, 482, 329, 510
778–789
317, 522, 307, 532, 286, 553, 287, 552, 266, 573, 261, 578
790–795
236, 603, 303, 536, 356, 483
796–803
355, 484, 405, 434, 404, 435, 406, 433
804–809
235, 604, 267, 572, 302, 537
810–815
309, 530, 265, 574, 233, 606
816–819
367, 472, 296, 543
820–837
336, 503, 305, 534, 373, 466, 280, 559, 279, 560, 419, 420, 240, 599, 258, 581, 229, 610
Table 12.2  (Continued)

 Table 12.3  Root Zadoff‐Chu sequence logical index‐to‐physical index mapping for preamble format 4. 
Logical root sequence number  v 
 Physical root sequence number  u 
 (in increasing order of the corresponding logical sequence number) 
0–19
1
138
2
137
3
136
4
135
5
134
6
133
7
132
8
131
9
130
10
129 
20–39
11
128
12
127
13
126
14
125
15
124
16
123
17
122
18
121
19
120
20
119 
40–59
21
118
22
117
23
116
24
115
25
114
26
113
27
112
28
111
29
110
30
109 
60–79
31
108
32
107
33
106
34
105
35
104
36
103
37
102
38
101
39
100
40
99 
80–99
41
98
42
97
43
96
44
95
45
94
46
93
47
92
48
91
49
90
50
89 
100–119
51
88
52
87
53
86
54
85
55
84
56
83
57
82
58
81
59
80
60
79 
120–137
61
78
62
77
63
76
64
75
65
74
66
73
67
72
68
71
69
70
‐
‐
www.ebook3000.com

LTE Optimization Engineering Handbook
678
Figure 12.8  PRACH settings in SIB.
Table 12.4  Ncs versus cell range.
zeroCorrelationZoneConfig
PRACH preamble 
sequences per root 
sequence
Root sequences 
required per cell
Cell 
range [km]
NCS
No. of cyclic shifts
1
13
64
1
0.76
2
15
55
2
1.04
3
18
46
2
1.47
4
22
38
2
2.04
5
26
32
2
2.62
6
32
26
3
3.47
7
38
22
3
4.33
8
46
18
4
5.48
9
59
14
5
7.34
10
76
11
6
9.77
11
93
9
8
12.2
12
119
7
10
15.92 
13
167
5
13
22.78
14
279
3
22
38.8
15
419
2
32
58.83
0
839
1
64
118.9
Cell radius = 15 km, 
No. of RSI = 10, 
Default for 
Rootsequence index =
384, for the particular 
cell, –384, 385,…….,
394 will be used.

PRACH Optimization
679
sequences allows for some system optimization. In general, the eNB should configure NCS 
(prachCS, number of cyclic shifts) independently in each cell, because the expected inter‐cell 
interference and cell load increases as cell size decreases, therefore smaller cells need more 
protection from co‐preamble interference than larger cells.
Additionally, it needs to determine how many PRACH groups are available, it is either 1 or 2 
(i.e., either Group A only or Group A and B both), and remaining sequences used for conten-
tion‐free random access. The preamble is selected randomly within the group. The random 
function shall be such that each of the allowed selections can be chosen with equal probability 
(Figure 12.9).
If the UE is executing a contention based RACH procedure, such that a dedicated preamble 
is not assigned, then it will randomly select either a Group A or Group B preamble based on the 
size of the message to be transmitted.
UE needs to decide the group from which it needs the preamble. Group is decided on the 
basis of size of message 3 (RRC connection request message). If Group B exists and if message 
size to be transmitted > messageSizeGroupA and if
Pathloss < {PCMAX‐preambleInitialReceivedTargetPower‐deltaPreambleMsg3‐
messagePowerOffsetGroupB}select Group B, otherwise will be selected from Group A.
12.4.2  Rrestricted Set
For high‐speed cells, the Doppler effect has to be considered for preamble detection and for 
these cases there is a different set of NCS configurations defined by the specification, which fol-
lows the same principle as the normal set described in Chapter 8. For high‐speed cells, the 
parameter PrachHsFlag should be set to “true,” which means PRACH Rx algorithm has to 
changed to high‐speed receiver. When detecting PRACH from a high‐speed UE the frequency 
offset will cause problems, since the PRACH preambles are based on one or more Zadoff‐Chu 
sequences or cyclic shifted versions of those sequences. A preamble could be received as 
another preamble and therefore cause false detection as well as missed detection. To take care 
of this problem restricted set of cyclic shifts was introduced in the LTE standard for high‐speed 
cells. The cyclic shifts are restricted to a set where even at high UE speeds a preamble will not 
be detected as another preamble. Here unrestricted set is used for normal speed and restricted 
is used for high speed. The UE informed by SIB‐2 message about root sequence index and 
ZeroCorrelationZoneConfig to generate 64 preambles. Unrestricted and restricted set of root 
sequence for preamble formats 0 to 3 is present in Table 12.5.
In restricted set, the minimum difference between two cyclic shifts is NCS but the cyclic shifts 
are not necessarily multiples of NCS. When the prachHsFlag parameter is set to “true,” the range 
of root sequence values which can be used is dependent upon the NCS. The number of pream-
ble sequences per root sequence is dependent upon the root sequence (varies from one root 
sequence to another). The number of root sequences required by each cell is variable. Please 
Group A: Uplink data quantity to 
be sent is relatively small, or
when  the UE is in poor coverage.
Group B: Uplink data quantity to 
be sent is relatively large, or when
the UE is in good coverage.
Group A Preambles
64 preambles per cell
numberOfRA-Premables
sizeOfRA-PreamblesGroupA
Group B
Preambles
Reserved for
Contention Free
Figure 12.9  Group A and B preambles.
www.ebook3000.com

 Table 12.5  Unrestricted and restricted set of root sequence (preamble formats 0 to 3). 
 zeroCorrelationZoneConfig 
 (N CS index) 
Ncs value
 zeroCorrelationZoneConfig 
 (N CS index) 
Ncs value  
Unrestricted set
Restricted set
Unrestricted set
Restricted set 
0
839
15
8
46
68 
1
13
18
9
59
82 
2
15
22
10
76
100 
3
18
26
11
93
128 
4
22
32
12
119
158 
5
26
38
13
167
202 
6
32
46
14
279
237 
7
38
55
15
419
‐

PRACH Optimization
681
note that with restricted set the cell range is limited to 33 km as shown in Table 12.6, PRACH 
format 4 cannot be used, because of the smaller supported cell radius.
When prachHsFlag is set to “true” then the range of allowed rootSeqIndex values becomes 
limited tha can be shown in Table 12.7. In addition, the number of PRACH sequences, which 
can be generated from each root sequence is no longer fixed which increases the complexity 
of planning the root sequence indices, Figure 12.10 gives an illustration of Root sequence 
planned.
Table 12.8 shows the average number of RACH root sequences required for different cell 
ranges, together with the allowed rachRootSequence interval. For the restricted set, there are 
Table 12.6  Cell range with restricted set.
zeroCorrelationZoneConfig
PRACH preamble  
sequences per root  
requence
Root sequences  
required per cell
Cell range  
[km]
Ncs
No. of cyclic shifts
0
15
Variable (different for  
each root sequence)
Variable (different  
for each root sequence)
Up to 33 km
1
18
2
22
……
……
13
202
14
237
X (rootSeqIndex)
X+13
X+26
X+39
X+52
X+65
X
X+12
X+18
X+33
X+51
X+78
prachHsFlag = false
prachHsFlag = true
Equally spaced
Not equally spaced
Figure 12.10  Root sequence 
planned for high speed UE 
(example).
Table 12.7  Allowed rootSeqIndex values for each value of prachCS when prachHsFlag = “true.”
prachCS
rootseqIndex
prachCS
rootseqIndex
0
24–816
  8
116 – 732
1
30–810
  9
136 – 704
2
36–804
10
168 – 676
3
42–796
11
204 – 526
4
52–787
12
264 – 566
5
64–779
13
328 – 498
6
76–764
14
384 – 450
7
90–749
www.ebook3000.com

LTE Optimization Engineering Handbook
682
constraints for what values of the rachRootSequence parameter that should be used for different 
cell ranges. The rachRootSequence values 0–23 and 820–837 should never be used for high 
speed UEs, because these root sequences are not generating preambles.
12.5  ­Prach Frequency Offset
The frequency domain information of PRACH is given by prach‐FrequencyOffset parameter, 
which defines the first physical resource block available for PRACH expressed as a physical 
resource block number. Every time the PRACH is scheduled, the UL scheduler will 
reserve six PRBs for this purpose. The location of these PRBs is defined by the parameter 
prach‐FrequencyOffset.
PRACH frequency offset range is 0 to 94, the first physical resource block nPRB
RA  allocated to the 
PRACH opportunity considered for preamble Format 0, 1, 2 and 3 is defined as n
n
PRB
RA
PRB offset
RA
, 
where the parameter prach‐FrequencyOffset nPRB offset
RA
 is expressed as a physical resource block 
number configured by higher layers and fulfilling:
	
0
6
n
N
PRBoffset
RA
RB
UL
	
PRACH frequency offset should be planned at the same location of frequency band in order 
to avoid PRACH‐PUCCH or PRACH‐PUSCH interference. If PRACH area is placed at the 
lower border of UL frequency band then:
	
PRACH frequency offset
roundup PUCCH resources/2 	
Table 12.8  Number of RACH root sequences as a function 
of cell range for the restricted set.
Cell range [km]
Number of 
RACH root 
sequences
Allowed 
rachRootsequence 
interval
1
5
24−819
2
7
30−815
3
9
42−803
4
11
52−795
5
13
64−789
6
16
76−777
7
19
90−765
8−9
26
116−751
10−11
30
136−729 
12−13
39
168−707
14−17
54
204−659
18−22
64
264−629
23−28
64
328−561
29−33
64
384−513
If cellRange is set to 10 in a 
cell, the required number of 
RACH root sequences is 30. 
The values of 
rachRootSequence in adjacent 
cells must differ by at least 30 
between any two neighbors in 
order to eliminate overlap. The 
rachRootSequence parameter 
is set to a value in the interval 
136 to 729. Applying the value 
386 means that the sequences
386 to 415 will be used in that 
cell.

PRACH Optimization
683
If PRACH area is placed at the upper border of the UL frequency band then:
	
PRACH frequency offset
N
roundup PUCCH resources
RB
6
2
/
	
There are two preconditions according to the above formular, one is the PRACH area should 
not overlap with the PUCCH area, the other is eNB scheduler can handle only one PUSCH area 
and for later releases it is better to have only one PUSCH area instead of two. The location of 
PRACH PRBs of Format 0 to 4 is shown in Figure 12.11.
Therefore, there are only two possibilities for frequency separation, either at the lower or at 
the upper edge of the PUSCH area. Two possibilities are not enough for a separation of the 
PRACH in a complete network. Anyway, prachFreqOff can be used in case of problems as an 
alternative/add‐on, however, this will also generate PRACH to neighbor cells PUSCH interference. 
This value can be the same for all the cells in the network unless it is not possible to assign 
­different rootSeqIndex for the different cells.
12.6  ­Preamble Collision Probability
RACH is a contention‐based channel and there is possibility for collisions, that is, multiple 
terminals transmit simultaneously the same preamble. It is desirable to minimize collision 
rate, since collisions will increase random access delay and consume radio resources. Assume 
a large number of UEs in the cell, this implies that the collision probability can be expressed 
as where L is the total number of random‐access opportunities per second and γ is the random‐
access intensity, that is, there are, on average, γ random‐access attempts per second and cell. 
The number of random‐access opportunities per second is given by the number of random 
access slots per second multiplied by the number of random‐access frequency bands in each 
1 subframe
UpPTS
PUCCH
6 RSb
n
=
RA
PRB
n
=
RA
PRB
n
+ 6
if fRA mod 2 = 0
fRA
,
RA
PRB offset
nRA
PRB offset
N
– 6 –
– 6
UL
RB
6 RSb
For preamble Format 0–3, the frequency
multiplexing shall be done according to:
For preamble Format 4, the frequency
multiplexing shall be done according to:
PUCCH
PUSCH
Format 0–3
Format 4
6 fRA, if((nf mod 2) × (2 – Nsp) + t RA)mod 2 = 0
UE Bandwidth
UE Bandwidth
fRA= 0
fRA= 2
fRA= 4
fRA= 5
fRA= 3
fRA= 1
fRA= 0
fRA= 1
fRA= 2
fRA= 3
fRA= 4
fRA= 5
2
fRA
, otherwise
2
N
– 6 (fRA+ 1), otherwise
UL
RB
1
RACH
RACH
Figure 12.11  The location of PRACH PRBs (refer to 3GPP TS36.211).
www.ebook3000.com

LTE Optimization Engineering Handbook
684
random‐access slot multiplied by the number of random‐access preamble signatures. 
Collision probability is calculated as the formular below:
	
Prob collision
e
L
1
	
Collision probability as a function of RA intensity for a number of RA opportunities per sec-
ond is shown in Figure 12.12.
For RACH collision rate can be easily reduced by increasing the radio resources used in 
­network optimization. PRACH transmission can be separated by time (prachConfIndex), fre-
quency (prachFreqOff), or sequence (PRACH CS and RootSeqIndex), which two cells’ RACH 
must be different within the PRACH re‐use distance to increase the RACH decoding suc-
cess rate.
12.7  ­Preamble Power
RACH preamble power is defined as the formular below, which can be adjusted by tuning the 
below parameters:
	
PreambleTxP
min P
preambleInitialReceivedTargetPower
D
CMAX
{
,
ELTA Preamble
preamble
x powerRampingStep
PL
_
#
}
1
	
For example, the assumption is listed below:
preambleInitialReceivedTargetPower = –104dBm;
DELTA_Preamble = 0 dB (Format 0,1);
powerRampingStep = 2 dB;
preambleTransMax = 8;
Cell RS transmitting power = 10dBm, RSRP = –95dBm (= > PL = 10dBm – 95dBm = 105 dB);
PCMAX = 23dBm;
0.00%
0.25%
0.50%
0.75%
1.00%
1.25%
1.50%
1.75%
2.00%
1
10
100
1000
Prob[Collision] [%]
Radom Access Intensity (RA attempts per second)
Collision probability
as a function of RA
intensity for a number
of RA opportunities
per second
Prob[Collision], L=12800
Figure 12.12  Collision probability.

PRACH Optimization
685
Thus, Initial RACH power = min{23dBm, –104dBm + 0 dB +105 dB } = 1dBm.
●
●preambleInitialReceivedTargetPower defines the initial power for random access preamble 
transmission. The parameter range is (−120 dBm (0), –118 dBm (1), …, –90 dBm (15)), the 
default value is −104 dBm (8).
●
●powerRampingStep defines the power increment step size for random access preamble 
transmission. This is mainly used when eNB is not able to detect the RACH request then 
UE will re transmit the RACH request by increasing the power to powerRampingStep 
­factor. prachPwrRamp range is (0 dB (0), 2 dB (1), 4 dB (2), 6 dB (3)), the default value is 
2 dB (1).
●
●DELTA_Preamble, this is preamble format based delta offset as there are four 
­formats available for preambles. Most of the time preamble format 0 is used in a live 
network.
●
●preambleTransMax, defines the maximum number of random access transmissions. The 
value of preambTxMax can be (3 (0), 4 (1), 5 (2), 6 (3), 7 (4), 8 (5), 10 (6), 20 (7), 50 (8), 100 
(9), 200 (10)), the default value is 8 (5).
●
●ra‐ResponseWindowSize, the parameter defines the window size for the random access 
response in TTIs. The value of ra‐ResponseWindowSize can be (2 (0), 3 (1), 4 (2), 5 (3), 6 
(4), 7 (5), 8 (6), 10 (7)), the default value is 10 (7)). The wait period is defined with  
ra‐ResponseWindowSize. If no response is received within RAR window, RACH power is 
adjusted and preamble gets sent again. The response window starts at the last subframe 
containing the end of the previous preamble + 3 subframes, ends at the last subframe 
containing the end of the previous preamble + 3 + ra‐ResponseWindowSize, which is 
shown in Figure 12.13 and Figure 12.14.
Sub-Frame=30720 Ts=1ms
eNB
CP
Preamble
CP
Preamble
Sub-Frame=1ms
Sub-Frame=1ms
1 way
Prop delay
1 way
Prop delay
1 way
Prop delay
1 way
Prop delay
RACH Window
RACH Window
RACH Window
UE Tx
eNB Rx
eNB
UE Tx
eNB Rx
RACH Window
Figure 12.13  Single subframe and multi‐subframe RACH timing (FDD).
www.ebook3000.com

LTE Optimization Engineering Handbook
686
In a live network, RACH success rate can be improved by adjusting the preamble transmit 
power. The suggested options so far include:
●
●Increase initial power to at least –98dBm (for some cases and depend on network 
configuration)
●
●Increase prachPwrRamp is suggested. Use prachPwrRamp = 2 dB normally, but for some net-
work configurations it is required to increase step size to 4 dB, just to decrease number of 
power increase repetitions and reduce interferences on own RACH channel.
●
●Use preambTxMax = 5 (so 5 times repeating Message1 and increasing power), so in the worst 
case scenario 5 times repetition by 2 dB of every step increase power will give 10 dB TPC 
value and by adding x dB extra power for Message3.
If the random access response or the contention resolution fails, in order to decrease 
the ­collision rate, the UE backs off for a certain period of time selected randomly in the range 
[0, rABackoff], then restarts the procedure to makes an immediate re‐attempt. The indication 
of BackOff is in MAC control element. In a live network, it is better that BackOff can be automatic 
adjustable, the more preamble transmissions, the bigger the value is. The Backoff parameters 
are shown in Table 12.9.
Last
preamb
3 TTls
New
preamb
ResponseWindowSize
Preamble
Tx Power
14
12
10
8
6
4
2
0
1
2
3
4
5
6
7
Preamble #
Figure 12.14  Preamble transmission.
Table 12.9  Back‐off parameters.
Index
Backoff parameter value (ms)
Index
Backoff parameter value (ms)
0
0
7
120
1
10
8
160
2
20
9
240
3
30
10
320
4
40
11
480
5
60
12
960
6
80
13
reserved

PRACH Optimization
687
12.8  ­Random Access Issues
Three kinds of UEs may do random access, idle UE try to attach, handover, and UE re‐sync 
from out‐of‐sync. In random access procedure, the main issues are shown in Figure 12.15.
After message1, UE has not received message2 until to the maximum RACH attempts. The 
possible reasons are usually caused by unreasonable neighbor definition and PCI plan, or bad 
downlink/uplink quality. In the situation of low coverage or high interference will cause bad 
link quality, eNB can not decode message1 correctly, or UE can not decode message2 correctly. 
In the case, coverage and interference optimization is needed.
If UE do not receive message4 after sending message3, until RACH maximum attempts, in 
this case, that’s the reason of contention failed. At present, it needs to analyze it by using cell 
trace record, to check why eNB do not configure the TA info, or UE decodes wrong. Moreover, 
too much users also will cause contention failure.
In conclude, the common cause for the RA success rate decline has been shown as high UL 
interference (UL_RSSI is higher than –114 dBm), the network exists PCI confusion cell, or 
other special events.
Note: Contention‐free random access (CFRA) can be used for incoming handover between 
cells and DL data transfer requiring UL_synch. When CFRA enabled, preamble sequences 0–51 
will be used by contention based random access (CBRA), sequences 52–63 will be used by CFRA 
(fixed) which is shown in Figure 12.16. RA scenarios for CBRA and CFRA are shown in Table 12.10.
If there is no random access response received within the configured time window, the UE 
should repeat a new preamble sequence no later than in subframe n + 4 at higher power. An 
example shown in Figure 12.17 that the new preamble can be transmitted earliest (from the last 
sent preamble) 3 TTI+ ra‐ResponseWindowSize (assumption 10TTI here) + 4TTI (refer to 
3GPP 36.213) = 17 TTI and with the assumption prachConfIndex = 3 (the single PRACH 
1. LTE Random Access Request (MSG1)
2. LTE Random Access Response (MSG2)
3. If Contention-Based,
    LTE  UE Identification Message (MSG3)
4. If Contention-Based,
    LTE  Contention Resolution Message (MSG4)
Failure
Contention-Free Random Access Success
Contention-Based Random Access Success
Success
Failure
UE
eNB
Two possibilities:
1. MSG1 cannot reach eNB
2. MSG2 cannot reach UE
Two possibilities:
1. MSG3 cannot reach eNB
2. MSG4 cannot reach UE
Root causes:
1. Poor RF/Link Imbalance
2. PRACH congestion
3. Suboptimal parameters
4. Equipment failure
Success
No Random Access Response
Contention Resolution Timer expires
Figure 12.15  The main issues during random access procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook
688
resource (1 subframe) per 10 ms radio frame), this means the new preamble can be transmitted 
after 20 ms from the first preamble.
In this way, the entire preamble retransmission time (in case no response) is preamble 
Tx_Max*20 ms = 8*20 ms = 160 ms.
After eNB received thr RACH preamble, eNB will send Random access response to UE on 
DL‐SCH (downlink shared channel) addressed to RA‐RNTI calculated from the timeslot in 
which preamble was sent. The message carries temporary C‐RNTI, which eNB gives another 
identity to UE for further communication, timing advance value, which eNB informs UE to 
change its timing so it can compensate for the round trip delay caused by UE distance from the 
eNB, and uplink grant resource for UE so that it can use UL‐SCH (uplink shared channel) to 
send RRC connection request message (message3) to eNB.
UL grant, Timing advance,
Temp-CRNTI
UE random value, TMSI,
Establishment cause
CRNTI
The third message sent
during the RACH
procedure is commonly
denominated message 3
(Msg3).
RA Preamble Assignment
Random Access Preamble
Random Access Response
Scheduled Transmission
(MSG3)
HARQ
1
UE
eNB
CFRA
Contention Free
Random Access
Process Steps
CBRA
Contention Based
Random Access
Process Steps
0
2
4
3
HARQ
Contention Resolution
(MSG 4)
Figure 12.16  CBRA and CFRA procedure.
Table 12.10  RA scenarios for CBRA and CFRA.
RA scenario
CBRA
CFRA
Initial network access
•
Access following a radio link failure
•
Incoming handover between cells
•
•
Downlink data transfer requiring uplink synchronization
•
•
Uplink data transfer requiring uplink synchronization
•
Uplink data transfer without dedicated scheduling request resource
•
SFN=714
SFN=715
SFN = 716
SFN = 717
0 1
3
PRACH
Configuration
Index
1st Preamble
2nd Preamble
2 3 4 5 6 7 8 9
0 1 2 3 4 5 6 7 8 9
0 1 2 3 4
Prep
RA Win
5 6 7 8 9
0 1 2 3 4 5 6 7 8 9
Figure 12.17  Example of preamble retransmission.

PRACH Optimization
689
After sending each random access preamble, the UE shall monitor for the random access 
response in the ra‐ResponseWindowSize1 of which the start and end are configured by the eNB 
and broadcast as part of the cell‐specific system information, as shown in the log file below:
Version
03:47:32.619 [00] LTE Random Access Request (MSG1) Report (0xB167)
Preamble Sequence
RA Window Start: subframe (2+3)
RA Window End: subframe (5+10)
= 5
= 2
Physical Root Index
Cyclic Shift
PRACH Tx Power
PRACH Window Start SFN
RACH Window Start Sub-fn
PRACH Window End SFN
PRACH Window End Sub-fn
RA RNTI
Beta PRACH
PRACH Timing SFN
PRACH Timing Sub-fn
= 715
= 2
PRACH Frequency Offset
Preamble Format
= 129
= 238
= –25 dBm
= 242
= 3
= 0
= 715
= 5
= 716
= 5
= 3
12.9  ­RACH Message Optimization
In this part, the characterization results of RRC connection request failures as a function of 
RACH msg3/4/5 parameters is presented. RRC connection request failures analysis is shown in 
Figure 12.18.
Message 3 can actually be a RRC connection request, RRC connection reconfiguration com-
plete or an RRC connection re‐establishment depending on the cause that initiated the RACH 
procedure. At this point the eNB has no information on the radio conditions of the UE located, 
therefore proper settings for the open loop power control and initial UL MCS will be crucial. 
Actually, the related data channel coverage is limited by RACH Msg 3, which occasionally hap-
pened in field test.
The RRC connection request sent in call setup is a RLC‐TM (transparent mode) message sent 
over CCCH. The entire message requires 7 bytes, that is, min TBS requirement in the 3GPP 
1  If the UE does not receive a RAR within the configured time window, it will retransmit the preamble. It increments 
PREAMBLE_TRANSMISSION_COUNTER by 1;
The parameter determines MCS 
as well as max number of 
HARQ transmissions 
(original + retransmissions) for 
Msg4 on the DL
UE declares T300 failure if either no msg2
received after sending multiple msg1
or
no msg4 received after going through one
or more msg1 + msg2 + msg3 sequences
UE
Random Access Preamble
(RACH message 1)
Random Access Response
(RACH message 2)
RRC Connection Request
(RACH message 3)
RRC Connection Setup
(RACH message 4)
UE declares SR_Max failure after eNB times
out waiting for msg5 and releases the connection
RRC Connection Setup Complete
(RACH message 5)
eNB
Figure 12.18  RRC connection request failures analysis.
www.ebook3000.com

LTE Optimization Engineering Handbook
690
standard for contention resolution (6bytes RRC payload + 1byte MAC header). It is recom-
mended the MCS 4 and1RB should be allocated for the message.
For message Handover complete (RRC connection reconfiguration complete for Handover 
command), a regular RLC‐AM packet transmitted over DCCH. The entire message requires 
13 bytes (MAC + RRC+ RLC + PDCP, total 104 bits). In the worse RF condition, the mes-
sage’s coverage may be improved with RLC segmentation for fragmenting this Handover 
complete message. In this case, the receptions of first and second fragments are very impor-
tant for successful handover completion. The recommendation is to use TBS = 104 bits 
(MCS 3 and 2RBs). Table  12.11 gives Message 3’s link budget, under the assumption 
BLER = 1%, HARQ = 3.
Recognizing the Message3 particularities, 3GPP specifies a slightly different UL power con-
trol formula and a totally different HARQ procedure for this message. Message3 can be the 
limiting link of the link budget especially when the required UL cell‐edge throughputs are low. 
Unreliable decoding of Message3 would lead to high access failure rates, high dropped call 
rates and poor handover success rates.
Since Message3 is the first message sent over the PUSCH it is important to note that although 
closed loop power control is enabled it will not have time to react. This means uplink open loop 
power control settings need to be set appropriately in order to maximize Message3 decoding 
reliability. 3GPP defined uplink power control formula for the PUSCH. For Message3, there is 
a slight variant in the equation, as:
	
P
j
P
P
PREAMBLE
Msg
O PUSCH
O NOMINAL PUSCH
O PRE
_
_
_
_
_
2
3	
Where:
●
●PO_PRE is the preamble initial received target power
●
●ΔPREAMBLE_Msg3 is the parameter, which allows for boosting of the UL power when the 
Message3 is sent. ΔPREAMBLE_Msg3 is used to control the Message3’s PSD target
●
●Note: j = 2 is for PUSCH re‐transmissions corresponding to the random access response 
grant. For PUSCH (re)transmissions corresponding to a semi‐persistent grant then j = 0, for 
PUSCH (re)transmissions corresponding to a dynamic scheduled grant then j = 1.
It should be highlighted that a UE’s power is limited and most handovers happen at cell edge. 
This means that high values of deltaPreMsg3 will not ensure better handover performance 
since UE is probably already transmitting at max power. However, higher values of deltaPreMsg3 
could improve performance for non‐cell‐edge UEs where UEs previously weren’t transmitting 
at max power at the cost of UL interference spikes.
Besides Message3, Message5’s link budget is also needed to be considered. As the parameter 
of initialPowerHeadroomValue, which determines number of PUSCH PRBs assigned at the 
beginning of the call as well as after handover until eNB can make a more informed decision 
based on UL RF condition. Usually, a conservative PRB size is expected to improve Message5 
robustness.
From field test results, it can be seen after the parameter change from 10 to 3 dB, most of the 
failures are due to Message3 reception failures which were due to low UL Rx signal strength. 
Under frequency selective fading or high UL noise situations, Message5 parameter changed 
might be effectively in improving RRC failures as shown in Table 12.12.
From these cases, it can be seen that Message3 is an important factor affected RRC connection 
setup performance. Actually, there is a small range in UL pathloss where RRC connection setup 
performance may be improved via parameter optimization before Message3 reception becomes 
the bottleneck.

 Table 12.11  Message 3’s link budget. 
UL LTE link budget
RACH Msg3 TBS 
56 Dense Urban
RACH Msg3 TBS 
104 Dense Urban
RACH Msg3 
TBS 
56 Urban
RACH Msg3 
TBS 
104 Urban
RACH Msg3 
TBS 56 
Suburban
RACH Msg3 
TBS 104 
Suburban
RACH Msg3 
TBS 
56 Rural
RACH Msg3 
TBS 
104 Rural 
Channel model used
EPedA5
EPedA5
EPedA5
EPedA5
EVA30
EVA30
EVA30
EVA30 
Comment
1 MCS4
2 MCS3
1 MCS4
2 MCS3
1 MCS4
2 MCS3
1 MCS4
2 MCS3  
UL Max EIRP=UE Max Tx 
power + UE antanna gain ‐ 
Bodylioss
dBm
23
23
23
23
23
23
23
23 
UL Cable & connector loss
dB
2
2
2
2
2
2
2
2 
eNB antenna gain
dBi
15
15
15
15
15
15
15
15 
Penetration loss
dB
17
17
14
14
11
11
5
5 
Shadow STD + margin
dB
8.6
8.6
8.6
8.6
8
8
4.4
4.4 
Handoff gain
dB
2
2
2
2
2
2
2
2 
IoT
dB
3
3
3
3
3
3
3
3 
RX (eNB)
 
Thenmal noise
dBm/
Hz
−174
−174
−174
−174
−174
−174
−174
−174 
eNB Noise factor
dB
2.5
2.5
2.5
2.5
2.5
2.5
2.5
2.5 
Number of UL RBs
1
2
1
2
1
2
1
2 
Noise bandwidth
kHz
180
360
180
360
180
360
180
360 
MCS number
MCS 4
MCS 3
MCS 4
MCS 3
MCS 4
MCS 3
MCS 4
MCS 3  
SNR (per antenna)
dB
1.5
0.1
1.5
0.1
2.5
1.1
2.5
1.1 
eNB sensitivity
dBm
−117.4
−115.8
−117.4
−115.8
−116.4
−114.8
−116.4
−114.8 
UL Max Coupling loss = UL 
Max EIRP‐eNB sensitivity
dB
140.4
138.8
140.4
138.8
139.4
137.8
139.4
137.8 
UL MAPL
dB
126.8
125.2
129.7
128.1
132.4
130.8
142
140.4
www.ebook3000.com

LTE Optimization Engineering Handbook
692
Finally, two Message4 parameters will also impact the random access performance. One is 
the maximum number of DL transmissions RACH Message4, which determines MCS as well 
as max number of HARQ transmissions (original + retransmissions) for Message4 on the DL. 
The other one is PDCCH aggregation level, which determines PDCCH aggregation level used 
for Message4 (in addition to MIB and paging messages)—essentially controls the PDCCH 
grant coding rate.
From field test results, it can be seen that minimal RRC connection setup failures at or above 
–7 dB RS SINR level, the parameter PDCCH aggregation level provides most improvement to 
the RRC connection failure rate, value of 8 helps UE acquire control messages. The parameter 
of maximum number of DL transmissions RACH Message4 changed from 1 to 2 are not apparent 
for improvement as shown in Table 12.13.
12.10  ­Accessibility Optimization
12.10.1  Reasons for Poor Accessibility
Poor coverage, high Load, hardware issue, high UL interference, PCI conflict, and RACH root 
sequence index plan all need to be reviewed for poor accessibility, and still need to be checked 
if UE camped in the wrong cell, cell reselection and access parameters, VSWR over threshold 
and cell availability, and so on.
Table 12.12  Message 5 parameter test.
UL PL(dB)
initialPowerHeadroom 
Value = 10 dB
6 dB
3 dB
140
Attempts:100 Failure 
rate:100% msg3/msg5:0/100%
Attempts:20 Failure rate:0% 
msg3/msg5:0/0%
Attempts:21 Failure rate:0% 
msg3/msg5:0/0%
141
Attempts:50 Failure 
rate:100% msg3/msg5:60/40%
Attempts:35 Failure 
rate:45.7% msg3/msg 
5:100/0%
Attempts:23 Failure 
rate:8.7% msg3/
msg5:100/0%
142
Attempts:50 Failure 
rate:100% msg3/msg5:92/8%
Attempts:53 Failure 
rate:98.1% msg3/
msg5:100/0%
Attempts:48 Failure 
rate:95.8% msg3/
msg5:100/0%
Table 12.13  Message 4 parameters test.
DL RS‐ 
SINR(dB)
Msg4‐1 = 2
Msg4‐2 = 4
Msg4‐1 = 1
Msg4‐2 = 4
Msg4‐1 = 2
Msg4‐2 = 8
Msg4‐1 = 1
Msg4‐2 = 8
  −8
Attempts:76 Failure 
rate:40% msg2/
msg4:0/100%
Attempts:44 Failure 
rate:68% msg2/
msg4:0/100%
Attempts:30 Failure 
rate:3.3% msg2/
msg4:0/100%
Attempts:36 Failure 
rate:5.5% msg2/
msg4:0/100%
  −9
Attempts:150 Failure 
rate:100% msg2/
msg4:47/53%
Attempts:148 Failure 
rate:98% msg2/
msg4:51/49%
Attempts:149 Failure 
rate:98.5% msg2/
msg4:52/48%
Attempts:132 
Failure rate:91% 
msg2/msg4:51/49%
−10
UE lost DL signal
UE lost DLsignal
Attempts:150 Failure 
rate:100% msg2/
msg4:97/3%
Attempts:145 
Failure rate:100% 
msg2/msg4:98/2%

PRACH Optimization
693
12.10.2  Accessibility
The random access procedure is performed by UE for the following five events:
●
●UE initial access from RRC_idle state,
●
●RRC connection re‐establishment procedure and handover,
●
●DL data arrival during RRC_connected state requiring random access procedure, when UL 
synchronization status is “non‐synchronized,”
●
●UL data arrival during RRC_connected state requiring random access procedure, when UL 
synchronization status is “non‐synchronized” or
●
●there are no PUCCH resources for SR available.
The basic signaling flow during a call setup is shown in Figure 12.19, first the UE tries to 
contact the eNB sending the random access channel preambles. After being acknowledged, the 
UE sends the RRC connection request to start the RRC connection establishment procedure. 
After the RRC procedure, the eNB sends the initial UE message to MME to setup the S1 signal-
ing connection, and then wait for the MME to send the downlink non‐access stratum (NAS) 
transport back. Then it is time for MME to setup the initial E‐RAB, if the authentication and 
ciphering procedure was successful. After this, the eNB contacts the MME with the message 
RAB assignment request. After E‐RAB setup, there is already IP connectivity between UE and 
gateway which is called “always on line” function.
S1AP initial UE message shown in Figure 12.20 is the first message sent to the MME to 
establish a connection. The eNB uses the eNB‐UE‐S1AP‐ID to uniquely identify the UE 
over the S1 interface within the eNB. EPS attach type may be EPS attach and combined 
EPS/IMSI attach. The UE identity is specified by IMSI (if the UE has not registered with 
the network) and old GUTI (subsequent attach requests identify the UE with the 
old GUTI).
The attach accept message specifies that the attach has been successful. The UE will be 
attached to the EPS only (i.e., LTE only, no SGSN registration). The T3412 timer shown in 
Figure 12.21 specifies the maximum time between tracking area updates from UE which is 
reset and started with its initial value when the UE goes from EMM‐connected to EMM‐idle 
mode, stopped when the UE enters EMM‐connected mode or EMM‐ REREGISTERED state. 
The TAI list in the message specifies the PLMN and the tracking area codes for all the registered 
tracking areas. The message contains GUTI, which uniquely identifies the UE with PLMN, 
MME group, MMC code, and the M‐TMSI.
Network performance can be evaluated by some measures implying attach and detach 
­procedures (e.g., attach time, attach success rate). The parameters impacting attach (detach) 
procedures are listed in Table 12.14.
Accessibility is defined as the ability of a user to obtain a requested service from the system. 
The KPI is expressed by:
	
pmRrcConnEstabSucc
pmRrcConnEstabAtt
pmRrcConnEstabAttReatt
pmS SigConnEstabSucc
pmS SigConnEstabAtt
pmErabEstabSuccl
1
1
nit
pmErabEstabAttlnit
100
As we have discussed in Chapter 12.7, RACH success rate can be improved by adjusting the 
preamble transmit power. In addition, RRC connection establish re‐attempts could be 
decreased for improving the RACH success rate indirectly. For example, there has two ways to 
reduce RRC connection establish re‐attempts, one is increasing mac‐ContentionResolutionTimer 
www.ebook3000.com

LTE Optimization Engineering Handbook
694
UE
eNB
MME
RRC connection setup complete
Initial UE message
Downlink NAS transport
Initial context setup request
RRC connection reconfiguration
RRC connection 
reconfiguration  complete
ERAB assignment response
RACH preambles
RRC connection request
RRC connection setup
RRC connection request
Initial UE message
RRC connection setup
Random access 
S1 connection establishment
E-RAB establishment
eNodeB
Initial UE Message
Initial Context Setup+Attach Accept+
Activate Default Bearer
Initial Context Setup Response
Attach Complete+Activate Default Bearer Accept
MME
Update Location Answer
Create Session Request
Modify Bearer Request
SGW
HSS
Authentication & Ciphering procedure
Update Location Request
Create Session Response
Figure 12.19  Accessibility procedure.
S1AP initial UE message
Connection 
Request
Attach 
request
eNB UE 
S1AP ID
Tracking 
area  ID
EPS attach type, identity, EPS encryption 
algorithm, EPS encryption algorithm
Figure 12.20  S1AP initial UE message.

PRACH Optimization
695
(maximum is 64SF,means 64 ms) to enhance the first time of RRC setup request, the other is 
reducing maxHARQ‐Msg3TX (minimum is 1) to lower the probability of RRC connection 
establish re‐attempts.
12.10.3  Accessibility Analysis Tree
Accessibility for the LTE process can be divided into the following phases, paging, random 
access, RRC connection establishment, S1 signaling connection establishment, and initial E‐RAB 
TA Update
TA Update
TA Update
t3412
idle mode
UE moves to
connected mode
UE moves to
idle mode
t3412
t3412
Figure 12.21  T3412 timer.
Table 12.14  The parameters of attach (detach).
Name
Recommended value
preamble Initial Received Target Power
dBm‐94
preamble Transmit Power Step Size
dB4
deltaPreamble Msg3
12
tPC RACH Msg3
4 dB
preamble TransMax
n8
maxHARQ msg3 Tx
4
maximum number of DL transmisions RACH message4
4
rootSequenceIndex
Set according to prachConfiguration 
Index by Network Planning
zeroCorrelationZoneConfig
12
prach Configuration Index
Set according to PRACH format
prachFrequencyOffset
Set according to PRACH forma and 
the capacity
numberOfRAPreambles
56
mac Contention Resolution Timer,UE waiting time for Msg4 
during PRACH process.
Sf64
pRACH Detect False Alarm Prob
0.1%
receptionOfMsg1Timer
30
n310
n20
t310
ms2000
www.ebook3000.com

LTE Optimization Engineering Handbook
696
establishment or E‐RAB addition. Accessibility measurements can be based on drive tests or 
signaling statistics. Reasons for poor accessibility include but are not limited to:
●
●Poor coverage. In this case, the parameter qRxLevMin, Pmax can be increased and coverage 
hole should be handled.
●
●UE camping in the wrong cell. In this case, parameters for cell reselection should be tuned.
●
●High UL interference.
●
●The preamble collision.
●
●Transport related issue.
●
●Link adaptation parameter not suitable.
●
●Admission reject, for example, PUCCH service request resource congestion, due to lack of 
licenses.
The above issues can be further formed a issue analysis tree. Accessibility analysis tree is 
shown in Figure 12.22.
For random access failure, the reasons include improper length of RAR window based on 
preamble format, resource unavailability in target eNB (in case of CFRA) and improper ­random 
access preamble planning, and so on. For RRC connection establishment failure, the reasons 
include poor coverage, UE camping in the wrong cell, high UL interference, admission reject, 
and so on. Besides, incorrect or missing TAI‐LAI pairing could result in accessibility failures 
when UE attempts CS fallback. In fact, the random access setup success rate and RRC connec-
tion setup success rate are highly correlated in a live network, which is shown in Figure 12.23.
Paging
Random Access
RRC Connection
Initial S1  Context Setup
Initial / Added E-rab
1. Incoming S1AP 
Message Overload
2. Paging Message 
discarded by RAN
1.CFRA Preamble not allocated by
target RBS
2. RAR message window expiry
3.Improper RA preamble planning
1.Connected users license exceeded / 
Hard limit reached in RBS
2.High load / Overload
3.RF abnormalities 
4.Wrong parameters
1.RBS timeout on initial context setup
request from MME
2.License for no.of ERAB's per user /
License for RLC UM  OK ?
3. UL /DL GBR resources overload
1.License for no.of ERAB's per user 
/License for RLC UM OK ?
2.UL/DL GBR resources overload
Figure 12.22  Accessibility tree.
95.0%
95.5%
96.0%
96.5%
97.0%
97.5%
98.0%
98.5%
99.0%
99.5%
100.0%
40%
50%
60%
70%
80%
90%
100%
RRC Connection Setup Success rate
Random Access Setup Success rate
Figure 12.23  Random access setup 
success rate versus RRC connection 
setup success rate.

PRACH Optimization
697
The RRC connection setup analysis can be measured as the number of received (by eNB) 
RRC connection setup complete messages divided by the number of received (by eNB) RRC connection 
setup request messages. Poor performance of RRC connection setup success rate can be caused 
by RRC connection setup complete message reception problems at eNB or RRC connection setup 
message receiption problems at the UE. Any capacity limitation in terms of number of RRC 
connected users will reduce RRC connection setup success rate. An example of RRC connection 
setup failure caused by T300 expiry is shown in Figure 12.24.
For S1 analysis, E‐RAB setup success rate is focused. S1 link failure reasons include software 
error or transport related issues, for example, the “eNB_UE_S1AP_ID” is not recognized by the 
MME, the MME and the eNB go out of sequence. The eNB releases the old “eNB_UE_S1AP_ID,” 
however, the MME holds it for a while. New S1 requests received by the MME using this ID will 
be rejected by the MME etc.
	
E
RAB setup successrate
Initial context setup
respons
 
 
 
   
 
 
 
#
emessages
Initial context setuprequest messages
 
 
 
 
 
/#
	
or
	
E
RAB setup successrate
E
RAB setupresponsemessages
 
 
 
   
 
 
 
#
/
#E
RAB setuprequest messagesmessages
 
 
 
 
	
The above average success rate of E‐RAB setup, RB setup, RRC connection setup, and ­random 
access setup should be daily monitored. Figure 12.25 presents the daily statistics and accessibility 
can be analyzed and optimized.
12.10.4  Call and Data Session Setup Optimization
The call setup has five phases: PRACH phase (also applies to handover), SRB1 setup, NAS 
security setup and RRC security, UE capability enquiry and SRB2, DRB setup. Success of phases 
1–2 must be monitored from PRACH and RRC signaling counters, success of phases 3–5 is 
monitored from S1AP and E‐RAB counters → “S1 view.”
According to different NAS procedure, the RRC cause can be MO‐singling, MO‐data, MT‐
access, and emergency. Mapping of NAS procedure to RRC establishment cause (excerpt from 
3GPP TS 24.301) is presented in Table 12.15.
Effective RRC Conn Setup 
Failure rate counts repetitive 
attempts / failures as 1
Figure 12.24  T300 expiry.
www.ebook3000.com

LTE Optimization Engineering Handbook
698
LTE default data session setup takes place at the time of UE registration and attachment. 
Bearer establishment has three steps: UE to eNB (radio bearer), eNB to SGW (S1‐U), and SGW 
to PGW (S5/S8). UE transfers from idle to active when default data session is reactivated 
through a service request procedure by RRC connection and signaling exchange between UE, 
eNB, MME, and SGW.
Data session setup steps and latency is shown in Figure 12.26.
12.10.5  RACH Estimation for Different Traffic Profile
RACH detection performance expectation can be refered to 3GPP TS 36.104 as shown in 
Table 12.16, the minimum performance requirement is that RACH performance is very sensi-
tive to UE frequency offset of the carrier frequency, RACH format 2 and 3 can provide better 
performance as RACH format 0 and 1 detection.
Although RACH preamble Format 0 provides a theoretical support of 15 km cell radius 
purely from over‐the‐air signal transmission delay perspective, the real cell coverage in practical 
deployment depends on many factors such as morphology situation, pathloss model, eNB 
50
55
60
65
70
75
80
85
90
95
98.4
98.6
98.8
99
99.2
99.4
99.6
99.8
100
Day 1
Day 2
Day 3
Random Access Setup
Success rate [%]
Setup Success rate [%]
RRC Connection Setup Success rate
RB Setup Success rate
E-RAB Setup Success rate
Random Access Setup Success rate
Figure 12.25  RRC connection setup, RB/E‐RAB setup success rate statistics.
Table 12.15  Mapping of NAS procedure to RRC establishment cause.
NAS procedure
RRC cause
Type of call
Attach
MO – signaling
Original signaling
TAU
MO – signaling
Original signaling
Service request
MO – data
Original call
MT – access
Terminated call
Extended service request
MO – data (original CSFB)
Original call
MT – access (terminated CSFB)
Terminated call
Emergency (emergency CSFB)
Emergency call

PRACH Optimization
699
antenna height, and so on. Long CP is longer for Format 3 compared to Format 2, thus allowing 
a higher propagation latency and cell radius (up to 100 km), since the longer CP of Format 3 
allows for higher latency, the Format 3 can be used in scenarios where the latency budget of 
Format 2 is insufficient. The message sequence in Format 3 is repeated twice (same as Format 
2)—hence link‐budget is similar as Format‐2, and RACH Format 2 and 3 yields 2 dB improve-
ment. Table 12.17 gives the link budget of different PRACH format, under the assumption of 
1% missed detection.
The main factors of random access channel decoding success rate degradation was the false 
preamble detections between intra‐eNB neighboring cells from same band due to not efficient 
random access parameters planning or the high load of the cell. RACH success degradation is 
needed to identify if it comes from uplink interference caused by collision or RACH density 
increases, and so on.
Number of growing subscribers is one important factor that contributes to the preamble col-
lision. Each UE selects preamble randomly. If a RACH planning is not performed properly, the 
higher number of UEs in each cell contributes to higher chance of the different UEs select the 
same preamble and as a consequence the collision increases. As shown in Figure 12.27, user 
size and RACH attempts show strong coefficient correlations even with 390 users, RACH 
attempts per 10 ms are less than 0.25, therefore, the RACH success degradation seems to be 
from uplink interference ‐ > no need to increase RACH density.
Actually, reducing the re‐use of overlapping root sequences during PRACH planning is the 
effective way to reduce false preamble detection, this is particularly important in large cells and 
for high speed UE scenarios.
LTE Default DATA SESSION SETUP
LTE Service Request
UE
eNodeB
Data
Active
IDLE
Registration
Trrc=RRC Setup Time
Tsession setup= Setup time at registration
Tdata=Data Transfer
Trrc=RRC Setup Time
Tsession setup= Setup time at reactivation
Tdata=Data Transfer
MME
SGW
Server
PDN
GW
UE
eNodeB
MME
SGW
Server
PDN
GW
RRC connection
average latency
is 250ms, 95%
samples need to
be lower than
500 ms
Bearer setup
average latency is
500ms, 95%
samples need to
be lower than 1sec
Figure 12.26  Data session setup steps and latency.
Table 12.16  PRACH missed detection requirements for normal mode.
Number of RX  
antennas
Propagation  
conditions
Frequency offset
SNR[dB]
Burst
format 0
Burst
format 1
Burst
format 2
Burst
format 3
Burst
format 4
2
AWGN
0
−14.2
−14.2
−16.4
−16.5
−7.2
ETU 70
270HZ
−8.0
−7.8
−10.0
−10.1
−0.1
4
AWGN
0
−16.9
−16.7
−19.0
−18.8
−9.8
ETU 70
270HZ
−12.1
−11.7
−14.1
−13.9
−5.1
www.ebook3000.com

 Table 12.17  Link budget of different PRACH format. 
UL LTE link budget
 RACH 
Format 0 
 Dense urban 
 RACH 
Format 2 
 Dense urban 
 RACH 
Format 3 
 Dense urban 
 RACH 
Format 0 
 Suburban 
 RACH 
Format 2 
 Suburban 
 RACH 
Format 3 
 Suburban 
 RACH 
Format 0 
 Rural 
 RACH 
Format 2 
 Rural 
 RACH 
Format 3 
 Rural 
Channel model used
EPedA5
EPedA5
EPedA5
ETU70
ETU70
ETU70
ETU70
ETU70
ETU70 
UL Max EIRP=UE Max Tx 
power 
+UE antanna gain ‐Bodyloss
dBm
23
23
23
23
23
23
23
23
23 
UL Cable & Connector loss
dB
2
2
2
2
2
2
2
2
2 
eNB antenna gain
dBi
15
15
15
15
15
15
15
15
15 
Penetration loss
dB
17
17
17
11
11
11
5
5
5 
Shadow STD + margin
dB
8.6
8.6
8.6
8
8
8
4.4
4.4
4.4 
Handoff gain
dB
2
2
2
2
2
2
2
2
2 
IoT
dB
3
3
3
3
3
3
3
3
3 
Thenmal noise
dBm/
Hz
−174
−174
−174
−174
−174
−174
−174
−174
−174 
eNB Noise factor
dB
2.5
2.5
2.5
2.5
2.5
2.5
2.5
2.5
2.5 
Number of UL RBs
6
6
6
6
6
6
6
6
6 
Noise bandwidth
kHz
1080
1080
1080
1080
1080
1080
1080
1080
1080 
MCS number
n/a 
SNR(per antenna)
dB
−10.9
−13.5
−13.6
−8.5
−11
−11.1
−8.5
−11
−11.1 
eNB sensitivity
dBm
−122.1
−124.7
−124.8
−119.7
−122.2
122.3
−119.7
−122.2
−122.3 
UL Max Coupling Loss=
UL Max EIRP‐eNB Sensitivity
dB
145.1
147.7
147.8
142.7
145.2
145.3
142.7
145.2
145.3 
0.0 
UL MAPL
dB
131.5
134.1
134.2
135.7
138.2
138.2
145.3
147.8
147.9

PRACH Optimization
701
0
0
10
30
50
70
90
110
130
150
170
190
210
230
250
270
290
310
330
350
370
390
50
RACH ATT (Gr)
RACH
100
150
CELL_LOAD_AC
Average user size vs. RACH Attempt
RACH attempts per 10ms per user size
200
250
2000
0.20
0.15
0.10
0.05
0.00
1.0
0.9
0.8
0.7
0
50
100
150
ACT UE
200
250
4000
6000
8000
10000
12000
Figure 12.27  RACH success versus average user size.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
702
13.1  ­Overview
The physical cell ID is used to indicate the physical layer identity of the cell. The PCI is used for 
cell identity during cell selection procedure. There are total of 504 IDs (0–503). The physical 
layer cell identities are grouped into 168 unique physical layer cell identity groups, each group 
containing three unique identities. The grouping is such that each physical‐layer cell identity is 
part of one and only one physical layer cell identity group. A physical‐layer cell identity 
N
N
N
ID
cell
ID
ID
3
1
2  is thus uniquely defined by a number NID
1  in the range of 0 to 167, defines 
SSS sequence, helps in frame timing determination, representing the physical layer cell identity 
group, and a number NID
2  in the range of 0 to 2, defines PSS sequence, representing the physical 
layer identity within the physical layer cell identity group and helps in sub‐frame timing 
determination (Figure 13.1).
After the UE powered on, the first thing to do is PCI acquirement, the procedure is depicted 
in Figure 13.2.
There are 504 physical layer cell identities, thus it is recommended that when planning, the 
UE should not receive simultaneously multiple PCI from immediate neighbors with equal PCI 
values, PCI mod 3 values, PCI mod 6 values (only applicable to networks that have single trans-
mit antenna configurations), or PCI mod 30 values, in such scenarios, PCI configurations 
impact the allocation of resource elements to the RS and the set of physical channels.
For the case of equal PCI values from multiple neighbors, possible neighbor confusions or 
collisions occur which results in poor retainability and accessibility performance when neighbors 
are allocated the same PCI.
If a cell and its neighbors all have the same PCI mod 3 values in MIMO scenario, interference 
on reference signals between cells with the same PCI mod 3 can be very high. The time taken 
for a UE to camp on a suitable cell increases. By ensuring that at least two of the immediate cell 
neighbor cells have different PCI mod 3 values, this delay is decreased.
There are 30 base sequences which are used by the uplink reference signals. If two or more 
cells use the PCI values where the PCI mod 30 values are equal, the chance of having strong 
inter‐cell uplink interference is increased. The chance is higher when the neighbor cells are 
aligned in time frame and have high PRB utilization rate.
PCI is also used to calculate the PCFICH offset, a term of the calculation is: “pyhCellId modulo 
{ (number of PRBs in DL)/2}.” PCI of neighbor cells should have different PCI modulo 
{ (number of PRBs in DL)/2} to avoid the same frequency (location) of the PCFICH.
13
Physical Cell ID Optimization

Physical Cell ID Optimization
703
13.2  ­PCI Optimization Methodology
The purpose of PCI optimization is to ensure to a great extent that neighboring cells should 
have different primary sequences allocated. Cleaning the PCIs is probably the most effective 
steps to improve RF performance. Good PCI assignment reduces call drops by enabling UE to 
clearly distinguish one cell from another.
Cell id is the combination of one of the three sequences supported by P‐SCH and the group 
ID supported by S‐SCH. So realizing a cell id planning means realizing P‐SCH planning and 
S‐SCH planning. There are normally two methods. One is assigning fixed PSS per site and 
rotate SSS per sector, for example, fixed PSS 1 assigned, the other is assigning fixed SSS per site 
and rotate PSS per sector, for example, fixed SSS 27 assigned, which is shown in Figure 13.3.
Assigning different groups to sectors of the same site and the same PSS (id within the PCI 
group ‐ 0, 1, or 2) for those sectors will force collision to happen on resource elements (RE) 
associated with RSs, and the traffic REs will not receive any interference from co‐sited sectors’ 
RS. So the strategy is recommended on the method 2 that using the same PCI group for sectors 
of the same site so that REs associated with the RSs do not collide. An example of PCI planning 
of same SSS per site shown in Table 13.1, three sectors in the same site will have succeeding 
PCIs, for example, 0, 1, and 2. This approach improves the quality of the RS decoding, but it 
introduces constant interference to traffic REs. In addition, from the PCI plot we can spot its 
dominance area and also indicates if the sector is transmitting, swap feeders issues, and even 
the azimuth is right or not as shown in Figure 13.4.
Physical layer cell identity =3* SSS +PSS =(3 × N(1)) + N(2)
ID
ID
sub cell identity
504
0–167
0–2
(within cell identity group)
cell identity
group
set of 504 cell
identities
PCI=3×Cell ID Group + Sub Cell ID
Figure 13.1  Physical layer cell identity.
1. PSS Primary Synchronisation Signal
(MIB – DL system bandwidth, PHICH
configuration)
(Channel estimation & measurements –
like CPICH in UMTS)
(Frame synchronisation
+ Physical Cell id group (1..168))
(Time-slot & Frequency synchronisation
+ Physical cell id (0,1,2))
2. SSS Secondary Synchronisation Signal
3. DL Reference Signals
4. PBCH – Physical Broadcast Channel
eNodeB
UE
Figure 13.2  PCI acquired.
www.ebook3000.com

LTE Optimization Engineering Handbook
704
337 = 112,1
169=56,1
83 =27,2
81=27,0
1 = 0,1
82 = 27,1
Figure 13.3  PCI plan method 1 and 2.
Table 13.1  An example of PCI planning of same SSS per site.
Site Group for Spacing of 1 (same as SSS if Spacing = 1)
0
1
2
  3
…
167
0
3
6
  9
501
1
4
7
10
502
2
5
8
11
503
PCls
233
233
233
233
233
233
233
233
402
402
402
402
402
402
402
402
402
402
402
233
64
402
402
402
402
402
402
402
402 64 64 64
64
64
64 64 64
64
64
64
64
64 64
64
64
64
64
64
64
64
64
64
64
64
233
233
64
233
233
Figure 13.4  PCI plot.

Physical Cell ID Optimization
705
Actually, the 504 PCIs won’t be assigned to all the cells, some PCI should be reserved for 
optimization during PCI planning that needs to specify PCI values that the algorithm will 
never assign. PCI check and optimization methodology is described below:
●
●Check that no neighboring cell has the same PCI value. Avoid assigning the same mod3 to 
neighbor cells, which will cause poorer detection of serving and neighbor CRS and PSS, 
lower RS SINR and throughput; avoid assigning the same mod30 (PCI) to neighbor cells, 
which will cause poor channel estimation of PUCCH DMRS if there is no group hopping and 
poor estimation of PUSCH DMRS if grpAssigPUSCH is the same.
●
●Check that no neighboring cell of any neighbor cell has an identical PCI value.
●
●Check if another cell within a specified distance has an identical PCI value.
●
●Check if another cell within the signal strength threshold has an identical PCI value, the 
­distance between those must satisfy the following criterias:
–
– At cell A edge (RSRPcellA ≤ −115dBm), RSRPcellA ≥ RSRPcellB + 10 dB
–
– At cell B edge (RSRPcellB ≤ –115dBm), RSRPcellB ≥ RSRPcellA + 10 dB
Note: When the neighbor cell signal level is lower than the serving cell 10 dB, the serving cell 
has little effect.
PCI optimization process is shown in Figure 13.5, which can be concluded that first, check 
currently allocated PCI values in valid or planned configurations to determine if there are any 
potential collisions in the network, then, recalculate new PCI values that avoid collisions.
13.2.1  PCI Group Optimization
PCI planning is similar to scrambling code planning in WCDMA, in order to ensure the terminal 
never received more than one cell the same identification number at the same time, the same 
PCI setting should be as large as possible in isolation. In a live network, from all the available 
PCIs, the groups (and reserved codes) are used for the purpose of PCI planning in the LTE 
network is as follows, as shown in Figure 13.6.
This allows for 126 PCIs per group—120 per group available for planning of the outdoor 
macro LTE system and 6 per group reserved for growth within the group. Assuming 3 sectors/
cells per site, each group can therefore accommodate 40 sites (maximum 120 sectors/cells) 
before the code of each group is exhausted.
13.2.2  PCI Code Reuse Distance
For LTE, there are a total of 504 unique PCIs. Each cell is assigned a PCI. If there are more than 
504 cells, the PCIs have to be re‐used. In order to minimize the confusion, the co‐PCI cells 
Detection
Calculation
Implementation
• Neighbor
• Neighbor’s neighbor
• Neighbor
• Neighbor’s neighbor
• Distance
• Signal strength
• Blacklisted PCI
• Mod30 conflicts
• No two cells on a single eNB has the same PCI
• Manually/Automatically
Figure 13.5  PCI optimization process.
www.ebook3000.com

LTE Optimization Engineering Handbook
706
GROUP 1
0
1
2
3
4
5
6
7
8
9
116
115
378
379
380
381
382
383
384
385
386
387
252
253
254
255
256
257
258
259
260
261
126
127
128
129
130
131
132
133
134
135
493
494
495
496
497
498
499
500
501
502
503
367
368
369
370
371
372
373
374
375
376
377
241
242
243
244
245
246
247
248
249
250
251
117
118
119
120
121
122
123
124
125
GROUP 2
GROUP 3
GROUP 4
RESERVED
Area 4
Group 4
Area 7
Group 4
Area 11
Group 3
Area 9
Group 3
Area 3
Group 3
Area 6
Group 2
Area 8
Group 2
Area 2
Group 2
Area 5
Group 1
Area 1
Group 1
Area 10
Group 1
Figure 13.6  Pictorial depiction of concept of group‐based PCI planning.

Physical Cell ID Optimization
707
should be as far apart as possible. Practical question is what is the achievable minimum re‐use 
distance for PCI planning as PCI reuse too close will cause the handover fails. The number of 
PCI is given—it is either whole set (504) or less if restricted from some reasons. The network 
has certain given density of sites that can be characterized by the average intersite distance 
(ISD). Thus, such density indicates clear limitation for the minimum re‐use distance of PCI.
●
●The distance between the same PCI code being used at one cell and then reused at a second 
cell should be as large as possible. From engineering point of view, PCI reuse and avoid cases 
of conflicts for at least first and second tier.
●
●In the context of a rural network, aim for a re‐use distance should be bigger than 2 * maximum cell 
radius.
●
●The re‐use interference (%) should be kept as low as possible or preferably zero.
●
●The same PCI on a different frequency will not interfere with each other.
Figure 13.7 gives an example of same PCI allocation in a live network and the re‐use distance
Let’s take sample of network with certain average ISD, 3 sector sites and all 504 PCI available, 
to calculate the maximum achievable PCI re‐use distance.
●
●PCI allocation consume 1 secondary group per site = > 168 groups available and the radius of 
the ring containing 168 sites is the maximum achievable minimum PCI re‐use distance.
●
●One site coverage area could be expressed as site_area = 0.8 * ISD^2,
●
●Then 168 sites cover area S = 168 * site_area = 168 *0.8 * ISD^2,
●
●The radius of such ring area is r = ISD*SQRT(168*0.8/3.14) = 6.5 * ISD
Thus, one can see that maximum achievable PCI re‐use distance of 3 sector site network is about 
6.5 * ISD. In practice could be smaller due to algorithm imperfections and network irregularities.
PCI 16 repeated 18 times
The assignments with same PCI
Some of the
assignments
with same PCI
4 miles
Figure 13.7  Example of same PCI allocation and the re‐use distance.
www.ebook3000.com

LTE Optimization Engineering Handbook
708
13.2.3  Mod3/30 Discrepancy Analysis
If UE is in a very dense urban area, once UE monitors the number of adjacent cell more than 2, it 
will easily occur mod3 interference between adjacent cell and serving cell. If the mod3 interfer-
ence occurred, and the RSRP difference value between serving cell and mod3 is low, it will been 
seriously influenced CRS RSRQ and SINR. PCI Planning needs to be met with the main following 
principles: The cell in the same eNB SSS must be the same, avoid assigning the same PCI to the 
adjacent cell and avoid the allocation of mod 3 and 30 PCI to the adjacent cell (Figure 13.8).
Unreasonable neighbor definition and practical PCI plan will lead to many problems inevitably. 
In handover, UE receives the handover command (RRC connection configuration message) 
which carries RACH access configuration information. But the configuration info do not 
belong to the cell that UE detected (send Message1 to this cell), it belongs to another cell that 
has the same PCI and neighbor defined in serving cell eNB. So the target cell can not receive 
Message1 due to the preamble does not belong to it. There are lots of similar cases in initial 
tuning project due to neighbor definition and PCI plan issues.
PCI optimization algorithm can be based on interference matrix and minimization of CRS 
SINR−1 which is presented in the below formular.
	
minimize
/
cell
cell
loc
g
i j
i
N
j
N
l
N
i j i j
l
i j
i
g
I
S
,
,
,
,
,
1
1
1
i
l
1/SIR
 


 	
Interference matrix reflect the close degree between the cells. In the LTE network, there are 
a variety of data can reflect the relationship between cells and the most important of which 
there are three kinds, one is the MR data, handover statistical data, and the frequency scan-
ner data.
	
IM
f
RSRP
RSRP
handover cellAtocellB
MR cellA
MR cellB
_
_
, 
 
  
,
_
_
RSRP
RSRP
scan cellA
scan cellB
In engineering, PCI can be optimized based on MR and handover statistical data for the 
whole network, which is shown in Figure 13.9.
13.2.4  Collision and Confusion
PCI collisions are defined as the case when a UE receives the same PCI from more than a single 
cell because the physical separation between cells using the same PCI is not sufficiently large. 
PCI collision can also happen when a cell and its defined neighbor use the same PCI code. PCI 
confusion is a case when a serving cell has got two neighbors with the same PCI. PCI confusion 
Ideal PCI 
planning:
no mod 3 
confliction
2
2
2
2
2
1
1
1
1
1
1
0
0
Practical PCI 
planning:
minimize mod 
3 confliction
2
Figure 13.8  Ideal PCI planning and practical planning.

Physical Cell ID Optimization
709
can cause handoff failure, and the UE can drag the data call in poor RF condition, which may 
impact the throughput to be very slow. In a live network, some cells are even having 100% 
handover failure rate. By checking the serving cell’s relations and external cells, it can spot cases 
of PCI confusion (Figure 13.10).
PCI collision involves only two cells. The two cells are neighbor to each other. UE handover 
activities between the two cells are likely to happen. PCI confusion involves a third cell. The 
two cells having PCI confusion can have UE handover activities between each of them and the 
third cell, but not necessary between them. If there can be UE handover activities between 
these two cells that have the same PCI code, they are also causing PCI collision.
13.3  ­PCI Optimization
The aim of PCI optimization is removing the collision and confusion of PCI based on neighbor 
relation plan and minimizing the RS DL/UL conflict. For the existing network, periodically PCI 
monitoring and optimization are needed and will provide a health network, when the network 
becomes more large and make more adjustment.
Handover statistics
Scanner data
Database
1 Cell correlation calculation
2 Interference matrix calculation
3 Interference of the network calculation
Cell base 
data
MR data
New cell 
PC
PCI automatic optimization of
the whole network
Single cell 
PCI
Figure 13.9  PCI optimization.
Figure 13.10  PCI collision and confusion.
www.ebook3000.com

LTE Optimization Engineering Handbook
710
In a live network, areas of poor coverage (no dominant server) will often have high PCI 
counts (relatively weak RSRP) and conversely areas with a high site density will also show high 
PCI count. The PCI planning proposal for a LTE network deployment includes each site shall 
have unique physical layer cell identity group, ranging from [0 to 167] and each sector within a 
site shall have unique physical layer sub‐cell identity, ranging from [0 to 2]. Usually, the pro-
posed PCI percentage planned for in‐building is 30% and outdoor cells is 70% of all available 
PCI, which is shown in Figure 13.11.
Different number of code groups is proposed to be reserved for different purposes, in order 
to cater for future expansion plans:
Based on the proposed PCI plan, to facilitate easier PCI allocation during LTE network roll-
out and to minimize the possibility of PCI clash, the LTE sites will be clustered based on their 
respective geographical locations and every 18 LTE sites will be grouped into 1 group as shown 
in Figure 13.11. Any additional LTE site in the future that falls within a group will be assigned 
with PCI that is reserved for future expansion of that particular group.
0
0
1
2
3
4
5
6
7
16
17
18
19
20
21
22
23
Outdoor1
Outdoor2
Outdoor3
240
Outdoor4
Outdoor5
IBC1
IBC2
Outdoor
Code Group 0
90
120
156
167
503
468
270
360
PCI
Code Group
0–89
0–269
90–119
270–359
360–467
468–503
120–155
156–167
Category
Outdoor
Outdoor Infill
In-Building
In-Building Infill
0
70% of 168 Code Group
70% of 504 PCI
30% of 168 Code Group
30% of 504 PCI
PCI
Outdoor Infill
In-Building
In-Building Infill
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
30
45
60
75
90
105
16
31
46
61
76
91
106
17
32
47
62
77
92
107
18
33
48
63
78
93
108
19
34
49
64
79
94
109
20
35
50
65
80
95
110
21
36
51
66
81
96
111
22
37
52
67
82
97
112
23
38
53
68
83
98
113
24
39
54
69
84
99
114
25
40
55
70
85
100
115
26
41
56
71
86
101
116
27
42
57
72
87
102
117
28
43
58
73
88
103
118
29
44
59
74
89
104
119
241
242
243
244
245
246
247
248
249
250
251
252
253
254
456
366
360
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
372
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
378
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
384
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
390
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
396
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
402
403
404
405
406
407
397
398
399
400
401
391
392
393
394
395
385
386
387
388
389
379
380
381
382
383
373
374
375
376
377
367
368
369
370
371
361
362
363
364
365
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
498
499
500
501
502
503
For furture expasion
Figure 13.11  PCI optimized plan.

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
711
Tracking area (TA) represents the LTE equivalent to routing area where the current UE 
registration is valid. The network is organized into groups of cells called tracking areas. While 
UE is in idle mode, the MME is only aware of the current tracking area. LTE does not have a 
circuit switched domain so does not require location areas. When a UE registers itself in the 
network, the UE is responsible for registering itself within a specific TA, the core network 
stores information about the tracking area where the registration is performed. TA is used for 
EPS mobility management (EMM) when paging idle UEs to notify them about incoming data 
connections. System information block 1 (SIB1) broadcasts the TA to which a cell belongs. SIB 
1 is broadcast once every 80 ms. An eNB can include cells which belong to different tracking 
areas and a single cell can belong to more than 1 TA. A single TA can span multiple MME or 
can be within a single MME area.
There is an additional concept of tracking area list (TAL) in LTE for overcoming some of the 
limitations of the standard TA, for example, frequent updates when a UE keeps hopping 
between two or more adjacent cells in different TAs. In this scheme, instead of assigning one 
TA to each cell, one cell can have multiple lists of TAs. These TAs can be aggregated into TAL 
instead of replanning of one TA. While UE is moving within one TAL, no TAU is triggered.
Similar to 3G, the UE shall send periodic location updates to MME to refresh its location. 
There are usually two types of TAUs (TA update), periodic TAU and mobility TAU. With peri-
odic TAU, the UE wakes up and attaches to the network at fixed intervals to refresh the EPC of 
its existence. This allows the MME to keep track of UEs that have gone out of coverage. If a 
tracking area update isn’t received by MME within the expected timeframe, it will delete the 
context of the UE from its database. For mobility TAU, at a high level, when the UE detects that 
it is moving between different tracking areas, it shall inform the MME of the change and the 
MME will update its location database. In a live network a TA update can take place in 
below cases:
●
●UE entered a new TA that is not in the list of TAIs that the UE registered;
●
●The periodic TA update timer has expired;
●
●UE was in UTRAN PMM_connected state when it reselects to LTE;
●
●UE was in GPRS READY state when it reselects to LTE;
●
●The TIN indicates ‘P‐TMSI’ when the UE reselects to LTE (e.g. due to bearer configuration 
modifications performed on 2/3G);
●
●The RRC connection was released with release cause ‘load re‐balancing TAU required’;
●
●UE core network capability and/or UE specific DRX parameters has been changed.
The user receives the TA list from a cell, and will not change its list, until it moves to a cell, 
which is not included in the list. TA list can cover one or more TAs, TA list benefits over adding 
eNBs to single TA is that TA list can be created based on subscriber needs according to history 
14
Tracking Areas Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
712
of UE movement. When the SGSN‐MME pages a UE, a paging message is sent to all eNBs in 
the TAI list that includes 1 to 16 TA. Tracking area is identified by TAI (tracking area identity), 
which is constructed from the MCC (mobile country code), MNC (mobile network code), and 
TAC (tracking area code).
	
TAI
MCC
MNC
TAC	
The UE performs a new registration, either after a certain time (periodic registration) or 
when it enters a new TA/TA list where the registration is no longer valid. An MME can assign 
several tracking areas to the UE in order to reduce the tracking area update signaling. TAI list 
is the TA history of a UE moved to, if the UE moved to another TA, the new TA is added to TA 
list, even UE is idle as shown in Figure 14.1. The TAs of the TA list allocated to the UE shall be 
located within one MME pool area.
Proper TA design can avoid signaling congestion in location management of UEs. The size of 
a tracking area depends on RAN/EPC vendor limitations and backhaul constraints. The initial 
design will be subject to revision over time to adapt to network changes, for example, pico cell, 
UE types, new site editions, backhaul modification, and so on. The key for tracking area design 
should consider the optimal factors:
●
●The number of eNBs in a TA;
●
●Low UE power consumption: Save UE battery life by minimizing the frequency of UE waking 
up to check PCH channel and reducing tracking update procedure;
●
●Low paging delay: Ensure that there isn’t excessive delay for paging;
●
●Low network load: Avoid signaling overload on the transport network.
14.1  ­TA Optimization
The main target of TA optimization is to minimize paging and TA updates. Tracking areas 
normally are planned to be relatively large (100 eNBs) rather than relatively small. It is neces-
sary to achieve balance between number of TA updates and paging load. Paging load increases 
with bigger size of TA(L), the TA(L) size may be reduced subsequently if the experienced 
­paging load becomes high. Generally, existing 2G and 3G location area and routing area bound-
aries should be used as a basis for defining LTE tracking area boundaries.
There are two methods in initial TA planning shown in Figure 14.2. One is small TA 
area that will result more frequent TA updates, lower paging load, even reduced paging 
success rate since the UE cannot respond to paging during TA update procedure, and 
higher UE battery consumption. The other one is big TA area that will result less frequent 
TA updates, higher paging load, but might cause pages being blocked leading to traffic 
lost (Figure 14.3).
TAI list:
TA1
TAI list:
TA1, TA2
TA1
TA1
TA2
Figure 14.1  Tracking area ID list.

Tracking Areas Optimization
713
The cell in the TA will have a TAC to be defined in the eNB. Actually for every TA, the operator 
can specify a list of up to 16 TAs to include and the SGSN‐MME always adds the current and 
old TA to the list forming a TA list. TA update and paging are on TAL level and the UE is 
known in EPC and registered at the TAL level and not the TAC level. When the UE is paged, all 
the TAC’s inside the TAL will be paged. TAL’s are usually designed to be overlapping to avoid 
ping‐pong and intensive TA updates on TAL borders. The larger the number of TAs in the TA 
list, the more even distribution of TA update signaling is achieved and more complex planning.
14.1.1  TA Update Procedure
When the UE initiates a TAU procedure, it sends Tracking area update request message with 
its current GUTI or IMSI, old TAI and EPS bearer status information to the eNB, and the eNB 
forwards the message to a MME. If the old MME cannot be selected, then a new MME must be 
chosen by the eNB. The new MME must first of all get the identity (IMSI) of the subscriber and 
authenticate. Therefore, the new MME contacts the old one via GTP‐C context request mes-
sage. The context response message contains IMSI, authentication vectors, but also all informa-
tion about the currently active SAE bearers of this user. With one of the authentication vectors 
the new MME can start authentication.
After a successful authentication, the new MME analyzes if a serving GW change is needed. 
New MME informs the old one that it is ready to take control over the UE (context acknoeledge 
message). The old MME will now start a timer and wait for the cancellation of the subscriber 
record. In parallel to the previous step the new MME sends GTP‐C creat bearer request message 
to the serving GW it has selected. The message will trigger the setup of new S1 tunnels and 
trigger an update toward PDN GW. This will change the traffic path from PDN GW to new 
serving GW to new eNB. Also simultaneously with the previous steps the MME will update the 
HSS. During this the HSS will cancel the subscriber record in the old MME. The old MME will 
of course also delete the old tunnels in the old serving GW. At the end the UE gets a NAS 
­message Tracking area update accept. In it a new GUTI and new TA(L) will be contained. The 
UE has to acknowledge with Tracking area update complete message (Figure 14.4).
Frequent TA 
updates, drains 
UE battery, high 
signaling load and
decreased success
rate for terminated
calls
High paging load, 
pages blocked,
decreased success
rate for terminated
calls
TA1
TA1
TA4
TA2
TA3
Figure 14.2  Small TAs and big TAs.
TAL1
TAC2
TAC1
TAC3
TAC4
TAC5
TAC6
TAC7
TAL2
TAL3
TAC8
TAC9
TAC11
TAC10
TAC12
Figure 14.3  Overlapping of TAL.
www.ebook3000.com

The message includes RRC 
parameters indicating the selected 
network and the old GUMMEI.
UE Core Network Capability,
old GUTI, last visited TAI, active 
flag, EPS bearer status, P-TMSI 
Signature, additional GUTI,
KSIASME, NAS sequence 
number, NAS-MAC, KSISGSN
GUTI is included if the MME 
allocates a new GUTI. If the 
“active flag” is set in the TAU 
request message the user plane 
setup procedure can be activated 
in conjunction with the TAU 
accept message.
The new MME uses the GUTI 
received from the UE to 
derive the oldMME address
and user information
Deactivate bearers not 
active in the UE
9. Modify Bearer Request
2. Tracking Area Update Request
14. Update Location Request
5. Context Response
6. Authentication / Security
20. Tracking Area Update Accept
15. Cancel Location
7. Context Acknowledge
4. Context Request
17. Iu Release Command
18. Iu Release Complete
21. Tracking Area Update Complete
UE
eNB
PDN
GW
HSS
3. Tracking Area Update Request
19. Update Location Ack
16. Cancel Location Ack
13. Modify Bearer Response
10. Modify Bearer Request
12. Modify Bearer Response
RNC
BSC
(A)
PCRF
Serving
GW
1. Trigger to start TAU 
procedure
UE
MME
Old MME / 
Old SGSN
11. PCEF Initiated IP-CAN
     Session Modification
Figure 14.4  TAU procedure w/o serving GW change.

Tracking Areas Optimization
715
14.1.2  TA Optimization and TAU Failure
The main drawback associated with large TAs is an increased paging load. 3GPP TS 36.331 
specifies that a single paging message can accommodate a maximum of 16 paging records, but 
some vendors limit the number of paging messages to 1 per 10 ms radio frame. The configura-
tion with 1 paging occasion per 10 ms means that the paging channel is able to support 1600 
pages per second. Paging collisions as well as substantial S1 processing at eNB are likely to be 
experienced once the paging load reaches about 500 pages per second. Therefore, it is recom-
mended to split paging area if the paging load appears to be around 500 pages/second. LTE 
counters should be monitored subsequent to launching the network to ensure that the paging 
load does not become too high. If the paging load approaches 500 pages per second then a 
reduction in TA size should be considered.
Maximum tracking area size can be got from the below formula:
TA
PC
PI
size
eNB
eNB
max
PCeNB is the number of pagings/s, which can be served by a single eNB in a planned TA, it 
means that the number of S1AP paging messages can be handled and sent from each eNB 
toward UEs. PIeNB is the paging intensity that paging traffic generated toward UEs that are 
camped under one eNB. Let’s take an example of TA optimization. Assume the TA contains 
360 cells, and there are 1000 UEs/cell and 5Pages/UE/hour. Thus in this TA, 1800000 pages/
hour are needed. So paging load is 1800000/3600 = 500 pages/second, assume average PIeNB is 
5, then tracking area size is 100 eNBs, which is the number one reason we should start to think 
how to adjust the TA.
The main benefit associated with large TAs is a reduced requirement for TA updates 
resulting from mobility. TA updates generate signaling and also increase the probability of 
a UE missing a paging message. Paging messages may be missed because there is a delay 
between a UE crossing a TA boundary and that UE registering with the new TA, that is, 
paging messages could be broadcast across the old TA after the UE has moved into a 
new TA.
Another method of avioding frequent TA update is that tracking areas should not run close 
to and parallel to major roads nor railways. Likewise, if possible, boundaries should not ­traverse 
dense subscriber areas.
For normal TAU, after sending the tracking area update request message to the MME, the UE 
shall start timer T3430 and enter state EMM‐tracking‐area‐updateing‐initiated. During the 
tracking area updating procedure, the MME may initiate an authentication procedure and 
setup security mode, UE initiating the tracking area updating procedure in EMM‐idle mode 
may request the network to re‐establish the radio and S1 bearers for all active EPS bearer 
­contexts during the procedure.
For periodic TAU, the procedure is controlled in the UE by the periodic tracking area update 
timer (timer T3412), T3412 is reset and started with its initial value when the UE goes from 
EMM‐connected to EMM‐idle mode and stopped when the UE enters EMM‐connected mode. 
When timer T3412 expires, the periodic tracking area updating procedure shall be started and 
the timer shall be set to its initial value for the next start. This measurement provides the num-
ber of attempted and successfully performed periodic and intra‐MME TAU procedures initiated 
in this MME.
Figure 14.5 directs the TAU success and failure, and Table 14.1 gives the location‐ and 
periodic‐based TAU failure categories with EMM cause value.
www.ebook3000.com

LTE Optimization Engineering Handbook
716
14.2  ­TA List Optimization
In the area of TA management, the LTE systems admit more flexible configuration. For instance 
there are possibilities of assigning more than one TA to a user, or multiple TAs to a cell.
The MME will automatically create TA List based on UE mobility, and sends to the UE a TA 
List containing the current TA and one or several neighbor TAs, also can update the TA List to 
avoid ping‐pong events at TA borders. It allows to optimize TA List to reduce paging messages 
when paging the TA List is needed.
UE
MME
Stop T3430
OR
TRACKING AREA UPDATE REQUEST
Start T3430
Stop T3450
TRACKING AREA UPDATE ACCEPT
TRACKING AREA UPDATE COMPLETE
Stop T3430
TRACKING AREA UPDATE REQUEST
Start T3430
TRACKING AREA UPDATE REJECT
If GUTI allocated,
Start T3450
If GUTI allocated,
TAU Attempt
TAU Success
TAU Failure
MME
Figure 14.5  TAU success and failure.
Table 14.1  Location‐ and periodic‐based TAU failure categories (EMM Cause Value).
Location‐based TAU Failure Categories
Periodic TAU Failure Categories
●
●#11 PLMN not allowed
●
●#14 EPS Service not allowed in this PLMN
●
●#12 Tracking Area not allowed
●
●#15 No Suitable cells in TA
●
●#22 NAS level mobility management congestion
●
●#9 UE identity can not be derived by the Network
●
●#25 Not authorized for this CSG
●
●#40 No EPS bearer Context activated
●
●Radio link failure
●
●Signaling failure between MME and eNB
●
●#10 Explicit detached
●
●#12 Tracking Area not allowed
●
●#15 No Suitable cells in TA
●
●#22 NAS level mobility management congestion
●
●#9 UE identity can not be derived by the Network
●
●#25 Not authorized for this CSG
●
●#40 No EPS bearer Context activated
●
●Radio link failure
●
●Signaling failure between MME and eNB

Tracking Areas Optimization
717
TA List design, making the TA area planning more flexible, in addition to the different 
­scenario can be designed to different TA area size, but also can be configured by the individual 
user within the TA List to solve. However, taking into account the TA List is a user level 
­configuration, TA List extension will affect the length of each user’s NAS signaling, it is not 
recommended that the number of TAs in the TA List is too much. The factor impact the num-
ber of cells in the TA List is shown in the Figure 14‐6. The main role of TA List is still to prevent 
the user from the TA borders frequently launched TAU. TA List design can be divided into two 
kinds of methods.
●
●The TA area is still determined by the traditional way, the number of TAs in the TA List is 
necessarily less, for 1 to 3 or so.
●
●TA List optimization is in accordance with a single UE. Such as based on the statistical char-
acteristics of the UE behavior, multi‐TAs will be configured into one TA List, it can reduce 
the number of TAU of the UE. But the number of TAs in the TA List increases will lead to the 
TA coverage area contraction (Figure 14.6).
TA List generated dynamically algorithm
MME can keep track of the network tracking mobility characteristic by periodically updating 
the TA transition probability matrix. The TA transition probability matrix is derived from a 
global table which keeps the count of UE movement from the most recently know TA to the 
current TA for all the TAU and paging events. Note, for maximal flexibility, the TA is chosen to 
be 1 eNB.
In a live network, for tracking network mobility characterization, constructing transition 
probability matrix need to be created as shown in Figure 14.7.
The data matrix M is an exponentially weighted moving window sum of the UE movement 
events count to enable tracking of time varying mobility characteristic.
Exponential weighted update for matrix M at time t:
	
m
t
u
t
m
t
ij
ij
ij
1
1 0
1
,
	
where:
uij(t) is the number of movement from TAi to TAj at time t.
λ should be chosen close to 0 for tracking slow time varying, close to 1 for tracking fast time 
varying characteristic.
The MME also keeps track of the UE characteristic by keeping track of the number of time 
paging and TAU are performed for each UE. These data are used to periodically updating the 
UE paging ratio.
TA List dynamic generation algorithm is based on the concept of “TA viscosity.” TA viscosity 
is based on the UE transition probability matrix. Assuming that two adjacent TA1 and TA2, the 
The number of cells in a TA List
Paging capacity of a cell
Paging requirement of a cell
Paging
loading of
PDCCH
Paging
blocking
requirement
Processing
capability of
eNB
Paging
capability
of MME
The number
of UEs in a
cell
User
traffic
model
Figure 14.6  The factor impact the number of cells in the TA List.
www.ebook3000.com

LTE Optimization Engineering Handbook
718
viscosity of TA1 to TA2 is defined as the number of associations that moving occur from TA1 
to TA2 in a certain time period. For a TA1 to TA2 the association definition is as follows:
●
●If TA2 is not in the TA List where the TA1 belongs, when the UE moved from TA1 to the 
adjacent TA2, the association of TA1 to the TA2 plus one. MME can be carried out the asso-
ciation through the relevant signaling NAS statistics.
●
●If TA2 and TA1 belong to the same TA List, when the UE moves in the TA List, it will not 
trigger the TAU message. Assuming the current UE in TA1, at this time, when the intra‐
MME handover occurs, and the target TA is TA2, then the association of TA1 to the TA2 
plus one. MME is able to carry out the statistics by handover related signaling. Still assum-
ing the current UE in TA1, if the UE initiates the next periodic TAU message and UE 
appears in the TA2, then the association of TA1 to the TA2 plus one. MME can be carried 
out the statistics by periodic TAU signaling. Or, if UE is in the idle state, the initiated ser-
vice request message to the MME appears in the TA2, then the association of TA1 to the 
TA2 plus one. MME is able to carry out the statistics by related signaling connection 
procedure.
MME will store a viscosity list for each TA, record the TA and its adjacent TA viscosity under 
the MME coverage area. When UE moves between two TAs, the TAU will trigger the viscosity 
update in accordance with the definition of viscosity. Figure 14.8 dissects the TA List dynamic 
generation algorithm.
In conclude, the most recently updated UE and network mobility characteristic data are fed 
to the algorithm which constructs the TA list for each UE in a given TA by minimizing the traf-
fic cost function under the optional constraints of paging success rate target and/or delay 
bound target.
When UE moves from TA list_A to TA1, TAU request message will be sent to the MME. 
MME will query the TA1 corresponds to the viscosity of the list, according to the requirements 
1
1
12
4
3
2
5
6
8
7
9
10
11
12
193 299
9
492
29
328 299 198
18
12
2
0
0
187 489
0
287
5
386
2
302 203 23
0
0
0
129
3
0
188
4
374
12
303 293 102
0
0
213 289
0
2
430
89
0
0
1
343
0
0
3
0
402 389
12
0
47
123
0
0
0
0
12
0
8
423 232
12
332
2
293
13
0
0
1
1
0
2
98
449
0
0
389
7
0
0
9
0
0
42
357
39
1
402
0
443
2
327
32
0
7
398
2
0
317
17
0
0
320
29
387
0
0
2
19
411
0
0
1
10
340
2
367
30
0
2
3
340
0
0
0
0
20
3
6
7
8
9
10
12
11
5
4
2
1
123 322 345
23
2
0
1
0
0
0
0
1
2
3
4
5
6
7
8
9
10
11
12
1
4
2
3
6
7
10
MME maintains a global
table to track UE
movement events (from
tracking area/to tracking
area) using TAU and
paging events
Establish transition probability
matrix by normalizing M row-wise
= P
= M
Current TA
Last TA
8
11
12
5
9
Figure 14.7  Constructing transition probability matrix.

Tracking Areas Optimization
719
of network planning that allowed TA number n (n = 4) in the TA list, selected the TAs that have 
the Top N maximum viscosity degree, respectively is TA2 and TA3, TA7, constitute a new TA 
list. Then the MME will send the new TA list to the UE by TAU accept message.
In the algorithm, the time period length and the start time can be configured, and the statistical 
process is carried out according to the time period. Such as statistics for a period of 24 hours, 
according to statistical algorithm, the MME carries out the user’s viscosity list within 24 hours, 
and this list information will be used for the next day.
14.3  ­TAU Reject Analysis and Optimization
TAU reject usually happened in the CSFB call and other abnormal cases, all the TAU failures 
could be classed for following three types: network failure, implicitly‐detached and no EPS‐
bearer context activated. For data service, the most TAU failures are usually caused by the 
network failure.
1)	 Network failure
When 4G user attached to 3G network, if the “MS network capability” in attach request 
is “EPC not supported” (which normally should be “EPC supported”), then the SGSN will 
choose the GGSN instead of the PGW. However, the GGSN can only support 2/3G. (PGW 
could support 2/3/4G). Since the GGSN (not the PGW) is chosen after PDP active failure, 
the TAU will surely fail once user handover from 3G to 4G, and the reported reason to the 
MME will be “Network failure.”
  For this kind of issues, the solution can be:
●
●To restart the 4G UE or select the “airplane mode”, this problem could be solved 
temporarily.
●
●To upgrade all the GGSN to PGW, this problem could be solved.
TA viscosity list 
TA list_A
TA list_B
TA6
TA5
TA1
TA4
TA3
TA2
TA7
TAU
Request
MME
TAU
Accept
TA1
TA2
35
TA1
TA3
44
TA1
TA4
23
TA1
TA5
12
TA1
TA6
1
TA1
TA7
88
N=4
Figure 14.8  TA List dynamic generation algorithm.
www.ebook3000.com

LTE Optimization Engineering Handbook
720
2)	 implicitly‐detached
Up to now, the occurrence of “Implicitly‐detached” is random with a small probability in 
the live network.
  When SGSN receives Iu‐release message from MME in the service request procedure, 
the PDP will be deleted by SGSN. Then no PDP info could be reported to MME, which leads 
to TAU failure. In other words, this attribute to the core network deactivates the PDP 
connection. Since no specified definition for 3GPP in this particular situation, some vendors 
decide not to deactivate the PDP to ensure the success of TAU.
3)	 no EPS bearer context activated
This kind of issue can be traced from S1‐MME context and Iu‐interface trace.
  From S1‐MME context, in TAU request message, if EPS bearer context status is INACTIVE, 
TAU request will be rejected by MME, the cause value is no EPS bearer. (According to 3GPP 
TS 24.301, if EPS bear context status is INACTIVE in UE TAU request message, MME will 
reject this TAU)
  From Iu‐interface trace, if UE sends PDP deactive request message from UTRAN, so TAU 
request message will not contain the EPS bear context, the state is INACTIVE. UE sends 
PDP deactive request message will also lead this issue.

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
721
Two types of reference signals are defined in LTE uplink: demodulation reference signals (DMRS) 
and sounding reference signals (SRS). Demodulation reference signal are used for channel estima-
tion enable coherent detection and demodulation of data. Periodic sounding reference signal trans-
missions provide eNB channel state information (CSI) on uplink channel also when UE does not 
have data to transmit. With SRS period longer than channel coherence time, the obtained CSI can 
be used for adjusting uplink timing or transmission power control in absence of other uplink trans-
mission. With shorter SRS period, the CSI can be used for packet scheduling in frequency domain.
The same set of base sequences is used for demodulation and sounding reference signals. 
Reference signal sequences are design to have ideal periodic autocorrelation and constant 
amplitude in frequency domain for simplifying channel estimation especially in frequency 
domain. This means that autocorrelation is zero for all other lags except zero lag. As a result, a 
set of orthogonal reference signals is obtained with cyclic shifts, that is, by circularly shifting 
the sequence that are used for DMRS, SRS, as well as on PUCCH by code division multiplex.
There are cases of high cross‐correlations among the base sequences in a live network. 
However, the sequences exhibits the useful property that cyclic‐shifted versions of itself remain 
orthogonal to one another. Cyclic cross‐correlation between two sequences is also very low.
The base sequences are divided into 30 groups, each group contains one base sequence (v = 0) 
for sequences of length 12 to 60 (1 to 5 RB allocations, the length of the sequences are 12, 24, 
36, 48, 60 accordingly), and two base sequences (v = 0,1) for sequences of length equal to or 
above 72 (6 RB allocations and upwards). These base sequence shall have a set of allowed cyclic 
shifts. The allowed shifts are specific to PUSCH, PUCCH and SRS. Group hopping and 
sequence hopping can mitigate the potential performance loss for certain UEs stuck with RS 
sequences with poor cross‐correlation properties.
15.1  ­Uplink Reference Signal Optimization
LTE PUSCH and PUCCH carry demodulation reference signal (DMRS). The reference signals 
for channel estimation are required for the LTE uplink to enable coherent demodulation of 
PUSCH and PUCCH on the receiver side. The uplink DMRS are constructed from Zadoff‐Chu 
sequences that are divided into 30 groups. The cyclic shifted sequences of the same base 
sequence have zero correlation, hence for all cells within the same eNB will use same base 
sequence but different cyclic shift. The cross‐correlation between the base sequences is on 
average low, which is beneficial from inter‐cell interference point of view.
On PUSCH, each slot contains one DMRS SC‐FDMA symbol at the center of slot, acceptable 
channel estimation performance is achieved even at high terminal velocities while keeping 
DMRS overhead reasonable. DMRS overhead is 14.3% for normal cyclic prefix lengths.
15
Uplink Signal Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
722
On PUCCH, correct detection of carried control data is equally important for all terminals, 
consequently, the DMRS overhead is larger on PUCCH than on PUSCH to achieve reasonable 
balance between the signal energies used for channel estimation and data transmission. On 
PUCCH, DMRS overhead ranges from 14.3% up to 42.9%, depending on the PUCCH format 
and cyclic prefix length.
15.1.1  Coding Scheme of UL RS
The UL RS are mostly based on Zadoff‐Chu (ZC) sequences. The orthogonal sequences used 
for UL RS are commonly denoted as extended Zadoff‐Chu codes and are not of constant ampli-
tude. The reference signal sequence rα
u,v(n) is defined by a cyclic shift α of a base sequence 
ru,v(n) according to
	
r
n
e
r
n
n
M
u v
j n
u v
,
,
,
0
sc
RS
	
Where a cyclic shift α to identify a user within a cell, a base sequence ru,v(n) to identify a base 
sequence for a cell. They are divided into groups, where u is the group number and {0..29}, and 
v is the base sequence number within the group. M
mN
sc
RS
sc
RB is the length of the reference 
signal sequence and 
max,UL
RB
1
m
N
.
DMRS are employed for PUCCH and PUSCH transmissions. When it comes to PUSCH 
transmissions the DMRS will span over a number of resource blocks depending on the alloca-
tion provided by the UL scheduler that is why sequences of different lengths are required. The 
RS sequences of different length are obtained via cyclic shifts of a base.
These base sequences ru,v(n) are divided into groups of 30 sequences, each group contains one 
base sequence for all the possible UL RB allocations. Each UE is assigned a base sequence, 0–29 
to avoid uplink interference between UEs. Since it only have 30 base sequences and 504 PCIs, the 
sequences will have to be reused. A group of 30 ZC sequences corresponds to 30 cells or 10eNBs.
For PUCCH, one base sequence per group. One cell uses one sequence at a time. For PUSCH, 
there could be two sequences (ν is 0 or 1) per group, therefore, sequence intra‐subframe hop-
ping of the same group is also allowed for PUSCH to randomize interference. The difference is 
purely due to the size of PUSCH, standard has defined that multiple sequences can be used 
only when the sequence length is greater than or equal to 6NSC
RB. This can be enabled or disa-
bled via the parameter ulSeqHop. If enabled, it will only apply to allocations of 6 or more PRBs.
	
u
groupAssignment
PCI
PUSCH mod 30	
In conclusion, the demodulation reference signal is characterized by (Figure 15.1):
●
●Sequence group “u” is a cell specific parameter, 30 groups each one containing sequences of 
different lengths (generated as cyclic shifts of one base sequence). 30 possible sequences for 
each PRB allocation length of 1 to 100 PRBs.
●
●There are two base sequences per group in case of PRB allocations >5 or one base sequence 
per group otherwise. Standard allows group hopping (hopping of u, applies to both PUCCH 
and PUSCH) and sequence hopping (hopping of v, applies to PUSCH only). The group and 
sequence hopping allows auto‐configuration of base sequence (CAZAC) and the base 
sequence within the sequence group for each cell. The UEs within each cell can be orthogo-
nal to each other and UEs served by neighboring cells use different “cyclic shift + base 
sequence” combination that is orthogonal to the serving cell’s UE (interference randomiza-
tion). Group hopping and sequence hopping can reduce cross‐correlation and interference 
between UEs from different cells.

Uplink Signal Optimization
723
●
●Sequence length is as the same as the PRB allocated to the UE, that is, equal to the number 
of subcarriers used for PUSCH transmission.
●
●Cyclic shift is UE and cell specific parameter used to generate the sequences of different length. 
It generated from the same sequence are not orthogonal but have low cross correlation.
15.1.2  Correlation of UL Sequence Group
Although there is no intra‐cell interference (in the ideal case) among the UEs transmitting 
PUCCH and PUSCH on the same set of resources. However, there will be inter‐cell interfer-
ence as the different sequences used in neighboring cells are not orthogonal.
In time domain the DMRS occupies always the slot 4 in case of normal CP as shown in 
Figure 15.2. In frequency domain the DMRS of a given UE occupies the same PRBs as its 
1PRB
Group 0
Group 1
1
1
1
2
2
2
3
3
3
4
4
4
5
5
5
6
6
6
8
8
8
=One reference signal sequence of length 12.N
96
96
96
100
100
100
Group 29
II
2PRB 3PRB 4PRB 5PRB
6PRB
8PRB
96PRB
100PRB
Figure 15.1  Sequence groups (u = 0…29) each one containing different reference signal sequences.
0
1
2
3
4
5
6
NRB-1
DM RS
DM RS
Format 2.x
NRB-2
DM RS
DM RS
DM RS
Format 1.x
NRB-3
10
9
8
7
6
5
4
3
2
1
DM RS
DM RS
DM RS
Format 1.x
0
DM RS
DM RS
Format 2.x
DM RS
DM RS
Symbol Number
PUCCH Region
PUCCH Region
PUSCH Region
PUSCH Region
Figure 15.2  UL DMRS allocation per slot for normal CP.
www.ebook3000.com

 Table 15.1  Interference only occurs at any cellidgroup that ends with the same number. 
CellIDGroup
SubCellID
PCI
Last # of CellIDGroup
UL ZC Seq Shift
CellIDGroup
SubCellID
PCI
Last # of CellIDGroup
UL ZC Seq Shift 
0
0
0
0
0
80
0
240
0
0 
0
1
1
0
1
80
1
241
0
1 
0
2
2
0
2
80
2
242
0
2 
35
0
105
5
15
145
0
435
5
15 
35
1
106
5
16
145
1
436
5
16 
35
2
107
5
17
145
2
437
5
17

Uplink Signal Optimization
725
PUSCH transmission, this means that in each RB, approximately 14% are used for transmission 
of DMRS. Within a certain cell, UL users are separated via FDM but the DMRS will suffer from 
interference from neighboring cells. MU‐MIMO when available will introduce additional 
complexity.
In order to correlate between ZC sequences and PCIs, sequence group hopping is enabled. 
The sequence group assigned to a cell is a function of its SSS with 17 group hopping patterns. 
The group hopping pattern uses a random sequence initiated by (SSS mod30).
What the function will do is derive 30 ZC sifts from every consecutive 10 SSS. SSS 0–9 will 
produce ZC sequences shifts 0–29. Hence when the operators plan their PCIs by SSS/
PhysicalCellIdGroup and in a cluster of 10 eNBs, that means PCIs 0–29 can be used as neigh-
bors. But 30, 60, 90, and so on, are not. Interference only occurs when the same last # of the 
PhyCellIdGroup is used as neighbors. For example, 0 and 80 or 35 and 145, any cellidgroup that 
ends with the same number, which is shown in Table 15.1.
In order to reduce cross‐correlation and randomize the interference between UEs from dif-
ferent cells and improve the UL channel estimation based on the RS, standard allows group 
hopping (hopping of u, applies to both PUCCH and PUSCH) and sequence hopping (hopping 
of v, applies to PUSCH only) and UL cyclic shift hopping. The group and sequence hopping 
allows auto‐configuration of base sequence and the base sequence within the sequence group 
for each cell. An UL RS design example is shown in Figure 15.3.
15.1.2.1  UL Sequence Group Hopping
In a live network, if without group hopping, each cell is assigned with a fixed base sequence 
(“physical Cell ID” mod 30) and careful plan and optimization of the base sequence is needed. 
Since there are only 30 groups, when group hopping is disabled, it is possible to have base 
sequence overlapping with neighboring cells if the cluster is larger than 30 cells. When the 
number of cells is more than 30, group hopping must be enabled.
With this scheme the UL group sequence used for the DMRS changes from slot to slot 
based on a hopping pattern, which additionally has an offset included based on the cells 
The UEs within each cell can be orthogonal
to each other and UEs served by neighboring
cells use different ‘cyclic shift + base
sequence’ combination that is orthogonal to
the serving cell’s UE.
Cell ID
base
sequence
1
1
1
1
3
3
27_A1
27
27
27
28
28
28
29
29
29
0
0
0
28_A1
28_B1
28_C1
29_A1
29_B1
29_C1
30_A1
30_B1
30_C1
27_B1
27_C1
5
5
1
1
3
3
5
5
5
5
5
1
1
1
1
3
3
3
3
1
2
2
2
3
3
3
4
4
base
sequence
cyclic
shift
cyclic
shift
Base Seq: 11
Cyclic Shift: 5
Base Seq: 12
Cyclic Shift: 5
Base Seq: 12
Cyclic Shift: 1
Base Seq: 12
Cyclic Shift: 3
Base Seq: 13
Cyclic Shift: 1
Base Seq: 13
Cyclic Shift: 5
Base Seq: 14
Cyclic Shift: 5
Base Seq: 14
Cyclic Shift: 1
Base Seq: 14
Cyclic Shift: 3
Base Seq: 15
Cyclic Shift: 5
Base Seq: 15
Cyclic Shift: 1
Base Seq: 15
Cyclic Shift: 3
Base Seq: 13
Cyclic Shift: 3
Base Seq: 11
Cyclic Shift: 3
Base Seq: 11
Cyclic Shift: 1
Cell ID
01_A1
01_B1
01_C1
02_A1
02_B1
02_C1
03_A1
03_B1
03_C1
04_A1
04_B1
.......
......
......
Figure 15.3  UL RS design example.
www.ebook3000.com

LTE Optimization Engineering Handbook
726
physical cell ID and a parameter, since it ensures that cell IDs aren’t duplicated between 
neighbors the hopping pattern is also seen as random thereby reducing interference. Group 
hopping can be activated with the parameter UlGrpHop. The sequence‐group number u in 
slot ns is defined by a group hopping pattern fgh(ns) and a sequence‐shift pattern fss according to:
	
u
f
n
f
gh
s
ss mod 30	
There are 17 different hopping patterns fgh(ns) defined based on the 504 PCI and the 30 
sequence groups (sequence‐shift patterns, round down (504/30) =17). Each of these hopping 
patterns will have a length of 20 since hopping is performed per slot and there are 20 per 
frame. Additionally, each of these hopping patterns can be offset by one of the 30 sequence 
group shift offsets which will be defined via the parameter grpAssigPUSCH (see for-
mula below)
Note that the PUCCH and PUSCH will employ the same hopping pattern but different 
sequence shift patterns can be assigned for each one of them based on grpAssigPUSCH param-
eter (see formula below). If grpAssigPUSCH = 0 then PUSCH and PUCCH use the same sequence.
For PUSCH, the sequence‐shift pattern fss
PUSCH is given by:
	
f
f
ss
PUSCH
ss
PUCCH
groupAssignmentPUSCH mod 30	
For PUCCH, the sequence‐shift pattern fss
PUCCH is given by: f
PCI
ss
PUCCH
mod 30
The group‐hopping pattern fgh(ns) is the same for PUSCH and PUCCH and given by:
	
f
n
c
n
i
i
i
gh
s
s
if group hopping is disabled
0
8
2
0
7
mod 30
if group hopping is enabled
	
Where the pseudo‐random sequence is c(i). The pseudo‐random sequence generator shall be 
initialized with c
PCI
init
30
 at the beginning of each radio frame.
Note that if group hopping is disabled as fgh(ns) = 0. In this case the sequence‐group number 
u in slot ns is defined by the sequence‐shift pattern fss according to:
	
u
f
PCI
ss
groupAssignmentPUSCH
mod
mod
mod
30
30
30	
15.1.2.2  UL Sequence Hopping
For PUCCH, there are 30 sequence groups, one base sequence per group. One cell uses one 
sequence at a time. For PUSCH, there could be two sequences (v is 0 or 1) per group. Sequence 
hopping only applies for reference signals of PUSCH transmissions of 6PRBs or more. In that 
case, there are two base sequences defined and it is possible to have different base sequence 
numbers per slot (i.e., sequence hopping per slot). If sequence hopping is enabled, the sequence 
number v alternates between 0 and 1 pseudo randomly in successive slots.
15.1.2.3  UL Cyclic Shift Hopping
UL cyclic shift hopping is always enabled which is intra‐subframe hopping and helps rand-
omize the interference on PUSCH and PUCCH. One base sequence number and 12 cyclic shift 
values are used to generate the DMRS sequence for all UEs in the cell. The cyclic shift α in a slot 
ns is given as α = 2p ncs/12 with:

Uplink Signal Optimization
727
TTI-specific cyclic shift
signalled to UE on PDCCH
DC10, uplink scheduling
grant
Mod 12
Cell-specific static cyclic shift
Pseudorandom cyclic shift
offset that changes every
time slot
+ nPRS(ns)
ncs=
nDMRS
(1)
+ nDMRS
(2)
For PUSCH transmissions, a cell specific cyclic shift nDMRS
1
 communicated to the UE via SIB 
2 (3 bits) and defined via UlRsCs, which has a range from 0 to 7 is added on top of the UE spe-
cific cyclic shift. nDMRS
2
 is communicated to the UE during each of its UL grants (3 bits) and on 
top of a nPRS(ns), a slot specific pseudorandom cyclic shift that depends on the PCI, slot number 
ns and the sequence group “u” via the grpAssigPUSCH parameter:
	
n
n
c
N
n
i
s
i
s
i
PRS
symb
UL
0
7
8
2
	
Where
	
c
N
u
init
ID
cell
30
32
	
Based on the about formula, it can be observed that if the sequence group “u” for the cells of a same 
site should be the same, then cinit would be the same so all the UEs of one site would do cyclic shifts 
hop according to the same pseudo‐random sequence. In that case, PUSCH cyclic shift hopping 
should be planned in order to use different cyclic time shifts in adjacent cells with the same sequence 
group. However, results from field trials have shown that assigning the same sequence group “u” to 
the cells of a site and differentiate the reference signal sequence based on the UlRsCs is not optimal.
For PUCCH, one of the 12 cyclic shift available is employed by the UE based on the PUCCH 
resource index the UE was signaled. In order to achieve intra‐cell interference randomization, 
the cyclic shift used in the second slot is hopped such that UEs that are assigned adjacent 
cyclic time shifts in the first slot are assigned non‐adjacent cyclic time shifts in the second slot.
15.1.3  UL Sequence Group Optimization
As stated above, the principle of planning the UL DMRS is it needs to be different for the cells 
of a same eNB. Most importantly, allocating different DMRS sequence groups to every cell 
gives the best performance in terms of UL throughput under neighbor cell interference. DMRS 
sequence group collisions increase the UL interference depending on the cell synchronization. 
The way operator plans for this is by clustering by a group of 30 cells (10eNBs) and assigning 
PCI in a way as to avoid reusing the same UL ZC sequence shift as per the group hopping 
algorithm. You will notice that CellIDGroups 0, 10, 20, 30, 40, 50, and so on, have the same ZC 
sequence shift, therefore the operator avoids having them as neighboring eNBs.
●
●If sequence‐shift pattern should be different for PUSCH and PUCCH then grpAssigPUSCH 
should be set different from 0 as it can be seen in the fss
PUSCH formula.
●
●Neighboring cells should use different sequence group “u.” In this case, the grpAssigPUSCH can 
be constant. This rule should cause no problems as long as the neighboring cells follow PCI 
mod3 rule. Since there are 30 sequence groups “u,” it is possible to plan clusters of up to 30 cells.
www.ebook3000.com

LTE Optimization Engineering Handbook
728
●
●In case PCI mod3 rule cannot be followed, check PCI mod30 rule. In case of problems with 
the PCI mod30 rule then use grpAssigPUSCH to eliminate this problem and differentiate 
between UL DMRS in neighbor cells.
●
●If the same sequence group “u” has to be used in neighboring cells and cannot be changed by 
using grpAssigPUSCH, then ulRsCs must be different in these cells. For all other cases (i.e., 
different sequence group “u” is assigned) since ulRsCs has only relevance when the same 
sequence group “u” is used, ulRsCs value can be the same in neighboring cells. Range [0…7].
This recommendation makes the planning easier as it is only necessary to plan the PCI cor-
rectly: grpAssigPUSCH can be the same for all the cells of a network and the same for the ulR-
sCs as the parameter is only relevant for sequences within one sequence group “u,” which is not 
the case if we use different sequences per cell.
Here is an example of current UL DMRS planning approach. Assigning different sequence 
group number u to the cells of the same site with range 0 ~ 29. grpAssigPUSCH can be constant, 
which means that there is no need for planning.
If cells of the site follow the PCI mod3 rule, the sequence group number “u” will be different. 
If PCI mod3 rule is not followed, check PCI mod30 rule. If problems use grpAssigPUSCH to 
differentiate the “u” sequence group number. If same “u” has to be used in neighbouring cells 
and cannot be changed using grpAssigPUSCH then assign different ulRsCs to the cells of a site 
with range 0 to 7.
Allocate different sequence group u for different cells, including cells of the same site. Cross 
correlation properties between sequences from two different groups are good because of 
sequence grouping, ulRsCs does not matter (it is only relevant for sequences within one sequence 
group u).
A live example of two cells within one eNB, the base sequence of the two cells are different, 
as below.
Sequence group number
For cell and cell2,
grpAssigPUSCH=0, ulRsCs =0
Cell1: PCI 75 u = (75+0) mod 30 =15
Cell2: PCI 76 u = (76+0) mod 30 =16
PCI
grpAssigPusch
sequence id u
uIRsCs
cinit
75
79
80
15
16
0
0
0
0
76
When there is a UE1 in cell1 and UE2 in cell2, and both UE uploading at the same time, UL 
throughput still suffers from UL interference in neighbour cell but the effect is lower as shown 
in Figure 15.4.
Time
UE TX_power
UL MCS
Only UE 2
uploading
96 PRBs
Both UEs
uploading
96 PRBs
40
30
20
10
0
UL throughput
MCS
Only UE 2
uploading
96 PRBs
Figure 15.4  UL throughput and UL MCS performance with the above DMRS planning.

Uplink Signal Optimization
729
15.2  ­Uplink Sounding Signal Optimization
Uplink frequency‐selective scheduling (UL FSS) is important and applied in LTE that allocate 
the spectrum for PUSCH transmissions. When applying frequency‐selective resource alloca-
tion for a UE that an uplink sounding signal (SRS) resource should be allocated, the scheduler 
uses measurements from SRS together with uplink DMRS (DMRS gives no information about 
UL channel conditions outside of utilized bandwidth) as shown in Figure 15.5 and interference 
measurements to allocate the UE to the frequencies with the most favorable signal quality. The 
SRS can be transmitted even when no PUSCH is transmitted (UE not scheduled), its main 
function is to estimate UL channel quality for channel dependent scheduling of the UL, and 
estimate timing advance (TA) for UL transmit‐timing adjustment. The SRS channel is an UL 
reference channel that UE transmits on every other subcarrier of the entire UL carrier band-
width so that eNB can estimate the UL channel condition that UE experiences. UL SRS optimi-
zation aimed at improving UL noise which in turn improves the UL and DL performance.
The SRS is represented in Figure 15.5. By default, the SRS is transmitted in the last symbol of 
every fifth subframe, the PUSCH will not be transmitted in the “SRS symbol,” for TDD‐LTE, 
sounding reference signal is transmitted only in configured UL subframes or UpPTS, which is 
shown in Figure 15.6.
Sounding UEs are mainly multiplexed in two different ways, either by means of code or fre-
quency. The code division is done by assigning the SRS shifted versions of a common Zadoff‐
Chu base sequence, for frequency domain of separating users is called frequency hopping.
Incorrect SRS transmission will cause interference to other UEs. If SRS involves multiplexing 
of two or more user sequences, the higher layer assignment algorithm has to avoid the possibil-
ity of assigning zero cyclic shifts for all users being multiplexed on to the same SRS.
Long Term averaged
DMRS based correlation
DMRS
Instantaneous
correlation
(ITTI)
Update long
term
averaged
value
Update long
term
averaged
value
SRS
Instantaneous
correlation
(ITTI)
UL channel
quality
TA
Command
Angle
computation
Combination
DMRS
reception
Long Term averaged
SRS based correlation
SRS reception
One subframe
Sounding Reference Symbols
PUSCH data
Demodulation Reference Symbols
Figure 15.5  Measurements from SRS together with uplink DMRS.
www.ebook3000.com

LTE Optimization Engineering Handbook
730
In some situations, for example, UE number changes or UE speed changes, the fixed SRS 
configuration will degrade system performance especially in beamforming case because 
beamforming weights are calculated based on SRS, so dynamic SRS adjustment scheme is 
proposed.
15.2.1  SRS Characters
The sounding reference signals are generated from cyclic shifts in so called Zadoff‐Chu 
sequences. These Zadoff‐Chu sequences have zero autocorrelation, which means that different 
sounding sequences generated from the same base sequence will be orthogonal. This allows 
users transmit simultaneously on the same time and frequency resource. Except the feature of 
CDM and FDM, the sounding can also be set to hop between different smaller frequency 
bands. Because of the orthogonality of the sequences and the frequency division, several UEs 
will be able to broadcast SRS simultaneously.
1 PRB
Last symbol (SRS)
Comb 1
(odd SC)
Comb 0
(even SC)
GP
DwPTS
UpPTS
Last 2 symbols (SRS)
Comb 1
(odd SC)
Comb 0
(even SC)
1 PRB
Figure 15.6  Physical resource layout (FDD/TDD‐UpPTS).

Uplink Signal Optimization
731
System information contains information on which subframes may carry SRS, UE’s SRS can 
be configured via higher‐layer signaling (RRC) as listed parameters: periodicity, subframe 
number offset, bandwidth, starting position in frequency domain, frequency hop/subband 
width, transmission comb, and “cyclic shift.”
The sounding reference signals are generated from cyclic shifts in a common Zadoff‐Chu 
sequence which also called CAZAC (constant amplitude1 zero autocorrelation) sequences as 
they exhibit constant power in time and frequency. The Zadoff‐Chu Base sequence is given by 
the equation below where n is the sample index, u is the sequence index and NZC is the length 
of the sequence.
	
a
n
e
n
N
u
jun n
N
ZC
ZC
1
0
1
;
	
The sequence number u can be chosen between 1 and the largest prime number smaller than 
NZC. This means that for a prime length sequence there are NZC different unique Zadoff‐Chu 
sequences that can be generated. The sequences will also be periodic with a period equal to the 
largest prime relative to the sequence length. Each SRS sequence for user m can be calculated 
with the equation below where αm is the cyclic shift.
	
x
n
e
a
n N
m
j
n
u
ZC
m
m
mod
,
, 
2
8
nSRS
cs
	
The sounding reference signals are defined by a cyclic shift α of a base sequence r in the 
frequency domain, generated using a base sequence denoted by r
n
u v,
 times phase rotation 
ejan, phase rotation is used for code multiplexing, which is represented in the following 
equation:
	
r
n
e
r
n
u v
j n
u v
,
,
,
2
8
nSRS
cs
	
The pseudo‐random parameters u and v (low correlation for different values of u, v is needed) 
depend on cell ID and slot number; u
0 1
29
, ,
,
 and v
0 1,
.
The sequences are orthogonal for all nSRS
cs
0 1
7
, ,
,
 when the lengths are the same, differ-
ent “cyclic shifts” is applied for different terminals with code division multiplexing SRS.
It is worth to note that Zadoff‐Chu sequences generated from different base sequences will 
not be orthogonal but instead have a constant cross correlation according to the following 
expression:
	
r
k
N
ZC
ZC
ZC
1
2
1/
	
SRS will support “transmission combs” as shown in Figure 15.7, that SRS only occupies every 
second subcarrier. Thus, SRS transmission from two UEs can be frequency multiplexed by a 
ssigning them a different frequencyshifts or “combs.”
So, SRS can be fully multiplexed with other UEs within a cell via transmission comb (two 
choices) or via different “cyclic shifts” α (eight choices). Low correlation between SRS in 
1  The constant amplitude property is also very useful for radio reference signals in general since limited power 
variations allow for higher efficiency in power amplifiers.
www.ebook3000.com

LTE Optimization Engineering Handbook
732
different cells can be realized through different choices of u and v. These two points is very 
importmant for SRS optimization in LTE.
UEs configured SRS via RRC signaling, the parameters includes periodicity, subframe num-
ber offset, bandwidth, starting position in frequency domain, frequency hop/subband width, 
transmission comb, cyclic shift, and so on, as shown in Table 15.2.
“Comb”= 0
“Comb”= 1
Figure 15.7  SRS transmission combs.
Table 15.2  Parameters for SRS.
Dimensions
Parameter Name
Description
Type
Frequency domain
srsBandwidth 
configuration CSRS
Max. bandwidth can be used for SRS in 
the cell, i.e. Max. number of SRS 
resources based on PRB scheduling in 
frequency domain.
Cell‐specific
srsBandwidth BSRS
SRS bandwidth of UE
UE‐specific
Transmission comb KTC
Transmission comb offset(0 or 1 
subcarrier)
UE‐specific
Frequency domain 
position
Used to calculate the specific start PRB 
position of SRS resource of UE. 
Frequency domain position ∈ [0,23]
UE‐specific
srsHoppin bandwidth bhop
Determine the activation of frequency 
hopping of SRS and used to calculate 
the hopping pattern.
UE‐specific
Time domain
srsSubframeConfiguration
Available subframes can be used for SRS 
transmission in the cell. Determine the 
periodicity TSFC and subframe offset 
ΔSFC of cell
Cell‐specific
srsConfiguration Index
Determine the periodicity TSRS and 
subframe offset Toffset of SRS 
transmission of UE
UE‐specific
Duration
Single SRS transmission or periodic one 
until resource released. FALSE 
corresponds to “single” and value TRUE 
to “indefinite,” i.e., until synch is lost or 
the SRS resource is revoked
UE‐specific
Code domain
Cyclicshift ncs
SRS
Cyclic shift of Zadoff‐Chu sequences 
(phase rotations)
UE‐specific
Note:
1 Cell‐specific parameters is in SIB2, 3; UE‐specific parameters is in RRC connection setup message.
2 It is needed to determinate the suitable SRS parameters for UL FSS. It is suggested utilizing a longer sounding 
periodicity for VoIP dervice.
3 For srsConfiguration Index, within one UE-specific SRS period, different UEs can be assigned different time offsets. 
These time offsets are equivalent to subframe offsets for FDD, while for TDD they are subframe offsets for normal 
UL subframes.

Uplink Signal Optimization
733
UL SRS parameter settings from UE logs: RRC Connection setup message
uplinkPowerControlDedicated
                   {
                     p0-UE-PUSCH 0,
                     deltaMCS-Enabled en0,
                     accumulationEnabled TRUE,
                     p0-UE-PUCCH 0,
                     pSRS-Offset 7
                   }
soundingRS-UL-ConfigDedicated setup:
                     {
                        srs-Bandwidth bw0,
                        srs-HoppingBandwidth hbw3,
                        freqDomainPosition 0,
                        duration TRUE,
                        srs-ConfigIndex 17,
                        transmissionComb 0,
                        cyclicShift cs4
                     }
SRS parameters configurations will affect air interface capacity (# of users/sf/cell). Cyclic shift 
supports max value 8, transmission comb 2. The total number of hops of SRS is Nhop = msrs,0/
msrs,b, where: msrs,0: is the cell SRS band width, msrs,b: size of the hop. So the Max number of 
users can be calculated by: (/TTI/Cell) nusers = CS * comb * Nhop.
For system bandwidth of less than 10 MHz a non‐frequency hopping SRS transmission 
scheme is used while for larger bandwidths a frequency hopping SRS scheme is used. In case of 
non‐frequency hopping a UE being allocated SRS resources transmits SRS every 20 ms. At each 
transmission occasion the entire SRS bandwidth is covered. In case of the frequency hopping 
scheme, on each transmission occasion SRS are sent on a subset of the SRS bandwidth. Several 
transmission occasions are required to cover the entire SRS bandwidth. The transmission 
schemes are summarized in Table 15.3.
SRS bandwidth are affected by the maximum power of the UE, the number of supportable 
sounding UEs, and the sounding bandwidth needed to benefit from uplink channel‐dependent 
scheduling. To improve the SNR and support a larger number of SRS, up to four SRS band-
widths can be simultaneously supported in LTE depending on the system bandwidth. To pro-
vide flexibility with the values for the SRS bandwidths, eight sets of four SRS bandwidths 
are  defined for each possible system bandwidth, which is shown in Table  15.4, where srs‐
BandwidthConfig and srs‐Bandwidth determine the mSRS,b and Nb.
The sounding bandwidths are constrained to be multiples of each other, that is, following a 
tree‐like structure2 shown in Figure 15.8, to support frequency hopping of the different nar-
rowband SRS bandwidths. The tree structure of the SRS bandwidths limits the possible starting 
positions for the different SRS bandwidths. Table 15.5 gives FDD sounding reference signal 
subframe configuration.
The eNB may either request an individual SRS transmission from a UE or configure a UE to 
transmit SRS periodically until terminated. A 1‐bit UE‐specific signaling parameter, “duration,” 
2  PRBs in same color can be scheduled for one UE with corresponding Bsrs. If Time/Code domain and Comb are 
not considered, only 1 UE can be scheduled with SRS if Bsrs = 0 is configured, 1 UE configured with Bsrs = 1, and 6 
UEs with Bsrs = 3 can be scheduled with SRS
www.ebook3000.com

Table 15.3  SRS transmission schemes.
Bandwidth [MHz]
SRS Frequency 
hopping
Number of SRS RBs each 
transmission occasion
Periodicity for SRS 
transmission [ms]
Period for Covering 
SRS bandwidth [ms]
1.4
No
4
20
20
3
No
12
20
20
5
No
24
20
20
10
Yes
12
5
20
15
Yes
12
5
30
20
Yes
24
5
20
Different colors represent different users
BW
Narrowband SRS
Time
Multiple users in CDM manner using full BW
BW
Time
Wideband SRS
Tsrs
(e.g. 40ms)
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
Bsrs= 0
Bsrs= 1
Bsrs= 2
Bsrs= 3
Figure 15.8  The tree structure of the SRS bandwidths and wideband and narrowband SRS.
Table 15.4  Eight sets of four SRS bandwidths with FDD, bandwidth10MHz cell.
SRS bandwidth 
configuration
CSRS
SRS‐Bandwidth  
BSRS = 0
SRS‐Bandwidth  
BSRS = 1
SRS‐Bandwidth  
BSRS = 2
SRS‐Bandwidth  
BSRS = 3
mSRS,0
N0
mSRS,1
N1
mSRS,2
N2
mSRS,3
N3
0
48
1
24
2
12
2
4
3
1
48
1
16
3
8
2
4
2
2
40
1
20
2
4
5
4
1
3
36
1
12
3
4
3
4
1
4
32
1
16
2
8
2
4
2
5
24
1
4
6
4
1
4
1
6
20
1
4
5
4
1
4
1
7
16
1
4
4
4
1
4
1

Uplink Signal Optimization
735
indicates whether the requested SRS transmission is single or periodic. If periodic SRS trans-
missions are configured for a UE, the periodicity may be any of 2, 5, 10, 20, 40, 80, 160, or 
320 ms; the SRS periodicity and SRS subframe offset within the period in which the UE should 
transmit its SRS are configured by a 10‐bit UE‐specific dedicated signaling parameter called 
“srsConfigurationIndex,” which is shown in Table 15.6.
SRS is transmitted in the last symbol of the subframes, the position and period of SRS are 
determined by srs‐SubframeConfig and srs‐ConfigIndex. Take srs‐SubframeConfig = 3, srs‐
ConfigIndex = 2 for example, that is shown in Figure 15.9.
Simultaneous SRS can be transmitted from multiple UEs using the same RBs and the same 
offset of the comb, using different cyclic time shifts of the same base sequence to achieve 
orthogonal separation.
In a live network, wideband SRS is efficient from a resource utilization. The entire frequency 
band of interest can be sounded with a single SRS transmission within a single uplink symbol. 
As the SC‐OFDM symbols in which SRS is transmitted will be unavailable for PUSCH 
transmission.
Table 15.5  FDD sounding reference signal subframe configuration.
srs‐SubframeConfig
Configuration 
Period TSFC 
(subframes)
Transmission 
offset ΔSFC 
(subframes)
srs‐SubframeConfig
Configuration 
Period TSFWC 
(subframes)
Transmission offset 
ΔSFC (subframes)
0
1
{0}
8
5
{2,3}
1
2
{0}
9
10
{0}
2
2
{1}
10
10
{1}
3
5
{0}
11
10
{2}
4
5
{1}
12
10
{3}
5
5
{2}
13
10
{0,1,2,3,4,6,8}
6
5
{3}
14
10
{0,1,2,3,4,5,6,8}
7
5
{0,1}
15
reserved
reserved
Table 15.6  UE‐specific SRS periodicity TSRS and subframe offset configuration Toffset for FDD.
SRS configuration index ISRS
SRS periodicity TSRS (ms)
SRS subframe offset Toffset
0–1
2
ISRS
2–6
5
ISRS – 2
7–16
10
ISRS – 7
17–36
20
ISRS – 17
37–76
40
ISRS – 37
77–156
80
ISRS – 77
157–316
160
ISRS – 157
317–636
320
ISRS – 317
637–1023
reserved
reserved
www.ebook3000.com

LTE Optimization Engineering Handbook
736
Narrowband SRS is suitable for bad channel conditions or UL transmission power limited 
conditions, in case of a high uplink path loss, a wideband SRS transmission may lead to a rela-
tively low received power density due to the limited total UE transmit power, and this reduces 
the accuracy of the estimation for each RB within the sounding bandwidth. Usually, sounding 
a smaller bandwidth can result in missing channel information for certain parts of the channel 
bandwidth during a certain time, especially for longer period SRS setting.
15.2.2  Wideband SRS Coverage
For wideband SRS coverage, we assume 48 resource blocks used for SRS transmission in 
10 MHz bandwidth. The SRS out of service SINR threshold can be set at –17 dB (antenna‐
combined wideband SRS SNR), thus:
	
eNB sensitivity
thermal noise
threshold
dB
dB
dBm
3
3
125 1.
	
where, thermal noise = –174dBm + 2.5 dB noise figure + 10*Log10(48*12*15000Hz) = –102.1dBm
One –3 dB means to account for antenna combined metric in 2RxDiv, the other –3 dB means 
SRS is transmitted every two tones.
So we can get:
	
MCL
UE Max Tx power
UEantenna gain
dB
bodyloss
dB
eNB sen
_
0
0
sitivity
dB
23
125 1
148 1
.
.
	
Table 15.7 gives the detail calculation of the wideband SRS coverage at 700 MHz.
It can be seen that WB‐SRS performance is much better than the RACH message 1 and mes-
sage 3, SRS sensitivity is not a bottleneck of the LTE coverage.
15.2.3  Dynamic SRS Adjustment Scheme
In some commercial network, the SRS configuration of all UEs in cell is fixed. In some situation 
e.g. UE number changes or UE speed changes, the fixed SRS configuration will degrade system 
performance especially in beamforming case because beamforming weights are calculated 
based on SRS. In order to increase system performance, dynamic SRS adjustment scheme is 
needed, that is, SRS period online will be changed according to UE number or UE speed 
(Figure 15.10).
Subframe No.
Symbol No.
0
0
1
1
2
2
3
3
4
4
5
5
6
6
7
7
8
8
9
9
10
10
11
11
12
12
13
13
14
15...
Slot 1
Slot 0
srs-ConfigIndex = 2,
Toffset= 0
srs-SubframeConfig=3,
ΔSFC={0}
TSFC= 5
Figure 15.9  SRS transmission position.

Uplink Signal Optimization
737
15.2.4  SRS Selection Dimension and Confliction
SRS has its limit on supporting the number of UEs that can be multiplexed in one SRS trans-
mission per TTI is limited up to eight as defined in 3GPP standard. The SRS period can be 
semi‐statically configured longer to support more users. However, this will increase delay to 
the SRS input to the UL scheduler, especially when UE speed is higher, the SRS configuration 
must be designed to allow the capacity while still support frequency selective scheduler 
efficiently.
Table 15.7  Wideband SRS coverage at 700 MHz (example).
UL budget
Unit
Dense urban
Suburban
Rural
UL Max Tx Power
dBm
23
23
23
UL cable & connector losses
dB
2
2
2
eNB antenna gain
dBi
15
15
15
Penetration loss
dB
17
11
5
Shadow STD + margin
dB
8.6
8
4.4
Handoff gain
dB
2
2
2
IoT
dB
3
3
3
RX (eNB)
Thermal noise
dBm/Hz
–174
–174
–174
eNB noise figure
dB
2.5
2.5
2.5
Number of UL RBs
48
48
48
Noise bandwidth
KHz
8640
8640
8640
SNR (per antenna)
dB
–20.0
–20.0
–20.0
eNB sensitivity
dBm
–125.1
–125.1
–125.1
UL Max coupling loss = UL Max 
EIRP ‐ eNB sensitivity
dB
148.1
148.1
148.1
UL MAPL
dB
134.5
141.1
150.7
UL coverage
Km
1.7 km
6.4 km
24.3 km
Configuration
Request {UEID}
Yes
No
Exit
SRS adjust
Yes
Tracking UE
speed, >
threshold?
UE number >TH1 ?
Figure 15.10  Dynamic SRS adjustment 
scheme.
www.ebook3000.com

LTE Optimization Engineering Handbook
738
For SRS configuration strategy, single CAZAC sequence is used per cell, maximum eight SRS 
sequences multiplexed per UL subframe, both combs can also be used per UL subframe with 
max four SRSs per comb. Different SRS periods for different UEs are required per cell, and 
default frequency position index is used for all UEs. The individual user PUCCH/SRS initial 
configuration is assigned at RRC connection setup, or at RRC connection re‐establishement or at 
(incoming) handover. Usually four PUCCH/SRS configuration profiles are defined:
●
●The premium profile with 20 ms P‐CQI period, 5 ms SR period and 5 ms SRS period.
●
●The normal profile, with 40 ms PCQI period, 20 ms SR period and 20 ms SRS period.
●
●The base profile, with 80 ms P‐CQI period, 40 ms SR period and 40 ms SRS period.
●
●The minimum profile, with 160 ms P‐CQI period, 80 ms SR period and 80 ms SRS period, 
with some UEs using 160 ms SRS period.
It is guaranteed that SRS resource allocation according to physical cell Id should avoid SRS 
interference from neighboring cells for SRS optimization.
1)	 Selecting the offset, ioffset
SRS :
The offset is chosen by calculating the number of free SRS resources on each offset and 
selecting the one containing the largest number of available SRS resources. The nrOf-
FreeSrsResPerTimeOffset array can then be used in this function to find the offset with the 
largest number of available SRS resources:
	
i
k
k
offset
SRS
nrOfFreeSrsResPerTimeOffset
argmax
	
If several offsets meet this criterion, then the priority should be based on the cell_id. Just 
consider only up to 3 CoMP cells per BBU. Then for cell_id = 0, the priority list should like: 
0, 3, 6, … 1, 4, …, 2, 5, …, if cell_id = 1, the priority list should like: 1, 4, …, 2, 5, …, 0, 3, 6, …, 
and if cell_id = 2, the priority list should like: 2, 5, …, 0, 3, 6, …, 1, 4, …
As with choosing the offset, this is done by calculating the sum of free SRS resources on 
each frequency domain position and setting ifreq
SRS to the index of the branch containing the 
largest number of free SRS resources.
	
i
i
l
m
N
n
N SRS
freq
SRS
offs
comb
SRS
cs
srsResource
argmax
0
1
0
1
et
SRS
l m n
	
2)	 Selecting the transmission comb, icomb
SRS :
The transmission comb is chosen in the same fashion as the offset and frequency domain 
position. That is, within the chosen offset and frequency domain position, the comb with 
the largest number of free SRS resources shall be selected. If several branches meet this 
criterion, then the one with lowest transmission comb index is selected. icomb
SRS  is set to the 
index of the selected transmission comb.
	
i
i
i
m
m
n
comb
SRS
offset
SRS
freq
SRS
srsResource
argmax
n
	
3)	 Selecting the cyclic shift, ics
SRS:
When the offset, frequency position and transmission comb have been chosen, the cyclic 
shift index, ics
SRS, is to be chosen as the index of first free position within the cyclic shift array 
at the position given by the indices ioffset
SRS , ifreq
SRS and icomb
SRS . When a free position is found, ics
SRS is 
set to its corresponding index. If no free position is found within the selected cyclic shift 
array, then no SRS resources are available.

Uplink Signal Optimization
739
15.2.5  SRS Conflict and Optimization
Different cyclic shifts of the same ZC‐based sequence of SRS enables several users to broadcast 
SRS simultaneously on the same time and frequency resource. As the multiplexed users may 
interfere with one another there is a trade‐off between having users broadcast SRS as often as 
possible to get a frequent channel estimate and getting higher quality estimates with a lower 
periodicity. To assess this trade‐off one must have a good understanding of what causes the 
errors in the channel estimate so that the sounding resource may be used as efficiently as pos-
sible. For terminals with code division multiplexing SRS, multiple SRS need to be transmitted 
in parallel in the same subframe and span the same frequency band. The more users that are 
TX power of UE2
TX power of UE2
MSE of UE1 [dB]
MSE of UE1 [dB]
–20
–15
–10
–5
0
5
10
–15
–10
–5
0
5
10
15
20
25
30
–2
–4
–6
–8
–10
–12
–14
–16
–18
0
–15
–10
–5
0
5
10
15
20
25
30
Figure 15.11  Variations in MSE due to one interfering user in a neighboring cell with different sounding 
bandwidth.
www.ebook3000.com

LTE Optimization Engineering Handbook
740
multiplexed on the same sounding resource, the more the interference and noise will increase 
the difficulty of obtaining a good channel estimate.
The cyclic shift of users in neighboring cells will not affect the orthogonality as different cells 
use different Zadoff‐Chu base sequences. Instead, as the cross‐correlation of Zadoff‐Chu 
sequences with different base sequences vary with the length of the sequence, the impact of the 
inter‐cell interference will depend on the sounding bandwidth.
Besides, different sounding bandwidth of one interfering user in a neighboring cell will lead 
to the variations in MSE of the serving cell UE. Figure 15.11 gives the variations in MSE of the 
serving cell UE with sounding bandwidth 4PRBs and 16PRBs of the neighbor cell. (User has 
constant transmission power.)
From Figure 15.11, one can see that the impact of the inter‐cell interference is approximately 
6 dB smaller when using a sounding bandwidth of 16 PRBs rather than 4. This relates well to 
what can be expected according to the equation below.
	
20
1
1
20
89
23
6
10
1
2
10
log
log
N
N
dB
ZC
ZC
	
The main limiting factor for the sounding resource seems to be the interference stemming 
from sounding users in adjacent cells. The interference from same cell users is also not negligi-
ble but the code multiplexing serves to suppress this interference a lot. Using intelligent power 
control algorithms may greatly reduce the impact of the interference from neighboring cells by 
for instance decreasing the transmission power of cell‐edge users. This will, of course, lead to 
degradation in the channel estimate of the user, but it may be outweighed by the user not inter-
fering with the sounding transmissions of other users.

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
741
Heterogeneous network (Hetnet), is the general term for a network that consists of different 
types of cells working together as one seamless network, comprising a mix of small and macro 
cells, are essential for operators to meet the ever‐increasing demands in capacity, throughput 
and significantly reduce the energy consumption of networks. Hetnet is defined as placing 
lower power nodes in the macro coverage area, the distribution of nodes can be depending on 
several factors either covering coverage parts or in hotspots are for densification of capacity. 
Small cells are low‐power wireless access points with cell radius up to hundreds of meters. Two 
general reasons for deploying small cells, add, or improve RF coverage, and provide additional 
capacity in a wide range of environments including residential, enterprise, urban and rural 
morphologies, which is shown in Figure 16.1.
The idea is to deploy low power nodes at the vicinity of the users, while still being covered by 
the overlaid macro network. In this way, a low power node (which constitutes a small cell) can 
either operate independently or in association with overlaid high power macro networks. The 
small cells can either be deployed indoor or outdoor. Due to lower power, the small cells can be 
very close to each other. On the other hand, it may thus create a new interference scenario, 
where certain level of coordination in small cell layer could be required. In addition, certain 
level of coordination between small cell layer and macro layer could also be required, especially 
in co‐channel small cell deployment scenario, how to solve macro‐small cell mutual interfer-
ences is very important (Figure 16.2).
16.1  ­UE Geolocation and Identification of Traffic Hot Spots
The small cells placements are based on coverage holes or traffic density, to effectively plan 
small cell underlay within current macro cell network, it is cost effective if the traffic hot spots 
can be identified. With the help of automated tools within the current macro cell network small 
cells locations can be identified to alleviate the loading from the macro cell network.
With assessment of geo‐location given above1 (discussed in Chapter 2), it need to find the 
location of the traffic hot spots from the field geo‐located subscriber records. Starting with 
traffic density samples from individual users, a traffic heat map is produced.
It is well known the designed small cell coverage size is in the range of 50–100 meters, if the 
bin size is comparable to cell size, it will be difficult to identify the location of the cell. Therefore 
1  The location tools use a similar algorithm based on Observed Time Difference of Arrival (OTDOA) from UE 
detected pilots plus some calculation optimization method to reduce error. They also have some proprietary method 
to compensate for TA, AOA between eNBs.
16
HetNet Optimization
www.ebook3000.com

LTE Optimization Engineering Handbook
742
the bin size of the heat map should be a fraction of small cell size. In each bin the total traffic in 
Kbytes are accumulated. Figure 16.3 is the plot of the heat map produced from the location 
calibrated field data. The total traffic is color‐coded for each bin, while 7Mbytes is the capped 
maximum traffic in the 10×10 square meter area.
Distance between small cells depends essentially on the UL service requested, or on the 
capacity (traffic density) required in term of users/km2 which should be supported. Small cell 
coverage area is driven by the best RSRP criterion. If limitation is only coverage, to avoid DL 
interference from macro‐cells layer, it is necessary to position outdoor small cells in area where 
macro‐cells RSRP is lower than threshold, then inter small cell distance should be 1.5 times cell 
radius required to support UL services requested at cell edge. For hotspot traffic distribution 
scenarios, if limitation is capacity as small cells are deployed in hot spots areas to offload macro 
layer in these zones, placing the small cells within the traffic hotspot results in high amount of 
traffic offload from the macro cell, and hence brings large improvements in overall throughput. 
Traffic Hotspots
Base station
locations
14.2 Mbps
Conventional LTE system
Always Best Connected !
Wanted
Macro
Data rate
[Mbps]
Small cell
Wi-Fi
enhanced with additional small cells
Better user experience
1.8 Mbps
Improve
coverage
Figure 16.1  Improve user experience by adding small cells.

HetNet Optimization
743
To offload macro‐layer with small cells, a minimum of 40 to 50 m small cell radius is needed so 
minimum inter small cell distance is 60 to 75 m in open in urban (Figure 16.4).
The macro layer can provide good most of outdoor coverage but may provide limited deep 
outdoor, for example, areas between high buildings and indoor coverage performances, espe-
cially at the ground level. Based on the mass data from OMC/MR, the small cell should only be 
deployed in areas where the macro RSRP is not higher than a given corresponding level, to 
ensure fair small cell range and efficient offload from macro‐layer. Small cell site selection, 
using an antenna type by the purpose of targeting specific area for coverage, and macro and 
small cell joint planning are the main concerns in the small cell design procedure, which is 
shown in Figure 16.5.
Note: Ray tracing model tuning depends on the type of ray tracing model used, it requires 3D 
building vectors and should be realized predictions for any cell type.
In 3GPP, a circular hotspot area with a radius of 40 meters is used. The small cell is assumed 
to be placed in the center of the hotspot area. In a live network, smaller hotspots with a radius 
Backhaul link within cluster
Small cells Cluster
Macro cell
Macro cell
Small cells
Cluster
F1
F1
F2
Backhaul link between small cells and macro cell
Figure 16.2  Deployment scenarios used in small cells.
–74.016 –74.015 –74.014 –74.013 –74.012 –74.011 –74.01 –74.009
40.7075
40.708
40.7085
40.709
40.7095
40.71
40.7105
40.711
40.7115
40.712
Accumulated Traffic Kbytes
longitude in degree
latitude in degree
0
1000
2000
3000
4000
5000
6000
7000
Figure 16.3  Accumulated traffic load with bin size of 10 meters.
www.ebook3000.com

LTE Optimization Engineering Handbook
744
User density
Radio condition
Areas to improve
Figure 16.4  Finding the small cell 
sweet spots.

HetNet Optimization
745
of 20 meters are often used. Small cells should be placed near center of traffic hotspot, but 
complex propagation environment in small cell location leads to irregular coverage area in 
practice.
16.2  ­Wave Propagation Characteristics for HetNet
Performance of mobile radio systems is often blocked to some extent by buildings, trees, or 
other man‐made objects and the radio propagation loss depends on diffraction of signals 
around those obstacles or propagation through them. Therefore the received signal at any loca-
tion depends on the proximity of the mobile to buildings that may partially block the signal 
path between the transmitter and the receiver.
While macro cells are always deployed above the surrounding buildings’ average height, the 
small cell layer shall typically be deployed below the buildings’ average height, thus for the same 
morphology and frequency band, small cell penetration losses are lower than macro cell due to 
the different incidence as shown in Figure 16.6.
The wave propagation models for HetNet used in 3GPP can be found in 3GPP 
TR  36.815 V9.0.0. Accordingly, pedestrian channel models (PedA3km/h) shall be more 
appropriate to model small cell mobility profiles. Pico node to UE propagation can be 
expressed as:
	
L
R
d
p
140 7
36 7
30 6
36 7
.
. log
.
. log
	
Coverage
Capacity
Quality
Performance
MR,
OMC
data
Issue area
analysis
Deploy
small cell
end
N
Y
Site survey
and verification
Small cell
selection
Antenna
selection
Macro and small
cell cooperate
3D
ray-tracing
simulation
Solution
5 m
3D map
Figure 16.5  Small cell design procedure.
Building
Building
Penetration Loss of small cell < Penetration Loss of macro cell
5 m
32 m
SC
macro
Figure 16.6  Different penetration loss.
www.ebook3000.com

LTE Optimization Engineering Handbook
746
16.3  ­New Features in HetNet
LTE Rel‐8 already supports heterogeneous networks with low power nodes. After that, 
enhancements to heterogeneous network operations are introduced in Rel‐10 and Rel‐11. 
These enhancements are mainly for advanced interference cancellations, for example, ICIC 
(Inter‐cell interference coordination), eICIC (enhanced ICIC), FeICIC (future eICIC), and so 
on, and the functionalities of low power nodes, which enable the small cells with higher effi-
ciency and functionalities in terms of handling instantaneous traffic, power consumption, 
interference creation, and so on. The new features include small cell discovery, CoMP, UE 
speed estimation, improved RLF recovery, handover command protection by ABS (almost 
blank subframe) on request, and so on.
As we have discussed in Chapter 11, the purpose of UL CoMP is to improve uplink through-
put by increasing the received signal power and suppress interference of one or several 
interferers. UL CoMP is extra beneficial in heterogeneous networks, where macro UE (due to 
the output power imbalance between the small cell and the macro eNB) can be located very 
close to the small cell node.
Although uplink multipoint reception ensures connection to the best‐available uplink cell, 
the terminal is still connected to the macro cell as soon as that downlink signal is strongest, and 
so the small cell does not offload the macro network to the fullest extent. Multipoint reception 
can therefore be combined with cell selection offset to address offloading as well. This feature 
combination is very attractive as it decouples the uplink and downlink, allowing for independ-
ent optimization of each link.
Avoiding interference is a key task when deploying small cells on top of your macro layer. 
Interference can be avoided when small cells are deployed using a different carrier, but this will 
impact the expensive spectrum. To save spectrum the best strategy is to deploy small cells on 
the same carrier and place it close to end‐user demand, thus the inter‐cell interferences in‐
between macro cells and pico/femto cells turn out to be severe and have different characters 
from the traditional inter macro cell scenarios. It is needed to do a depth analysis to see the RF 
power and how dominant the macro is in a certain area. If you don’t check this, operators run 
the risk of deploying small cells that add less value as the phone will automatically try to con-
nect to the congested macro. When analyzing all the layers it will be able to place the small cell 
so that the coverage overlap is minimal and capacity gains are maximized. In the optimization 
phase the macro cell sectors are down titled to ensure enough traffic can be offloaded from the 
macro to the small cell.
For proper implementation of heterogeneous network, there should have planning for inter-
ference supress related solutions. Interference coordination features is effective and have been 
deployed to reduce the inter‐cell interference in Hetnet scenarios that will increase user and 
cell throughput.
ICIC is an autonomous resource allocation feature introduced in LTE to activate the UL inter-
ference management. The UL interference management functionality selects the starting point in 
frequency randomly to be either the lowest or highest possible frequency. The operator can also 
limit the amount of frequency resources allocated by the UL scheduler. ICIC mainly uses power 
and frequency domain to reduce the effects of cell‐edge interference from neighbor cells.
eICIC was introduced concept of “almost blank sub‐frame” (ABS) in 3GPP release 10. ABS 
subframes do not send any traffic channels and are mostly control channel frames with very 
low power. If a macro‐cell configure ABS subframes then UE’s connected to pico/femto cells 
can send their data during such ABS frames and avoid interference from the macro‐cell. eICIC 
uses power, frequency and also time domain to reduce the effects of intra‐frequency interfer-
ence in heterogeneous networks.

HetNet Optimization
747
FeICIC has further enhancement on eICIC that it enables interference cancellation in UE 
receivers that will enable extended range expansion in order to expand coverage area of 
small cell.
16.4  ­Combined Cell Optimization
As more sites have been deployed, the inter‐cell interference and handover intensity could start 
to increase impacting the performance. In this case, combined cell has advantage to improve 
the coverage quality and mobility situation.
The combined cell (whatever macro cell or small cell) configures multiple sectors (RRUs) to 
serve same cell. It aims to extend the indoor or outdoor coverage of a single cell. All sector car-
riers that are present in the same cell are considered as one logical cell with the same PCI. The 
benefits of the feature include reducing coverage holes by allowing multiple coverage areas 
within the same cell, increasing UE signal reception from the selected sector carriers with the 
best coverage quality, eliminating the need for inter‐cell handover within a combined cell and 
acquiring uplink macro‐diversity by using multiple antennas within the same cell. In downlink, 
the feature supports PDSCH selective muting of non‐contributing sector carriers, to reduce 
interference in neighboring cells. In uplink, if the UE is in an overlapping coverage area, the 
feature supports macro diversity on the PUSCH to improve the uplink transmissions. 
Heterogeneous network deployment can be configured in conjunction with the combined cell, 
possible unequal sector powers at different RRU types should taken into account in the down-
link sector selection (Figure 16.7).
Following criteria are used to select cells that will be benefit by combining, cells have high 
intra‐site interference, potential of high interference between cells, cells with high handover 
rate and low resource utilization in candidate cells.
For combined cell, one important thing is to decide the sector selection for PDSCH (PUSCH), 
the value stands for the maximum relative isolation in dB between the strongest sector rxPsd 
and the other valid sector rxPsd. The initial sector carrier selection is based on the relative 
powers of the PRACH preambles received at the different sectors. After that, the received 
PUCCH Format 2 power measurement or sounding signal is used by the eNB to determine the 
transmission and reception sector carriers required for each UE. To benefit from the macro 
Throughput (Mbps)
60
50
40
30
20
10
0
0
5
10
15
20
25
Time(s)
SFN Gain
Baseline
CombinedCell
Seamless mobility
without DL throughput
DIP.
The delay difference
between sector carriers
must be less than 50 us.
Figure 16.7  Combined cell’s benefit.
www.ebook3000.com

LTE Optimization Engineering Handbook
748
diversity on the PUSCH and PDSCH data channel, the sector carriers must not be placed more 
than 1500 m apart in macro cell deployment scenario.
16.5  ­Cell Range Expansion Offset
Cell range expansion (CRE) is a technique to expand a pico cell range virtually by adding a bias 
value to the received power from pico eNB, instead of increasing transmits power of pico eNB.
Considering the case of cell range extension for small cells (negative cell biased offset) more 
traffic can be pushed toward the small cells, off loading the macro cells and therefore reducing 
the overall interference in the network. Users located in the range extension area of the small 
cells can experience poor to extremely poor SINR depending on the cell biased offset. Users in 
this area will experience worse DL performance. 3GPP R10 features eICIC and advanced UE 
receivers to target this issue. Contrary to DL performance in the small cell, cell‐edge users tend 
to improve their UL performance. This is due to smaller pathloss to the small cell.
In LTE, the UE is normally served by the cell with the strongest downlink. When small cells 
are deployed, however, the cell with the strongest downlink is not necessarily the cell with the 
strongest uplink. Specifically, if the small cell’s downlink power is lower than the macro’s but its 
uplink sensitivity is not equally lower, then an area will be created where the best cell in the 
downlink is the macro, but the best cell in the uplink is the small cell. In this area the UE will 
have to transmit at a high enough power to be heard by the macro cell, which will cause addi-
tional uplink noise rise in the small cell. This problem can be mitigated by moving the hando-
ver point toward the macro cell using an offset, sometimes called cell range expansion, as 
shown in Figure 16.8. This has the advantage of increasing the serving area of the small cell, 
which allows it to capture more traffic, but it has the disadvantage of causing higher interfer-
ence in the downlink in the extended area.
For configuring the CRE, it needs to change the parameter cellIndividualOffsetEUtran (CIO). 
Using cell offsets in this way is therefore a compromise between being connected to the best 
uplink and the best downlink. For LTE, an offset (Qoffsets,n) of up to 6 dB is possible without any 
special interference mitigation.
With CRE, the uplink interference from macro‐cell to pico‐cell is greatly reduced, which 
means it is unnecessary to restrict the uplink data transfer in macro‐cell. However, in this case, 
the downlink interference from macro‐cell to the extended area of pico‐cell becomes strong. 
This is one of the reasons why almost blank subframe (ABS) is applied. Combined with CRE 
and ABS, the uplink and downlink interferences from macro‐cell to pico‐cell are both reduced. 
The cost is loss of a subset of downlink subframes and a subset of uplink subframes in macro‐
cell. Besides, since there is strong imbalance between the DL and the UL for UEs on the border 
between the macro and small cell, the feature of PDCCH power boost of small cell can increase 
its DL coverage, up to 6 dB is usually configured.
In a live network for the co‐channel deployment scenario, usually high IoT levels with large 
variance experienced in the small cells for PUSCH, due to the high Tx power of the macro asso-
ciated UEs close by. With proper parameter selection, the uplink techniques already developed 
for macro‐cell (FSS, HARQ, fractional closed loop power control, etc.) are able to deal with 
uplink interference issues for both PUCCH and PUSCH in a HetNet deployment. For PUCCH, 
it is found that it must increase the target SINR for closed loop power control in the small rela-
tive to the macro in order to maintain desired performance, like macro cell PUCCH target SINR 
can be set to around –5 dB, small cell PUCCH target SINR can be set to around –4 dB. From 
Figure 16.9, it can be seen that in the scenario of macro + pico cells deployment, the IoT increase-
ment will be higher than macro only, and the more small cell deployed, the higher IoT increased.

With CRE, the UL interference from
macro to pico is reduced. However,
the DL interference from macro to
the extended area of pico becomes
strong. This is one of the reasons
why ABS is applied.
Equal UL
Equal DL
Imbalance Zone
PUE-macro PUE-LPN
DL power in pico
is much weaker
than in macro,
when without
CRE, the UL
interference from
macro to pico is
dominant.
Offset
Best downlink
Best uplink
Best downlink
Small cell uplink path gain
Small cell downlink power
Best uplink
Macro uplink path gain
Macro downlink power
Figure 16.8  Using an offset to increase the serving area of the small cell.
IoT CDF
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0
2
4
6
8
10
12
14
16
18
20
IoT (dB)
CDF
macro only
macro + 2 pico (macro IoT)
macro + 4 pico (macro IoT)
macro + 2 pico (pico IoT)
macro + 4 pico (pico IoT)
Figure 16.9  IoT levels in macro and small cells.
www.ebook3000.com

 Table 16.1  Handover parameters used in HetNet (example). 
Default HO setup
Macro
Pico
HO setup (6 dB bias)
Macro
Pico 
a3Offset
2 dB
2 dB
a3Offset
2 dB
2 dB 
a3Reportinterval
480 ms
480 ms
a3Reportinterval
480 ms
480 ms 
a3Time To Trigger
320 ms
320 ms
a3Time To Trigger
1024 ms
40 ms 
a5Reportinterval
240 ms
240 ms
a5Reportinterval
240 ms
240 ms 
a5Time To Trigger
320 ms
320 ms
a5Time To Trigger
320 ms
320 ms 
hysA3Offset
0 dB
0 dB
hysA3Offset
0 dB
0 dB 
cellndOffServ
0 dB
0 dB
cellndOffServ
0 dB
0 dB 
threshold3
30
30
threshold3
30
30 
threshold3a
31
31
threshold3a
31
31    
cellndOffNeigh to pico
0 dB
n/a
cellndOffNeigh to pico
8 dB
n/a
UE protocol log: I.E
MeasObjectEUTRA should
contain the PCI, cell index, and
the cell cellIndividualOffse for
Pico.
message c1 :
rrcConnectionReconfiguration :
measObjectToAddModList {
measObject measObjectEUTRA :
{
cellsToAddModList {
cellIndex 1
physCellId 24
cellIndividualOffset dB8

HetNet Optimization
751
16.6  ­HetNet Cell Reselection and Handover Optimization
In HetNet, cell reselection (CR) and handover (HO) also has the potential to realize load 
balancing. The adjustment of the CR timing by biasing the CR measurements causes the UEs 
around the cell edge in highly loaded macro cell to migrate to less loaded pico cell. While cell 
reselection offset is intended for UEs in RRC idle mode, CIO is intended for UEs in RRC con-
nected mode. This procedure can compensate the problem of increasing the handover failure 
rate in CRE for RRC connected UEs if we set the CR parameters optimally in relation with HO 
parameter.
As we have mentioned above, if the parameter Qoffsets,n (can be found in SIB4) value is 
decreased to –6 dB, UEs in border area will start the reselection to the pico cell. But in this case, 
it should consider ping‐pong situation. So, it is needed to increase the Qoffsetp,m to avoid the 
reselection from pico cell to macro cell for those UEs.
HO performance is not as good as in pure macro deployments especially for higher speed 
UEs, of the different HO types, pico cell to macro cell HO performance is worst. So, speed 
dependent optimization is necessary.
In a HetNet scenario, a negative cell bias offset (i.e., a negative threshold for which the HO is 
triggered) from macro cells to micro cells will force the UEs at the macro cell border to move 
into the pico cells by extending the cell range of the pico cells, whereas a positive cell bias offset 
from the pico cells to the macro cells will avoid or delay the UEs to move to the macro cell by 
decreasing the cell range of the macro cells.
When small cells are deployed, the average RSRP level will be improved. Since overall RSRP 
levels are increasing, verify the various thresholds are appropriate, for example, may need to 
elevate Threshold1 (if they deviate from the default) to ensure the UE begins to measure neigh-
bors soon enough. Adding small cells introduces new HO borders, which should consider 
where the new borders will be as UE experience could degrade (reduced throughput) or 
increase to number of HOs.
The entering condition for event A3, which is defined as
	
Mn
Ofn
Ocn
hysteresis
Ms
Ofs
Ocs
a
offset
3
	
To simplified the formula, if we ignore frequency specific offset (Ofn, Ofs), hysteresis, a3‐offset 
and set the Ocs (CIO of serving cell) to 0, this can be simplified as Mn − Ms > −Ocn.
Table 16.1 contains the HO parameter settings for the default case and −6 dB bias (−6 dB cell 
biased offset means pico cell can be up to 6 dB weaker when HO is triggered) and a3offset = 2 dB, 
cellIndOffNeigh to pico cell = 8 dB, frequency offset = 0, and so on.
Since heterogeneous environment is a specific environment where larger number of LTE 
cells exists in same geographical area and it is desired to attach more UEs to small cells, some 
parameters should be tuned to enhance handover performance for intra‐LTE, inter‐RAT as 
well as mobility robustness optimization.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
752
Quality of experience (QoE) refers to the overall acceptability of a service, as perceived subjectively 
by the end user. QoE thereby includes the complete end‐to‐end system effects (client, terminal, 
network, services infrastructure, etc.) where overall acceptability may be influenced by user 
expectations and context. Sometimes the service may work perfectly from a pure network 
perspective while the customer is facing a bad service QoE. A good QoS does not mean the 
operator is delivering a great customer experience.
QoE is the customers’ perception of how good of a job the service provider is doing delivering 
the service. Often the QoE of a customer is only known when he calls to complain or when 
subscription revenue drops. User perception of overall service quality involves multiple aspects 
of the service. QoE is directly related to QoS but is different from QoS, which focuses on meas-
uring performance at the packet level from a network perspective. QoE is a measure of end‐to‐end 
performance at the services level from the user perspective. QoS is measured objectively, QoE 
is a subjective measurement that generally requires translation into quantitative data, it is 
possible to have excellent QoS but poor QoE. Generally speaking, users don’t care how QoS 
is implemented and don’t care how service quality is achieved, they only want the QoE.
QoE is strongly influenced by how invisible the system seems to the user. Looking at only the 
usual KPIs is not enough, the operator needs to know more about the user perceived quality. 
How to efficiently utilize the mass network data to analyze and optimize the network quality, 
which is a new challenge for the operators and the network optimization service providers. 
Through automated analysis of massive data, realize the function of performance monitoring, 
load monitoring, quality geographic display, and full range of multi dimensions of network and 
user perception, effectively enhance the efficiency of network optimization, all these are important 
in QoE optimization.
The relationship between QoE, QoS and KPI can be considered as: KPI is the network foun-
dation, QoS is the service management, QoE is the service purpose. QoS mechanisms do not 
create bandwidth but instead manage available bandwidth more efficiently, especially during 
peak congestion periods. QoE describes how the system or device enables the user to do what 
they want, when they want, how easily, how predictably, how quickly, how safely, and to what 
extent such use fulfills their needs.
The LTE is high bandwidth with sufficient capacity, and the network performance can be 
optimized by set the QoS parameters for different traffic flow, the real‐time monitoring of service 
KPI, service management and scheduling, so as to provide different levels of users or users with 
different services with varying degrees of QoE.
17
QoE Evaluation and Optimization Strategy

QoE Evaluation and Optimization Strategy
753
17.1  ­QoE Modeling
QoE is just a matter of how to measure the service quality perceived by the end user. Service 
modeling is the heart of the solution which bridges the gap between customer experience and 
network KPI, describes the relationship between KPI and customer service experience. Service 
model will help operator quickly and easily identify any performance issue which will affect 
customer experience and optimize the performance in a proactive way to avoid further degra-
dation of the service.
Customer perception modeling is the core function, which is shown in Figure  17.1. In 
order to facilitate the mapping between the high‐level abstract QoE and the underlying QoS 
parameters, key quality indicators (KQI) is introduced to connect the QoE with the KPI. 
User Oriented
Service QoE
Service KQI
Service KPI
Network KPI
Raw data
Network Oriented
OMC
KPI
KQI’s
KQI’s
KQI’s
KQI’s
KQI
QoE
KQI’s
KPI
Downlink user data rate
Uplink user data rate
Call setup success rate
Download time
Availability,
usability anywhere
Experienced
throughput
Handover latency
User plane latency
Control plane latency
Handover success rate
Very Satisfied
Satisfied
Indifferent
Dissatisfied
Very
Dissatisfied
Call drop rate
KPI
KPI
KPI
KPI
Signaling
Service A QoE
Device
Customer Survey
& Complaint
……
……
KPI
KPI
KPI
KPI
KPI
Service B QoE
Service A
Service B
Figure 17.1  Customer perception modeling.
www.ebook3000.com

LTE Optimization Engineering Handbook
754
KQIs are meaningful for the end‐user experience and represent service metrics that are 
perceivable by the end user. QoE, KQI, and KPI correspond to the user layer, service layer, 
and network layer information, respectively. According to the characteristics of service and 
network, the KPI to KQI and QoE metrics model, pushes the overall quality of the network 
and customer perception.
QoE is defined as a set of QoS mechanisms, these QoS mechanisms can be further distin-
guished as application‐based QoS and network‐based QoS. Application‐based QoS includes 
those services provided by applications to enhance the desired end‐to‐end performance, while 
network‐based QoS includes those services provided by the network and networking devices 
(like routers and switches) to enhance end‐to‐end QoS.
The relationship between KQIs and KPIs is often a cause‐effect relationship. Take VoIP 
­service for example, speech quality in a VoIP service is strongly influenced by network 
impairments such as packet delay, jitter and packet loss, but it is not sufficient to measure 
these values at the network level. Speech quality assessment algorithms utilize mathe-
matical methods that also take the distribution of impairments into account. In addition, 
packet loss can be easily observed at the end point by keeping track of packet sequence 
numbers, but the cause of the problem could be anywhere in the network path. Therefore, 
troubleshooting KQI problems requires an understanding of possible root cause KPIs and 
the correlation of the KQI values with the various network components and their potential 
root cause KPIs.
KQI is user centric, reflecting the key indicators of the E2E service level, it is the most direct 
relationship with the QoE that can be mapped to each other. KQI is a set of indicators that 
can be measured and monitored, which are related to the QoS parameters, an through the 
measurement and monitoring of them can determine if the services provided by the network 
meets the requirements. It can guide the strategy of network optimization. QoE and KQI the 
two layer parameters are similar, QoE is of direct experience parameters from the user’s 
point of view, it is a user level parameters abstracted from the traditional parameters, usually 
represented with 1 to 5 score. The KQI is relatively close to the system level, it can reflect the 
operational availability and can be measured. In the system structure it can be directly mapped 
with the underlying KPI parameters. For the needs of a service can be directly reflected in the 
demand of QoE parameter, but the demand is difficult to directly show to the service provider, 
so it is necessary to map the QoE to KQI and KPI, KQI parameters are in the middle layer of 
the architecture of the whole system that played a connecting role. The relationship between 
KQIs and KPIs is shown in Figure 17.2. The popular services profiles of KQI and customer 
experience is listed in Table 17.1.
Mapping between QoE and QoS can be carried out by mapping between KPI and KQI. When 
mapping from different KQI to KPI, the weights and coefficients of each KPI and KQI are 
defined, and the specific values of QoE are obtained by weighting. The mapping relationship 
between KPI and KQI can be expressed by the following data matrix D [m × n] as shown in 
Figure 17.3.
Objective QoS
measurements
QoS/QoE model
Network
Experience
Subjective QoE
evalution
KQI
KPI
Application
monitoring…
Latency, Throughput…
Time to Content
Usability,
Content
Availability
Stability
E2E PS Retainability,
Packet Loss…
KPIs
KQIs
E2E PS Accessibility…
Figure 17.2  The relationship between KQIs and KPIs.

Table 17.1  The profiles of KQI and customer experience.
Service
Internet
Enterprise services
Peer to Peer
QoS 
expectations
Low: best effort
High: critical data
Low: best effort
Performance 
attributes
Variable bandwidth 
consumption, Latency and loss 
tolerant
High bandwidth 
consumption, high 
sensitivity to latency, high 
security
Very high bandwidth 
consumption, latency and 
loss tolerant
KQI
File transfer success rate, 
transmission outage rate, file 
transfer delay, transmission 
average rate, peak rate
Connection success rate, 
data transmission delay,…
Page refresh success rate, 
picture download success 
rate, page refresh delay, 
picture download delay
Customer 
experience
One‐way latency < 300 ms, one 
way jitter < 30 ms, packet loss 
rate < 0.1 %,‐ transactions per 
second, time to first byte of data 
received, time to last byte of 
data received, TCP retries and 
failures, FTP/HTTP User 
perceived DL Thpt. > 2 Mbps, 
UL Thpt. > 512 kbps
One‐way latency < 300 ms, 
one way jitter < 30 ms, 
packet loss rate < 0.1 %, 
transactions per second, 
time to first byte of data 
received, time to last byte 
of data received, TCP 
retries and failures
One‐way latency < 500 ms, 
one way jitter < 30 ms, packet 
loss rate < 1 %, transactions 
per second, time to first byte 
of data received, time to last 
byte of data received, DL 
Thpt. > 2 Mbps, UL Thpt. 
> 512 kbps
Service
Voice/Video Call
Video
Gaming and Interactive
QoS 
expectations
High: low latency and jitter
High: low jitter and 
extremely low packet loss
High: low packet loss
Performance 
attributes
20–80 Kbps per call for voice, 
250–900 kbps for video, One 
way latency < 100 ms, one way 
jitter < 30 ms
Very‐high bandwidth 
consumption, very sensitive 
to packet loss
Variable bandwidth 
consumption, one‐way 
latency < 150 ms, one‐way 
jitter < 30 ms
KQI
Voice/video connection success 
rate, drop call rate,…
Video connection success 
rate, stall,…
game connection success 
rate, dropping rate, data 
transmission delay, data 
transmission rate of the game
Customer 
experience
Call setup time: Voice < 3.5 s, 
Video < 4 s, speech 
delay < 100 ms, video 
delay < 150 ms, One way 
jitter < 30 ms, Packet loss rate  
< 1 %, MoS > 3.5, voice call: 
20–80 kbps, 
video call: 250 – 900 kbps
One‐way latency < 300 ms, 
one way Jitter < 30 ms, 
packet loss rate < 0.1 %, 
Zero video buffering, Zero 
audio break, DL 
throughput > 2 Mbps
One‐way latency < 150 ms, 
one way jitter < 30 ms, 
packet loss rate < 0.1 %, Zero 
video buffering, Zero audio 
break, DL 
throughput > 2 Mbps
[KPI11,KPI12,KPI13,......................,KPI1k,........,KPI1n] ⇔ [KQI1]
[KPIk1,KPIk2,KPIk3,......................,KPIkk,.........,KPIkn] ⇔ [KQIk]
[KPIm1,KPIm2,KPIm3,......................,KPImk,....,KPImn] ⇔ [KQIm]
[KPI21,KPI22,KPI23,......................,KPI2k,........,KPI2n] ⇔ [KQI2]
.................................................................................. ⇔ ...
.................................................................................. ⇔ ...
.................................................................................. ⇔ ...
Figure 17.3  The mapping between KPI 
and KQI.
www.ebook3000.com

LTE Optimization Engineering Handbook
756
Through the actual measurement statistics, we can get the weight of each KPI corresponding 
to the KQI index and the weight of each KQI index of QoE. The procedure for obtaining the 
QoE index is as shown in Figure 17.4:
●
●The service QoE is decomposed into different KQIs and KPIs; define the weight of each KQI 
and KPI.
●
●Get the actual measured value of each KPI of the service and compare with the KPI 
value of the target, according to the weight of the defined KPI to get the actual value of 
the KQI.
●
●Compare the actual value of KQI with the value of the target KQI, according to the definition 
of the weight of the KQI to get the actual weight value of QoE.
●
●According to the actual weight of the QoE indicators, the actual value of QoE (1 to 5) can 
be got.
17.2  ­Data Collecting and Processing
It is important to monitor the quality of different services transmitted over a packet network 
from the perspective of a network service provider. Once the related KPIs are identified, you 
need to figure out how you are going to capture, analyze, and display the data. It is needed to 
have to implement a system of measurement to provide the data against which to fine‐tune 
service experience. The engineers can get from call trace data per user (IMSI), as call trace data 
is “real” data and provides visibility into indoor and outdoor users unlike simulated drive test-
ing. Being able to gather data from the servers, from the network, and from the user itself is 
critical to providing the best possible viewing experience.
Substantially, a specific customer’s experience can be understood with user specific informa-
tion, for example, number of drop calls, drop ratio, call minutes/drop, the main drop reasons 
(coverage/quality) for each user, session setup time, average throughput, customer usage 
profile over each time period, location, number of time a specific user gets blocked from LTE 
resources, and more. Before starting QoE optimization, the sources and data need to be 
­collected are shown in Table 17.2.
Application coverage and throughput
Based on the live data connection, the geolocation characteristics of each application can be 
presented. Figure 17.5 gives a coverage map of different application based on the minimum 
throughput requirements.
Weight factor
QoE indicators
……
……
……
……
……
……
Service availability
KQI1
KQI2
KPI2
KPIn
KQIn
KPI1
Service usability
Media quality
where, W: the weight of service,
N: KQI dimension of a service,
q: KPI dimension of a service,
p: KPI of the subjective score.
QoE =Σ wi Σqij pij
i
X
j
N
Figure 17.4  The procedure for obtaining the QoE index.

QoE Evaluation and Optimization Strategy
757
17.3  ­QoE‐Based Traffic Evaluation
17.3.1  Online Video QoE
In today’s market, video‐related traffic is the most significant portion of the total mobile internet 
traffic and continues to grow rapidly especially the web video traffic growth has accelerated, 
mobile operators need to build their networks with a focus on mobile video delivery. Therefore, 
consumer expectations are for the best quality of video, it is increasingly important for the 
operators to provide controllable viewing experience for the video users. Operators need best 
quality encoding per format type and strike balance with bit rates. Increasing mobile video traffic 
causes the operator need to manage the video traffic and video QoE, operators must make use 
of their networks in the most intelligent and efficient ways possible to optimize their bandwidth 
and offer consumers a better QoS in LTE networks.
From Figure 17.6, it can be seen 55% of mobile traffic will be from video by 2020. Mobile 
video services continue to catch the eye of the mobile‐using public, will grow by 45% annually 
during 2014 to 2020. The major areas that influence and impact video over LTE includes air 
interface improvements and spectrum, enhanced video encoding technologies (MPEG2 
‐ > MPEG4 ‐ > H.2641), flat IP network architecture and RAN sharing, and anvanced device for 
screen sizes, resolution, CPU, memory, antennae technology improvements, and so on.
But, the human vision is a very complex mechanism. How we perceive the quality of a video 
sequence depends on many variables, and is much more complex than the human perception 
of speech. The video quality is affected not just by simple properties of the video, such as video 
size and video frame rate (how often the video image is updated). The perceived video quality 
will also depend on other properties, such as the video content. For a football game it is very 
important to be able to see the ball. On the other hand, for a news clip in where the news 
anchor reads the headlines, the anchor’s facial expression and voice is most important. In fact, 
the factor of video codec, the radio bearer and the video client and server all can cause a variety 
of quality degradations in the video.
Video as well as streaming media service can be divided in two types on the basis of protocol. 
One type of streaming runs over RTP protocol and the other follows the basic HTTP (Hypertext 
1  H.264 SVC, support scalable video codec profiles (for wireless), MPEG4 simple scalable profile (SSP) and error 
resilient-SSP, fine granular scalability (FGS), temporal—vary frame rate via enhancement layers, spatial—vary 
resolution via enhancement layers, and SNR—vary quality via enhancement layers.
Table 17.2  Sources and data that is collected.
HTTP
TCP
video
download time
connection establishment latency
initial delay
download data
smooth round‐trip time
rho (ρ)
server side round‐trip time
variation of round‐trip time
activity factor
client side round‐trip time
timeouts
number of chunks
web page download time
packet loss
number of stallings
weighted session time
bandwidth
total/longest stalling time
user behavior (termination of connection without finishing download)
resolution vs. device screen
consider known device/OS/browser limitations and issues
encoding rate adapation
www.ebook3000.com

• Basic Web browsing
• Basic call
• Instant message
• Video
• Audio
• Good web browsing
• Ultra HD TV
• Mobile Office
• P2P
• HD video
• Real time game
HD & games > 5 Mbps
Basic apps > 100 Kbps
Ultra HD & P2P > 10 Mbps
Video & Web > 3 Mbps
Figure 17.5  App coverage map.

QoE Evaluation and Optimization Strategy
759
transport protocol) protocol for their data communication. The conventional RTP/UDP 
streaming and procedure is shown in Figure 17.7.
HTTP‐based adaptive video steaming is becoming more and more popular due to its relative 
advantages. Adaptive streaming works by detecting an user’s bandwidth and CPU capacity in 
real time and adjusting the quality of a video/audio stream accordingly. Compared with con-
ventional RTP/UDP streaming, HTTP streaming reuses high‐quality open source web server 
software rather than deploying new expensive proprietary streaming server. Another benefit is 
that HTTP traffic is able to penetrate firewalls, and the content is also easy to distribute on the 
existing HTTP‐based CDN networks. In HTTP streaming, video programs are usually seg-
mented into small chunks. There are multiple chunks of different quality from the same source 
file to distribute to viewers watching on different powered devices via different connection 
speeds. The adaptation is controlled by the clients, based on the effective throughput of the 
previously downloaded chunks. The process is shown in Figure 17.8.
Messaging
P2P
Video
Audio
Downloads and Uploads
Web Browsing
Gaming/Other
Other
Video Dominates Traffic Growth
Other encrypted
Social networking
Web browsing
Audio
Video
File sharing
2020
2011
2012
2013
2014
2015
X10
growth
2014
Software download
and update
1
2
3
4
5
6
7
1
1
2
3
4
5
6
7
8
2
3
4
5
6
7
8
7
3
2
1
6
5
4
Figure 17.6  High growth in streaming/interactive video apps.
www.ebook3000.com

LTE Optimization Engineering Handbook
760
Following parameters should be considered when creating video content files: video codec, 
video encoding rate, video frame rate, frame size, audio codec, audio media rate, and maximum 
streaming packet size (information included in the file header). Table 17.3 gives the popular 
video resolution and bit rate.
Connection
Streaming
Client
Streaming
Server
Streaming
Client
Streaming
Server
Teardown
TCP SYN
TCP ACK
RTSP DESCRIBE
RTSP SETUP (media)
RTSP SETUP (media2)
RTSP 200 OK+ SDP
RTSP 200 OK
RTSP 200 OK
RTSP 200 OK
RTSP 200 OK
RTSP 200 OK
RTSP TEARDOWN
RTSP 200 OK
RTSP  PAUSE
RTCP
Media flow (RTP/RTCP)
RTSP PLAY
RTSP PLAY
TCP SYN, ACK
Procedure
Multimedia Stream
UDP
TCP
Uplink (RTSP/RTCP)
EGPRS
WCDMA/HSPA
I-HSPA
WiMAX
LTE
RTCP
RTP
RTSP
Multimedia Stream
UDP
L2
L1
IP
TCP
RTCP
RTP
RTSP
IP
MNOs
Protocols
Downlink (RTSP/RTP/RTCP)
Figure 17.7  Conventional RTP/UDP streaming and procedure.
LTE
Client
Video application 
server
1. Request manifest for Movie A
1. Request manifest for Movie A
2. Manifest file sent
2. Manifest file sent
3. Request for Movie A
3. Request for Movie A
4. Responds with audio and
video chunks of movie A
4. Responds with a and video
chunks of movie A
Figure 17.8  Client requests the manifest file from the server procedure.

QoE Evaluation and Optimization Strategy
761
LTE enables mobile/wireless HD streaming for large screen devices (such as tablets, laptops, 
or even TVs). The bitrate for the required video quality depends on the screen size, which is 
shown in Figure 17.9.
There are several new content types from 1996 to 2012—analog video, MPEG‐2 SD video, 
MPEG‐2 HD video, MPEG‐4 SD video, and MPEG‐4 HD video was introduced. After 2012, the 
content types will be as similar as pre‐2012, but far more channels and far greatly density of 
delivery containers are used and lower bit‐rates will be provided, include HTTP live streaming 
(HLS), smooth streaming, MPEG dynamic adaptive streaming over HTTP (MPEG‐DASH), 
adaptive bit rate (ABR), high efficiency video coding (HEVC), and 4 K, and so on.
17.3.1.1  Video Quality Monitoring Methods
Actually, the human vision system is extremely complex and many properties are still not well 
understood. Video is even more sensitive to IP impairments than voice, and even low rates of packet 
loss can cause severe degradation in perceived quality. Parameters related to video quality include 
bit rate, encoding format, prebuffering time, rebuffering time, frame bundling time, hangup time 
and packet loss etc. IP video quality degradation can manifest itself in a number of ways, including 
jerkiness, freezes or gaps in playback, and image‐related impairments such as “blocky” video, 
blurred edges, pixilation, and synchronization of the audio and video. Video quality degradations 
can be classified into spatial artifacts and temporal artifacts as shown in Table 17.4.
There are different types of video quality metrics of video‐quality monitoring methods, 
which will be used in video quality evaluation individually or combined.
Data metrics, which measure the fidelity of the digital signal without considering its content, 
for examples: mean squared error (MSE) or peak signal to noise ratio (PSNR), bit error rate 
(BER), and packet loss rate (PLR), and so on.
Picture metrics are based on the visual information contained in a picture/video, and focus-
ing on the perceived (subjective) quality of the content based on the human vision. When the 
video is distorted, for example due to transmission errors, visual and temporal artifacts become 
visible in the image. Typical visual artifacts include blockiness, blur, noise distortion, and color-
fulness. The disadvantage of this method is high processing power required.
Packet or bitstream metrics: for compressed video, which is derived from packet headers or 
the encoded video information without fully encoding the video. This method’s advantage is 
much lower bandwidth to be analyzed compared to metrics which looks into fully decoded 
video and lower processing power required.
For engineering, objective video quality assessment is often used to compare a reference video 
sequence with the degraded video sequence. One of the simple way and widely used video quality 
assessment is peak signal to noise ratio (PSNR), which measures the mean square error (MSE), 
which is frame‐by‐frame, pixel‐by‐pixel comparison between the reference and the test sequences. 
Until the emergence of models using human perception, PSNR was widely used method of com-
paring the video quality. PSNR expressed in dB and is the logarithm of the maximum error 
squared divided by MSE. It can be then mapped to the MOS score of video quality as shown below.
Table 17.3  Video resolution versus bit rate.
Bitrate (kbps)
Resolution (width × height)
Bitrate (kbps)
Resolution (width × height)
235
320 × 240
1050
640 × 480
375
384 × 288
1750
720 × 480
560
512 × 384
2350
1280 × 720
750
512 × 384
3000
1280 × 720
www.ebook3000.com

LTE Optimization Engineering Handbook
762
PSNR (dB)
MOS
MSE
P i j
P i j
N
PSNR
MSE
i
N
j
N
n
, 
, 
2
2
20
2
1
log
>37
5 (Excellent)
31–37
4 (Good)
25–31
3 (Fair)
20–25
2 (Poor)
<20
1 (Bad)
150 kbps 480*224
Screen
size
240 kbps 480*224
440 kbps 480*224
640 kbps 640*360
1240 kbps 640*360
1840 kbps 960*540
2540 kbps 1280*720
4540 kbps 1280*720
Smartphone
Good
High
Medium
Low
Tablet
Low
Medium
High
Good
R
e
s
o
l
u
t
i
o
n
Device
Screen
Resolution
400
128
48
96
480
Low
Medium
Video Stream Quality Bit Rate (kbps)***
1280
256
800
4000
High
iPad**
iPhone*
Smartphone**
High
Good
Low
Medium
TV screen
1024×768
(786432 pixel)
320×240
(76800 pixel)
320×480
(153600 pixel)
Figure 17.9  Video stream bit rate for different devices.

QoE Evaluation and Optimization Strategy
763
where picture size is NxN; P() is intensity of original pixel (0, 2n–1); P’() is intensity of recovered 
pixel, (0, 2n–1); n is the number of bits per pixel (luminance component).
17.3.1.2  RATE Adaptive Video Codecs
Due to factors such as radio interference and cell load, the throughput available to a client var-
ies over time. If the throughput decreases below the media’s bit rate, the client’s buffer will 
eventually become empty. This causes the client to enter a period of rebuffering, which degrades 
user experience. In order to avoid this, a streaming server may provide the media at different 
bit rates, thereby allowing the media’s bit rate (and quality) to be modified to fit the client’s 
bandwidth. The challenge lies in making it possible to achieve a video experience that is free of 
freeze effects, something that may affect a fraction of the users even at moderate load levels. In 
fact it can affect all users that are moving around.
For optimization, three adaptation schemes usually have been deployed in network, ECN 
(explicit congestion notification) based adaptation schemes, packet loss–based adaptation 
scheme and delay‐based adaptation scheme. Rate adaptation can be based on either implicit 
signals where one try to infer the channel conditions from measured packet delay (the long 
packet delays will eventually cause the buffer of the video client to run out of data) and detec-
tion of lost packets, or from explicit signals where nodes along the transmission path indicate 
congestion. Figure 17.10 shows how the same video codec is applied to the content with differ-
ent bit rates when the bit rate is dropped to a certain lower level. In theory, the PSNR values are 
higher for low resolution than high for corresponding bit rate because more bits in average are 
spent on representing pixels in low resolution, which results in higher PSNRs.
Table 17.4  Spatial and temporal artifacts.
Spatial artifacts
Tiling (Blockiness)
Caused by coarse quantization. Commonly seen for images with 
macro block structure and in high motion areas.
Blurriness
Reduction in sharpness of edges and spatial details. Caused by 
compression for trading off bits to code resolution
Noise
Errors introduced during compression and decompression
Temporal 
artifacts
Jerkiness
Perceived as a series of distinct snapshots but continuous pictures. 
Commonly observed on low bit rate and low frame rate videos. 
Results of skipping video frames due to the reduction of video 
information.
Frame Loss
Video packet loss by the streaming client while playing the video
Jitter
Time varying of all frame intervals with respect to the typical 
frame interval. Under ideal conditions, frame buffering is applied 
and video players will play at a constant rate.
Encoding
Content 
Transrating
(decoding–encoding) 
Decoding 
Display 
Bit rate 1
Bit rate 2
Terminal
Server 
Figure 17.10  System layout for translating.
www.ebook3000.com

LTE Optimization Engineering Handbook
764
The translating refers to techniques that dynamically adjust the encoded bit rate of a media 
stream depending on the current network conditions. To achieve this, the streaming server 
must continuously estimate the state of the network. This can be realized by RTCP protocol. 
Based on assumptions and feedback from the mobile, the server can compute/estimate the 
buffer level and the received rate at the client, the server can tune the sending rate and 
­content rate.
RTP over UDP over IP in forward direction carries video from sender to receiver once the 
packets arrive at the sender, the sender determines whether or not congestion occurs. RTCP 
carries congestion information in reverse direction, the sender adjusts its bitrate according to 
information in RTCP. For bidirectional media, setup two RTP + RTCP one in each direction. 
For ECN, the congestion status is indicated in two bits in the IP header. Packets can be ECN 
marked in any node along the transmission path if congestion occurs. As packet loss or delay 
based adaptation scheme reacts only when damage done, the benefit with ECN is that nodes 
along the transmission path can notify the endpoints of congestion based on information such 
as link budget that is only available in the nodes (Figure 17.11).
When a video is transmitted over a poor LTE wireless link, the bandwidth is a limitation. The 
bandwidth limitation puts limits on video properties, such as maximum frame rate and com-
pression ratio (quantization). To overcome bandwidth limitations the video is normally 
encoded with a lossy compression algorithm, which inherently results in a reduction of video 
quality. In a live network, the video rate adaptation can also prevent packet losses degradation 
during the fading period and the average PSNR value with target rate adaptation is smaller than 
without adaptation.
17.3.1.3  Streaming KPI and QoE
This part describes a set of metrics that can be measured to evaluate QoS of wireless video 
streaming. Many other factors that impact network requirements for video application sup-
port including video’s high sensitivity to packet loss, real‐time constraints, audio‐visual syn-
chronization, storage requirements, and so on. The KPI reference values cannot be defined 
with accuracy because it’s strictly related to many factors: the radio network is 4G or 3G, the 
Detect decrease of bandwidth
Detect increase of bandwidth
Start DL
UE
Server
Request movie (240 Kbps, fragment n+m)
Request movie (150 Kbps, fragment n)
Request movie (440 Kbps, fragment 2)
Request movie (440 Kbps, fragment 1)
Request: for video
Manifest File / Master Index File/
Media Presentation Description
incl. bitrates, codecs, video resolutions,...
Figure 17.11  How adaptive bitrate streaming works.

QoE Evaluation and Optimization Strategy
765
topology able to deliver the streaming service, the kind of content (low and high motion), the 
encoding scheme and the terminal capabilities able to support properly the service.
●
●Streaming service accessibility: It defines the probability that the first data packet of the 
stream can be received by the UE when requested by the user. The “packet reception” is 
­completed by appearance of the “buffering” message on the player at user side.
●
●Retainability: It defines the probability of the continuity of call.
●
●Integrity: It includes video MoS, video freeze rate, number of displayed frames, reproduction 
start failure ratio and reproduction start delay, etc.
●
●Connection setup time: This is the time elapsed between when the user client asks the 
streaming server to start the streaming session (first TCP SYN) and the time when the first 
data packet received in the client.
●
●Buffering time: This is also referred to as initial buffering time, and it is strictly related to the 
duration of the initial buffer. This is the time elapsed between when the session setup has 
been completed (the client’s buffer can start to be filled with data sent from the server) and 
the time media starts playing at the client’s device. Note: these indicators can be accurately 
measured by proper tool only for some specific streaming solution (e.g., IMP solution). The 
user experienced total connection setup delay is thus:
	
User connectiondelay
connectionsetuptime
buffering time
 
 
 
 
 
	
●
●Number of re‐buffering: This KPI measures how many rebuffering are experienced on the 
video streaming. It can freeze the video playback and it is particularly annoying for user.
●
●Lip‐sync: The lip‐synchronization index is computed as ratio between the number of 
­displayed frames and the number of decoded frames. A lip‐synchronization index close to 1 
indicates a better displayed quality and no lip‐synchronization problems, whereas an index 
value close to 0 indicates poor displayed quality and out‐of‐sync situations.
●
●Teardown time: This is the time elapsed between when the user client sends a teardown 
command to the streaming server, and the time the client is able to start a new streaming 
session.
●
●Video MoS: This KPI measures the overall perceived quality of the video, includes jerkiness 
(perceptual measure of frozen pictures or motion that does not look smooth), blockiness 
(perceptual measure of block structure), blurriness (perceptual measure of the loss of fine 
detail and smearing of edges in the video)
●
●Throughput: This KPI measures the application throughput, that is the total audio + video 
bit rate.
●
●Delay: inter‐packet delay.
●
●Jitter: delay variation.
●
●Packet loss ratio: This KPI measures the percentage of packets not delivered to the client.
●
●RTT: it is the summation of the time required to traverse a network link on the forward and 
reverse paths, which calculated by RTCP SR/RR. RTCP SR/RRs are processed to deduce RTT 
according to RFCs 1889.
The quality of the streaming service, perceived by the end user, can be evaluated only by a 
detailed and jointed analysis of different KPIs as above mentioned. Video QoS monitoring was 
focused on high sustainable content rate, low click to content delay, uninterrupted play without 
rebuffering events, it is needed to collect loss, delay and delay jitter statistics. Normally, video 
delay is larger than audio delay due to video has larger packets, lower sampling rate and longer 
processing delay. For engineering, QoE is mainly considered of number of stalling/buffer‐under‐run, 
the related interruption delay and video start up delay. Actually, during the field test observation, 
the “happy” user criteria can be as follows:
www.ebook3000.com

LTE Optimization Engineering Handbook
766
●
●Initial download time is less than 5 to 10 seconds. (the time between the user pushes the play 
button till the video starts play likely is the time to fill up the play‐out buffer). The behavior 
of video end user in case of different play‐out time: 20% of viewers abandon if the time is 
more than 10 secs; 30% of viewers abandon if the time is more than 10 secs; 1 min: 45% of 
viewers abandon if the time is more than 60 secs.
●
●The number of stalls is less than 3 and each stall is less than 5 to 10 secs. A stall is when video 
freezes during the play due to content starvation. The stall time is the time when video 
freezes till the time the video resumes.
The strict delay requirements for real time services as well as the relations between MoS and 
stalls and interrupt delay are shown in Figure 17.12.
Video stalling is usually significantly more disturbing to the end user then a slight quality 
degradation, usually, a user who suffers from more than 15 seconds rebuffering is anyways very 
unsatisfied. The right diagram in Figure 17.11 shows that fixed bitrate video can give rise to 
very large delays even at relatively moderate loads, this is by the user experienced as frozen or 
choppy video. The problems are roughly similar for uplink and downlink that these problems 
do not happen to all users at the same time, if the user is close to the base station then this is 
unlikely to happen (unless the network load is very high). For users moving around one can 
expect this to happen every once in a while for short time periods time.
In summary, many factors impact QoE of video application, there is no one size fits all solu-
tion to evaluate the video quality, of course, other KPIs like data rate or frame rate might be 
needed as well. Table 17.5 give a present of a set of indicators of video service, which is fre-
quently used.
17.3.1.4  Video Optimization
Success of any video or media application requires an end‐to‐end solution view and careful 
engineering to meet QoE expectations.
Video optimization service includes both minimizes video data throughput on the network, 
maximizes the number of simultaneous video users, and dynamically modifies video content 
flow to suit the end‐user’s prevailing network conditions, like reducing video start times or 
re‐buffering events. Collection of log files on different interfaces (E2E chain) by proper sniffers 
before optimization is necessary.
Before video optimization, the operator should know, what are the popular video service in 
your network? OTT2 providers or your own content? What kind of device are most popular for 
different video service? Where the video services are heavily used?
Usually, two kinds of online video services is popular delivered over broadband networks. 
One is downloadable video which is fully downloaded before playback. Network performance 
and load impact on download time, but not on the video viewing experience. The other is 
streaming video which playback can start almost instantly after buffering. Network perfor-
mance and load have significant impact on video viewing experience.
Data rate is always important factors affecting QoE in LTE network. Video quality degrades 
nonlinearly while bit rate decreases, data rate affects rapid motion video more than slow 
motion video.
Improved customer experience as less stalls are likely to occur while the video quality remains 
at maximum level. The number of stalls is less than N (~3) and each stall is less than yy sec 
2  Video delivered over the internet, often from third parties such as YouTube, a web-based personal video sharing 
service.

QoE Evaluation and Optimization Strategy
767
5
4
3
2
1
4
8
12
N
N: number of stalling interruptions
D: interruptions delay in seconds
MOS
16 16
Dmax
12
8
4
Time
Buffer status
Buffer threshold
Terminated and re-buffer
Playing video
0
Initial buffer
10
15
20
25
30
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
Process time [s]
Delay [s]
Packet delay
Lost packet
1
Figure 17.12  Strict delay requirements for real time services.
www.ebook3000.com

LTE Optimization Engineering Handbook
768
(~5–10 sec.). The stall time is no more than 15 seconds, the example below shows after just one 
freeze and buffering of 10 sec, video play out becomes smooth (Figure 17.13).
Faster response times can be realized as the optimized content is delivered directly from 
cache instead of content server in Internet. Caching infrastructure allows the network to store 
the most popular Internet content to offload it quickly and easily to subscribers over a short 
distance. This ensures better utilization of the existing network investment, improves ­efficiency, 
reduces peering costs and improves QoE for subscribers.
Table 17.5  Indicators of video service.
DNS response rate, HTTP get/post response rate
DNS response delay, HTTP get/post response delay
DNS success rate, HTTP get success rate
Success rate, share of video requests that are completed successfully
Video startup delay, initial delay between video request and actual start of playback, which can be estimated 
from buffer filling
Video stalling, how often the video playback was interrupted due to buffer under‐run, which can be 
estimated from buffer re‐filling
Average selected data rate, it is based on fragment requests
Average selected frame rate, which can be got from video frames per second
Rate increases/decreases, how often the rate has been increased/decreased by the client during regular playback
Average/peak/minimum fragment rate, average/peak/minimum rate of fragment download for the entire 
video stream
Rate distribution, percentage of time spent in playback for each resolution/rate offered
Rate stability, average consecutive time interval spent in each resolution/rate offered
Number of rate violations, when the fragment rate is below the encoded rate of the requested fragment
Retransmissions, number of retransmissions overall which require inspection of each TCP packet
Perceptual video quality, e.g., using no‐reference PEVQ, ITU‐T Recommendation J.247, or Telchemy MOS 
estimate
50
40
30
20
10
0
0
20
40
60
80
Playout stopped,
buffering for 10sec
Download Data
New Play
Curve after
stopping 10sec
Original Play
Curve
Mbits
100
120
140
Time (in seconds)
Figure 17.13  One example of video play out.

QoE Evaluation and Optimization Strategy
769
From network point of view, the optimization includes packet drops (queue drops, overruns, 
frame errors, no buffer space), latency, and jitter. For packet loss optimization, it is needed to 
consider for video service to increase bandwidth, guarantee bandwidth, prioritize video, and 
increase buffers, and so on. Environmental optimization includes camera placement, poor 
lighting, background noise, microphone positioning, audio codec selection, and so on.
17.3.2  Voice QoE
Wireless operators are always trying to increase revenue of voice traffic. An important crite-
rion for users to embrace wireless systems is that the voice quality be at least as good as the 
traditional 2G network and even switched telephone network.
Speech quality is one of the most important QoE metrics operators use to monitor and trou-
bleshoot their networks. The well‐known ITU‐T standard PESQ/POLQA algorithm is the 
most accurate objective metric for estimating the subscribers’ QoE. The PESQ/POLQA algo-
rithm has been developed as a method of accurately estimating the listening speech quality 
performed by the wireless, VoIP and fixed networks. Its accuracy for assessing the degradation 
of the speech quality caused by different types of networks emerged from the complex 
­psychoacoustic and cognitive models that PESQ uses. These models process and compare the 
original, non‐degraded, speech sample with the degraded one and provide a score that represents 
the estimator of the subscribers’ perception. The aim of this section is to provide a general type 
voice KPI including VoLTE, over the top VoIP and CSFB, which is shown in Table 17.6.
Table 17.6  Voice KPI and KQI.
Service KQI
KPI/Alarm
Availability, is the voice service available for all 
the subscribers
Cell availability
EPC availability
System module/unit alarms
IMS Nodes availability
Network accessibility, are subscribers able to 
connect, register and use the voice service?
RRC Setup Success Rate
MME Attach Success Rate
MME Service Request Success Rate
Initial Registration Success Ratio
Service accessibility
Originating/Terminating Session Setup duration
Originating/Terminating Session Setup Success Ratio
Retainability
E‐RAB(QC1) Drop Rate
Integrity
QC1 PDCP SDU UL/DL Throughput and Loss Ratio
LTE QC1 Average PDCP SDU Downlink Delay
Mobility, what is the quality of the voice service 
when subscribers are moving?
Intra eNB Handover Success Ratio
Inter eNB S1/X2 Handover Success Ratio
IRAT LTE‐2/3G Handover Success Ratio
MME TAU Update Success Ratio
CSFB accessibility
CSFB Paging Success Ratio
SRVCC retainability
LTE‐2/3G SRVCC Handover Success Ratio
www.ebook3000.com

LTE Optimization Engineering Handbook
770
Degradation of the speech quality is a multi‐dimensional problem, it has different sources 
and each source can contribute in different ways depending on the network conditions such as 
load, geographical, and demographic characteristics, and time. Therefore, a comprehensive 
network performance evaluation implies measurement set up of both mobile to land or to 
mobile calls.
CSFB is the mechanism to move a subscriber from LTE to a legacy technology providing CS 
voice service which requires coverage overlap between LTE and GSM, UMTS or 1xRTT CDMA 
coverage. CSFB KQI service quality index system is established based on the user real experi-
ence, which can decomposite of the relevant KPI indicators. Based on the analysis of the related 
KPI monitoring and analysis, the optimization of the quality problem is obtained.
LTE networks were developed to support data application which are insensitive to delay. If 
VoLTE used for voice applications, delay and delay variation/jitter may impact voice quality. 
The KQIs can be computed on a session level such as service accesibility, service retainability, 
and quality. Voice KQI and QoE is depicted in Figure 17.14.
Beside the above mentioned, conversation quality is affected by the factors that affect listen-
ing quality as well as one‐way delay, echo levels, sidetone, and sidetone masking, and so on.
17.3.3  Data Service QoE
The complexity of multiple networks, devices, services and policies increases problems of 
latency and reliability that undermine the user experience. As we know, site load time is the 
biggest source of dissatisfaction for mobile Internet users, it is too slow when browsing Internet 
on mobile, the main reason is applications are not adjusted to the mobile environment. 
Figure 17.15 shows the factors of data service dissatisfaction from access and data surfing per-
ception point of view.
Meanwhile, the operators need to streamline their mobile internet infrastructure. The com-
plex web of network elements often leading to costly duplication in operations, management, 
administration, and provisioning slows new service introduction and drives up capital and 
operating expenses. Data applications QoE factors are described following:
●
●Processing delay, includes server processing and task and process scheduling/poling, 
switching
●
●Queuing delay, due to congestion and/or inadequate buffer size
●
●Propagation (distance) and serialization (link speed) delay
●
●TCP related impairments, include number of concurrent/active TCP connections/flows, 
transaction file size, TCP retransmission and timeout, TCP packet round trip time, buffer 
size and TCP congestion window size, and so on.
●
●Packet loss rate and distribution
●
●Effective throughput (as a function of all the above)
E2E mobile broadband data service assessment, tests, and analysis includes measures and 
analyzes the throughput, delay, accessibility, and browsing QoE, which provides quick wins to 
problems identified. The main data service KQI and KPI are shown in Table 17.7.
17.3.3.1  Web browsing
The traffic pattern resulting from downloading and uploading web objects differs significantly 
from the VoIP traffic. Web browsing is one of the HTTP services that is focused on HTTP 
download speed and HTTP response latency. Usually, when the user has downloaded an object, 
there will be a longer idle period for reading the web page, for example. See Figure 17.16 for 
illustration of web browsing traffic model:

Accesibility
KQI
KPI
original
Call setup Latency
Call setup success rate
terminated
paging
fall back
fallback
paging
23G access
Retainability and integrity
Drop call/
voice quality
Return
return to LTE
return success
Call setup 
time
Quality
(MoS) 
Mouth to ear
delay
Call drop 
rate
Call setup 
success rate 
Accesibility
Integrity
Retainability
Cell availability
Attach failure 
ratio
Attach 
setup time
EPS bearer activition
failure ratio
EPS bearer 
setup time
SIP registration
success ratio
RRC connection  
success rate 
RAB setup
success rate
RRC connection
time
EPS bearer
cut off ratio
Packet loss
Session 
failures
latency/delay/jitter
Packet loss rate
RAB abnormal
release rate
HOSR/ IRAT HO
Round trip delay
User throughput
HOSR/
IRAT HO
SIP 
registration/
session
setup time
Figure 17.14  Voice KQI and QoE.
www.ebook3000.com

LTE Optimization Engineering Handbook
772
When a browser downloads a page from a Web server, it queries the DNS, and then estab-
lishes a TCP connection on which the request for the HTML is sent. Once the HTML is 
received, the browser parses the HTML and obtains a list of objects to download. Only when 
the object is received, is a new request submitted. Regardless of the object size, a single object 
requires at least a single round‐trip‐time. Web browsing procedure is shown in Figure 17.17.
Data service QoE
Access
perception
Access
success
rate
Access
latency
User plane
latency
Data rate
Server side
issue
Transmission
delay
Device
limitation
Dissatisfaction
Data surfing
perception
Figure 17.15  The factors of data service dissatisfaction.
Table 17.7  The main data service KQI and KPI.
KQI
KPI
KQI
KPI
Coverage and 
throughput
RF coverage
Poor coverage
Integrity
Drop call rate
Drop call rate
Data rate
PDCP 
throughput UL
HO success rate
HO success rate
PDCP 
throughput DL
Redirection ratio
Redirection ratio
RRC 
connected users
HO latency
HO latency
UL throughput
RRC connection 
re‐establish rate
RRC connection 
re‐establish rate
DL throughput
Retainability Packet loss rate
UL packet loss rate
Accessibility
Access 
success rate
Access 
success rate
DL packet loss rate
PDP 
activation
PDP active 
success rate
BLER
UL BLER
PDP activate 
latency
DL BLER
Access 
latency
Attach latency
User plane latency
User plane latency
Busy period starts with a request for
the web object (HTTP request), the
object size is around 100kB. Another
object downloaded after reading time
(5 sec on average)
Download
Request
Request/Response and
TCP Slow Start Phase
Download Completed
Figure 17.16  Web browsing traffic model.

MS
Press Button
Signaling
Plane
Data
Plane
RRC Connect Req
RRC Setup
RRC Setup Comp
Serve Request
Initial UE Message
S1-AP Initial Contact Setup Request
S1-AP Initial Contact Setup Complete
Modify Bearer Request
Modify Bearer Response
Modify Bearer Response
Modify Bearer Request
******
DNS Query Delay
Page Download Throughput
TCP connect Delay
Page Response SR
DNS Query Sucess Rate
TCP Connect Sucess Rate
1
2
3
4
5
6
7
8
9
GET Sucess Rate
200 CK
GET request
HTTP Reply Data n
HTTP Reply Data 1
200 OK, first packet of first GET
GET request
Connect ACK
Connect Reply
Connect request (Userip. Destip)
DNS Rap (destip)
DNS Rap ( Userip, Url)
HTTP Reply Data n
…
…
Page Browsing Delay
Page Browsing SR
Page Response Delay
HTTP Reply Data1
Uu
S1
eNodeB
MME
S11
SGW
PGW
S5/S8
SGi
DNS
SP
DNS look up
HTTP Get
Open TCP
Figure 17.17  HTTP browsing service signaling traffic flow.
www.ebook3000.com

LTE Optimization Engineering Handbook
774
QoE of a web browsing session can be classified into service availability, service response 
time, and data download speed. An important attribute of web browsing is the responsiveness 
to a user action. Users easily tend to become impatient if they cannot access a website quickly 
enough or if the web page is not responding fast enough to user actions such as pressing a 
­button or entering a search query. The response time between HTTP request and response 
perceived by the user is the time interval between the moment when it places the demand and 
the moment when the page desired is fully downloaded. Some statistics shows that a response 
time of less than 2 s is preferred, less than 4 s is acceptable, and 10s is about the limit for keeping 
the user’s attention focused on the dialog.
Through the automatic delimitation fault tree described in Figure 17.18 to effectively deter-
mine the browsing, video, download, and other types of Internet data rate slow issues, and the 
accuracy rate can be reached more than 80%. For the low speed data rate issues, the data rate 
indicators will be related to the RF performance, KPI and other aspects of the TCP index, the 
problem will be delimitated to the wireless network, service platform, the core network and 
terminal.
KPI association analysis is reflected in the download rate and latency indicators. The latency 
indicators can be further decomposed into DNS query latency, TCP setup latency, GET 
response time of the server side. For DNS queries can be specifically bound to the DNS server. 
For TCP setup is further subdivided into the SP or core network issues. For the server side long 
GET response time issues, the associated GET to 200OK delay analysis is needed to find the 
server problem. Packet loss rate is an important factor of low speed data rate, the higher the 
packet loss rate the more likely to cause the deterioration of the quality of KQI. Packet loss rate 
includes uplink packet loss rate (related to SP, core network) and downlink packet loss rate 
(related to eNB/cell issue). For the RF issues, it is needed to analysis wireless measurement 
report data for precise delimitation.
For the low download data rate content source, the four KPI indicators (“TCP setup RTT 
delay,” “first GET response delay,” “server side downlink packet loss rate,” and “uplink RTT 
delay”) are usually analyzed to delimitate the problem, if one of them meets the threshold, it 
can be determined that the problem stems from the content source, which is shown in 
Table 17.8.
In addition for the RF issues, the HTTP response latency can be improved by modifying the 
SrPeriodicity parameter from 20 to 5 ms and the noOfPucchSrUsers parameter from 200 to 64 
in the low load and a few users cells, and so on.
17.3.3.2  Online Gaming
Another significant share of today’s internet traffic is generated by network gaming. A number 
of studies have sought to evaluate the effect of network quality on online gamers. Except player 
skills, game design, and content, real‐life satisfaction of online gaming needs strict requirement 
for delay, and users won’t have difficulty accessing the service for sure.
Latency requirements vary greatly depending on genre, different games have different latency 
requirements, and any online game system should try to keep latency at a reasonable level to 
maintain players. The typical gaming response time is shown in Figure 17.19.
Game users playing experience degrades significantly if end‐to‐end delay is more than 
200 msec 95% of time. For racing games something closer to 60 ms is acceptable, larger 
latency values can reduce the player’s score and eventually make the game unplayable. 
Response latency is the time from control input at the client until the response is rendered 
on the client’s screen. This consists of time to process the control input, transit time to the 
server, processing at the server, transit time back to the client, and processing and rendering 
delays at the client.

QoE poor indicator cell
Session Setup success Issues
Yes
Yes
No
Due to some
specifie UE
Too long RTT
in non-busy hour
Cell
issue
UE
issue
Server
issue
Other
issue
UE
issue
Resource
limited
RF
issue
Core
issue
URL
issue
Content
issue
Other
issue
UE
issue
Abnomal kpi
on SGW, PGW
URL issue
No
No
Yes
Yes
Yes
Yes
Yes
Yes
Yes
Too much DL
packet loss
No
No
Abnomal RTT
of data service
Abnomal Get
response
No
No
No
No
Abnomal RTT
of TCP setup
Abnomal TCP
indicator of
RF side
Due to some
specifie UE
Yes
No
Latency, throughput Issues
Figure 17.18  The automatic delimitation fault tree.
www.ebook3000.com

LTE Optimization Engineering Handbook
776
17.4  ­QoE Based Optimization
There are many issues impacting QoS and QoE. To build in QoE, the operators start by under-
standing the system parameters that influence QoE, and what value is best for each. QoE is not 
only about bandwidth, it’s also about the ability of the network to deliver what users need. 
Figure 17.20 shows some important contributors to QoE for telecommunications systems. The 
factors are grouped as user‐interface and system‐related factors, although each may have con-
tributions to the other category. For instance, while security influences QoE mostly through 
the system (i.e., how secure does the end user feel that the session, the communication content, 
and any data stored in the network are protected), the design of the user interface around the 
handling of passwords can made the system easier or harder to use.
A service can be divided into media and signaling paths, which have session, application, 
transport, and physical layers. The metrics that influence media path quality of experience 
include delay, fidelity, availability, and reliability. For each of these metrics, there can be factors 
in each of the implementation layers that contribute or degrade the overall service QoE. 
Actually, packet loss and delay are the main issues for the data service, the application experience 
optimization dimensions are referred to Figure 17.21 and Figure 17.22.
The signaling path is dependent on delay and availability. For service layer, the layer is 
exposed to the user, where QoE is measured. For application layer, the level where various 
application parameters are set, for example media resolution, encoder type, bit rate, and so on, 
may also include application layer forward error correction or other loss concealment meth-
ods. For transport layer, which is the layer responsible for transporting service packets from 
one entity to another. It employs routing and forwarding to achieve its function. It may also 
employ traffic management mechanisms as needed. For physical layer, various network impair-
ments (loss, delay, jitter) can occur here due to poor RF coverage, high interference and is also 
where QoS and error correction mechanisms may be employed. Take internet service as an 
example, as internet content is fragmented, which required a range of optimization techniques 
listed below.
●
●Provisioning, includes APN settings, WAP portal settings, content distribution network 
(CDN) performance of the network and servers, and so on.
●
●Application protocol, includes inter‐working WAP, MMS, GTP, DNS, radius protocol, 
and so on.
●
●Security: viruses, hacking attempts
●
●Content packaging, WAP page design, data packaging
●
●Service platform and application servers, WAP server, radius
●
●Core network EPC, IMS, firewall, routers
●
●Radio access network’s performace: coverage, handovers, capacity, radio link strength
Table 17.8  Low download data rate issue delimitation.
KQI
KPI indicators
Threshold
Delimitation
HTTP page download data rate is  
less than 1Mbps
TCP setup RTT delay
>100 ms
Content source
first GET response delay
>400 ms
uplink RTT delay
>150 ms
server side downlink packet  
loss rate
>3%

Download time
x seconds
Download time
y seconds
Operator A
RAN
Operator B
RAN
Game server
D3
D2
D1
Client B
Client C
D5
D4
Internet
Wireless
User
User
Operator B
Core Network
Operator A
Core Network
Gaming
portal
D5
D4
D3
D2
D1
Total delay
Wireless
Internet
Game Server
Internet
Wireless
50ms
20ms
5ms
20ms
50ms
145ms
Client B→C latency budget
Total delay
Client B→A latency budget
Wireless
Internet
Game Server
Internet
20ms
5ms
20ms
50ms
95ms
Client A
Figure 17.19  Typical gaming response time.
www.ebook3000.com

LTE Optimization Engineering Handbook
778
User interface related
QoE
System related
Security
Availability
Fidelity/clarity
(sound/image)
Delay (Network
response time)
Mental effort
(cognitive load)
Usability of the
physical controls
Progress feedback
(e.g., tones)
Figure 17.20  Factors influencing QoE.
User-centric Network Optimization
Device
RAN
Transport
Core
Optimization
App Experience
Assessment
User-centric Troubleshooting
& Root Cause Analysis
App
App Experience
Assessment
Figure 17.21  App experience optimization.
Packet Loss
10%
Interactive
Responsive
Timely
Non-critical
Conversational
voice and video
Voice/video
messaging
Streaming
audio/video
Paging,
Downloads
Transactions
e.g., E-commerce
web-browsing,
E-mail access
Command/control
e.g., Telnet,
interactive games
Background
e.g., Usenet
E-mail delivery
sms
Delay
100 sec
1 sec
100 ms
0%
10 sec
Figure 17.22  Mapping of user‐centric QoE requirements.

QoE Evaluation and Optimization Strategy
779
●
●Terminals: the quality of the end‐user device (i.e., memory, processor power, disk I/O, low 
speed CPU, low memory capacity) and APP software bugs
●
●User behavior—how the user is interacting with the device and the client application through 
which they are watching the content (i.e., do they have a lot of applications open?)
In order to optimize application performance and user centric QoE on a packet network, QoE 
contributing factors like packet loss and delay need to be controlled and optimized. As in the 
case for voice/data application, packet loss and delay can have severe impact on TCP/
UDP‐based voice/data application QoE. Application response degrades sharply as the number 
of flows increases.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
780
Network KPIs are more and more concerned by the customer, such as RRC and E‐RAB establish, 
retainablity, and handover success rate. Worst cells need to be monitored and treated continuously. 
This part is structured to show how the engineers analyze signaling and explain the results to 
better understand and protect the LTE system from any network performance in the future.
Signaling messages to be traced over the specified interfaces for specific UEs. LTE signaling 
monitor captures mass data from customer live network through the interface Uu, S11, S1‐MME, 
S1‐U, S6a, SGs, and make collections of the responding KPIs, and analysis on collected data in 
each interface to identify problematic areas.
●
●Uu interface will monitor RRC connection setup procedure to spot RF issues.
●
●S11 interface will monitor creation session procedure to spot the SGW/PGW issues.
●
●S1‐MME and Uu interface will co‐monitor bearer setup procedure and initial context setup 
procedure to spot the eNB issues.
●
●S1‐U interface will monitor GET request message and the first PDU to spot the application 
server issues.
●
●S6a interface will monitor location update procedure to spot the HSS issues.
From above interfaces, the signalings will be analyzed and the below KPIs can be acquired as 
shown in Figure 18.1, attach failure ratio, service request failure ratio, create session failure 
ratio, dedicated bearer creation failure ratio, modify bearer failure ratio, handover failure ratio, 
and location/periodic–based TAU failure ratio, and so on.
The control plane traffic model is based on counting signaling messages over each interface 
to/from NE, use message counts to derive message rate per procedure and calculate the 
weighted average of message rate. Making an assumption of the average message size per interface, 
the control message throughput per users and interface can be derived. Message count, message 
rate, and throughput can be scale by the number of subscribers. Figure 18.2 provide signaling 
message estimates associated with the most common LTE events/procedures in a live 
network.
18.1  ­S1‐AP Signaling
There are three important interfaces to be analyzed for the network optimization, Uu, X2, and 
S1. Uu (RRC) and X2 signaling have been discussed much more, and in this part, S1 is the key 
point in signaling analysis. The main purpose of the S1 interface is to provide connectivity 
between eNB and MME through control plane protocols including NAS signaling.
18
Signaling‐Based Optimization

Signaling-Based Optimization
781
The NAS protocol supports mobility management and session management of UE. S1‐AP is 
the application layer protocol between the eNB and the MME. S1 transport is based on a common 
IP network. The control plane is based on SCTP/IP transport protocols. S1AP Signalings are 
based on the 3GPP TS 23.401 and TS 36.413.
SAE bearer management
This function deals with SAE bearer setup, SAE bearer release and SAE bearer modify 
­procedure. The purpose of the SAE bearer setup procedure is to assign resources on Uu and S1 
for one or several SAE bearers and to setup corresponding SAE radio bearers for a given UE. 
The SAE bearer release procedure which can be eNB or MME initiated is to enable the release 
of already established SAE bearers for a given UE.
UE context management
This function deals with the setup and maintenance of UE context. There are three main func-
tions in this category: Initial context setup, UE context release request (eNB initiated) and UE 
context release (MME initiated). The initial context setup function supports the establishment of 
the necessary overall initial UE context including SAE bearer context, security context, handover 
restriction list, UE capability information, NAS‐PDU, etc. In addition to the setup of overall initial 
UE contexts, initial context setup function also supports the piggy‐backing of the corresponding 
NAS messages. Initial context setup is initiated by the MME. The UE context release request 
procedure is to enable the eNB or MME to release the UE‐associated logical S1‐connection.
S1 interface management
S1 interface management includes the S1 interface setup, reset procedure and error indication 
procedure etc.
Attach
Attach success rate
Session setup
success rate
PS call success rate
Paging success rate
Intra LTE-HO
success rate
IRAT-HO success
rate
Location based–
TAU success rate
Periodic –TAU
success rate
Session setup success
rate
UE context success rate
UE context success rate
RRC Setup
Paging
Tracking area update
Handover
Figure 18.1  Signaling categories.
X2 Handover
S1 Handover
Paging
Periodic TAU
TAU
RRC
Attach
0.00
5.00
10.00
15.00
20.00
25.00
30.00
35.00
34.39
21.52
% age
4.80
19.17
2.56
11.52
6.03
Signaling Load per Application
Figure 18.2  Signaling estimation of LTE procedures (example).
www.ebook3000.com

LTE Optimization Engineering Handbook
782
Mobility functions
Handover‐related and path switch request procedure are supported. Path switch procedure 
allows the switch of the downlink GTP tunnel toward a new GTP tunnel endpoint.
NAS signaling transport
The purpose of the NAS transport procedure is to carry UE–MME signaling over the S1 
Interface. The NAS messages are not interpreted by the eNB, and the procedure may use an 
existing UE‐associated logical S1‐connection. The NAS messages are transported in an IE of 
the initial UE message, DL/UL NAS transport messages.
Paging
This functionality provides the EPC the capability to page the UE.
The above S1‐AP procedures are shown in Table 18.1.
The lists of S1‐AP messages are shown in Table 18.2.
It is worth mentioning that the MME UE S1AP ID uniquely identifies the UE association over 
one S1 interface toward a eNB within the MME. MME UE S1AP ID is allocated by MME front end 
on reception of a initial UE message and is unique on whole MME. S1AP protocol (Initial context 
setup) and an example of cell/S1 throughput for 20MHz bandwidth LTE are shown in Figure 18.3.
18.1.1  NAS signaling
NAS consists of the session management (SM) and mobility management (MM) layers. 
Functions performed by NAS messages include mobility management for idle UEs, UE authentication, 
EPS bearer management, configuration and control of security, paging initiation for idle UEs, 
and so on.
For better understanding NAS signaling, EMM, ECM, and ESM states should be known, 
which are depicted in Figure 18.4.
To establish the NAS signaling connection when the UE is in EMM‐idle mode and needs 
to transmit an initial NAS message, the UE requests the lower layer to establish a RRC 
­connection. In this request to the lower layer the NAS provides to the lower layer the RRC 
establishment cause and the call type. Initial NAS messages include attach request, detach 
request, tracking area update request, service request, and extended service request as shown 
in Table 18.3.
Table 18.1  S1‐AP procedures.
SAE bearer  
management
SAE bearer setup
Handover 
management
HO preparation
Management
reset
SAE bearer release
HO resource  
allocation
error indication
SAE bearer modify
HO notification
S1 setup
UE context  
management
Initial context setup
Patch switch request
S1 CDMA2000 
Tunneling
UE context release  
eNB initiated
HO cancellation
UE capability 
info indication
UE context release  
MME initiated
eNB status transfer
NAS signaling 
transport
UE context 
modification
MME status transfer
Paging

Signaling-Based Optimization
783
For the routing of the initial NAS message to the appropriate MME, the UE NAS provides the 
lower layers with either the S‐TMSI or the registered globally unique MME identifier 
(GUMMEI) that consists of the PLMN ID, the MME group ID, and the MME code.
18.1.2  Inactivity Supervision
User inactivity supervision needs to be focused due to it impacts the user perception strongly. 
User inactivity supervision and statistics by signaling is an efficient way in LTE.
When user inactivity is detected, the eNB requests the MME to release the UE context in the 
eNB, by sending the UE context release request message, with the cause “user inactivity,” to 
the MME. The MME informs the SGW that the UE is not available for DL traffic by sending 
Table 18.2  S1‐AP messages.
Context Management Messages
    SAE BEARER MODIFY RESPONSE
    INITIAL CONTEXT SETUP REQUEST
    SAE BEARER RELEASE COMMAND
    INITIAL CONTEXT SETUP RESPONSE
    SAE BEARER RELEASE COMPLETE
    INITIAL CONTEXT SETUP FAILURE
    SAE BEARER RELEASE REQUEST
    UE CONTEXT RELEASE REQUEST
Management Messages
    UE CONTEXT RELEASE COMMAND
    RESET
    UE CONTEXT RELEASE COMPLETE
    RESET ACKNOWLEDGE
    UE CONTEXT MODIFICATION REQUEST
    ERROR INDICATION
    UE CONTEXT MODIFICATION RESPONSE
    S1 SETUP REQUEST
    UE CONTEXT MODIFICATION FAILURE
    S1 SETUP RESPONSE
Handover Signaling Messages
    S1 SETUP FAILURE
    HANDOVER REQUIRED
S1 CDMA2000 Tunneling Messages
    HANDOVER COMMAND
    DL S1 CDMA2000 TUNNELING
    HANDOVER PREPARATION FAILURE
    UL S1 CDMA2000 TUNNELING
    HANDOVER REQUEST
UE Capability Message (UE Capability INFO 
INDICATION)
    HANDOVER REQUEST ACKNOWLEDGE
Paging Messages (PAGING)
    HANDOVER FAILURE
NAS Transport Messages
    HANDOVER NOTIFY
    INITIAL UE MESSAGE
    PATH SWITCH REQUEST
    DOWNLINK NAS TRANSPORT
    PATH SWITCH REQUEST ACKNOWLEDGE
    UPLINK NAS TRANSPORT
    PATH SWITCH REQUEST FAILURE
    NAS NON DELIVERY INDICATION
    HANDOVER CANCEL
    Authentication
    HANDOVER CANCEL ACKNOWLEDGE
    Attach/Detach
    eNB STATUS TRANSFER
    TAU
    MME STATUS TRANSFER
    Paging
SAE Bearer Management Messages
    Service Request
    SAE BEARER SETUP REQUEST
    UE Requested PDN Connectivity Procedure
    SAE BEARER SETUP RESPONSE
    Dedicated EPS Bearer Context Activation
    SAE BEARER MODIFY REQUEST
    Dedicated EPS Bearer Context Release
www.ebook3000.com

LTE Optimization Engineering Handbook
784
Throughput
Cell peak throughput in an unloaded network (e.g. 150 Mbps)
Busy Hour
Time
eNB maximum throughput in a loaded network (~100 Mbps)
Average S1 signaling load 
(22 kbps)
S1 signaling load peak ( 250 kbps)
Target Average Rate (~2 Mbps)
eNB busy hour average throughput (~50 Mbps)
Figure 18.3  S1AP protocol and Cell/S1 throughput for 20MHz bandwidth LTE.
Default bearer, UE context, IMSI,
GUTI, TA-list
EMM registered
ESM active
PDN connection exist, IP-address,
APN, QoS.
One default and possible one or more
dedicated bearer
S11 IP and TEID, S5 IP and TEID
S1u IP and TEID
Possible for data transfer (payload)
ESM inactive
No PDN connection
EPS bearer
established
The last EPS
bearer released
Service request
ECM Idle
EMM deregistered
No UE context
Attach
Detach
No NAS signalling established, TAU
Timeout in eNB
ECM connected
NAS signalling established
Figure 18.4  EMM, ECM, and ESM states.

Signaling-Based Optimization
785
the release access bearers request message to the serving GW. Then, the SGW acknowledges 
the information with the release access bearers response message. The MME requests the eNB 
to release the S1 UE context, by sending the UE context release command message. The release 
of the UE context is acknowledged by the eNB by sending the UE context release complete 
message to the MME (before or after releasing the RRC connection). Finally, the eNB releases 
the RRC connection (Figure 18.5).
18.1.3  UE signaling Management
Besides users preferences and usability, from a performance perspective, there are some differences 
in how applications behave toward the network, as: how much signaling they generate, how 
much payload they transfer. These factors will impact the network performance.
The length of idle timer will impact on the terminal behavior and network signaling load as 
shown in Figure 18.6. The shorter the idle timer, the more service requests, and the less handover 
behavior, and vice versa.
From the analysis of the current network, it is found that 80% of the signaling is coming from 
service request, paging and S1 release messages. Counting Service Requests is a good measure 
of load impact for RAB handling procedures, as each service request message there is an S1 
release, and each successful paging requires a service request message. So, cortrol the number 
of service request messages is the key.
Besides service request message, attach signaling is also important to monitor. Excess attach 
request messages are allowed to be automatically dropped in extreme scenarios in a live net-
work. MME can configure the allowed attach request rate. When reaching the maximum 
threshold, the subsequent attach request will be discarded. Attach throttling can control the 
Table 18.3  NAS procedure.
NAS procedure
RRC establishment cause (according 3GPP TS 36.331)
Call type
Attach/Detach
MO signaling
“originating signaling”
TA Update
Service Request
If a Service Request is to request user plane radio resources, 
the RRC establishment cause shall be set to MO data.
“originating calls”
If a Service Request is to request resources for UL signaling, 
the RRC establishment cause shall be set to MO data.
“originating calls”
If a Service Request is a response to paging where the CN 
domain indicator is set to “PS”, the RRC establishment cause 
shall be set to MT access.
“terminating calls”
If a EXTENDED Service Request has service type set to 
“mobile originating CS fallback or 1xCS fallback”, the RRC 
establishment cause shall be set to MO data.
“originating calls”
If a EXTENDED Service Request is a response to paging for CS 
fallback, service type set to “mobile terminating CS fallback or 
1xCS fallback”, the RRC establishment cause shall be set to MT 
access.
“terminating calls”
If a EXTENDED Service Request has service type set to 
“mobile originating CS fallback emergency call or 1xCS 
fallback emergency call,” the RRC establishment cause shall be 
set to Emergency call.
“emergency calls”
www.ebook3000.com

LTE Optimization Engineering Handbook
786
amount of signaling and avoid initiated signaling storm toward HSS under special scene, avoid 
HSS overloading and affect the overall system.
In addition, signaling analysis can help the operators to find those terminals that produced a 
large number of signalings (include non‐3GPP, or malicious terminal). That type of terminals’ 
IMSI and IMEI will be recorded in MME/SGW log file. To each UE granularity, the eNB will 
control the abnormal UEs, and excessive signaling message will be discarded.
18.2  ­Signaling radio bearers
Signaling radio bearers (SRBs) are defined as radio bearers that are used only for the transmission 
of RRC and NAS messages. More specifically, the following three SRBs are defined as shown in 
Table 18.4: SRB0 is for RRC messages using the CCCH logical channel. SRB1 is for RRC 
0
0
30
Service request, SR
1/BH/SAU
1/BH/SAU
Handover, HO
–75%
60
120
0
Op1
10s
20s
61s
61s
Op2
Op3
Op4
HO
SR
s
10
20
30
40
Figure 18.6  Idle timer versus service request/handover.
Figure 18.5  RRC connection release due to user inactivity.
UE
RRC_CONNECTED
4. GTPCv2: Release Access Bearers
Response (S11 MME GTP-C TEID)
5. S1AP: UE Context Release Command
6. S1AP: UE Context Release Complete
7. RRC: Connection Release
RRC_IDLE
eNB
MME
SGW
1. User Inactivity Timer
2. S1AP: UE Context Release
3. GTPCv2: Release Access Bearers Session
Cause: User Inactivity
Request (S11 SGW GTP-C TEID)

Signaling-Based Optimization
787
messages as well as for NAS messages on the DCCH only prior to the establishment of SRB2. 
SRB2 is for NAS messages, using DCCH logical channel. SRB2 has a lower‐priority than SRB1 
and is always configured by LTE after security activation.
In downlink, piggybacking of NAS messages is used only for one dependant (i.e., with joint 
­success/failure) procedure: bearer establishment/modification/release. In uplink NAS message 
piggybacking is used only for transferring the initial NAS message during connection setup. Once 
security is activated, all RRC messages on SRB1 and SRB2 are integrity protected and ciphered by 
PDCP. NAS independently applies integrity protection and ciphering to the NAS messages.
LTE signaling union analysis mainly involvs RRC signaling, NAS signaling, S1‐AP signaling, 
and IMS signaling. This is the best way to spot and demarcate the issues.
Table 18.4  SRB.
SRB
Direction
RRC Message
SRB 0 (CCCH)
Transparent RLC Mode
Downlink
RRC Connection Setup
RRC Connection Reject
RRC Connection Re‐establishment
RRC Connection Re‐establishment Reject
Uplink
RRC Connection Request
RRC Connection Re‐establishment Request
SRB 1 (DCCH)
Used for RRC and NAS messages
Acknowledged RLC Mode
Downlink
RRC Connection Reconfiguration
RRC Connection Release
Security Mode Command
UE Capability Enquiry
DL Information Transfer (if no SRB2)
Mobility from EUTRA Command
Handover from EUTRA Preparation Request
CS Fallback Parameter Response CDMA2000
Counter Check
Uplink
RRC Connection Setup Complete
Security Mode Complete
Security Mode Failure
RRC Connection Reconfiguration Complete
RRC Connection Re‐establishment Complete
Measurement Report
UE Capability Information
UL Information Transfer (if no SRB2)
UL Handover Preparation Transfer
CS Fallback Parameters Request CDMA2000
Counter Check Response
SRB 2 (DCCH)
Used for low‐priority NAS messages
Downlink
DL Information Transfer
Uplink
UL Information Transfer
www.ebook3000.com

LTE Optimization Engineering Handbook
788
18.3  ­Signaling Storm
Signaling traffic mainly determined by app usage, radio settings, terminal behavior (e.g., fast 
dormancy). In general, fast dormancy and always‐on applications like instant messaging (IM) 
and social networking services, and so on, are popular but also generates a heavy signaling load. 
Typically, the statistics from eNBs are collected in 15min intervals containing sums of counters 
over the period. Each eNB has limited signaling load capacity given, for example, in terms of 
call setups per second or control plane actions per second. If the signaling load capacity is 
exceeded then the call setup success rate or dropped call rate degrades (Figure 18.7).
To better solve the challenges brought by smartphones, operators need to plan their ­networks 
properly, and enhance the ability in signaling process. When LTE signaling overloading hap-
pened, the MME and SGW signaling loading should be checked. To relieve the signaling impact 
from smartphones, operators will use signaling reduction and control features include smart 
and adaptive paging, selective service request handling at Multi‐RAB, UE signaling control, 
dynamic TAI List, and attach throttling.
18.4  ­Signaling Troubleshooting Method
Based on the signaling, LTE network quality analysis system will be able to achieve a network 
integration indicators monitoring as shown in Table 18.5, to realize a multi‐dimensional analysis 
(i.e., scene perspective, user level applications) that can be achieved GIS display and detailed call 
record export for real time, as well as identify the user abnormal events: IRAT interoperability, 
dropped, unable to make a phone call, fumble call, weak coverage, the user out of the service.
18.4.1  Attach Failure
The attach procedure in LTE/EPS is quite similar as the GPRS attach in 2G/3G. It brings the UE 
from EMM_deregistered state to EMM_registered. In addition to that the procedure also 
Application
behavior
Internet
Application
behavior
Device
behavior
Mobile
Network
Network
behavior
New usage
patterns
User
experience
Battery
Radio
resources
Signaling &
network resources
chatty
traffic
Trade-off between:
- Radio resources
- Signaling & network resources
- User experience (latencies)
- Battery efficiency
Application
server
Figure 18.7  Signaling load.

Signaling-Based Optimization
789
Table 18.5  Highlight KPIs/KQIs.
KPI name
Description
1
IMSI of caller/callee
International Mobile Subscriber Identity of caller/callee
2
IMEI of caller/callee
International Mobile Station Equipment Identity of caller/callee
3
Cell ID/MCC/MNC/TAC of 
caller/callee
Cell ID/mobile country code/mobile network code/tracking 
area code of caller/callee
4
Call setup time
Time between requesting a connection by the inviting user and 
receiving a positive response from the called party (e.g., SIP 
INVITE ‐ > SIP 200 OK)
5
Call setup requests
Number of call setup requests
6
Call setup success rate
A proportion of successful call setup requests and all call 
establishment attempts
7
Drop call
Number of abnormal call termination
8
Successful call
Number of successful calls
9
Call drop rate
A proportion of dropped calls and all successfully 
established calls
10
Call release cause
Indication of the causes of call release
11
Successful registration
Number of successful SIP registrations
12
Registration request
Number of SIP registration attempts
13
SIP registration success rate
A proportion of successful registrations and all registration 
attempts
14
Number of SIP error messages
Number of SIP messages that have errors
15
Number of SIP messages sending
Number of SIP messages that haven been sent
16
SIP error rate
A proportion of SIP Error messages and all SIP messages
17
SIP error cause
indication of causes when SIP messages have errors
18
SIP reply code
SIP reply code
19
Voice/audio codec and 
mode‐set
Negotiated codec and mode‐set to be used in the call, e.g. 
AMR‐NB, AMR‐WB, etc.
20
Voice average codec bitrate
Voice average encoding bitrate in kbps
21
UE type of caller/callee
UE type, e.g. iPhone5, Galaxy S4, Android, IOS, etc.
22
RAT type/bearer/technology
the ratio access technology, e.g. UTRAN, EUTRAN, 
GERAN, etc.
23
MOS (min/max/avg)
measurement of end‐to‐end voice/speech quality, e.g., based on 
PESQ, POLQA.
24
RTP packet delay (min/
max/avg)
packet‐to‐packet delay
25
RTP packet jitter (min/max/avg)
Inter packet jitter
26
RTP packet loss rate
A proportion of not‐received packets and all sent packets
27
RTP Bandwidth
negotiated RTP bandwidth
28
Throughput
Data throughput relating to VoLTE (kbps,Mbps)
29
Number of DL/UL VoLTE data
Number of VoLTE data (bytes) in DL/UL direction
30
Call duration (min/max/avg)
VoLTE call duration (s)
31
ARP
Allocation and retention priority ‐‐ > Priority level/PVI/PCI
32
QoS/QCI
QoS or QoS class identifier allocated
(Continued)
www.ebook3000.com

LTE Optimization Engineering Handbook
790
establishes the default SAE bearer for the UE and thus allocates the required IP addresses for 
the subscriber in the external packet data network.
There are seven steps in the attach procedure as shown in Figure 18.8: random access, initial 
NAS message, NAS security, S1 initial setup, RRC security + UE capability, SRB2/DRB setup, 
and NAS reply. In a live network, attach failure categories include (possible reject causes are 
defined within 3GPP TS 24.301):
●
●EPS Services not allowed
●
●Non‐EPS Services not allowed
●
●EPS services not allowed in this PLMN
●
●Unknown or missing APN(MME‐5‐GW)
●
●Unknown PDN address or PDN type
●
●Service option not supported
●
●Request service option not supported
The interface of S1‐MME will associate with S6A (MME to HSS diameter signaling) and S11 
(MME to SGW) interface, to spot the failure reason. S6A signaling analysis includes update 
location request and update location answer. According to the 3GPP standard attach failure 
cause value, the problem can be demarcated. The main network reasons cause value impact the 
S1 attach success rate are #111, #3, and #0. For #33 cause value, the reason is that the user‐
initiated release message, it is suggested to investigate the wireless side combined with user 
data investigation. For #111 cause value, the reason is that the eNB does not respond in time, it 
is needed to investigate the wireless side.
Through LTE signaling analysis, it is able to output 4G terminals’ MSISDN and IMSI infor-
mation, which frequent attempts to access the 4G network but failure, and selected the the-
matic analysis of the target user: the reasons value of the attach failure is #7 or #15. To realize 
batch acquisition of the users automatically, to determine whether the user had replaced the 
USIM card and whether the 4G function was on and other information. All of this information 
will be automatically pushed to the market for targeted marketing (Figure 18.9).
Table 18.5  (Continued)
KPI name
Description
33
APN
Access point name
34
ESM cause code
EPS session management cause code
35
eNB IP, MME IP, S‐GW IP
eNB IP address, MME IP address, S‐GW IP address
36
e‐RAB ID
e‐RAB ID
37
EPS bearer ID
EPS bearer ID
38
GBR UL/DL, MBR UL/DL
GBR uplink/downlink, MBR uplink/downlink
39
EPS attach type
EPS attach type, e.g. combined EPS/IMSI at
40
EPS network feature support
EPS network feature support, e.g., IMS VoPS to verify if user 
has VoLTE provisioned
41
MS network capability
MS network capability, e.g., SRVCC to GRAN/UTRAN capability
42
Voice domain preference
Voice domain preference, e.g., IMS PS voice preferred, cs voice 
as secondary
43
Attach time
S1 attach time that has been used to successfully attach to EPS 
and ready to make a call

EMM deregistered,
ECM_idle and
RRC idle state
RRC connected state
Attach request
embeded in RRC
conn setup complete
Attach request
embeded in initial
UE nessage and S1
signalling setup
ECM_connected
and EMM
registered state
INITIAL UE MESSAGE (Attach Request)
INITIAL CONTEXT SETUP REQUEST
(EPS bearers, Attach Accept, Security)
INITIAL CONTEXT SETUP RESPONSE
System Information*
RRC CONNECTION REQUEST
RRC CONNECTION SETUP
RRC SECURITY MODE COMMAND
.RRC SECURITY MODE COMPLETE
RRC CONNECTION SETUP COMPLETE (Attach Request)
Random Access Preamble
Random Access Response
RRC CONNECTION RECONFIGURATION (Bearer Setup)
RRC CONNECTION RECONFIGURATION COMPLETE
RRC DL INFORMATION TRANSFER (Authentication Request)
RRC UL INFORMATION TRANSFER (Authentication Response)
DL NAS TRANSFER (Authentication)
UL NAS TRANSFER (Auth. Response)
RRC DL INFORMATION TRANSFER (Security Mode Command)
RRC UL INFORMATION TRANSFER (Security Mode Complete)
DL NAS TRANSFER (NAS SMC)
UL NAS TRANSFER (NAS SMC)
RRC UL INFORMATION TRANSFER (Attach Complete))
UL NAS TRANSFER (Attach Complete)
RRC DL INFORMATION TRANSFER (UE Identity Request)
RRC UL INFORMATION TRANSFER (UE Identity Response)
DL NAS TRANSFER (UE Identity Req)
UL NAS TRANSFER (UEid Response)
RRC UE CAPABILITY ENQUIRY
RRC UE CAPABILITY iNFORMATION
UE CAPABILITY INFO INDICATION
(UE Radio Capability)
UE CONTEXT RELEASE COMMAND
RRC CONNECTION RELEASE
UE CONTEXT RELEASE COMPLETE
UE
eNB
MME
Figure 18.8  Attach procedure.
www.ebook3000.com

Attach request
Y
N
N
N
N
N
N
ESM failur (#19)
PLMN not allowed
(#11)
No suitable cells in
tracking area (#15)
EPS service and non-EPS
service not allowed (#8)
Illegal UE (#3)
Network failure (#17)
No response form HLR
Unknown subs in HLR
EPS Subs Unknown
No response from UE
Wrong K/OP
Illegal UE
Unknown subs
EPS Subs Unknown
RAT not allowed
Roaming not allowed
No response from UE
Network failure (#17)
No suitable cells in
tracking area (#15)
EPS services and non-
EPS service not
allowed (#8)
Protocol error, unspecified.
DIAMETER_ERROR_USER_
UNKNOWN
DIAMETER ERROR UNKNOWN EPS
SUBSCIPTION
DIAMETER_ERROR_USER_UN
KNOWN
DIAMETER ERROR UNKNOWN
EPS SUBSCRIPTION
DIAMETER_ERROR_RAT_NO
T_ALLOWED
DIAMETER_ERROR_ROAMIN
G_NOT_ALLOWED
Authentication failure
DefaultBearer Creating Failed
S1-U Cause
S6A Cause
S11 Cause
Y
Y
Y
Y
Y
Authentication request
Authentication request
Authentication response
Location update request
Default bearer creation
Authentication response
Figure 18.9  S1 and S6A cause value.

Signaling-Based Optimization
793
MME updates the UE location with the HSS through S6A interface. The user name in the 
request is set to IMSI, the radio access technology is specified in the RAT type, the visited 
PLMN is also included in the message.
The HSS accesses the database and responds with user information to the MME. The aggre-
gate maximum bit rate (AMBR) occurs twice in the message, the first specifies the MBR for the 
default PDP context, the second specifies the data maximum data limit via the APN. APN 
configuration includes IP address of the PDN gateway and IP address assigned to the UE. For 
attach performance optimization, the parameters should be investigated in MME to HSS diam-
eter update location request and answer message are shown in Figure 18.10.
MME initiates the default route establishment by asking the SGW to create a GTP tunnel 
through S11 interface, the source is identified by the fully qualified endpoint identifier with the 
tunnel endpoint identifier (TEID) and the MME IP address. The IP address assigned to the UE 
is also included along with the downlink and uplink maximum data rates allowed at the APN 
level, and the TAI and ECGI (E‐UTRAN cell group identifier) information identify the current 
location of the user. For attach performance optimization, the parameters related with default 
bearer establishment are shown in Figure 18.11.
Figure 18.12 gives signaling capturing during default bearer setup procedure from S1‐MME, 
S5, and Gx interfaces, includes create session request message and initial context setup request 
message, and so on.
For dedicated bearer setup failure, the 3GPP standards give the following failure categories 
to spot the issue.
Dedicated bearer creation failure categories (ESM cause value) include: #26 insufficient 
resources, #31 request rejected, unspecified, #41 semantic error in the TFT operation, #42 
syntactic error in the TFT operation, #43 invalid EPS bearer identity, #44 semantic error in 
packet filter, #45 syntactic error in packet filter, #95‐111 protocol error, or radio link failure.
Modify bearer failure categories (ESM value cause) include #26 insufficient resources, #30 
request rejected by serving GW/PDN GW, #33 request service option not subscribed, 
#34 ­service option temporarily out of order, #35 PTI already in use, #37 EPS QoS not accepted, #41 
Diameter update
location request
Visited
PLMN Id
EUTRAN
Realm
Host
IMSI
Realm
S6a interface
Application
Host
RAT type
User name
Destination
Origin
Application Id
MCC,
MNC
Diameter update
location answer
Access
restriction data
Subscriber status:
service granted
Aggregate
maximum bit rate
MSISDN
APN configuration
profile
Called
station Id
PDN
type
PDN GW
address
PDN GW
name
QCI
Served party
IP address
Charging 
characteristic
AMBR
Figure 18.10  MME to HSS diameter update location (S6A).
www.ebook3000.com

LTE Optimization Engineering Handbook
794
RAT
type
Sender F-TEID
for control
plane
PND
type
Bearer
MSISDN
TAI
ECGI
PGW S5/S9
address for
control
PDN IP
address
PDN
address
allocation
APN
GTP create session request
IMSI
MCC,
MNC,
TAC
MCC,
MNC,
ECI
IPV4/6
EUTRAN
ARP,QCI
TEID, MME IP address,
EPS bearer ID
TEID, PGW
IP address,
UE IP address, DL and
UL AMBR APN limit
SGW
Create session 
request sent
Create session
request received
Create session request failure
Figure 18.11  MME to SGW, default bearer establishment (S11).
Figure 18.12  Default bearer setup example.

Signaling-Based Optimization
795
semantic error in the TFT operation, #42 syntactic error in the TFT operation, #43 invalid EPS 
bearer identity, #44 semantic error in packet filter, #45 syntactic error in packet filter, #56 
­collision with n/w initiated request, #59 unsupported QCI value, #60 bearer handling not supported, 
#95‐111 protocol error, or radio link failure.
Create session failure categories include missing or unknown APN, GRE key not found, 
preferred PDN type not supported, PGW not responding, IE incorrect or missing, radio link 
failure, system failure, error in the TFT operation, error in packet filter, invalid message format, 
no user resource available, user authentication failed, or APN access denied, no subscription.
After above steps, the next step is initial context setup procedure initiated by MME to eNB 
through S1‐MME interface. This message from the MME is really a three‐in‐one that contains 
S1AP initial context setup request, attach accept (EMM) and activate default bearer request 
(ESM) message. The parameters related with initial context setup procedure are shown in 
Figure 18.13.
The MME responds with MME UE S1AP ID that was received from the eNB in the initial UE 
message. The message contains the maximum aggregate bit rate and default E‐RAB information. 
The security capabilities specify the encryption and integrity protection algorithm to be used 
for the UE session, which is shown in Figure 18.13a.
The attach accept message specifies that the attach has been successful, the related parameters 
as shown in Figure 18.13b. The T3412 timer specifies the maximum time between tracking 
area updates from the terminal. The TAI list in the message specifies the PLMN and the TAC 
SIAP context setup request
Encryption algorithm and
integrity protection algorithm
MME UE
S1AP ID
(a)
eNB UE
S1AP ID
eRABs
setup
DL and UL
AMBR
UE security
capability
Security
key
QCI, E-RAB MBR, E-RAB GBR,
GTP TEID, transport layer address
(b)
NAS attach accept
GUTI
GPRS
ready timer
T3412
EPS attach
result
TA list
MCC, MNC, MME group ID,
MME code, M-TMSI
(c)
Activate default bearer request
APN
PDN
address
EPS
bearer Id
EPS QoS
QCI, E-RAB MBR,
E-RAB GBR
Figure 18.13  S1AP initial context setup analysis.
www.ebook3000.com

LTE Optimization Engineering Handbook
796
for all the registered tracking areas. The message contains GUTI that uniquely identifies the 
UE with PLMN, MME Group, MMC code, and the M‐TMSI. The GPRS ready timer is included 
in the message, the UE will be transitioned to idle if no activity is detected for this period.
The activate default bearer request message shown in Figure 18.13 includes the EPS bearer id 
identifies the bearer that needs to be activated and QoS information.
Finally, the eNB sends the initial context setup response message to the MME, which con-
firms the establishment of the GTP tunnel on the S1‐U interface and complete the attach and 
default bearer activation procedure, and MME inform SGW about the eNB’s IP address and 
GTP TEID through modify bearer request.
18.4.2  Service Request Failure
Service request procedure is used when a UE in ECM‐idle state attempts to send user data or 
wants to send uplink signaling messages, or a paging from the network was received to reestab-
lish one or several EPS bearers. At this time, a UE packet transmit request listed below will 
trigger a UE service request message to the network if in idle state.
●
●UE IMS client periodic register
●
●UE APP polling
●
●The client APP detects IP socket to server down
●
●IOS/Android push notification service
There are two types of service request, UE initiated and network initiated. UE initiated, the 
service request procedure is initiated when the UE sends a service request message through the 
eNB to the MME. Network initiated which includes incoming data, incoming CSFB call, QoS 
updates, or simply network initiated detach.
Service request performance statistics can be got from OMC. Figure 18.14 shows the number 
of service requests per simultaneous attached user in busy hour in a live network. The example 
shows nearly 10 times more service requests for smartphones and tablets versus Symbian.
This OMC measurement also provides the ratio of unsuccessful S1 service request proce-
dures and the number of attempted S1 service request in the MME. The number of unsuccess-
ful S1 service request is incremented when a service reject message is sent (Figure 18.15).
Service request failure EMM cause values include: #7 EPS service not allowed, #9 UE identity 
can not be derived by the network, #10 implicitly detached, #11 PLMN not allowed, #35 
requested service option not authorized in this PLMN, #12 tracking area not allowed, #13 
roaming not allowed in tracking area, #18 CS domain not available, #15 no suitable cells in 
tracking area, #25 not authorized for this CSG, and #39 CS service temporarily, and so on.
18.4.3  S1/X2‐Based Handover
The S1(X2)‐based handover measurement provides the number of attempted and successful 
Intra‐MME handover procedures. Handover is triggered by the reception of S1 handover 
required message from the source eNB, and reception of S1 handover notify message from the 
target eNB, when the target tracking area is situated under an own MME.
Target cell identity is included in the S1 handover request message (in the source eNB to tar-
get eNB transparent container IE group). The S1 based handover failure cause values that has 
been identified as following:
●
●S1 message: handover cancel with cause “Failure in the radio interface”
●
●S1 message: handover cancel with cause “TRELOCprep expiry”
●
●S1 message: release request with cause “TRELOCoverall expiry”

Signaling-Based Optimization
797
●
●S1 message: release request with cause “Handover failure in the target system”
●
●S1 message: handover failure with cause “Handover not supported in target eNB”
●
●S1 message: handover failure with cause “No resources”
●
●S1 message: UE context release command with cause “successful handover”
For X2‐based handover troubleshooting, usually the GTP‐U/UDP/ID traffic for data for-
warding on the X2 user plane and the X2‐AP traffic on the control plane should be monitored. 
This measurement provides the number of attempted X2‐based handovers. The handover is 
triggered by the reception of S1‐AP path switch request message from the target eNB and sending 
of S1‐AP path switch request acknowledge message to the target eNB (Figure 18.16).
SP-GW
Service Request
Service Request Grant
SR FAIL
Figure 18.15  Service request failure 
measurement.
0
2
4
6
8
10
12
14
16
iPhone
Android SP
Galaxy S II
Blackberry
Symbian
PC
Android tab
iPad
0
2009,1
2
4
6
8
10
12
European operator 
service request
North America operator 
service request
2010,1
2011,1
2012,1
Figure 18.14  Service requests per simultaneous attached user in busy hour.
www.ebook3000.com

LTE Optimization Engineering Handbook
798
S1 handover failure categories usually include: congestion in target eNB, missing neighbor, 
radio link issue, problem with GTP, direct, indirect data forwarding, modify bearer failure or 
signaling failure from source and target eNB.
Signaling failure X2 handover failure categories usually includes radio link failure, target eNB 
congestion, signaling failure between source and target eNB, incorrect ERAB ID, UE context 
information error, or PLMN not supported by target eNB.
18.4.4  eSRVCC Failure
The message sequence for a successful SRVCC procedure is quite simple. It starts with the PS 
to CS request, running from the MME to the MSC via UDP transport. From a function point of 
view, this is very similar to a SRNS relocation request message and WCDMA to GSM handover 
request.
The MSC starts to setup radio resources, for the target GERAN/UTRAN call leg. When the 
resources are secured, the MSC replies with PS to CS response to the MME. The MME contacts 
the UE and orders the switch over to the target RAN node. After the UE has tuned into the 
GERAN/UTRAN network, the RAN node informs the MSC about the successful switch over.
The successful change of radio resources is reported from the MSC to the MME by sending 
PS to CS complete notification. The MME finally acknowledges the reception, with the PS to CS 
complete acknowledge.
For unsuccessful procedures, there are different mechanisms, to terminate the SRVCC pro-
cedure. If the MSC is not able to secure the radio resources or if there is any problem in the PS 
to CS request message, then the MSC can put an unsuccessful result code in the PS to CS 
response. In such a case no PS to CS complete procedure is executed, because MME does not 
order the UE to switch over. Instead the MME falls back to the LTE access or tries to initiate 
SRVCC to an alternative target RAN node.
If the UE fails to switch over to GERAN/UTRAN after MSC had sent PS to CS response, there 
is a timeout in the MSC. All radio resources are released and no PS to CS complete notification 
is sent. The MSC does not inform the MME about this case.
Instead it is assumed, that either the UE informs the MME about the failure or the MME can 
also determine by timeout, while waiting for the PS to CS complete notification, that switch 
over was not successful.
The MME has also the possibility to actively cancel an ongoing SRVCC procedure. This is 
done by sending PS to CS cancel notification message from MME to MSC as shown in 
Figure 18.17 (left). The MSC checks based on the IMSI, if there is an ongoing SRVCC procedure 
Before handover
S-GW + P-GW
MME
Source
eNB
Target
eNB
X2
= Data in radio
= Signalling in radio
= GTP tunnel
= GTP signalling
= S1 signalling
= X2 signalling
MME
MME
MME
S-GW + P-GW
S-GW + P-GW
S-GW + P-GW
Handover
preparation
Radio handover
Late path
switching
Figure 18.16  Handover procedure for troubleshooting.

Signaling-Based Optimization
799
and if the state of this procedure allows a fallback to LTE. If fallback is possible, then MSC 
returns PS to CS cancel acknowledge, with successful result and releases all resources of the 
related SRVCC procedure. If fallback is not possible (for example because switch over to 
GERAN/UTRAN is already performed), then MSC sends also PS to CS cancel acknowledge, 
but this time with an unsuccessful result indication.
When the SRVCC procedure is started, the parallel transaction between BSC/RNC and 
MSC server is started. The BSSMAP complete layer 3 information message or RANAP initial UE 
message can carry CM service request, location updating request and IMSI detach 
indication.
If a BSSMAP layer 3 information message or RANAP initial UE message is received from the 
target cell during an ongoing SRVCC procedure, and Sv‐Interface protocol PS to CS response 
has not been sent yet as shown in Figure 18.17 (right), then PS to CS response is sent with 
cause “handover/relocation failure” with target system. Then SRVCC procedure is aborted and 
the session transfer call leg is disconnected if SIP invite has already been sent.
When the eSRVCC failures are to be analyzed, SRVCC signaling and parallel transaction can 
be refer to Table 18.6.
MME
MSC
PS to CS Cancel Notification
PS to CS Request
PS to CS Cancel Acknowledge
PS to CS Response
PS to CS Complete Notification
PS to CS Complete Acknowledge
~
~
MME
MSC
SRVCC PS to CS Request
BSC/RNC
COMPLETE LAYER 3/
INITIAL UE Message
SRVCC PS to CS Response
Figure 18.17  eSRVCC failure procedure.
Table 18.6  SRVCC signaling and parallel transaction.
SRVCC PS to CS request 
message
sent across Sv interface from the MME to the target MSC server to initiate 
SRVCC handover.
SRVCC PS to CS response 
message
sent as a response to SRVCC PS to CS Request by the MSC server during 
SRVCC procedure for success or fail. Cause IE in SRVCC PS to CS Response 
indicates if the SRVCC PS to CS request has been accepted or not.
SRVCC PS to CS complete 
notification message
sent from MSC server to the source MME to indicate the SRVCC handover 
with CS domain has been successfully finished.
SRVCC PS to CS complete 
acknowledge message
sent as a response to SRVCC PS to CS Complete Notification.
SRVCC PS to CS cancel 
notification message
sent from the MME to the target MSC server to request the cancellation of 
an ongoing SRVCC handover.
SRVCC PS to CS cancel 
acknowledge message
sent as a response to SRVCC PS to CS Cancel Notification.
www.ebook3000.com

LTE Optimization Engineering Handbook
800
18.4.5  CSFB Failure
CSFB issues can also be found and solved by signaling trace, to spot the KPI, for example, fall-
back success rate, access success rate, paging success rate, CSFB establish success rate, CSFB 
establish delay, return success rate, and latency, and so on, to accelerate the improvement of 
CSFB service quality, enhance CSFB success rate. It is needed to find out the Top N worst cells 
that the paging and fallback failures happened during fallback procedure.
Through the analysis of LTE subscribers CSFB fallback and end to end signaling proce-
dure, the measurement report, the signaling of wireless/core network, and the interface of 
S1‐MME, SGs, S6a, A, and Iu‐CS interface will be associated and analyzed, the KPI as 
mentioned will be analyzed. The association analysis shall output the issues of 4G‐2G 
neighbor configuration, the user data, UE positioning, TA/LA planning and device prob-
lems, support network planning, optimization and adjustment, terminal release, CSFB 
user perception of optimization. The cause of some of the CSFB call abnormal event is 
shown in Table 18.7.
Take paging signaling asn an example, if there is no paging response message, the analyzer 
will extract the user information accordingly, spot the cell at that time around paging events 
and the network interactive information (caller and callee, and attach/TAU procedure hap-
pened or not), find out the reason of paging failure. Through wireless paging signaling pro-
cess analysis, the reasons of paging failure include poor coverage, interference, CSFB 
related parameters, paging congestion, and unreasonable 3G and 4G interoperability 
parameters.
Through SGs interface signaling, it can monitor the following procedure, like pagings for 
CSFB and short message, combined location update, number of EPS attached subscribers, 
number of first/repeated page attempts/responses for CS over the SGs‐interface, number of 
paging failures received for CS over the SGs‐interface due to expiry of MME timer or paging 
reject or UE unreachable, number of (un)successful CS fallbacks for MT CS calls. SGs interface 
signaling analysis procedure is shown in Figure 18.18.
Table 18.7  CSFB call abnormal event.
Signaling
IE
cause
Attach accept
EPS attach result
0 0 1 EPS only
Additional 
update result
0 1 CS Fallback not preferred(when EPS attach result is 010, 
combined EPS/IMSI attach)
1 0 SMS only(when EPS attach result is 010, combined EPS/IMSI attach)
EMM cause
0 0 0 1 0 0 0 0 MSC temporarily not reachable
Attach reject
EMM cause
#12 (tracking area not allowed)
#14 (EPS services not allowed in this PLMN)
……
Location 
update reject
Reject cause
#4 IMSI unknown in VLR
#12 Location Area not allowed
……

Signaling-Based Optimization
801
In the live network, the main influence factor of CFSB success rate is the 2/3G network 
­performance indicator, for the 2/3G cell that has good fallback success rate but with bad access 
success rate, needs to investigate on the 2/3G network. According to the abnormal events, seg-
ment analysis of the whole CSFB procedure should be proceeded and carried on the problem 
location combined with the network side signaling. Each CSFB procedure needs to be focused 
on the below signaling shown in Table 18.8.
Table 18.8  CSFB procedure and associated signalings.
Procedure
Associated signalings
Combined attach NAS: Attach request/attach accept/attach reject
SGsAP: Location update request/Location update accept/location update reject
S1AP: Initial context setup request/Initial context setup response
NAS: TAU request/TAU accept/TAU reject
originate
/terminate
NAS: Extended service request
SGsAP‐Paging request
S1AP: UE context modification request with CSFB 
indicatior
NAS: Paging/CS service 
notification
S1AP: UE context modification response/failure
NAS: Extended service request
RRC: RRC connection release
SGsAP‐Paging reject
S1AP: SI UE context release request
RRC: RRC connection release
S1AP: SI UE context release command
S1AP: SI UE context release complete
NAS: service reject
Fallback
L3: CM service request
2/3G call setup
alerting
Return
Fast return or reselection TAU
Accquire reminding short
message from SGs record
Spot the worst Top N
cell
Paging loss reasons 
subdivision
output
output
output
The user information of
IMSI, IMEI, ECI
The No. of reminding short
messages, involving the 
number of users, and
paging loss ratio
Statistics on each of the 
reasons for the paging failure
of the cells (paging refused,
the user not reached, etc)
Find out the issued
cell (exclude the 
problem caused by
terminal)
Figure 18.18  SGs interface signaling analysis procedure.
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
802
LTE Timers
Following table is from 36.331 7.3 Timers (Informative)
Timer
Start
Stop
At expiry
T300
Transmission of 
RRCConnectionRequest
Reception of RRC 
ConnectionSetup or 
RRCConnectionReject message, 
cell re‐selection and upon 
abortion of connection 
establishment by upper layers
Perform the actions as 
specified in 5.3.3.6
T301
Transmission of 
RRCConnection 
ReestabilshmentRequest
Reception of RRCConnection 
Reestablishment or 
RRCConnection 
ReestablishmentReject message 
as well as when the selected cell 
becomes unsuitable
Go to RRC_IDLE
T302
Reception of 
RRCConnectionReject while 
performing RRC connection 
establishment
Upon entering RRC_
CONNECTED and upon cell 
re‐selection
Inform upper layers about 
barring alleviation
T303
Access barred while 
performing RRC connection 
establishment for mobile 
originating calls
Upon entering RRC_
CONNECTED and upon cell 
re‐selection
Inform upper layers about 
barring alleviation
T304
Reception of RRCConnection 
Reconfiguration message 
including the MobilityControl 
Info or reception of 
MobilityFromEUTRA 
Command message including 
CellChangeOrder
Criterion for successful 
completion of handover to 
EUTRA or cell change order is 
met (the criterion is specified in 
the target RAT in case of 
inter‐RAT)
In case of cell change order 
from E‐UTRA or intra E‐UTRA 
handover, initiate the 
RRCconnection re‐
establishment procedure; In 
case of handover to E‐UTRA, 
perform the actions defined in 
the specifications applicable for 
the source RAT.
T305
Access barred while 
performing RRC connection 
establishment for mobile 
originating signaling
Upon entering RRC_
CONNECTED and upon cell 
re‐selection
Inform upper layers about 
barring alleviation
Appendix

Appendix
803
Timer
Start
Stop
At expiry
T306
Access barred while 
performing RRC connection 
establishment for mobile 
originating CS fallback
Upon entering RRC_
CONNECTED and upon cell 
re‐selection
Inform upper layers about 
barring alleviation
T310
Upon detecting physical layer 
problems i.e. upon receiving 
N310 consecutive out‐of‐sync 
indications from lower layers
Upon receiving N311 consecutive 
in‐sync indications from lower 
layers, upon triggering the 
handover procedure and upon 
initiating the connection re‐
establishment procedure
If security is not activated: go 
to RRC_IDLE
else: initiate the connection 
re‐establishment procedure
T311
Upon initiating the 
RRCconnection 
reestablishmentmprocedure
Selection of a suitable E‐UTRA 
cell or a cell using another RAT.
Enter RRC_IDLE
T320
Upon receiving t320 or upon 
cell (re)selection to E‐UTRA 
from another RAT with 
validity time configured for 
dedicated priorities (in which 
case the remaining validity 
time is applied).
Upon entering RRC_
CONNECTED, when PLMN 
selection is performed on 
request by NAS, or upon cell 
(re)selection to another RAT (in 
which case the timer is carried 
on to the other RAT).
Discard the cell reselection 
priority information provided 
by dedicated signaling.
T321
Upon receiving measConfig 
including a reportConfig with 
the purpose set to reportCGI
Upon acquiring the information 
needed to set all fields of 
cellGlobalId for the requested 
cell, upon receiving measConfig 
that includes removal of the 
reportConfig with the purpose 
set to reportCGI
Initiate the measurement 
reporting procedure, stop 
performing the related 
measurements and remove the 
corresponding measId
Timer Cases
The following parameters are related to RLF detection and recovery. 
Parameter
Range
Description
Default
n310
n1 (0), n2 (1), n3 (2), n4 (3), 
n6 (4), n8 (5), n10 (6),n20 (7)
This is the maximum number of consecutive “out 
of sync” indications received from lower layers.
n10
n311
n1 (0), n2 (1), n3 (2), n4 (3), 
n5 (4), n6 (5), n8 (6),n10 (7)
Maximum number of consecutive “in‐sync” 
indications received from lower layers. If layer 1 
in UE detects N311 consecutive in‐sync 
indicators while T310 is running, UE stops T310. 
If layer 1 in UE detects no or less than N311 
consecutive in‐synch indications until T310 is 
expired, UE starts RRC connection 
reestablishment procedure (radio link failure).
n1
t304IntraLte
50 ms (0), 100 ms (1), 
150 ms (2), 200 ms (3), 
500 ms (4), 1000 ms (5), 
2000 ms (6)
If the RRC connection reconfiguration message 
includes the mobilityControlInfo and the UE is 
able to comply with the configuration included in 
this message, the UE shall start timer T304. Timer 
T304 supervises the successful completion of a 
handover or cell change. If T304 expires prior to 
the UE successfully completing the random access 
procedure on the target cell, the UE initiates the 
RRC connection re‐establishment procedure.
1000 ms
(Continued)
www.ebook3000.com

Appendix
804
Parameter
Range
Description
Default
t301
100 ms (0), 200 ms (1), 
300 ms (2), 400 ms (3), 
600 ms (4), 1000 ms (5), 
1500 ms (6), 2000 ms (7)
Upon finding a suitable cell on an LTE frequency, the 
UE stops the timer T311, starts the timer T301 and 
initiates a contention based random access 
procedure to enable the 
RRCConnectionReestablishmentRequest message to 
be sent. In the 
RRCConnectionReestablishmentRequest message, 
the UE includes the identity used in the cell in which 
the failure occurred, the identity of that cell, a short 
message authentication code and a cause. Timer 
T301 supervises the RRC connection 
reestablishment procedure.
200 ms
t310
0 ms (0), 50 ms (1), 100 ms 
(2), 200 ms (3), 500 ms (4), 
1000 ms (5), 2000 ms (6)
Timer T310 supervises the recovery from physical 
layer problems. If Layer 1 in UE detects N310 
consecutive out‐of‐sync indicators, T310 is started
2000 ms
t311
1000 ms (0), 3000 ms (1), 
5000 ms (2), 10000 ms 
(3),15000 ms (4), 20000 ms 
(5), 30000 ms (6)
Timer T311 supervises the RRC connection 
reestablishment. To attempt RRC connection re‐
establishment, the UE starts a timer known as 
T311 and performs cell selection
3000 ms
The following parameters are related to retainability and accessibility. 
Area
Timer Name
Value
Units
Description
Retainability
N310
20
no.
Maximum number of consecutive “out of sync” 
indications received from lower layers.
Retainability
T301
400
s/ms
Waiting time for RRC Connection Reestablishment or 
RRC Connection Reestablishment Reject after sending 
RRC Connection Reestablishment Request.
Retainability
T304
1000
ms
Timer for supervision of successful handover 
completion. For intraLTE handover, initiate the RRC 
connection re‐establishment procedure on timer 
expiration.
Retainability
T310
2000
s/ms
Waiting time for radio link failure.
Retainability
sec
The timer is started if radio bearer(s) that are associated 
with T314 exist of if only RRC connection exists. When 
the criteria for radio link failure are fulfilled.
Retainability/
Mobility
T311
3000
ms
Waiting time to find a suitable E‐UTRA cell where to 
perform RRC Connection Reestablishment, or a cell 
using another RAT.
Accessibility
N311
1
no.
Maximum number of consecutive “in‐sync” indications 
received from lower layers.
Accessibility
T300
600
ms
Timer for supervision of RRC Connection Setup.
Accessibility
T302
0
s
Waiting time at reception of RRC Connection Reject 
including the IE ‘wait time’. The value zero (0) means 
that a random waiting time set by the system is used.
Accessibility
T320
30
ms
Waiting time for cell reselection priority information 
provided by dedicated signaling.

Timer (EPS Mobile Management ‐ UE Side)
Following table comes from 24.301 ‐ 10.2 Timers of EPS mobility management (Table 10.2.1: EPS mobility management timers – UE side)
VALUE
STATE
CAUSE OF START
NORMAL STOP
ON EXPIRY
T3402
Default 
12 min. NOTE 1
EMM DEREGISTERED EMM 
REGISTERED
At attach failure and the 
attempt counter is equal to 5. 
At TAU failure and the 
attempt counter is equal to 5.
ATTACH REQUEST sent TAU 
REQUEST sent
Initiation of the attach or 
TAU procedure
T3410
15 s
EMMREGISTEREDINITIATED
ATTACH REQUEST sent
ATTACH ACCEPT received 
ATTACH REJECT received
Start T3411 or T3402
T3411
10s
EMM DEREGISTERED. 
ATTEMPTING TO‐ATTACH 
EMM REGISTERED. 
ATTEMPTING TO‐UPDATE
At attach failure due to lower 
layer failure, T3410 timeout 
or attach rejected. At TAU 
failure due to lower layer 
failure, T3430 timeout or 
TAU rejected.
ATTACH REQUEST sent TAU 
REQUEST sent
Retransmission of the 
ATTACH REQUEST or 
TAU REQUEST
T3412
Default 54 min. 
NOTE 2 NOTE 5
EMM REGISTERED
The timer is sent by the network to 
the UE in the ATTACH ACCEPT or 
TAU ACCEPT message.
In EMM‐REGISTERED, 
when EMM‐CONNECTED 
mode is left.
When entering state EMM 
DEREGISTERED or when 
entering EMM‐
CONNECTED mode.
Initiation of the periodic 
TAU procedure
T3416
30s
EMM REGISTERED INITIATED 
EMM REGISTERED EMM 
DEREGISTERED INITIATED 
EMM‐TAU INITIATED
EMM‐SERVICE REQUEST 
INITIATED
RAND and RES stored as a 
result of a UMTS 
authentication challenge
SECURITY MODE COMMAND 
received
SERVICE REJECT received TAU 
ACCEPT received 
AUTHENTICATION REJECT 
received AUTHENTICATION 
FAILURE sent EMM 
DEREGISTERED or EMM‐NULL 
entered
Delete the stored RAND 
and RES
T3417
5 s
EMM‐SERVICEREQUESTINITIATED SERVICE REQUEST sent
EXTENDED SERVICE 
REQUEST sent
Bearers have been set up 
SERVICE REJECT received
Abort the procedure
(Continued)
www.ebook3000.com

VALUE
STATE
CAUSE OF START
NORMAL STOP
ON EXPIRY
T3417ext
10s
EMM‐SERVICEREQUESTINITIATED EXTENDED SERVICE 
REQUEST sent and the CSFB 
response was set to “CS 
fallback accepted by the UE”
Inter‐system change from S1 mode 
to A/Gb mode or Iu mode is 
completed Inter‐system change from 
S1 mode to A/Gb mode or Iu mode 
is failed SERVICE REJECT received
Abort the procedure
T3418
20s
EMM REGISTEREDINITIATED 
EMM REGISTERED EMM‐TAU 
INITIATED EMM 
DEREGISTEREDINITIATED 
EMM‐
SERVICEREQUESTINITIATED
AUTHENTICATION 
FAILURE (EMM cause = #20 
“MAC failure” or #26 “non‐
EPS authentication 
unacceptable”) sent
AUTHENTICATION REQUEST 
received
On first expiry, the UE 
should consider the network 
as false
T3420
15 s
EMM REGISTERED INITIATED 
EMM REGISTERED EMM 
DEREGISTERED INITIATED 
EMM‐TRACKINGAREA 
UPDATING INITIATED EMM‐
SERVICE REQUEST INITIATED
AUTHENTICATION 
FAILURE (cause = #21 “synch 
failure”) sent
AUTHENTICATION REQUEST 
received
On first expiry, the UE 
should consider the network 
as false
T3421
15 s
EMM DEREGISTERED 
INITIATED
DETACH REQUEST sent
DETACH ACCEPT received
Retransmission of DETACH 
REQUEST
T3423
NOTE 3
EMM REGISTERED
T3412 expires while the UE is 
in EMM‐REGISTERED.
NO‐CELLAVAILABLE and 
ISR is activated.
When entering state EMM 
DEREGISTERED or when 
entering EMM‐
CONNECTED mode.
Set TIN to “P‐TMSI”
T3430
15 s
EMM‐TAU INITIATED
TAU REQUEST sent
TAU ACCEPT received TAU 
REJECT received
Start T3411 or T3402

T3440
10s
EMM REGISTERED INITIATED 
EMM‐TAU INITIATED EMM 
DEREGISTERED INITIATED 
EMM‐SERVICE REQUEST 
INITIATED EMM REGISTERED
ATTACH REJECT, DETACH 
REQUEST, TAU REJECT with 
any of the EMM cause #11, 
#12, #13, #14 or #15 SERVICE 
REJECT received with any of 
the EMM cause #11, #12, #13 
or #15 TAU ACCEPT 
received after the UE sent 
TAU REQUEST in EMMIDLE 
mode with no “active” flag
Signaling connection released 
Bearers have been set up
Release the signaling 
connection and proceed
T3442
NOTE 4
EMM REGISTERED
SERVICE REJECT received 
with EMM cause #39 “CS 
domain temporarily not 
available”
TAU REQUEST sent
None
Note 1 The default value of this timer is used if the network does not indicate another value in an EMM signaling procedure.
Note 2 The value of this timer is provided by the network operator during the attach and TAU procedures.
Note 3  The value of this timer may be provided by the network in the ATTACH ACCEPT message and TAU ACCEPT message. The default value of this timer is 
identical to the value of T3412.
Note 4  The value of this timer is provided by the network operator when a service request for CS fallback is rejected by the network with EMM cause #39 “CS 
domain temporarily not available”.
Note 5  The default value of this timer is used if the network does not indicate a value in the TAU ACCEPT message and the UE does not have a stored value for 
this timer.
www.ebook3000.com

Timer (EPS Mobile Management ‐ NW Side)
Following table comes from 24.301 ‐ 10.2 Timers of EPS mobility management (Table 10.2.2: EPS mobility management timers – Network side)
VALUE
STATE
CAUSE OF START
NORMAL STOP
ON THE 1st, 2nd, 3rd, 4th EXPIRY (NOTE 1)
T3413
NOTE 2
EMM REGISTERED
Paging procedure for EPS 
services initiated
Paging procedure for EPS 
services completed
Network dependent
T3422
6 s
EMM DEREGISTERED 
INITIATED
DETACH REQUEST sent
DETACH ACCEPT received
Retransmission of DETACH REQUEST
T3450
6 s
EMM‐COMMON 
PROC‐INIT
ATTACH ACCEPT sent 
TAU ACCEPT sent with 
GUTI TAU ACCEPT sent 
with TMSI GUTI 
REALLOCATION 
COMMAND sent
ATTACH COMPLETE received 
TAU COMPLETE received 
GUTI REALLOCATION 
COMPLETE received
Retransmission of the same message type, 
i.e. ATTACH ACCEPT,TAU ACCEPT or 
GUTI REALLOCATION COMMAND
T3460
6 s
EMM‐COMMON 
PROC‐INIT
AUTHENTICATION 
REQUEST sent 
SECURITY MODE 
COMMAND sent
AUTHENTICATION 
RESPONSE received 
AUTHENTICATION FAILURE 
received SECURITY MODE 
COMPLETE received 
SECURITY MODE REJECT 
received
Retransmission of the same message type, 
i.e.AUTHENTICATION REQUEST or 
SECURITY MODE COMMAND
T3470
6 s
EMM‐COMMON 
PROC‐INIT
IDENTITY 
REQUEST sent
IDENTITY RESPONSE received Retransmission of IDENTITY REQUEST
Mobile 
reachable
Default 4 min, 
greater 
than T3412
All except EMM 
DEREGISTERED
Entering EMM‐
IDLE mode
NAS signaling connection 
established
Network dependent, but typically paging is 
halted on 1st expiry
Implicit 
detach timer
NOTE 3
All except EMM 
DEREGISTERED
The mobile reachable 
timer expires while the 
network is in EMM‐
IDLE mode
NAS signaling connection 
established
Implicitly detach the UE on 1st expiry
Note 1: Typically, the procedures are aborted on the fifth expiry of the relevant timer. Exceptions are described in the corresponding procedure description.
Note 2: The value of this timer is network dependent.
Note 3: The value of this timer is network dependent. If ISR is activated, the default value of this timer is 4 minutes greater than T3423.

Appendix
809
LTE RF Cause Code
●
●Cause No. 1 “unassigned (unallocated) number” (UMTS specific cause values for call 
­control). This cause indicates that the destination requested by the mobile station cannot be 
reached because, although the number is in a valid format, it is not currently assigned 
(allocated).
●
●Cause value = 2 IMSI unknown in HLR (Causes related to MS identification). This cause is 
sent to the MS if the MS is not known (registered) in the HLR. This cause code does not 
affect operation of the GPRS service, although is may be used by a GMM procedure.
●
●Cause value = 3 Illegal MS (Causes related to MS identification). This cause is sent to the MS 
when the network refuses service to the MS either because an identity of the MS is not 
acceptable to the network or because the MS does not pass the authentication check, that is, 
the SRES received from the MS is different from that generated by the network. When used 
by an MM procedure, except the authentication procedure, this cause does not affect operation 
of the GPRS service.
●
●Cause No. 3 “no route to destination” (UMTS specific cause values for call control). This 
cause indicates that the called user cannot be reached because the network through which 
the call has been routed does not serve the destination desired.
●
●Cause value = 4 IMSI unknown in VLR (Causes related to MS identification). This cause is 
sent to the MS when the given IMSI is not known at the VLR.
●
●Cause value = 5 IMEI not accepted (Causes related to MS identification). This cause is sent to 
the MS if the network does not accept emergency call establishment using an IMEI.
●
●Cause value = 6 Illegal ME (Causes related to MS identification). This cause is sent to the MS 
if the ME used is not acceptable to the network, for example, blacklisted. When used by an 
MM procedure, this cause does not affect operation of the GPRS service.
●
●Cause No. 6 “channel unacceptable” (UMTS specific cause values for call control). This cause 
indicates the channel most recently identified is not acceptable to the sending entity for use in 
this call.
●
●Cause value = 7 GPRS services not allowed (Additional cause codes for GMM). This cause is 
sent to the MS if it requests an IMSI attach for GPRS services, but is not allowed to operate 
GPRS services.
●
●Cause value = 8 GPRS services and non‐GPRS services not allowed (Additional cause codes 
for GMM) This cause is sent to the MS if it requests a combined IMSI attach for GPRS and 
non‐GPRS services, but is not allowed to operate either of them.
●
●Cause No. 8 “operator determined barring” (GPRS specific cause values for session manage‑
ment) This cause indicates that the MS has tried to access a service that the MS’s network 
operator or service provider is not prepared to allow.
●
●Cause value = 9 MS identity cannot be derived by the network (Additional cause codes for 
GMM). This cause is sent to the MS when the network cannot derive the MS’s identity from 
the P‐TMSI in case of inter‐SGSN routing area update.
●
●Cause value = 10 Implicitly detached (Additional cause codes for GMM). This cause is sent to 
the MS either if the network has implicitly detached the MS, for example, some while after 
the Mobile reachable timer has expired, or if the GMM context data related to the subscrip‑
tion dose not exist in the SGSN, for example, because of a SGSN restart.
●
●Cause value = 11 PLMN not allowed (Cause related to subscription options). This cause is 
sent to the MS if it requests location updating in a PLMN where the MS, by subscription or 
due to operator determined barring is not allowed to operate.
●
●Cause value = 12 Location Area not allowed (Cause related to subscription options). This 
cause is sent to the MS if it requests location updating in a location area where the MS, by 
subscription, is not allowed to operate.
www.ebook3000.com

Appendix
810
●
●Cause value = 13 Roaming not allowed in this location area (Cause related to subscription 
options). This cause is sent to an MS which requests location updating in a location area of a 
PLMN, which offers roaming to that MS in that Location Area, by subscription.
●
●Cause value = 14 GPRS services not allowed in this PLMN (Additional cause codes for 
GMM). This cause is sent to the MS which requests GPRS service in a PLMN which does not 
offer roaming for GPRS services to that MS.
●
●Cause value = 15 No Suitable Cells In Location Area (Cause related to subscription options). This cause 
is sent to the MS if it requests location updating in a location area where the MS, by subscription, is not 
allowed to operate, but when it should find another allowed location area in the same PLMN.
●
●Cause No.16 “normal call clearing” (UMTS specific cause values for call control). This cause 
indicates that the call is being cleared because one of the users involved in the call has 
requested that the call be cleared. Under normal situations, the source of this cause is not the 
network.
●
●Cause value = 16 MSC temporarily not reachable” (Additional cause codes for GMM). This 
cause is sent to the MS if it requests a combined GPRS attach or routing are updating in a 
PLMN where the MSC is temporarily not reachable via the GPRS part of the GSM network.
●
●Cause value = 17 “Network failure” (Causes related to PLMN specific network failures and 
congestion/Authentication Failures). This cause is sent to the MS if the MSC cannot service 
an MS generated request because of PLMN failures, e.g. problems in MAP
●
●Cause No.17 “user busy” (UMTS specific cause values for call control). This cause is used 
when the called user has indicated the inability to accept another call. It is noted that the user 
equipment is compatible with the call.
●
●Cause No. 18 “no user responding” (UMTS specific cause values for call control). This cause 
is used when a user does not respond to a call establishment message with either an alerting 
or connect indication within the prescribed period of time allocated (defined by the expiry of 
either timer T303 or T310).
●
●Cause No. 19 “user alerting, no answer” (UMTS specific cause values for call control). This 
cause is used when a user has provided an alerting indication but has not provided a connect 
indication within a prescribed period of time.
E‐RAB establish failure cause
Cause Value
Radio Network Layer cause
Meaning
  0
Unspecified,
Sent for radio network layer cause when none of the specified 
cause values applies
  1
TX2RELOCOverall expiry,
The timer guarding the handover that takes place over X2 has 
abnormally expired.
  2
Successful handover,
Successful handover.
  3
Release due to E‐UTRAN 
generated reason,
Release is initiated due to E‐UTRAN generated reason.
  4
Handover Cancelled,
The reason for the action is cancellation of Handover
  5
Partial Handover,
Provides a reason for the handover cancellation. The 
HANDOVER COMMAND message from MME contained 
E‐RABs to Release List IE and the source eNB estimated service 
continuity for the UE would be better by not proceeding with 
handover toward this particular target eNB.
  6
Handover Failure In Target 
EPC/eNB Or Target 
System,
The handover failed due to a failure in target EPC/eNB or target 
system.

Appendix
811
Cause Value
Radio Network Layer cause
Meaning
  7
Handover Target not 
allowed,
Handover to the indicated target cell is not allowed for the UE in 
question.
  8
TS1RELOCoverall Expiry,
The reason for the action is expiry of timer TS1RELOCoverall.
  9
TS1RELOCprep Expiry,
Handover Preparation procedure is cancelled when timer 
TS1RELOCprep expires.
10
Cell not available,
The concerned cell is not available.
11
Unknown Target ID,
Handover rejected because the target ID is not known to 
the EPC.
12
No radio resources 
available in target cell,
Load on target cell is too high.
13
Unknown or already 
allocated MME UE 
S1AP ID,
The action failed because the MME UE S1AP ID is either 
unknown, or (for a first message received at the eNB) is known 
and already allocated to an existing context.
14
Unknown or already 
allocated eNB UE S1AP ID,
The action failed because the eNB UE S1AP ID is either 
unknown, or (for a first message received at the MME) is known 
and already allocated to an existing context.
15
Unknown or inconsistent 
pair of UE S1AP ID,
The action failed because both UE S1AP IDs are unknown, or 
are known but do not define a single UE context.
16
Handover desirable for 
radio reasons,
The reason for requesting handover is radio related.
17
Time critical handover,
handover is requested for time critical reason i.e., this cause 
value is reserved to represent all critical cases where the 
connection is likely to be dropped if handover is not performed.
18
Resource optimisation 
handover,
The reason for requesting handover is to improve the load 
distribution with the neighbour cells.
19
Reduce load in serving cell,
Load on serving cell needs to be reduced.
20
User inactivity,
The action is requested due to user inactivity on all E‐RABs, e.g., 
S1 is requested to be released in order to optimise the radio 
resources.
21
Radio Connection With 
UE Lost
The action is requested due to loosing the radio connection to 
the UE.
22
Load Balancing TAU 
Required
The action is requested for all load balancing and offload cases 
in the MME.
23
CS Fallback Triggered,
The action is due to a CS fallback that has been triggered. When 
it is included in UE CONTEXT RELEASE REQUEST message, it 
indicates the PS service suspension is not required in the EPC.
24
UE Not Available For PS 
Service,
The action is requested due to a CS fallback to GERAN that has 
been triggered.When it is included in the UE CONTEXT 
RELEASE REQUEST message, it indicates that the PS service 
suspension is required in the EPC due to the target GERAN cell 
or the UE has no DTM capability.
25
Radio resources not 
available,
No requested radio resources are available
26
Failure in the Radio 
Interface Procedure
Radio interface procedure has failed
27
Invalid QoS combination,
The action was failed because of invalid QoS combination.
(Continued)
www.ebook3000.com

Appendix
812
Cause Value
Radio Network Layer cause
Meaning
28
Inter‐RAT redirection,
The release is requested due to inter‐RAT redirection. When it 
is included in UE CONTEXT RELEASE REQUEST message, it 
indicates the PS service suspension is not required in the EPC.
29
Interaction with other 
procedure
The action is due to an ongoing interaction with another 
procedure
30
Unknown E‐RAB ID,
The action failed because the E‐RAB ID is unknown in the eNB
31
Multiple E‐RAB ID 
instances,
The action failed because multiple instance of the same E‐RAB 
had been provided to the eNB
32
Encryption and/or 
integrity protection 
algorithms not supported,
The eNB is unable to support any of the encryption and/or 
integrity protection algorithms supported by the UE.
33
S1 intra system Handover 
triggered,
The action is due to a S1 intra system handover that has been 
triggered.
34
S1 inter system Handover 
triggered,
The action is due to a S1 inter system handover that has been 
triggered.
35
X2 Handover triggered
The action is due to an X2 handover that has been triggered.
36
Redirection toward 1xRTT, The release of the UE‐associated logical S1 connection is 
requested due to redirection toward a 1xRTT system e.g., CS 
fallback to 1xRTT, or SRVCC to 1xRTT, when the PS service 
suspension is required in the EPC. During this procedure, the 
radio interface message might but need not include redirection 
information.
37
Not supported QCI value,
The E‐RAB setup failed because the requested QCI is not 
supported.
38
invalid CSG Id
The CSG ID provided to the target eNB was found invalid.
S1AP Cause Code
Cause Code
Description
Issue 
Location
Attach
S1AP.EMM Cause.8
EPS services and non‐EPS services not allowed
user/core
Attach
S1AP.EMM Cause.11
PLMN not allowed
user/UE
Attach
S1AP.EMM Cause.14
EPS services not allowed in this PLMN
user/UE
Attach
S1AP.EMM Cause.19
ESM failure
core NW
Attach
S1AP.NAS Cause.258
detach,
RAN
Attach
S1AP.EMM Cause.7
EPS services not allowed
user/core
Attach
S1AP.EMM Cause.9
UE identity cannot be derived by the network
core/RAN
Attach
S1AP.EMM Cause.15
No Suitable Cells In tracking area
user/core
Attach
S1AP.EMM Cause.17
Network failure
core NW
Attach
S1AP.EMM Cause.111
Protocol error, unspecified
UE/RF
Attach
S1AP.ESM Cause.38
Network failure
core NW
Attach
S1AP.Radio Network Layer 
Cause.21
radio‐connection‐with‐ue‐lost,
RF/UE

Appendix
813
Cause Code
Description
Issue 
Location
Attach
S1AP.EMM Cause.2
IMSI unknown in HSS
user/UE
Attach
S1AP.EMM Cause.3
Illegal UE
user/UE
Attach
S1AP.EMM Cause.5
IMEI not accepted
user/UE
Attach
S1AP.EMM Cause.6
Illegal ME
user/UE
Attach
S1AP.EMM Cause.10
Implicitly detached
core/RAN
Attach
S1AP.EMM Cause.13
Roaming not allowed in this tracking area
user/UE
Attach
S1AP.EMM Cause.20
MAC failure
user/UE
Attach
S1AP.EMM Cause.21
Synch failure
user/UE
Attach
S1AP.EMM Cause.22
Congestion
core NW
Attach
S1AP.EMM Cause.23
UE security capabilities mismatch
user/UE
Attach
S1AP.EMM Cause.24
Security mode rejected, unspecified
core NW
Attach
S1AP.EMM Cause.25
Not authorized for this CSG
user/UE
Attach
S1AP.EMM Cause.26
Non‐EPS authentication unacceptable
user/UE
Attach
S1AP.EMM Cause.35
Requested service option not authorized in 
this PLMN
user/UE
Attach
S1AP.EMM Cause.39
CS service temporarily not available
core NW
Attach
S1AP.EMM Cause.40
No EPS bearer context activated
user/core
Attach
S1AP.EMM Cause.95
Semantically incorrect message
core NW
Attach
S1AP.EMM Cause.96
Invalid mandatory information
core NW
Attach
S1AP.EMM Cause.97
Message type non‐existent or not implemented
core NW
Attach
S1AP.EMM Cause.98
Message type not compatible with the 
protocol state
core NW
Attach
S1AP.EMM Cause.99
Information element non‐existent or not 
implemented
core NW
Attach
S1AP.EMM Cause.100
Conditional IE error
core NW
Attach
S1AP.EMM Cause.101
Message not compatible with the protocol state
core NW
Attach
S1AP.EMM Cause.517
unknown‐PLMN,
core/UE
Attach
S1AP.ESM Cause.8
Operator Determined Barring
user/RF
Attach
S1AP.ESM Cause.26
Insufficient resources
core NW
Attach
S1AP.ESM Cause.27
Missing or unknown APN
user/RF
Attach
S1AP.EMM.17
Network failure
core NW
Attach
S1AP.ESM.15&S6a.5420
No Suitable Cells In tracking area; 
DIAMETER_ERROR_UNKNOWN_EPS_
SUBSCRIPTION
UE
Attach
S1AP.ESM.26
PDN connection reject,reason:User 
authentication failed
core
Handover
GTPV2.8
Failure in Radio Interface Procedure
Ran
Handover
GTPV2.2
Handover/Relocation cancelled by source system
core NW
Handover
GTPV2.3
Handover/Relocation Failure with Target system
core NW
Handover
GTPV2.4
Handover/Relocation Target not allowed
core NW
Handover
GTPV2.5
Unknown Target ID
Ran
(Continued)
www.ebook3000.com

Appendix
814
Cause Code
Description
Issue 
Location
Handover
GTPV2.6
Target Cell not available
Ran
Handover
GTPV2.7
No Radio Resources Available in Target Cell
Ran
Handover
GTPV2.8
Failure in Radio Interface Procedure
Ran
Handover
GTPV2.9
Permanent session leg establishment error
core NW
Handover
GTPV2.10
Temporary session leg establishment error
core NW
SIP Response Status Codes
100 Trying
410 Gone
481 Call/Transaction Does Not Exist
180 Ringing
412 Conditional Request Failed 
RFC3903
482 Loop Detected
181 Call Is Being Forwarded
413 Request Entity Too Large
483 Too Many Hops
182 Queued
414 Request‐URI Too Long
484 Address Incomplete
183 Session Progress
415 Unsupported Media Type
485 Ambiguous
199 Early Dialog Terminated 
RFC6228
416 Unsupported URI Scheme
486 Busy Here
200 OK
417 Unknown Resource‐Priority 
RFC4412
487 Request Terminated
202 Accepted RFC3265
420 Bad Extension
488 Not Acceptable Here
204 No Notification RFC5839
421 Extension Required
489 Bad Event RFC3265
300 Multiple Choices
422 Session Interval Too Small 
RFC4028
491 Request Pending
301 Moved Permanently
423 Interval Too Brief
493 Undecipherable
302 Moved Temporarily
424 Bad Location Information 
RFC6442
494 Security Agreement Required 
RFC3329
305 Use Proxy
428 Use Identity Header RFC4474
500 Server Internal Error
380 Alternative Service
429 Provide Referrer Identity 
RFC3892
501 Not Implemented
400 Bad Request
430 Flow Failed RFC5626
502 Bad Gateway
401 Unauthorized
433 Anonymity Disallowed RFC5079
503 Service Unavailable
402 Payment Required
436 Bad Identity‐Info RFC4474
504 Server Time‐out
403 Forbidden
437 Unsupported Certificate 
RFC4474
505 Version Not Supported
404 Not Found
438 Invalid Identity Header RFC4474
513 Message Too Large
405 Method Not Allowed
439 First Hop Lacks Outbound 
Support RFC5626
580 Precondition Failure RFC3312
406 Not Acceptable
440 Max‐Breadth Exceeded RFC5393 600 Busy Everywhere
407 Proxy Authentication 
Required
469 Bad Info Package RFC6086
603 Decline
408 Request Timeout
470 Consent Needed RFC5360
604 Does Not Exist Anywhere
480 Temporarily Unavailable
606 Not Acceptable

Appendix
815
Data traced from VoLTE control plane and user plane
Common
›MO MT
›EPS Linked Bearer ID
›UL/DL Subscribed 
UE AMBR
›MAX Requested 
Bandwidth DL
›Transaction Type
›EPS Bearer ID
›Requested APN 
AMBR DL/UL
›MAX Requested 
Bandwidth UL
›IMSI
›SGW GTPU TEID
›Response APN 
AMBR DL/UL
›Bearer Contexts to be created
›Cell ID
›eNB GTPU TEID DL
›Requested GBR DL/UL
›Bearer Contexts to be removed
›LAC
›SGW GTPU IP 
Address
›Response GBR DL/UL
›Bearer Contexts created
›MCC/MNC
›eNB GTPU IP 
Address DL/UL
›Requested MBR DL/UL
›Bearer Contexts marked for 
removal
›TAC
›GTPC Cause
›Response MBR DL/UL
›Bearer Contexts modified
›IMEI/IMEISV
›GTPC FCause
›Requested/
Response QCI
›Bearer cause
›M TMSI
›NAS Cipher 
Algorithms
›Req/Resp Alloc Ret 
Priority
›Failed Bearer Context
›MME Code
›Diameter Radio 
Access Type
›TMSI PTMSI
›Bearer Context removed
›MME Group ID
›GTP Radio Access Type ›Equipment Status
›List Of Setup Bearers
›GUTI ID
›APN
›Result code
›List Of Setup RABs
›Target ID
›ECGI
›Diameter PDN Type
›List Of Setup PFCs
›LTE Interface
›NSAPI
›GTP PDN Type
›EPS Count Of Requested 
Bearer Ids
›Start/End Time 
Diameter
›PLMN
›PDN IP Address
›EPS Count Of Created 
Bearer ids
›Time GTP
›RAC
›Cancellation Type
›EPS Count Of Deleted 
Bearer Ids
›Latest Diameter Msg
›SAC
›Network Access Mode
›EPS Count Of Bearer Ids 
Modified
›Latest GTPC Msg
›UL Used UE AMBR
›Subscriber Status
›EPS Count Of Bearer Ids 
To Be Modified
CP: S13/S6a/S5/S8/S4/S3/S10/S11/X2/S1
›Authentication
›PDN Address V4V6
›S1U eNB GTPU TEID
›SGW GTP Address
›E RAB ID
›PDN Request Type
›S3 MME GTPC IP 
Address
›SGW TEID
›EIR IP Address
›S1 Attach/Detach Time
›S3 MME GTPC TEID
›Start Time NAS
›EMM CAUSE
›S1 ENB IPAddr
›S3 SGSN GTPC IP 
Address
›Start Time S1
›eNB GTP Address
›S1 Messages
›S3 SGSN GTPC IP TEID
›X2 eNB IP
›eNB Id/TEID
›S1 MME IPAddr
›S4 S5 S8 U PGW TEID
›X2 eNB TEID
(Continued)
www.ebook3000.com

Appendix
816
›End Time NAS
›S1 PDN Type
›S4 SGSN GTPC IP 
Address
›X2 Messages
›End Time S1
›S1 U SGW TEID
›S4 SGSN GTPC IP TEID
›X2 Miscellaneous  
Cause
›EPS Encryption Algorithm ›S10 MME GTPC IP 
Address
›S4 SGSN GTPU IP 
Address
›X2 New/Old eNB ID
›EPS Integrity Algorithm
›S10 MME GTPC TEID
›S4 SGSN GTPU TEID
›X2 eNB ID
›ESM CAUSE
›S10 Source/Target MME 
IP Addr
›S4 SGW GTPU IP 
Address
›X2 Protocol L Cause
›HSS IP Address
›S11 MME GTPC IP 
Address
›S4 SGW GTPU TEID
›X2 Radio N L Cause
›KASME
›S11 MME GTPC TEID
›S5 S8 PGW/SGW GTPU 
IP Address
›X2 SGW IP
›Latest NAS Message
›S11 S4 SGW GTPC IP 
Address
›S5 S8 PGW/SGW 
GTPU TEID
›X2 SGW TEID
›Max Requested 
Bitrate DL/UL
›S11 S4 SGW 
GTPC TEID
›S5 S8 SGW GTPC IP 
Address
›X2 Source eNB IP 
address
›MME Id
›S11 S5 S8 U PGW TEID
›S5 S8 SGW GTPC TEID
›X2 Target Cell ID
›NAS Security Algorithms
›S13 MME IP Address
›S5 S8 SGW GTPU IP 
Address
›X2 Target eNB IP 
address
›PDN Access Point
›S13 Procedure 
Response Delay
›S5 S8 SGW GTPU TEID
›X2 Transport L Cause
UP: S1– IP/SIP/RTP/RTCP
›Duration
›SIP Call ID
›SIP Subject
›RTP TOT Len
›Bytes
›SIP Data Port
›SIP Contact
›RTP Frag off
›Packets
›SIP Connection info Addr
›SIP Reason
›Sum RTP lost
›Src/Dst Address
›SIP Data Port d
›SIP User Agent
›Sum RTP UnSeq
›VLANID
›SIP Media Type
›SIP Caller User Agent
›RTP Payload Len
›Src/Dst Port
›SIP Media format
›SIP Callee Server Agent
›RTP MOS
›Protocol
›SIP Media attr encoding
›SIP Media Attr Addr
›RTCP CNAME
›GTPTEID
›SIP From/To
›SIP Connection info Addr v6
›RTCP Message
›Tun Src/Dst Address
›SIP URI
›RTP Codec Name
›RTCP SSRC
›Tun Src/Dst Port
›SIP www authentication
›RTP Codec Index
›RTCP RR Jitter
›Tun Protocol
›SIP Method
›RTP MOS Session
›RTCP RR ComLost
›Src/Dst Port Protocol
›SIP Reply Code
›Avr RTP MOS Session
›RTCP Name
›Avg throughput
›SIP CSeq
›RTP RFactor
›RTCP RR SSRC ID
›Min/Max IP TOS
›SIP Setup Delay
›RTP SSRC
›RTP End Session
›Min/Max IP DSCP
›SIP Time before speak
›RTP Timestamp
›Avg Base Delay
›SIP Caller/Callee
›SIP Call Duration
›RTP SNumber
›Avg Base Jitter

Appendix
817
LTE identifier
Table below describes the functionality/description of LTE identifiers and their structures.
Identifier
Abbreviation
Functionality/Description
Structure
State in 
network
IMSI
International Mobile 
Subscriber Identity
Unique identification of UE
IMSI = PLMN ID + 
MSIN =MCC + MNC + 
MSIN
Permanent
PLMN ID
Public Land Mobile 
Network Identifier
Unique identification 
of PLMN
PLMN ID (not more 
than 6 digits) =MCC + 
MNC
Permanent
MCC
Mobile Country Code
Assigned by ITU
3 digits
Permanent
MNC
Mobile Network Code
Assigned by national 
authority
2 ~ 3 digits
Permanent
MSIN
Mobile Subscriber 
Identification Number
Assigned by operator
9 ~ 10 digits
Permanent
GUTI
Globally Unique 
Temporary UE Identity
To identify a UE between the 
UE and the MME on behalf of 
IMSI for security reason, 
allocated by MME, in EMM 
attach accept message
GUTI = GUMMEI + 
M‐TMSI
Temporary
PLMN ID
MCC
12 bits
MNC
8~12 bits
MMEGI
16 bits
GUMMEI
GUTI
MMEC
8 bits
M-TMSI
32 bits
S-TMSI 40 bits
MMEI
TIN
Temporary Identity 
used in next update
GUTI is stored in TIN 
parameter of UE’s MM 
context. TIN indicates which 
temporary ID will be used in 
the next update
TIN = GUTI
Temporary
S‐TMSI
SAE Temporary 
Mobile Subscriber 
Identity
assigned by the MME, 
uniquely identifies the UE 
within a tracking area. Its 
main purpose is to avoid 
usage of IMSI on air (unique 
within a MME pool)
S‐TMSI = MMEC + 
M‐TMSIMME
Temporary
M‐TMSI
MME Mobile 
Subscriber Identity
Unique within a MME
32 bits
Temporary
GUMMEI
Globally Unique MME 
Identity
To identify a MME uniquely 
in global GUTI 
contains GUMMEI
GUMMEI (not more 
than 48 bits) = PLMN 
ID + MMEI
Permanent
MMEI
MME Identifier
To identify a MME uniquely 
within a PLMN
MMEI (24 bits) = 
MMEGI + MMEC
Permanent
MMEGI
MME Group Identifier
Unique within a PLMN
16 bits
Permanent
MMEC
MME Code
To identify a MME uniquely 
within a MME Group.  
S‐TMSI contains MMEC
8 bits
Permanent
(Continued)
www.ebook3000.com

Appendix
818
Identifier
Abbreviation
Functionality/Description
Structure
State in 
network
C‐RNTI
Cell radio network 
temporary identifier
To identify an UE uniquely in a 
cell, assigned by the eNB, only 
exists if UE is connected
0 × 0001 ~ 0 × FFF3 
(16 bits)
Temporary
P‐RNTI
Paging radio network 
temporary identifier
sent on PDCCH when there 
is a RRC paging message 
allocated on PDSCH
0 × 0001 ~ 0 × FFF3 
(16 bits)
Temporary
eNB 
S1AP UE ID
eNB S1 Application 
Protocol UE ID
To uniquely identify UE on 
S1‐ MME Interface in eNB
32‐bit Integer 
(0 .. 232 ‐ 1)
Temporary
MME 
S1AP UE ID
MME S1 Application 
Protocol UE ID
To uniquely identify UE on 
S1‐ MME Interface in MME
32‐bit Integer 
(0 .. 232 ‐ 1)
Temporary
IMEI
International Mobile 
Equipment Identity
To identify a mobile 
equipment uniquely
IMEI (15 digits) = 
TAC + SNR + CD
Permanent
IMEI/SV
IMEI/Software version
To identify a mobile 
equipment uniquely
IMEI/SV (16 digits) =
TAC + SNR + SVN
Permanent
ECGI
E‐UTRAN cell global 
identifier
To identify a Cell in global 
(globally unique), EPC can 
know UE location based 
of ECGI
ECGI (not more than 
52 bits) = PLMN 
I D+ ECI
Permanent
ECI
E‐UTRAN Cell 
Identifier
To identify a Cell 
within a PLMN
ECI (28 Bits) = eNB 
ID + Cell ID
Permanent
Global eNB ID Global eNB Identifier
To identify an eNB in global 
(globally unique)
Global eNB ID = 
PLMN ID + eNB ID
Permanent
eNB ID
eNB Identifier
To identify an eNB 
within a PLMN
20 bits
Permanent
P‐GW ID
PDN GW Identity
To identify a specific PDN 
GW (P‐GW),
IP address (4 bytes) or 
FQDN (variable length)
Permanent
TAI
Tracking Area Identity
To identify tracking area 
(globally unique)
TAI (not more than 32 
bits) = PLMN ID + TAC
Permanent
TAC
Tracking Area Code
To indicate eNB to which 
tracking area the eNB belongs 
(per cell), unique 
within a PLMN
16 bits
Permanent
TAI List
Tracking Area 
Identity List
UE can move into the cells 
included in TAL list without 
location update (TA update) 
(globally unique)
{TAI} (variable length)
Permanent
PDN ID
Packet Data Network 
Identity
To identify a PDN, PDN 
Identity (APN) is used to 
determine the P‐GW and 
point of interconnection 
with a PDN, with APN 
as query parameter to 
the DNS procedures, the 
MME will receive a list of 
candidate P‑GWs, and then a 
P‐GW is selected by MME 
with policy
PDN Identify = 
APN = APN.NI + APN.
OI (variable length)
Permanent

Appendix
819
Identifier
Abbreviation
Functionality/Description
Structure
State in 
network
EPS Bearer ID
Evolved Packet System 
Bearer Identifier
An EPS bearer is virtual 
connection set between a UE 
and a P‐GW to deliver user 
traffic over the LTE network. 
Different bearers in the EPS 
bearer are identified by EPS 
bearer IDs.
4 bits
Temporary
E‐RAB ID
E‐UTRAN Radio 
Access Bearer 
Identifier
To identify an E‐RAB per an 
UE, assigned by an MME, 
generally with the same value
as the EPS bearer ID, E‐RAB is 
an EPS bearer set between a UE 
and an S‐GW.
4 bits
Temporary
DRB ID
Data Radio Bearer 
Identifier
To identify a DRB per an UE, 
The DRB ID is assigned by an 
eNB upon establishment of 
the EPS bearer, and is 
mapped with EPS bearer IDs.
4 bits
Temporary
LBI
Linked EPS Bearer ID
Dedicated EPS bearers are 
linked to a default EPS bearer. 
The linked bearers are
represented by LBI indicating 
they are all associated with 
the same default EPS bearer.
4 bits
Temporary
TEID
Tunnel End Point 
identifier
To identify the end point of a 
GTP tunnel when the tunnel 
is established
Different S1 bearers are 
identified by their TEID 
allocated by the endpoints (eNB 
and S‐GW) of the GTP tunnel.
Different S5 bearers are identified 
by their TEID allocated by the 
endpoints (S‐GW and P‐GW) of 
the GTP tunnel.
32 bits
Temporary
www.ebook3000.com

820
LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
Glossary of Acronyms
AMC	
Adaptive Modulation and Coding
AMR‐NB	
Adaptive multi‐rate narrowband
AMR‐WB	
Adaptive multi‐rate wideband
ANR	
Automatic Neighbour Relation
ATCF	
Access Transfer Control Function
ATGW	
Access Transfer Gateway
BLER	
Block Error Rate
BSR	
Buffer Status Report
CDR	
Charging Detail Record
CSCF	
Call Session Control Function
CQI	
Channel Quality Indicator
C‐RNTI	
Cell Radio Network Temporary Identifier, assigned by the eNB
DBS	
Delay‐Based Scheduling
DRX	
Discontinuous Reception Differentiated
DSCP	
Differentiated Service Code Point
ECGI	
Evolved Cell Global Identity
EMM	
EPS Mobility Management
EPC	
Evolved Packet Core
ESM	
EPS Session Management
EPS	
Evolved Packet System: E‐UTRAN + EPC
EVS	
Enhanced Voice Services
FMT	
Field Measurement Tools
FTP	
File Transfer Protocol
GSMA	
GSM Association
H.264	
Video codec standard, aka MPEG‐4 Part 10
HARQ	
Hybrid Automatic Repeat Request
HO	
Handover
IETF	
Internet Engineering Task Force
IP	
Internet Protocol
IPsec	
Internet Protocol Security
IBGF	
Interconnect Border Gateway Function:
I‐CSCF	
Interrogating CSCF
IBCF	
Interconnection Border Control Function
IBGF	
Interconnection Border Gateway Function
ICIC	
Inter‐cell interference
IMSI	
International Mobile Subscriber Identity

Glossary of Acronyms
821
KPI	
Key Performance Indicator
LCG	
Logical Channel Groups
LNA	
Low Noise Amplifier
MCS	
Modulation and Coding Scheme
MGCF	
Media Gateway Control Function
MGF	
Media Gateway Function
MGW	
Media Gateway
MRF	
Multimedia Resource Function
MRO	
Mobility Robustness Optimisation
MIMO	
Multiple Input Multiple Output
MME	
Mobility Management Entity
MOS	
Mean Opinion Score
MSC‐S	
Mobile Services Switching Center‐Server
MSS	
Mobile Switching Subsystem
NACC	
Network Assisted Cell Change
NCL	
Neighbour Cell List
NGMN	
Next generation mobile networks
NRT	
Neighbour Relation Table
OAM	
Operation and Maintenance
OCNS	
Orthogonal Channel Noise Simulator
OFDMA	
Orthogonal Frequency Division Multiple Access
P‐CSCF	
Proxy Call Session Control Function
PCI	
Physical Cell ID
PCRF	
Policy Control Resource Function
PDB	
Packet Delay Budget
PDN	
Packet Data Network
PDCP	
Packet Data Convergence Protocol
PEVQ	
Perceptual Evaluation of Video Quality (ITU‐T J.247)
PM	
Performance Management
PRB	
Physical Resource Block
P‐SCH	
Primary Synchronization Channel
POLQA	
Perceptual Objective Listening Quality Assessment (ITU‐T P.863)
PSD	
Power Spectral Density
PSNR	
Peak Signal to Noise Ratio
QCI	
QoS Class Identifier
QoS	
Quality of Service
QVGA	
Quarter VGA size of 320 × 240 pixels
RAB	
Radio Access Bearer
RAC	
Radio Access Controller
RACH	
Random Access Channel
RLC	
Radio Link Control (Layer)
RoHC	
Robust Header Compression
RTP	
Real‐Time Transport Protocol
RSRP	
Reference Signal Received Power
RSRQ	
Reference Signal Received Quality
RSSI	
Received Strength Signal Indicator
RTP	
Real time Transport Protocol
RTCP	
Real Time Transport Control Protocol
www.ebook3000.com

Glossary of Acronyms
822
S1	
Interface between eNB and MME
S1‐AP UE ID	
S1 Application Protocol User Equipment Identity
S‐TMSI	
SAE‐ Temporary Mobile Subscriber Identifier, assigned by the MME
SC‐FDMA	
Single Carrier Frequency Division Multiple Access
SCC AS	
Service Centralization and Continuity Application Server
SCTP	
Stream Control Transmission Protocol
SINR	
Signal‐to‐Interference and Noise Ratio
SON	
Self Organizing Networks
SDF	
Service Data Flow
SGW	
Serving Gateway
SID	
Silence Insertion Descriptor
SIP	
Session Initiation Protocol
S‐SCH	
Secondary Synchronization Channel
S‐TMSI	
SAE‐ Temporary Mobile Subscriber Identifier
SPS	
Semi Persist Scheduling
SRVCC	
Single Radio Voice Call Continuity
STN‐SR	
Session Transfer Number Single Radio
TCP	
Transmission Control Protocol
TTI	
Transmission Time Interval
TDD	
Time Division Duplex
UDP	
User Datagram Protocol
X2	
Interface between two eNBs
XCAL	
Measurement solution from Accuver
XCAP	
Analysis (post‐processing) solution from Accuver

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
823
	1	 GSMA PRD IR.94 ‐ IMS Profile for Conversational Video Service
	2	 GSMA PRD IR.92 ‐ IMS Profile for Voice and SMS
	3	 GSMA PRD IR.39 ‐ IMS Profile for High Definition Video Conference (HDVC) Service
	4	 GSMA PRD RCC.07 ‐ Rich Communication Suite 5.1 Advanced Communications Services and 
Client Specification.
	5	 3GPP TS 23.292 IP Multimedia Subsystem IMS centralized
	6	 3GPP TS 23.272, Circuit Switched Fallback in Evolved Packet System
	7	 3GPP TS 24.237 IP Multimedia Core Network subsystem IP Multimedia Subsystem (IMS) 
service continuity.
	8	 3GPP TS 24.301: “Non‐Access‐Stratum (NAS) protocol for Evolved Packet System (EPS).”
	9	 3GPP TS 26.114 ⟪IMS;Multimedia Telephony;Media handling and interaction⟫
	10	 3GPP TS 36.104: “Evolved Universal Terrestrial Radio Access (E‐UTRA); Base Station (BS) 
radio transmission and reception.”
	11	 3GPP TS 36.211: “Evolved Universal Terrestrial Radio Access (E‐UTRA); Physical Channels 
and Modulation.”
	12	 3GPP TS 36.212: “Evolved Universal Terrestrial Radio Access (E‐UTRA); Multiplexing and 
channel coding.”
	13	 3GPP TS 36.213 “Physical layer procedures.”
	14	 3GPP TS 36.331 “Radio Resource Control (RRC).”
	15	 3GPP TS 36.321 “Medium Access Control (MAC) protocol specification.”
	16	 3GPP TS 36.322 “Radio Link Control Protocol Specification.”
	17	 3GPP TS 36.323 – PDCP
	18	 3GPP TS 36.401 – E‐UTRA Architecture Description
	19	 3GPP TS 36.410 – S1 interface general aspects & principle; 3GPP TS 36.411 – S1 interface 
Layer 1
	20	 3GPP TS 36.412 – S1 interface signaling transport
	21	 3GPP TS 36.413 – S1 application protocol S1AP
	22	 3GPP TS 36.414 – S1 interface data transport
	23	 3GPP TS 36.420 – X2 interface general aspects and principles
	24	 3GPP TS 36.421 – X2 interface layer1
	25	 3GPP TS 36.422 – X2 interface signaling transport; 3GPP TS 36.423 – X2 interface application 
part X2AP
	26	 3GPP TS 36.442 – UTRAN Implementation Specific O&M Transport
	27	 3GPP TS 29.118 – SGs application part
	28	 3GPP TS 29.274 – GTP‐C
	29	 3GPP TS 29.281 – GTP‐U
	30	 3GPP TS 23.280 (Sv Itf), 3GPP 23.401 (access)
References
www.ebook3000.com

References
824
	31	 IETF RFC SCTP – RFC 2960, RFC 4960
	32	 IETF RFC 3095, “RObust Header Compression (ROHC)”
	33	 IETF RFC 4815, “RObust Header Compression (ROHC):Corrections and Clarifications to 
RFC 3095”
	34	 IETF RFC 4995, “The RObust Header Compression (ROHC) Framework”
	35	 IETF RFC 3843,“RObust Header Compression(ROHC): A Compression Profile for IP”
	36	 IETF RFC 768, Unreliable Datagram Protocol (UDP)
	37	 IETF RFC 3550, Real‐Time Protocol (RTP)
	38	 IMS Architecture, TS23.228, TS23.401, TS24.229, TS33.203
	39	 Session Initiation Protocol (SIP), TS24.229, RFC3261
	40	 Session Description Protocol (SDP), TS24.229, RFC4566
	41	 IMS Authentication and Security, TS23.228, RFC 2406, RFC2451, RFC3602
	42	 Media Aspects, TS26.114, TS23.167, TS24.623, RFC4867, RFC3966, RFC4825
	43	 ITU‐T Recommendation H.264 (03/2010 or newer): “Advanced video coding for generic 
audiovisual services.”

825
LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
a
Accessibility  28, 140, 373, 692, 804
Active queue management (AQM)  185, 367
Adaptive modulation and coding  69, 175
Admission control  17, 85, 210, 366, 619
Air to ground  358
Allocation/retention priority (ARP)  22
Angle of arrival (AOA)  30
Antenna tilts  24, 28, 44, 56
Attach and detach  272
Attach latency optimization  248
Automatic optimization  29, 43, 709
b
Beamforming  21, 97, 161, 736
Block error rate (BLER)  26, 67, 127, 207, 369, 
478, 500, 617, 772
c
Call drop (drop call)  27, 121, 302, 400, 507, 
614, 753, 771
Carrier aggregation (CA)  341
Cell
border  66, 135, 137, 192, 340, 506, 751
priority  276, 277, 279, 306, 314
cell range expansion (CRE)  748
Channel quality indicator (CQI)  26, 51, 109, 
220, 303, 467, 635, 738
Circuit‐switched fallback (CSFB)
call procedure  392, 395–397
optimization  402–404, 423
Combined register  387, 389
Compression ratio  519, 584
Control channel elements (CCEs)  73, 141–142
Coverage  142, 305, 400, 500, 607, 707, 800
Coverage overlap  28, 125, 140, 307,  
746, 770
Cross slot interference  199, 200
Cyclic shift  665, 721, 740
d
Data forwarding  8, 261, 322, 454, 525, 798
Deferred measurement control reading 
(DMCR)  392, 394
Doppler shift  351, 356, 359
Drive test  24, 120, 216, 353, 557, 696, 756
DRX  72, 146, 201, 302, 414, 539, 605, 711
e
E2E IMS flow  458
eNB scheduler  70, 74, 192, 369, 683
eSRVCC handover issues  589
f
Fast return to LTE  387, 421, 552, 555
FDD‐TDD inter‐mode mobility  345
Frame error rate (FER)  445, 556, 563, 637
h
Handover
failure  43, 118, 332, 457, 526, 619, 709, 
751, 810
interruption time  120, 271, 326, 331, 545, 
579, 601
optimization  285, 291, 322, 751
Heterogeneous network (HetNet)  3, 741
High‐speed mobile optimization  351
High traffic  46, 48, 50, 140, 373, 377
Index
www.ebook3000.com

Index
826
i
Implicitly detached  428, 632, 796, 813
Integrity  16, 42, 158, 216, 233, 618,  
765, 812
Inter‐cell interference coordination 
(ICIC)  210, 746
Interference rejection combining (IRC)   
163, 209
Interference
optimization  188, 687
j
Jitter  26, 120, 436, 506, 654, 754, 816
k
Key performance indicators (KPIs)  24, 42
l
Latency optimization  244, 247, 248,  
250, 411
Link
adaptation  51, 104, 167, 168, 210, 377, 478, 
502, 507, 580, 696
balance  23, 25, 26, 135, 305, 346
budget  132, 189, 345, 440, 506,  
690, 764
m
Massive MIMO  97, 105, 107
Measurement
gap  254, 320, 479, 529, 539
and handover events  256
report  29, 125, 260, 302, 413, 619,  
774, 803
Mobile terminating roaming forward 
(MTRF)  400, 402, 412, 425
Mobile terminating roaming retry 
(MTRR)  400, 402
Mobility
management entity (MME)  7, 8, 29, 386
optimization  26, 254, 305, 334, 589
parameter  269
robustness  335, 751
Model of DL data throughput  157
Modulation and coding scheme (MCS)  26, 
103, 211, 406, 474, 502, 621, 728
MSC pool  387, 400, 414, 425
Multi‐Input‐Multi‐Output (MIMO)  3, 100, 
132, 377, 581, 702, 725
n
Neighbor relation optimization  28
Network structure  197, 404, 489
Non‐Access Stratum (NAS)  3, 195, 201, 274, 
341, 699, 713, 801
o
Observed time difference of arrival 
(OTDOA)  32, 34–37, 440, 741
One way audio  575, 580, 601
Online gaming  774
Optimization
life cycle  26
parameters  61
Orthogonal frequency division multiple access 
(OFDMA)  6, 9, 19–21
Overshooting  25, 117, 226, 255, 336, 423
Over the top (OTT)  11, 155, 366, 434, 513, 
690, 736
p
Packet loss  9, 120, 322, 436, 504, 660, 754, 789
Paging latency optimization  250
P0 and α  202–204
PCI clashes  29
PDCP discard timer  576, 584, 600, 601,  
607, 609
Peak data rates  6, 9, 97
POLQA  17, 500, 563, 651, 769, 789
positioning  32, 440, 479, 665, 769
Power
allocation optimization  66
control  22, 58, 107, 200, 336, 478, 507, 689
Prach frequency offset  358, 667, 682, 683, 689
PRB allocation  70, 166, 477, 506, 509, 722
PRB and MCS selection  484, 485
Preamble collision  683, 696, 699
Pre‐scheduling  246
PS handover optimization  322
Pseudo base station  402, 403, 428, 433
PUCCH capacity  144–146, 150
PUSCH UL_SINR target  212
q
QoE modeling  753
Quality of experience (QoE)  752
Quality of service (QoS)  22, 67, 269, 362, 436, 
453, 617
Quality optimization  26

Index
827
r
Radio
bearers  22, 70, 141, 242, 370, 446, 601, 781
link failure  82, 125, 216, 333, 580, 622, 716, 
803, 804
propagation  244, 745
resource management  6, 22, 23, 32
Radio resource control (RRC)
connection management  256
connection reestablishment  81, 216, 247, 
291, 339, 622, 628, 803
connection supervision  239
connection release with redirection  393, 
394, 404, 409
Random access latency optimization  247
Rate shaping  366–368
Received interference power (RIP)  31
Reference signal received power (RSRP)  25, 
29, 30, 103, 117, 201, 214, 300, 380, 407, 
423, 500, 596, 614, 684, 705, 742, 751
Reference signal received quality (RSRQ)  6, 
29, 30, 125, 173, 215, 299, 309, 335, 338, 
539, 582, 636, 708
RE power  49, 58, 64, 119, 182
Reselection optimization  283, 314, 327
Retainability  28, 135, 204, 217, 345, 557, 619, 
702, 804
RF optimization  44, 61, 325, 342, 403
RIM procedure  308, 386–388, 392, 413
RLC segmentation  492, 508, 512, 690
Robust header compression  470, 472
s
S1 interface  6, 90, 160, 230, 298, 369, 406, 693, 
782, 812
Self‐organizing network (SON)  43
Service data flows  364
Signalling storm  786, 788
Signal to interference plus noise ratio 
(SINR)  2, 74, 102, 199, 200, 297, 336, 379, 
423, 498, 500, 590, 614, 692, 705, 736, 748
SIP message  19, 435, 462, 512, 575, 587, 604, 
607, 789
Smartphone‐based optimization  372
Sounding signal  729, 747
Spectral efficiency  5, 17, 99, 107, 141, 153, 
180, 200
Spectrum  3, 9, 20, 99, 140, 154, 194, 345, 729, 757
Speed dependent cell reselection  354
SPS scheduling  477, 647
SRVCC parameters optimization  539
System
capacity  6, 21, 49, 442, 475, 486, 633
information and timers  76
t
TA and LA mapping relationship  399
Technology evolution  32, 43
3D geolocation  32, 37–39
Throughput optimization  158, 161, 170, 175, 
180, 185
Timing advance (TA)  30
Token bucket algorithm  366
Tracking area (TA)  711
Traffic
flow template  364, 462, 466, 617
model  94, 143, 360, 381, 652, 717, 770, 780
Transmission modes  99, 100, 489
TTI bundling  15, 17, 439, 498, 500, 513, 591
u
UE velocity  34, 169, 192
UL and DL imbalance  129
UL IoT control  210
UL sequence group  723, 725, 727
Uplink
CoMP for VoLTE  475
reference signal  702, 721
v
Vertical coverage  137
Voice
codec  444, 486, 492, 512, 579, 584
communication evolution  385
quality  17, 434, 491, 522, 567, 579, 597, 
635, 769
VoLTE
capacity  141, 486, 584, 587
coverage  491, 500, 503, 510, 512
delay  513, 515
protocol stack  435
service KPI  579
w
Wideband SRS  512, 734–737
x
X2 interface  9, 192, 260, 348, 350, 443, 476
www.ebook3000.com

LTE Optimization Engineering Handbook, First Edition. Xincheng Zhang. 
© 2018 John Wiley & Sons Singapore Pte. Ltd. Published 2018 by John Wiley & Sons Singapore Pte. Ltd.
BlueLayer
–70dBm - Max
GreenLayer
–80dBm - – 70dBm
YellowLayer
–90dBm - –80dBm
OrangeLayer
–100dBm - –90dBm
RedLayer
Min - –100dBm
BlueLayer
–8dB - Max
GreenLayer
–10dB - –8dB
YellowLayer
–12dB - –10dB
OrangeLayer
–16dB - –12dB
RedLayer
Min - –16dB
BlueLayer
16MB - Max
GreenLayer
12MB - 16MB
YellowLayer
8MB - 12MB
OrangeLayer
4MB - 8MB
RedLayer
Min - 4MB
Figure 2.18  Network performances at different floors of the buildings.

RSRP=–129dBm, SINR= –4dB
Maximum cell range is 36.61 Km
Distance Total: 36.610Km
Figure 3.12  Example of extended coverage.
www.ebook3000.com

M2M (op1)
M2M (op2)
PC (op1)
PC (op2)
iPhone (op1)
iPhone (op2)
Android (op1)
Android (op2)
feature phone (op1)
feature phone (op2)
60%
50%
40%
30%
20%
10%
0%
2 sec
10 sec
60 sec
3600 sec
ratio pf active subscribers during busy hour [%]
inactivity timer [sec]
Figure 4.11  Connected users vs. RRC inactivity timer.

–115
–110
–105
–100
RSSI (dBm)
RSSI from antenna 0
RSSI from antenna 1
RSSI from antenna 2
RSSI from antenna 3
RSSI from antenna 4
RSSI from antenna 5
RSSI from antenna 6
RSSI from antenna 7
Figure 4.40  Antenna issue.
www.ebook3000.com

Figure 5.1  DL (RS) and UL (PUSCH) interference map.

Figure 11.140  RSRP and SINR distribution.
www.ebook3000.com

1,000
900
800
700
600
500
400
300
200
100
0
–100
–200
0
250
500
750
X-Axis
Y-Axis
1,000
1,250
Session dropping positions
Figure 11.187  Call drop distribution.

