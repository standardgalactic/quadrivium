www.ebook3000.com

Optimal Resource
Allocation for
Distributed Video
Communication
© 2014 by Taylor & Francis Group, LLC

Multimedia Computing, Communication and Intelligence
Series Editors: Chang Wen Chen and Shiguo Lian
Effective Surveillance for Homeland Security: Balancing Technology and
Social Issues 
Edited by Francesco Flammini, Roberto Setola, and Giorgio Franceschetti
ISBN: 978-1-4398-8324-2 
Music Emotion Recognition 
Yi-Hsuan Yang and Homer H. Chen
ISBN: 978-1-4398-5046-6 
Optimal Resource Allocation for Distributed Video and Multimedia
Communications 
Yifeng He, Ling Guan, and Wenwu Zhu
ISBN: 978-1-4398-7514-8
TV Content Analysis: Techniques and Applications 
Edited by Yiannis Kompatsiaris, Bernard Merialdo, and Shiguo Lian
ISBN: 978-1-4398-5560-7
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource
Allocation for
Distributed Video
Communication
Yifeng He s Ling Guan s Wenwu Zhu
© 2014 by Taylor & Francis Group, LLC

CRC Press
Taylor & Francis Group
6000 Broken Sound Parkway NW, Suite 300
Boca Raton, FL 33487-2742
© 2014 by Taylor & Francis Group, LLC
CRC Press is an imprint of Taylor & Francis Group, an Informa business
No claim to original U.S. Government works
Version Date: 20130507
International Standard Book Number-13: 978-1-4398-7516-2 (eBook - PDF)
This book contains information obtained from authentic and highly regarded sources. Reasonable 
efforts have been made to publish reliable data and information, but the author and publisher cannot 
assume responsibility for the validity of all materials or the consequences of their use. The authors and 
publishers have attempted to trace the copyright holders of all material reproduced in this publication 
and apologize to copyright holders if permission to publish in this form has not been obtained. If any 
copyright material has not been acknowledged please write and let us know so we may rectify in any 
future reprint.
Except as permitted under U.S. Copyright Law, no part of this book may be reprinted, reproduced, 
transmitted, or utilized in any form by any electronic, mechanical, or other means, now known or 
hereafter invented, including photocopying, microfilming, and recording, or in any information stor-
age or retrieval system, without written permission from the publishers.
For permission to photocopy or use material electronically from this work, please access www.copy-
right.com (http://www.copyright.com/) or contact the Copyright Clearance Center, Inc. (CCC), 222 
Rosewood Drive, Danvers, MA 01923, 978-750-8400. CCC is a not-for-profit organization that pro-
vides licenses and registration for a variety of users. For organizations that have been granted a pho-
tocopy license by the CCC, a separate system of payment has been arranged.
Trademark Notice: Product or corporate names may be trademarks or registered trademarks, and are 
used only for identification and explanation without intent to infringe.
Visit the Taylor & Francis Web site at
http://www.taylorandfrancis.com
and the CRC Press Web site at
http://www.crcpress.com
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

CRC Press
Taylor & Francis Group
6000 Broken Sound Parkway NW, Suite 300
Boca Raton, FL 33487-2742
© 2014 by Taylor & Francis Group, LLC
CRC Press is an imprint of Taylor & Francis Group, an Informa business
No claim to original U.S. Government works
Printed on acid-free paper
Version Date: 20130507
International Standard Book Number-13: 978-1-4398-7514-8 (Hardback)
This book contains information obtained from authentic and highly regarded sources. Reasonable 
efforts have been made to publish reliable data and information, but the author and publisher cannot 
assume responsibility for the validity of all materials or the consequences of their use. The authors and 
publishers have attempted to trace the copyright holders of all material reproduced in this publication 
and apologize to copyright holders if permission to publish in this form has not been obtained. If any 
copyright material has not been acknowledged please write and let us know so we may rectify in any 
future reprint.
Except as permitted under U.S. Copyright Law, no part of this book may be reprinted, reproduced, 
transmitted, or utilized in any form by any electronic, mechanical, or other means, now known or 
hereafter invented, including photocopying, microfilming, and recording, or in any information stor-
age or retrieval system, without written permission from the publishers.
For permission to photocopy or use material electronically from this work, please access www.copy-
right.com (http://www.copyright.com/) or contact the Copyright Clearance Center, Inc. (CCC), 222 
Rosewood Drive, Danvers, MA 01923, 978-750-8400. CCC is a not-for-profit organization that pro-
vides licenses and registration for a variety of users. For organizations that have been granted a pho-
tocopy license by the CCC, a separate system of payment has been arranged.
Trademark Notice: Product or corporate names may be trademarks or registered trademarks, and are 
used only for identification and explanation without intent to infringe.
Visit the Taylor & Francis Web site at
http://www.taylorandfrancis.com
and the CRC Press Web site at
http://www.crcpress.com
© 2014 by Taylor & Francis Group, LLC

CRC Press
Taylor & Francis Group
6000 Broken Sound Parkway NW, Suite 300
Boca Raton, FL 33487-2742
© 2014 by Taylor & Francis Group, LLC
CRC Press is an imprint of Taylor & Francis Group, an Informa business
No claim to original U.S. Government works
Printed on acid-free paper
Version Date: 20130507
International Standard Book Number-13: 978-1-4398-7514-8 (Hardback)
This book contains information obtained from authentic and highly regarded sources. Reasonable 
efforts have been made to publish reliable data and information, but the author and publisher cannot 
assume responsibility for the validity of all materials or the consequences of their use. The authors and 
publishers have attempted to trace the copyright holders of all material reproduced in this publication 
and apologize to copyright holders if permission to publish in this form has not been obtained. If any 
copyright material has not been acknowledged please write and let us know so we may rectify in any 
future reprint.
Except as permitted under U.S. Copyright Law, no part of this book may be reprinted, reproduced, 
transmitted, or utilized in any form by any electronic, mechanical, or other means, now known or 
hereafter invented, including photocopying, microfilming, and recording, or in any information stor-
age or retrieval system, without written permission from the publishers.
For permission to photocopy or use material electronically from this work, please access www.copy-
right.com (http://www.copyright.com/) or contact the Copyright Clearance Center, Inc. (CCC), 222 
Rosewood Drive, Danvers, MA 01923, 978-750-8400. CCC is a not-for-profit organization that pro-
vides licenses and registration for a variety of users. For organizations that have been granted a pho-
tocopy license by the CCC, a separate system of payment has been arranged.
Trademark Notice: Product or corporate names may be trademarks or registered trademarks, and are 
used only for identification and explanation without intent to infringe.
Visit the Taylor & Francis Web site at
http://www.taylorandfrancis.com
and the CRC Press Web site at
http://www.crcpress.com
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Contents
List of Figures
ix
List of Tables
xiii
Preface
xv
1
Introduction
1
1.1
Introduction
. . . . . . . . . . . . . . . . . . . . . . . . . . .
1
1.2
Technical Challenges in Distributed Video Communications .
3
1.3
Recent Advances in Optimal Resource Allocation for Dis-
tributed Video Communications
. . . . . . . . . . . . . . . .
4
1.3.1
Optimal Resource Allocation in P2P Streaming Systems
4
1.3.1.1
P2P Live Streaming Systems . . . . . . . . .
5
1.3.1.2
P2P VoD Streaming Systems . . . . . . . . .
6
1.3.2
Optimal Resource Allocation for Video Streaming over
Wireless Ad Hoc Networks
. . . . . . . . . . . . . . .
8
1.3.3
Optimal Resource Allocation for Wireless Visual Sensor
Networks
. . . . . . . . . . . . . . . . . . . . . . . . .
10
1.4
Overview of the Book
. . . . . . . . . . . . . . . . . . . . . .
11
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
13
2
Optimized Resource Allocation for Scalable Video Commu-
nications
17
2.1
Network-Adaptive Resource Allocation for Scalable Video
Streaming over the Internet . . . . . . . . . . . . . . . . . . .
18
2.2
QoS-Adaptive Resource Allocation for Scalable Video Trans-
mission over Cellular Networks . . . . . . . . . . . . . . . . .
24
2.2.1
Hybrid UEP and Delay-Constrained ARQ for Scalable
Video Delivery . . . . . . . . . . . . . . . . . . . . . .
28
2.2.2
Distortion-Minimized Resource Allocation . . . . . . .
30
2.2.3
Power-Minimized Resource Allocation . . . . . . . . .
32
2.3
Power-Minimized Joint Power Control and Resource Allocation
for Video Communications over Wireless Channels . . . . . .
35
2.3.1
Power-Rate Relationship and Power-Minimized Rate
Allocation for a Single User . . . . . . . . . . . . . . .
37
2.3.2
Power-Rate Relationship and Power-Minimization Rate
Allocation for a Group of Users . . . . . . . . . . . . .
39
v
© 2014 by Taylor & Francis Group, LLC

vi
Contents
2.4
Summary
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
43
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
43
3
Optimal Resource Allocation for P2P Streaming Systems
49
3.1
Overview of P2P Streaming Systems . . . . . . . . . . . . . .
50
3.1.1
P2P Live Streaming Systems . . . . . . . . . . . . . .
51
3.1.2
P2P VoD Systems
. . . . . . . . . . . . . . . . . . . .
52
3.2
Distributed Throughput Maximization for Scalable P2P VoD
systems
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
54
3.2.1
Throughput Maximization in Buﬀer-Forwarding P2P
VoD Systems . . . . . . . . . . . . . . . . . . . . . . .
55
3.2.1.1
Problem Formulation . . . . . . . . . . . . .
55
3.2.1.2
Distributed Solution . . . . . . . . . . . . . .
59
3.2.1.3
Simulation Results . . . . . . . . . . . . . . .
61
3.2.2
Throughput Maximization in Hybrid-Forwarding P2P
VoD Systems . . . . . . . . . . . . . . . . . . . . . . .
65
3.2.2.1
Problem Formulation . . . . . . . . . . . . .
66
3.2.2.2
Simulation Results . . . . . . . . . . . . . . .
69
3.3
Streaming Capacity for P2P VoD systems . . . . . . . . . . .
72
3.3.1
Streaming Capacity for an Independent-Channel P2P
VoD System . . . . . . . . . . . . . . . . . . . . . . . .
74
3.3.2
Streaming Capacity for a Correlated-Channel P2P VoD
System
. . . . . . . . . . . . . . . . . . . . . . . . . .
77
3.3.2.1
Optimization of Server Upload Allocation
among Channels . . . . . . . . . . . . . . . .
77
3.3.2.2
Cross-Channel Sharing of Peer Upload Band-
width . . . . . . . . . . . . . . . . . . . . . .
79
3.3.3
Simulation Results . . . . . . . . . . . . . . . . . . . .
80
3.4
Summary
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
83
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
85
4
Prefetching Scheme and Substream Allocation in P2P VoD
Applications
89
4.1
Optimal Prefetching Scheme in P2P VoD Applications with
Guided Seeks . . . . . . . . . . . . . . . . . . . . . . . . . . .
90
4.1.1
Introduction
. . . . . . . . . . . . . . . . . . . . . . .
90
4.1.2
Seeking Statistics Aggregation
. . . . . . . . . . . . .
93
4.1.2.1
Intuitive Approach . . . . . . . . . . . . . . .
95
4.1.2.2
The Proposed Hybrid Sketches . . . . . . . .
95
4.1.2.3
Estimation of Segment Access Probability . .
97
4.1.3
Optimal Prefetching Scheme
. . . . . . . . . . . . . .
97
4.1.3.1
The Optimal Prefetching Scheme . . . . . . .
97
4.1.3.2
The Optimal Cache Replacement Policy . . .
102
4.1.4
Simulation Results . . . . . . . . . . . . . . . . . . . .
102
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Contents
vii
4.1.4.1
Performance Evaluation of Seeking Statistics
Aggregation
. . . . . . . . . . . . . . . . . .
103
4.1.4.2
Performance Evaluation of the Prefetching
Scheme . . . . . . . . . . . . . . . . . . . . .
106
4.1.5
Practical Issues . . . . . . . . . . . . . . . . . . . . . .
110
4.2
Optimization of Substream Allocation in Layered P2P Appli-
cations
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
112
4.2.1
Optimal Substream Allocation Scheme . . . . . . . . .
112
4.2.1.1
Single-File system . . . . . . . . . . . . . . .
112
4.2.1.2
Multi-File system
. . . . . . . . . . . . . . .
114
4.2.2
Evolution of Video Quality and Peer Population
. . .
115
4.2.3
Simulation Results . . . . . . . . . . . . . . . . . . . .
116
4.3
Summary
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
118
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
119
5
Video Streaming over Wireless Ad Hoc Networks
123
5.1
System Models . . . . . . . . . . . . . . . . . . . . . . . . . .
124
5.1.1
Video Distortion Model . . . . . . . . . . . . . . . . .
124
5.1.2
Network Model . . . . . . . . . . . . . . . . . . . . . .
125
5.1.3
Packet Loss Model . . . . . . . . . . . . . . . . . . . .
125
5.2
Optimized Video Unicasting over Wireless Ad Hoc Networks
127
5.2.1
Problem Formulation and Distributed Solution . . . .
128
5.2.1.1
Problem Formulation . . . . . . . . . . . . .
128
5.2.1.2
Distributed Solution . . . . . . . . . . . . . .
129
5.2.2
Simulation results
. . . . . . . . . . . . . . . . . . . .
130
5.3
Optimized Video Multicasting over FDMA Wireless Ad Hoc
Networks
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
132
5.3.1
Problem Formulation and Distributed Solution . . . .
133
5.3.1.1
Problem Formulation . . . . . . . . . . . . .
133
5.3.1.2
Distributed Solution . . . . . . . . . . . . . .
134
5.3.2
Simulation Results . . . . . . . . . . . . . . . . . . . .
136
5.4
Distributed Cross-Layer Optimization for Video Multicasting
over CDMA Wireless Ad Hoc Networks
. . . . . . . . . . . .
139
5.4.1
Problem Formulation
. . . . . . . . . . . . . . . . . .
140
5.4.2
Distributed Algorithm . . . . . . . . . . . . . . . . . .
141
5.4.2.1
First-Layer Decomposition
. . . . . . . . . .
141
5.4.2.2
Second-Layer Decomposition . . . . . . . . .
142
5.4.3
Simulation Results . . . . . . . . . . . . . . . . . . . .
145
5.5
Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . .
154
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
154
6
Optimal Resource Allocation for Wireless Visual Sensor Net-
works
157
6.1
Introduction
. . . . . . . . . . . . . . . . . . . . . . . . . . .
158
6.2
System Models . . . . . . . . . . . . . . . . . . . . . . . . . .
159
© 2014 by Taylor & Francis Group, LLC

viii
Contents
6.2.1
Network Graph . . . . . . . . . . . . . . . . . . . . . .
159
6.2.2
Channel Error Model
. . . . . . . . . . . . . . . . . .
160
6.2.3
Power Consumption Model
. . . . . . . . . . . . . . .
161
6.2.4
Network Lifetime . . . . . . . . . . . . . . . . . . . . .
162
6.3
Achievable Maximum Network Lifetime
. . . . . . . . . . . .
162
6.3.1
Problem Formulation
. . . . . . . . . . . . . . . . . .
163
6.3.2
Distributed Algorithm . . . . . . . . . . . . . . . . . .
165
6.3.3
Simulation Results . . . . . . . . . . . . . . . . . . . .
167
6.4
Maximum Network Lifetime for Large-Delay Applications . .
171
6.4.1
Problem Formulation and Solution . . . . . . . . . . .
171
6.4.2
Simulation Results . . . . . . . . . . . . . . . . . . . .
172
6.5
Maximum Network Lifetime for Small-Delay Applications . .
175
6.5.1
With FEC . . . . . . . . . . . . . . . . . . . . . . . . .
175
6.5.1.1
Problem Formulation and Solution . . . . . .
175
6.5.1.2
Simulation Results . . . . . . . . . . . . . . .
177
6.5.2
Without FEC . . . . . . . . . . . . . . . . . . . . . . .
177
6.5.2.1
Transmission Distortion . . . . . . . . . . . .
180
6.5.2.2
Tradeoﬀbetween Maximum Network Lifetime
and Video Quality . . . . . . . . . . . . . . .
181
6.6
Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . .
182
Bibliography
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
183
Index
187
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

List of Figures
2.1
Block diagram of our network-adaptive bit allocation scheme
for PFGS streaming with UEP
. . . . . . . . . . . . . . . .
21
2.2
The packetization scheme for PFGS with UEP . . . . . . . .
22
2.3
Generation of FEC packets using ﬁxed-length packetization
scheme . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
23
2.4
End-to-end architecture for video over 3G network
. . . . .
26
2.5
Rate-distortion relation with FEC scheme . . . . . . . . . .
27
2.6
Rate-distortion relation with ARQ scheme and delay caused
by ARQ scheme . . . . . . . . . . . . . . . . . . . . . . . . .
28
2.7
Block diagram of hybrid UEP/delay-constrained ARQ scheme
for PFGS delivery over 3G . . . . . . . . . . . . . . . . . . .
29
2.8
Rate-distortion relation with hybrid UEP/delay-constrained
ARQ scheme . . . . . . . . . . . . . . . . . . . . . . . . . . .
33
2.9
Architecture for joint power control and rate control in MS
36
2.10
The total rate of given user when ﬁxing Φk and target Eb/N0
39
2.11
The total power consumption of given user as a function of
source rate, total rate, and Eb/N0 requirement . . . . . . . .
40
2.12
The total rate of given user with various Φk and ﬁxed target
Eb/N0
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
41
3.1
Transmission sliding window for the packet transmission over
the overlay link l from peer j to peer i: (a) if tbs
j < tp
i + din
i ,
and (b) if tbs
j ≥tp
i + din
i
. . . . . . . . . . . . . . . . . . . .
57
3.2
Message transmission from peer k to peer i
. . . . . . . . .
61
3.3
Performance comparison in buﬀer-forwarding P2P VoD sys-
tems with diﬀerent network sizes: (a) the average throughput,
and (b) the average PSNR
. . . . . . . . . . . . . . . . . .
63
3.4
Comparison of the cost introduced by the proposed dis-
tributed algorithm in buﬀer-forwarding P2P VoD systems
with diﬀerent network sizes: (a) the number of the overlay
links, (b) the average number of iterations per link, and (c)
the average communication overhead per node . . . . . . . .
64
3.5
The impact of the regularization factor on the communication
overhead and the average throughput in a 200-peer buﬀer-
forwarding P2P VoD system . . . . . . . . . . . . . . . . . .
65
3.6
Illustration of a hybrid-forwarding P2P VoD system . . . . .
66
ix
© 2014 by Taylor & Francis Group, LLC

x
List of Figures
3.7
Performance comparison with diﬀerent network sizes: (a) the
average throughput, and (b) the average PSNR . . . . . . .
70
3.8
Comparison of the cost between the hybrid-forwarding archi-
tecture and the buﬀer-forwarding architecture with diﬀerent
network sizes: (a) the number of the overlay links, (b) the
average number of iterations per link, and (c) the average
communication overhead per node . . . . . . . . . . . . . . .
71
3.9
Illustration of an independent-channel P2P VoD system
. .
75
3.10
Illustration of the complete overlay in an independent-channel
P2P VoD system
. . . . . . . . . . . . . . . . . . . . . . . .
76
3.11
Illustration of a correlated-channel P2P VoD system
. . . .
81
3.12
Comparison of average streaming capacity with diﬀerent num-
ber of channels
. . . . . . . . . . . . . . . . . . . . . . . . .
82
3.13
Impact of server upload capacity to the average streaming
capacity . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
83
3.14
Performance improvement brought by cross-channel peer up-
load sharing: (a) peer upload utilization ratio, and (b) average
streaming capacity
. . . . . . . . . . . . . . . . . . . . . . .
84
4.1
The proposed framework for P2P VoD applications with
guided seeks . . . . . . . . . . . . . . . . . . . . . . . . . . .
93
4.2
Determine the prefetching scheme when segment i is being
watched
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
98
4.3
Comparison of the compression ratio and the average counting
error at diﬀerent sampling ratios
. . . . . . . . . . . . . . .
103
4.4
Comparison of the mean absolute error ε at diﬀerent sampling
ratios . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
104
4.5
Segment access probability estimated from FM sketches with
full sampling, (a) 2-D segment access probability P(x, y), and
(b) conditional access probability given that the current posi-
tion is segment 9
. . . . . . . . . . . . . . . . . . . . . . . .
105
4.6
Comparison of the seeking delay: (a) the seeking delays in
an individual session, and (b) the average seeking delay in 50
sessions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
107
4.7
Comparison of the average seeking delay in a session by vary-
ing: (a) the average upload capacity, and (b) the download
capacity of the receiving peer
. . . . . . . . . . . . . . . . .
108
4.8
Comparison of the average seeking delay in an individual ses-
sion with a diﬀerent number of maximum cached segments .
109
4.9
Comparison of the average communication overhead with dif-
ferent segment length . . . . . . . . . . . . . . . . . . . . . .
110
4.10
Steps of the proposed substream allocation scheme
. . . . .
114
4.11
Average PSNR with varying request rate . . . . . . . . . . .
116
4.12
Average PSNR with varying number of qualiﬁed peers . . .
117
4.13
Evolution of expected PSNR . . . . . . . . . . . . . . . . . .
117
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

List of Figures
xi
4.14
Evolution of expected number of qualiﬁed peers . . . . . . .
118
5.1
Two state Markov model . . . . . . . . . . . . . . . . . . . .
126
5.2
Iterations of the primal variables for video unicasting over a
wireless ad hoc network: (a) source rate, and (b) link rates .
131
5.3
PSNR comparison among the proposed scheme, congestion-
minimized routing scheme, and double-disjoint-path routing
scheme, for video unicasting over a wireless ad hoc network
132
5.4
Iterations of primal variables for video multicasting over a
FDMA wireless ad hoc network: (a) conceptual source rates,
and (b) multicast link rates
. . . . . . . . . . . . . . . . . .
137
5.5
Frame PSNR comparison at node 11 for video multicasting
over a FDMA wireless ad hoc network
. . . . . . . . . . . .
138
5.6
Iterations of (a) conceptual source rates, (b) multicast link
rates, and (c) transmit powers, for video multicasting over a
CDMA wireless ad hoc network . . . . . . . . . . . . . . . .
146
5.7
Comparison between the optimized scheme and the uniform-
power scheme for video multicasting over a CDMA wireless
ad hoc network: (a) throughput comparison, and (b) average
PSNR comparison . . . . . . . . . . . . . . . . . . . . . . . .
147
5.8
Frame PSNR comparison at node 6 between the optimized
scheme and the uniform-power scheme for video multicasting
over a CDMA wireless ad hoc network . . . . . . . . . . . .
148
5.9
Comparison of reconstructed frame 26 of Foreman QCIF se-
quence at node 6 between the optimized scheme and the
uniform-power scheme for video multicasting over a CDMA
wireless ad hoc network: (a) the uniform-power scheme
(30.097 dB) and (b) the optimized scheme (33.706 dB) . . .
149
5.10
Comparison between the optimized scheme and the tree-based
schemes for video multicasting over a CDMA wireless ad hoc
network: (a) throughput comparison, and (b) average PSNR
comparison
. . . . . . . . . . . . . . . . . . . . . . . . . . .
151
5.11
Frame PSNR comparison at node 10 between the optimized
scheme and the double-tree scheme for video multicasting over
a CDMA wireless ad hoc network . . . . . . . . . . . . . . .
152
5.12
Comparison of reconstructed frame 13 of Foreman QCIF se-
quence at node 10 among three schemes for video multicast-
ing over a CDMA wireless ad hoc network: (a) the single-tree
scheme (30.747 dB), (b) the double-tree scheme (31.282 dB),
and (c) the optimized scheme (34.755 dB) . . . . . . . . . .
153
6.1
Tradeoﬀbetween the suboptimality and the complexity for
diﬀerent regularization factors: (a) the number of iterations
for convergence, and (b) the maximum network lifetime
. .
168
6.2
Comparison of power consumption at each sensor node . . .
169
© 2014 by Taylor & Francis Group, LLC

xii
List of Figures
6.3
Tradeoﬀbetween encoding distortion requirement and achiev-
able maximum network lifetime in lossless transmission . . .
170
6.4
Reduction of maximum network lifetime in large-delay WVSN
applications . . . . . . . . . . . . . . . . . . . . . . . . . . .
173
6.5
Comparison of maximum network lifetime in large-delay
WVSN applications: (a) with diﬀerent encoding distortion re-
quirement, and (b) with diﬀerent average PLR
. . . . . . .
174
6.6
Reduction of maximum network lifetime in small-delay WVSN
applications with FEC . . . . . . . . . . . . . . . . . . . . .
178
6.7
Comparison of maximum network lifetime in small-delay
WVSN applications with FEC: (a) with diﬀerent encoding
distortion requirement, and (b) with diﬀerent average PLR .
179
6.8
Tradeoﬀbetween the maximum network lifetime and the dis-
tortion in the lossy transmission . . . . . . . . . . . . . . . .
181
6.9
Comparison of three schemes in the lossy transmission . . .
182
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

List of Tables
4.1
Notations in the optimal prefetching framework for P2P VoD
applications . . . . . . . . . . . . . . . . . . . . . . . . . . .
94
5.1
Comparison of average PSNR between the optimized routing
scheme and the double-tree routing scheme for video multi-
casting over a FDMA wireless ad hoc network . . . . . . . .
136
6.1
Conﬁguration of model parameters in a wireless visual sensor
network
. . . . . . . . . . . . . . . . . . . . . . . . . . . . .
167
xiii
© 2014 by Taylor & Francis Group, LLC

© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Preface
Recent years have witnessed a dramatic growth in multimedia applications,
due to the tremendous advancement in several emerging technologies in digi-
tal media, communications, and networking. Multimedia data in a variety of
popular formats such as image, animation, audio, and video have become the
mainstream contents on the Internet and are being accessed by various mobile
devices through wireless links. The diverse deployment of multimedia applica-
tions has been driving the ﬁeld of multimedia communications and networking
into a new era of truly ubiquitous media consumption, at any time and from
anywhere.
Many multimedia applications, such as large-scale IPTV and collabo-
rative wireless video streaming, involve real-time video transmissions over
distributed systems. Examples of such distributed systems are Peer-to-Peer
(P2P) streaming systems, wireless ad hoc networks, and Wireless Sensor Net-
works (WSNs). Though each type of distributed system has its own features,
they share two common characteristics as follows. 1) Each node only knows
about its neighbors, and does not have global knowledge. 2) There is typically
no centralized controller, who can coordinate the behaviors of all the nodes.
There are many challenges for real-time transmissions of video over dis-
tributed systems. First, video streaming applications are sensitive to packet
delay and packet loss. Second, network conditions and characteristics, such as
bandwidth, packet loss ratio, delay, and delay jitter, vary from time to time.
Third, it is challenging for the underlying networks (e.g., Internet and wireless
networks) to provide real-time Quality of Service (QoS) guarantees to video
streaming applications. Optimal resource allocation provides an eﬃcient solu-
tion to improve the video quality for video communications over distributed
systems. The problem in the distributed systems can be formulated into a
resource allocation problem with an objective to maximize (or minimize) a
performance metric, subject to the resource constraints at each node. Since
there is no centralized controller in the distributed systems, a distributed algo-
rithm is the desired solution in terms of the scalability and the communication
overhead.
This book examines the techniques for optimal resource allocation for dis-
tributed video and multimedia communications over Internet, wireless cellu-
lar networks, wireless ad hoc networks, and wireless sensor networks. This
book consists of six chapters. Chapter 1 provides an overview of distributed
systems, the challenges for distributed video communications, and the re-
cent advances on optimal resource allocation for distributed video commu-
xv
© 2014 by Taylor & Francis Group, LLC

xvi
Preface
nications. Chapter 2 presents the resource allocation techniques for scal-
able video communications over the Internet or wireless networks, including
the following three speciﬁc topics: 1) network-adaptive resource allocation for
scalable video streaming over the Internet, 2) Quality of Service (QoS) adap-
tive resource allocation for scalable video transmission over cellular networks,
and 3) power-minimized joint power control and resource allocation for video
communications over wireless channels. Chapter 3 examines two resource
allocation problems, which are: 1) distributed throughput maximization for
scalable P2P VoD systems, and 2) streaming capacity for P2P VoD systems.
In the throughput maximization problem, the distributed algorithms are pre-
sented to maximize the throughput for buﬀer-forwarding P2P VoD systems
and hybrid-forwarding P2P VoD systems, respectively. In the streaming ca-
pacity problem, intra-channel and cross-channel resources are optimized to
improve the streaming capacity for P2P VoD systems. Chapter 4 presents
an optimal prefetching framework, based on the segment access information,
to reduce the seeking delay in P2P VoD applications. The segment access
information is gathered with the hybrid sketches, which greatly reduces the
space and time complexity. This chapter also gives an optimal substream allo-
cation scheme in layered P2P VoD applications to improve the video quality.
Chapter 5 examines the distributed optimization techniques for unicast and
multicast video streaming over wireless ad hoc networks. For unicast video
streaming over wireless ad hoc networks, the expected distortion is minimized
by jointly optimizing both the source rate and the routing scheme. For multi-
cast video streaming over wireless ad hoc networks, a cross-layer optimization
scheme is presented to jointly optimize the source rate, the routing scheme,
and the power allocation for video streaming. Chapter 6 examines the net-
work lifetime maximization problem in wireless visual sensor networks. A dis-
tributed algorithm is developed to maximize the network lifetime by jointly
optimizing the source rates, the encoding powers, and the routing scheme.
The target audience of the book includes researchers, educators, students,
and engineers. The book can serve as a reference book in the undergraduate or
graduate courses on multimedia communications and multimedia networking.
It can also be used as a reference in research of multimedia communications
and design of multimedia systems.
Yifeng He, Ling Guan, and Wenwu Zhu
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

1
Introduction
CONTENTS
1.1
Introduction .......................................................
1
1.2
Technical Challenges in Distributed Video Communications .....
3
1.3
Recent Advances in Optimal Resource Allocation for Distributed
Video Communications ...........................................
4
1.3.1
Optimal Resource Allocation in P2P Streaming Systems .
4
1.3.1.1
P2P Live Streaming Systems ....................
5
1.3.1.2
P2P VoD Streaming Systems ....................
6
1.3.2
Optimal Resource Allocation for Video Streaming over
Wireless Ad Hoc Networks ................................
8
1.3.3
Optimal Resource Allocation for Wireless Visual Sensor
Networks ...................................................
10
1.4
Overview of the Book .............................................
11
Bibliography .............................................................
13
1.1
Introduction
Recent years have witnessed a dramatic growth in multimedia applications,
due to the tremendous advancement in several emerging technologies in digi-
tal media, communications, and networking. Multimedia data in a variety of
popular formats such as image, animation, audio, and video have become the
mainstream contents on the Internet and are being accessed by various mobile
devices through wireless links. The diverse deployment of multimedia applica-
tions has been driving the ﬁeld of multimedia communications and networking
into a new era of true ubiquitous media consumption at any time and from
anywhere.
Among all types of multimedia, digital video has been considered the dom-
inating media form because of its volumetric spatial-temporal presentation
nature. Over the past few years, digital video has already become the main
traﬃc payload for Internet and major wireless networks. YouTube [1], a suc-
cessful Internet video service, has been attracting a huge amount of users.
According to the YouTube statistics [2], over 3 billion videos were viewed a
day in 2010, more than 13 million hours of video were uploaded during 2010
1
© 2014 by Taylor & Francis Group, LLC

2
Optimal Resource Allocation for Distributed Video Communications
and 48 hours of video are uploaded every minute. Annual global IP traﬃc
will reach the zettabyte threshold (966 exabytes or nearly 1 zettabyte) by the
end of 2015 [3]. Internet video was 40 percent of consumer Internet traﬃc in
2011, and will reach 61 percent by the end of 2015, not including the amount
of video exchanged through Peer-to-Peer (P2P) ﬁle sharing. The sum of all
forms of video (TV, Video on Demand (VoD), Internet, and P2P) will con-
tinue to be approximately 90 percent of global consumer traﬃc by 2015. The
real-time video such as live video, ambient video, and video calling are tak-
ing an ever greater share of video traﬃc [3]. Globally, mobile data traﬃc will
increase 26 times between 2010 and 2015 [4]. Mobile data traﬃc will grow at
a Compound Annual Growth Rate (CAGR) of 92 percent between 2010 and
2015, reaching 6.3 exabytes per month by 2015. Because mobile video content
has much higher bit rates than other mobile content types, mobile video will
generate much of the mobile traﬃc growth through 2015. Mobile video traﬃc
accounted for 52.8 percent of traﬃc in 2011 [4].
Many multimedia applications involve real-time video transmissions over
distributed systems, in which there is no centralized controller. Examples of
such distributed systems are Peer-to-Peer (P2P) networks, wireless ad hoc
networks and Wireless Sensor Networks (WSNs). Though each type of dis-
tributed system has its own features, they share two common characteristics
as follows. 1) Each node only knows about its neighbors, and does not have
global knowledge. 2) There is typically no centralized controller, who can coor-
dinate the behaviors of all the nodes. Therefore, a centralized algorithm is not
practical for distributed systems. Instead, distributed algorithms are desired.
Since the appearance of Napster [5], a P2P ﬁle sharing service, in early
1999, P2P networks have experienced tremendous growth. In 2003, P2P be-
came the most popular Web application. At the end of 2004, P2P traﬃc
represented over 60% of the total Internet traﬃc, dwarﬁng Web browsing [6].
This rapid success was fueled by ﬁle transfer networks which allow users to
swap the blocks of a ﬁle, despite the large time often necessary to complete
a download. It is expected to continue at a fast pace, as new compelling P2P
applications are developed. VoD has become an extremely popular service on
the Internet. For example, YouTube [1] provides its services via servers. The
deployment cost is expensive. It is appealing to apply P2P technology to VoD
applications as P2P does not require any dedicated infrastructure and is self-
scaling as the resources of the network increase with the number of users. In
P2P VoD, a video is transported to a large number of asynchronous viewers
by taking advantage of the uplink capability of the viewers to forward data.
The major diﬀerence from P2P ﬁle sharing applications is that this should
happen in real-time, to provide all connected users with a TV-like viewing
experience.
Wireless ad hoc networks are multi-hop wireless networks without a pre-
installed infrastructure. They can be deployed quickly at conventions, disaster
recovery areas, and battleﬁelds. When deployed, mobile nodes cooperate with
each other to ﬁnd routes and relay packets for each other. There is a com-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
3
pelling need for video streaming over wireless ad hoc networks. For example, a
group of visitors in a museum would like to share their captured video in real-
time. They can set up a wireless ad hoc network using their Personal Digital
Assistants (PDAs), and then multicast the video to each group member.
A WSN is a system consisting of geographically distributed sensor nodes
that communicate with each other over wireless channels. Without the need
for a communication infrastructure, the WSN is self-organized and highly dy-
namic, with each node sensing and forwarding the data [1]. A Wireless Visual
Sensor Network (WVSN) is a special kind of WSN, in that each sensor is
equipped with video capture and processing components. A WVSN captures
digital visual information about target events or situations and delivers the
video data to a Remote Control Unit (RCU) for further information analy-
sis and decision making. Because of its unique features of rapid deployment,
ﬂexibility, low maintenance cost, and robustness, WVSNs have been used in
a wide range of important applications, including security monitoring, emer-
gence response, environmental tracking, and health monitoring.
1.2
Technical Challenges in Distributed Video Commu-
nications
The Internet is a best-eﬀort network, which cannot provide bandwidth, loss
and delay guarantees. Wireless communications typically suﬀer from interfer-
ence and channel fading. Despite the recent advances on video streaming over
distributed systems, many challenges have not yet been well addressed.
In P2P streaming applications, high video quality and low startup delay
are two major goals. However, it is diﬃcult to achieve these two goals. First,
the access bandwidth of the peers is often limited, especially the upload band-
width. Second, the peers may leave the network at any time, which creates a
highly unreliable and dynamic network fabric. Third, each user requests the
video at a diﬀerent time, and the video content is delivered from the heteroge-
nous peers. Fourth, it has been observed that users frequently seek a diﬀerent
position rather than watching sequentially in VoD applications, which places
a greater challenge on playback continuity.
In wireless ad hoc networks, a wireless link usually has a high transmission
error rate because of shadowing, fading, and interferences from other trans-
mitting users. An end-to-end path in ad hoc networks has an even higher
error rate since it is the concatenation of multiple wireless links. Moreover,
user mobility makes the network topology frequently change. An end-to-end
route may only exist for a short period of time. The frequent link failures and
route changes cause packet losses, thus degrading the received video quality.
In wireless visual sensor networks, each video sensor operates under a set of
unique resource constraints, including limited energy supply, limited on-board
© 2014 by Taylor & Francis Group, LLC

4
Optimal Resource Allocation for Distributed Video Communications
computational capability, and low transmission bandwidth. In conventional
wireless sensor networks, the power for signal processing at each sensor is very
small. In contrast, the video sensor in WVSNs compresses the video before
transmission. The compression takes a large amount of power, and raises a
greater challenge for maintaining a long network lifetime.
1.3
Recent Advances in Optimal Resource Allocation for
Distributed Video Communications
Optimal resource allocation provides an eﬃcient solution to the problem
for video communications over distributed systems. The problem in the dis-
tributed systems can be formulated into a resource allocation problem with
an objective to maximize (or minimize) a performance metric, subject to the
resource constraints at each node. The resource constraints include the ﬂow
conservation, the limitation of upload and download capacities, the limita-
tion of buﬀer and storage capacities, the limitation of power supply, and the
application-layer requirement (for example, the distortion requirement). Since
there is no centralized controller in the distributed systems, a distributed algo-
rithm is the desired solution in terms of the scalability and the communication
overhead.
In this section, we provide a review of recent advances on optimal resource
allocation for video communications over some major distributed systems in-
cluding P2P streaming systems, wireless ad hoc networks, and wireless visual
sensor networks.
1.3.1
Optimal Resource Allocation in P2P Streaming Sys-
tems
P2P streaming is one of the major applications on P2P overlay networks. In
P2P streaming systems, each peer contributes its resources (e.g., bandwidth,
buﬀer, and storage) to the community. Meanwhile, it retrieves the requested
streams from other peers. The collaboration among peers enables each user
to receive a high video quality. Depending on the applications, P2P stream-
ing systems can be classiﬁed into P2P live streaming systems and P2P VoD
streaming systems. In a P2P live streaming system, all of the users watch the
same segment of the video at the same time, such that they can share the
content with each other. In a P2P VoD streaming system, each user requests
the video at a diﬀerent time, therefore a peer can only request the content
from the peer with an earlier playback progress.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
5
1.3.1.1
P2P Live Streaming Systems
The optimization of the scheduling problem in data-driven P2P live streaming
systems is studied in [8]. In data-driven P2P live streaming systems, the video
is divided into blocks. There is an exchanging window at each peer containing
the blocks that the peer is requesting. Every peer periodically notiﬁes each of
its neighbors the availability of the blocks. Then peers will request their absent
blocks from neighbors. Diﬀerent blocks have diﬀerent priority. For instance,
the blocks that have fewer suppliers should be requested preemptively such
that they can be spread more quickly. Two factors have been considered in
the priority deﬁnition: rarity factor and emergency factor. The rarity factor is
considered ﬁrst to guarantee the rarest block should be requested in priority,
while the emergency factor is used to reduce the probability that the requested
blocks miss the playback deadline. The objective of the optimal scheduling
problem in [8] is to maximize the sum of priorities of all requested blocks in
the overlay under the bandwidth constraints. To solve the optimal scheduling
problem, a heuristic algorithm is developed, which is fully distributed and
asynchronous with only local information exchange.
The end-to-end latency in P2P live streaming systems is investigated in
[9], in which the optimization problem is formulated to minimize the average
end-to-end streaming latency, subject to the constraints of the peer upload
and download bandwidth. A distributed solution to the optimization prob-
lem is designed using Lagrangian decomposition and subgradient method. In
the distributed algorithm, each peer carries out distributed steps with only
local information, and such distributed execution achieves the global optimal
objective.
In [10], Setton et al. propose that distortion-optimized retransmission re-
quests are issued by receiving peers in a tree-based P2P live system to recover
the most important missing packets while limiting the induced congestion.
After detecting a parent disconnection, a peer can determine a list of missing
packets and iteratively select the most important ones to request. This choice
should depend on the time at which packets are due, and on the contribution
of each packet to the overall video quality.
In the P2P application-layer overlay, multiple content distribution or me-
dia streaming sessions are expected to be running concurrently. It is impor-
tant to provide diﬀerentiated services among the sessions. For example, a live
streaming session should be handled with a higher priority than a content
distribution session of bulk data. The problem of service diﬀerentiation across
P2P communication sessions is examined in [11]. In order to select better paths
and guarantee the rate for high-priority sessions, a utility function at link l for
session s is given by U s
l = Cs log(1 + Qlxs
l ), where Ql denotes the quality of
link l, Cs is the priority of session s, and xs
l denotes the bandwidth allocation
to session s at link l. The optimization problem of service diﬀerentiation is
formulated to maximize the summation of the utilities among all the sessions
with the constraints of the heterogeneous upload and download capacities at
© 2014 by Taylor & Francis Group, LLC

6
Optimal Resource Allocation for Distributed Video Communications
each peer. A fully distributed algorithm is developed to solve the optimization
problem using the subgradient method and Lagrangian relaxation.
Due to bandwidth constraint, most of the current P2P live streaming sys-
tems provide the video at a low bit rate. Users would like to watch the video
at a higher quality. However, the P2P network may not be able to deliver the
video at a high rate. Therefore, what is the upper bound of the streaming rate
in a P2P system becomes an attractive topic. In [32], Sengupta et al. deﬁne
the streaming capacity as the maximum supported streaming rate that can be
received by every receiver, and compute the streaming capacity in a multi-tree
P2P live streaming system. The streaming capacity problem is formulated to
maximize the streaming rate r, given by r = P
t∈T yt where T is the set
of all allowed trees for the live session, and yt is the rate of the sub-stream
supported by tree t. The constraint in the streaming capacity problem is the
upload capacity at each peer. An iterative combinatorial algorithm is designed
to solve the streaming capacity problem approximately.
Most P2P live video systems oﬀer a large number of channels, with users
switching frequently among the channels. Wu et al. study the performance
of multichannel P2P live video systems by using inﬁnite-server queueing net-
work models [43][14]. In multi-channel P2P streaming systems, optimal uti-
lization of cross-channel resources can improve the system performance. In
[15], a View-Upload Decoupling (VUD) scheme is proposed to decouple peer
downloading from uploading, bringing stability to multichannel systems and
enabling cross-channel resource sharing. In [16], Wang et al. formulate lin-
ear programming problems to maximize the sum of the bandwidth satisfac-
tion ratios of all channels for three bandwidth allocation schemes, namely
the Naive Bandwidth allocation Approach (NBA), the Passive Channel-aware
bandwidth allocation Approach (PCA) and the Active Channel-aware band-
width allocation Approach (ACA), respectively.
1.3.1.2
P2P VoD Streaming Systems
In P2P VoD streaming systems, the peers watching the same video can be or-
ganized into an overlay based on the playback progress, such that the peer with
an earlier playback time can supply streams to the peer with a later playback
time. The min-cost ﬂow routing problem in P2P VoD systems is studied in [9].
The ﬂow routing problem is formulated as a linear program with an objective
of minimizing the aggregated link cost, subject to the inequality constraints of
the peer upload and download capacities and the equality constraint that each
peer has the same playback rate. A distributed auction algorithm is proposed
to solve the min-cost ﬂow routing problem.
Most of the existing P2P VoD systems only adopt single-layer video coding
[9, 11]. If the source rate is high, the peers with a limited or low download
bandwidth may not be able to accommodate it. On the other hand, if the
source rate is too low, the peers with a higher download bandwidth may un-
derutilize their download bandwidth. Therefore, a scalable source coding is
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
7
a good solution for P2P VoD applications with heterogeneous bandwidth. In
a scalable P2P VoD system, one of the goals is to maximize the aggregate
throughput over all the peers. In [19], the throughput maximization prob-
lem in the scalable P2P VoD system is formulated to maximize the aggregate
throughput by optimally allocating the link rates, subject to the source rate
constraint representing that the received rate at any peer is no larger than the
maximal source rate, the download bandwidth constraint, the upload bandwidth
constraint, and the link-forwarding constraint representing that each outgoing
link from peer i carries a rate no larger than the total incoming rate into the
peer. A distributed algorithm is developed to solve the throughput maximiza-
tion problem using Lagrangian decomposition and subgradient method.
Depending on the forwarding approach, the existing P2P VoD systems
can be classiﬁed into two categories: buﬀer-forwarding architecture [9, 10] and
storage-forwarding architecture [25, 11]. In buﬀer-forwarding architectures,
each peer buﬀers the recently received content, and forwards it to the child
peers. In storage-forwarding architectures, the video content is distributed
over the storage of peers. When a peer wants to watch a video, it ﬁrst looks
for the serving peers who are storing the content, and then requests the con-
tent from them in parallel. In order to fully utilize the resources in the P2P
VoD systems, a hybrid architecture integrating both the buﬀer-forwarding ap-
proach and storage-forwarding approach is proposed [22, 23]. The throughput
maximization problem in the hybrid P2P VoD architecture is formulated, and
a distributed algorithm is designed to maximize the throughput by optimizing
the link rates.
Unlike the users in P2P live streaming systems who watch the broadcast
video passively, the users in P2P VoD streaming systems may seek to any
position that he or she is interested in, as demonstrated in [3]. The behaviors
of random seek place a great challenge to the playback continuity. Zheng et
al. propose a prefetching scheme to improve the playback continuity [3]. The
user seeking pattern is obtained from the previous seeking statistics. Based
on the seeking pattern, the segments that will be prefetched are determined
optimally to minimize the expected seeking distance, the deviation between
the desired seeking position and the scheduled position. The Lloyd algorithm
is used to solve the prefetching optimization problem.
The work in [3] represents the seeking pattern using one-dimensional Prob-
ability Density Function (PDF) P(y) where y is the destination segment of
a seek. In order to capture the seeking behaviors in a more accurate way,
the work in [25] uses two-dimensional PDF, denoted as P(x, y), representing
the probability that a user performs a seek from the start segment x to the
destination segment y. In [26], the concept of guided seek is introduced. With
the guidance of the two-dimensional PDF, users can perform eﬃcient seeks
to the desired positions. The guidance can be obtained from collective seek-
ing statistics of other peers who have watched the same title in the previous
and/or concurrent sessions. Hybrid sketches are designed to capture the seek-
ing statistics at signiﬁcantly reduced space and time complexity. Furthermore,
© 2014 by Taylor & Francis Group, LLC

8
Optimal Resource Allocation for Distributed Video Communications
an optimal prefetching scheme and an optimal cache replacement scheme are
proposed to minimize the expected seeking delay by optimally determining
the segments to be prefetched.
In P2P VoD streaming systems, a peer can only request the desired seg-
ments from the peer with an earlier playback progress. Therefore, the stream-
ing capacity in P2P VoD streaming systems is diﬀerent from that in P2P live
streaming systems. The streaming capacity in a P2P VoD streaming system
is formulated to maximize the streaming rate that can be received by every
peer, subject to the limitations of upload and download capacities at each peer
[27][37]. In [29], helpers are introduced in the P2P VoD system and the helper
resources are optimized to improve the streaming capacity. The streaming
capacity for multi-channel P2P VoD systems is studied in [46], in which the
cross-channel resource sharing schemes are proposed to maximize the average
streaming capacity.
1.3.2
Optimal Resource Allocation for Video Streaming over
Wireless Ad Hoc Networks
Depending on the number of simultaneous receivers, video streaming over
wireless ad hoc networks can be classiﬁed into two classes: unicast and multi-
cast [1].
In unicast video streaming, path diversity is very attractive since it pro-
vides an eﬀective means to combat transmission errors in wireless ad hoc
networks. In [32], a path selection scheme is proposed for multi-path video
streaming over wireless ad hoc networks. The optimization problem is formu-
lated to minimize the concurrent Packet Drop Probability (PDP) by selecting
two optimal paths.
The approach of selecting paths by minimizing packet loss [32] does not
guarantee the minimization of the expected video distortion. A distortion-
minimized scheme is proposed in [33] for unicast video streaming over wireless
ad hoc networks. The received video distortion consists of the encoding distor-
tion and the transmission distortion, which is given by Ddec = Denc + Dtran.
The encoding distortion Denc is introduced by the quantization at the encoder,
and it can be calculated by Denc = D0 + θ/(R −R0) where R is the rate of
the video, and (D0, θ, R0) are the parameters relative to video encoding. The
transmission distortion is caused by the packet loss, and it can be calculated
by Dtran = κ(Pr + (1 −Pr)e−(C′−R)T/L′) where Pr is the random packet loss
due to transmission errors, and (κ, C′, T, L′) are positive parameters which
are discussed in [33]. At lower rates, reconstructed video quality is limited by
coarse quantization, whereas at high rates, the video stream will cause more
network congestion and therefore will lead to longer packet delays. These, in
turn, translate into higher loss rates, hence reduced video quality. Therefore,
the optimal video rate can be obtained by R∗= arg min Ddec.
The combination of Multiple Description Coding (MDC) and multi-path
transport has shown the superiority in terms of error resilience [6]. Optimiza-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
9
tion of the routing scheme for a single unicast video session in wireless ad
hoc networks is examined in [14]. The video is encoded into two MDC de-
scriptions. The optimization problem is formulated to minimize the expected
video distortion by ﬁnding the optimal path for each description. A Genetic
Algorithm (GA) based solution is provided to solve the optimization problem.
The work in [32, 33, 14] studies the unicast video streaming from a single
sender to a single receiver. The optimization of a multi-path routing scheme
for a video streaming session from two senders to a single receiver is presented
in [36]. The optimization problem is formulated to minimize the expected
distortion of the MDC video by selecting the optimal sender and the optimal
path from the sender to the receiver for each MDC description.
Joint optimization of the source rate and the routing scheme for unicast
video streaming is studied in [37]. The received video distortion is given by
Ddec = D0 + θ0/((sr −P
l∈L plxl) + φ0) where sr is the source rate, xl is
the link rate at link l, pl is the packet loss rate at link l, and (D0, θ0, φ0) are
the predetermined parameters. The optimization problem is stated as follows.
Given a wireless ad hoc network and a unicast session from a sender to a
receiver, to minimize the received video distortion Ddec by optimally deter-
mining the source rate sr and the link rate xl at link l, subject to the network
ﬂow constraint and the link capacity constraint. A distributed algorithm using
dual decomposition is developed to solve the optimization problem.
Diﬀerent from the single video session, multiple concurrent video sessions
in a wireless ad hoc network have to compete for limited network resources.
Such interactions make the performance of an individual ﬂow couple with
that of other ﬂows. Joint optimization of the source rate and the routing
scheme for multiple concurrent video sessions in wireless ad hoc networks is
investigated in [38, 23]. In [38], the optimization problem is formulated to
minimize the sum of the average distortions of all concurrent video sessions
by jointly optimizing the source rate and the routing path for each video
session. A greedy heuristic algorithm is proposed to ﬁnd the near-optimal
solution to the optimization problem. In [23], the objective of the optimization
problem is to minimize the Lagrangian sum of the total video distortion and
the overall network congestion. A distributed algorithm is proposed to solve
the optimization problem.
Multicast video streaming over wireless ad hoc networks is bandwidth-
eﬃcient compared to multiple unicast sessions. Multiple-tree routing algo-
rithms are proposed to explore the path diversity for each receiver. Two typ-
ical multiple-tree video multicast schemes in wireless ad hoc networks are
presented in [26, 25], respectively.
In [26], Zakhor et al. propose a multiple-tree construction protocol that
builds two nearly disjoint trees simultaneously in a distributed manner. How-
ever, the trees are built based on the network-layer metrics, and the application
performance has not yet been optimized.
In [25], two multicast trees are constructed to deliver two MDC descrip-
tions. Each description is layered, encoded to meet the heterogeneous capacity
© 2014 by Taylor & Francis Group, LLC

10
Optimal Resource Allocation for Distributed Video Communications
of the receivers. The optimization problem is formulated to minimize the total
video distortion of all receivers by constructing two optimal trees. A GA-based
heuristic is proposed to solve the optimization problem.
A joint optimization of the source rate and the routing scheme for multi-
cast video streaming over wireless ad hoc networks is presented in [42]. A joint
optimization of the source rate, the routing scheme, and the power allocation
for multicast video streaming is studied in [43]. In [43], a prioritized coding
scheme, a combination of the layered source coding and the network cod-
ing [4], is employed to enable the heterogeneous receivers to reconstruct the
video at diﬀerent quality levels. The network coding eliminates the delivery
redundancy. Therefore, a larger throughput at a receiver can lead to a smaller
distortion. The optimization problem is stated as follows. Given a wireless
ad hoc network and a multicast session from a sender to multiple receivers,
to maximize the aggregate throughput by optimally determining the source
rate, the routing scheme and the power allocation, subject to the constraint
of ﬂow conservation, the link capacity constraint, and the power constraint.
A distributed algorithm using hierarchical dual decompositions is developed
to solve the optimization problem.
1.3.3
Optimal Resource Allocation for Wireless Visual Sen-
sor Networks
Sensor nodes are typically battery powered, and battery replacement is infre-
quent or even impossible in many sensing applications. Hence, a tremendous
amount of research eﬀorts in wireless sensor networks has been focused on
energy conservation. One aspect of this research is to maximize the network
lifetime, which is typically deﬁned as the time from the start of the network
until the death of the ﬁrst node [4, 7]. In [4], the network lifetime maximization
problem is formulated into a convex optimization problem [19]. A distributed
algorithm using Lagrangian decomposition is developed to maximize the net-
work lifetime by optimizing the routing scheme.
The performance of wireless sensor network applications is typically a func-
tion of the amount of data collected by the individual sensors. There is an
inherent trade-oﬀin simultaneously maximizing the network lifetime and the
application performance. Such tradeoﬀis investigated in [7, 6]. In [7], the ap-
plication performance is characterized by a network utility function, which is
strictly concave and increasing with respect to the data rate. The network
lifetime is the minimum of the node lifetime, which is characterized by a
lifetime-penalty function for each node. The optimization problem is formu-
lated to maximize the Lagrangian sum of the network utility and the network
lifetime, by jointly optimizing the source rates and the routing scheme.
The algorithms [4] that maximize the network lifetime in conventional
wireless ad hoc networks cannot be applied directly to the wireless visual
sensor networks, since they omit the encoding power consumption at the
sensor nodes. The network lifetime maximization for wireless visual sensor
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
11
networks is studied in [49, 50]. In [50], the relationship among the encod-
ing power, the source rate, and the encoding distortion is characterized by
dsh = σ2e−γ·Rh·P 2/3
sh
[16], where dsh is the encoding distortion of the video
encoded at sensor h, Rh is the source rate generated at sensor h, Psh is the
encoding power consumption at sensor h, σ2 is the average input variance,
and γ is the encoding eﬃciency coeﬃcient. The problem of maximum network
lifetime is stated as follows. Given the topology of a static WVSN and the
initial energy at each node, to maximize the network lifetime by jointly opti-
mizing the source rate and the encoding power at each video sensor, and the
link rates for each session, subject to the constraint of ﬂow conservation and
the requirement of the collected video quality. A fully distributed algorithm
using the properties of Lagrangian duality is developed to solve the network
lifetime maximization problem.
The ultimate goal of the WVSN is to utilize its limited resources to collect
as much visual information as possible. A metric, called Accumulative Visual
Information (AVI), is introduced in [8] to measure the amount of visual in-
formation collected by the video sensor. The AVI is a function of the bit rate
R and the encoding power P, which is given by I = f(R, P). The optimal re-
source allocation problem in WVSN can be formulated to maximize the AVI
by optimizing the allocation of the bit rate and encoding power for each frame
of the video.
The power consumption P0 at a video sensor mainly consists of the encod-
ing power Ps and the transmission power Pt [2], which is given by P0 = Ps+Pt.
If the encoding power Ps is decreased, the distortion d of the video is increased,
i.e., Ps ↓⇒d ↑. On the other hand, since the total power consumption P0
is ﬁxed, the transmission power Pt will be decreased if the encoding power
Ps is increased. This implies that fewer bits can be transmitted because the
transmission energy is proportional to the number of bits to be transmitted.
Therefore, Ps ↑⇒d ↑. In other words, when the encoding power Ps goes too
low or too high, the distortion d will become large. The distortion can be min-
imized by optimally allocating the encoding power Ps and the transmission
power Pt [2].
1.4
Overview of the Book
This book examines the techniques for optimal resource allocation for dis-
tributed video and multimedia communications over Internet, wireless cellular
networks, wireless ad hoc networks, and wireless sensor networks.
In Chapter 2, we present the resource allocation techniques for scalable
video communications over the Internet or wireless networks. Speciﬁcally, we
examine four topics: 1) network-adaptive resource allocation for scalable video
streaming over the Internet, 2) Quality of Service (QoS) adaptive resource al-
© 2014 by Taylor & Francis Group, LLC

12
Optimal Resource Allocation for Distributed Video Communications
location for scalable video transmission over cellular networks, and 3) power-
minimized joint power control and resource allocation for video communica-
tions over wireless channels.
In Chapter 3, we examine two resource allocation problems, which are:
1) distributed throughput maximization for scalable P2P VoD systems, and
2) streaming capacity for P2P VoD systems. In the throughput maximiza-
tion problem, we present distributed algorithms to maximize the throughput
for buﬀer-forwarding P2P VoD systems and hybrid-forwarding P2P VoD sys-
tems, respectively. In the streaming capacity problem, we optimize both intra-
channel resource allocation and cross-channel resource allocation to improve
the streaming capacity for P2P VoD systems.
In Chapter 4, we present an optimal prefetching framework to reduce
the seeking delay in P2P VoD applications. We design the hybrid sketches
to represent the seeking statistics, thus greatly reducing the space and time
complexity. Based on the segment access information, we develope an optimal
prefetching scheme and an optimal cache replacement scheme to minimize the
expected seeking delay at every viewing position. We also present an optimal
substream allocation scheme in layered P2P VoD applications to improve the
video quality.
In Chapter 5, we examine the distributed optimization techniques for uni-
cast and multicast video streaming over wireless ad hoc networks. For unicast
video streaming over wireless ad hoc networks, we minimize the expected dis-
tortion by jointly optimizing both the source rate and the routing scheme. For
multicast video streaming over wireless ad hoc networks, we examine video
streaming under diﬀerent communication models including Frequency Divi-
sion Multiple Access (FDMA) and Code Division Multiple Access (CDMA).
In video multicasting over FDMA wireless ad hoc networks, we optimize both
the source rate and the routing scheme to improve the video quality. In video
multicasting over CDMA wireless ad hoc networks, we present a cross-layer
optimization scheme to jointly optimize the source rate, the routing scheme,
and the power allocation for video streaming.
In Chapter 6, we examine the network lifetime maximization problem in
wireless visual sensor networks. We ﬁrst investigate the achievable maximum
network lifetime in WVSN without transmission errors. We then further ex-
amine the maximum network lifetime considering transmission errors. We in-
vestigate the error remedy techniques in both large-delay WVSN applications
and small-delay WVSN applications, and study their impacts on maximum
network lifetime. We derive distributed algorithms by using dual decomposi-
tion to maximize the network lifetime by jointly optimizing the source rates,
the encoding powers, and the routing scheme.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
13
Bibliography
[1] http://www.youtube.com/
[2] http://www.youtube.com/t/press statistics
[3] Cisco
White
Paper,
“Entering
the
Zettabyte
Era,”
Jun.
2011.
http://www.cisco.com
[4] Cisco White Paper, “Cisco Visual Networking Index: Global Mobile Data
Traﬃc Forecast Update, 2010 C2015,” Feb. 2011. http://www.cisco.com
[5] http://www.napster.com
[6] M. Meeker, “The State of the Internet,” in Web 2.0 conference, Nov. 2006.
[7] I. Akyildiz, W. Su, Y. Sankarasubramaniam, and E. Cayirci, “A survey
on sensor networks,” IEEE Communication Magazine, no. 8, pp. 102-114,
Aug. 2002.
[8] M. Zhang, Y. Xiong, Q. Zhang, and S. Yang, “On the Optimal Scheduling
for Media Streaming in Data-driven Overlay Networks,” in Proc. of IEEE
GLOBECOM, pp. 1-5, Nov. 2006.
[9] C. Wu and B. Li, “Optimal Peer Selection for Minimum-Delay Peer-to-
Peer Streaming with Rateless Codes,” in Proc. of ACM MM, pp. 69-78,
Nov. 2005.
[10] E. Setton, J. Noh, and B. Girod, “Rate-Distortion Optimized Video Peer-
to-Peer Multicast Streaming,” in Proc. of ACM MM, pp. 39-45, Nov. 2005.
[11] C. Wu and B. Li, “Diverse: Application-Layer Service Diﬀerentiation in
Peer-to-Peer Communications,” IEEE Journal on Selected Areas in Com-
munications, vol. 25, no. 1, pp. 222-234, Jan. 2007.
[12] S. Sengupta, S. Liu, M. Chen, M. Chiang, J. Li, and P. A. Chou, “Stream-
ing Capacity in Peer-to-Peer Networks with Topology Constraints,” Mi-
crosoft Research Technical Report, 2008.
[13] D. Wu, Y. Liu, and K.W. Ross, “Queuing network models for multichan-
nel P2P live streaming systems,” in Proc. of IEEE INFOCOM, pp. 73-81,
Apr. 2009.
[14] D. Wu, Y. Liu, and K.W. Ross, “Modeling and Analysis of Multichannel
P2P Live Video Systems,” IEEE/ACM Transactions on Networking, VOL.
18, NO. 4,, vol. 18, no. 4, pp. 1248-1260, Aug. 2010.
© 2014 by Taylor & Francis Group, LLC

14
Optimal Resource Allocation for Distributed Video Communications
[15] D. Wu, C. Liang, Y. Liu, and K.W. Ross, “View-Upload Decoupling: A
Redesign of Multi-Channel P2P Video Systems,” in Proc. of IEEE INFO-
COM, pp. 2726-2730, Apr. 2009.
[16] M. Wang, L. Xu and B. Ramamurthy “Linear Programming Models For
Multi-Channel P2P Streaming Systems,” in Proc. of IEEE INFOCOM,
pp. 1-5, Mar. 2010.
[17] Z. Li and A. Mahanti, “A Progressive Flow Auction Approach for Low-
Cost On-Demand P2P Media Streaming,” in Proc. of ACM QShine, Aug.
2006.
[18] W. P. Yiu, X. Jin and S. H. Chan, “Distributed storage to support user
interactivity in peer-to-peer video streaming,” in Proc. of IEEE ICC, vol.
1, pp. 55-60, Jun. 2006.
[19] Y. He, I. Lee, and L. Guan, “Distributed rate allocation in p2p stream-
ing,” in Proc. of ICME, pp. 388-391, Jul. 2007.
[20] C. Huang, J. Li, and K. W. Ross, “Peer-Assisted VoD: Making Internet
Video Distribution Cheap,” in Proc. of IPTPS, Feb. 2007.
[21] Y. Shen, Z. Liu, S. S. Panwar, K. W. Ross, and Y. Wang, “Streaming
Layered Encoded Video Using Peers,” in Proc. of ICME, Jul. 2005.
[22] Y. He, I. Lee, and L. Guan, “Distributed throughput maximization in
hybrid-forwarding P2P VoD applications,” in Proc. of ICASSP, pp. 2165-
2168, Apr. 2008.
[23] Y. He, I. Lee, and L. Guan, “Distributed throughput optimization in P2P
VoD applications,” IEEE Transactions on Multimedia, vol. 11, no. 3, pp.
509-522, Apr. 2009.
[24] C. Zheng, G. Shen, and S. Li, “Distributed Prefetching Scheme for Ran-
dom Seek Support in Peer-to-Peer Streaming Applications,” in Proc. of
ACM MM, pp. 29-38, Nov. 2005.
[25] Y. He, G. Shen, Y. Xiong and L. Guan, “Probabilistic prefetching scheme
for P2P VoD applications with frequent seeks,” in Proc. of ISCAS, pp.
2054-2057, May 2007.
[26] Y. He, G. Shen, Y. Xiong and L. Guan “Optimal prefetching scheme in
P2P VoD applications with guided seeks,” IEEE Transactions on Multi-
media, vol. 11, no. 1, pp. 138-151, Jan. 2009.
[27] Y. He and L. Guan, “Streaming capacity in P2P VoD systems,” in Proc.
of ISCAS, pp. 742-745, May 2009.
[28] Y. He and L. Guan, “Solving streaming capacity problems in P2P VoD
systems,” IEEE Transactions on Circuits and Systems for Video Technol-
ogy, vol. 20, no. 11, pp. 1638 C1642, Nov. 2010.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Introduction
15
[29] Y. He and L. Guan, “Improving the streaming capacity in P2P VoD
systems with helpers,” in Proc. of ICME, pp. 790-793, Jul. 2009.
[30] Y. He and L. Guan, “Streaming capacity in multi-channel P2P VoD sys-
tems,” in Proc. of ISCAS, pp. 1819-1822, May 2010.
[31] W. Wei and A. Zakhor, “Multipath unicast and multicast video commu-
nication over wireless ad hoc networks,” in Proc. of IEEE BroadNets, pp.
496-505, Oct. 2004.
[32] W. Wei and A. Zakhor, “Path Selection for Multi-Path Streaming in
Wireless Ad Hoc Networks,” in Proc. of IEEE ICIP, pp. 3045-3048, Oct.
2006.
[33] X. Zhu, E. Setton, and B. Girod, “Congestion-Distortion Optimized
Video Transmission over Ad Hoc Networks,” Journal of Signal Process-
ing: Image Communications, no. 20, pp. 773-783, Sep. 2005.
[34] S. Mao, S. Lin, S. Panwar, Y. Wang, and E. Celebi, “Video transport over
ad hoc networks: Multistream coding with multipath transport,” IEEE
Journal on Selected Areas in Communications, vol. 21, no. 10, pp. 1721-
1737, Dec. 2003.
[35] S. Mao, Y. T. Hou, X. Cheng, H. D. Sherali, and S. F. Midkiﬀ, “Multipath
routing for multiple description video over wireless ad hoc networks,” in
Proc. of IEEE INFOCOM, pp. 740-750, Mar. 2005.
[36] S. Mao, X. Cheng, Y. T. Hou, H. D. Sherali, and J. H. Reed, “Joint
Routing and Server Selection for Multiple Description Video Streaming
in Ad Hoc Networks,” in Proc. of IEEE ICC, vol. 5, pp. 2993-2999, May
2005.
[37] Y. He, I. Lee, and L. Guan, “Optimized multi-path routing using dual
decomposition for wireless video streaming,” in Proc. of ISCAS, pp. 977-
980, May 2007.
[38] S. Mao, S. Kompella, Y. T. Hou, H. D. Sherali, and S. F. Midkiﬀ, “Rout-
ing for Concurrent Video Sessions in Ad Hoc Networks,” IEEE Transac-
tions on Vehicular Technology, vol. 55, no. 1, pp. 317-327, Jan. 2006.
[39] X. Zhu, J. P. Singh, and B. Girod, “Joint routing and rate allocation for
multiple video streams in ad hoc wireless networks,” Journal of Zhejiang
University, Science A, vol. 7, no. 5, pp. 727-736, May 2006.
[40] A. Zakhor and W. Wei, “Multiple Tree Video Multicast over Wireless Ad
Hoc Networks,” in Proc. of ICIP, pp. 1665-1668, Sep. 2006.
[41] S. Mao, X. Cheng, Y. T. Hou, and H. D. Sherali, “Multiple description
video multicast in wireless ad hoc networks,” in Proc. of IEEE BROAD-
NETS, pp. 671-680, Oct. 2004.
© 2014 by Taylor & Francis Group, LLC

16
Optimal Resource Allocation for Distributed Video Communications
[42] Y. He, I. Lee, and L. Guan, “Video multicast over wireless ad hoc net-
works using distributed optimization,” in Proc. of IEEE PCM, pp. 296-
305, Dec. 2007.
[43] Y. He, I. Lee, and L. Guan, “Optimized video multicasting over wireless
ad hoc networks using distributed algorithm,” IEEE Transactions on Cir-
cuits and Systems for Video Technology, vol. 19, no. 6, pp. 796-807, Jun.
2009.
[44] R. Ahlswede, N. Cai, S.-Y. R. Li and R. W. Yeung, “Network information
ﬂow,” IEEE Transactions on Information Theory, vol. 46, pp. 1204-1216,
Jul. 2000.
[45] R. Madan, S. Lall, “Distributed algorithms for maximum lifetime routing
in wireless sensor networks,” IEEE Transactions on Wireless Communi-
cations, vol. 5, no. 8, pp. 2185-2193, Aug. 2006.
[46] H. Nama, M. Chiang, and N. Mandayam, “Utility-lifetime trade-oﬀin
self-regulating wireless sensor networks: A cross-layer design approach,”
in Proc. of IEEE ICC, vol. 8, pp. 3511-3516, Jun. 2006.
[47] S. Boyd and L. Vandenberghe, Convex Optimization, Cambridge Univer-
sity Press, 2004.
[48] J. Zhu, K. Hung, B. Bensaou, and F. Abdesselam, “Tradeoﬀbetween
network lifetime and fair rate allocation in wireless sensor networks with
multi-path routing,” in Proc. of ACM MSWiM, pp. 301-308, Oct. 2006.
[49] Y. He, I. Lee, and L. Guan, “Network lifetime maximization in wireless
visual sensor networks using a distributed algorithm,” in Proc. of ICME,
pp. 2174-2177, Jul. 2007.
[50] Y. He, I. Lee, and L. Guan, “Distributed algorithms for network lifetime
maximization in wireless visual sensor networks,” IEEE Transactions on
Circuits and Systems for Video Technology, vol. 19, no. 5, pp. 704-718,
May 2009.
[51] Z. He, Y. Liang, L. Chen, I. Ahmad, and D.Wu, “Power-rate-distortion
analysis for wireless video communication under energy constraint,” IEEE
Transactions on Circuits and Systems for Video Technology, vol. 15, no.
5, pp. 645-658, May 2005.
[52] Z. He and D. Wu, “Accumulative visual information in wireless video
sensor network: deﬁnition and analysis,” in Proc. of IEEE ICC, vol. 2, pp.
1205-1208, May 2005.
[53] Z. He and D. Wu, “Resource allocation and performance analysis of wire-
less video sensors,” IEEE Transactions on Circuits and Systems for Video
Technology, vol. 16, no. 5, pp. 590-599, May 2006.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

2
Optimized Resource Allocation for Scalable
Video Communications
CONTENTS
2.1
Network-Adaptive Resource Allocation for Scalable Video
Streaming over the Internet ......................................
18
2.2
QoS-Adaptive Resource Allocation for Scalable Video
Transmission over Cellular Networks .............................
24
2.2.1
Hybrid UEP and Delay-Constrained ARQ for Scalable
Video Delivery .............................................
28
2.2.2
Distortion-Minimized Resource Allocation ................
30
2.2.3
Power-Minimized Resource Allocation .....................
32
2.3
Power-Minimized Joint Power Control and Resource Allocation
for Video Communications over Wireless Channels ..............
35
2.3.1
Power-Rate Relationship and Power-Minimized Rate
Allocation for a Single User ...............................
37
2.3.2
Power-Rate Relationship and Power-Minimization Rate
Allocation for a Group of Users ...........................
39
2.4
Summary ..........................................................
43
Acknowledgment ........................................................
43
Bibliography .............................................................
43
In video communications over networks, there is a tradeoﬀbetween video com-
pression and video transmission. In other words, there is a tradeoﬀbetween
the bitrate allocated for video source coding and the bit rate allocated for
channel coding, under a given bandwidth capacity constraint. Scalable Video
Coding (SVC) is a promising source coding technique which can adapt the
video quality to the available network bandwidth. SVC is the Annex G ex-
tension of the H.264 video compression standard. It is composed of one Base
Layer (BL) and one or multiple Enhancement Layers (ELs). Forward Error
Correction (FEC) is a channel coding technique, which has been widely used
in real-time video applications to satisfy the strict delay requirements.
In this chapter, we will present the techniques for optimal resource alloca-
tion for scalable video communications over the Internet or wireless networks.
Speciﬁcally, we will examine the following four topics: 1) network-adaptive re-
source allocation for scalable video streaming over the Internet, 2) Quality of
17
© 2014 by Taylor & Francis Group, LLC

18
Optimal Resource Allocation for Distributed Video Communications
Service (QoS)-adaptive resource allocation for scalable video transmission over
cellular networks, and 3) power-minimized joint power control and resource
allocation for video communications over wireless channels.
2.1
Network-Adaptive Resource Allocation for Scalable
Video Streaming over the Internet
Audiovisual streaming over the Internet has become very popular today. Tech-
nically, delivery of streaming media over the Internet with Quality of Experi-
ence (QoE) has many challenges. On one hand, the current Internet only pro-
vides best-eﬀort service and it does not provide QoS guarantees or provision
for multimedia services. Speciﬁcally, network conditions and characteristics,
such as bandwidth, packet loss ratio, delay, and delay jitter, vary from time to
time. On the other hand, media encoders generally do not take the network
conditions into account. In general, diﬀerent kinds of media have diﬀerent
characteristics. Real-time media such as video or audio is delay sensitive but
capable of tolerating a certain degree of errors. Non-real-time media, such
as Web data, is less delay sensitive but requires reliable transmission. Con-
sequently, diﬀerent types of media may have diﬀerent quality impairments
under the same network conditions. Therefore, designing a high-quality me-
dia streaming system that can cope with varying Internet conditions becomes
important.
In the literature, several schemes have been developed for QoS manage-
ment, including resource reservation, priority mechanism, and application con-
trol. Resource Reservation Protocol (RSVP) is the most straightforward ap-
proach [3]. However, RSVP requires all routers to have QoS supports. In addi-
tion, it may tend to over-allocate resources for QoS guarantee, thus leading to
network under-utilization. In priority-based mechanisms, diﬀerent data pack-
ets or streams are labeled with diﬀerent priorities and treated diﬀerently in
the network routers. This is also called Diﬀerentiated Service (DiﬀServ). How-
ever, the exact mechanism for setting the priority levels and mapping from the
application priority levels to the router priority levels, the router mechanism
for controlling these levels, and the performance gains for deﬁning priority
classes are under investigation [32, 33]. In the application control, the QoS is
enforced by congestion control and transmission-rate adaptation [29, 16, 30].
The advantage is that there is almost no need to change the router or network
itself. However, the main challenge is to design eﬃcient congestion-and-ﬂow
control.
To eﬃciently transport media over the Internet, both real-time and non-
real-time systems are expected to react to congestion by adapting their trans-
mission rates and maintaining the inter-protocol fairness. Since a dominant
portion of today’s Internet traﬃc is TCP-based, it is very important for mul-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
19
timedia streams be “TCP-friendly,” by which we mean a media ﬂow generates
a similar throughput as a typical TCP ﬂow along the same path under the
same conditions with lower latency. There are two existing groups of TCP-
friendly ﬂow-control protocols for multimedia streaming applications: sender-
based rate adjustment and model-based ﬂow control. Sender-based rate ad-
justment [29, 16, 4] performs additive increase and multiplicative decrease
(AIMD) rate control in the sender as in TCP. The transmission rate is in-
creased in a step-like fashion in the absence of packet loss and reduced mul-
tiplicatively when congestion is detected. This approach usually requires the
receiver to send an acknowledgement for every received packet to detect con-
gestion indications, such as packet loss and timeouts. The drawbacks of this
approach are: 1) network congestion could severely degrade the performance
since frequent feedback packets are needed for ﬂow control; 2) the time-varying
network status cannot be reﬂected since the control scheme is independent of
packet loss ratio, bandwidth variation, and adjusting interval. Model-based
ﬂow control [24, 36, 34], on the other hand, uses a stochastic TCP model
[23], which represents the throughput of a TCP sender as a function of packet
loss ratio and Round Trip Time (RTT). Since this protocol can run in the
receiver, the congestion problem in the reverse path can be avoided. However,
this approach also has its shortcomings. First, the available bandwidth may
be over-estimated or under-estimated for high packet loss ratio. Second, the
estimated packet loss ratio is not for the next time interval so as to aﬀect the
accuracy of the throughput calculation. Third, sending rate is re-assigned to
meet the calculated bandwidth, and its ﬂuctuation is not suitable for contin-
uous media.
In some applications where audio, video, and data, or a set of visual el-
ements are delivered simultaneously over the Internet, the media rates are
usually aggregated. To make the aggregated bit rate equal to or less than the
Internet available bandwidth, independent control for each media is usually
employed by allocating a ﬁxed rate to each media. However, this may lead
to large variations in quality among diﬀerent media and thus cause ineﬃcient
utilization of the Internet resource. Unlike independent control, joint control
only needs to maintain a constant aggregate bit rate while allowing bit rate
of each media to vary. Recent studies have shown that joint control is more
eﬃcient than independent control for multiple media coding [39, 37, 10]. How-
ever, none of these approaches takes the time-varying network conditions into
account. Since diﬀerent media may have diﬀerent quality degradations under
various network situations, it is intuitive to move bits from less active and
lightly degraded media to more active and heavily degraded ones.
To address the above issues, we present a network-adaptive bit allocation
scheme for a multi-layer scalable video codec. Speciﬁcally, we ﬁrst present
a new Multimedia Streaming TCP-friendly Protocol (MSTFP) to iteratively
combine forward estimation of network condition with information feedback
control to optimally track network status. The MSTFP is well suited for con-
tinuous media streaming since it integrates accurate throughput calculation
© 2014 by Taylor & Francis Group, LLC

20
Optimal Resource Allocation for Distributed Video Communications
with history-related rate adjustment. Then, we present a novel resource allo-
cation scheme for multiple media streams to achieve end-to-end optimal qual-
ity according to the estimated network bandwidth and media rate-distortion
functions.
In the following bitrate-allocation formulation, we use the Progressive Fine
Granularity Scalable (PFGS) video codec as an example although our ap-
proach can be applied to any scalable codec such as MPEG Fine Granularity
Scalable (FGS) [12] or H.264 SVC. We combine PFGS codec with network-
adaptive Unequal Error Protection (UEP) across packets. We strongly protect
the base layer of PFGS against packet loss so as to be decodable even if no
enhancement layers are available by employing UEP based on Reed–Solomon
(RS) FEC code.
The diﬃculty encountered in joint bit allocation between source and Inter-
net channel is how to add FEC so that the decoder can recover the lost frames
correctly. Obviously, it can be observed that under a given channel rate, the
additional FEC packets reduce the available rate for source coding, thus result-
ing in a trade-oﬀbetween source coding and FEC. In the bit rate-allocation
formulation, we address the problem on the optimal bit rate allocation be-
tween the source and the FEC based on the Rate–Distortion (R–D) function
such that the decoder can successfully recover the lost packets. Speciﬁcally,
the optimal bit allocation is dynamically adjusted according to varying video
characteristic and network condition. We formulate this problem as follows.
Let R(t) denote the network bandwidth available for transmission at time t.
Let RS(t) and RF EC(t) denote PFGS source rate and the rate of FEC pack-
ets, respectively. Furthermore, let DS(t) and DF EC(t) represent PFGS source
distortion and distortion from FEC packets, respectively. Then, this problem
is to allocate the available bit rate at time t to minimize the end-to-end video
distortion by optimizing RS(t) and RF EC(t) under the following constraint:
RS(t) + RF EC(t) ≤R(t). Mathematically, the problem is formulated as:
Minimize
D = DS(t) + DF EC(t)
subject to
RS(t) + RF EC(t) ≤R(t).
(2.1)
The block diagram of our bit allocation scheme for the PFGS source and
UEP is illustrated in Figure 2.1. PFGS source coder encodes input video into
two layers: one is the base layer (BL) that carries the most important infor-
mation; the other is the enhancement layer (EL) that carries less important
information. The EL bit stream can be truncated anywhere. These layers are
packetized and protected against packet loss according to their importance
and network status using diﬀerent FEC. The channel estimation module adap-
tively updates the network status. On the receiver side, the channel decoder
reconstructs packets for each layer and displays video after source decoding.
To eﬃciently deliver video over the Internet, several error resilience mecha-
nisms have been adopted in the video coder, such as error localization, data
partition, error concealment, etc.
The idea of FEC across packets is to transmit additional packets that can
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
21
      Video                       
PFGS source 
encoder 
BL 
Channel-adaptive 
encoder 
unequal error protection 
Channel 
decoder 
Source 
decoder 
displayer 
Channel 
estimation 
Target bit 
allocation 
data path 
control path 
Internet
EL 
 
FIGURE 2.1
Block diagram of our network-adaptive bit allocation scheme for PFGS
streaming with UEP [43]
be used in the receiver to reconstruct lost packets. Here the FEC scheme uses
RS codes across packets. RS codes are perfectly suitable for error protection
against packet loss, because they are the only known non-trivial maximum
distance separable codes, i.e., there are no other existing codes that can re-
construct erased symbols from a smaller fraction of received code symbols
[15]. An RS(n, k) code with length n and dimension k encodes k information
symbols containing m bits per symbol into a codeword of n symbols. With
the knowledge of error position, RS(n, k) can generally correct up to t = n−k
symbol errors.
To evaluate the performance of an RS(n, k) code, we need to know the
probability that more than n −k packets are lost. We can compute this prob-
ability if we know the probability of which m packets are lost within n packets.
As stated in [43], we use the 2-state Markov model to estimate network
status. Such a model is determined by the distribution of error-free intervals
(gap). Let gap length v be the event that after a lost packet, v −1 packets are
received and then another packet is lost. The gap density function g(v) gives
the probability of gap length v, i.e., g(v) = Pr (1v−10|0). The gap distribution
function G(v) is the probability of gap length greater than v −1, i.e., G(v) =
Pr (1v−1|0). They can be derived as
g(v) =
(
1 −p
for v = 1,
p(1 −q)v−2q
for v > 1,
(2.2)
G(v) =
(
1
for v = 1,
p(1 −q)v−2
for v > 1.
(2.3)
Let R(m, n) be the probability of m−1 packet losses within the next n−1
packets followed by a lost packet. It can be calculated using recurrence as
follows:
R(m, n) =
(
G(n)
for m = 1,
Pn−m+1
v=1
g(v)R(m −1, n −v)
for 2 ≤m ≤n.
(2.4)
© 2014 by Taylor & Francis Group, LLC

22
Optimal Resource Allocation for Distributed Video Communications
Then, the probability of m lost packets within n packets is
P(m, n) =
n−m+1
X
v=1
PBG(v)R(m, n −v + 1)
for 1 ≤m ≤n,
(2.5)
where PB is the average of packet-loss probability.
Now, the probability that more than n −k packets are lost within the
n packets can be represented as Pn
m=n−k+1 P(m, n). This probability is the
residual loss probability experienced by a video decoder after RS decoding,
which can be used to design the overall system if how many losses are accept-
able for a video decoder is known.
n1
. . . . . .
......
Layer1
Layer2
Frame1
packet
number
k1 information packets
n1-k1 redundant packets
k2 information packets
n2-k2 redundant packets
packet
number
n1+n2
n1+1
LayerL
kL information packets
nL-kL redundant packets
packet
number
n1+...+nL
n1+nL-1+1
1
FIGURE 2.2
The packetization scheme for PFGS with UEP [43]
In the multi-layer scalable video coder such as PFGS, the impact of the
residual loss probabilities of diﬀerent layers on the video quality is not equal.
This layered coding framework is well suited for prioritized transmission. The
base layer can be assigned to a high-priority class while enhancement lay-
ers can be assigned to lower-priority classes. Since the current Internet only
provides best-eﬀort service, prioritized transmission can be achieved by apply-
ing unequal loss protection schemes to diﬀerent layers. In our work, unequal
loss protection is achieved by protecting diﬀerent layers with diﬀerent FEC
codes. More speciﬁcally, strong channel-coding protection is applied to the
base-layer data stream to produce a higher-priority data class while weaker
channel-coding protection is applied to the subsequent enhancement layers
to produce low-priority classes. The result will be that the base-layer data
stream will experience a lower packet-loss probability while delivered over In-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
23
ternet. The packetization of PFGS with UEP is depicted in Figure 2.2. The
transmission order for the packets is marked as a dashed line.
It is well known that eﬃcient FEC codes are desirable to enable error
recovery with as little overhead as possible. For the RS code that we used in
our work, maximizing the FEC code rate k/n for speciﬁc network conditions
is quite important to improve the protection eﬃciency. We should point out
that, since the data packet sizes are not ﬁxed, for a block of k data packets,
the resulting n −k FEC packets are all of the maximal size (denoted as
PacketLen1). In the meanwhile, stuﬃng is needed for the k data packets.
This will decrease the utilization eﬃciency of the available bandwidth.
k information
packets
packet
number
redundant packet
n–k redundant
packets
packet size of layer i after fixed
length packetization
.  .  .
PacketLen2
one
BOP
FIGURE 2.3
Generation of FEC packets using ﬁxed-length packetization scheme [43]
To increase the bandwidth utilization, the Error Resilient Entropy Code
(EREC) approach [28] is applied here (see Figure 2.3) to re-assemble diﬀerent
packets of data into k packets to form a Block of Packets (BOP). The basic
idea of EREC is to re-organize the variable-length blocks into the EREC frame
structure such that each block (slice in PFGS case) starts at a known position
within the code. In this way, the decoder can independently ﬁnd the start of
each block. The EREC frame structure is composed of k slots of length di
(equals to PacketLen2 in this case) bytes to yield total length of T = Pk
i=1 di
bytes to transmit. The k slots of data can be transmitted consecutively without
risk of any loss of synchronization. Each EREC frame can be used to transmit
© 2014 by Taylor & Francis Group, LLC

24
Optimal Resource Allocation for Distributed Video Communications
up to k variable-length blocks of data, provided that the total data to be coded
does not exceed the total available T bits. The EREC places the variable-
length blocks of data into the EREC code structure using a bit-reorganization
algorithm that relies only on the ability to determine the end of each variable-
length block. The details of the bit-reorganization algorithm can be found in
[28].
By using the EREC approach, ﬁxed length packetization is achieved. Small
stuﬃng is needed in this ﬁxed-length packetization scheme. The packet size
changes from PacketLen1 to PacketLen2. The bandwidth utilization is im-
proved approximately by P acketLen2−P acketLen1
P acketLen2
× 100%.
Since some error resilience mechanisms have been used in PFGS, the dis-
tortion for packet loss may just aﬀect the slice. On the encoder side, distortion
for each slice can be measured independently in advance. Let DS(RS) stand
for the source perceptual distortion-rate function. The problem becomes to
ﬁnd the optimal FEC scheme (ki, ni) for diﬀerent layers to minimize the end-
to-end distortion D:
Minimize D = DS(RS) × P(0, RS/Sp)+
Pm
i=1 (wi × Pni
j=ki (D(i, j)
×(Pni
l=ni−ki+1 (P(l, ni)| Qi−1
x=1
Pkx
y=0 P(y, nx))))),
(2.6)
where D(i, j) represents the distortion that jth packet at ith layer is lost,
wi is the distortion weight for the ith layer, and m is the number of layers
needed to be transmitted. Based on the decoder performance of PFGS, if the
corresponding packet at any lower layers is lost, the packet of this layer is
treated as lost no matter whether it is received or not.
2.2
QoS-Adaptive
Resource
Allocation
for
Scalable
Video Transmission over Cellular Networks
Video is foreseen to become a key application in the Internet and mobile
networks. The Third Generation (3G) wireless network is enabling video ap-
plication on mobile devices and has made it feasible for visual communications
over the wireless networks [6, 9], providing up to 384 kbps outdoor and 2 Mbps
indoor bandwidth.
Error rate is usually very high in wireless channels, which is caused by
multi-path fading, inter-symbol interference, and noise disturbances. The
channel error rate varies with the changing external environment, resulting
in a devastating eﬀect on multimedia transmission. To cope with errors in
wireless channel, accurate network-condition estimation [22] and eﬀective er-
ror control [14, 38] are essential for robust video transmission. It is known
that video transmission is delay-sensitive but may be tolerant to some kinds
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
25
of errors. Moreover, diﬀerent portions of video bit stream have diﬀerent im-
portance to the reconstructed video quality, thereby giving rise to diﬀerent
QoS requirements. For instance, it is intuitive that lower layers of a layered
scalable video codec have higher QoS requirements than those of higher layers.
Therefore, adopting diﬀerent error control schemes for each portion is more
appropriate for such a compressed bitstream [14]. However, channel coding in-
troduced by error control would generate additional bit overhead and increase
computational complexity. Considering the limited bandwidth in wireless net-
works and battery life in the mobile devices, those available resources, such
as bandwidth and power, should be allocated appropriately for source and
channel coding.
Most of the existing works focus on robust video transmission over 3G
wireless channels [14, 40, 42]. There is, however, a scarcity of work performed
on delivering multimedia over a 3G wireless network or system [1, 5]. A key
issue in a 3G system or network with several layers is that it is mostly not ob-
vious how to achieve end-to-end optimality for multimedia delivery, although
a single-layer performance can reach optimum. Aiming to solve such a prob-
lem, we present, at the application layer, how to perform error control and
resource allocation by taking channel/network condition into account. Specif-
ically, we ﬁrst study measurements of error rate and throughput of the 3G
network. Then, resources are allocated between the source and channel cod-
ing according to the channel/network condition.
As is known, there are two basic error correction mechanisms, namely Au-
tomatic Retransmission Request (ARQ) and FEC, of which FEC has been
commonly suggested for real-time applications due to the strict delay require-
ments. However, FEC incurs constant transmission overhead even when the
channel is loss free. ARQ has been shown to be more eﬀective than FEC
[18]. But retransmission of corrupted data frames introduces additional delay,
which is critical for real-time services. Hybrid FEC and ARQ schemes [41]
can achieve both delay bound and rate eﬀectiveness by limiting the number of
retransmissions. However, it assumed that the maximum number of retrans-
missions is ﬁxed and known a priori, which may not reﬂect the time-varying
nature of delay. Meanwhile, no resource allocation between FEC and ARQ
had been considered in [41]. Hybrid FEC and delay-constrained ARQ was
discussed in [40, 26]; however, channel dynamics and media characteristics
had not been addressed in those schemes.
Joint work on scalable video coding with UEP for wireless communica-
tion has been studied in [14]. Unequal error protection schemes improve video
quality by partitioning the bit stream into diﬀerent priority classes. However,
a ﬁxed error correction rate for a diﬀerent priority class was adopted in [14].
This is ineﬃcient since the characteristic of the time-varying channel has not
been considered. Using scalable video compression scheme [21], it is possi-
ble to generate a single compressed bit stream such that diﬀerent subsets of
the stream correspond to the compressed version of the same video sequence
at various rates. This is very beneﬁcial for video delivery over time-varying
© 2014 by Taylor & Francis Group, LLC

26
Optimal Resource Allocation for Distributed Video Communications
networks. In [8], Cheung et al. proposed an optimal bit-allocation scheme for
joint source channel coding of scalable video. In this scheme, Rate Compatible
Punctured Convolutional (RCPC) and UEP are combined, but no ARQ is ad-
dressed. Meanwhile, a memoryless channel with known average channel state
is assumed therein [8], which may not properly reﬂect the time-varying fading
channel. In all the above schemes, no power constraint had been considered.
There are several related works on the power consumption in literature.
Hayinga et al. [13] proposed an energy-eﬃcient error-control scheme without
considering the source side. Pan et al. [25] discussed the complexity-scalable
transform coding on the source side only. Lan and Tewﬁk [20] considered the
problem of minimizing the total consumed energy of a wireless system subject
to quality-of-service constraint. Appadwedula et al. [2] proposed an eﬃcient
wireless image transmission scheme under a total power constraint. However,
in [20, 2] only image is considered, and no speciﬁc error control scheme was
discussed. Meanwhile, time-varying channel conditions were not taken into
account in [20, 2].
To address the aforementioned issues, we present distortion-minimized re-
source allocation and power-minimized resource allocation with hybrid delay-
constrained ARQ and UEP for video transmission over 3G network, based
on the measurements of throughput and error rate for 3G wireless network.
Note that our schemes are capable of dynamically adapting to the varying
channel/network condition. The end-to-end architecture is illustrated in Fig-
ure 2.4. The two key components introduced in this architecture are network
throughput/error rate measurement and distortion/power optimized resource
allocation.
FIGURE 2.4
End-to-end architecture for video over 3G network [44]
Next, we present distortion-minimized resource allocation and power-
minimized resource allocation with hybrid delay-constrained ARQ and UEP
for video transmission over a 3G network.
Channel performance measurement has been discussed in [44]. Now the
problem is how to eﬃciently utilize the limited channel capacity. According
to the analysis in the previous section, both source coding and channel cod-
ing will occupy a certain portion of the resources (e.g., bits and processing
power), thereby making diﬀerent contributions to the end-to-end QoS, such
as distortion, delay, and power consumption. The study of resource allocation
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
27
in this section is to address the problem of ﬁnding the optimal distribution of
resources among a set of competing subscribers (e.g., source coder and chan-
nel coder) that minimize the objective function, such as distortion or power
consumption, subject to total resource constraints and/or QoS requirements.
Like many existing resource allocation algorithms [21, 27], we tackle a
common case where the objective function O is the sum of an individual
subscriber’s objective function oi, subject to the sum of the an individual
subscriber’s required resource ri, which would not exceed the resource limit
R, and/or the sum of the individual subscriber’s QoS requirement qi, which
would not exceed the total QoS requirement Q. Mathematically, the problem
is formulated as
Minimize
{qi and/or ri} O =
N
X
i=1
oi(qi, ri)
subject to
N
X
i=1
qi ≤Q and/or
N
X
i=1
ri ≤R,
(2.7)
where N is the number of subscribers.
'LVWRUWLRQ
6RXUFH5DWH
'
'
5
5
'PLQ)(&
5RSW)(&
WRWDO
DYDLODEOH
UDWH5
 
FIGURE 2.5
Rate-distortion relation with FEC scheme [44]
In this formulation, resource distribution between the PFGS source coder
and the channel coder is based on the above formulation. From the rate-
distortion relation analyzed in [44], it is essential to adopt some error protec-
tion schemes so as to reduce the distortion caused by channel transmission.
As is known, FEC is suited for real-time communications. But varying chan-
nel condition limits its eﬀective use, because a worst-case design may lead
to a large amount of overhead. Once the channel condition is known, adap-
tive FEC can be adopted to meet the channel condition. Speciﬁcally, if the
network condition is good, the error correction rate will be reduced. On the
other hand, if the network condition is bad, the error correction rate will be
© 2014 by Taylor & Francis Group, LLC

28
Optimal Resource Allocation for Distributed Video Communications
'LVWRUWLRQ
6RXUFH5DWH
'
'
5
5
'PLQ$54
5RSW$54
WRWDO
DYDLODEOH
UDWH
'HOD\
6RXUFH5DWH
WRWDO
DYDLODEOH
UDWH
7
7
5
5RSW$54
7ERXQG
 
FIGURE 2.6
Rate-distortion relation with ARQ scheme and delay caused by ARQ scheme
[44]
increased. As shown in Figure 2.5, there exists an optimal rate (Ropt−F EC)
for the FEC scheme to achieve the minimal distortion (Dmin−F EC).
Closed-loop error control techniques, such as ARQ, have been shown to
be more eﬀective than FEC. But retransmission of corrupted data frames in-
troduces additional delay, which is critical for real-time services. As shown in
Figure 2.6, there exists an optimal rate (Ropt−ARQ) for the ARQ scheme to
achieve the minimal distortion (Dmin−ARQ). It can be seen that Dmin−ARQ ≤
Dmin−F EC. However, in real-time applications such as conferencing and
streaming, the delay constraint had to be considered. When considering me-
dia’s delay constraint (Tbound), the optimal distortion, Dmin−ARQ, cannot
guarantee to be achieved. Therefore, we introduced hybrid FEC and delay-
constrained ARQ as the error protection scheme for multimedia delivery [38].
2.2.1
Hybrid UEP and Delay-Constrained ARQ for Scalable
Video Delivery
Figure 2.7 depicts our hybrid UEP and delay-constrained ARQ scheme for
scalable video delivery. In this scheme, BL and ELs are protected diﬀerently.
Because BL carries the very important information, it should be transmitted
in a well-controlled way to prevent the quality of reconstructed video from
degrading severely. Therefore, we add strong error protection code for BL.
Note that how much protection should be added to BL is based on the chan-
nel condition and available resource. As analyzed above, FEC usually incurs
overhead, and the ARQ scheme is usually more eﬃcient than FEC provided
certain delay is allowed. As a result, we adopt hybrid delay-constrained ARQ
and FEC for BL error protection. It works as follows. On the sender side,
based on the delay constraint Dconstrained that is limited by video frame rate,
current round-trip transmission time RT T , and the estimated time consumed
by processing procedure Dprocessing, the maximum number of transmissions
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
29
for current packet Nmax can be calculated as follows:
Nmax = Dconstrained −Dprocessing
RT T
.
(2.8)
Then, the sender determines the level of protection for each transmission such
that the required residual error rate is within the desired range and the over-
head is minimized.
EL Channel
Decoding
PFGS Source Encoder
Hybrid FEC/
ARQ
UEP
Power/
Distortion -
Optimized Bit
Allocation
Multiplexer
De-Multiplexer
Network
Performance
Measurement
BL Channel
Decoding
Corrupt? &
retransmission
needed?
PFGS Source Decoder
Y
N
retransmission request
retrans-
mission
request
output
raw data
3G Wireless Networks
BL
EL
 
FIGURE 2.7
Block diagram of hybrid UEP/delay-constrained ARQ scheme for PFGS de-
livery over 3G [44]
As for ELs, diﬀerent levels of error protections are added to the diﬀerent
layers. This is because errors in the lower layer may heavily corrupt the cor-
responding higher layers in the same frame, thus aﬀecting several subsequent
frames. In other words, a bit error would result in error propagation. As a
result, the bandwidth for higher layers is wasted, and in the meantime, the
video quality is deteriorated. Note that, in order to eﬃciently add error pro-
tection to ELs, the sender determines the degree of protection for each layer
adapting to the current channel condition for achieving the minimal objective
function under the required QoS and resource constraints.
This scheme works as illustrated in Figure 2.7. The 3G network perfor-
mance is ﬁrst dynamically measured. Available throughput, bit/frame/packet
error rate, and some other network related information are fed back to the
sender. Given the network information, optimal resource allocation is then
performed to achieve the minimal objective (e.g., distortion or power consump-
tion). The channel decoder reconstructs packets through a channel decoding
process. For ELs, the output of channel decoder is directed for source decod-
ing; while for BL, if residual error still exists, the receiver decides whether
to send a retransmission request based on the delay bound of the packet.
If the delay bound has been expired, the request will not be sent. Otherwise,
when receiving a retransmission request, the sender only transmits a necessary
higher protection part for the corresponding packet.
© 2014 by Taylor & Francis Group, LLC

30
Optimal Resource Allocation for Distributed Video Communications
In summary, this presented error protection scheme is aimed to achieve
the bounded delay, adaptiveness, and eﬃciency. However, the hybrid UEP
and delay-constrained ARQ protection scheme poses a challenging resource
allocation problem, because one has to consider two issues simultaneously: the
tradeoﬀof allocation between the source and channel codes and the tradeoﬀ
between forward error protection and retransmission.
2.2.2
Distortion-Minimized Resource Allocation
It is known that channel bandwidth capacity is highly limited in wireless
networks. Meanwhile, the allocation on the source side has a tradeoﬀbetween
the source coding rate and the source distortion, the FEC has a tradeoﬀ
between the error protection rate and the channel distortion, and the ARQ
has a tradeoﬀbetween the retransmission times and the channel distortion.
Therefore, it is very important to study how to allocate the bits among the
source, the FEC, and the ARQ for a given ﬁxed bandwidth capacity so as to
achieve the minimal expected end-to-end distortion.
Suppose R(t) is the available bit rate at time t, RS(t), RARQ(t), and
RF EC(t) are the bit rates used for the source, the FEC, the ARQ at time t,
respectively. Then the distortion-minimized resource allocation can be formu-
lated as
Minimize
{RS,RARQ,RF EC}
Dend−to−end = DS(RS) + DARQ(RARQ) + DF EC(RF EC)
subject to
RS(t) + RARQ(t) + RF EC(t) ≤R(t),
(2.9)
where DS(RS) is the source distortion caused by source coding rate RS,
DARQ(RARQ) and DF EC(RF EC) are the residual channel distortions caused
by applying retransmission rate RARQ and error protection rate RF EC, re-
spectively.
The bit rate of the source side is composed of bit rate in both BL and ELs.
Mathematically, it is given by
RS = RS base +
L
X
i=1
RS enh(i),
(2.10)
where L is the number of layers in ELs, RS base and RS enh represent the
source rates of BL and of ELs, respectively.
Source distortion is composed of distortion in both BL and ELs, which can
be described as
DS(RS) = DS(RS base) +
L
X
i=1
DS(RS enh(i)).
(2.11)
Next, we will discuss the channel distortion. As discussed above, we adopt
hybrid delay-constrained ARQ and FEC for BL to reduce the residual error.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
31
It works as follows. The sender determines the degree of protection for each
transmission such that the expected end-to-end distortion is minimized while
satisfying the QoS requirement. Upon receiving the retransmission request for
the corrupted packet, the source side will only transmit the necessary part of
higher protection for the packet. Because only the protection code needs to be
transmitted over the channel for re-transmission, the transmission overhead
can be reduced. In this work, we use RS(n, k) code for forward error correction,
as mentioned before. Suppose n is ﬁxed and let ti = ⌊n−ki
2
⌋represent the
protection level for the ith transmission. Then, the protection rate needed for
the BL delivery is calculated as follows:
RARQ
=
bn
X
i=1
Rprot(t1, RS base(i))
+
Nmax−1
X
j=2
{
bn
X
i=1
[Pfail(i, j −1)Rprot(tj, RS base(i))]},
(2.12)
Rprot(t, RSS) = 2t/n × RSS,
(2.13)
Pfail =
jY
l=1
Pfail,packet(i, l),
(2.14)
and
Pfail,packet(i, j) = 1 −
tj
X
x=0
{
x
X
y=0
[
n
y

PS(i)y(1 −PS(i))n−y]},
(2.15)
where bn is the number of source packets needed to be transmitted,
Rprot(t, RSS) is the bit rate needed for protecting RSS at level t, Pfail(i, j)
is the probability of the ith packet failed in the past j times retransmission,
Pfail,packet(i, j) is the probability of the ith packet that is failed in the jth re-
transmission, and pS(i) is the probability of symbol failure of the ith packet.
After hybrid FEC and delay-constrained ARQ protection for BL, only
those blocks that cannot be recovered will cause the additional channel dis-
tortion. Thus, the channel distortion of BL can be described as
D(RARQ) =
bn
X
i=0
[Pfail(i, Nmax −1) × Dc(i)],
(2.16)
where Dc(i) is the channel distortion caused by the loss of packet i.
Now we analyze the channel distortion in ELs. Considering the dependency
among layers, UEP is applied for the ELs. Similar to the BL, we use ti =
⌊n−ki
2
⌋to represent the protection level for the ith layer. The protection rate
© 2014 by Taylor & Francis Group, LLC

32
Optimal Resource Allocation for Distributed Video Communications
needed for the ELs delivery is then represented as follows:
RF EC =
L
X
i=1
Rprot(ti, RS enh(i)),
(2.17)
where L is the number of layers needed to be transmitted, and Rprot(t, Rss)
is the bit rate needed for protecting Rss at level t, which had been deﬁned in
(2.13). Then, the channel distortion of ELs after UEP can be expressed as
D(RF EC) =
L
X
i=1
[
bni
X
j=1
(Pfail,layer(i, j) × Dc(j))],
(2.18)
Pfail,layer(i, j) = Pfail,packet,layer(i, j)[
i−1
Y
m=1
(1 −Pfail,packet,layer(m, j))],
(2.19)
and
Pfail,packet,layer(i, j) = 1 −
ti
X
x=0
{
x
X
y=0
[
n
y

PS(j)y(1 −PS(j))n−y]},
(2.20)
where bni is the number of source packets needed to be transmitted in the
ith layer, Pfail,layer(i, j) is the probability of which the jth packet in the ith
layer is corrupted while the corresponding packets in the previous layers are
correct, and Pfail,packet,layer(i, j) is the probability of that the jth packet is
corrupted in the ith layer.
Substituting Eqns. (2.12, 2.16, 2.17, 2.18) into Eqn. (2.9), the distortion-
minimized resource allocation for scalable video delivery can be solved given
the total bit budget R(t).
Figure 2.8 depicts the corresponding rate-distortion relation of our pro-
posed hybrid UEP and delay-constrained ARQ scheme. Based on the above
analysis and from Figure 2.8, we can see Dmin−ARQ ≤Dmin ≤Dmin−F EC.
In the meantime, delay bound of media (Tbound) is satisﬁed.
2.2.3
Power-Minimized Resource Allocation
Besides the channel bandwidth capacity, another highly limited resource in
wireless networks is power, which includes the transmitter power and receiver
power. In this formulation, we only consider the receiver power in the mobile
devices, which consists of receiving power, source decoding power and channel
decoding power. It is observed that both the source and the channel have
a tradeoﬀbetween the coding rate and the processing power consumption.
Thus, the power-optimized resource allocation problem can be formulated as:
given the ﬁxed bandwidth capacity, how we allocate bits among the source, the
FEC, and the ARQ so as to achieve the minimum power consumption under
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
33
'LVWRUWLRQ
6RXUFH5DWH
'
'
5
5
'PLQ
5RSW
WRWDO
DYDLODEOH
UDWH
 
FIGURE 2.8
Rate-distortion relation with hybrid UEP/delay-constrained ARQ scheme [44]
the desired end-to-end distortion range. Let R(t) represent the available bit
rate at time t, RS(t), RARQ(t), and RF EC(t) represent the bit rate used for
the source, the FEC, the ARQ at time t, respectively, and D(t) represent the
tolerable distortion at time t. Then, the power-minimized resource allocation
can be described as
Minimize
{RS,RARQ,RF EC}
PC =
PCrec,S(RS) + PCrec,ARQ(RARQ)
+PCrec,F EC(RF EC) + PCS(RS)
+PCARQ(RARQ) + PCF EC(RF EC)
subject to
DS(RS) + DARQ(RARQ) + DF EC(RF EC) ≤D(t)
and
RS(t) + RARQ(t) + RF EC(t) ≤R(t),
(2.21)
where PCrec,S(RS), PCrec,ARQ(RARQ), PCrec,F EC(RF EC) are the power
consumed for receiving the source, the ARQ, and the FEC, respectively,
and PCS(RS), PCARQ(RARQ), PCF EC(RF EC) are consumed power for the
source coding, the ARQ, and the FEC, respectively.
As analyzed in [44], source decoding and channel decoding had diﬀerent
power consumptions. For the source part, the receiving power is composed of
receiving powers for both BL and ELs. Mathematically,
PCrec,S(RS) =
bn
X
i=1
[ρrec × (RS base(i))] +
L
X
j=1
{
bnj
X
i=1
[ρrec × (RS enh(i, j))]},
(2.22)
where bnj is the number of blocks in the jth layer, and ρrec is the power
consumed for per bit transmission. The consumed processing power for the
© 2014 by Taylor & Francis Group, LLC

34
Optimal Resource Allocation for Distributed Video Communications
source part is related to the source decoding rate, which is denoted as
PCS(RS) = ρs(RS) =
bn
X
i=1
ρs(RS base(i)) +
L
X
j=1
{
bnj
X
i=1
ρs(RS enh(i, j))} (2.23)
where ρs(.) can be obtained from Figure 8 in [44].
As for the channel part, the consumed processing power is related to both
the source decoding rate and the channel protection rate, which is represented
as PCF EC(Rs, RF EC) = ρs(Rs, RF EC) = ρc(Rs, t), where t is the error pro-
tection level, and ρc(.) can be obtained from Figure 9 in [44].
In our hybrid delay-constrained ARQ and FEC scheme that used for BL,
any corrupted packet is allowed to be transmitted at most Nmax times. Once
receiving the retransmission request, a higher protection level is determined by
the sender to achieve the desired video quality. On the sender side, only higher
protection code will be transmitted to the receiver. While on the receiver side,
diﬀerent channel decoding would be performed after each transmission. Thus,
the receiving power consumption for the BL is formulated as
PCrec,ARQ(RARQ) = Pbn
i=1 [ρrec × Rprot(t1, Rs base(i))]
+ PNmax−1
j=2
{Pbn
i=1 [Pfail(i, j −1) × ρrec × Rprot(tj, Rs base(i))]},
(2.24)
where ti is the error protection level for the ith retransmission. Similarly, the
processing power consumption for the BL is represented as
PCARQ(RARQ) = Pbn
i=1 ρc(Rs base(i), t1)
+ PNmax−1
j=2
{Pbn
i=1 [Pfail(i, j −1) × ρc(Rs base(i), tj)]}.
(2.25)
As discussed before, UEP is applied to ELs. To be speciﬁc, diﬀerent channel
protection bits will be transmitted for diﬀerent layers on the sender side; while
diﬀerent channel decoding will be performed for diﬀerent layers on the receiver
side. The receiving power consumption for ELs is represented as
PCrec,F EC(RF EC) =
L
X
j=1
{
bnj
X
i=1
[ρrec × Rprot(tj, Rs enh(i, j))]}.
(2.26)
Similarly, the processing power consumption for ELs is expressed as
PCF EC(RF EC) =
L
X
j=1
{
bnj
X
i=1
[ρc(Rs enh(i, j), tj)]}.
(2.27)
Substituting Eqns. (2.22–2.27) into Eqn. (2.21), the power-minimized re-
source allocation for scalable video delivery can be solved, given the total bit
budget R(t) and the desired distortion range D(t). Note that optimization
methods, such as Lagrange multiplier and penalty function methods, can be
used to solve the constrained non-linear optimization problem.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
35
2.3
Power-Minimized Joint Power Control and Resource
Allocation for Video Communications over Wireless
Channels
The traditional relationship between rate and distortion assumes that power is
inﬁnite. For mobile multimedia communication using handheld devices, power
consumption usually is ﬁnite due to the limited battery life of mobile devices.
Motivated by this, we explore the relationship between power and rate given
distortion in wireless communications including sender and the receiver (note
that power-minimized resource allocation in the above section only considers
the receiver power consumption). Speciﬁcally, we want to optimally determine
the power in source coding, channel coding, and transmission, respectively, and
rate allocated for both source and channel, for a given distortion.
Video over wireless networks has undergone enormous development, due to
continuing growth of wireless communication. However, wireless video commu-
nications face several challenges including bandwidth requirement and battery
lifetime constraints. Minimizing average power consumption and keeping the
QoS at Mobile Station (MS) usually conﬂict each other. Achieving the best
multimedia quality at MS usually consumes more power. Moreover, multi-
path fading in radio channels necessitates the use of large transmit power and
complex signal processing algorithms, which largely reduces the battery life.
In addition, to combat the Multiple Access Interference (MAI) from other
users in the same cell, the transmission power is further increased.
Power control and Joint Source-Channel Coding (JSCC) are two eﬀective
approaches to supporting QoS for robust video communications over wireless
networks. Power control is performed from a group point of view by controlling
the transmission power and spreading gain (transmission rate) of a group of
users, while JSCC is conducted to eﬀectively combat the errors that occurred
during the transmission.
From an individual point of view, the approach to allocate diﬀerent bit
rates for source and channel units takes eﬀect on minimizing the total power
consumption under a ﬁxed bandwidth constraint. In today’s cellular phone,
the bulk of the power is consumed in the power ampliﬁer that generates the
transmit power. However, as we move toward an era of micro-cells and pico-
cells, power consumption of the processing power for multimedia data becomes
comparable to that of the power ampliﬁer. Such an approach can be viewed
as an extension of the joint source-channel bit-allocation scheme presented in
[8], which considers the eﬃcient joint design of the source and channel coder
to minimize the overall distortion under a ﬁxed bandwidth constraint. There
are some existing works related to minimizing the power consumption while
performing JSCC for a single user. To be speciﬁc, a low-power communication
system for image transmission was investigated [11]. Ji proposed a power-
optimized JSCC approach for video communications over wireless channels
© 2014 by Taylor & Francis Group, LLC

36
Optimal Resource Allocation for Distributed Video Communications
[17]. However, in [11, 17] the interference to other users when performing the
optimization of power consumption was not considered.
From a group point of view, power control adjusts a group of users’ trans-
mission power to maintain their QoS requirements and solve optimization
problems, such as transmitter power minimization, network capacity maxi-
mization, and optimal resource allocation. Recently, the focus has been on
adjusting transmitter powers to maintain a required Signal-to-Interference
Ratio (SIR) threshold for each network link using the least possible power. It
can also be referred to as an approach to resource management based on the
power control technique discussed in [31, 35, 19], where it is formulated as a
constrained optimization problem to minimize the total transmission power or
maximize the total rate constrained by the SIR and bandwidth requirements.
Nevertheless, processing power and JSCC have not been taken into account
in [31, 35, 19].
To jointly consider power control and JSCC, we present an approach that
minimizes the processing-and-transmission power consumption for a single
user and all users in a single-cell Code Division Multiple Access (CDMA)
system, respectively. Therein, joint consideration of power control and source-
channel coding is performed to achieve the minimal total power consumption,
meanwhile, maintaining the desired QoS for video transmission. Furthermore,
we develop an iterative solution to MS-BS interactive framework to solve the
optimization based on Wideband Code Division Multiple Access (W-CDMA)
infrastructure.
An architecture for power-minimized video communications over wire-
less channel is shown in Figure 2.9. The key components of the architec-
ture include a network-aware power consumption optimizer (NAPCO), power-
reconﬁgurable video encoder, UEP channel encoder, and power ampliﬁer.
Network-Aware Power Consumption Optimizer
Objective: meet QoS constraints, minimize the consumed power
Power-
reconfigurable
Video Encoder
UEP
channel
encoder
RF
Modulator
Power
Amplifier
Transmission
Antenna
Wireless Channel Condition
A
A affects B
FIGURE 2.9
Architecture for joint power control and rate control in MS [45]
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
37
In order to minimize the total power consumption while satisfying the QoS
requirements for each user, NAPCO is responsible for understanding the cur-
rent channel status and periodically adjusting the video rate, protection rate,
transmission power update step, and target Eb/N0. Our joint power control
and rate control is to allocate the bits between source and channel by mini-
mizing the total power consumptions of the source, channel and transmission.
First, NAPCO analyzes power consumption on the source side. In the video
encoder, Motion Estimation (ME) is most computationally intensive (up to
about 50% of the entire system). The computation complexity and the residual
distortion of ME vary in a large range with diﬀerent block matching preci-
sions. In this approach, a partial-distortion-measure based hierarchical block
motion estimation algorithm [7] is adopted in a power-reconﬁgurable video en-
coder to provide several power consumption levels with diﬀerent Mean Square
Error (MSE). Second, NAPCO monitors the power consumption spent on the
channel coding. In this approach, a UEP scheme based on RS codes is used
to protect the compressed video bitstream. Diﬀerent portions of compressed
bitstreams have diﬀerent importance to the quality of the reconstructed video.
The computation complexity and video transmission distortion vary with dif-
ferent levels of error protection codes. Third, NAPCO analyzes power con-
sumption of transmission. The transmission power of each user is related to
the transmission bit energy and the total bit rate. Adjusting the transmission
bit energy of an MS will not only aﬀect its own channel condition, but will
also change the channel status of other users in the same cell.
From the above analysis, we can see that all those three components have
relationships with its correspondent bit rate and channel condition. Once the
total power consumption consumed in source and channel coding, as well
as transmission, NAPCO allocates bits between source coding and channel
coding according to the channel condition and QoS requirement.
Next, we present power-minimized rate allocation for a single user and a
group of users, respectively.
2.3.1
Power-Rate Relationship and Power-Minimized Rate
Allocation for a Single User
In the video transmission scheme, the total power consumed by a given user
consists of transmission power and processing power. Processing power is
mainly determined by computational costs for source coding and channel
coding. Transmission power, on the other hand, depends on the bit energy
and total bit rate to deliver. Both transmission power and processing power
should be controlled so as to adapt to the changing channel conditions. In this
sub-section, we assume that the multiple access interferences are successfully
removed from the expected receiving signal, which can be approximated by
utilizing synchronized orthogonal spreading code or optimal multiuser detec-
tion. In this way, the minimal total power consumption of all users can be
achieved by minimizing each user’s power consumption, as the transmission
© 2014 by Taylor & Francis Group, LLC

38
Optimal Resource Allocation for Distributed Video Communications
power is not required to combat the interference of other users. Hence, we
ﬁrst investigate the power-consumption minimization for a single user in this
sub-section.
Having analyzed the power consumed in each individual component above,
now we allocate the available rate between source and channel, as well as
adjusting the source power levels and the transmission power, so as to mini-
mize the total power consumption while satisfying the QoS requirements, such
as the user’s uplink distortion and total bit rate constraint. Speciﬁcally, the
power-optimized rate allocation problem can be formulated as
Minimize
{Rs,Rc,γ,Φ}
Ps(Φ, Rs) + Pc(Rc) + εt(Pt(γ, Rs + Rc))
subject to
Du ≤D0
and
Rs + Rc ≤R0.
(2.28)
where Du and D0 respectively represent the expected uplink distortion and
maximal tolerable distortion, which can be derived from the QoS requirements.
Rs, Rc and R0 are the source rate and channel coding rate and the constraint
of the total rate, respectively. Ps, Pc, and Pt are the power consumption for
video source encoding, channel UEP, and data transmission, respectively. Let
γ be the target Eb/N0’s. The transmission power can be calculated given γ
and the path loss from the mobile station to the base station.
For the given user, the expected uplink distortion, Du, is composed of the
source distortion (Ds) and the channel distortion (Dc). The source distortion
is caused by the searching range in the ME algorithm and video rate con-
trol; while the channel distortion results from the channel transmission error.
Mathematically,
Du = Ds(Rs) +
Nmsp
X
m=1
Pfail(m) × Dc(m) +
Nlsp
X
n=1
Pfail(n) × Dc(n),
(2.29)
where Nmsp is the number of blocks in MSP, Nlsp is the number of blocks in
LSP, Pfail(m) is the failure probability of the mth block, and Dc(m) is the
channel distortion caused by the failure of the mth block.
Considering a ﬁxed target Eb/N0 and source power level for a given user,
the optimization problem (2.28) becomes to search a minimal total rate while
satisfying the distortion requirement under the rate constraint, as illustrated
in Figure 2.10. Conventional JSCC can be used here to ﬁnd the optimal set
of (Rs, Rc) to obtain the minimal total rate. Taking the various target Eb/N0
into consideration, Figure 2.11 shows the total power consumption of a given
user as a function of source rate, total rate, and Eb/N0 requirement. When
the target Eb/N0 is low, more protection bits are necessary to combat the
high BER of the channel. On the contrary, it needs fewer bits to perform
channel protection as the target Eb/N0 is high, which results in a low BER
of the channel. After all, for the above two cases, the product of total rate
and target Eb/N0 remains a large value. It indicates a curve with convex
characteristics as Figure 2.11 illustrates. The optimal set of (Rs, Rc, γ) can be
obtained from the surface of the curve.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
39
t
R
s
R
)
,
(
,
,
opt
t
opt
s
R
R
0
b
k
N
/
E
target
an d
fixed  
 
FIGURE 2.10
The total rate of a given user when ﬁxing Φk and target Eb/N0 [45]
Moreover, considering the ﬁxed target Eb/N0 but taking diﬀerent source
power levels into account, Figure 2.12 shows the curve of the total rates with
diﬀerent Φ. Therefore, the optimal set (Rs, Rc) of minimizing the mobile’s
power consumption is chosen from the sub-optimal sets at diﬀerent Φ. As the
various target Eb/N0 is considered, the optimal set of (Rs, Rc, γ, Φ) can be
achieved at the surfaces of several 3-dimentional curves according to varying
Φi, which are similar to the curve shown in Figure 2.10.
In order to obtain the optimal sets of the optimization problem, channel-
adaptive power and rate control are adopted in our proposed system to
minimize the total power consumption, which outperforms the ﬁxed power-
controlled system.
2.3.2
Power-Rate
Relationship
and
Power-Minimization
Rate Allocation for a Group of Users
As the existing W-CDMA standards illustrate, no speciﬁc multiuser detection
algorithm is included and the synchronization of uplink transmission is diﬃ-
cult to implement in practical W-CDMA systems. However, power control is
considered as a primary approach of transmitter power minimization, network
capacity maximization, and optimal resource allocation. In this subsection,
power control is further studied to minimize the total power consumption of
the processing unit and power ampliﬁer of a group of users. Due to the mul-
© 2014 by Taylor & Francis Group, LLC

40
Optimal Resource Allocation for Distributed Video Communications
0
b N
/
E
et
arg
t
 
FIGURE 2.11
The total power consumption of given user as a function of source rate, total
rate, and Eb/N0 requirement [45]
tiple access interference, the global minimization of power consumption must
be investigated from a group point of view as the transmission power of the
group of users are correlated to each other. Moreover, the capacity constraint
of the uplink system should be taken into account.
On the basis of the power minimization for a single user analyzed in Section
2.3.1, we extend the optimization problem to the N-dimension, where N is
the number of users in the cell. We now adjust the power control step size,
target SIR, source rate, protection levels and source power levels to minimize
the total power consumption while satisfying the QoS requirements for each
mobile. The total power consumption is composed of source coding power,
channel coding power and transmission power. Hence, considering a single
cell system, the power-optimized rate allocation problem for all mobiles can
be formulated as
Minimize
{Ris,Ric,Γ,Φi}
PN
i=1 (P i
s(Φi, Ri
s) + P i
c(Ri
c) + εi
t(P i
t (Γ, R)))
subject to
Di
u ≤Di
0,
i = 1, 2, . . . , N,
(2.30)
where the superscript i represents the ith user, Di
u and Di
0 respectively rep-
resent the expected uplink distortion and maximal tolerable distortion, which
can be derived from the QoS requirements. Ri
s and Ri
c are the source rate and
channel coding rate, respectively. P i
s, P i
c, and P i
t are the power consumption
for video source encoding, channel UEP, and data transmission, respectively.
Deﬁne the vector of the target Eb/N0’s Γ = [γ1, γ2, . . . , γN] and the vector of
transmitted rates to be R = [R1
t , R2
t , . . . , RN
t ].
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
41
t
R
s
R
)
,
(
,
,
o p t
t
o p t
s
R
R
1
 
2
 
3
 
 
FIGURE 2.12
The total rate of given user with various Φk and ﬁxed target Eb/N0 [45]
Let r′
i = Ri
tγi
t, we can obtain P i
t from the following equation [31]
(W
r′
i
+ 1)hiP i
t [1 −
N
X
j=1
1
( W
r′
j + 1)] = η0W
i = 1, 2, . . . , N,
(2.31)
where W and hi are respectively the total bandwidth for all users and the
channel gain of the ith user. It can be seen from (2.29) that it is necessary to
be aware of r′
is of other users when calculating the transmission power of the
current user. Moreover, if every user’s r′
i is minimized, the transmission power
of each user reaches the minimum simultaneously. We can deﬁne
Ψ = [1 −
N
X
j=1
1
( W
r′
j + 1)],
(2.32)
which is calculated in the BS and inform each MS through a pilot channel
of the interference of other users. Considering the ﬁxed r′
i, that is to ﬁx Ψ,
each user can minimize its power consumption according to the analysis of
Part A in this section. Moreover, varying from a N-dimension space, from
where we can get the optimal set of r′
i. If the r′
i of some users is increased,
© 2014 by Taylor & Francis Group, LLC

42
Optimal Resource Allocation for Distributed Video Communications
accordingly decreasing the Ψ, other users’ transmission power is enhanced. At
the processing unit side, we could increase the source power level to diminish
source rate and add more protection bits to decrease the value of target Eb/N0,
which results in reducing the transmission power. Meanwhile, the processing
power consumption is enlarged. Then, the minimized total power consump-
tion for each user can be achieved by trading oﬀbetween processing power
and transmission power. On the contrary, decreasing the r′
i of some users,
accordingly increasing the Ψ, other users’ transmission power is reduced. At
the processing unit side, we could reduce the source power level and add fewer
protection bits, which results in increased transmission power. At the same
time, the processing power consumption is diminished. The minimal power
consumption may be achieved in this way.
Furthermore, notice that inﬂuences from diﬀerent users on the capacity
of the system are diﬀerent. Considering the capacity constraint of a power-
control system with transmission power constraint, pi, the following inequality
is obtained [31]:
N
X
j=1
1
( W
r′
j + 1) ≤1 −
η0W
mini[pihi( W
r′
i + 1)] i = 1, 2, . . ., N.
(2.33)
This inequality manifests that users that have low power budget, who are
far away, need high rates and quality of service that put a limit on capacity.
Consequently, we deﬁne a weight for each user to represent its inﬂuence on
the capacity in the following:
wi = pihi
r′
i
i = 1, 2, . . ., N.
(2.34)
The wi is useful to weigh the searching direction in the N-dimension space.
When we minimize the total power consumption, introducing this weight re-
sults in satisfying the capacity constraint more eﬃciently.
As analyzed above, to solve the global power and rate allocation problem
(2.30), one approach is to apply a centralized algorithm which considers all
users’ statistics simultaneously. The advantage of this approach is that it does
not require any iterative steps for achieving the optimum; however, it needs
large computational complexity and high communication requirements. On
the other hand, we can utilize a distributed solution that deals with this N-
dimension minimization problem by using an iterative, one-dimensional (1-D)
search algorithm, in which we optimize along each user’s total power con-
sumption iteratively until reaching the minimum. This solution can decrease
the complexity of solving this optimization problem and proceed in a dis-
tributed way. But it may only achieve local optimal or sub optimal sets of the
N-dimension space.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
43
2.4
Summary
In this chapter, we have examined various techniques for optimal resource
allocation for scalable video communications over the Internet or wireless net-
works. Speciﬁcally, we have investigated the following four topics 1) network-
adaptive resource allocation for scalable video streaming over the Internet,
in which we have presented a novel resource allocation scheme for multi-
ple media streams to achieve end-to-end optimal quality according to the
estimated network bandwidth and media rate-distortion functions; 2) QoS-
adaptive resource allocation for scalable video transmission over cellular net-
works, in which we have presented distortion-minimized resource allocation
scheme and power-minimized resource allocation scheme with hybrid delay-
constrained ARQ and UEP, for video transmission over 3G networks; and 3)
power-minimized joint power control and resource allocation for video com-
munications over wireless channels, in which we have presented an approach
that minimizes the processing-and-transmission power consumption for a sin-
gle user and all users in a single-cell CDMA system, respectively.
Acknowledgment
Dr. Wenwu Zhu would like to acknowledge Prof. Qian Zhang of Hong Kong
University of Science and Technology for her contributions to this chapter.
Bibliography
[1] v.3.0.1 3G TS 23.101. General UMTS Architecture, 1999.
[2] S.
Appadwedula,
M.
Goel,
D.L.
Jones,
K.
Ramchandran,
and
NR Shanbhag. Eﬃcient wireless image transmission under a total power
constraint. In Multimedia Signal Processing, 1998 IEEE Second Work-
shop on, pages 573–578. IEEE.
[3] R. Braden, L. Zhang, S. Berson, S. Herzog, and S. Jamin.
Resource
ReSerVation Protocol:(RSVP); Version 1 Functional Speciﬁcation. Univ.
of Michigan, 1997.
[4] S. Cen, C. Pu, and J. Walpole. Flow and congestion control for internet
media streaming applications. In Proceedings of Multimedia Computing
and Networking, pages 1–14. Citeseer, 1998.
© 2014 by Taylor & Francis Group, LLC

44
Optimal Resource Allocation for Distributed Video Communications
[5] L.F. Chang and X.X. Qiu. Wireless internet: networking and protocol
aspects. In wireless Internet course notes. IEEE PIMRC 2000, Sept. 2000.
[6] P. Chaudhury, W. Mohr, and S. Onoe. The 3gpp proposal for imt-2000.
Communications Magazine, IEEE, 37(12):72–81, 1999.
[7] C.K. Cheung and L.M. Po. A hierarchical block motion estimation al-
gorithm using partial distortion measure.
In Image Processing, 1997.
Proceedings., International Conference, volume 3, pages 606–609. IEEE,
1997.
[8] G. Cheung and A. Zakhor. Bit allocation for joint source/channel coding
of scalable video. Image Processing, IEEE Transactions on, 9(3):340–356,
2000.
[9] E. Dahlman, P. Beming, J. Knutsson, F. Ovesjo, M. Persson, and
C. Roobol.
WCDMA – the radio interface for future mobile multi-
media communications. Vehicular Technology, IEEE Transactions on,
47(4):1105–1118, 1998.
[10] M. Eckert and J. I. Ronda. Bit-rate allocation in multi-object video cod-
ing. ISO/IEC JTC1 / SC29 / WG11 MPEG98/m3757, Dublin, Ireland.
[11] M. Goel, S. Appadwedula, NR Shambhag, K. Ramchandran, and D.L.
Jones. A low-power multimedia communication system for indoor wireless
applications. In Signal Processing Systems, 1999. SiPS 99. 1999 IEEE
Workshop on, pages 473–482. IEEE, 1999.
[12] MPEG Video Group. Text of iso/iec 14496-2 mpeg-4 video fgs vm 2.0.
Doc. ISO/IEC JTC1/SC29/WG11 N2926, Melbourne, October 1999.
[13] P.J.M. Hayinga. Energy eﬃciency of error correction on wireless systems.
In Wireless Communications and Networking Conference, 1999. WCNC.
1999 IEEE, pages 616–620. IEEE, 1999.
[14] U. Horn, B. Girod, and B. Belzer. Scalable video coding for multime-
dia applications and robust transmission over wireless channels. In 7th
International Workshop on Packet Video. Citeseer, 1996.
[15] U. Horn, K. Stuhlmuller, M. Link, and B. Girod. Robust internet video
transmission based on scalable coding and unequal error protection. Sig-
nal Processing: Image Communication, 15(1-2):77–94, 1999.
[16] S. Jacobs and A. Eleftheriadis. Streaming video using dynamic rate shap-
ing and tcp congestion control* 1. Journal of Visual Communication and
Image Representation, 9(3):211–222, 1998.
[17] Z. Ji, Q. Zhang, W. Zhu, and Y.Q. Zhang. End-to-end power-optimized
video communication over wireless channels. In Multimedia Signal Pro-
cessing, 2001 IEEE Fourth Workshop on, pages 447–452. IEEE, 2001.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
45
[18] M. Khansari, A. Jalah, E. Dubois, and P. Mermelstein. Robust low bit-
rate video transmission over wireless access systems. In Communications,
1994. ICC’94, SUPERCOMM/ICC’94, Conference Record,‘Serving Hu-
manity Through Communications.’IEEE International Conference, pages
571–575. IEEE, 1994.
[19] S.L. Kim, Z. Rosberg, and J. Zander.
Combined power control and
transmission rate selection in cellular networks. In Vehicular Technol-
ogy Conference, 1999. VTC 1999-Fall. IEEE VTS 50th, volume 3, pages
1653–1657. IEEE, 1999.
[20] T.H. Lan and A.H. Tewﬁk. Adaptive low power multimedia wireless com-
munications. In Multimedia Signal Processing, 1997, IEEE First Work-
shop on, pages 377–382. IEEE, 1997.
[21] S. Li, F. Wu, and Y.Q. Zhang. Study of a new approach to improve
fgs video coding eﬃciency. ISO/IEC JTC1/SC29/WG11, MPEG99/ M,
1999.
[22] X. Mestre, M. Najar, and J.R. Fonollosa. Joint beamforming and channel
estimation for pilot-aided wcdma systems. In Acoustics, Speech, and Sig-
nal Processing, 2000. ICASSP’00. Proceedings. 2000 IEEE International
Conference, volume 5, pages 2577–2580. IEEE, 2000.
[23] J. Padhye, V. Firoiu, D. Towsley, and J. Kurose. Modeling TCP through-
put: A simple model and its empirical validation. In ACM SIGCOMM
Computer Communication Review, volume 28, pages 303–314. ACM,
1998.
[24] J. Padhye, J. Kurose, D. Towsley, and R. Koodli. A model based TCP-
friendly rate control protocol. In Proceedings of NOSSDAV99. Citeseer,
1999.
[25] W. Pan and A. Ortega. Complexity-scalable transform coding using vari-
able complexity algorithms. In Data Compression Conference, 2000. Pro-
ceedings. DCC 2000, pages 263–272. IEEE, 2000.
[26] R. Puri, K. Ramchandran, and A. Ortega. Joint source channel coding
with hybrid ARQ/FEC for robust video transmission. In IEEE Multime-
dia Signal Processing Workshop, 1998.
[27] L. Qian, D.L. Jones, K. Ramchandran, and S. Appadwedula. A general
joint source-channel matching method for wireless video transmission. In
Data Compression Conference, 1999. Proceedings. DCC’99, pages 414–
423. IEEE, 1999.
[28] D.W. Redmill and N.G. Kingsbury. The EREC: an error-resilient tech-
nique for coding variable-length blocks of data. Image Processing, IEEE
Transactions on, 5(4):565–574, 1996.
© 2014 by Taylor & Francis Group, LLC

46
Optimal Resource Allocation for Distributed Video Communications
[29] R. Rejaie, M. Handley, and D. Estrin. Quality adaptation for congestion
controlled video playback over the internet. In ACM SIGCOMM Com-
puter Communication Review, volume 29, pages 189–200. ACM, 1999.
[30] I. Rhee, V. Ozdemir, and Y. Yi. Tear: TCP emulation at receivers–ﬂow
control for multimedia streaming. 2000.
[31] A. Sampath, P. Sarath Kumar, and J.M. Holtzman.
Power con-
trol and resource management for a multimedia CDMA wireless sys-
tem.
In Personal, Indoor and Mobile Radio Communications, 1995.
PIMRC’95.Wireless: Merging onto the Information Superhighway, Sixth
IEEE International Symposium, volume 1, pages 21–25. IEEE, 1995.
[32] H.R. Shao, W. Zhu, and Y.Q. Zhang.
User-aware object-based video
transmission over the next generation internet. Signal Processing: Image
Communication, 16(8):763–784, 2001.
[33] J. Shin, J.W. Kim, and C.C.J. Kuo. Content-based packet video forward-
ing mechanism in diﬀerentiated service networks. In Proceedings of the
Packet Video Workshop. Citeseer, 2000.
[34] D. Sisalem and H. Schulzrinne. The loss-delay based adjustment algo-
rithm: A TCP-friendly adaptation scheme. In Workshop on Network and
Operating System Support for Digital Audio and Video. Citeseer, 1998.
[35] M. Soleimanipour, W. Zhuang, and G.H. Freeman. Modeling and resource
allocation in wireless multimedia CDMA systems. In Vehicular Technol-
ogy Conference, 1998. VTC 98. 48th IEEE, volume 2, pages 1279–1283.
IEEE, 1998.
[36] W.T. Tan and A. Zakhor. Real-time internet video using error resilient
scalable compression and TCP-friendly transport protocol. Multimedia,
IEEE Transactions on, 1(2):172–186, 1999.
[37] A. Vetro, H. Sun, and Y. Wang. Mpeg-4 rate control for multiple video
objects. Circuits and Systems for Video Technology, IEEE Transactions
on, 9(1):186–199, 1999.
[38] G. Wang, Q. Zhang, W. Zhu, and Y.Q. Zhang. Channel-adaptive error
control for scalable video over wireless channel. In IEEE MoMuc, pages
2000–2010, 2000.
[39] L. Wang and A. Vincent. Joint coding for multi-program transmission.
In Image Processing, 1996. Proceedings. volume 1, pages 425–428. IEEE,
1996.
[40] D. Wu, Y.T. Hou, Y.Q. Zhang, W. Zhu, and HJ Chao. Adaptive QoS
control for mpeg-4 video communication over wireless channels. In Cir-
cuits and Systems, 2000. Proceedings. ISCAS 2000 Geneva. volume 1,
pages 48–51. IEEE, 2000.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimized Resource Allocation for Scalable Video Communications
47
[41] Q. Zhang and S.A. Kassam.
Hybrid arq with selective combining for
fading channels. Selected Areas in Communications, IEEE Journal on
Selected Areas in Communications, 17(5):867–880, 1999.
[42] Q. Zhang, W. Zhu, G.J. Wang, and Y.Q. Zhang. Resource allocation
with adaptive QoS for multimedia transmission over w-cdma channels.
In Wireless Communications and Networking Conference, 2000. WCNC.
2000 IEEE, volume 1, pages 179–184. IEEE, 2000.
[43] W. Zhang, Q. Zhu and Y.Q. Zhang. Resource allocation for multimedia
streaming over the internet. IEEE Trans. on Multimedia, 3(3):339–355,
2001.
[44] W. Zhang, Q. Zhu and Y.Q. Zhang. Channel-adaptive resource allocation
for video transmission over 3G wireless network. IEEE Trans. on Circuit
and System for Video Technology, 14(8):1049–1063, 2004.
[45] Z. Zhu W. Zhang, Q. Ji and Y.Q. Zhang. Power-Minimized Bit Alloca-
tion for Video Communication Over Wireless Channels. IEEE Trans. on
Circuit and System for Video Technology, 12(6):398–410, 2002.
© 2014 by Taylor & Francis Group, LLC

© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

3
Optimal Resource Allocation for P2P
Streaming Systems
CONTENTS
3.1
Overview of P2P Streaming Systems .............................
50
3.1.1
P2P Live Streaming Systems ..............................
51
3.1.2
P2P VoD Systems ..........................................
52
3.2
Distributed Throughput Maximization for Scalable P2P VoD
systems ...........................................................
54
3.2.1
Throughput Maximization in Buﬀer-Forwarding P2P VoD
Systems ....................................................
55
3.2.1.1
Problem Formulation ............................
55
3.2.1.2
Distributed Solution .............................
59
3.2.1.3
Simulation Results ...............................
61
3.2.2
Throughput Maximization in Hybrid-Forwarding P2P
VoD Systems ...............................................
65
3.2.2.1
Problem Formulation ............................
66
3.2.2.2
Simulation Results ...............................
69
3.3
Streaming Capacity for P2P VoD systems ........................
72
3.3.1
Streaming Capacity for an Independent-Channel P2P
VoD System ................................................
74
3.3.2
Streaming Capacity for a Correlated-Channel P2P VoD
System .....................................................
77
3.3.2.1
Optimization of Server Upload Allocation among
Channels .........................................
77
3.3.2.2
Cross-Channel Sharing of Peer Upload
Bandwidth .......................................
79
3.3.3
Simulation Results .........................................
80
3.4
Summary ..........................................................
83
Bibliography .............................................................
85
With advances in the broadband Internet access technology and the coding
techniques, video streaming services have become increasingly popular. Tra-
ditionally, video streaming services are deployed in the client/server archi-
tecture. However, this centralized architecture cannot provide streaming to a
large population of users due to the limited upload capacity from the server.
49
© 2014 by Taylor & Francis Group, LLC

50
Optimal Resource Allocation for Distributed Video Communications
Peer-to-Peer (P2P) technology has recently become a promising approach to
provide live streaming services or Video-on-Demand (VoD) services to a huge
number of the concurrent users over a global area. P2P streaming systems can
be classiﬁed into P2P live streaming systems and P2P VoD systems. In a P2P
live streaming system, a live video is disseminated to all users in real time.
The video playbacks on all users are synchronized. In a P2P VoD system,
users can choose any video they like and start to watch it at any time. The
playbacks of the same video by diﬀerent users are not synchronized.
A P2P streaming system is a distributed and collaborative system, in which
peers contribute their resources to the system. The system performance is
greatly dependent on the resource utilization of each peer. Therefore, we will
examine the techniques for optimal resource allocation for P2P streaming
systems in this chapter. Speciﬁcally, we will present the the following two
topics: 1) distributed throughput maximization for scalable P2P VoD systems,
and 2) streaming capacity for P2P VoD systems, respectively. Before we go
deep into the resource optimization schemes, we will ﬁrst present the overview
of P2P streaming systems.
3.1
Overview of P2P Streaming Systems
With advances in broadband Internet access technology and the coding tech-
niques, video streaming services have become increasingly popular. For ex-
ample, YouTube [1], a video-sharing service which streams its videos to users
on-demand, has attracted about 20 million views a day [2]. Video traﬃc is
expected to be the dominating traﬃc on the Internet in the near future.
Conventionally, there are several approaches that can be used to deliver
video streams to the users. We can roughly categorize the traditional ap-
proaches in two categories: unicast-based and multicast-based [3]. In unicast-
based approaches, a unicast session is established for every user. There are
three unicast approaches to deliver streaming video over the Internet: cen-
tralized, proxy, and Content Delivery Network (CDN) [3]. In the centralized
approach, a powerful server with a high-bandwidth is deployed to serve video
streams to the users. The server consumes a corresponding amount of band-
width for each user. When the number of the users is increased to a certain
level, the server may not be able to support them due to the bandwidth con-
straint. In the proxy approach, proxy servers are deployed near the client
domains to cache a fraction of each video. The users can receive a part of
the video from the proxy server near them. Therefore, this approach relieves
the burden of the streaming server and the traﬃc load across the Wide Area
Network (WAN). However, this approach requires deploying and managing
proxies at many locations, which increases the cost. In the CDN approach,
the video streams are delivered by the third party, known as the CDN. Con-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
51
tent delivery networks, such as Akamai [4], deploy many servers at the edge
of the Internet. The user can request the video from the most suitable server.
The CDN eﬀectively shortens the users’ startup delays, and reduces the traﬃc
across the WAN. However, the cost of the CDN approach is quite high since
the CDN operator charges the video provider for every megabyte served.
The multicast-based approaches serve multiple users using the same
stream, which is bandwidth eﬃcient. The network-layer multicast establishes
a tree over the internal routers with the users as the leaves of the tree. Though
network-layer multicast is eﬃcient, it is not widely deployed due to the fol-
lowing reasons. First, network-layer multicast requires routers to maintain a
per-group state, which introduces high complexity at the IP layer. Second,
it is diﬃcult for the transport layer to provide ﬂow control and congestion
control in the network-layer multicast.
Peer-to-Peer (P2P) technology has recently been used in video streaming
applications [18, 6]. The basic design philosophy of P2P is to encourage users
to act as both clients and servers, namely as peers. In a P2P network, a peer
not only downloads the data from other supplying peers who are buﬀering
or storing them, but also uploads the downloaded data to other peers who
are requesting them. The upload bandwidth of end users is eﬃciently utilized
to oﬄoad the bandwidth burdens placed on the servers [7]. P2P streaming
systems can be categorized into P2P live streaming systems and P2P VoD
systems. A typical example of P2P live streaming systems is P2P IPTV, which
is used to broadcast the TV programs to all the participating users. In a P2P
VoD system, users can choose any video they like and start to watch it at any
time. The playbacks of the same video on diﬀerent users are not synchronized.
In other words, each user watches a diﬀerent position of the same video.
Next, we will present the overview of P2P live streaming systems and P2P
VoD systems, respectively.
3.1.1
P2P Live Streaming Systems
Based on the overlay structure, P2P live streaming systems can be broadly
classiﬁed into tree-based P2P live streaming systems and mesh-based P2P live
streaming systems.
In a tree-Based P2P live streaming system, a single application-layer tree
or multiple application-layer trees is constructed to deliver the video streams.
In a single-tree based P2P live streaming system, users participating in a
live video streaming session can form a tree at the application layer. The root
of the tree is the server. Each user joins the tree at a certain level. It receives
the video from its parent peer at the level above and forwards the received
video to its child peers at the level below. End System Multicast (ESM) [8] is
a typical example of a single-tree based P2P live streaming system.
There are two major drawbacks for single-tree based P2P live streaming
systems. First, the departure of a peer causes the isolation of all of its de-
scendants from the video source. Second, not all the leaf nodes contribute
© 2014 by Taylor & Francis Group, LLC

52
Optimal Resource Allocation for Distributed Video Communications
their uploading bandwidths, which degrades the eﬃciency of the peer band-
width utilization. A remedy to those drawbacks is a multiple-tree based P2P
streaming system.
To improve the resiliency of the tree and the bandwidth utilization of the
peers, multiple-tree based approaches have been proposed [9]. In multiple-tree
based P2P live streaming systems, the video is encoded into multiple sub-
streams, and each sub-stream is delivered over one tree. The quality received
by a peer depends on the number of sub-streams that it receives. There are
two key advantages to the multiple-tree solution. First, if a peer fails or leaves,
all its descendants lose the sub-stream delivered from that peer, but they
still receive the sub-streams delivered over the other trees. Therefore, all its
descendants can receive a coarse video quality in case of a loss of a sub-stream.
Second, a peer has diﬀerent roles in diﬀerent trees. It might be an internal
node in one tree and a leaf node in another tree. When a peer is an internal
node in a tree, its upload bandwidth will be utilized to upload the sub-stream
delivered over that tree. To achieve high bandwidth utilization, a peer with a
high upload bandwidth can supply sub-streams in more trees [10].
Peer dynamics make tree maintenance a challenging and costly task in
tree-based P2P live streaming systems. To combat the peer dynamics, many
recent P2P streaming systems use mesh-based streaming approach [18, 11]. In
mesh-based P2P live streaming systems, each peer exchanges the data with
a set of neighbors. If one neighbor leaves, the peer can still download the
video data from the remaining neighbors. Meanwhile, the peers will add other
peers into its neighbor set. Each peer can receive data from multiple supplying
peers in mesh-based streaming systems, instead of a single parent in single-
tree based streaming systems. Thus mesh-based streaming systems are robust
against peer dynamics.
3.1.2
P2P VoD Systems
Diﬀerent from live streaming systems in which each user watches almost the
same position of the video, VoD service allows users to watch any point of the
video at any time. VoD provides more ﬂexibility and interactivity to users,
thus attracting more users recently. In a VoD service, each user starts watching
the video at a diﬀerent time, and users may seek a new position in the video at
any time. Therefore diﬀerent users are watching diﬀerent positions of the same
video at a given instant. Due to the asynchrony of the users, the approaches of
overlay construction in P2P VoD systems are diﬀerent from those in P2P live
streaming systems. In P2P live streaming systems, any peer can be a potential
supplying peer (e.g., parent in tree-based systems or neighbor in mesh-based
systems) of another peer since they are watching almost the same position.
However, a peer in a P2P VoD system has to select a supplying peer from
those candidates who have the requested content.
Depending on the forwarding approach, the existing P2P VoD systems can
be classiﬁed into three categories: buﬀer-forwarding P2P VoD systems [9, 10],
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
53
storage-forwarding P2P VoD systems [14, 12], and hybrid-forwarding P2P
VoD systems [16]. In buﬀer-forwarding systems, each peer buﬀers the recently
received content, and forwards it to the child peers. In storage-forwarding sys-
tems, the blocks of the video are stored in the storages of peers. When a peer
wants to watch a video, it ﬁrst looks for the supplying peers who are storing the
content, and then requests the content from them. In hybrid-forwarding sys-
tems, a peer may have both buﬀer-forwarding parents and storage-forwarding
parents, and may receive the video content from both kinds of parents.
In buﬀer-forwarding systems, if each peer is connected to multiple parents,
a mesh-based overlay is formed. The maximal supported streaming rate in
mesh-based architecture is improved compared to the tree-based architecture,
since the upload bandwidth of each peer is utilized in a better way. In addition,
the mesh-based overlay is more resilient to peer dynamics since each peer can
receive the content supplied from multiple sources. However, each peer needs
to address content reconciliation in a mesh-based overlay, which introduces
extra communication overhead.
In buﬀer-forwarding P2P VoD systems, a peer receives the video content
from its parents. If the parents jump to other positions in the video, the
peer needs to search for new parents again. In storage-forwarding P2P VoD
systems, each video is divided into multiple segments, which are distributed
among peers. A peer receives the video content from the storage peers who
possess the requested segment. Each storage peer would not change the video
segments that it stores during its lifetime, and hence its activities (i.e., jump-
ing) do not aﬀect its children.
In buﬀer-forwarding P2P VoD systems, the peers redistribute their
buﬀered content to their child peers, thus oﬄoading the server burden. How-
ever, buﬀer-forwarding systems are less resilient to peer dynamics. If the par-
ents of a peer perform random seeks and jump away from the current position,
this peer needs to search for the new parents. In storage-forwarding P2P VoD
systems, the storage peers do not change the stored segments, thus provid-
ing a table service. However, the achievable throughput in storage-forwarding
systems is low due to the limitation of the total upload capacity. To overcome
these drawbacks, a hybrid-forwarding P2P VoD system is proposed in [16],
which improves the throughput by integrating both the buﬀer-forwarding ap-
proach and the storage-forwarding approach. In a hybrid-forwarding system,
the peers watching the same video form an overlay using the buﬀer-forwarding
approach. Moreover, each peer is encouraged to replicate in its storage one or
multiple segments of the video that it has watched before. The stored segments
can be used to serve other peers. The throughput of the hybrid-forwarding
P2P VoD systems is improved by fully utilizing both the buﬀer resources and
the storage resources of the peers.
© 2014 by Taylor & Francis Group, LLC

54
Optimal Resource Allocation for Distributed Video Communications
3.2
Distributed Throughput Maximization for Scalable
P2P VoD systems
Most existing P2P VoD systems adopt single-layer video coding. If the source
rate is high, the peers with a limited or low download bandwidth may not
be able to accommodate it. On the other hand, if the source rate is too low,
the peers with a high download bandwidth may underutilize their download
bandwidth. Therefore, a scalable source coding is a good solution for P2P
VoD applications with heterogeneous bandwidth. With scalable coding, the
high-bandwidth peers can receive a higher throughput, thus reconstructing the
video at a higher quality, while the low-bandwidth peers can receive a lower
bit rate, reconstructing the video at a lower quality. P2P streaming systems
using scalable coding, such as layered coding [25] and Multiple Description
Coding (MDC) [12], have been recently proposed.
In a scalable P2P VoD system, one of the goals is to maximize the aggregate
throughput among all the peers. In the P2P networks, each peer may receive
streams from multiple suppliers. Therefore, there is a risk that the receiver may
receive redundant packets. To combat this delivery redundancy, the receiver
can negotiate with its suppliers and request the distinct packets. However, this
method will introduce extra message exchanges among peers. Alternatively the
coding techniques such as fountain codes [18][19] or network coding [4] can
be applied to eliminate the redundant packets. If each peer receives distinct
packets, maximizing the reconstructed quality at each peer is equivalent to
maximizing the throughput.
The aggregate throughput can be maximized through optimal link rate
allocation. However, it is quite challenging to allocate each link rate optimally.
The reasons are as follows. 1) The number of link rates is typically huge in
P2P applications. 2) There are correlations among diﬀerent link rates. For
example, the outgoing rate from a peer can not exceed the aggregate rate
received by this peer. 3) Each peer has only the local information from its
neighbors rather than the global information. Hence, a centralized allocation
algorithm is not appropriate for P2P applications.
Throughput maximization in P2P applications has not been systematically
studied in the literature. Some existing P2P systems use an equal allocation
scheme by equally allocating the upload bandwidth to each of its outgoing
links [21]. Some other systems use a proportional allocation scheme [2], in
which the rate allocated to a child peer is proportional to the available down-
load bandwidth of this child peer. These existing approaches suﬀer from inef-
ﬁcient usage of network resources in a large and heterogeneous environment,
thus they cannot achieve a maximal throughput.
In this section, we present a systematic study on the throughput maxi-
mization in P2P VoD applications. First, we formulate the throughput max-
imization problem in the existing buﬀer-forwarding P2P VoD system, and
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
55
develop a fully distributed algorithm to solve it. Second, we propose a hybrid-
forwarding P2P VoD architecture, which improves the aggregate throughput
greatly, compared to the existing buﬀer-forwarding architecture. We formu-
late the throughput maximization problem in the hybrid-forwarding P2P VoD
architecture, and solve the problem with a fully distributed algorithm.
3.2.1
Throughput Maximization in Buﬀer-Forwarding P2P
VoD Systems
In this subsection, we examine the throughput maximization problem in
buﬀer-forwarding P2P VoD systems. We will present problem formulation,
distributed solution, and simulation results, respectively.
3.2.1.1
Problem Formulation
In buﬀer-forwarding P2P VoD systems, the server and the peers watching the
same video organize themselves into an overlay, which can be modeled as a
directed graph G = (N, L), where N is the set of peers and L is the set of
directed overlay links. Peer 1 is deﬁned as the server.
In order to formulate the throughput maximization problem, we ﬁrst deﬁne
the matrices to represent the topology of the overlay. The relationship between
the node and its outgoing links can be represented by a matrix A, whose
elements are deﬁned by
ail =

1,
if link l is an outgoing link from node i,
0,
otherwise.
(3.1)
The relationship between the node and its incoming links is represented by a
matrix B, whose elements are given by
bil =
 1,
if link l is an incoming link into node i,
0,
otherwise.
(3.2)
The relationship between the outgoing link and the incoming link of a node
is represented by a matrix C, whose elements are given by
clm =



1,
if link m is an incoming link into the start
node of link l,
0,
otherwise.
(3.3)
In VoD streaming applications, in-time delivery of the packets is important.
The packets that cannot arrive at the receiver before the payback deadline are
useless for decoding. In buﬀer-forwarding VoD systems, each peer caches the
received packets in the buﬀer to smoothen the payback and serve other peers.
Fig. 2 shows the buﬀer at a peer. The start time of the buﬀer at peer j is
denoted as tbs
j , the end time of the buﬀer at peer j is denoted as tbe
j , and the
playback time at peer j is denoted as tp
j. Suppose that a serving peer, peer
© 2014 by Taylor & Francis Group, LLC

56
Optimal Resource Allocation for Distributed Video Communications
j, transmits the buﬀered packets to a receiving peer, peer i, over an overlay
link, link l. With an initial playback delay din
i , peer i requests the packets
with timestamps larger than (tp
i + din
i ). Therefore, only the packets within a
transmission sliding window at peer j are eligible for transmission to peer i. In
order to be a serving peer to peer i, peer j needs to 1) have a larger playback
time than peer i, and 2) have a buﬀer overlap with peer i. If tbs
j < tp
i + din
i ,
the start time of the transmission sliding window is given by ts
ji = tp
i + din
i ,
as shown in Fig. 3.1(a). If tbs
j
≥tp
i + din
i , the start time of the transmission
sliding window is given by ts
ji = tbs
j , as shown in Fig. 3.1(b). In other words,
ts
ji = max{tbs
j , tp
i + din
i }. The end time of the transmission sliding window is
te
ji = tbe
i . Then the duration of the sliding window is given by dsw = te
ji −ts
ji.
Suppose that the transmission delay over link l from peer j to peer i follows
an exponential distribution with a mean delay τl. The packets need to arrive
at peer i before the payback deadline, otherwise they will be discarded. For
a delay upper bound dup, the probability that a packet transmitted to peer i
over link l is discarded is given by
pd(dup) =
Z ∞
dup
1
τl
exp(−t
τl
)dt = exp(−dup
τl
).
(3.4)
Any packet falling within the transmission sliding window at peer j has a
probability to be transmitted at the current moment. Which packet will be
chosen for transmission dynamically depends on: 1) which packets are available
at peer i, and 2) which packets are requested from other concurrent serving
peers. We assume that the packets within the transmission sliding window
at peer j have equal probability to be scheduled for transmission. Then the
expected probability that the transmitted packets arrive after the playback
deadline at peer i is given by
pl
=
R te
ji−tp
i
ts
ji−tp
i
pd(dup)
dsw
d(dup)
=
R te
ji−tp
i
ts
ji−tp
i
1
dsw exp(−dup
τl )d(dup)
=
τl
dsw (exp(−
ts
ji−tp
i
τl
) −exp(−
te
ji−tp
i
τl
)),
∀l ∈L.
(3.5)
The throughput at the receiving peer is deﬁned as the useful received
rate, excluding the excessively delayed packets which do not catch the
playback deadline. Therefore the throughput at peer i can be denoted as
P
l∈L bil(xl(1 −pl)), where xl is the link rate at link l. In practical VoD appli-
cations, we can provide a diﬀerentiated video quality to a user based on the
service the user purchases. For example, the users who pay a higher price for
the on-demand video should receive a higher throughput. To enable a diﬀer-
entiated throughput, we allocate a priority weight χi to peer i. Our objective
is to maximize the aggregate weighted throughput, which is formulated by
P
i∈N χi
P
l∈L bil(xl(1 −pl)).
At the server, each video is layered encoded and packetized in a prioritized
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
57
ti
p
ti
bs
ti
be
tj
p
tj
bs
tj
be
di
in
Transmission sliding window
time
dsw
time
Buffer at peer j (serving-peer):
Buffer at peer i (receiving-peer):
(a)
ti
p
ti
bs
ti
be
tj
p
tj
bs
tj
be
di
in
Transmission sliding window
dsw
Buffer at peer j (serving-peer):
Buffer at peer i (receiving-peer):
time
time
(b)
FIGURE 3.1
Transmission sliding window for the packet transmission over the overlay link
l from peer j to peer i: (a) if tbs
j < tp
i + din
i , and (b) if tbs
j ≥tp
i + din
i
© 2014 by Taylor & Francis Group, LLC

58
Optimal Resource Allocation for Distributed Video Communications
way before it is transmitted. The maximal source rate of the video is denoted
by sr. If sr is small, the upload bandwidth in the system will be underutilized.
Therefore, we encode the video into a high sr. Any peer can at most receive
a rate of sr. This is regarded as a source rate constraint, which is formulated
mathematically as P
l∈L bilxl ≤sr, ∀i ∈N. If a peer receives a rate of sr,
it can reconstruct the video at a full quality. Otherwise, it will reconstruct a
video at a partial quality if the received rate is less than sr.
Peer i has a download capacity (denoted as Ii) and an upload capacity
(denoted as Oi). In P2P streaming, the bandwidth bottleneck usually occurs
at the access links. Therefore, peer i has a download bandwidth constraint,
formulated as P
l∈L bilxl ≤Ii, ∀i ∈N, and an upload bandwidth constraint,
formulated as P
l∈L ailxl ≤Oi, ∀i ∈N, respectively.
At peer i (i ̸= 1), each outgoing link from peer i carries a rate no larger
than the total incoming rate into that peer. Each direct outgoing link from
the server carries a rate no larger than sr. This constraint is referred to as a
link-forwarding constraint, which can be formulated as
xl −
X
m∈L
clmxm ≤σl,
∀l ∈L.
(3.6)
where σl is a link-forwarding compensation element, and it is deﬁned as
σl =

sr,
if link l is a direct outgoing link from the server,
0,
otherwise.
(3.7)
The throughput maximization problem in the buﬀer-forwarding P2P VoD
system is to maximize the aggregate throughput by optimally allocating the
link rates, subject to the four constraints: the source rate constraint, the
download bandwidth constraint, the upload bandwidth constraint and the link-
forwarding constraint. Mathematically, the optimization problem can be for-
mulated as follows.
maximize(x)
P
i∈N χi
P
l∈L bil(xl(1 −pl))
subject to
P
l∈L bilxl ≤sr,
∀i ∈N,
P
l∈L bilxl ≤Ii,
∀i ∈N,
P
l∈L ailxl ≤Oi,
∀i ∈N,
xl −P
m∈L clmxm ≤σl,
∀l ∈L,
pl =
τl
dsw (exp(−
ts
ji−tp
i
τl
) −exp(−
te
ji−tp
i
τl
)),
∀l ∈L,
xl ≥0,
∀l ∈L.
(3.8)
The problem in (3.8) is a Linear Programming (LP) problem [21]. It can
be solved in a centralized way using the simplex method or the interior point
method [21]. However, a centralized algorithm requires global information,
thus is not applicable for the distributed P2P networks. In order to develop a
distributed algorithm, we change the maximization problem (3.8) to an equiv-
alent minimization problem, and then revise the objective function by adding
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
59
a corresponding quadratic regularization term for each link rate variable. Then
the optimization problem is converted to:
minimize(x)
−P
i∈N χi
P
l∈L bil(xl(1 −pl)) + εΣl∈Lx2
l
subject to
P
l∈L bilxl ≤yi,
∀i ∈N,
P
l∈L ailxl ≤Oi,
∀i ∈N,
xl −P
m∈L clmxm ≤σl,
∀l ∈L,
xl ≥0,
∀l ∈L,
yi = min{Ii, sr},
∀i ∈N,
(3.9)
where ε(ε > 0) is called the regularization factor. When ε is small enough,
the solution for the problem (3.9) is arbitrarily close to the solution for the
original throughput maximization problem (3.8).
3.2.1.2
Distributed Solution
In the optimization problem (3.9), the objective function is strictly convex,
and the constraints are linear. Hence, it is a convex optimization problem
[19]. We can develop a fully distributed algorithm to solve the optimization
problem (3.9) using the Lagrangian duality properties.
Slater’s condition holds [19] for the convex optimization problem (3.9),
thus the duality gap is zero. We can obtain the primal optimal solutions
indirectly by ﬁrst solving the dual problem [20]. We introduce dual variables
ui, vi(∀i ∈N) and λl(∀l ∈L) to formulate the Lagrangian corresponding to
the primal problem (3.9) as below
L(x, u, v, λ)
= ε P
l∈L x2
l −P
i∈N χi
P
l∈L bil(xl(1 −pl))
+ P
i∈N ui(P
l∈L bilxl −yi) + P
i∈N vi(P
l∈L ailxl −Oi)
+ P
l∈L λl(xl −P
m∈L clmxm −σl)
= P
l∈L(εx2
l + xlql) −P
l∈L λlσl −P
i∈N(uiyi + viOi),
(3.10)
where ql = −(1−pl) P
i∈N χibil+P
i∈N bilui+P
i∈N ailvi+λl−P
m∈L λmcml.
The Lagrange dual function is the minimum value of the Lagrangian over the
link rates:
G(u, v, λ)
= min(x≥0){L(x, u, v, λ)}
= P
l∈L min(xl≥0)(εx2
l + xlql) −P
l∈L λlσl−
P
i∈N(uiyi + viOi).
(3.11)
The Lagrange dual problem is to maximize the Lagrange dual function. That
is:
maximize(u,v,λ)
G(u, v, λ)
subject to
ui ≥0,
∀i ∈N,
vi ≥0,
∀i ∈N,
λl ≥0,
∀l ∈L.
(3.12)
We use the subgradient method [21] to solve the Lagrange dual problem
© 2014 by Taylor & Francis Group, LLC

60
Optimal Resource Allocation for Distributed Video Communications
(3.12). The dual variables u(k+1)
i
, v(k+1)
i
, λ(k+1)
l
at the (k + 1)th iteration are
updated respectively by
u(k+1)
i
= max{0, u(k)
i
−θ(k)(yi −
X
l∈L
bilx(k)
l
)},
∀i ∈N,
(3.13)
v(k+1)
i
= max{0, v(k)
i
−θ(k)(Oi −
X
l∈L
ailx(k)
l
)},
∀i ∈N,
(3.14)
λ(k+1)
l
= max{0, λ(k)
l
−θ(k)(
X
m∈L
clmx(k)
m + σl −x(k)
l
)},
∀l ∈L,
(3.15)
where θ(k) > 0 is the step size at kth iteration. The algorithm is guaranteed
to converge to the optimal value for a step-size sequence satisfying the non-
summable diminishing rule [20]:
lim
k→∞θ(k) = 0,
∞
X
k=1
θ(k) = ∞.
(3.16)
In our algorithm, the step size at the kth iteration is given by: θ(k) = ω/
√
k,
where ω > 0.
We can compute the link rates in parallel. At the kth iteration, the link
rate x(k)
l
at link l can be calculated from the dual variables.
x(k)
l
= max{0, −q(k)
l
2ε
},
∀l ∈L,
(3.17)
where q(k)
l
= −(1 −pl) P
i∈N χibil + P
i∈N bilu(k)
i
+ P
i∈N ailv(k)
i
+ λ(k)
l
−
P
m∈L λ(k)
m cml.
In practical distributed protocol, peer i maintains the following variables:
1) the incoming and outgoing link rates, 2) the dual variables ui and vi, and
3) the dual variable λl, where l is an outgoing link from peer i. For example,
peer i in Fig. 3.2 maintains the link rates xa, xb, xc, xd and dual variables
ui, vi, λc, λd. At each iteration, peer i performs two computation tasks: 1)
update the dual variables maintained by it, and 2) update the outgoing link
rates. Peer i updates the associated dual variables using Equations (3.13),
(3.14) and (3.15), which require only local link rates. Therefore there is no
communication overhead for the update of the associated dual variables. Peer
i updates the rate of each outgoing link using Equation (6.16), which requires
the information from the downstream node of this link. Fig. 3.2 shows the
message transmission from peer k to peer i when peer i wants to update one
of its outgoing link rates xc. Based on Equation (6.16), we know that peer i
needs to have (vi, uk, λc, λe, λf) in order to compute xc. The variables vi and
λc are locally available at peer i, while the variables (uk, λe, λf) are maintained
by peer k. Therefore a message containing (uk, λe, λf) needs to be delivered
to peer i for the update of xc. The communication overhead for the update
of a link rate is just a message from the downstream node of the link. The
message contains only a few numbers, thus consuming a small bandwidth.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
61
xa, xb, xc, xd
ui,vi,  c,  d
Link a
Link b
Link d
Link g
Link c
Link e
Link f
xg, xc, xe, xf
uk,vk,  e,  f
Peer i
Peer k
FIGURE 3.2
Message transmission from peer k to peer i
3.2.1.3
Simulation Results
We perform extensive simulations to study the throughput maximization in
buﬀer-forwarding P2P VoD systems. The simulation setup is as follows. The
server has an upload capacity of 2 Mbps. The maximal source rate is 1.3 Mbps.
Peers are heterogeneous at upload and download capacity. There are two
classes of peers: cable/DSL peers and Ethernet peers. Cable/DSL peers take
85% of the total population, with download capacity uniformly distributed
between 0.6 Mbps and 1.0 Mbps and upload capacity uniformly distributed
between 0.2 Mbps and 0.4 Mbps. Ethernet peers take the remaining 15% of
the total population, with both upload and download capacities uniformly
distributed between 1.0 Mbps and 2.0 Mbps. The playback time of each peer
is uniformly distributed between 0 and the length of the video (40 minutes).
In the overlay construction, each receiving peer is connected to two buﬀer-
forwarding parents. The transmission delay of an overlay link is uniformly
distributed between 5.0 ms and 20.0 ms. We encode Foreman sequence in
Common Intermediate Format (CIF) into 8 layers using SNR-scalable exten-
sion of H.264/AVC [14]. Each GOP consists of 16 frames. Each layer has an
average source bit rate of 60.0 Kbps. The source bit stream is packetized into
8 descriptions, each of which has an average bit rate of 162.5 Kbps. In the dis-
tributed optimization, the step size at kth iteration is given by θ(k) = 1.3/
√
k,
© 2014 by Taylor & Francis Group, LLC

62
Optimal Resource Allocation for Distributed Video Communications
and the regularization factor is set to 0.4. The convergence threshold for the
dual function is set to 10−5.
According to the measurement study from the real P2P VoD system [28]
deployed in 2006, the number of the concurrent users watching the same video
at the peak time can reach several hundreds. Therefore, we vary the network
size from 100 to 500 peers, and compare the average throughput and the Peak
Signal-to-Noise Ratio (PSNR), respectively. Fig. 3.3(a) compares the average
throughput among diﬀerent allocation schemes: a) centralized LP, in which
the link rates are obtained by solving the optimization problem (3.8) using
the centralized algorithm; b) distributed optimization, in which the link rates
are obtained by solving the optimization problem (3.9) using the proposed dis-
tributed algorithm; c) proportional allocation scheme, in which the link rate
allocated to a child node is proportional to the available download bandwidth
of this child node; and d) equal allocation scheme, in which each peer allocates
the upload rate equally to its children. Compared to the centralized LP solu-
tion, the proposed distributed algorithm sacriﬁces about 1.0% of the average
throughput due to the introduction of the small regularization terms. How-
ever, the centralized LP algorithm requires global information, which is not
appropriate for distributed P2P applications. The proposed distributed algo-
rithm achieves on average 10.48% of the throughput improvement compared
to the proportional allocation scheme, and on average 17.70% of the through-
put improvement compared to the equal allocation scheme. The comparison of
the average reconstructed PSNR is depicted in Fig. 3.3(b). By applying net-
work coding, each peer receives distinct packets. A higher throughput leads
to a higher PSNR. Therefore we observe that the proposed scheme using
distributed optimization achieves an average PSNR improvement of 0.30 dB
compared to the proportional allocation scheme, and 0.55 dB compared to the
equal allocation scheme.
When the number of the peers is increased from 100 to 500, the number of
the overlay links is increased linearly from 197 to 997, as shown in Fig. 3.4(a).
In the proposed algorithm, a link rate is updated only when the correspond-
ing dual variables have been changed. From Fig. 3.4(b), we can see that the
average number of iterations per link basically remains at the same level. The
communication overhead varies little with diﬀerent network size, as shown in
Fig. 3.4(c). The number of iterations per link and the communication overhead
per node do not increase with the number of the peers, demonstrating that
the proposed algorithm is scalable. In the proposed algorithm, the update of a
link rate requires only a message delivery from the corresponding downstream
node. Therefore, the average communication overhead per node is very small,
consuming less than 1.0% of the average throughput.
There is a tradeoﬀbetween the throughput and the communication over-
head with diﬀerent regularization factors, as shown in Fig. 3.5. If a larger
regularization factor is chosen, the communication overhead can be reduced,
On the other hand, a larger regularization factor leads to a reduction of the
average throughput. In our simulations, we choose a regularization factor of
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
63
100
200
300
400
500
0.3
0.35
0.4
0.45
Average throughput [Mbps]
Number of peers
 
 
Centralized LP
Distributed optimization
Proportional allocation
Equal allocation
(a)
100
200
300
400
500
25
25.5
26
26.5
27
27.5
Average PSNR [dB]
Number of peers
 
 
Distributed optimization
Proportional allocation
Equal allocation
(b)
FIGURE 3.3
Performance comparison in buﬀer-forwarding P2P VoD systems with diﬀerent
network sizes: (a) the average throughput, and (b) the average PSNR
© 2014 by Taylor & Francis Group, LLC

64
Optimal Resource Allocation for Distributed Video Communications
100
200
300
400
500
0
200
400
600
800
1000
Number of overlay links
Number of peers
(a)
100
200
300
400
500
0
20
40
60
80
100
Average number of 
iterations per link
Number of peers
(b)
100
200
300
400
500
0
0.5
1
1.5
2
2.5
3
3.5
Average communication 
overhead per node [Kbps]
Number of peers
(c)
FIGURE 3.4
Comparison of the cost introduced by the proposed distributed algorithm
in buﬀer-forwarding P2P VoD systems with diﬀerent network sizes: (a) the
number of the overlay links, (b) the average number of iterations per link,
and (c) the average communication overhead per node
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
65
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0
2
4
6
8
10
12
14
16
Average communication overhead [Kbps]
Regularization factor
 
 
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.365
0.37
0.375
0.38
0.385
0.39
0.395
0.4
0.405
Average throughput [Mbps]
Average communication overhead
Average throughput
FIGURE 3.5
The impact of the regularization factor on the communication overhead and
the average throughput in a 200-peer buﬀer-forwarding P2P VoD system
0.4, with which we obtain an average throughput of 0.394 Mbps at the average
communication overhead per node of 2.96 Kbps.
3.2.2
Throughput Maximization in Hybrid-Forwarding P2P
VoD Systems
To improve the throughput, we propose a hybrid forwarding P2P VoD archi-
tecture which combines both the buﬀer-forwarding approach and the storage-
forwarding approach. In the hybrid-forwarding architecture, the peers watch-
ing the same video form an overlay using the buﬀer-forwarding approach. In
the example shown in Fig. 3.6, peers 3, 7, 130, 116, 104 and 1 form video-1
buﬀer-forwarding overlay, and peers 134, 34, 115, 43, 22 and 1 form video-2
buﬀer-forwarding overlay. Please note that the server participates in all of the
video overlays since it contains the contents of all the videos. In the hybrid-
forwarding architecture, each peer is encouraged or required to replicate in
its storage one or multiple segments of the video that it has watched before.
The stored segments can be used to serve other peers. Therefore, the upload
bandwidth of the idle peers can be utilized, since they can contribute their
stored segments to other peers. In the hybrid-forwarding architecture, peers
may have both buﬀer-forwarding links and storage-forwarding links. For ex-
ample, peer 115 in Fig. 3.6 forwards its buﬀered content to peer 34 and peer
134 in video-2 overlay; meanwhile, it also forwards its stored content to peer 7
© 2014 by Taylor & Francis Group, LLC

66
Optimal Resource Allocation for Distributed Video Communications
3
7
130
116
104
Server
1
134
34
115
43
22
72
21
57
Buffer-forwarding link
Storage-forwarding link
Idle peers
Video-2 buffer-forwarding
overlay
Video-1 buffer-forwarding
overlay
FIGURE 3.6
Illustration of a hybrid-forwarding P2P VoD system
in the video-1 overlay. The two kinds of outgoing links compete for the limited
upload bandwidth. By allocating a larger portion of the upload bandwidth to
the peers watching a high prioritized video (e.g., paid program) compared to
those watching a low prioritized video (e.g., free program), service diﬀerenti-
ation among videos can be implemented. Furthermore, the hybrid-forwarding
architecture is robust to random seeks because the stored content is a stable
source unless the supplier shuts down the P2P application. For example, when
the buﬀer-forwarding parents (e.g., peer 130 and 116) of peer 7 both jump to
other positions, peer 7 still has a stream supply from its storage-forwarding
parent (e.g., peer 115), which maintains the continuous playback.
In the overlay construction, the peers watching the same video are ﬁrst
organized into a buﬀer-forwarding overlay using one of the existing approaches
in [7][8][9], then each peer locates the storage-forwarding parents either in a
centralized way [12] or in a distributed way [11] and connects itself to them.
3.2.2.1
Problem Formulation
The hybrid-forwarding overlay can be represented by a directed graph G =
(N, L), where N is the set of the peers and L is the set of directed overlay
links. The relationship between the node and its incoming links is represented
by a matrix B, which is deﬁned in Equation (3.2) in Section 3.2.1.1. The
relationship between the outgoing link and the incoming link of a node is
represented by a matrix C, which is deﬁned in Equation (3.3) in Section
3.2.1.1. The relationship between the node and its buﬀer-forwarding outgoing
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
67
links is represented by a matrix D, whose elements are given by
dil =



1,
if link l is a buﬀer-forwarding outgoing link
from node i,
0,
otherwise.
(3.18)
The relationship between the node and its storage-forwarding outgoing links
is represented by a matrix H, whose elements are given by
hil =



1,
if link l is a storage-forwarding outgoing link
from node i,
0,
otherwise.
(3.19)
Suppose there are V videos, denoted as v = 1, ..., V , being distributed
in the P2P overlay. Each video is allocated with a priority level, denoted as
αv(0 ≤αv ≤1). A peer can only watch one video at a time. We use βi to
denote the peer priority based on which video the peer is watching:
βi =
 αv,
if peer i is watching video v,
0,
otherwise.
(3.20)
The probability that a packet transmitted through link l arrives after the
playback deadline is denoted by pl, which can be computed using Equation
(3.5) in Section 3.2.1.1. The throughput at peer i is given by P
l∈L bil(xl(1 −
pl)), ∀i ∈N. The objective of the optimization problem is to maximize the
aggregate weighted throughput, taking into account the video priority level.
It is formulated by P
i∈N βi
P
l∈L bil(xl(1 −pl)).
As described in Section 3.2.1.1, each peers follows the source rate con-
straint, which is given by P
l∈L bilxl ≤sr, ∀i ∈N, where sr is the maxi-
mal source rate. Also, each peer follows the download bandwidth constraint:
P
l∈L bilxl ≤Ii, ∀i ∈N. The aggregate rate of the buﬀer-forwarding outgoing
links from peer i can be expressed by P
l∈L dilxl, and the aggregate rate of the
storage-forwarding outgoing links from peer i can be expressed by P
l∈L hilxl.
The total outgoing rate, consisting of the buﬀer-forwarding outgoing rate and
the storage-forwarding outgoing rate, needs to satisfy the upload bandwidth
constraint, given by P
l∈L dilxl + P
l∈L hilxl ≤Oi, ∀i ∈N.
The direct outgoing link from the server carries a rate no larger than sr,
and each buﬀer-forwarding outgoing link from peer i(i ̸= 1) carries a rate no
larger than the total incoming rate into that peer. This constraint is referred
to as a buﬀer-forwarding constraint, which can be formulated as
xl −
X
m∈L
clmxm ≤ϕl,
∀l ∈L.
(3.21)
where ϕl is a buﬀer-forwarding compensation element, and it is deﬁned as
ϕl =



sr,
if link l is a direct outgoing link from the
server or a storage-forwarding link,
0,
otherwise.
(3.22)
© 2014 by Taylor & Francis Group, LLC

68
Optimal Resource Allocation for Distributed Video Communications
How to replicate the segments in the pool of the peers is still an open prob-
lem. In this paper, we adopt a random replication strategy in which each peer
is required to store one random segment. Our algorithm can be easily extended
to deal with the case in which multiple segments are replicated in each peer.
The stored segments are obtained in the previous VoD sessions. Since each
peer is allocated with a diﬀerent priority weight, it receives the video at a dif-
ferent rate. The peer with a high priority weight receives the video at a high
rate, while the peer with a low priority weight receives the video at a low
rate. Therefore, each peer has a diﬀerent rate for the stored segment. We use
Fi(∀i ∈N) to denote the rate of the stored segment at peer i. In the hybrid-
forwarding P2P VoD system, we have a storage-forwarding constraint: the rate
at each storage-forwarding outgoing link from peer i is no larger than the rate
Fi of the stored segment at peer i. This constraint can be formulated as
xl −
X
i∈N
hilFi ≤ξl,
∀l ∈L.
(3.23)
where ξl is a storage-forwarding compensation element, and it is deﬁned as
ξl =
 sr,
if link l is a buﬀer-forwarding link,
0,
otherwise.
(3.24)
The throughput maximization problem in the hybrid-forwarding P2P VoD
system is to maximize the aggregate weighted throughput by optimally deter-
mining the link rates, subject to the above ﬁve constraints: source rate con-
straint, download bandwidth constraint, upload bandwidth constraint, buﬀer-
forwarding constraint, and storage-forwarding constraint. Mathematically, the
optimization problem can be formulated as follows.
maximize(x)
P
i∈N βi
P
l∈L bil(xl(1 −pl))
subject to
P
l∈L bilxl ≤sr,
∀i ∈N,
P
l∈L bilxl ≤Ii,
∀i ∈N,
P
l∈L dilxl + P
l∈L hilxl ≤Oi,
∀i ∈N,
xl −P
m∈L clmxm ≤ϕl,
∀l ∈L,
xl −P
i∈N hilFi ≤ξl,
∀l ∈L,
xl ≥0,
∀l ∈L.
(3.25)
The optimization problem (3.25) is a LP problem. Similar to the conver-
sion in Section 3.2.1.1, we change the objective function in the optimization
problem (3.25) to a strictly convex function. Then the optimization problem
is converted to:
minimize(x)
−P
i∈N βi
P
l∈L bil(xl(1 −pl)) + εΣl∈Lx2
l
subject to
P
l∈L bilxl ≤yi,
∀i ∈N,
P
l∈L dilxl + P
l∈L hilxl ≤Oi,
∀i ∈N,
xl −P
m∈L clmxm ≤ϕl,
∀l ∈L,
xl −P
i∈N hilFi ≤ξl,
∀l ∈L,
xl ≥0,
∀l ∈L,
yi = min{Ii, sr},
∀i ∈N.
(3.26)
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
69
A suﬃciently small regularization factor ε(ε > 0) makes the solution for the
optimization problem (3.26) arbitrarily close to the solution for the original
problem (3.25).
The optimization problem (3.26) has a quadratic convex objective function
and the linear constraints, thus it is a convex optimization problem [19]. We
can develop a fully distributed algorithm to solve it [20].
3.2.2.2
Simulation Results
In the simulations for throughput maximization in hybrid-forwarding P2P
VoD systems, we use the same setup as described in Section 3.2.1.3. Two
videos, denoted as video 1 and video 2, are distributed over the hybrid-
forwarding P2P VoD system. The server owns the whole length of the two
videos at the full rate in its storage. Among all the peers, 60% percent of the
peers are watching video 1, 30% of the peers are watching video 2, and the
remaining 10% of the peers are idle at that moment. The priority levels of two
videos are both set to a default value 0.5 if not speciﬁed in particular. Each
peer is required to store a random segment with a length of 2 minutes. In the
default setting, each receiver is connected to two buﬀer-forwarding parents,
and two storage-forwarding parents if available.
We compare the performance with diﬀerent network sizes. “Hybrid-
forwarding centralized” represents the results obtained by solving the op-
timization problem (3.25) with the centralized algorithm in the hybrid-
forwarding architecture. “Hybrid-forwarding distributed” represents the re-
sults obtained by solving the optimization problem (3.26) with the pro-
posed distributed algorithm in the hybrid-forwarding architecture. “Buﬀer-
forwarding distributed” represents the solution obtained by a distributed algo-
rithm in the buﬀer-forwarding architecture. “Buﬀer-forwarding proportional”
represents the results obtained by using proportional allocation scheme in the
buﬀer-forwarding architecture. “Storage-forwarding distributed” represents
the solution obtained by a distributed algorithm in the storage-forwarding ar-
chitecture. “Hybrid-forwarding centralized” obtains the truly optimal solution
in the hybrid-forwarding architecture. However, this scheme requires global
information, thus not scalable. As shown in Fig. 3.7(a), the average through-
put obtained with the proposed algorithm, “hybrid-forwarding distributed,” is
6.6% – 9.0% lower than the truly optimal throughput due to the introduction
of the small regularization terms in the objective function of the optimization
problem (3.26). By utilizing both the buﬀer and the storage, the proposed
“hybrid-forwarding distributed” scheme improves the average throughput by
18.50% compared to “buﬀer-forwarding distributed,” and 30.50% compared to
“buﬀer-forwarding proportional.” “Storage-forwarding distributed” obtains the
lowest throughput. The comparison of average PSNR is shown in Fig. 3.7(b).
The proposed “hybrid-forwarding distributed” scheme outperforms “buﬀer-
forwarding distributed” by 0.56 dB and “buﬀer-forwarding proportional” by
0.85 dB, respectively.
© 2014 by Taylor & Francis Group, LLC

70
Optimal Resource Allocation for Distributed Video Communications
100
200
300
400
500
0
0.2
0.4
0.6
0.8
Average throughput [Mbps]
Number of peers
 
 
Hybrid−forwarding centralized
Hybrid−forwarding distributed
Buffer−forwarding distributed
Buffer−forwarding proportional
Storage−forwarding distributed
(a)
100
200
300
400
500
20
22
24
26
28
30
Average PSNR [dB]
Number of peers
 
 
Hybrid−forwarding distributed
Buffer−forwarding distributed
Buffer−forwarding proportional
(b)
FIGURE 3.7
Performance comparison with diﬀerent network sizes: (a) the average through-
put, and (b) the average PSNR
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
71
100
200
300
400
500
0
500
1000
1500
2000
Number of overlay links
Number of peers
 
 
Hybrid−forwarding distributed
Buffer−forwarding distributed
(a)
100
200
300
400
500
0
10
20
30
40
50
60
70
Average number of 
iterations per link
Number of peers
 
 
Hybrid−forwarding distributed
Buffer−forwarding distributed
(b)
100
200
300
400
500
0
1
2
3
4
5
6
Average communication 
overhead per node [Kbps]
Number of peers
 
 
Hybrid−forwarding distributed
Buffer−forwarding distributed
(c)
FIGURE 3.8
Comparison of the cost between the hybrid-forwarding architecture and the
buﬀer-forwarding architecture with diﬀerent network sizes: (a) the number of
the overlay links, (b) the average number of iterations per link, and (c) the
average communication overhead per node
© 2014 by Taylor & Francis Group, LLC

72
Optimal Resource Allocation for Distributed Video Communications
In the hybrid-forwarding architecture, each peer has not only buﬀer-
forwarding links but also storage-forwarding links. Therefore the number of
the links in the hybrid-forwarding architecture is much larger than that in
the buﬀer-forwarding architecture, as shown in Fig. 3.8(a). The proposed al-
gorithm divides the computation load to each link or node. Therefore we can
see from Fig. 3.8(b) and Fig. 3.8(c) that the average number of iterations
per link and the average communication overhead per node in both archi-
tectures do not increase with the network sizes, demonstrating that the pro-
posed algorithm is scalable. Though the communication overhead per node
in the hybrid-forwarding architecture is much higher than that in the buﬀer-
forwarding architecture, it only consumes averagely 1.1% of the throughput.
3.3
Streaming Capacity for P2P VoD systems
Most of the P2P VoD systems oﬀer many video channels. Users can choose any
of the channels that they are interested in at any time. The P2P VoD systems
with multiple channels are called multi-channel P2P VoD systems. Depending
on the resource correlation, multi-channel P2P VoD systems can be catego-
rized into independent-channel P2P VoD systems and correlated-channel P2P
VoD systems. In an independent-channel P2P VoD system, the peers watching
the same channel form an independent overlay, and share the resources with
each other exclusively within the overlay. In a correlated-channel P2P VoD
system, overlay m formed by the peers watching channel m can be correlated
with overlay k formed by the peers watching channel k, such that the peers
in overlay m can share the resources not only with other peers in overlay m
but also with the peers in overlay k. The resources in a correlated-channel
P2P VoD system can be utilized in a better way compared to an independent-
channel P2P VoD system.
In P2P VoD systems, users would like to watch the video at a high quality.
The streaming rate can be used to indicate the video quality. Let M denote the
set of the channels in a P2P VoD system. If channel m(m ∈M) is associated
with overlay m, streaming capacity for channel m, denoted by cm, is deﬁned
as the maximum streaming rate that can be received by every user in overlay
m [32][33]. The average streaming capacity cavg for a multi-channel P2P VoD
system is deﬁned as: cavg = Σm∈Mpmcm where pm is the priority of channel
m, and Σm∈Mpm = 1. The priority of a channel can be set by the service
provider. For example, the more expensive channel can be assigned a higher
priority.
Streaming capacity in multi-channel P2P VoD systems is a challenging
problem. The average streaming capacity in a multi-channel P2P VoD system
is dependent on the number of peers, the playback time and the bandwidth
of each peer, the server capacity, the overlay construction, and the resource
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
73
allocation. Optimal resource allocation in a multi-channel P2P VoD system
is expected to improve the streaming capacity. However, resource allocation
in multi-channel P2P VoD systems is quite challenging due to the following
reasons. 1) Peers have heterogeneous upload and download bandwidths and
diﬀerent playback progress. 2) Each channel is heterogeneous in terms of avail-
able resources, since the number of the peers in each channel is diﬀerent. 3)
Peers may leave or join a channel dynamically.
Streaming capacity in P2P live systems has been examined in the recent
literature [32][33][10][34]. In [32], the streaming capacity problem is formu-
lated into an optimization problem, which maximizes the streaming rate that
can be supported by a multi-tree based overlay. Sengupta et al. provide a tax-
onomy of sixteen problem formulations on streaming capacity, depending on
whether there is a single P2P session or there are multiple concurrent sessions,
whether the given topology is a full mesh graph or an arbitrary graph, whether
the number of peers a node can have is bounded or not, and whether there
are non-receiver relay nodes or not [33]. Liu et al. analyze the performance
bounds for minimum server load, maximum streaming rate, and minimum tree
depth in tree-based P2P live systems, respectively [10]. The streaming capac-
ity under node degree bound is investigated in [34]. Streaming capacity for a
single channel in P2P VoD systems has been studied in [35][36][37]. In [35][37],
the streaming capacity for a single channel is formulated into an optimization
problem which maximizes the streaming rate under the peer bandwidth con-
straints.The throughput maximization problem in a scalable P2P VoD system
is studied in [38]. Helpers have been proposed in P2P systems to improve the
system performance [39][40][36]. In P2P VoD systems, each additional helper
increases the system upload capacity, thus oﬄoading the server burden [40].
In [36], the algorithms on helper assignment and rate allocation are proposed
to improve the streaming capacity for P2P VoD systems.
Cross-channel resource sharing has been recently studied in multi-channel
P2P streaming systems [41][42][43][44][45]. In [41], Wu et al. propose an online
server capacity provisioning algorithm to adjust the server capacities avail-
able to each of the concurrent channels, taking into account the number of
peers, the streaming quality, and the priorities of channels. In [42], a View-
Upload Decoupling (VUD) scheme is proposed to decouple what a peer up-
loads from what it views, bringing stability to multi-channel P2P streaming
systems and enabling cross-channel resource sharing. In [43], Wu et al. develop
inﬁnite-server queueing network models to analytically study the performance
of multi-channel P2P live streaming systems. In [44], the bandwidth satisfac-
tion ratio is used to compare three bandwidth allocation schemes, namely
the Naive Bandwidth allocation Approach (NBA), the Passive Channel-aware
bandwidth allocation Approach (PCA) and the Active Channel-aware band-
width allocation Approach (ACA), in multi-channel P2P streaming systems.
In [45], Zhao et al. investigate the streaming capacity in multi-channel P2P
live streaming systems when each peer can only connect to a small number of
neighbors.
© 2014 by Taylor & Francis Group, LLC

74
Optimal Resource Allocation for Distributed Video Communications
In this section, we examine the streaming capacity problem for P2P VoD
systems. We ﬁrst investigate the streaming capacity for an independent-
channel P2P VoD system, in which we ﬁnd the streaming capacity for a single
channel by optimizing the intra-channel resource allocation in a distributed
manner. We then investigate the streaming capacity for a correlated-channel
P2P VoD system, in which we ﬁnd the average streaming capacity for mul-
tiple channels by optimizing both intra-channel and cross-channel resource
allocation.
3.3.1
Streaming Capacity for an Independent-Channel P2P
VoD System
In an independent-channel P2P VoD system, the peers watching the same
channel form an overlay. We assume that the server upload bandwidth al-
located to channel m, denoted by sm, is pre-determined. An independent-
channel P2P VoD system is illustrated in Fig. 3.9. The peers within the same
overlay re-distribute the video content to each other. A peer belonging to over-
lay m only caches the video content of channel m, and it does not serve any
video content to any peer outside overlay m. In other words, each overlay in
an independent-channel P2P VoD System is an isolated subsystem. Therefore,
the streaming capacity of a channel is independent of that of another channel.
The streaming capacity problem in an independent-channel P2P VoD system
is to ﬁnd the streaming capacity of each individual channel, respectively. We
will next focus on the streaming capacity for a single channel.
The streaming capacity for a single channel depends on the constructed
overlay. In a P2P VoD system, each peer maintains a buﬀer to cache the
recently received packets in order to smoothen the payback and serve other
peers. There is a parent-child relationship between two peers (e.g., peer k and
peer j) if the two peers satisfy the following two conditions: 1) peer k (the
parent) has an earlier playback progress than peer j (the child), and 2) peer
k is buﬀering the segment(s) which are being requested by peer j.
A parent-child relationship is implemented, if an overlay link has been es-
tablished from the parent to the child. A complete overlay for a channel is
deﬁned as the overlay in which all of the available parent-child relationships
have been implemented, and an incomplete overlay for a channel is deﬁned
as the overlay in which only a part of the available parent-child relationships
have been implemented [37]. An example of complete overlay is illustrated in
Fig. 3.10. As shown in Fig. 3.10, peer 3 is the parent of peer 2, and peer 5
is the parent of peer 4. There is no buﬀer overlap between peer 3 and peer
4, which means that peer 4 is not a parent of peer 3. The overlay in Fig.
3.10 is a complete overlay since all of the available parent-child relationships
have been implemented. Compared to the incomplete overlay, the complete
overlay contains more overlay links, thus supporting a higher streaming ca-
pacity. Therefore, we will formulate the streaming capacity problem based on
the complete overlay. The method for overlay construction is not a study fo-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
75
1
2
Server
3
4
5
Overlay 1
6
7
8
12
13
14
15
Overlay 2
16
17
18
22
23
24
25
Overlay 3
26
27
28
s1
s2
s3
FIGURE 3.9
Illustration of an independent-channel P2P VoD system
cus of this paper. A complete overlay can be constructed using the existing
approaches [6].
The set of the overlays (channels) in the independent-channel P2P VoD
system is denoted by M. Since each channel is independent in terms of re-
sources, we can just study the streaming capacity of channel m (∀m ∈M).
Overlay m in a P2P VoD system can be modeled as a directed graph
G(m) = (N(m), L(m)), where N(m) is the set of nodes and L(m) is the set
of directed overlay links. Peer 1 is deﬁned as the server. The relationship
between a node and its outgoing links is represented with a matrix A(m)+,
whose elements are given by
a(m)+
il
=

1,
if link l is an outgoing link from node i,
0,
otherwise.
(3.27)
The relationship between a node and its incoming links is represented with a
matrix A(m)−, whose elements are given by
a(m)−
il
=

1,
if link l is an incoming link into node i,
0,
otherwise.
(3.28)
The upload capacity of peer i is denoted by O(m)
i
. Upload capacity is
typically the bottleneck in P2P systems. We consider upload constraint at
© 2014 by Taylor & Francis Group, LLC

76
Optimal Resource Allocation for Distributed Video Communications
1
2
Server
Buffer 
3
4
5
Time
0
Playback time
Playback time
Buffer 
Playback time
Buffer 
Playback time
Buffer 
Peer
FIGURE 3.10
Illustration of the complete overlay in an independent-channel P2P VoD sys-
tem
peer i(∀i ∈N(m)), which is given by P
l∈L(m) a(m)+
il
x(m)
l
≤O(m)
i
where x(m)
l
is the link rate at link l of overlay m. The upload constraint represents that the
total outgoing rate from peer i is no larger than its upload capacity O(m)
i
. The
streaming rate for channel m is denoted by r(m). Each peer except the server
(e.g., Peer 1) receives the streaming rate r(m), which can be expressed by
P
l∈L a(m)−
il
x(m)
l
= f (m)
i
r(m), ∀i ∈N(m), where f (m)
i
= 0 if i = 1, or f (m)
i
= 1
otherwise. The download constraint is given by r(m) ≤mini∈N(m) I(m)
i
where
I(m)
i
is the download capacity of peer i. From the download constraint, we
can see that the maximal streaming rate is limited by the minimal download
capacity among the peers. Therefore, the users with a very low download
bandwidth should not be admitted into the P2P VoD system in order to
maintain a high streaming capacity.
The streaming capacity for channel m is stated as: to maximize the stream-
ing rate r(m) that can be received by every user in channel m by optimizing
the streaming rate r(m) and the link rate x(m)
l
(∀l ∈L(m)) under the upload
constraint at each peer. Mathematically, the problem can be formulated as
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
77
follows.
maximize
r(m)
subject to
P
l∈L(m) a(m)−
il
x(m)
l
= f (m)
i
r(m),
∀i ∈N(m),
P
l∈L(m) a(m)+
il
x(m)
l
≤O(m)
i
,
∀i ∈N(m),
x(m)
l
≥0,
∀l ∈L(m),
0 ≤r(m) ≤mini∈N(m) I(m)
i
.
(3.29)
The optimization problem in (3.29) is a LP. It can be solved in a cen-
tralized way using the interior point method [21]. However, the centralized
solution is not scalable. Therefore we will develop a distributed algorithm
using the primal-dual method to solve the streaming capacity problem.
In order to develop a distributed algorithm, we change the problem (3.29)
into a proximal optimization problem as follows.
minimize
−r(m) + ε(r(m))2 + ε P
l∈L(m)(x(m)
l
)2
subject to
P
l∈L(m) a(m)−
il
x(m)
l
= f (m)
i
r(m), ∀i ∈N(m),
P
l∈L(m) a(m)+
il
x(m)
l
≤O(m)
i
, ∀i ∈N(m),
x(m)
l
≥0, ∀l ∈L(m),
0 ≤r(m) ≤mini∈N(m) I(m)
i
,
(3.30)
where ε(ε > 0) is called the regularization factor. When ε is small enough, the
solution for the problem in (3.30) is arbitrarily close to the solution for the
original streaming capacity problem (3.29). The optimization problem (3.30)
is a convex optimization problem with a quadratic objective function and the
linear constraints [19]. Therefore, we can develop a distributed algorithm to
solve the optimization problem (3.30) based on dual decomposition [20].
3.3.2
Streaming Capacity for a Correlated-Channel P2P
VoD System
In a correlated-channel P2P VoD system, the resources among diﬀerent chan-
nels can be shared with each other. The average streaming capacity in a
correlated-channel P2P VoD system can be obtained by optimizing both the
intra-channel resource allocation and the cross-channel resource allocation.
The optimization of intra-channel resource allocation for a single channel has
been presented in Section 3.3.1. In this section, we will focus on the cross-
channel resource allocation. We will ﬁrst optimize the server upload allocation
among channels to maximize the average streaming capacity in Section 3.3.2.1,
and then further utilize cross-channel peer upload bandwidth to improve the
average streaming capacity in Section 3.3.2.2.
3.3.2.1
Optimization of Server Upload Allocation among Channels
The server upload allocated for channel m is denoted by sm. In an
independent-channel P2P VoD system, the server upload allocation for each
© 2014 by Taylor & Francis Group, LLC

78
Optimal Resource Allocation for Distributed Video Communications
channel is pre-determined. Therefore the server upload bandwidth is not uti-
lized in an optimal way. In this subsection, we treat {sm, ∀m ∈M} as vari-
ables, and optimize them to maximize the average streaming capacity for a
correlated-channel P2P VoD system.
The optimization of server upload allocation for a correlated-channel P2P
VoD system is stated as: to maximize the average streaming rate by optimiz-
ing the server upload allocation, the link rates, and the streaming rate, for
each channel, subject to the upload constraint at each peer. Since maximizing
the average streaming rate is equivalent to minimizing the negative average
streaming rate, we formulate the problem into a minimization problem as
follows.
minimize
−Σm∈Mpmr(m)
subject to
P
l∈L(m) a(m)−
il
x(m)
l
= f (m)
i
r(m),
∀i ∈N(m), ∀m ∈M,
P
l∈L(m) a(m)+
il
x(m)
l
≤O(m)
i
,
∀i ∈N(m), ∀m ∈M,
x(m)
l
≥0,
∀l ∈L(m),
P
m∈M sm ≤sT ,
sm ≥0,
∀m ∈M,
0 ≤r(m) ≤
min
i∈N(m)I(m)
i
, ∀m ∈M,
(3.31)
where pm is the priority for channel m, and sT is the server upload capacity.
The optimization problem in (3.31) is an LP. The optimization variables in the
optimization problem (3.31) are the server upload allocation sm, the link rate
vector x(m), and the streaming rate r(m), for channel m, ∀m ∈M. The num-
ber of the optimization variables is increased with the number of the channels
and the number of the links in each overlay. In order to solve the optimiza-
tion eﬃciently, we use dual decomposition [20] to decompose the optimization
problem (3.31) into multiple subproblems, each of which is associated with a
channel.
We introduce a dual variable λ for the inequality constraint P
m∈M sm ≤
sT . The Lagrangian corresponding to the primal problem (3.31) is given by
L(s, x, r, λ) = −Σm∈Mpmr(m) + λ(P
m∈M sm −sT ). Then the Lagrange dual
function [19] is given by G(λ) = min L(s, x, r, λ) = P
m∈M min(−pmr(m) +
λsm) −λsT .
The Lagrange dual problem is to maximize the Lagrange dual function
[19]. That is:
maximize
G(λ)
subject to
λ ≥0.
(3.32)
Subgradient method [21] is used to solve the Lagrange dual problem
(3.32). The dual variable λ is updated at the (k + 1)th iteration by λ(k+1) =
max{0, λ(k) −θ(k)(sT −P
m∈M s(k)
m ) where θ(k) is the step size at the kth it-
eration. In order to guarantee the convergence, the sequence of the step sizes
is required to satisfy the non-summable diminishing rule [20].
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
79
At the kth iteration, the primal variables (sm, x(m), r(m)) for channel m
are obtained by solving the following optimization problem.
minimize
−pmr(m) + λsm
subject to
P
l∈L(m) a(m)−
il
x(m)
l
= f (m)
i
r(m),
∀i ∈N(m),
P
l∈L(m) a(m)+
il
x(m)
l
≤O(m)
i
,
∀i ∈N(m),
x(m)
l
≥0,
∀l ∈L(m),
0 ≤r(m) ≤
min
i∈N(m)I(m)
i
, sm ≥0.
(3.33)
The optimization problem (3.31) is decomposed into |M| subproblems
where |M| is the number of the channels. Subproblem m, represented in (3.33),
is associated with channel m. Subproblem m, ∀m ∈M, can be solved with a
distributed algorithm.
3.3.2.2
Cross-Channel Sharing of Peer Upload Bandwidth
Though the server upload allocation among channels is optimized, the cross-
channel resources have not yet been fully utilized. In each channel, there are
a number of under-utilized peers, which can be utilized by the other channels.
For example, the leaf nodes of overlay m contribute zero upload bandwidth
to the channel because they have no outgoing links. We can utilize the upload
bandwidth of the leaf nodes in overlay m to serve the peers in another channel
(e.g., channel k), thus improving the streaming capacity of channel k. However,
it is challenging to establish the cross-channel links to enable the cross-channel
sharing of peer upload bandwidth.
In this book, we propose a scheme for cross-channel peer upload sharing.
We introduce the concept of cross-channel helpers. A cross-channel helper is
the peer who uses its remaining upload bandwidth to help other peers in
another channel. Cross-channel helpers are chosen from the peers who have a
remaining upload bandwidth greater than a threshold.
Suppose that peer i in channel m is a cross-channel helper serving segment
j of channel k, and it has a remaining upload bandwidth bi. We denote the set
of peers watching segment j in channel k by H(k)
j . Peer i can download segment
j of channel k from the server or the peers who are buﬀering segment j, at a
rate RIN
i
, and then output it to peer h, ∀h ∈H(k)
j , at a rate Rh
i , respectively.
The bandwidth gain for peer i is deﬁned as gi = (P
h∈H(k)
j
Rh
i )/RIN
i
. In order
to maximize the bandwidth gain gi under the ﬂow constraint Rh
i ≤RIN
i
, ∀h ∈
H(k)
j , and the bandwidth constraint P
h∈H(k)
j
Rh
i ≤bi, the optimal download
rate at peer i is RIN∗
i
= bi/|H(k)
j | where |H(k)
j | is the number of the peers
watching segment j of channel k, and the optimal outgoing rate to peer h, ∀h ∈
H(k)
j , is Rh∗
i
= RIN∗
i
. The bandwidth gain should be larger than 1, otherwise
the cross-channel helper consumes a larger bandwidth than it contributes.
Fig. 3.11 illustrates a correlated-channel P2P VoD system, in which peer 8 is
© 2014 by Taylor & Francis Group, LLC

80
Optimal Resource Allocation for Distributed Video Communications
a cross-channel helper, who downloads a segment from the server and then
forwards it to peers 15, 16, and 17, respectively.
The proposed scheme for cross-channel peer upload sharing is described as
follows.
1.
Channel m(∀m ∈M) ﬁnds a partner, channel k(k ̸= m, k ∈M),
to help each other. We propose a resource-balance scheme to ﬁnd
the channel pair, described as follows. 1) Calculate the amount of
the total remaining bandwidth Bre
m for channel m(∀m ∈M), the
average amount of the total remaining bandwidth is given by Bre
avg =
(P
m∈M Bre
m )/|M| where |M| represents the number of channels. 2)
Given that the set of unmatched channels is Mun, the partner of
channel m is determined by k =
arg
j∈Mun min(Bre
j −Bre
avg)2.
2.
Determine the set of cross-channel helpers in channel m, denoted
by Y(m), by choosing the peers who have a remaining upload band-
width greater than a threshold bth. Sort Y(m) in a descending order
based on the remaining upload bandwidth.
3.
Determine the demanding segment set in channel k, denoted by
W(k), by choosing |Y(m)| segments which are watched by the largest
number of peers. Sort W(k) in a descending order based on the
number of watching peers.
4.
Assign the ith cross-channel helper in Y(m) to serve the peers watch-
ing the ith segment in W(k). Determine the incoming rate and out-
going rates at the ith cross-channel helper to maximize the band-
width gain.
5.
After allocating the rate for each of the cross-channel links as in
Step 4), re-optimize the server upload allocation and the link rates
within each overlay by solving the optimization problem (3.31).
Peer dynamics have an impact on the streaming capacity in correlated-
channel P2P VoD systems. First, the peers may leave or join a channel dy-
namically. Second, the cross-channel helpers may leave the channel, which
causes the disconnection of the cross-channel links. To handle the dynamic
conditions, the optimizations of intra-channel resource allocation and cross-
channel resource allocation need to be performed in a discrete-time manner,
in which the peers and the overlay are assumed to remain unchanged during
a time slot, and the algorithms for resource allocation are performed at the
beginning of each time slot.
3.3.3
Simulation Results
In the simulations, we use two classes of peers: cable/DSL peers and Ethernet
peers. Cable/DSL peers take 85% of the total peer population with download
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
81
1
2
Server
3
4
5
Overlay 1
6
7
8
12
13
14
15
Overlay 2
16
17
18
s1
s2
FIGURE 3.11
Illustration of a correlated-channel P2P VoD system
© 2014 by Taylor & Francis Group, LLC

82
Optimal Resource Allocation for Distributed Video Communications
2
3
4
5
6
0
0.2
0.4
0.6
0.8
1
1.2
Average streaming capacity [Mbps]
Number of channels
 
 
Equal server upload
Optimized server upload
FIGURE 3.12
Comparison of average streaming capacity with diﬀerent number of channels
capacity uniformly distributed between 0.9 Mbps and 1.5 Mbps and upload ca-
pacity uniformly distributed between 0.3 Mbps and 0.6 Mbps. Ethernet peers
take the remaining 15% of the total peer population with both upload and
download capacities uniformly distributed between 1.5 Mbps and 3.0 Mbps.
The length of the video is 60 minutes, which is evenly divided into 60 segments.
Each peer maintains a buﬀer with a capacity of 5 segments. The playback time
of each peer is randomly distributed between 0 and 60 minutes. The priorities
for all channels are equal.
Fig. 3.12 compares the average streaming capacity between the equal server
upload scheme, in which each channel is allocated an equal server upload, and
the optimized server upload scheme, in which the server upload for each chan-
nel is optimized as described in Section 3.3.2.1. The number of the peers in
a channel is uniformly distributed between 10 and 150. The server upload
capacity is 45.0 Mbps. The optimized server upload scheme improves the av-
erage streaming capacity by 14.1% in average compared to the equal server
upload scheme.
We show in Fig. 3.13 the impact of server upload capacity to the average
streaming capacity for a P2P VoD system with 2 channels. The ﬁrst channel
has 40 peers, and the second one has 120 peers. As shown in Fig. 3.13, the
average streaming capacity is increased with the server upload capacity. The
improvement brought by the optimized server upload scheme is larger when
the server upload capacity is larger.
Joint consideration of server upload optimization and cross-channel peer
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
83
10
20
30
40
50
60
0
0.2
0.4
0.6
0.8
1
1.2
1.4
Average streaming capacity [Mbps]
Server upload capacity [Mbps]
 
 
Equal server upload
Optimized server upload
FIGURE 3.13
Impact of server upload capacity to the average streaming capacity
upload sharing can improve the performance in a correlated P2P VoD sys-
tem. There are two channels with total 200 peers in the P2P VoD system.
The server upload capacity is 20.0 Mbps. We vary the number of the peers in
channel 1 from 20 to 140, and evaluate two metrics: peer upload utilization
ratio and average streaming capacity. The peer upload utilization ratio is de-
ﬁned by β = Σi∈N,i̸=1vi/Σi∈N,i̸=1Oi where Σi∈N,i̸=1vi represents the sum of
the outgoing rates from all peers except the server, and Σi∈N,i̸=1Oi represents
the sum of the upload capacities of all peers except the server. Due to a bet-
ter utilization of cross-channel resources, joint consideration of server upload
optimization and cross-channel peer upload sharing improves the peer upload
utilization ratio by 7.7% on average, as shown in Fig. 3.14(a), and improves
the average streaming capacity by 0.04 Mbps on average, as shown in Fig.
3.14(b), compared to the optimized server upload scheme.
3.4
Summary
In this chapter, we have presented the overview of P2P streaming systems.
In tree-based P2P live streaming systems, a single application-layer tree or
multiple application-layer trees are constructed to deliver the video streams.
In mesh-based P2P live streaming systems, each peer ﬁnds its neighbors and
then exchanges data with them. Diﬀerent from live streaming services in which
© 2014 by Taylor & Francis Group, LLC

84
Optimal Resource Allocation for Distributed Video Communications
20
40
60
80
100
120
140
0.7
0.75
0.8
0.85
0.9
0.95
1
Peer upload utilization ratio
Number of peers in channel 1 
 
 
Optimized server upload
Optimized server upload + cross−channel peer upload sharing
(a)
20
40
60
80
100
120
140
0.6
0.7
0.8
0.9
1
Average streaming capacity [Mbps]
Number of peers in channel 1 
 
 
Optimized server upload
Optimized server upload + cross−channel peer upload sharing
(b)
FIGURE 3.14
Performance improvement brought by cross-channel peer upload sharing: (a)
peer upload utilization ratio, and (b) average streaming capacity
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
85
each user watches almost the same segment of the video, VoD services allow
users to watch any point of video at any time.
We have examined two resource allocation problems, which are: 1) dis-
tributed throughput maximization for scalable P2P VoD systems, and 2)
streaming capacity for P2P VoD systems. In the throughput maximization
problem, we have presented distributed algorithms to maximize the through-
put for buﬀer-forwarding P2P VoD systems and hybrid-forwarding P2P VoD
systems, respectively. In the streaming capacity problem, we have optimized
both the intra-channel resource allocation and cross-channel resource alloca-
tion to improve the streaming capacity for P2P VoD systems. We have demon-
strated in the simulations that the system performance can be improved by
better utilization of the resources of the peers.
Bibliography
[1] http://www.youtube.com
[2] Gomes L. (2006) Will all of us get our 15 minutes on a YouTube video?
In: Wall Street Journal
[3] Hefeeda M., Bhargava B., Yau D. (2004) A Hybrid Architecture for Cost-
Eﬀective On-Demand Media Streaming, In: Elsevier Computer Networks,
vol. 44, no. 3, pp. 353–382
[4] http://www.akamai.com/
[5] X. Zhang, J. Liu, B. Li, and T. P. Yum, “CoolStreaming/DONet: A Data-
Driven Overlay Network for Eﬃcient Live Media Streaming,” in Proc. of
IEEE INFOCOM, vol. 3, pp. 2102–2111, Mar. 2005.
[6] H. Chi, Q. Zhang, J. Jia, and X. Shen, “Eﬃcient search and scheduling
in P2P-based media-on-demand streaming service,” IEEE Journal on Se-
lected Areas in Communications, vol. 3, pp. 1467–1472, Jun. 2006.
[7] I. Lee and L. Guan, “Centralized peer-to-peer streaming with layered
video,” in Proc. of IEEE ICME, vol. 1, pp. 513–516, Jul. 2003.
[8] Chu Y, Rao S, Seshan S, Zhang H (2002) A Case for End System Multicast,
In: IEEE Journal on Selected Areas in Communications, vol. 20, no. 8, pp.
1456–1471
[9] Castro M, Druschel P, Kermarrec A-M, Nandi A, Rowstron (2003) Split-
Stream: high-bandwidth multicast in cooperative environments, In: Proc.
of ACM SOSP, pp. 298–313
© 2014 by Taylor & Francis Group, LLC

86
Optimal Resource Allocation for Distributed Video Communications
[10] Liu Y, Guo Y, Liang C (2008) A survey on peer-to-peer video streaming
systems, In: Springer Journal on Peer-to-Peer Networking and Applica-
tions, no. 1, pp. 18–28
[11] Zhang M, Luo J G, Zhao L, Yang S Q (2005) A peer-to-peer network for
live media streaming using a push-pull approach, In: Proc. of ACM MM,
pp. 287–290
[12] Z. Li and A. Mahanti, “A Progressive Flow Auction Approach for Low-
Cost On-Demand P2P Media Streaming,” in Proc. of ACM QShine, Aug.
2006.
[13] C. Huang, J. Li, and K. W. Ross, “Peer-Assisted VoD: Making Internet
Video Distribution Cheap,” in Proc. of IPTPS, Feb. 2007.
[14] Yiu W P, Jin X, Chan S H (2007) VMesh: Distributed segment storage
for peer-to-peer interactive video streaming, In: IEEE Journal on Selected
Areas in Communications, vol. 25, no. 9, pp. 1717–1731
[15] X. Xu, Y. Wang, S. P. Panwar, and K. W. Ross, “A Peer-to-Peer Video-
on-Demand System using Multiple Description Coding and Server Diver-
sity,” in Proc. of IEEE ICIP, vol. 3, pp. 1759–1762, Oct. 2004.
[16] He Y, Lee I, Ling G (2008) Distributed throughput maximization in
hybrid-forwarding P2P VoD applications, In: Proc. of IEEE ICASSP, pp.
2165–2168
[17] Y. Shen, Z. Liu, S. S. Panwar, K. W. Ross, and Y. Wang, “Streaming
Layered Encoded Video Using Peers,” in Proc. of ICME, Jul. 2005.
[18] J. Byers, J. Considine, M. Mitzenmacher, and S. Rost, “Informed Content
Delivery Across Adaptive Overlay Networks,” IEEE/ACM Transactions
on Networking, vol. 12, no. 5, pp. 767–780, Oct. 2004.
[19] C. Wu and B. Li, “rStream: Resilient Peer-to-Peer Streaming with Rate-
less Codes,” in Proc. of ACM MM, pp. 307–310, Nov. 2005.
[20] R. Ahlswede, N. Cai, S.-Y. R. Li and R. W. Yeung, “Network information
ﬂow,” IEEE Transactions on Information Theory, vol. 46, pp. 1204–1216,
Jul. 2000.
[21] J. Liang and K. Nahrstedt, “DagStream: Locality Aware and Failure
Resilient Peer-to-Peer Streaming,” in Proc. of SPIE MMCN, vol. 6071,
pp. 60710L -1-60710L-15, Jan. 2006.
[22] M. Hefeeda, A. Habib, B. Botev, D. Xu, and B. Bhargava, “PROMISE:
Peer-to-Peer Media Streaming Using CollectCast,” in Proc. of ACM MM,
pp. 45–54, Nov. 2003.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for P2P Streaming Systems
87
[23] R. J. Vanderbei, Linear Programming: Foundations and Extensions, 2nd
Edition, Springer Press, 2001.
[24] S. Boyd and L. Vandenberghe, Convex Optimization, Cambridge Univer-
sity Press, 2004.
[25] D. Palomar and M. Chiang, “A tutorial on decomposition methods and
distributed network resource allocation,” IEEE Journal on Selected Areas
in Communications, vol. 24, no. 8, pp. 1439–1451, Aug. 2006.
[26] D. P. Bertsekas, A. Nedic, and A. E. Ozdaglar, Convex Analysis and
Optimization, Athena Scientiﬁc, 2003.
[27] H. Schwarz, D. Marpe, and T. Wiegand, “SNR-scalable extension of
H.264/AVC,” in Proc. of IEEE ICIP, vol. 5, pp. 3113–3116, Oct. 2004.
[28] B. Chen, X. Liu, Z. Zheng, and H. Jin, “A measurement study of a peer-
to-peer video-on-demand system,” in Proc. of IPTPS, Feb. 2007.
[29] T. T. Do, K. A. Hua, and M. A. Tantaoui, “P2VoD: Providing Fault
Tolerant Video-on-Demand Streaming in Peer-to-Peer Environment,” in
Proc. of IEEE ICC, vol. 25, no. 1, pp. 119–130, Jan. 2004.
[30] Y. Cui, B. Li, and K. Nahrstedt, “oStream: asynchronous streaming mul-
ticast,” IEEE Journal on Selected Areas in Communications, vol. 22, no.
1, pp. 91–106, Jan. 2004.
[31] W. P. Yiu, X. Jin and S. H. Chan, “Distributed storage to support user
interactivity in peer-to-peer video streaming,” in Proc. of IEEE ICC, vol.
1, pp. 55–60, Jun. 2006.
[32] S. Sengupta, S. Liu, M. Chen, M. Chiang, J. Li, and P. A. Chou, “Stream-
ing Capacity in Peer-to-Peer Networks with Topology Constraints,” Mi-
crosoft Research Technical Report, 2008.
[33] S. Sengupta, S. Liu, M. Chen, M. Chiang, J. Li, and P.A. Chou, “Peer-
to-Peer Streaming Capacity,” IEEE Transactions on Information Theory,
vol. 57, no. 8, pp. 5072–5087, Aug. 2011.
[34] S. Liu, M. Chen, S. Sengupta, M. Chiang, J. Li, and P.A. Chou, “P2P
Streaming Capacity under Node Degree Bound,” in Proc. of IEEE ICDCS,
pp. 587–598, 2011.
[35] Y. He and L. Guan, “Streaming capacity in P2P VoD systems,” in Proc.
of IEEE ISCAS, pp. 742–745, May 2009.
[36] Y. He and L. Guan, “Improving the streaming capacity in P2P VoD
systems with helpers,” in Proc. of IEEE ICME, pp. 790–793, Jul. 2009.
© 2014 by Taylor & Francis Group, LLC

88
Optimal Resource Allocation for Distributed Video Communications
[37] Y. He and L. Guan, “Solving streaming capacity problems in P2P VoD
systems,” IEEE Transactions on Circuits and Systems for Video Technol-
ogy, vol. 20, no. 11, pp. 1638–642, Nov. 2010.
[38] Y. He, I. Lee, and L. Guan, “Distributed throughput maximization in
P2P VoD applications,” IEEE Transactions on Multimedia, vol. 11, no. 3,
pp. 509–522, Apr. 2009.
[39] J. Wang, C. Yeo, V. Prabhakaran, and K. Ramchandran, “On the Role
of Helpers in Peer-to-Peer File Download Systems: Design, Analysis and
Simulation,” in Proc. of IPTPS, Feb. 2007.
[40] P. Garbacki, D. Epema, J. Pouwelse, M. van Steen, “Oﬄoading Servers
with Collaborative Video on Demand,” in Proc. of IPTPS, Feb. 2008.
[41] C. Wu, B. Li, and S. Zhao, “Multi-channel Live P2P Streaming: Refo-
cusing on Servers,” in Proc. of IEEE INFOCOM, pp. 1355–1363, Apr.
2008.
[42] D. Wu, C. Liang, Y. Liu and K. W. Ross, “View-upload decoupling: a re-
design of multi-channel P2P video systems,” in Proc. of IEEE INFOCOM,
pp. 2726–2730, Apr. 2009.
[43] D. Wu, Y. Liu, and K.W. Ross, “Queuing Network Models for Multi-
Channel P2P Live Streaming Systems,” in Proc. of IEEE INFOCOM, pp.
73–81, 2009.
[44] M. Wang, L. Xu, and B. Ramamurthy, “Linear Programming Models For
Multi-Channel P2P Streaming Systems,” in Proc. of IEEE INFOCOM,
2010.
[45] C. Zhao, X. Lin, and C Wu, “The streaming capacity of sparsely-
connected P2P systems with distributed control,” in Proc. of IEEE IN-
FOCOM, pp. 1449–1457, 2011.
[46] Y. He and L. Guan, “Streaming capacity in multi-channel P2P VoD sys-
tems,” in Proc. of IEEE ISCAS, pp. 1819–1822, May 2010.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

4
Prefetching Scheme and Substream
Allocation in P2P VoD Applications
CONTENTS
4.1
Optimal Prefetching Scheme in P2P VoD Applications with
Guided Seeks .....................................................
90
4.1.1
Introduction ................................................
90
4.1.2
Seeking Statistics Aggregation .............................
93
4.1.2.1
Intuitive Approach ...............................
95
4.1.2.2
The Proposed Hybrid Sketches ..................
95
4.1.2.3
Estimation of Segment Access Probability ......
97
4.1.3
Optimal Prefetching Scheme ...............................
97
4.1.3.1
The Optimal Prefetching Scheme ................
97
4.1.3.2
The Optimal Cache Replacement Policy ........
102
4.1.4
Simulation Results .........................................
102
4.1.4.1
Performance Evaluation of Seeking Statistics
Aggregation ......................................
103
4.1.4.2
Performance Evaluation of the Prefetching
Scheme ...........................................
106
4.1.5
Practical Issues .............................................
110
4.2
Optimization of Substream Allocation in Layered P2P
Applications ......................................................
112
4.2.1
Optimal Substream Allocation Scheme ....................
112
4.2.1.1
Single-File system ................................
112
4.2.1.2
Multi-File system ................................
114
4.2.2
Evolution of Video Quality and Peer Population ..........
115
4.2.3
Simulation Results .........................................
116
4.3
Summary ..........................................................
118
Bibliography .............................................................
119
Buﬀer and storage are two major resources in the Peer-to-Peer (P2P) Video-
on-Demand (VoD) applications. The peers replicate the video segments in
their storage or cache video segments in their buﬀer, such that these segments
can be served to other peers. If the resources (e.g., buﬀer and storage) are
utilized in an optimal way, we can greatly improve the P2P VoD performances.
89
© 2014 by Taylor & Francis Group, LLC

90
Optimal Resource Allocation for Distributed Video Communications
In this chapter, we study the optimal utilization of buﬀer or storage in P2P
VoD applications.
In the ﬁrst part of this chapter, we present an optimal prefetching frame-
work in P2P VoD applications with guided seeks. In P2P VoD applications,
users seek frequently to the positions they are interested in. In this work, we
propose the concept of guided seeks. With the guidance, users can perform eﬃ-
cient seeks to the desired positions. The guidance is obtained by collecting the
seeking statistics in the previous sessions. It is quite challenging to aggregate
the statistics in the distributed P2P networks. We design the hybrid sketches
to represent the seeking statistics, thus greatly reducing the time complexity
and space complexity. From the collected seeking statistics, we estimate the
segment access probability, based on which we develop an optimal prefetching
scheme and an optimal cache replacement policy to minimize the expected
seeking delay at every viewing position.
In a layered P2P streaming system, each video is encoded into multiple
layers. The bit stream in a layer is called a substream, which can be inde-
pendently replicated in the storage of the peers. It is quite challenging how
many copies for each substream should be generated in order to obtain a bet-
ter performance since each of the layers has a diﬀerent priority. In the second
part of this chapter, we present an optimal substream allocation scheme to
tackle this problem. The simulation results show that the proposed allocation
scheme enables the system to achieve an overall higher quality compared to
the general allocation schemes with ﬁxed allocation percentages.
4.1
Optimal Prefetching Scheme in P2P VoD Applica-
tions with Guided Seeks
4.1.1
Introduction
Most of the existing work on P2P-based VoD systems [1, 2] has made an
implicit assumption that a user who has joined a streaming session will keep
on watching till it leaves or the session fails. This assumption excludes ﬂexible
VCR functionalities from VoD systems to make the system design simple.
Unfortunately, previous analysis on a large amount of real user viewing logs
has shown that users usually do not play the video successively and passively
[3]. Instead, users perform seeks quite frequently [3]. The reasons for these
seeking behaviors are: 1) some users may feel that the current segment is
boring, so they skip away from it; 2) some users may not have suﬃcient time
to watch the whole video and just want to browse some exciting or interesting
segments.
In the P2P VoD applications, the frequent seeks pose a great challenge
on the playback continuity, which can be measured with the seeking delay,
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications
91
deﬁned as the interval between the time when a segment is requested and the
time when the segment is ready for playback. Ideally, we would like to have a
zero seeking delay, such that we can view any segment in the video anytime
without any interruption. To achieve a zero seeking delay, each segment has
to be fetched prior to its playback time. A prefetching scheme prefetches one
or multiple segments while the current segment is being played. It turns out
to increase the playback continuity [4]. However, most of the existing systems
assume that users watch the video sequentially without any seek. Therefore,
they use sequential prefetching schemes [4, 5], in which each peer prefetches
the segments next to the current segment in sequential order. In the VoD
applications with random seeks, the next position the peer will access may not
be the segment next to the current segment; it will be probably any segment in
the whole video. Therefore, the sequential prefetching scheme does not work
well if the peers perform seeks frequently. The prefetching scheme in P2P VoD
systems with frequent seeks needs to predict the access probability and then
prefetch the appropriate segments.
Random seek is one of the important characteristics in VoD applications.
There is much work on the overlay construction with resilience to random
seeks. The overlay can be constructed in tree structures, such as P2VoD [7]
and oStream [8], or mesh structures [9][10]. Most of them organize the over-
lay based on the play progress [9][10], such that the peers can forward the
recently played content to the followers. Other P2P VoD architectures place
the segments of the video on peer storage [11][12]. When a peer jumps to a
new position, it can locate the owner of the new segment by looking up the
Distributed Hash Table (DHT) [11]. Ring-assisted overlay topology, called
RINDY, has been proposed in [13]. In RINDY, a peer can implement fast
relocation for random seeks by maintaining some near neighbors and remote
neighbors in a set of concentric rings.
The ﬁle popularity has been used to design the strategy of ﬁle distribution
in P2P networks. In Push-to-Peer VoD [14], the video ﬁle is proactively pushed
to peers to increase content availability and improve the use of peer uplink
bandwidth. In [15], an optimization methodology is introduced to replicate
and replace ﬁles as a function of their popularity to maximize ﬁle availability in
P2P content distribution. In VMesh [11], a popularity-based segment storage
scheme is proposed for P2P VoD applications.
Prefetching is an eﬀective approach to reduce the waiting time for an object
in the applications of ﬁle transfers and media streaming. In [16], the authors
optimize the speculative prefetching scheme by solving a stretched knapsack
problem. In [17], a prefetching algorithm with low computational complexity
is proposed to minimize the expected waiting time of document retrieval. In
P2P streaming applications, Sharma et al. [4] have proposed a distributed
prefetching protocol where peers prefetch and store portions of the streaming
media ahead of their playback time. Shen et al. [5] have examined a prefetching
scheme in P2P VoD applications such that the client peer can tap the reservoir
of the prefetched bits while searching for a replacement serving peer. However,
© 2014 by Taylor & Francis Group, LLC

92
Optimal Resource Allocation for Distributed Video Communications
these prefetching schemes assume that the peers do the sequential playback
without any seek.
The concept of guided seeks is presented in this section. A guided seek
is diﬀerent from a random seek in that it is performed based on the segment
access information, which is learned from the seeking statistics in the previous
and/or concurrent sessions. Typically, the popular segments are visited more
frequently, thus the access count of a segment approximately reﬂects its pop-
ularity. With guidance, users can jump to the desired positions in the video
quickly and eﬃciently. For example, a user watching an on-demand soccer
match may want to just watch the segments with goals. However, he or she
does not know where the scenes with goals are. In the VoD applications with
guidance, the system can provide an indicating bar of the segment popularity
in the media player, with a grey scale indicating the degree of the popularity
for each segment. This user can just drag the progress bar to the position in
dark color since the segment in dark color is popular, thus containing the goal
scenes with a higher probability. In addition to segment popularity, other in-
formation, such as user tags, user ratings, and interest groups, can be collected
to guide users in performing eﬃcient seeks.
In order to provide guidance to users, we need to obtain the segment access
probability. The segment access probability is a two-dimensional Probability
Density Function (PDF), denoted as P(x, y), where x is the start segment
of a seek and y is the destination segment of a seek. P(x, y) can be learned
from the seeking statistics in the previous and/or concurrent sessions. In a
centralized VoD system, a server can be used to collect the seeking statistics.
However, it overloads the burden of the server and introduces a single point
of failure. Nevertheless, collecting the seeking statistics in distributed P2P
networks is a nontrivial task. There are two major challenges: 1) the message
size grows linearly with the number of the collected seeking statistics; 2) the
duplicate statistics cause an inaccuracy in the estimation of the segment ac-
cess probability, hence we should avoid the double-counting problem in the
statistics collection.
In this section, we present an optimal prefetching framework in P2P VoD
applications with guided seeks. The proposed framework is shown in Figure
4.1. It consists of two modules: the seeking statistics aggregation and the
optimal prefetching scheme. In the seeking statistics aggregation, we represent
the seeking statistics with the hybrid sketches to prevent the message size from
growing linearly. The peer (e.g., peer i) ﬁrst retrieves a set of random neighbors
(e.g., peers m, n and k) from the tracker, and then gossips the hybrid sketches
with them. Based on the aggregated seeking statistics, the peer estimates the
segment access probability P(x, y), which is used for the design of the optimal
prefetching scheme, and is also used to guide the user to perform eﬃcient
seeks. The module of the optimal prefetching scheme takes the segment access
probability P(x, y) as input, and then determines the optimal segments for
prefetching and the optimal cache replacement policy.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications
93
Seeking statistics 
aggregation
Optimal prefetching
scheme
User seeks
Tracker
Peer i
Peer n
Peer k
Peer m
FIGURE 4.1
The proposed framework for P2P VoD applications with guided seeks
4.1.2
Seeking Statistics Aggregation
We describe the seeking statistics aggregation in this section and the optimal
prefetching scheme in the next section, respectively. The notations used in
this section are summarized in Table 4.1.
In the seeking statistics aggregation, we use gossip protocol to aggregate
the information because 1) gossip protocol is robust for peer dynamics, and 2)
many P2P live streaming [18] or P2P VoD systems [13] employ gossip protocol
to exchange media content. In our framework, gossip occurs periodically. In
each round of random gossip, every peer talks to one or more randomly se-
lected neighbors and exchanges the information with them. It turns out that,
after approximately logN rounds of computation where N is the number of the
peers, all the peers can obtain the global information with a high probability
[19].
A video is uniformly divided into M segments; each segment has a length
of T . We assume a segment is the smallest unit in the time scale. A peer can
either play a segment or skip it. A seeking behavior s(x, y) is characterized
by the start segment, denoted by x, and the destination segment, denoted by
y(y ̸= x). The sequential playback is a special seeking behavior, in which y =
x+1. A seeking behavior s(x, y) contains two variables. To reduce the number
of the variables, we map a seeking behavior s(x, y) into a corresponding seeking
© 2014 by Taylor & Francis Group, LLC

94
Optimal Resource Allocation for Distributed Video Communications
Symbol
Deﬁnition
N
The number of the peers
M
The number of the segments in the video
s(x, y)
A seeking behavior from segment x to segment y
ev
The seeking record of seeking type v
uj
The jth seek ID
N T
i
The number of the seeking types in the data stream at peer i
SRi
The space to store the data stream at peer i
b
The number of the bits used to represent a seek ID
FMW
The Flajolet-Martin (FM) sketch of a multi-set W
L
The length of a bitmap
c
The position of the least-signiﬁcant 0-bit in the FM sketch
Nb
The number of the bitmaps in a FM sketch
f(x, y)
The access frequency of seeking behavior s(x, y)
P(x, y)
The access probability from segment x to segment y
P(y|α)
The access probability to segment y at current segment α
rs
the constant bit rate of the video
T
The viewing time of a segment
sseg
The size of a segment
Y
The whole set containing all the segments in the video
Bi
The cache set at segment i
Ui
The unavailable set at segment i
Fi
The prefetched set at segment i
Ai
The complete set at segment i
Gi
The ongoing set at segment i
ti
The playback time of segment i
θi
The prefetching shift of segment i
τj
The seeking delay of segment j
oi
The upload capacity of segment i
bd
The download capacity of the receiving peer
rm
The minimum rate to completely download a segment during
the prefetching interval
rk
The prefetching rate of segment k in the unavailable set
qk|i
The Access-probability to Upload-capacity Ratio (AUR) of
segment k when segment i is watched
ξ
The maximum number of the segments in the cache set
β
The sampling ratio
λβ
The compression ratio at sampling ratio β
eβ
m
The counting error of seeking type m at sampling ratio β
εβ
The Mean Absolute Error (MAE) at sampling ratio β
TABLE 4.1
Notations in the optimal prefetching framework for P2P VoD applications [6]
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications
95
type v ∈{1, 2, · · · , M(M −1)}, which is given by
v =
 (M −1)(x −1) + y,
if y < x,
(M −1)(x −1) + y −1,
if y > x.
(4.1)
A peer collects the seeking statistics in the P2P network and puts them into
a data stream. The data stream at peer i is denoted by Ri, which contains
a series of seeking records Ri = {ev}. The seeking record corresponding to
seeking type v is denoted by a set ev = {uj}, where uj is a unique seek ID
which can be formed as the concatenation of the peer ID and the sequence
number generated by this peer. For example, peer 4 maintains a data stream
as R4 = {e1 = {2, 4}, e3 = {3, 6, 12, 16, 21, 32, 45, 51, 62}}, in which seeking
record e1 records 2 seeks (seek IDs = 2 and 4) associated with seeking type
1, and seeking record e3 records 9 seeks corresponding to seeking type 3. In a
gossip-based information aggregation, there are risks that a peer may receive
duplicate information. By carrying the seek IDs in each seeking record, we
can avoid the double-counting problem.
4.1.2.1
Intuitive Approach
We ﬁrst examine an intuitive approach, in which each peer exchanges each of
the seeking records in its data stream with its neighbors via gossips. In the
intuitive approach, the procedure of information exchange between seeking
record ei
v at peer i and seeking record ej
v at peer j is as follows. First, peer i
sorts its seek IDs in seeking record ei
v. Second, peer j searches each seek ID in
its seeking record ej
v, and puts the seek ID into ei
v if it has not appeared in ei
v.
The intuitive approach can accurately aggregate the information. However,
the space complexity and time complexity is large. Let Sa
i denote the average
number of seek IDs for a seeking type at peer i, N T
i denote the number of the
seeking types in the data stream at peer i. For the information aggregation
between two peers (e.g., peer i and peer j), the time complexity at peer i is
O(N T
j (Sa
i log Sa
i + Sa
j log Sa
i )). The space to store the data stream Ri at peer
i is SRi = b P
eiv∈Ri |ei
v|, where |ei
v| denotes the number of seek IDs in seeking
record ei
v, and b is the number of the bits used to represent a seek ID. We can
see that the space requirement is linearly scaling with the number of the seek
IDs.
4.1.2.2
The Proposed Hybrid Sketches
To reduce the space and time complexity, we employ sketches to represent
the data stream at each peer. A sketch is a compact representation of a data
stream. It prevents the space from scaling linearly.
The Flajolet-Martin (FM) sketch was introduced for estimating the num-
ber of distinct objects in a multi-set in one pass while using only a small
amount of space [20]. Given a multi-set W, the FM sketch FMW of W is a
bitmap of L bits. The bitmap length L is given by L ≈log2 n, where n is the
number of distinct elements in the multi-set. The bit of FMW is denoted by
© 2014 by Taylor & Francis Group, LLC

96
Optimal Resource Allocation for Distributed Video Communications
FMW (l), l = 1, · · · , L. All the bits in FMW are initialized to zero. A uniform
hash function h(x) maps each element ω ∈W to h(ω) ∈{0, · · · , 2L −1}.
Let I(ω) denote the position of the least-signiﬁcant 1-bit in h(ω). For each
element ω ∈W, we set FMW (I(ω)) = 1. If h(ω) = 0, we allocate I(ω) = L.
For example, if L = 5, h(ω) = 6 = 00110 (in binary), then I(ω) = 2. If ω is
the ﬁrst element inserted into FMW , the FM bitmap will be FMW = 00010.
Since duplicate elements just set the same bit regardless of the order of the
insertion, FM sketch is Order-and-Duplicate-Insensitive (ODI).
To estimate the number of distinct elements from an FM sketch, the fol-
lowing approach is used. FM ﬁnds the ﬁrst zero bit of the sketch from the
least-signiﬁcant bit. Let the position of this bit be c. Then the number of
distinct elements is estimated as n = 1.2928 × 2c [20]. To reduce the approx-
imation error, Flajolet and Martin proposed a technique called Probabilistic
Counting with Stochastic Averaging (PCSA) [20]. PCSA applies a second hash
function to choose one of the Nb bitmaps and performs the element insertion
only to this bitmap. As a result, each bitmap is responsible for approximately
n/Nb distinct elements. The number of distinct elements estimated with PCSA
is given by n = 1.2928Nb2
1
Nb
PNb
i=1 ci, where ci is the position of the ﬁrst zero
bit in bitmap i [20].
PCSA FM sketch is eﬃcient in wrapping a multi-set of large number of
elements into a matrix of NbL bits. However, it is ineﬃcient in representing
a set of small elements in terms of space consumption. Moreover, the relative
error is quite large if a FM sketch is used to represent a small number of
elements. Therefore, we design a hybrid sketch to represent the seek IDs in
each seeking record. The hybrid sketch is constructed as follows. If the number
of seek IDs in a seeking record ev is less than (or equal to) a threshold γID,
this seeking record is called a light seeking record, we will just enumerate all
seek IDs into the hybrid sketch. On the other hand, the seeking record with
the number of seek IDs larger than γID is called a heavy seeking record, the
corresponding hybrid sketch is a FM sketch, wrapping all the seek IDs in the
heavy seeking record into a matrix of NbL bits.
Each peer (e.g., peer i) maintains a set of hybrid sketches. Peer i peri-
odically updates its hybrid sketches as follows. First, peer i inserts the data
stream generated by itself since last update time into hybrid sketches. Second,
peer i asks the tracker to get K random neighbors, and then performs pair-
wise gossip with each of the K neighbors respectively. In the pair-wise gossip
with peer j, peer i gets the hybrid sketches from peer j, and updates each of
its hybrid sketches. If the hybrid sketch is the enumeration of seek IDs in the
light seeking record, the update of the sketch is performed using the intuitive
approach. If the hybrid sketch is the FM sketch of the heavy seeking record,
the update is performed via bit-wise OR operation.
Let N T
i
denote the number of the seeking records at peer i. Among N T
i
seeking records, the number of the light seeking records is N T l
i , and the number
of the heavy seeking records is N T h
i
. Let Sal
i
denote the average number of
seek IDs in a light seeking record, and Sah
i
denote the average number of
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications
97
seek Ds in a heavy seeking record. If peer i exchanges hybrid sketches with
peer j, the time complexity at peer i is O(N T l
j (Sal
i log Sal
i
+ Sal
j log Sal
i ) +
N T h
j
Nb). If the intuitive approach is used, the time complexity at peer i is
O(N T l
j (Sal
i log Sal
i + Sal
j log Sal
i ) + N T h
j
(Sah
i
log Sah
i
+ Sah
j
log Sah
i )). Since the
number of the bitmaps Nb is much smaller than (Sah
i
log Sah
i
+ Sah
j
log Sah
i ),
the information aggregation with the proposed hybrid sketches greatly reduces
the time complexity compared to the intuitive approach. The space required to
store the hybrid sketches at peer i is given by SHi = b P
h∈Hl |h|+N T h
i
NbL =
b P
h∈Hl |h| + N T h
i
Nb log2 Smax−h
i
, where SHi is the space required by the
hybrid sketches at peer i, Hl denotes the set of the sketches for the light
seeking records, |h| is the number of the seek IDs in hybrid sketch h, and
Smax−h
i
is the maximum number of seek IDs among the heavy seeking records
at peer i. If the intuitive approach is used, the space requirement is given
by SIi = b P
h∈Hl |h| + b P
h∈Hh |h|, where Hh is the set of the sketches for
the heavy seeking records. By setting an appropriate threshold γID, we can
have Nb log2 Smax−h
i
< b|h|, ∀h ∈Hh. Therefore SHi < SIi. In other words,
the hybrid sketches require a much smaller space compared to the intuitive
approach.
4.1.2.3
Estimation of Segment Access Probability
After peer i has collected suﬃcient seeking statistics, it can compute the seg-
ment access probability P(x, y). First, peer i estimates the access frequency
for each seeking type from the corresponding hybrid sketch. Each seeking
type corresponds to a seeking behavior s(x, y). Therefore, we actually have
the access frequency for each seeking behavior s(x, y). Let f(x, y) denote the
access frequency of seeking behavior s(x, y). The access probability P(x, y)
from segment x to segment y is estimated by
P(x, y) ≈
f(x, y)
PM
m=1
PM
n=1 f(m, n)
.
(4.2)
The conditional access probability at the current segment α is given by
P(y|α) =
P(α, y)
PM
y=1 P(α, y)
.
(4.3)
4.1.3
Optimal Prefetching Scheme
4.1.3.1
The Optimal Prefetching Scheme
After the segment access probability has been obtained, we can design the
optimal prefetching scheme based on the P(x, y). Suppose that the peer is
watching segment i currently. After viewing segment i, this peer may seek
any other position. In order to have continuous playback, it can prefetch the
appropriate segments during the viewing time.
© 2014 by Taylor & Francis Group, LLC

98
Optimal Resource Allocation for Distributed Video Communications
time
ti
Playback time
of segment i
Request time
tj
Playback time
of segment j
Seeking delay     of segment j
Prefetching time
T
Download capacity
tj+
Prefetching shift
ti+T
j
τ
iθ
j
θ
Prefetching interval
ti+
iθ
Segment 1
Segment 2
Segment 3
Segment 4
Rate allocation 
FIGURE 4.2
Determine the prefetching scheme when segment i is being watched
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications
99
The video has a Constant Bit Rate (CBR) of rs, and the video is segmented
into M segments. The viewing time of a segment is T . Each segment has a
ﬁxed size sseg = rsT . A segment is played right after it has been completely
downloaded at this peer. We deﬁne a whole set Y as the set of all the segments
in the video. The prefetching process when the peer is viewing segment i
is illustrated in Figure 4.2. The playback time of segment i is denoted by
ti, ∀i ∈Y . At time ti, segment i is ready for playback. However, the peer
has been prefetching some other segments, which are useful for the future
playback. The peer completes these ongoing downloads before it starts the
next-round prefetching. So there is a gap between the prefetching time and
the playback time of segment i, which is called prefetching shift θi. After the
peer ﬁnishes viewing segment i, it will request a new segment (e.g., segment
j) at time ti + T . The interval between the request time and the playback
time of segment j is denoted as seeking delay τj of segment j. So the seeking
delay is given by τj = tj −(ti + T ).
Each peer maintains a cache set B in its buﬀer, and the downloaded seg-
ments are put into the cache set. The cached segments help to reduce the
seeking delay. If all the segments are cached, the seeking delay is always zero
no matter where it jumps. Moreover, the cached segments can be served to
the other peers. In P2P applications, each peer is only willing to contribute a
limited buﬀer resource. Therefore a peer can only cache a certain amount of
the segments. Let ξ denote the maximum number of the segments in the cache
set. The cache set is dynamically updated due to the limited capacity. The
cache replacement is completed by every prefetching time. We will describe
the cache replacement policy in the following subsection. The cache set during
the interval from the prefetching time (ti + θi) of segment i to the prefetching
time of the next segment (tj + θj) is denoted as Bi. The unavailable set U
contains the segments that are not in the cache set. The unavailable set is also
varying with time. The unavailable set during the interval from the prefetch-
ing time (ti + θi) of segment i to the prefetching time of the next segment
(tj + θj) is denoted as Ui. So we have Y = Bi + Ui, ∀i ∈Y .
The download capacity of the receiving peer is denoted by bd. Each
prefetched segment will be downloaded from the serving peers who are caching
this segment. The receiving peer can retrieve the desired segment by down-
loading it from one or multiple serving peers. The upload capacity of segment
i provided by the serving peers is denoted as oi. In P2P VoD applications,
upload capacity of segment i is typically less than the download capacity, that
is, oi < bd, ∀i ∈Y .
The purpose of the prefetching scheme is to reduce the seeking delay.
In the case without prefetching, the peer starts to download the requested
segment after the seeking request is generated. Suppose that segment i is being
watched, the expected seeking delay without prefetching is given by E(τi) =
P
j∈U P(j|i)sseg/oj. If we prefetch some segments before the request time, the
expected seeking delay can be reduced, since some segments in the unavailable
set have been downloaded completely or partially before the request time.
© 2014 by Taylor & Francis Group, LLC

100
Optimal Resource Allocation for Distributed Video Communications
The prefetching is performed between the prefetching time of segment i and
the request time of segment j; this interval is deﬁned as prefetching interval.
All the segments in the unavailable set are the prefetching candidates. We
allocate each of them a prefetching rate rk, ∀k ∈Ui. In P2P applications,
the bandwidth bottleneck typically occurs at the access links, therefore we
have rk ≤ok, and rk ≤bd. We have assumed that ok < bd, so the constraint
rk ≤ok covers the both constraints. The minimum required rate to completely
download a segment during the prefetching interval is given by rm = sseg/(T −
θi). In order to fully utilize the download bandwidth, we limit the prefetching
rate to no larger than rm, which is rk ≤rm. Those segments allocated with
a rate of rm will be prefetched completely by the request time (ti + T ) of
segment j, while those allocated with a rate less than rm will be prefetched
partially by the request time.
In the prefetching scheme, if the current segment is segment i, we can
calculate the expected seeking delay considering two diﬀerent cases as follows.
1.
If the requested segment j is in the cache set Bi, the seeking de-
lay of segment j will be 0. The probability of this case is P1 =
P
k∈Bi P(k|i).
2.
If the requested segment j is in the unavailable set Ui, the prefetched
part of segment j during the prefetching interval is rj(T −θi), the
remaining part of segment j will be downloaded at the upload ca-
pacity oj. Therefore, the seeking delay of segment j is given by
τj = sseg−rj(T −θi)
oj
.
Then, the expected seeking delay is given by
E(τj)
= P
k∈Ui
P (k|i)(sseg−rk(T −θi))
ok
= P
k∈Ui
P (k|i)sseg
ok
−P
k∈Ui
P (k|i)rk(T −θi)
ok
= P
k∈Y
P (k|i)sseg
ok
−P
k∈Bi
P (k|i)sseg
ok
−P
k∈Ui
P (k|i)rk(T −θi)
ok
.
(4.4)
The ﬁrst term P
k∈Y
P (k|i)sseg
ok
in Equation (4.4) represents the expected seek-
ing delay without cache and prefetching. The second term P
k∈Bi
P (k|i)sseg
ok
represents the reduction of the expected seeking delay due to the cache set
Bi. The third term P
k∈Ui
P (k|i)rk(T −θi)
ok
represents the reduction of the ex-
pected seeking delay caused by the prefetched part of the segments in the
unavailable set Ui.
The prefetching optimization problem is to minimize the expected seeking
delay by optimally allocating the prefetching rate for each of the segments in
the unavailable set. When the current segment is segment i, the optimization
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 101
problem can be mathematically formulated as follows.
minimize{rk}
E(τj) = P
k∈Y
P (k|i)sseg
ok
−P
k∈Bi
P (k|i)sseg
ok
−P
k∈Ui
P (k|i)rk(T −θi)
ok
subject to
0 ≤rk ≤min{ok, rm},
∀k ∈Ui,
P
k∈Ui rk ≤bd,
(4.5)
where rk is the prefetching rate of the segment k in the unavailable set Ui, ok
is the upload capacity of segment k, rm is the minimum rate to complete the
download of a segment within the prefetching interval, and bd is the download
capacity of the receiving peer.
We deﬁne an Access-probability to Upload-capacity Ratio (AUR) as
qk|i = P(k|i)/ok, then the prefetching optimization problem is equivalent to
the following:
maximize{rk}
(T −θi) P
k∈Ui qk|irk
subject to
0 ≤rk ≤min{ok, rm},
∀k ∈Ui,
P
k∈Ui rk ≤bd.
(4.6)
The above problem is a Linear Programming (LP) problem, which can be
solved eﬃciently using simplex method or interior point method [21]. By solv-
ing problem (4.6), we obtain the optimal prefetching rate for each segment in
the unavailable set Ui. If a segment is allocated with a zero prefetching rate,
it will not be scheduled for prefetching.
Carefully observing problem (4.6), we ﬁnd that the objective function is a
weighted sum of the prefetching rate of each segment in the unavailable set.
In order to maximize the objective function, the segment that has a larger
AUR qk|i should be allocated with a larger rate within the constrained range.
With this in mind, we derive a greedy rate allocation algorithm as follows.
1.
Sort the segments in the unavailable set with respect to AUR in
descending order;
2.
Starting from the segment with the largest value of AUR, allocate as
large prefetching rate as possible to each segment in the unavailable
set until the download capacity is used up.
We deﬁne a prefetched set Fi containing those segments allocated with a
positive prefetching rate. In the prefetched set Fi, we categorize those segments
allocated with a rate of rm into a complete set Ai, and the other segments
with a rate less than rm into an ongoing set Gi. We have Fi = Ai+Gi. The op-
timal rate allocation algorithm determines which segments will be prefetched
and what the rate is for each prefetched segment. The unavailable set is vary-
ing with time, hence the optimal prefetching scheme is performed at every
prefetching time.
© 2014 by Taylor & Francis Group, LLC

102
Optimal Resource Allocation for Distributed Video Communications
4.1.3.2
The Optimal Cache Replacement Policy
After completely watching segment i, the peer requests the next segment at
request time ti+T . If the requested segment is neither in the current cache set
Bi nor in the prefetched set Fi, the peer will download the whole requested
segment at its upload capacity. If the requested segment is in the ongoing set
Gi, the peer will download the remaining part of the requested segment at
its upload capacity. If the requested segment has arrived completely by the
request time, the peer starts to play the requested segment right away.
At the request time ti+T , the peer requests the next segment (e.g., segment
j). At this time, the peer determines the new cache set Bj. The construction of
the new cache set can be formulated as an optimization problem: to maximize
the reduction of the expected seeking delay given that the current position
is segment j by choosing the optimal segments from the old cache set Bi
and the prefetched set Fi, subject to the constraint of the cache capacity ξ.
Mathematically, it is formulated as follows.
maximize(Bj)
Σk∈Bj
P (k|j)sseg
ok
subject to
|Bj| ≤ξ,
Bj ⊆(Bi + Fi),
(4.7)
where Bj is the new cache set, |Bj| denotes the number of the segments in
cache set Bj, Bi is the old cache set and Fi is the prefetched set when segment
i is being watched.
We can ﬁnd the optimal solution to problem (4.7) by choosing ξ segments
that have the largest value of AUR qk|j from the union set of Bi and Fi to
constitute the new cache set Bj. Comparing the new cache set Bj with the old
cache set Bi, we know which segments should be ejected from the new cache
set, and which segments will be ﬁlled into it. Therefore the optimal solution to
problem (4.7) actually provides the optimal cache replacement policy. If the
newly ﬁlled segments are in the ongoing set Gi, the peer needs to complete
the download of these segments before starting the next-round prefetching.
The chosen ongoing segments will be downloaded completely at time tj + θj,
where θj is the prefetching shift for segment j. The optimization problem for
cache replacement is computed at time ti + T . However, the new cache set Bj
is not formed until the prefetching time tj + θj.
4.1.4
Simulation Results
In the simulations, we choose a video clip of 30 minutes. The video is evenly
divided into 90 segments. Each segment has a ﬁxed duration of 20 seconds.
We randomly generate the seeking behaviors of 1000 sessions, in which users
seek more frequently to the popular segments. The peers participating in this
video session collect the seeking statistics from the 1000 sessions and estimate
the segment access probability P(x, y), which is used to guide their seeking
behaviors. In the default setting, the cache capacity is 10 segments, the upload
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 103
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
2
3
4
5
6
Compression ratio
Sampling ratio
 
 
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0.04
0.05
0.06
Average counting error
Compression ratio
Average counting error
FIGURE 4.3
Comparison of the compression ratio and the average counting error at diﬀer-
ent sampling ratios
capacity for each segment is uniformly distributed between 500 Kbps and 800
Kbps, and the download capacity of the receiving peer is 1600 Kbps. The
playback rate of the video is 500 Kbps. In the hybrid sketches for collecting
the seeking statistics, we set the threshold γID to 4. If the number of seek IDs
in a seeking record is not larger than 4, the hybrid sketch is the enumeration of
all the seek IDs. Otherwise, the hybrid sketch is an FM sketch, which consists
of 4 bitmaps, each having a length of 11 bits.
4.1.4.1
Performance Evaluation of Seeking Statistics Aggregation
We ﬁrst evaluate the performance of seeking statistics aggregation by compar-
ing the proposed hybrid sketches with the intuitive approach. The receiving
peer can collect a part or all of the seeking statistics from the previous 1000
sessions to estimate the segment access probability P(x, y). We deﬁne a sam-
pling ratio β = N S
P /N S
T , where N S
P is the number of the seek IDs that have
been collected, and N S
T is the number of the total seek IDs in the 1000 sessions.
We evaluate the compression ratio and the counting error with diﬀerent sam-
pling ratios in Figure 4.3. The compression ratio is deﬁned as λβ = Sβ
I /Sβ
H,
where Sβ
I is the space size using the intuitive approach at sampling ratio β,and
Sβ
H is the space size using the hybrid sketches at sampling ratio β. When the
seeking statistics are represented in the proposed hybrid sketches, the space
requirement for a seeking record is ﬁxed at 44 bits when the number of the
elements in the seeking record is larger than 4. On the other hand, the space
© 2014 by Taylor & Francis Group, LLC

104
Optimal Resource Allocation for Distributed Video Communications
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
2
4
6
x 10
−5
Mean of ε
Sampling ratio
 
 
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0
0.5
1
x 10
−6
Standard deviation of ε
Mean of ε
Standard deviation of ε
FIGURE 4.4
Comparison of the mean absolute error ε at diﬀerent sampling ratios
requirement for a seeking record is linearly increasing with the number of the
seek IDs in the intuitive approach. Therefore, we can see in Figure 4.3(a) that
a larger sampling ratio leads to a larger compression ratio. The counting error
for a seeking type is deﬁned as eβ
m = |f I−β
m
−f H−β
m
|/f I−β
m
, where f I−β
m
is
the access frequency of seeking type m counted with the intuitive approach
at sampling ratio β, and f H−β
m
is the access frequency of seeking type m es-
timated from the proposed hybrid sketch. The intuitive approach can obtain
the accurate count for each seeking type. When the access frequency of a
seeking type is not larger than 4, the hybrid sketch use the same counting
method as the intuitive approach, hence the counting error is 0. When the
access frequency of a seeking type is larger than 4, the hybrid sketch uses
FM sketch to estimate the frequency, which introduces an error. When the
sampling ratio is increased, a larger portion of seeking types has an access fre-
quency larger than 4, which means FM sketches take a larger portion in all the
hybrid sketches. This increases the average counting error, as shown in Figure
4.3(b). Even so, the maximum average counting error with full sampling is
still very small (e.g., less than 6.0%). The proposed hybrid sketches introduce
a small counting error in counting the access frequency of each seeking type,
which is tolerable in the applications of user behavior prediction.
We predict the future user behaviors from the previous seeking statistics.
Therefore, the more seeking statistics we collect, the more accurately we can
estimate the access probability. In the simulation, we deﬁne a good prediction
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 105
0
20
40
60
80
0
20
40
60
80
0
0.005
0.01
0.015
0.02
Start segment No.
Destination segment No.
Access probability
(a)
0
10
20
30
40
50
60
70
80
90
0
0.1
0.2
0.3
0.4
0.5
Destination segment No.
Access probability
(b)
FIGURE 4.5
Segment access probability estimated from FM sketches with full sampling, (a)
2-D segment access probability P(x, y), and (b) conditional access probability
given that the current position is segment 9
© 2014 by Taylor & Francis Group, LLC

106
Optimal Resource Allocation for Distributed Video Communications
as the prediction of segment access probability from all the seeking statistics
in the previous 1000 sessions. The collection of only partial seeking statistics
leads to a deviation from the good prediction. We use Mean Absolute Error
(MAE) to measure this deviation. The MAE at sampling ratio β is deﬁned
as εβ =
1
N T
PN T
k=1 |P H−β
k
−P I−β
k
|, where N T is the number of the seeking
types, P H−β
k
is the segment access probability for seeking type k estimated
from a hybrid sketch at sampling ratio β, and P I−β
k
is the segment access
probability for seeking type k computed from the intuitive approach with full
sampling. We run 10 simulations for each sampling ratio β, and then calculate
the mean and standard deviation of the MAEs. At a smaller sampling ratio, a
shorter time is required to complete the statistics aggregation. However, the
mean MAE is larger, as shown in Figure 4.4(a), meaning that collecting a
smaller amount of seeking statistics causes a larger deviation from the good
prediction. In addition, each peer may collect diﬀerent statistics, thus leading
to a diﬀerent access probability. This is reﬂected in the standard deviation
of MAEs shown in Figure 4.4(b). When each peer collects all the statistics,
all of them will have a common segment access probability; in that case the
standard deviation of MAEs is 0.
The segment access probability estimated from the hybrid sketches with
full sampling is shown in Figure 4.5(a). The MAE in this case is 3.47 × 10−5.
The small MAE indicates that the estimated access probability is close to
the accurate one. We observe that most of the peaks appear in the (x, x +
1) positions, indicating that the peer does sequential playback at most of
the moments. We also show the conditional access probability given that the
current position is segment 9 in Figure 4.5(b).
4.1.4.2
Performance Evaluation of the Prefetching Scheme
We compare the seeking delay in two prefetching schemes: 1) the proposed
prefetching scheme, as described in Section 4.1.3; and 2) the sequential
prefetching scheme, in which the peer prefetches the segments next to the
current segment sequentially, and the segments closest to the current viewing
position are cached in priority.
We generate 50 sessions, in which the peer performs guided seeks based
on the segment access probability learned from the previous seeking statistics
with full sampling. Please note that the sequential playback is a special seek
from the current segment x to segment x + 1. The initial cache is empty, and
the downloaded segments are cached until the cache buﬀer reaches its capac-
ity; then the cache replacement is performed to maintain the cache level at its
capacity. The seeking delay for each seek in an individual session is shown in
Figure 4.6(a), we observe that the proposed prefetching scheme achieves zero
seeking delay for 84% of the total seeks, higher than the sequential prefetching
scheme by 33%. Figure 4.6(b) shows the average seeking delay among 50 ses-
sions. The proposed scheme reduces the average seeking delay by 4.1 seconds
in average over the sequential scheme.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 107
0
10
20
30
40
50
0
5
10
15
20
Seeking ID
Seeking delay [s]
 
 
Sequential
Proposed
(a)
0
10
20
30
40
50
2
4
6
8
10
12
Session No.
Average seeking delay [s]
 
 
Sequential
Proposed
(b)
FIGURE 4.6
Comparison of the seeking delay: (a) the seeking delays in an individual ses-
sion, and (b) the average seeking delay in 50 sessions
© 2014 by Taylor & Francis Group, LLC

108
Optimal Resource Allocation for Distributed Video Communications
300
400
500
650
800
950
0
5
10
15
20
25
Average upload capacity [Kbps]
Average seeking delay [s]
 
 
Sequential
Proposed
(a)
800
1200
1600
2000
2400
0
2
4
6
8
Download capacity [Kbps]
Average seeking delay [s]
 
 
Sequential
Proposed
(b)
FIGURE 4.7
Comparison of the average seeking delay in a session by varying: (a) the av-
erage upload capacity, and (b) the download capacity of the receiving peer
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 109
5
10
15
20
25
30
0
2
4
6
8
Number of maximum cached segments
Average seeking delay [s]
 
 
Sequential
Proposed
FIGURE 4.8
Comparison of the average seeking delay in an individual session with a dif-
ferent number of maximum cached segments
The seeking delay is dependent on both the upload capacity and down-
load capacity. In the P2P VoD applications, the segment is served by one or
multiple serving peers who are buﬀering it. Therefore the upload capacity of
a segment is diﬀerent from segment to segment. We vary the average upload
capacity from 300 Kbps to 950 Kbps, and compare the average seeking delay
in two prefetching schemes in Figure 4.7(a). When the upload capacity is in-
creased, the average seeking delay is reduced in both schemes. The proposed
prefetching scheme outperforms the sequential scheme by an average of 4.11
seconds in the average seeking delay. A larger download capacity allows the
peer to prefetch more segments, thus reducing the seeking delay. As seen in
Figure 4.7(b), the seeking delay in both schemes is reduced when the download
capacity is increased from 800 Kbps to 2400 Kbps. Among diﬀerent download
capacities, the seeking delay in the proposed prefetching scheme is 2.5–4.1
seconds smaller than the sequential prefetching scheme.
We show the impact of the cache set on the average seeking delay in Fig-
ure 4.8. As we increase the number of the maximum cached segments, we
can achieve a smaller seeking delay in both schemes. When the cache capac-
ity is increased from 5 to 30 segments, the average seeking delay is reduced
by 2.1 seconds in the sequential prefetching scheme and 1.5 seconds in the
proposed scheme. Among diﬀerent cache capacities, the proposed prefetching
© 2014 by Taylor & Francis Group, LLC

110
Optimal Resource Allocation for Distributed Video Communications
5
10
20
30
0
20
40
60
80
100
120
140
Segment length [s]
Communication overhead [Kbps]
 
 
Intuitive
Proposed
FIGURE 4.9
Comparison of the average communication overhead with diﬀerent segment
length
scheme improves the seeking delay by average 3.9 seconds over the sequential
prefetching scheme.
We also perform experiments to compare the communication overhead
with diﬀerent segment length in Fig. 4.9. The communication overhead in
collecting the seeking statistics depends on the number of the seeking types
and the sampling period. The sampling period is deﬁned as the time interval
between two consecutive gossips. A smaller segment length leads to a larger
communication overhead because 1) it produces a dramatically large number
of seeking types, and 2) it requires a smaller sampling period in order to catch
up with the faster prefetching pace. When the segment length is increased
from 5 seconds to 30 seconds, the communication overhead used in collect-
ing the seeking statistics with the proposed hybrid sketches is reduced from
59.0 Kbps to 4.0 Kbps. From Fig. 4.9, we can see that the proposed hybrid
sketches greatly reduce the communication overhead compared to the intuitive
approach.
4.1.5
Practical Issues
In P2P VoD applications with guided seeks, users seek to diﬀerent segments
frequently. It is critical for the peer to quickly locate the destination segment.
In our framework, we can use information-assisted peer search to quickly ﬁnd
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 111
the serving peers. This approach requires each peer to maintain a segment-
location table, which consists of entries of three-component tuples (the seg-
ment no., IP address, and the update time). Each peer aggregates the segment
location information when it collects the seeking statistics via gossips. The in-
formation exchange process is as follows. First, peer i updates the segment
location table based on its cache set. Second, peer i exchanges the location
information with its randomly chosen neighbors in a pair-wise way. In each
pair-wise exchange, peer i checks each segment entry in the segment-location
table of its neighbor, and insert it into its segment-location table if the seg-
ment entry has not existed in its table, or the segment entry has a recent
update time.
After peer i determines the segments for prefetching, it needs to quickly
locate the serving peers. We use information-assisted random walks to ﬁnd
the segment owners. Peer i ﬁrst looks them up in its segment-location table.
If the serving peers are found, peer i will request the segments from them.
Otherwise, peer i sends the query to one or multiple of its neighbors, who
will check its segment-location table and feed back the locations to peer i if it
is found. With the assistance of segment-location tables, the desired segment
is expected to be located within fewer hops compared to the random walks
without information assistance [22], thus greatly reducing the search delay
and the search overhead.
With the hybrid sketches, the maximum space requirement is M(M −
1)NbL. The space size is not increasing with the number of seeking statistics.
Therefore we can collect as many as possible seeking statistics. The more
seeking statistics we collect, the more accurate segment access probability we
can obtain.
In P2P VoD applications, one of the practical problems is the peer dynam-
ics (e.g., random join, departure or failure). In the proposed framework, we
collect the seeking statistics and segment location information using gossip
protocol, which has been proven to be robust to the peer dynamics [18]. If
a peer leaves the P2P network, the information (e.g., seeking statistics and
segment-location information) at this peer has been spread to the other peers
prior to its departure with a high probability. When a new peer joins the P2P
network, it can quickly aggregate the information by gossiping with other
peers who have collected a lot of information.
Each prefetched segment is uploaded by the serving peer who is buﬀering
this segment. The serving peer of a segment is changing with time, since 1) the
cached segment may be replaced by another newly downloaded segment, and
2) a peer may leave or join the P2P network at any time. Therefore, we need
to estimate the upload capacity of each segment dynamically. With periodic
gossip, we can collect the statistics of the upload rate for a segment in the
recent past, and then predict the upload capacity of this segment in the near
future.
© 2014 by Taylor & Francis Group, LLC

112
Optimal Resource Allocation for Distributed Video Communications
4.2
Optimization of Substream Allocation in Layered
P2P Applications
In P2P streaming, peers communicate directly with each other for sharing and
exchanging data as well as other resources such as storage. It is typical that
several serving peers collectively stream the requested content to the receiving
peer, since a single serving peer may not be able or willing to contribute
an upload bandwidth enough for the media playback at the receiver. This
multipoint-to-point communication can provide a higher overall throughput
to the receiver, hence resulting in a higher quality [23].
In layered coded P2P streaming, the video is encoded into multiple layers.
A layer will not be able to be decoded if the lower layers are not available.
The bit stream in layer i is deﬁned as substream i. After a streaming session
is ﬁnished, the receiving peer will replicate one or multiple substreams, and
become a qualiﬁed peer [24], which may serve other requesting peers in the
next streaming session.
One of the major challenges in the layered P2P systems is how to allocate
diﬀerent numbers of the substreams for diﬀerent layers. The lower layers have
more importance than the higher layers. Therefore, more replicas should be
made, to increase the availability of the lower layers. The substream allocation
is implemented by substream replication in the pool of qualiﬁed peers. A good
allocation scheme can help the system to provide an overall good quality to the
users, and accelerate the growth of the peer population in the P2P systems.
The impact on the system performance with diﬀerent allocation schemes
has been studied in [25]. In this section, we propose a novel allocation scheme
in layered P2P streaming systems. Compared with the general allocation
schemes with ﬁxed allocation percentages [25], the proposed scheme can pro-
vide the users with a higher quality. We also study how the proposed allocation
scheme can accelerate the growth of the peer population in the initial stage
of hybrid P2P streaming systems.
4.2.1
Optimal Substream Allocation Scheme
4.2.1.1
Single-File system
We ﬁrst study a layered P2P streaming system with only a single video k where
k is the video ID. In this subsection, we would like to determine how many
copies of each substream should be stored among the pool of the qualiﬁed
peers in order to achieve an overall high quality, if the total number of the
online qualiﬁed peers Nk is given.
The mean duration of the video is L. We encode the video into M layers
using layered video codec. Each layer has an average bit rate Br. We assume
that each substream is delivered from a peer via an independent path. The
probability of successfully receiving substream i is denoted as qki.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 113
In our model, a central server manages the qualiﬁed peers and controls the
substream replication. Each request is ﬁrst sent to the central server, which
then selects a qualiﬁed peer to deliver substream i(i = 1, 2, ..., M) to the
receiver, respectively.
We assume that each qualiﬁed peer is homogeneous in contributed storage
and upload bandwidth. Each qualiﬁed peer can store only one substream and
upload only one substream to the receiver. Each qualiﬁed peer alternates
between “on” and “oﬀ” states. We model the “on” time as an exponentially
distributed random variable with mean Ton, and the “oﬀ” time as another
exponentially distributed random variable with mean Toff [25]. The steady
probability that a peer stays at the “on” state is given by u = Ton/(Ton+Toff).
There is a total of Wk qualiﬁed peers for video k in the pool. The expected
number of the online qualiﬁed peers is Nk = uWk. We will next determine
the number Nki of substream i(i = 1, 2, ..., M) in the pool in order to achieve
a high expected quality.
The expected quality is related to the request rate and the number of the
substream for each layer. The request to the video is modeled as a Poisson
process with a rate λk. The qualiﬁed peers with substream i are trunked
together to serve the requests for substream i. A request will be rejected
without waiting in a queue, if there is no corresponding substream available
in the serving pool. The steady probability PBki that a request for substream
i is rejected can be found from the Erlang B trunking model [24, 18]:
PBki =
(λkL)Nki
1
(Nki)!
PNki
n=0
(λkL)n
n!
.
(4.8)
We assume that the session will be ﬁnished successfully once its request
is accepted. The probability of receiving substream i can be given by qki =
1 −PBki. The probability Pkm that the user receives the video with m layers
can be written as
Pkm =



1 −qk1,
if m = 0,
(1 −qk(m+1)) Qm
i=1 qki,
if m = 1, 2, ..., (M −1),
QM
i=1 qki,
if m = M.
(4.9)
The expected distortion of the received video is given by
E(DkM) =
M
X
m=0
PkmDkm,
(4.10)
where Dkm is the average distortion of received video with m decodable layers.
The proposed substream allocation scheme is illustrated in Figure 4.10.
The expected number of the online qualiﬁed peers Nk is equal to the number
of the substreams stored in the qualiﬁed peers, since each peer stores only
one substream in our model. We determine the number of substream i using
a greedy algorithm as follows.
© 2014 by Taylor & Francis Group, LLC

114
Optimal Resource Allocation for Distributed Video Communications
Step 1: divide the 
stream into 2 
substreams
(Now we have 
substreams 1 and 2)
Step 2: further divide 
substream 2 into 2 
substreams
(Now we have 
substreams 1, 2, and 
3)
Step (M -1): further 
divide substream (M-1) 
into 2 substreams
(Now we have 
substreams 1, 2, Ö , and 
M)
FIGURE 4.10
Steps of the proposed substream allocation scheme
At step 1, we divide Nk substreams into two kinds: substream 1 and sub-
stream 2. We then ﬁnd the number N ∗
k1 of substream 1 by searching in Nk
in order to minimize the expected distortion E(Dk2), the expected distortion
of received video with at most 2 layers. At step i(i = 2, 3, ..., (M −1)), given
N ∗
kj(j = 1, 2, ..., (i−1)), we divide Nk into (i+1) layers and search within the
number of the remaining substreams NL(i) = Nk−(N ∗
k1+N ∗
k2+, ..., +N ∗
k(i−1))
to ﬁnd N ∗
ki in order to
maximize(N ∗
ki)
E(Dk(i+1)) = Pi+1
m=0 PkmDkm
subject to
Pi+1
j=1 N ∗
kj = Nk.
(4.11)
At step (M −1), we can obtain N ∗
k(M−1). The left substreams are assigned
to layer M: N ∗
kM = Nk −(N ∗
k1 + N ∗
k2+, ..., +Nk(M−1)∗). Finally, we obtain
the number of the substreams for each of the M layers, which can be denoted
with an allocation vector Vk = {N ∗
k1, N ∗
k2, ..., N ∗
kM}.
The proposed scheme allocates the number of the copies for each sub-
stream by adapting to the request rate and the total number of substreams.
The central server carries out the substream allocation by controlling the sub-
stream replication in each qualiﬁed peer, such that all the substreams are
placed following the allocation vector Vk.
4.2.1.2
Multi-File system
We now extend the analysis to a simpliﬁed multi-ﬁle system with F ﬁles. Each
ﬁle has an average length of L. We divide the multi-ﬁle system into F virtual
sub-systems, each of which deals with only one ﬁle.
The popularity of video k(k = 1, 2, ..., F) is modeled as a random variable
following Zipf distribution fZ(k). The aggregate request rate is λT . The re-
quest rate to video k is λk = λT fZ(k). There are totally NT online qualiﬁed
peers in the system; we allocate Nk qualiﬁed peers to store video k based on
its popularity. Therefore we have Nk = NT fZ(k).
Given the number of the online qualiﬁed peers for video k, we then can
further allocate the substreams for each layer of video k using the proposed
allocation scheme. The substream allocation vector for video k can be obtained
as Vk = {N ∗
k1, N ∗
k2, ..., N ∗
kM}.
The average distortion of the F videos in the simpliﬁed multi-ﬁle system
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 115
is given by
DT =
F
X
k=0
fZ(k)E(DkM),
(4.12)
where E(DkM) is the expected distortion of video k with at most M layers.
4.2.2
Evolution of Video Quality and Peer Population
In this subsection, we study how the expected video quality and peer popula-
tion evolve under the proposed substream allocation scheme in the hybrid P2P
streaming. In a hybrid P2P system, a newly released video ﬁle is ﬁrst pushed
to the central server. In the initial stage, the central server cooperates with
the qualiﬁed peers to serve streams to the users, since there are insuﬃcient
qualiﬁed peers available [24].
In our model, each qualiﬁed peer stores and uploads only one substream.
We assume the Poisson request rate is ﬁxed at λH. The length of the video is
L. We analyze the population of the qualiﬁed peers in a discrete-time manner.
Each interval has a length of L. If G streaming sessions are initiated in the
nth(n = 1, 2, ...) interval and completed successfully, these G receivers will
become new qualiﬁed peers in the (n + 1)th interval [24].
The server has a ﬁxed upload bandwidth, which can deliver S substreams.
The population of the qualiﬁed peers in the nth is denoted as Z(n), which is
equal to the number of the substreams in the nth interval, since each qualiﬁed
peer stores one substream. Under the proposed allocation scheme, the total
(S + Z(n)) substreams are deployed as VH(n) = {N1(n), N2(n), ..., NM(n)},
where M is the number of the layers, Ni(n)(i = 1, 2, ..., M) is the number
of the substream i in the nth interval. Given the allocated number of each
substream and the request rate λH, the expected distortion of the received
video in the nth interval can be calculated from Equation (4.10).
In the (n+1)th interval, the expected number of newly generated qualiﬁed
peers Ym(n + 1) with m decodable layers is given by
Ym(n + 1) = λHLPm(n),
m = 1, 2, ..., M,
(4.13)
where Pm(n) is the probability that a peer receives a video with m decodable
layers in the nth interval. The population of the qualiﬁed peers in (n + 1)th
interval is given by Z(n+1) = Z(n)+(Y1(n+1)+Y2(n+1)+, ..., +YM(n+1)).
Under the proposed allocation scheme, the total (S + Z(n + 1)) substreams
in the (n + 1)th interval are deployed as VH(n + 1) = {N1(n + 1), N2(n +
1), ..., NM(n + 1)}. Then the expected distortion of the received video in the
(n + 1)th interval can also be calculated from Equation (4.10). In this way, we
can get the evolution of the expected quality and expected population of the
qualiﬁed peers under the proposed allocation scheme.
© 2014 by Taylor & Francis Group, LLC

116
Optimal Resource Allocation for Distributed Video Communications
0
0.05
0.1
0.15
0.2
0.25
0.3
0
10
20
30
40
Request rate [requests/second]
Average PSNR [dB]
 
 
Proposed
General b=0.5
General b=1
General b=2
FIGURE 4.11
Average PSNR with varying request rate
4.2.3
Simulation Results
We encode the “Akiyo” Common Intermediate Format (CIF) sequence into
6 layers using SNR-scalable extension of H.264/AVC [14]. Each layer has an
average bit rate of 25 Kbps. The total average bit rate of the video is 150 Kbps.
Each Group of Pictures (GOP) consists of 16 frames. There are 20 videos in the
multi-ﬁle P2P system. The popularity of the video follows Zipf distribution
with parameter α = 1.1. The number of the requests follows Poisson process
with a rate λ ranging from 0.001 to 0.25 requests/s. The average duration of
the video is 1 hour. Each peer contributes an upload bandwidth of 30 Kbps,
and an average storage of 15 Mbytes. The mean “on” time of the peer is 9
hours, and the mean “oﬀ” time is 1 hour. Therefore, the availability of the peer
is 0.9. We compare the proposed allocation scheme to three general allocation
schemes [25], in which the number of the copies Cm of layer m(m = 1, 2, ..., M)
is given by Cm = a(M −m + 1)b, where a is a normalization constant, b is
0.5, 1.0, or 2.0, respectively [25].
Figure 4.11 shows the average Peak Signal-to-Noise Ratio (PSNR) versus
request rate under diﬀerent allocation schemes. The number of the qualiﬁed
peers is 1000. The general schemes allocate the channels with ﬁxed percentages
without adapting to the change of the request rates, therefore the expected
quality drops dramatically when the request rate is large. On the other hand,
the proposed scheme adapts to the request rate, thus achieving a higher qual-
ity. Figure 4.12 shows the average PSNR with diﬀerent number of the qualiﬁed
peers when the request rate is ﬁxed at 0.1 requests/s. When the number of
the qualiﬁed peers is small, the proposed allocation scheme allocates a larger
percentage of the substreams to the lower-layers, thus increasing the qual-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 117
200
800
1400 2000 2600 3200 3800
0
10
20
30
40
50
Number of qualified peers
Average PSNR [dB]
 
 
Proposed
General b=0.5
General b=1
General b=2
FIGURE 4.12
Average PSNR with varying number of qualiﬁed peers
1
3
5
7
9
11
0
10
20
30
40
50
Time [hours]
Expected PSNR [dB]
 
 
Proposed
General b=0.5
General b=1
General b=2
FIGURE 4.13
Evolution of expected PSNR
© 2014 by Taylor & Francis Group, LLC

118
Optimal Resource Allocation for Distributed Video Communications
1
3
5
7
9
11
0
1000
2000
3000
4000
Time [hours]
Expected number of 
qualified peers
 
 
Proposed
General b=0.5
General b=1
General b=2
FIGURE 4.14
Evolution of expected number of qualiﬁed peers
ity quickly, while the general schemes do not allocate the substreams in an
eﬃcient way, thus lowering the quality.
The evolution of expected quality and the number of the qualiﬁed peers in
the initial stage of hybrid P2P streaming system is evaluated in Figure 4.13
and Figure 4.14, respectively. The upload bandwidth that the server uses to
serve this video is 5 Mbps, which can support 200 concurrent substreams. The
request rate is 0.1 requests/s. We do not consider peer-failure in this scenario.
Figure 4.13 shows average quality evolution with time. At the beginning, the
proposed scheme allocates more lower-layer substreams to reduce the number
of the rejected requests. Once the number of lower-layer substreams is large
enough, the system will increase the number of higher-layer substreams to
enhance the quality. The general schemes allocate the number of substreams
for each layer based on a ﬁxed percentage. However, most of the high-layer
substreams cannot be decoded in the initial stage since the availability of the
lower-layer substreams is low. The similar impact can be seen on the peer
population growth shown in Figure 4.14. The proposed scheme allocates the
substreams in a better way, such that it can generate more qualiﬁed peers.
4.3
Summary
In this chapter, we have presented an optimal prefetching framework to reduce
the seeking delay in P2P VoD applications. We introduced the concept of
guided seeks. With the guidance, users can eﬃciently seek to the exciting or
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 119
interesting segments. The guidance information is learned from the seeking
statistics in the previous and/or concurrent sessions. It is a nontrivial task to
aggregate the seeking statistics in distributed P2P networks. We designed the
hybrid sketches to represent the seeking statistics, thus eliminating the double-
counting problem, and greatly reducing the space and time complexity. After
aggregating the seeking statistics, we estimated the segment access probability,
based on which we developed an optimal prefetching scheme and an optimal
cache replacement policy to minimize the expected seeking delay at every
viewing position.
We have also presented an optimal substream allocation scheme in layered
P2P VoD applications. The number of substreams for each layer is determined
by a greedy algorithm. The proposed allocation scheme enables layered P2P
systems to achieve an overall higher quality compared to the ﬁxed-percentage
allocation schemes. In addition, the proposed allocation scheme can accelerate
the growth of the video quality and the peer population in the initial stage of
hybrid P2P streaming systems.
Bibliography
[1] J. Li, “PeerStreaming: An On-Demand Peer-to-Peer Media Streaming So-
lution Based On A Receiver-Driven Streaming Protocol,” Proc. of IEEE
MMSP, pp. 1-4, Oct. 2005.
[2] M. Hefeeda, A. Habib, B. Botev, D. Xu, and B. Bhargava, “PROMISE:
Peer-to-Peer Media Streaming Using CollectCast,” Proc. of ACM Multi-
media, pp. 45-54, Nov. 2003.
[3] C. Zheng, G. Shen, and S. Li, “Distributed Prefetching Scheme for Random
Seek Support in Peer-to-Peer Streaming Applications,” Proc. of ACM MM,
pp. 29-38, Nov. 2005.
[4] A. Sharma, A. Bestavros, and I. Matta, “dPAM: a distributed prefetching
protocol for scalable asynchronous multicast in P2P systems,” Proc. of
IEEE INFOCOM, vol. 2, pp. 1139-1150, Mar. 2005.
[5] Y. Shen, Z. Liu, S. Panwar, K.W. Ross, and Y. Wang, “On the Design of
Prefetching Strategies in a Peer-Driven Video-on-Demand System,” Proc.
of IEEE ICME, pp. 817-820, Jul. 2006.
[6] Y. He, G. Shen, Y. Xiong, and L. Guan, “Optimal prefetching scheme in
P2P VoD applications with guided seeks,” IEEE Transactions on Multi-
media, vol. 11, no. 1, pp. 138-151, Jan. 2009.
© 2014 by Taylor & Francis Group, LLC

120
Optimal Resource Allocation for Distributed Video Communications
[7] T. T. Do, K. A. Hua, and M. A. Tantaoui, “P2VoD: Providing Fault
Tolerant Video-on-Demand Streaming in Peer-to-Peer Environment,” in
Proc. of IEEE ICC, vol. 25, no. 1, pp. 119-130, Jan. 2004.
[8] Y. Cui, B. Li, and K. Nahrstedt, “oStream: asynchronous streaming mul-
ticast,” IEEE Journal on Selected Areas in Communications, vol. 22, no.
1, pp. 91-106, Jan. 2004.
[9] Z. Li and A. Mahanti, “A Progressive Flow Auction Approach for Low-
Cost On-Demand P2P Media Streaming,” Proc. of QShine, Aug. 2006.
[10] C. Huang, J. Li, and K. W. Ross, “Peer-Assisted VoD: Making Internet
Video Distribution Cheap,” Proc. of IPTPS, Feb. 2007.
[11] W. P. Yiu, X. Jin and S. H. Chan, “VMesh: Distributed segment storage
for peer-to-peer interactive video streaming,” IEEE Journal on Selected
Areas in Communications, vol. 25, no. 9, pp. 1717-1731, Dec. 2007.
[12] X. Xu, Y. Wang, S. P. Panwar, and K. W. Ross, “A Peer-to-Peer Video-
on-Demand System using Multiple Description Coding and Server Diver-
sity,” Proc. of IEEE ICIP, vol. 3, pp. 1759-1762, Oct. 2004.
[13] B. Cheng, H. Jin, X. Liao, “Supporting VCR Functions in P2P VoD
Services Using Ring-Assisted Overlays,” Proc. of IEEE ICC, pp. 1698-
1703, Jun. 2007.
[14] K. Suh, C. Diot, J. Kurose, L. Massoulie, C. Neumann, D. Towsle, and M.
Varvello, “Push-to-peer video-on-demand system: design and evaluation,”
IEEE Journal on Selected Areas in Communications, vol. 25, no. 9, pp.
1706-1716, Dec. 2007.
[15] J. Kangasharju, K. W. Ross, and D. A. Turner, “Optimizing File Avail-
ability in Peer-to-Peer Content Distribution,” Proc. of IEEE INFOCOM,
pp. 1973-1981, May 2007.
[16] N. J. Tuah, M. K., S. Venkatesh, and S. K. Das, “Performance Optimiza-
tion Problem in Speculative Prefetching,” IEEE Transactions on Parallel
and Distributed Systems, vol. 13, no. 5, pp. 471-484, May 2002.
[17] M. Angermann, “Analysis of Speculative Prefetching,” ACM SIGMO-
BILE Mobile Computing and Communications Review, vol. 6, no. 2, pp.
13-17, Apr. 2002.
[18] X. Zhang, J. Liu, B. Li, and T. P. Yum, “CoolStreaming/DONet: A
Data-Driven Overlay Network for Eﬃcient Live Media Streaming,” Proc.
of IEEE INFOCOM, vol. 3, pp. 2102-2111, Mar. 2005.
[19] S. Boyd, A. Ghosh, B. Prabhakar, and D. Shah, “Gossip Algorithms:
Design, Analysis, and Applications,” Proc. of IEEE INFOCOM, vol. 3,
pp. 1653-1664, Mar. 2005.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Prefetching Scheme and Substream Allocation in P2P VoD Applications 121
[20] P. Flajolet and G. N. Martin, “Probabilistic counting algorithms for data
base applications,” Journal of Computer and System Sciences, vol. 31, no.
2, pp. 182-209, 1985.
[21] R. J. Vanderbei, Linear programming: foundations and extensions, 2nd
Edition, Springer Press, 2001.
[22] C. Gkantsidis, M. Mihail, and A. Saberi, “Random Walks in Peer-to-Peer
Networks,” Proc. of IEEE INFOCOM, vol. 1, pp. 120-130, Mar. 2004.
[23] D. Xu, M. Hefeeda, S. Hambrusch, and B. Bhargava, “On peer-to-peer
media streaming,” in Proc. of IEEE ICDCS, pp. 363-371, Jul. 2002.
[24] Y. Tu, J. Sun, M. Hefeeda, Y. Xia, S. Prabhakar, “An Analytical Study
of Peer-to-Peer Media Streaming Systems,” ACM Transactions on Multi-
media Computing, Communications, vol. 1, no. 4, pp. 354-376, Nov. 2005.
[25] Y. Shen, Z. Liu, S. S. Panwar, K. W. Ross, and Y. Wang, “Streaming
Layered Encoded Video Using Peers,” in Proc. of ICME, Jul. 2005.
[26] T. S. Rappaport, Wireless Communications: Principles and Practice, 2nd
edition, Prentice Hall, 2002.
[27] H. Schwarz, D. Marpe, and T. Wiegand, “SNR-scalable extension of
H.264/AVC,” in Proc. of IEEE ICIP, vol. 5, pp. 3113-3116, Oct. 2004.
[28] Y. He, I. Lee, and L. Guan, “Substream allocation in layered P2P stream-
ing,” in Proc. of IEEE ICME, pp. 1505-1508, Jul. 2006.
© 2014 by Taylor & Francis Group, LLC

© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

5
Video Streaming over Wireless Ad Hoc
Networks
CONTENTS
5.1
System Models ....................................................
124
5.1.1
Video Distortion Model ....................................
124
5.1.2
Network Model .............................................
125
5.1.3
Packet Loss Model .........................................
125
5.2
Optimized Video Unicasting over Wireless Ad Hoc Networks ....
127
5.2.1
Problem Formulation and Distributed Solution ...........
128
5.2.1.1
Problem Formulation ............................
128
5.2.1.2
Distributed Solution .............................
129
5.2.2
Simulation results ..........................................
130
5.3
Optimized Video Multicasting over FDMA Wireless Ad Hoc
Networks ..........................................................
132
5.3.1
Problem Formulation and Distributed Solution ...........
133
5.3.1.1
Problem Formulation ............................
133
5.3.1.2
Distributed Solution .............................
134
5.3.2
Simulation Results .........................................
136
5.4
Distributed Cross-Layer Optimization for Video Multicasting
over CDMA Wireless Ad Hoc Networks .........................
139
5.4.1
Problem Formulation ......................................
140
5.4.2
Distributed Algorithm .....................................
141
5.4.2.1
First-Layer Decomposition .......................
141
5.4.2.2
Second-Layer Decomposition ....................
142
5.4.3
Simulation Results .........................................
145
5.5
Chapter Summary .................................................
154
Bibliography .............................................................
154
Wireless ad hoc networks consist of a collection of wireless nodes which dy-
namically exchange data among themselves. Recently there is a compelling
need to support real-time video streaming over wireless ad hoc networks. De-
pendent on the number of the simultaneous receivers, video streaming can be
classiﬁed into unicast streaming and multicast streaming [1]. In this chapter,
we examine both unicast streaming and multicast streaming over wireless ad
hoc networks.
123
© 2014 by Taylor & Francis Group, LLC

124
Optimal Resource Allocation for Distributed Video Communications
In the ﬁrst part of this chapter, we present the system models. We ﬁrst
describe the video distortion model to capture the rate distortion relationship.
We then use a network graph to model the network topology. Finally we model
the packet loss process at each link with a two state Markov chain, and derive
the end-to-end packet loss rate for each path.
In the second part of this chapter, we examine the video unicast streaming
over wireless ad hoc networks. Speciﬁcally, we propose a fully distributed
algorithm to jointly optimize the source rate and routing scheme. Simulation
results show that the proposed routing scheme outperforms the existing multi-
path routing schemes.
In the third part of this chapter, we extend our study to the video multicast
streaming over wireless ad hoc networks with Gaussian broadcast channels us-
ing Frequency Division Multiple Access (FDMA). We maximize the aggregate
throughput at all receivers by jointly optimizing both the source rate alloca-
tion and the routing scheme. Simulation results show that the proposed video
multicast scheme yields a superior video quality compared to the double-tree
routing scheme.
In the fourth part of this chapter, we take into account the power allo-
cation in the physical layer, and propose a distributed algorithm to jointly
optimize the source rate, the routing scheme and the power allocation for
video multicasting over wireless ad hoc networks with Code Division Mul-
tiple Access (CDMA). We use hierarchical dual decompositions to separate
the optimization problem into multiple subproblems, which are then solved
in parallel. Through extensive simulations, we demonstrate that the proposed
video multicast scheme can achieve much higher video quality compared to
both the uniform-power scheme and the tree-based routing schemes.
5.1
System Models
5.1.1
Video Distortion Model
We employ the prioritized coding scheme [2] in the applications of video
streaming over wireless ad hoc networks. With a prioritized coding scheme, the
expected distortion of the reconstructed video is determined by the expected
throughput. The higher throughput a receiver receives, the higher the quality
it can reconstruct. A rate-distortion model for single-layered video transmis-
sion is reported in [3]. We extend this model to characterize the rate-distortion
relationship for the prioritized coded video with protection redundancy. It is
given by [2]
d = D0 +
θ0
R + φ0
,
(5.1)
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
125
where d is the expected distortion of the reconstructed video, R is the ex-
pected throughput at the receiver, D0 is the encoding distortion, θ0 and φ0
are parameters for transmission distortion. The parameters for a speciﬁc video
sequence can be found using data ﬁtting techniques.
5.1.2
Network Model
We represent the topology of a wireless ad hoc network with a directed graph
G = (N, L), where N is the set of wireless nodes and L is the set of directed
wireless links. The nodes can send, receive and relay packets over links. A
wireless link is represented as an order pair (i, j) of two distinct nodes that
can communicate directly with each other. The network topology can be rep-
resented by a node-link incidence matrix A, whose elements are given by
ail =



1,
if i is the start node of link l,
−1,
if i is the end node of link l,
0,
otherwise.
(5.2)
With network coding, a multicast ﬂow from the source node to H receivers
can be viewed as H conceptual unicast sessions [4, 5]. We deﬁne V={1, ..., H}T
as the set of conceptual unicast sessions. Let the conceptual unicast rate at
link l for conceptual session h be xhl, the multicast ﬂow rate at link l be yl,
then we have yl = maxh∈V{xhl}, or equivalently yl ≥xhl, ∀h ∈V. For video
streaming applications with prioritized coding and network coding, a receiver
can reconstruct the video at a low quality even if it does not receive all the
encoded packets for a Group of Pictures (GOP). Therefore, we can set the
multicast source rate to the maximum value among the H conceptual unicast
source rates. Let sh denote the source rate for conceptual unicast session h,
then the multicast source rate sM is given by sM = maxh∈V{sh}. The ﬂow
conservation holds at each node for each conceptual unicast session, which is
expressed by
X
l∈L
ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
(5.3)
where ηhi is equal to sh if node i is the source, or equal to −sh if node i is the
receiver for conceptual session h, or 0 for all other cases.
5.1.3
Packet Loss Model
Generally, the communication link is time-varying in a wireless ad hoc net-
work. A wireless link fails when the Signal-to-Interference-and-Noise Ratio
(SINR) falls below a given threshold. The failure process of a link can be
modeled with a two state Markov chain shown in Figure 5.1. When link l is
in GOOD (G) state, the packets transmitted over this link will be received
successfully by its downstream node. When link l is in BAD (B) state, the
transmitted packets will be lost. The probability from a G state to the next
© 2014 by Taylor & Francis Group, LLC

126
Optimal Resource Allocation for Distributed Video Communications
l
G
B
1-
l
l
1-
l
FIGURE 5.1
Two state Markov model
G state is denoted by γl, and the probability from a B state to the next B
state is denoted by βl. From the two state Markov chain, we can calculate the
packet loss rate pl at link l as follows.
pl =
1 −γl
2 −γl −βl
,
∀l ∈L.
(5.4)
For conceptual session h, the source traﬃc sh can be split into multiple
segments, each traveling through a distinguished single path from the source
to the destination. The set of these distinguished paths is denoted by Jh,
and the segment traveling through path jh is denoted by zh
j . Hence, we have
P
j∈Jh zh
j = sh. We deﬁne a segment-link matrix Eh, whose elements are given
by
eh
jl =
 1,
if zh
j travels through link l,
0,
otherwise.
(5.5)
Thus, the link rate xhl is the aggregation of the segments traveling through
this link. That is: xhl = P
j∈Jh eh
jlzh
j .
The end-to-end packet loss rate that segment zh
j suﬀers can be computed
as follows.
pE
zh
j = 1 −
Y
l∈L
(1 −eh
jlpl).
(5.6)
We assume the packet loss rate pl at each link is small (i.e., pl ≪1). The
end-to-end packet loss rate is thus approximated as
pE
zh
j ≈
X
l∈L
eh
jlpl.
(5.7)
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
127
The expected end-to-end packet loss rate for conceptual session h is given by
pE
h =
X
j∈Jh
(zh
j
sh
pE
zh
j ) ≈
X
j∈Jh
(zh
j
sh
X
l∈L
eh
jlpl) =
X
l∈L
pl
X
j∈Jh
(zh
j
sh
eh
jl) =
X
l∈L
(pl
xhl
sh
).
(5.8)
The expected video distortion for conceptual session h in the presence of
packet loss is given by:
dh
= D0 +
θ0
Rh+φ0 = D0 +
θ0
sh(1−pE
h )+φ0
= D0 +
θ0
sh(1−P
l∈L(pl
xhl
sh ))+φ0 = D0 +
θ0
(sh−P
l∈L plxhl)+φ0 .
(5.9)
5.2
Optimized Video Unicasting over Wireless Ad Hoc
Networks
With the recent advance in the technologies of digital video and wireless com-
munications, there is an increasing expectation on enabling real-time video
streaming over wireless ad hoc networks, in addition to just data communi-
cations. For instance, a soccer fan in a stadium may like to use his or her
Personal Digital Assistant (PDA) to receive the real-time video of the match
that is being played. The service provider can deliver the video from a ﬁxed
access point to the subscriber via the relays of other mobile users in the same
area.
This section considers the problem of how to deliver a real-time video
from a single source to a single receiver over a wireless ad hoc network. We
would focus on two issues: routing and source rate allocation. Routing is quite
challenging in wireless ad hoc networks due to the dynamic topology and
variable channel conditions. In multi-path routing, how to optimally split the
traﬃc into multiple paths is a problem requiring careful investigation. Source
rate allocation addresses the problem of how to scale the source rate to meet
the available bandwidth of the end-to-end path. Diﬀerent routing schemes
accommodate diﬀerent optimal source rates.
It has been demonstrated that multi-path transport of multiple video sub-
streams can achieve a signiﬁcant gain compared to single-path video trans-
mission schemes [6, 7]. Optimization techniques have been used to ﬁnd the
optimal paths. In [14], the authors used Genetic Algorithm (GA) to compute
two optimal paths by minimizing the expected distortion. The video was en-
coded into two descriptions, each transporting over one path. However, GA
is computationally intensive and essentially centralized. A distributed algo-
rithm is desired to compute the routing in wireless ad hoc networks. Recently,
Zhu et al. have proposed a congestion-minimized routing scheme using a dis-
tributed algorithm [9]. However, the link quality (e.g., failure probability) has
© 2014 by Taylor & Francis Group, LLC

128
Optimal Resource Allocation for Distributed Video Communications
not yet been considered in [9]. Source rate allocation is often neglected. Pre-
vious work [6, 7, 14] simply allocated the rate for each path in advance, which
is not optimal.
In this section, we propose an algorithm to jointly optimize the source rate
and the routing scheme for video unicasting over wireless ad hoc networks.
Our algorithm uses dual decomposition to split the problem into multiple sub-
problems, and then solves each subproblem in parallel. The fully distributed
nature of the proposed algorithm leads to two main advantages. First, it is
very eﬃcient; the optimal results converge quickly. This characteristic makes
fast re-routing possible when the network topology changes due to mobility
or channel failures. Secondly, it shares the computation load among all the
nodes, thus saving the power consumption of each node.
5.2.1
Problem Formulation and Distributed Solution
5.2.1.1
Problem Formulation
We consider the joint optimization of the source rate and routing scheme for
video unicasting over wireless ad hoc networks. The problem can be stated as
follows.
Given a wireless ad hoc network G = (N, L), and a unicast session from a
source to a receiver, we want to minimize the expected video distortion d by
optimally determining the source rate and the routing scheme, subject to the
network ﬂow constraint and the link capacity constraint. Mathematically, it
is formulated as:
minimize(sr,x)
d = D0 +
θ0
(sr−P
l∈L plxl)+φ0
subject to
P
l∈L ailxl = ηi,
∀i ∈N,
o ≤xl ≤cl,
∀l ∈L,
sr ≥0,
(5.10)
where sr is the source rate, xl is the ﬂow rate at link l, pl is the packet loss
rate at link l, ail represents the relationship between node i and link l, cl is
the link capacity at link l, and ηi is equal to sr if node i is the source, or equal
to −sr if node i is the receiver, or 0 for all other cases.
The optimization problem (5.10) can be converted to an equivalent Linear
Programming (LP) problem as follows.
minimize(sr,x)
−sr + P
l∈L plxl
subject to
the same constraints as in (5.10).
(5.11)
In order to develop a distributed algorithm, we revise the objective function
in problem (5.11) by adding a corresponding quadratic regularization term for
each optimization variable. Then the optimization problem becomes:
minimize(sr,x)
−sr + P
l∈L xlpl + δs2
r + δ P
l∈L x2
l
subject to
the same constraints as in (5.10).
(5.12)
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
129
where δ(δ > 0) is the regularization factor.
The objective function in problem (5.12) is strictly convex. When δ is small
enough, the solution for the optimization problem (5.12) is arbitrarily close
to the solution for the optimization problem (5.10).
5.2.1.2
Distributed Solution
Since the optimization problem (5.12) has a coupled constraint, the dual de-
composition technique [20] is appropriate to solve it. By Lagrangian relax-
ation, the optimization problem can be decoupled into several subproblems,
which can be solved in parallel.
By introducing the dual variables vi, ∀i ∈N for each node, we have the
Lagrangian of the primal problem (5.12) as follows.
L(sr, x, v)
= −sr + P
l∈L xlpl + δs2
r + δΣl∈Lx2
l + P
i∈N vi(P
l∈L ailxl −ηi).
(5.13)
The Lagrange dual function G(v) is the minimum value of the Lagrangian
over primal variables sr and x.
G(v)
= minsr,x{L(sr, x, v)}
= minsr≥0(−sr + δs2
r −P
i∈N viηi)
+ P
l∈L min0≤xl≤cl(δx2
l + xl(pl + P
i∈N viail)).
(5.14)
The Lagrange dual problem is to maximize the Lagrange dual function, that
is:
maximize (v) G(v).
(5.15)
In the primal problem, the objective function is strictly convex and the
constraints are linear. Therefore, Slater’s condition for strong duality holds.
The optimal duality gap is zero [19]. The primal variables sr and x converge
to the optimal solution of the primal problem (5.12) when a Lagrange dual
problem (5.15) converges. At the kth iteration, the optimal primal variables
sr and x can be computed in parallel by solving the following problems.
s(k)
r
= arg min
sr≥0{−sr + δs2
r −
X
i∈N
v(k)
i
ηi},
(5.16)
x(k)
l
= arg
min
0≤xl≤cl{δx2
l + xl(pl +
X
i∈N
v(k)
i
ail)},
∀l ∈L.
(5.17)
We use a subgradient method [21] to solve a dual problem (5.15). The
subgradient method is very eﬃcient due to little requirements of memory
usage and amenability for distributed implementation [21]. A subgradient of
the negative dual function −G(v) at v(k)
i
is given by
g(k)
i
= η(k)
i
−
X
l∈L
ailx(k)
l
,
∀i ∈N.
(5.18)
© 2014 by Taylor & Francis Group, LLC

130
Optimal Resource Allocation for Distributed Video Communications
Dual variable v(k+1)
i
at the (k + 1)th iteration is updated by
v(k+1)
i
= v(k)
i
−ζ(k)g(k)
i
,
∀i ∈N.
(5.19)
where ζ(k) > 0 is the step-size at the kth iteration. For a diminishing step-size:
ζ(k) = (1 + ρ)/(k + ρ), where ρ > 0, the algorithm is guaranteed to converge
to the optimal value [21].
The above algorithm performs in a fully distributed way. First, the source
node computes the optimal source rate using only its local dual variable.
Second, each node computes the optimal ﬂow rate of its outgoing links, using
the packet loss rates of its outgoing links, the dual variables of itself and its
neighboring nodes. If there is a topology change due to mobility or channel
failures, our algorithm updates the dual variables, which then triggers the
updates of the source rate and the link rates. After a quick adjustment, our
algorithm can obtain the optimal solution corresponding to the new topology.
5.2.2
Simulation results
We simulate a wireless ad hoc network by randomly placing 10 nodes in a
square region of 500-by-500m. We set the coverage threshold to be 250m.
Two nodes can connect to each other if their distance is less than the cov-
erage threshold. The available bandwidth of each link is randomly generated
based on a Gaussian distribution with a mean of 800 log2(1+(100/dl)2) Kbps
where dl is the distance in meters between the transmitter and receiver, and a
variance σ2 = 20. For each link, the transition probability from a GOOD state
to the next GOOD state is uniformly distributed between [0.85, 0.95], and the
transition probability from a BAD state to the next BAD state is uniformly
distributed between [0.05, 0.15]. We encode Foreman QCIF sequence into 8
layers using SNR-scalable extension of H.264/AVC [14]. The source bits are
packetized into 8 descriptions, each having an average bit rate of 0.23 Mbps.
Network coding is performed at the source node and the intermediate relay
nodes. In the optimization, we set δ to 0.01, and ρ to 0.35. The convergence
threshold for the dual function is set to 10−5.
Figure 5.2 shows the iteration of the primal variables. After 260 iterations,
the optimal source rate converges to 1.130 Mbps, as depicted in Figure 5.2(a).
The iterations of all link rates are shown in Figure 5.2(b).
We compare the proposed multi-path routing scheme to the other two
multi-path routing schemes: 1) congestion-minimized routing [9], where the
link ﬂow is computed by minimizing Σl∈L(xl/(cl −xl)); and 2) double-
disjoint-path routing [24], where we ﬁnd two disjoint paths by maximizing the
end-to-end available bandwidth. In congestion-minimized routing, the max-
imal source rate that guarantees the convergence is 1.0 Mbps, the average
Peak Signal-to-Noise Ratio (PSNR) of Foreman 300-frame QCIF video recon-
structed at the receiver is 31.51 dB. Double-disjoint-path routing achieves a
maximal source rate of 0.59 Mbps, and an average PSNR of 26.38 dB. The
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
131
0
50
100
150
200
250
0
0.5
1
1.5
2
No. of iterations
Source rate [Mbps]
(a)
0
50
100
150
200
250
0
0.1
0.2
0.3
0.4
0.5
No. of iterations
Link rate [Mbps]
 
 
(b)
FIGURE 5.2
Iterations of the primal variables for video unicasting over a wireless ad hoc
network: (a) source rate, and (b) link rates
© 2014 by Taylor & Francis Group, LLC

132
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
10
20
30
40
50
Frame No.
PSNR [dB]
 
 
Proposed routing
Congestion optimized routing
Double−disjoint−path routing
FIGURE 5.3
PSNR comparison among the proposed scheme, congestion-minimized routing
scheme, and double-disjoint-path routing scheme, for video unicasting over a
wireless ad hoc network
proposed routing outperforms the other two routing schemes with an average
PSNR of 36.28 dB. The reason is that the proposed scheme fully utilizes the
link bandwidth in a loss-aware manner. The PSNR of the 300 frames for these
three routing schemes is plotted in Figure 5.3.
5.3
Optimized Video Multicasting over FDMA Wireless
Ad Hoc Networks
In video multicast streaming, a video is transmitted in real-time simultane-
ously to multiple receivers. Video multicasting has many applications. For
example, a group of visitors in a museum would like to receive real-time video
stream (e.g., information about the collections from the museum guides) with
their PDAs. The museum, requiring no preexisting infrastructure, can provide
this service to a speciﬁc group of visitors via video multicasting over a wireless
ad hoc network. As a result, video multicasting over wireless ad hoc networks
provides a ﬂexible solution to multiple users with a reduced cost.
Multicast over ad hoc networks is bandwidth-eﬃcient compared to multi-
ple unicast sessions. However, there are challenges for video multicasting over
wireless ad hoc networks. First of all, it is diﬃcult to ﬁnd the optimal routing
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
133
scheme in wireless ad hoc networks. Multi-path routing can provide a higher
throughput to the receivers [25, 26]. However, how to optimally allocate the
traﬃc to each path is a nontrivial task. Secondly, source rate allocation is an-
other important problem for video multicasting over wireless ad hoc networks.
If the source rate exceeds the network capacity, congestion will occur. On the
other hand, if the source rate is too small, some users may not receive the
video at maximum quality levels.
Video multicasting over wireless ad hoc networks has been studied in recent
years. Most of the work uses either a single tree or multiple trees to perform
video multicasting. However, the optimal tree-construction is NP-hard [25],
and requires centralized computation. This is not suitable for a wireless ad hoc
network, where each node has a limited computation capacity, and a central
powerful node does not exist. The source rate allocation is under-investigated
for video multicast in wireless ad hoc network. Most people use only two
paths to represent multi-path routing, and allocate a source rate to each path
in advance. Optimal traﬃc assignment into more paths (e.g., > 2) is expected
to improve the performance.
In this section, we study the video multicasting over FDMA wireless ad
hoc networks. Speciﬁcally, we propose a distributed algorithm to maximize
the aggregate throughput by jointly optimizing the source rate allocation and
the routing scheme. The proposed algorithm is fully distributed, making it
extremely suitable for wireless ad hoc networks.
5.3.1
Problem Formulation and Distributed Solution
5.3.1.1
Problem Formulation
We adopt a Gaussian broadcast channel with FDMA as the communication
model. Each Link is assigned with a disjoint frequency band. Based on Shan-
non theory, the capacity of link l can be formulated as follows [21].
cl = Wl log2(1 + GlPl
ns
l Wl
),
∀l ∈L,
(5.20)
where Wl is the bandwidth assigned to link l, Pl is the transmit power at
the transmitter of link l, ns
l is the power spectral density of additive white
Gaussian noise at the receiver of link l, and Gl represents the path gain from
the transmitter of link l to the receiver of link l.
As described in [2], the combination of the prioritized coding scheme and
network coding eliminates the decoding hierarchy and delivery redundancy.
A receiver with a larger throughput can reconstruct the video at a higher
quality since all the received packets are distinct. For video multicasting over
wireless ad hoc networks, our objective can be placed on the maximization of
the aggregate throughput received at all of the receivers. We state the problem
as follows.
Given a FDMA wireless ad hoc network G = (N, L), and a multicast
© 2014 by Taylor & Francis Group, LLC

134
Optimal Resource Allocation for Distributed Video Communications
session from a source to H receivers, we want to maximize the aggregate
throughput by optimally determining the source rate and the routing scheme,
subject to the network ﬂow constraint and the link capacity constraint. Math-
ematically, it is formulated as:
maximize(s,x)
P
h∈V(sh −pE
h ) = P
h∈V(sh −P
l∈L xhlpl)
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
o ≤xhl ≤cl,
∀h ∈V, ∀l ∈L,
sh ≥0,
∀h ∈V,
(5.21)
where sh is the source rate for conceptual session h, xhl is the ﬂow rate at link
l for conceptual session h, pE
h is the end-to-end packet loss rate for conceptual
session h, pl is the packet loss rate at link l, ail represents the relationship
between node i and link l, cl is the link capacity at link l, given by Equation
(5.20), ηhi is equal to sh if node i is the source, or equal to −sh if node i is
the receiver, or 0 for all other cases.
The optimization problem (5.21) is an LP problem, which can be approx-
imated to a strictly convex optimization as follows.
minimize(s,x)
P
h∈V(−sh + P
l∈L xhlpl + δs2
h + δ P
l∈L x2
hl)
subject to
the same constraints as in (5.21).
(5.22)
where δ(δ > 0) is the regularization factor. When δ is suﬃciently small, the
term (δs2
h + δ P
l∈L x2
hl) is close to 0, and the solution for problem (5.22) is
arbitrarily close to the solution for the original problem (5.21).
5.3.1.2
Distributed Solution
Since the objective function is strictly convex and the constraints are linear,
the problem (5.22) represents a strictly convex optimization problem. By using
the Lagrangian duality properties, we can develop a distributed algorithm to
solve problem (5.22).
By introducing dual variables vhi, h ∈V, i ∈N, we have the Lagrangian
of the primal problem (5.22) as below.
L(s, x, v)
= P
h∈V(−sh + P
l∈L xhlpl + δs2
h + δΣl∈Lx2
hl)+
P
h∈V
P
i∈N vhi(P
l∈L ailxhl −ηhi)
= P
h∈V(−sh + δs2
h −P
i∈N vhiηhi)+
P
h∈V
P
l∈L(δx2
hl + xhl(pl + P
i∈N vhiail)),
(5.23)
where v is the dual variable matrix, s is the vector of the conceptual source
rates, and x is the matrix of the conceptual link rates.
The Lagrange dual function G(v) is the minimum value of the Lagrangian
over primal variables s and x.
G(v)
= mins,x{L(s, x, v)}
= P
h∈V minsh≥0(−sh + δs2
h −P
i∈N vhiηhi)+
P
h∈V
P
l∈L min0≤xhl≤cl(δx2
hl + xhl(pl + P
i∈N vhiail)).
(5.24)
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
135
The dual function G(v) can be evaluated separately via the conceptual
source rate sh and the link rate xhl. The Lagrange dual problem associated
with the primal problem (5.22) is given by
maximize(v)
G(v) = Gsource(v) + Grouting(v).
(5.25)
Since the dual function G(v) is always concave, the Lagrange dual problem
is therefore a convex optimization problem [19]. In the optimization problem
(5.22), Slater’s condition for strong duality holds [19]. The primal variables s
and x converge to the optimal solution to the primal problem (5.22) when the
dual variables v converge to the optimal solution to the dual problem (5.25).
At the kth iteration, the optimal primal variables can be obtained from
dual variables.
s(k)
h
= arg min
sh≥0{−sh + δs2
h −
X
i∈N
v(k)
hi ηhi},
∀h ∈V.
(5.26)
x(k)
hl = arg
min
0≤xhl≤cl{δx2
hl + xhl(pl +
X
i∈N
v(k)
hi ail)},
∀h ∈V, ∀l ∈L.
(5.27)
We use the subgradient method [21] to solve the dual problem (5.25). Since
the dual function is continuously diﬀerentiable due to the strictly convexity
of the primal objective function, we can ﬁnd a subgradient from the gradient.
The subgradient of the negative dual function −G(v) at vhi is given by
g(k)
hi = η(k)
hi −
X
l∈L
ailx(k)
hl ,
∀h ∈V, ∀i ∈N.
(5.28)
We update the dual variables by
v(k+1)
hi
= v(k)
hi −θ(k)g(k)
hi ,
∀h ∈V, ∀i ∈N.
(5.29)
where θ(k) > 0 is the step-size at kth iteration. One simple convergence con-
dition requires that the step-size sequence satisﬁes the non-summable dimin-
ishing rule [20]:
lim
k→∞θ(k) = 0,
∞
X
k=1
θ(k) = ∞.
(5.30)
The above algorithm is fully distributed in the following senses. First, the
source node computes each conceptual source rate using its dual variable and
the dual variable of the receiver. Second, each node computes the conceptual
link rates of its outgoing links, using the packet loss rates of its outgoing
links, the local dual variable, and the dual variables of its neighboring nodes.
The proposed distributed algorithm only requires information exchange in the
neighborhood, thus greatly reducing the overhead.
© 2014 by Taylor & Francis Group, LLC

136
Optimal Resource Allocation for Distributed Video Communications
Receiver ID
Optimized routing scheme
Double-tree routing scheme
Node 6
31.68 dB
29.94 dB
Node 7
32.39 dB
29.83 dB
Node 10
33.73 dB
28.87 dB
Node 11
33.52 dB
29.32 dB
TABLE 5.1
Comparison of average PSNR between the optimized routing scheme and the
double-tree routing scheme for video multicasting over a FDMA wireless ad
hoc network
5.3.2
Simulation Results
We generate a wireless ad hoc network by placing 15 nodes at random locations
in a square region of 400m-by-400m. Two nodes are able to communicate if
their distance is smaller than the coverage threshold 150m. Node 1 is chosen
as the source node. Four nodes (node 6, 7, 10 and 11) are chosen as the
receivers. For every link, the transition probability from a GOOD state to the
next GOOD state is uniformly distributed in [0.90, 0.95], and the transition
probability from a BAD state to the next BAD state is uniformly distributed
in [0.05, 0.10]. We encode Foreman QCIF sequence into 8 layers using SNR-
scalable extension of H.264/AVC [14]. Each GOP consists of 16 frames. The
source bits are packetized into 8 descriptions, each having an average bit
rate of 67.0 Kbps. No error-concealment is used for the lost frames. In the
communication model, the bandwidth allocated for each link is 15 KHz. The
transmit power at each link is ﬁxed at 0.70 W. The power spectral density ns
l
of additive white Gaussian noise at each receiver is uniformly distributed in
[0.05, 0.10] W/Hz. The path gain Gl for link l is given by Gl = 0.01/d2
l , where
dl is the distance in meters between the transmitter and the receiver at link
l. In the optimization, regularization factor δ is set to 0.05. The step-size at
the kth iteration is θ(k) = 0.25/
√
k. The convergence threshold for the dual
function is set to 10−5.
With the predeﬁned convergence threshold, all the primal variables (the
conceptual source rates and link rates) converge within 155 iterations. The fast
convergence speed makes fast re-routing possible when the network topology
changes due to mobility or channel failures. The iteration of the conceptual
source rates is shown in Figure 5.4(a). The maximum among all the optimal
conceptual source rates is the optimal multicast source rate, which is 0.565
Mbps. There are totally 80 links in the ad hoc network. The multicast link
rate at each link is the maximum among four conceptual unicast link rates.
We can see from Figure 5.4(b) that all the link rate variables converge within
155 iterations.
We compare the proposed optimized routing scheme to the double-tree
routing scheme. In the double-tree routing scheme, we construct the double
trees as follows. All the nodes except the source are classiﬁed into two cat-
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
137
0
50
100
150
0
0.1
0.2
0.3
0.4
0.5
0.6
No. of iterations
Conceptual source rate [Mbps]
 
 
Node 6
Node 7
Node 10
Node 11
(a)
0
50
100
150
0
0.02
0.04
0.06
0.08
0.1
0.12
0.14
0.16
No. of iterations
Multicast link rate [Mbps]
(b)
FIGURE 5.4
Iterations of primal variables for video multicasting over a FDMA wireless ad
hoc network: (a) conceptual source rates, and (b) multicast link rates
© 2014 by Taylor & Francis Group, LLC

138
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
0
5
10
15
20
25
30
35
40
45
Frame No.
PSNR [dB]
 
 
Optimized
Double−tree
FIGURE 5.5
Frame PSNR comparison at node 11 for video multicasting over a FDMA
wireless ad hoc network
egories: group 0 and group 1. Within each group, we construct a single tree
from the source to the receivers by using the link throughput metric cl(1−pl).
The source rate for each conceptual session in the double-tree scheme is equal
to the end-to-end available bandwidth. In order for fair comparison, the band-
width consumption and power consumption at each node are kept the same in
both schemes. Table 6.1 shows the comparison of average PSNR between the
two schemes. The optimized routing scheme improves the PSNR by 3.34 dB in
average compared to the double-tree scheme. The frame PSNR comparison of
the reconstructed Foreman QCIF sequence at node 11 is illustrated in Figure
5.5. The optimized routing scheme yields higher PSNR values since it yields
an improved end-to-end throughput.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
139
5.4
Distributed
Cross-Layer
Optimization
for
Video
Multicasting over CDMA Wireless Ad Hoc Net-
works
Video streaming over wireless ad hoc networks has been studied extensively in
the recent decade. Layered video coding combined with a selective Automatic
Repeat Request (ARQ) scheme has been proposed in [16], in which the base-
layer and the enhancement-layer packets are transmitted over diﬀerent paths,
and only the base-layer packets are retransmitted. However, if the Round-Trip-
Time (RTT) is large, ARQ is not applicable to real-time streaming. Multiple
Description Coding (MDC) is another coding technique widely used in multi-
path video transport over wireless ad hoc networks [25][6]. The receiver can
reconstruct the video at a low quality when receiving fewer descriptions, and
reconstruct the video at a high quality when more descriptions are received.
Multi-path transport with MDC is resilient to network outages in the wireless
ad hoc networks. MDC multicast in wireless ad hoc networks has been studied
in [25], where the authors construct multiple multicast trees, each delivering
one description.
Multicast routing has been an active research area for many years [17].
Most of these problems belong to the class of minimum or constrained mini-
mum Steiner tree problems which are well known to be NP-complete. Most of
the algorithms aim to ﬁnd a single tree using network layer performance met-
rics, such as delay, loss, or throughput. The single-tree routing cannot make
good use of the available link bandwidth, thus cannot provide a good per-
formance for video streaming. Recently, multiple tree routing algorithms are
proposed to explore the path diversity for each receiver. Two typical multiple-
tree video multicast schemes in wireless ad hoc networks are introduced in [25]
and [26], respectively. In [25], two multicast trees are constructed to deliver
two descriptions. Each description is layered, encoded to meet the hetero-
geneous capacity of the receivers. The authors optimize the expected video
quality using a genetic algorithm when constructing multiple trees. However,
the computation is essentially centralized and computationally intensive. In
[26], the authors propose a multiple tree construction protocol that builds
two nearly disjoint trees simultaneously in a distributed manner. However,
the trees are built based on the network layer metrics, and the application
performance has not yet been optimized.
Optimization techniques are widely used in the video streaming applica-
tions. Some of the optimizations require centralized information, making them
unsuitable for large network optimization. Dual decomposition has been ap-
plied in network optimizations. Kelly et al. have investigated two classes of
distributed rate control algorithms corresponding to the primal and dual de-
composition of the optimization [18]. Chiang et al. use convex optimization in
the framework of network utility maximization [19]. Cross-layer optimization
© 2014 by Taylor & Francis Group, LLC

140
Optimal Resource Allocation for Distributed Video Communications
in wireless ad hoc networks has been presented in [20][21][22]. However, most
of the work assumes that the utility function is strictly convex. The optimiza-
tion for multiple unicast video streams in wireless ad hoc networks is studied
in [23].
In this section, we present a distributed cross-layer optimization for video
multicasting over CDMA wireless ad hoc networks. Diﬀerent from Section 5.3,
we take into account the power allocation in physical layers in this section.
Speciﬁcally, we propose a distributed algorithm to jointly optimize the source
rate allocation, the routing scheme and the power allocation. We use hierar-
chical dual decompositions to separate the optimization problem into multiple
subproblems, which are then solved in parallel. The distributed nature of the
proposed algorithm leads to a fast convergence of the optimal results.
5.4.1
Problem Formulation
For video multicasting over a CDMA wireless ad hoc network, we consider
three important issues: the source rate allocation, the routing schemes and
the power allocation. The three issues are inter-related. The link rate needs to
be no larger than the link capacity, which is dependent on the power allocation.
In addition, the link rate allocation is dependent on the source rate; a diﬀerent
routing scheme accommodates a diﬀerent maximum source rate. Therefore, we
consider the three issues in a jointly optimized way.
The combination of the prioritized coding scheme and network coding elim-
inates the decoding hierarchy and delivery redundancy. Therefore, a larger
throughput at a receiver can lead to a smaller distortion. We set the objec-
tive as maximizing the aggregate throughput, and state the problem of Joint
Optimization of Source rate, Routing and Power (JOSRP) as follows.
Given a CDMA wireless ad hoc network G = (N, L), and a multicast
session from a source to H receivers, we want to maximize the aggregate
throughput by optimally determining the source rate, the routing scheme and
the power allocation.
Mathematically, the problem of JOSRP is formulated as:
maximize(s,x,y,P)
P
h∈V(sh −P
l∈L plxhl)
subject to
P
l∈L ailxhl = ηhi, ∀h ∈V, ∀i ∈N,
xhl ≤yl, ∀h ∈V, ∀l ∈L,
yl ≤cl, ∀l ∈L,
cl = f(P),
∀l ∈L,
xhl ≥0,
∀h ∈V, ∀l ∈L,
sh ≥0,
∀h ∈V,
0 ≤Pl ≤Pm,
∀l ∈L,
(5.31)
where sh is the source rate for conceptual session h, xhl is the ﬂow rate at link
l for conceptual session h, yl is the multicast rate at link l, pl is the PLR at
link l, ail represents the relationship between node i and link l, cl is the link
capacity at link l, Pm is the upper bound of transmit power, ηhi is equal to sh
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
141
if node i is the source, or equal to −sh if node i is the receiver for conceptual
session h, or 0 otherwise.
In the constraints of the JOSRP problem, P
l∈L ailxhl = ηhi represents
the ﬂow conservation, xhl ≤yl shows that the multicast rate at link l is no less
than any of the conceptual unicast rates going through this link, yl ≤cl shows
that the multicast rate is no larger than the link capacity, which is determined
by the power vector P. We solve the JOSRP problem in an iterative way.
At each iteration, a JOSRP problem is reconstructed based on the current
PLRs, which are computed using the transmit powers obtained at the previous
iteration.
5.4.2
Distributed Algorithm
In this section, we present a distributed solution to problem (5.31). Our solu-
tion framework consists of two layers of decompositions. First, we decompose
the main problem (5.31) into the network ﬂow subproblem and the power
allocation subproblem using dual decomposition. For the network ﬂow sub-
problem, we perform second-layer decomposition and solve it in a distributed
way. For the power allocation problem, we employ a game theoretic approach
to solve it.
5.4.2.1
First-Layer Decomposition
By introducing the dual variable λl(∀l ∈L) for the capacity constraint yl ≤
cl, ∀l ∈L, we have the Lagrangian [19] corresponding to the primal problem
(5.31) as follows.
L(s, x, y, P, λ)
= P
h∈V(−sh + P
l∈L plxhl) + P
l∈L λl(yl −cl)
= P
h∈V(−sh + P
l∈L plxhl) + P
l∈L λlyl −P
l∈L λlcl.
(5.32)
The Lagrange dual function G(λ) is the minimum value of the Lagrangian
over the primal variables (s, x, y, P).
G(λ) =
min
(s,x,y,P) L(s, x, y, P, λ).
(5.33)
The Lagrange dual function G(λ) can be evaluated separately in the network
ﬂow variables (s, x, y) and the power variables P, which is expressed by
G(λ) = Gnetwork(λ) + Gpower(λ).
(5.34)
In Equation (5.34), Gnetwork(λ) is given by
Gnetwork(λ)
= min(s,x,y)
{P
h∈V(−sh + P
l∈L plxhl) + P
l∈L λlyl,
| network constraint set}
(5.35)
© 2014 by Taylor & Francis Group, LLC

142
Optimal Resource Allocation for Distributed Video Communications
where the network constraint set consists of 1) P
l∈L ailxhl = ηhi, ∀h ∈V, ∀i ∈
N; 2) xhl ≤yl, ∀h ∈V, ∀l ∈L; 3) xhl ≥0, ∀h ∈V, ∀l ∈L; and 4) sh ≥0, ∀h ∈
V.
In Equation (5.34), Gpower(λ) is given by
Gpower(λ)
= min(P){P
l∈L(−λlcl), | 0 ≤Pl ≤Pm, ∀l ∈L}.
(5.36)
The Lagrange dual problem associated with the primal problem (5.31) is
to maximize the Lagrange dual function, that is:
maximize(λ)
G(λ) = Gnetwork(λ) + Gpower(λ)
subject to
λl ≥0, ∀l ∈L.
(5.37)
Subgradient method [21] is used to solve the Lagrange dual problem (5.37).
Dual variable λl is given an initial value λ(0)
l
, and is iteratively updated by
λ(t+1)
l
= max{0, λ(t)
l
−θ(t)(c(t)
l
−y(t)
l )},
∀l ∈L,
(5.38)
where θ(t) is the step-size, c(t)
l
is the link capacity at link l, and y(t)
l
is the
multicast link rate at link l at the tth iteration.
5.4.2.2
Second-Layer Decomposition
At the tth iteration, the ﬁrst-layer dual variables are denoted by a vec-
tor λ(t). Given a λ(t), we can obtain the corresponding primal variables
(s, x, y, P) respectively. Since the Lagrange dual function G(λ) is separated
into Gnetwork(λ) and Gpower(λ), we can ﬁnd the network ﬂow variables
(s, x, y) and the power variables P separately.
In order to ﬁnd the network ﬂow variables (s, x, y), we need to solve the
network ﬂow subproblem as follows.
minimize(s,x,y)
P
h∈V(−sh + P
l∈L plxhl) + P
l∈L λ(t)
l yl,
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
xhl ≤yl,
∀h ∈V, ∀l ∈L,
xhl ≥0,
∀h ∈V, ∀l ∈L,
sh ≥0,
∀h ∈V.
(5.39)
By adding a quadratic regularization term for each optimization variable,
we approximate the LP problem in (5.39) into a strictly convex optimization
problem as follows.
minimize(s,x,y)
P
h∈V(−sh + P
l∈L plxhl + δs2
h+
δ P
l∈L x2
hl) + P
l∈L λ(t)
l yl + δ P
l∈L y2
l
subject to
the same constraints as in (5.39).
(5.40)
We can make the solution for problem (5.40) arbitrarily close to the solution
for problem (5.39) by choosing a suﬃciently small δ(δ > 0).
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
143
Similarly, dual decomposition is used in the second-layer decomposition.
We introduce second-layer dual variables uhl(∀h ∈V, ∀l ∈L) and vhi(∀h ∈
V, ∀i ∈N), and then formulate the Lagrangian corresponding to the primal
problem (5.40) as below.
L(s, x, y, u, v)
= P
h∈V(−sh + P
l∈L plxhl + δs2
h + δ P
l∈L x2
hl)+
P
l∈L λ(t)
l yl + δ P
l∈L y2
l +
P
h∈V
P
i∈N vhi(P
l∈L ailxhl −ηhi)+
P
h∈V
P
l∈L uhl(xhl −yl).
(5.41)
The Lagrange dual function D(u, v) is formulated as:
D(u, v) = min(s,x,y) L(s, x, y, u, v)
= min(s)
P
h∈V(−sh + δs2
h −P
i∈N vhiηhi)+
min(x)
P
h∈V
P
l∈L(δx2
hl + xhl(pl + uhl + P
i∈N vhiail))+
min(y)
P
l∈L(δy2
l + yl(λ(t)
l
−P
h∈V uhl)).
(5.42)
The Lagrange dual problem associated with the primal problem (5.40) is
given by
maximize(u,v)
D(u, v)
subject to
uhl ≥0, ∀h ∈V, ∀l ∈L.
(5.43)
Since the dual function is always concave, we can solve the dual problem
with subgradient method [21]. The dual variables u(k+1)
hl
and v(k+1)
hi
at the
(k + 1)th iteration are updated respectively by
u(k+1)
hl
= max{0, u(k)
hl −θ(k)(y(k)
l
−x(k)
hl )},
∀h ∈V, ∀l ∈L,
(5.44)
v(k+1)
hi
= v(k)
hi −θ(k)(η(k)
hi −
X
l∈L
ailx(k)
hl ),
∀h ∈V, ∀i ∈N,
(5.45)
where θ(k) > 0 is the step-size at the kth iteration. The algorithm is guaranteed
to converge to the optimal value for a step-size sequence satisfying the non-
summable diminishing rule [20]:
lim
k→∞θ(k) = 0,
∞
X
k=1
θ(k) = ∞.
(5.46)
The step-size we use in our algorithm is θ(k) = ω/
√
k, where ω > 0.
At the kth iteration, the optimal primal variables (s, x, y) can be computed
in parallel by solving the following problems separately.
s(k)
h
= arg min
(sh≥0)(−sh + δs2
h −
X
i∈N
v(k)
hi ηhi),
∀h ∈V.
(5.47)
x(k)
hl = arg min(xhl≥0)(δx2
hl + xhl(pl + u(k)
hl + P
i∈N v(k)
hi ail))
∀h ∈V, ∀l ∈L.
(5.48)
© 2014 by Taylor & Francis Group, LLC

144
Optimal Resource Allocation for Distributed Video Communications
y(k)
l
= arg min
(yl≥0)(δy2
l + yl(λ(t)
l
−
X
h∈V
u(k)
hl )),
∀l ∈L.
(5.49)
In order to obtain the power variables P, we need to solve the power
allocation subproblem as follows.
minimize(P)
P
l∈L(−λ(t)
l cl)
subject to
cl = B log2(1 +
GllPl
P
k∈L,k̸=l GlkPk+nl ),
∀l ∈L,
0 ≤Pl ≤Pm,
∀l ∈L.
(5.50)
The problem in (5.50) is a non-convex optimization problem. We use a
game theoretic approach [20] to solve it. Link l maximizes its payoﬀfunction
as follows.
Ql = λ(t)
l B log2(1 +
GllPl
P
k∈L,k̸=l GlkPk + nl
) −mlPl,
∀l ∈L,
(5.51)
where ml is the dual variable representing the interference eﬀect to all the
other links. A sensible choice for ml is
∂(P
k∈L,k̸=l λ(t)
k ck)
∂Pl
[20]. The dual variable
ml can be explained as the rate at which the data rate at other links decreases
with an additional amount of power at link l. The power allocation problem is
solved iteratively as follows. Given the dual variable mj
l at the jth iteration,
we ﬁnd P(j+1) by setting the derivative of Ql with respect to Pl to zero.
eP (i+1)
l
= max{0,
λ(t)
l B
m(j)
l
ln(2)
−
X
k∈L,k̸=l
Glk
Gll
eP (i)
k
−nl
Gll
}, ∀l ∈L.
(5.52)
We repeat the iteration in (5.52) until eP(i) converges. Then we set P(j+1) =
eP(i). The dual variable m(j+1)
l
at the (j + 1)th iteration is updated by
m(j+1)
l
= P
k∈L,k̸=l Gklψk
= P
k∈L,k̸=l( Gklλ(t)
k B
ln(2)
)( SINR(j+1)
k
GkkP (j+1)
k
)(
SINR(j+1)
k
1+SINR(j+1)
k
), ∀l ∈L,
(5.53)
where ψk represents a broadcast message, SINRk is the SINR at link k, which
is given by SINRk = GkkPk/(P
s∈L,s̸=k GksPs + nk).
In summary, the optimization algorithm is distributed in the following
senses. In the ﬁrst-layer decomposition, each node updates the dual variable
λl for each of its outgoing links using the link capacity and the multicast
link rate, as shown in Equation (5.38). Given the ﬁrst-layer dual variables
λ(t), the second-layer decomposition is performed as follows. First, the source
node computes the source rate using Equation (5.47), each node computes
the conceptual link rate xhl using Equation (5.48), and the multicast link rate
yl using Equation (5.49) for each of its outgoing links, respectively. All the
computations at each node use only the local information. In other words,
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
145
each node collects the dual variables from its neighbors and computes the
conceptual link rate and multicast link rate. Second, each node computes
the broadcast message ψl for each of its outgoing links, and broadcasts ψl
to the network. After collecting broadcast messages from all the other links,
each node computes the dual variable ml and updates the transmit power at
each of its outgoing links. In the proposed algorithm, all the messages except
broadcast message ψl are exchanged in the local neighborhood. The algorithm
can converge quickly due to the decentralization, thus greatly reducing the
overhead.
5.4.3
Simulation Results
We have carried out extensive simulations to investigate the performance of
the proposed algorithm. We generate a wireless ad hoc network by placing 15
nodes at random locations in a square region of 400m by 400m. Two nodes are
able to communicate to each other if their distance is smaller than a coverage
threshold of 150m. Node 1 is chosen as the source node. Four receivers (node
6, 7, 10 and 11) are chosen at the edge of the network.
For every link, the transition probability from a GOOD state to the next
GOOD state is uniformly distributed between [0.90, 0.95], and the transition
probability from a BAD state to the next BAD state is uniformly distributed
between [0.05, 0.10]. In the CDMA model, the maximum transmit power at
each link is Pm = 2.0W, the baseband bandwidth for each link is 30 KHz.
The gain for each link is computed by Gij = (1/220)(1/dij)4 for i ̸= j, and
Gii = (1/dij)4, where dij is the distance from the transmitter of link j to the
receiver of link i, the factor of (1/220) can be viewed as the spreading gain
in a CDMA system. We encode a Foreman QCIF sequence into 8 layers using
SNR-scalable extension of H.264/AVC [14]. Each GOP consists of 16 frames.
The source bits are packetized into 8 descriptions in a prioritized way, each
having an average bit rate of 66.7 Kbps. The source packets are encoded using
random linear network coding before they are sent out by the source node.
The intermediate nodes also perform network coding before they forward the
received packets.
The convergence threshold for the dual function is set to 10−5. Figure 5.6
illustrates the convergence of the proposed distributed algorithm. We can see
that all the primal variables and dual variable converge within 497 iterations.
Figure 5.6(a) shows the convergence of the 4 conceptual source rates. The
multicast source rate is the maximum among the 4 conceptual source rates.
There are 36 links in the ad hoc network. In order for clear presentation, we
randomly choose 10 links and present the iterations of the multicast link rates
and the transmit powers, which all converge within 497 iterations.
We compare the performance of the optimized scheme with the uniform-
power scheme, in which each link is allocated with the same power, and the to-
tal power consumption is equal to that in the optimized scheme. Figure 5.7(a)
shows the comparison of the end-to-end throughput for diﬀerent receivers.
© 2014 by Taylor & Francis Group, LLC

146
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
350
400
450
500
0
0.1
0.2
0.3
0.4
0.5
IterationNo.
Conceptual source rate [Mbps]
tonode6
tonode7
tonode10
tonode11
(a)
0
50
100
150
200
250
300
350
400
450
500
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
IterationNo.
Multicast link rate {Mbps]
(b)
0
50
100
150
200
250
300
350
400
450
500
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
IterationNo.
The transmit power [W]
(c)
FIGURE 5.6
Iterations of (a) conceptual source rates, (b) multicast link rates, and (c)
transmit powers, for video multicasting over a CDMA wireless ad hoc network
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
147
1
2
3
4
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
Throughput [Mbps]
Receiver ID
Uniform-power
Optimized
(a)
1
2
3
4
0
5
10
15
20
25
30
35
Average PSNR[dB]
Receiver ID
Uniform-power
Optimized
(b)
FIGURE 5.7
Comparison between the optimized scheme and the uniform-power scheme
for video multicasting over a CDMA wireless ad hoc network: (a) throughput
comparison, and (b) average PSNR comparison
© 2014 by Taylor & Francis Group, LLC

148
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
10
15
20
25
30
35
40
Frame No.
PSNR [dB]
Uniform−power
Optimized
FIGURE 5.8
Frame PSNR comparison at node 6 between the optimized scheme and the
uniform-power scheme for video multicasting over a CDMA wireless ad hoc
network
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
149
(a)
(b)
FIGURE 5.9
Comparison of reconstructed frame 26 of Foreman QCIF sequence at node
6 between the optimized scheme and the uniform-power scheme for video
multicasting over a CDMA wireless ad hoc network: (a) the uniform-power
scheme (30.097 dB) and (b) the optimized scheme (33.706 dB)
© 2014 by Taylor & Francis Group, LLC

150
Optimal Resource Allocation for Distributed Video Communications
The optimized scheme allocates the powers optimally, which produces an op-
timal allocation of link capacity. Therefore, the optimized scheme achieves
a higher throughput compared to the uniform-power scheme. Since network
coding eliminates the duplicate packets, a higher throughput leads to a higher
average PSNR, which is depicted in Figure 5.7(b). We also present the frame
PSNR comparison at node 6 between the two schemes in Figure 5.8. In the
optimized scheme, the receivers can receive more packets for each frame, thus
reconstructing the video at an overall higher PSNR. On the other hand, the
receiver in the uniform-power scheme receives fewer packets for each frame
due to a lower throughput, thus reconstructing the video at a worse quality.
The subjective quality of reconstructed frame 26 of Foreman QCIF sequence
is compared in Figure 5.9. The optimized scheme enable node 6 to reconstruct
the frame at the PSNR of 33.706 dB, much higher than the PSNR of 30.097
dB, produced by the uniform-power scheme.
We also compare the optimized scheme with the tree-based routing
schemes. In the optimized scheme, the link ﬂow is obtained from the dis-
tributed optimization algorithm. In the single-tree based routing scheme, we
construct the tree using the link throughput metric cl(1 −pl). We choose
the optimized single tree, where the summation of the end-to-end through-
put from the source to all receivers is maximized. In the multiple-tree based
routing scheme, we construct double trees as follows. All the nodes except the
source are classiﬁed into two categories: group 0 and group 1. Within each
group, we construct a single tree from the source to the receivers by using the
link throughput metric cl(1 −pl). In the above three transmission schemes,
the total power consumption is kept the same for a fair comparison.
The comparison of the throughput and average PSNR among the three
schemes are shown in Figure 5.10. The optimized scheme yields a much higher
throughput, thus reconstructing the video at a higher average PSNR. In the
double-tree scheme, all the receivers receive streams through two paths, thus
having a higher end-to-end throughput compared to the single-tree scheme.
Figure 5.11 compares the frame PSNR at node 10 between the optimized
scheme and the double-tree scheme. We can see the frame PSNR in the op-
timized scheme is much higher than that in the double-tree scheme. In the
double-tree scheme, the frame loss occurs frequently, and the drifting errors
make the rest frames in that GOP undecodable. So we see many quality drops
in the PSNR trace of the double-tree scheme. The subjective quality of frame
13 for these three schemes is compared in Figure 5.12. Optimized scheme
produces the frame PSNR of 34.755 dB, much higher than 31.282 dB in the
double-tree scheme, and 30.747 dB in the single-tree scheme. Therefore, we
observe a much clearer picture in Figure 5.12(c), compared to both pictures
in Figure 5.12(a) and Figure 5.12(b).
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
151
1
2
3
4
0
0.05
0.1
0.15
0.2
0.25
0.3
0.35
0.4
Throughput [Mbps]
Receiver ID
Single-tree
Double-tree
Optimized
(a)
1
2
3
4
0
5
10
15
20
25
30
35
Average PSNR[dB]
Receiver ID
Single-tree
Double-tree
Optimized
(b)
FIGURE 5.10
Comparison between the optimized scheme and the tree-based schemes for
video multicasting over a CDMA wireless ad hoc network: (a) throughput
comparison, and (b) average PSNR comparison
© 2014 by Taylor & Francis Group, LLC

152
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
10
15
20
25
30
35
40
Frame No.
PSNR [dB]
Double−tree
Optimized
FIGURE 5.11
Frame PSNR comparison at node 10 between the optimized scheme and the
double-tree scheme for video multicasting over a CDMA wireless ad hoc net-
work
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
153
(a)
(b)
(c)
FIGURE 5.12
Comparison of reconstructed frame 13 of Foreman QCIF sequence at node
10 among three schemes for video multicasting over a CDMA wireless ad hoc
network: (a) the single-tree scheme (30.747 dB), (b) the double-tree scheme
(31.282 dB), and (c) the optimized scheme (34.755 dB)
© 2014 by Taylor & Francis Group, LLC

154
Optimal Resource Allocation for Distributed Video Communications
5.5
Chapter Summary
In this chapter, we have studied the distributed optimization for video stream-
ing over wireless ad hoc networks. We have employed a prioritized coding
scheme which combines layered video coding and network coding. With a
prioritized coding scheme, heterogeneous receivers can reconstruct the video
at diﬀerent levels of the video quality according to their capacities. The in-
tegration of the network coding eliminates the delivery redundancy, thus the
receiver receives the distinct packets with very high probability. Video stream-
ing can be classiﬁed into unicast streaming and multicast streaming. We
have applied our distributed framework to both streaming classes. For unicast
streaming over wireless ad hoc networks, we minimized the expected distortion
by jointly optimizing both the source rate and the routing scheme. The nu-
merical results showed that the proposed optimized routing can outperform
the congestion-minimized routing and double-disjoint-path routing scheme.
For the multicast streaming over wireless ad hoc networks, we examined the
video streaming under diﬀerent communication models including FDMA and
CDMA. In video multicasting over FDMA wireless ad hoc networks, we opti-
mized both the source rate and the routing scheme, and achieved a signiﬁcant
improvement in video quality over the double-tree routing scheme. In video
multicasting over CDMA wireless ad hoc networks, we presented a distributed
cross-layer optimization, taking into account the power allocation in the phys-
ical layer. Namely, we jointly optimized the source rate, the routing scheme
and the power allocation for the video multicast using the hierarchical dual
decompositions. Extensive simulations illustrated signiﬁcant gains in terms of
video quality over both the uniform-power scheme and the tree-based schemes.
Bibliography
[1] W. Wei and A. Zakhor, “Multipath unicast and multicast video commu-
nication over wireless ad hoc networks,” in Proc. of IEEE BroadNets, pp.
496-505, Oct. 2004.
[2] Y. He, I. Lee, and L. Guan, “Optimized video multicasting over wireless ad
hoc networks using distributed algorithm,” IEEE Transactions on Circuits
and Systems for Video Technology, vol. 19, no. 6, pp. 796-807, Jun. 2009.
[3] K. Stuhlmuller, N. Farber, M. Link, and B. Girod, “Analysis of video trans-
mission over lossy channels,” IEEE Journal on Selected Areas in Commu-
nications, vol. 18, no. 6, pp. 1012-1032, June 2000.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Video Streaming over Wireless Ad Hoc Networks
155
[4] R. Ahlswede, N. Cai, S.-Y. R. Li and R. W. Yeung, “Network information
ﬂow,” IEEE Transactions on Information Theory, vol. 46, pp. 1204-1216,
Jul. 2000.
[5] Z. Li, B. Li, D. Jiang, and L. C. Lau, “On Achieving Optimal Throughput
with Network Coding,” in Proc. of IEEE INFOCOM, vol. 3, pp. 2184-2194,
Mar. 2005.
[6] S. Mao, S. Lin, S. Panwar, Y. Wang, and E. Celebi, “Video transport over
ad hoc networks: Multistream coding with multipath transport,” IEEE
Journal on Selected Areas in Communications, vol. 21, no. 10, pp. 1721-
1737, Dec. 2003.
[7] W. Wei and A. Zakhor, “Robust multipath source routing protocol
(RMPSR) for video communication over wireless ad hoc networks,” in
Proc. of IEEE ICME, vol. 2, pp. 1379-1382, Jun. 2004.
[8] S. Mao, Y. T. Hou, X. Cheng, H. D. Sherali, and S. F. Midkiﬀ, “Multipath
routing for multiple description video over wireless ad hoc networks,” in
Proc. of IEEE INFOCOM, pp. 740-750, Mar. 2005.
[9] X. Zhu and B. Girod, “A distributed algorithm for congestion-minimized
multi-path routing over ad hoc networks,” in Proc. of IEEE ICME, pp.
1484-1487, Jul. 2005.
[10] D. Palomar and M. Chiang, “A tutorial on decomposition methods and
distributed network resource allocation,” IEEE Journal on Selected Areas
in Communications, vol. 24, no. 8, pp. 1439-1451, Aug. 2006.
[11] S. Boyd and L. Vandenberghe, Convex Optimization, Cambridge Univer-
sity Press, 2004.
[12] D. P. Bertsekas, A. Nedic, and A. E. Ozdaglar, Convex Analysis and
Optimization, Athena Scientiﬁc, 2003.
[13] Y. He, I. Lee, and L. Guan, “Optimized multi-path routing using dual
decomposition for wireless video streaming,” in Proc. of IEEE ISCAS, pp.
977-980, May 2007.
[14] H. Schwarz, D. Marpe, and T. Wiegand, “SNR-scalable extension of
H.264/AVC,” in Proc. of IEEE ICIP, vol. 5, pp. 3113-3116, Oct. 2004.
[15] Y. He, I. Lee, and L. Guan, “Video multicast over wireless ad hoc net-
works using distributed optimization,” in Proc. of Paciﬁc-rim Conference
on Multimedia (PCM), pp. 296-305, Dec. 2007.
[16] S. Mao, S. Lin, S. Panwar, and Y. Wang, “Reliable transmission of video
over ad-hoc networks using automatic repeat request and multi-path trans-
port,” in Proc. of IEEE VTC, vol. 2, pp. 615-619, Oct. 2001.
© 2014 by Taylor & Francis Group, LLC

156
Optimal Resource Allocation for Distributed Video Communications
[17] P. Mohapatra, C. Gui, and J. Li, “Group communications in mobile ad
hoc networks,” IEEE Computer, vol. 37, no. 2, pp. 52-59, Feb. 2004.
[18] F. P. Kelly, A. Maulloo, and D. Tan, “Rate control for communication
networks: shadow prices, proportional fairness and stability,” Journal of
Operations Research Society, vol. 49, no. 3, pp. 237-252, Mar. 1998.
[19] M. Chiang, S. H. Low, A. R. Calderbank, and J. C. Doyle, “Layering as
optimization decomposition: A mathematical theory of network architec-
tures,” Proceedings of the IEEE, vol. 95, no. 1, pp. 255-312, Jan. 2007.
[20] J. Yuan, Z. Li, W. Yu, B. Li, “A cross-layer optimization framework for
multihop multicast in wireless mesh networks,” IEEE Journal on Selected
Areas in Communications, vol. 24, no. 11, pp. 2096-2103, Nov. 2006.
[21] L. Xiao, M. Johansson and S. Boyd, “Simultaneous routing and resource
allocation via dual decomposition,” IEEE Transactions on Communica-
tions, vol. 52, no. 7, pp. 1136-1144, Jul. 2004.
[22] L. Chen, S. H. Low, M. Chiang, and J. C. Doyle, “Cross-layer congestion
control, routing and scheduling design in ad hoc wireless networks,” in
Proc. of IEEE INFOCOM, pp. 1-13, Apr. 2006.
[23] X. Zhu, J. P. Singh, and B. Girod, “Joint routing and rate allocation for
multiple video streams in ad hoc wireless networks,” Journal of Zhejiang
University, Science A, vol. 7, no. 5, pp. 727-736, May 2006.
[24] P. Papadimitratos, Z. Haas, and E. Sirer, “Path set selection in mobile
ad hoc networks,” in Proc. of ACM MOBIHOC, pp. 1-11, Jun. 2002.
[25] S. Mao, X. Cheng, Y. T. Hou, and H. D. Sherali, “Multiple description
video multicast in wireless ad hoc networks,” in Proc. of IEEE BROAD-
NETS, pp. 671-680, Oct. 2004.
[26] A. Zakhor and W. Wei, “Multiple Tree Video Multicast over Wireless Ad
Hoc Networks,” in Proc. of ICIP, pp. 1665-1668, Sep. 2006.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

6
Optimal Resource Allocation for Wireless
Visual Sensor Networks
CONTENTS
6.1
Introduction .......................................................
158
6.2
System Models ....................................................
159
6.2.1
Network Graph .............................................
159
6.2.2
Channel Error Model ......................................
160
6.2.3
Power Consumption Model ................................
161
6.2.4
Network Lifetime ...........................................
162
6.3
Achievable Maximum Network Lifetime ..........................
162
6.3.1
Problem Formulation ......................................
163
6.3.2
Distributed Algorithm .....................................
165
6.3.3
Simulation Results .........................................
167
6.4
Maximum Network Lifetime for Large-Delay Applications .......
171
6.4.1
Problem Formulation and Solution ........................
171
6.4.2
Simulation Results .........................................
172
6.5
Maximum Network Lifetime for Small-Delay Applications .......
175
6.5.1
With FEC ..................................................
175
6.5.1.1
Problem Formulation and Solution ..............
175
6.5.1.2
Simulation Results ...............................
177
6.5.2
Without FEC ..............................................
177
6.5.2.1
Transmission Distortion ..........................
180
6.5.2.2
Tradeoﬀbetween Maximum Network Lifetime
and Video Quality ...............................
181
6.6
Chapter Summary .................................................
182
Bibliography .............................................................
183
Network lifetime maximization is a critical issue in Wireless Sensor Networks
(WSNs) since each sensor has a limited power supply. In contrast with conven-
tional sensor networks, video sensor nodes compress the video before trans-
mission. The encoding process demands high power consumption, thus raising
a challenge to the maintenance of a long network lifetime. In this chapter, we
examine a strategy for maximizing the network lifetime in Wireless Visual
Sensor Networks (WVSNs) by jointly optimizing the source rates, the encod-
ing powers and the routing scheme.
157
© 2014 by Taylor & Francis Group, LLC

158
Optimal Resource Allocation for Distributed Video Communications
6.1
Introduction
A wireless sensor network consists of geographically distributed sensors that
communicate with each other over wireless channels [1]. A wireless visual
sensor network is a special kind of WSN in that each sensor is equipped with
video capture and processing components. WVSN facilitates a wide range of
applications, such as video surveillance, emergency response, environmental
tracking, and health monitoring [2].
Each video sensor in the WVSN has a camera component to capture the
video, and a processing component to compress the video. The video sensors
construct a mesh network topology, and they communicate with each other
within a limited transmission range. The video captured and encoded at each
sensor is transmitted to a sink for further analysis and decision making.
Sensor nodes are typically battery powered, and battery replacement is
infrequent or even impossible in many sensing applications. Hence, a tremen-
dous amount of research eﬀort in wireless sensor networks has been focused
on energy conservation. One aspect of this research is to maximize the net-
work lifetime. In conventional wireless sensor networks, the data processing
performed by the sensor node is assumed to be very simple. Thus, the energy
consumption utilized for data collection and processing is often negligible. In
contrast, video sensors in a WVSN need to compress the data prior to trans-
mission. Eﬃcient video compression algorithms are typically associated with
high power consumption.
It is quite challenging to prolong or maximize the network lifetime for a
WVSN. First, the algorithms, which maximize the network lifetime for con-
ventional wireless sensor networks, focus on the allocation of transmission
power and reception power. These algorithms cannot perform well when ap-
plied directly to WVSNs, since they neglect the power consumption on signal
processing. Second, there is a tradeoﬀbetween the video quality and the net-
work lifetime. A WVSN can extend its network lifetime by sacriﬁcing the
quality of the collected videos.
Network lifetime maximization for conventional wireless sensor networks
has been extensively studied in the past. Chang et al. [3] developed a maximum
lifetime routing scheme. Madan et al. [4] solved the lifetime maximization
problem with a distributed algorithm using the dual decomposition and the
subgradient method. Lifetime maximization for interference-limited networks
using a cross-layer approach was studied in [5]. The tradeoﬀbetween the source
rate allocation and the network lifetime was investigated in [6][7]. However,
these methods [3][4][5][6][7] cannot be applied directly to the wireless visual
sensor networks, since they omit the processing power consumption at the
sensor nodes.
Wireless visual sensor networks have recently become an active research
area. In [8], the concept of accumulative visual information was introduced
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
159
as a means for measuring the amount of visual information collected in a
WVSN. Minimizing the video distortion by optimizing the power allocation
in WVSNs was investigated in [2]. He et al. investigated the resource-distortion
optimization problem for video encoding and transmission over WVSNs [9].
A cooperative relaying architecture for delivering aggregated high-rate video
data to the destination in wireless video sensor networks was proposed in
[10]. In order to prolong the network lifetime for wireless sensor networks, an
application-aware routing protocol, Distributed Activation based on Prede-
termined Routes (DAPR) [11], was proposed by avoiding the use of sensors in
the sparsely deployed areas as routers. Soro et al. extended DAPR in WVSNs
[12] by introducing the total cost that combines the coverage and routing costs
for each video sensor. However, DAPR cannot prolong the network lifetime
for WVSNs to maximum, since the encoding power at each sensor node has
not been optimized.
This chapter tackles the network lifetime maximization problem in wireless
visual sensor networks. We present a distributed algorithm to maximize the
network lifetime by jointly optimizing the source rates, the encoding powers,
and the routing scheme. We investigate the network lifetime maximization
problem in both large-delay applications and small-delay applications, respec-
tively. In addition, we provide the relationship between the collected video
quality and the maximal network lifetime in WVSNs.
The rest of the chapter is organized as follows. The system models for
the WVSN are described in Section 6.2. In Section 6.3, we study the achiev-
able maximum network lifetime in the WVSN without transmission errors.
The network lifetime maximization in the WVSN with transmission errors
is investigated in Section 6.4 and Section 6.5. Section 6.4 targets large-delay
WVSN applications, while Section 6.5 targets small-delay WVSN applications.
Finally, we summarize this chapter in Section 6.6.
6.2
System Models
In this section, we describe the network graph, the channel error model, the
power consumption model, and give the deﬁnition of network lifetime. These
models and deﬁnition will be used to formulate the network lifetime maxi-
mization problem in the next sections.
6.2.1
Network Graph
A static wireless visual sensor network can be modeled as a directed graph
G = (N, L), where N is the set of video sensors and L is the set of directed
wireless links. Among N nodes, one node belongs to the sink set T, while the
other nodes belong to video sensor set V. Thus, N = V S T. In this work, we
© 2014 by Taylor & Francis Group, LLC

160
Optimal Resource Allocation for Distributed Video Communications
assume that there is only one sink. However, the setup can be easily extended
to include multiple sinks. Two nodes i and j are connected by a link if they
can directly communicate with each other.
The relationship between a WVSN node and its connected links is rep-
resented with a node-link incidence matrix A, whose elements are deﬁned
as
ail =



1,
if link l is an outgoing link from node i,
−1,
if link l is an incoming link into node i,
0,
otherwise.
(6.1)
The relationship between a WVSN node and its outgoing links is represented
with a matrix A+, whose elements are given by
a+
il =
 1,
if link l is an outgoing link from node i,
0,
otherwise.
(6.2)
The relationship between a WVSN node and its incoming links is represented
with a matrix A−, whose elements are given by
a−
il =
 1,
if link l is an incoming link from node i,
0,
otherwise.
(6.3)
Hence, A = A+ −A−.
We assume a standard Medium Access Control (MAC) layer protocol is
applied to resolve the link interference problem. Sensor node h, ∀h ∈V, can
capture and encode the video, and then generate data traﬃc with a source
rate sh (sh = 0 if sensor h is not on the capture and encoding mode). We
deﬁne session h as the traﬃc ﬂow originating from the sensor node h to the
sink. For each session, the ﬂow conservation law holds at each node:
X
l∈L
ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
(6.4)
where xhl is the ﬂow rate at link l for session h, and ηhi is deﬁned as
ηhi =



sh,
if i is the source node of sesion h,
−sh,
if i is the sink of sesion h,
0,
otherwise.
(6.5)
6.2.2
Channel Error Model
In wireless sensor networks, the channel at each link can be modeled as an
Independent and Identically Distributed (IID) random bit error channel. Here,
we employ a two-state Markov chain [13] to model the stochastic channel error
pattern. The two states of the model are denoted as “1” (GOOD) and “0”
(BAD). If the channel is in the GOOD state, the bit will be received correctly,
and if the channel is in the BAD state, the bit will be received with error. The
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
161
two-state Markov chain has been widely used to simulate the error patterns
in wireless ad hoc networks [14] and wireless sensor networks [15].
Based on the Markov channel error model, the average bit error probability
pb
l at link l is then given by
pb
l =
q10
l
q10
l
+ q01
l
,
(6.6)
where q10
l
is the transition probability from a GOOD state to a BAD state,
and q01
l
is the transition probability from a BAD state to a GOOD state.
Each packet has a ﬁxed length of G bits. A packet is regarded as lost when
any bit error in that packet occurs. Then the Packet Loss Rate (PLR) at link
l is given by
pp
l = 1 −(1 −pb
l)G.
(6.7)
6.2.3
Power Consumption Model
Video sensor h captures and encodes the video before it transmits the traﬃc
to its downstream node. The distortion of the compressed video depends on
the source rate sh and the encoding power consumption Psh. According to
the Power–Rate–Distortion (P–R–D) analytical model in [16], the encoding
distortion is computed by
dsh = σ2e−γ·sh·P 2/3
sh ,
(6.8)
where σ2 is the input variance, γ is the encoding eﬃciency coeﬃcient.
From the P–R–D model, we can see the following relationships: 1) At a
ﬁxed encoding power, the encoding distortion can be reduced by increasing
the source rate; 2) At a ﬁxed source rate, the encoding distortion can be
reduced by increasing the encoding power. Thus, to achieve a given encoding
distortion requirement for session h, we can either increase the encoding power
or increase the source rate. However, increasing the encoding power may raise
the power consumption of the source node. On the other hand, increasing the
source rate may cause the downstream nodes to consume more power in order
to relay extra traﬃc to the sink. Therefore, optimal allocation between the
source rate and the encoding power is critical for maximizing network lifetime.
Based on a power consumption model in wireless sensor networks [17], the
transmission power consumption at link l can be formulated as:
Ptl = cs
l yl, and cs
l = α + βdnp
l ,
(6.9)
where yl is the aggregate rate transmitted through link l, cs
l is the transmission
energy consumption cost of link l, α is the energy cost of transmit electronics,
β is a coeﬃcient term corresponding to the energy cost of transmit ampliﬁer,
dl is the distance between the transmitter and the receiver along link l, and
np is the path-loss exponent [18].
© 2014 by Taylor & Francis Group, LLC

162
Optimal Resource Allocation for Distributed Video Communications
The reception power consumption at a node i can be formulated as:
Pri = cr X
l∈L
a−
ilyl,
(6.10)
where cr is the energy consumption cost of the radio receiver, and P
l∈L a−
ilyl
represents the aggregate rate received at node i.
The total power dissipation at node i consists of the encoding power con-
sumption, the transmission power consumption and the reception power con-
sumption, and is given by
Pi = Psi + Pti + Pri = Psi +
X
l∈L
a+
il(cs
l yl) + cr X
l∈L
a−
ilyl,
(6.11)
where Psi = 0, if i is not in the video sensor set V.
6.2.4
Network Lifetime
Generally, the network lifetime is deﬁned as the time period from the start
time of the network until the time when the whole network fails due to the
energy exhaustion of a set of sensors K, where K ⊆N. In some mission-
critical applications, each sensor node is critical to the operation of the network
operation. The exhaustion of energy of any node will cause the failure of the
whole network. For example, each access is monitored by a visual sensor in a
security-monitoring application. If any of the visual sensors fails due to energy
exhaustion, the intruder can break into the monitored area. In that case, the
whole security-monitoring system loses its function even though most of the
visual sensors are working well. The network lifetime in such applications is
deﬁned as the minimum node lifetime [3][4][6]. In a WVSN, sensor node i has
an initial energy Bi, and the lifetime of node i is given by Ti = Bi/Pi, ∀i ∈N.
Then the network lifetime is given by Tnet = mini∈N{Ti} = mini∈N{Bi/Pi}.
In the following, we will use the minimum node lifetime as the network lifetime.
6.3
Achievable Maximum Network Lifetime
In wireless visual sensor networks, the sink collects each video from the corre-
sponding sensor. The distortion of each video consists of an encoding distortion
and a transmission distortion (distortion due to transmission errors). There
is a tradeoﬀbetween the distortion requirement and the maximum network
lifetime. If a high-quality video is desired, the maximum network lifetime will
be compromised. On the other hand, WVSN can survive a longer time if it
has a lower quality (larger distortion) requirement.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
163
Given a distortion requirement at the sink, the maximum network lifetime
depends on the network status. In a WVSN in the presence of transmission
errors, sensor nodes can use various techniques, such as retransmissions, or
Forward Error Correction (FEC), to combat the transmission errors. How-
ever, these methods introduce additional power consumption and thus reduce
the network lifetime. On the other hand, if sensor nodes do not apply retrans-
mission or FEC to recover from transmission errors, the transmission distor-
tion will be introduced. Subject to the total distortion requirement, video
sensors need to encode the video with a smaller encoding distortion, which
correspondingly requires a higher encoding power or a larger source rate, thus
reducing the network lifetime.
The achievable maximum network lifetime in a WVSN is obtained when
there is no transmission error. In this section, we will investigate the achievable
maximum network lifetime. The maximum network lifetime in a WVSN with
transmission errors will be examined in the next two sections: Section 6.4 and
Section 6.5.
6.3.1
Problem Formulation
In a WVSN that has no transmission error, the total distortion is equal to
the encoding distortion since the transmission distortion is zero. In this case,
the received video at the sink is measured by the encoding distortion in Mean
Squared Error (MSE).
We state the problem of the achievable maximum network lifetime as:
given the topology of a static WVSN, and the initial energy at each node, to
maximize the network lifetime by jointly optimizing the source rate and the
encoding power at each video sensor, and the link rate of each session, subject
to an encoding distortion requirement for each captured video. Mathemati-
cally, the problem can be formulated as follows.
maximize
(s,x,Ps)
{Tnet = min{Bi/(Psi + P
l∈L a+
il(cs
l yl) + cr P
l∈L a−
ilyl)}}
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
P
h∈V xhl = yl,
∀l ∈L,
σ2e−γ·sh·P 2/3
sh ≤Dh,
∀h ∈V,
xhl ≥0,
∀h ∈V, ∀l ∈L,
sh ≥0,
∀h ∈V,
Psh ≥0,
∀h ∈V,
(6.12)
where Bi is the initial energy at node i, Pi is the total power consumption
at node i, xhl is the link rate at link l for session h, yl is the aggregate
ﬂow rate at link l, sh is the source rate of session h, Psh is the encoding
power at the source node of session h, and Dh is the upper bound of the
encoding distortion for session h in MSE. The ﬁrst constraint P
l∈L ailxhl =
ηhi represents the ﬂow conservation at each node for each session, the second
constraint P
h∈V xhl = yl represents that the aggregate ﬂow rate yl at a link
© 2014 by Taylor & Francis Group, LLC

164
Optimal Resource Allocation for Distributed Video Communications
is the summation of the link rates of all the sessions at this link, and the
third constraint σ2e−γ·sh·P 2/3
sh
≤Dh represents that the encoding distortion
for session h is required to be no larger than the corresponding upper bound
Dh.
We replace the variable Tnet using q = 1/Tnet. Since Tnet ≤Bi/(Psi +
P
l∈L a+
il(cs
l yl) + cr P
l∈L a−
ilyl), ∀i ∈N, we have qBi ≥Psi + P
l∈L a+
il(cs
l yl) +
cr P
l∈L a−
ilyl, ∀i ∈N. Then the problem (6.12) is converted to an equivalent
formulation as follows.
minimize
(s,x,Ps,q)
q
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
P
h∈V xhl = yl,
∀l ∈L,
log(σ2/Dh)/(γP 2/3
sh ) ≤sh,
∀h ∈V,
Psi + P
l∈L a+
il(cs
l yl) + cr P
l∈L a−
ilyl ≤qBi,
∀i ∈N,
xhl ≥0,
∀h ∈V, ∀l ∈L,
sh ≥0,
∀h ∈V,
Psh ≥0,
∀h ∈V.
(6.13)
The optimization problem (6.13) cannot be solved in a fully distributed
manner, because the value of q needs to be broadcast to each node. In order
to develop a fully distributed algorithm, we introduce an auxiliary variable
qi, ∀i ∈N for node i. In problem (6.13), each node maintains a common q,
which is equivalent to the case that node i maintains an individual qi while
qi = qj, ∀i, j ∈N. The equality constraint qi = qj, ∀i, j ∈N can be represented
in an another way P
i∈N ailqi = 0, ∀l ∈L.
We know q = (1/Tnet) > 0, the objective that minimizes q is equivalent to
the one that minimizes |N|q2, where |N| represents the number of nodes in the
WVSN. By using auxiliary variable qi to replace the common q, the objective
function |N|q2 is equal to P
i∈N q2
i under the equality constraint P
i∈N ailqi =
0, ∀l ∈L. Therefore, the optimization problem (6.13) is converted to the
following formulation:
minimize
(s,x,Ps,q)
P
i∈N q2
i
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
log(σ2/Dh)/(γP 2/3
sh ) ≤sh,
∀h ∈V,
Psi + P
l∈L a+
il(cs
l
P
h∈V xhl)+
cr P
l∈L a−
il
P
h∈V xhl ≤qiBi,
∀i ∈N,
P
i∈N ailqi = 0,
∀l ∈L,
xhl ≥0,
∀h ∈V, ∀l ∈L,
qi > 0,
∀i ∈N,
sh ≥0,
∀h ∈V,
Psh ≥0,
∀h ∈V,
(6.14)
In order to develop a fully distributed algorithm, we add a corresponding
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
165
quadratic regularization term for each link rate variable and source rate vari-
able to make the objective function strictly convex. The optimization problem
(6.14) is approximated to:
minimize
(s,x,Ps,q)
P
i∈N q2
i + P
h∈V
P
l∈L δx2
hl + P
h∈V δs2
h
subject to
the same constraints as in (6.14)
(6.15)
where δ(δ > 0) is the regularization factor. When the regularization factor δ is
close to 0, the objective value in problem (6.15) will be close to the objective
value in problem (6.14). Therefore, the solution for the problem (6.15) is close
to the solution for the original optimization problem (6.12).
6.3.2
Distributed Algorithm
In the problem (6.15), the objective function is strictly convex, the inequality
functions are convex, and the equality functions are linear. Therefore, it is a
convex optimization problem [19]. In addition, there exists a strictly feasible
solution that satisﬁes all the constraints in the problem (6.15). In other words,
the Slater’s condition is satisﬁed, and the strong duality holds [19]. Thus, we
can obtain the optimal solutions indirectly by ﬁrst solving the corresponding
dual problem [19]. The dual-based approach leads to an eﬃcient distributed
algorithm [20].
We introduce dual variables uhi, ∀h ∈V, ∀i ∈N; vh, ∀h ∈V; λi, ∀i ∈N;
wl, ∀l ∈L to formulate the Lagrangian corresponding to primal problem (6.15)
as below
L(s, x, Ps, q, u, v, λ, w)
= P
i∈N q2
i + P
h∈V
P
l∈L δx2
hl + P
h∈V δs2
h
+ P
h∈V
P
i∈N uhi(P
l∈L ailxhl −ηhi)
+ P
h∈V vh(log(σ2/Dh)/(γP 2/3
sh ) −sh)
+ P
i∈N λi(Psi + P
l∈L a+
il(cs
l
P
h∈V xhl) + cr P
l∈L a−
il
P
h∈V xhl −qiBi)
+ P
l∈L wl
P
i∈N ailqi
= P
i∈N(q2
i + qi(P
l∈L ailwl −λiBi))
+ P
h∈V(vh log(σ2/Dh)/(γP 2/3
sh ) + λhPsh)
+ P
h∈V
P
l∈L(δx2
hl + xhl(cs
l
P
i∈N λia+
il + cr P
i∈N λia−
il + P
i∈N uhiail))
+ P
h∈V(δs2
h −vhsh −P
i∈N uhiηhi).
(6.16)
The Lagrange dual function G(u, v, λ, w) is the minimum value of the
Lagrangian over primal variables s, x, Ps, q, and it is given by
G(u, v, λ, w) = min{L(s, x, Ps, q, u, v, λ, w)}.
(6.17)
The Lagrange dual problem corresponding to the primal problem (6.15) is
then given by
maximize(u,v,λ,w)
G(u, v, λ, w)
subject to
v ≥0,
λ ≥0.
(6.18)
© 2014 by Taylor & Francis Group, LLC

166
Optimal Resource Allocation for Distributed Video Communications
At the kth iteration, we calculate the primal variables as follows:
1.
qi at node i:
q(k)
i
= arg min
qi>0(q2
i + qi(
X
l∈L
ailw(k)
l
−λ(k)
i
Bi)), ∀i ∈N.
(6.19)
2.
The encoding power Psh at video sensor h:
P (k)
sh = arg min
Psh≥0(v(k)
h
log(σ2/Dh)/(γP 2/3
sh )+λ(k)
h Psh), ∀h ∈V. (6.20)
3.
The source rate sh at video sensor h:
s(k)
h
= arg min
sh≥0(δs2
h −v(k)
h sh −
X
i∈N
u(k)
hi ηhi), ∀h ∈V.
(6.21)
4.
The link rate xhl at link l for session h:
x(k)
hl = arg minxhl≥0
(δx2
hl + xhl(cs
l
P
i∈N λ(k)
i
a+
il + cr P
i∈N λ(k)
i
a−
il
+ P
i∈N u(k)
hi ail)),
∀h ∈V, ∀l ∈L.
(6.22)
We use subgradient method [21] to solve the Lagrange dual problem. The
dual variable at the (k + 1)th iteration is updated by
u(k+1)
hi
= u(k)
hi −θ(k)(η(k)
hi −
X
l∈L
ailx(k)
hl ),
∀h ∈V, ∀i ∈N,
(6.23)
v(k+1)
h
= max{0, v(k)
h
−θ(k)(s(k)
h
−log(σ2/Dh)/(γ(P (k)
sh )2/3))},
∀h ∈V,
(6.24)
λ(k+1)
i
= max
{0, λ(k)
i
−θ(k)(q(k)
i
Bi −P
l∈L a+
ilcs
l
P
h∈V x(k)
hl
−cr P
l∈L a−
il
P
h∈V x(k)
hl −P (k)
si )}, ∀i ∈N,
(6.25)
w(k+1)
l
= w(k)
l
+ θ(k) X
i∈N
ailq(k)
i
,
∀l ∈L,
(6.26)
where θ(k) > 0 is the step size at kth iteration. The step size we use in our
algorithm is: θ(k) = ω/
√
k, where ω > 0.
The above algorithm is fully distributed. Each node computes the primal
variables: 1) the auxiliary variable qi, 2) the encoding power Psh, 3) the source
rate sh, and 4) the outgoing link rate xhl from this node, using the dual
variables of itself and its neighboring nodes. When the dual variables converge,
the primal variables also converge to their optimal values.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
167
Parameter
Description
Value
σ2
Input video variance
3500
γ
Encoding eﬃciency coeﬃcient
55.54W 3/2/Mbps
α
Energy cost of transmit electronics
0.5J/Mb
β
Coeﬃcient term of the transmit
1.3 × 10−8J/Mb/m4
ampliﬁer
np
Path-loss exponent
4
cr
Energy consumption cost of radio
0.5J/Mb
receiver
δ
Regularization factor
0.2
ω
Step size parameter
0.15
TABLE 6.1
Conﬁguration of model parameters in a wireless visual sensor network
6.3.3
Simulation Results
In this subsection, we evaluate the proposed distributed solution for the net-
work lifetime maximization problem in the lossless scenario. We consider a
static WVSN with 10 nodes randomly located in a square region of 50m-by-
50m. Node 10 is the sink, and the other nodes are video sensors. Each node
has a maximum transmission range of 30m. Foreman Common Intermediate
Format (CIF) sequence is used in the simulations. The values of the model
parameters are listed in Table 6.1. Each node has an initial energy of 5.0 MJ.
All 9 video sensors encode the videos and transmit them to the sink. If not
speciﬁed particularly, the upper bound of the encoding distortion Dh is set to
100, corresponding to a Peak Signal-to-Noise Ratio (PSNR) of 28.13 dB.
We introduce a regularization factor in order to derive the distributed
algorithm. There is a tradeoﬀbetween the suboptimality and the computation
complexity for diﬀerent regularization factors, as shown in Figure 6.1. When
the regularization factor is 0.01, we can obtain a maximum network lifetime of
1.02 × 107 s at the price of 7897 iterations. On the other hand, we can reduce
the complexity to 277 iterations by sacriﬁcing the maximum network lifetime
to 8.69 × 106 s. In our simulations, we choose a regularization factor of 0.2,
leading to a network lifetime of 9.41×106 s. Compared to the optimization with
the regularization factor 0.01, the algorithm with the regularization factor 0.2
requires only 1/20 of the complexity though the maximum network lifetime is
reduced only by 7.5%.
The proposed algorithm optimizes both the source (e.g., source rate and
encoding power) and the routing scheme. We compare the proposed algorithm
with two other schemes: 1) the Source-Optimized Scheme (SOS), in which
only the encoding power and the source rate are optimized, while the routing
is pre-determined with the shortest-path scheme; 2) the Routing-Optimized
Scheme (ROS), in which only the routing scheme is optimized, while the en-
© 2014 by Taylor & Francis Group, LLC

168
Optimal Resource Allocation for Distributed Video Communications
0
0.1
0.2
0.3
0.4
0.5
0
1000
2000
3000
4000
5000
6000
7000
8000
Regulationfactor
Thenumber of iterations for convergence
(a)
0
0.1
0.2
0.3
0.4
0.5
8.6
8.8
9
9.2
9.4
9.6
9.8
10
10.2
x 10
6
Regulationfactor
Themaximumnetwork lifetime[s]
(b)
FIGURE 6.1
Tradeoﬀbetween the suboptimality and the complexity for diﬀerent regu-
larization factors: (a) the number of iterations for convergence, and (b) the
maximum network lifetime
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
169
0
5
10
15
20
25
30
35
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
Sensor nodeNo.
Power consumption[W]
Encoding power
Transmissionand receptionpower
1
2
3
4
5
6
7
8
9
0
5
10
15
20
25
30
35
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
Sensor nodeNo.
Power consumption[W]
Encoding power
Transmissionand receptionpower
1
2
3
4
5
6
7
8
9
A B C
FIGURE 6.2
Comparison of power consumption at each sensor node
© 2014 by Taylor & Francis Group, LLC

170
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
6
7
8
9
10
11
12 x 10
6
Encoding distortion requirement
Achievable maximum network lifetime [s]
Source−and−Routing Optimized (Proposed)
Source−Optimized Scheme (SOS)
Routing−Optimized Scheme (ROS)
FIGURE 6.3
Tradeoﬀbetween encoding distortion requirement and achievable maximum
network lifetime in lossless transmission
coding power at each sensor node is ﬁxed at the same value. In order for fair
comparison, the total encoding power of all the sensor nodes in the ROS is
equal to that in the proposed optimized scheme. The comparison of the power
consumption at each sensor node is illustrated in Figure 6.2. In the proposed
scheme, the power consumption at each sensor node (represented in bar C)
converges to the same level, meaning that all the sensor nodes will die at al-
most the same time. The power consumption in the ROS (represented in bar
A) and in the SOS (represented in bar B) at diﬀerent sensor nodes is uneven,
thus some nodes will die before other nodes. The network lifetime is deter-
mined by the maximum power consumption among all the sensor nodes. The
maximum power consumption in the proposed algorithm is 0.5313 W, smaller
than that in ROS by 13.0% and SOS by 3.1%.
There is a tradeoﬀbetween the encoding distortion requirement and the
achievable maximum network lifetime. If a visual sensor network desires a
high-quality video, it will have to sacriﬁce its network lifetime. On the other
hand, a sensor network expecting a longer lifetime has to lower the quality
of the collected video. As shown in Figure 6.3, the proposed algorithm sup-
ports a longer network lifetime for diﬀerent encoding distortion requirements,
compared to both the SOS and ROS.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
171
6.4
Maximum Network Lifetime for Large-Delay Appli-
cations
The WVSN applications can be classiﬁed into two categories according to their
delay requirement [2]. The ﬁrst category is large-delay WVSN application, in
which there is no stringent delay requirement. It only requires that the data
be successfully delivered to the sink for future analysis. Environmental data
collection belongs to this category. The second category is small-delay WVSN
application, in which the video data is required to be transmitted to the sink,
over the sensor networks, with a small delay for fast response and decision
making. A real-time traﬃc monitoring system belongs to the second category.
In Section 6.3, we studied the achievable maximum network lifetime with-
out transmission errors. If transmission errors exist, there is a reduction in the
maximum network lifetime compared to the achievable maximum network life-
time. In this section, we investigate this reduction for the large-delay WVSN
applications. We will examine the network lifetime reduction for small-delay
WVSN applications in the next section.
6.4.1
Problem Formulation and Solution
Large-delay WVSN applications, such as video surveillance, typically maintain
the video quality at a high priority. Corrupted packets can be retransmitted
since delay is permitted. Retransmissions improve the overall video quality at
the receiver. However, retransmissions also consume more energy, which will
reduce the maximum network lifetime. Thus, we analyze the tradeoﬀbetween
the power consumption and the reliability, and the impact on the maximum
network lifetime.
At link l, the transmitter sends a packet to the receiver. If the packet is
received correctly, the receiver will not notify the transmitter. On the other
hand, if the packet is received with errors, the receiver will send back a Neg-
ative Acknowledge (NACK) to the transmitter to request retransmission. In
this work, the NACK is kept simple and its energy consumption is assumed
negligible. We also assume that NACK is always received correctly, and the
maximum number of the retransmission Nmax is suﬃciently large. Using the
Markov channel error model, the average number of transmissions Nl required
over link l for successfully transmitting a packet is given by
Nl =
Nmax
X
k=0
(k + 1)(pp
l )k(1 −pp
l ) ≈
1
1 −pp
l
,
∀l ∈L,
(6.27)
where pp
l is the packet loss rate at link l, as deﬁned in Equation (6.7).
In the retransmission scenario, the power consumption at node i is modiﬁed
© 2014 by Taylor & Francis Group, LLC

172
Optimal Resource Allocation for Distributed Video Communications
from Equation (6.11) to the following:
Pi = Psi+Pti+Pri = Psi+
X
l∈L
a+
ilNl(cs
l
X
h∈V
xhl)+cr X
l∈L
Nl(a−
il
X
h∈V
xhl), ∀i ∈N.
(6.28)
The network lifetime maximization problem with retransmissions for large-
delay WVSN applications is modiﬁed from optimization problem (6.15) into
the following form:
minimize
(s,x,Ps,q)
P
i∈N q2
i + P
h∈V
P
l∈L δx2
hl + P
h∈V δs2
h
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
log(σ2/Dh)/(γP 2/3
sh ) ≤sh,
∀h ∈V,
Psi + P
l∈L a+
ilNl(cs
l
P
h∈V xhl)+
cr P
l∈L Nl(a−
il
P
h∈V xhl) ≤qiBi,
∀i ∈N,
P
i∈N ailqi = 0,
∀l ∈L,
xhl ≥0,
∀h ∈V, ∀l ∈L,
qi > 0,
∀i ∈N,
sh ≥0,
∀h ∈V,
Psh ≥0,
∀h ∈V.
(6.29)
The network lifetime maximization problem in (6.29) is essentially the
same as the achievable maximum network lifetime problem, except that the
power consumption constraint in (6.29) integrates the retransmission power
consumption. We can use the primal-dual method proposed in Section 6.3 to
obtain a fully distributed solution. Simulation results for the retransmission
case for large-delay WVSN applications are presented below.
6.4.2
Simulation Results
We use the same setup for the video sensor network and the same model
parameters as in Section 6.3.3. In the simulation, we set the packet size to
512 bits. By varying the transition probability from a GOOD state to a BAD
state q10
l
and the transition probability from a BAD state to a GOOD state
q01
l , we obtain diﬀerent average PLRs.
In the error scenarios, each node needs to retransmit the corrupted pack-
ets, thus introducing more power consumption in transmission and reception.
Extra power consumption leads to a reduction of network lifetime, which is
shown in Figure 6.4. Compared to the lossless transmission, the maximum
network lifetime is reduced by averagely 4.9% when the average PLR is 7.2%,
8.0% when the average PLR is 13.4% and 15.0% when the average PLR is
26.4%, respectively.
We compare the proposed scheme with the other two schemes: SOS and
ROS. In Figure 6.5(a), we compare the maximum network lifetime at diﬀerent
encoding distortion requirements while the average PLR is 13.4%. In Figure
6.5(b), we set the encoding distortion requirement to 100, and compare the
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
173
0
50
100
150
200
250
300
5
6
7
8
9
10
11
12 x 10
6
Encoding distortion requirement
Maximum network lifetime [s]
Average PLR=0
Average PLR=0.072
Average PLR=0.134
Average PLR=0.264
FIGURE 6.4
Reduction of maximum network lifetime in large-delay WVSN applications
© 2014 by Taylor & Francis Group, LLC

174
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
5
6
7
8
9
10
11x10
6
Encodingdistortionrequirement
Maximumnetwork lifetime [s]
Source-and-Routing Optimized (Proposed)
Source-Optimized Scheme (SOS)
Routing-Optimized Scheme (ROS)
(a)
0
0.05
0.1
0.15
0.2
0.25
0.3
6.5
7
7.5
8
8.5
9
9.5x 10
6
Averagepacket loss rate
Maximumnetwork lifetime [s]
Source-and-Routing Optimized (Proposed)
Source-Optimized Scheme (SOS)
Routing-Optimized Scheme (ROS)
(b)
FIGURE 6.5
Comparison of maximum network lifetime in large-delay WVSN applications:
(a) with diﬀerent encoding distortion requirement, and (b) with diﬀerent av-
erage PLR
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
175
maximum network lifetime by varying the average PLR. In both cases, the
proposed algorithm optimizes the source coding and the routing scheme si-
multaneously, thus achieving a longer network lifetime compared to the SOS
and the ROS. We also observe that SOS performs better than ROS. This is
because that source encoding power takes a major part of the total power
consumption, and therefore optimization of the source power utilization leads
to a better performance over ROS.
6.5
Maximum Network Lifetime for Small-Delay Appli-
cations
For large-delay WVSN applications, wireless video sensors are allowed to re-
transmit the packets if they are not received correctly. However, for small-delay
WVSN applications, due to the stringent delay requirement, packet retrans-
missions are infeasible even if the packets are received with errors.
In this section, we study the maximum network lifetime with and without
FEC for small-delay WVSN applications.
6.5.1
With FEC
In wireless sensor networks, there are two popular methods to address the
issues of corrupted or lost packets: Automatic Repeat Requests (ARQ) and
FEC. ARQ requires packet retransmissions, which are typically applied for
large-delay applications. FEC embeds additional bits to detect and recover
from corrupted or lost data. This is suitable for small-delay sensing applica-
tions [15, 22].
The redundant bits introduced by FEC consume transmission power and
reception power. Moreover, the encoding and decoding process of FEC also
consumes additional power. Therefore, FEC reduces the maximum network
lifetime compared to the achievable maximum network lifetime.
6.5.1.1
Problem Formulation and Solution
In this work, we use a kind of FEC, Reed-Solomon (RS) code [23] to recover
the corrupted information in erroneous packets. RS code is widely used for
image or video communications. Let RS(n, k) be the code for transmission,
where n is the block size in number of packets, k(k < n) is the number of
information packets, m = n−k is the number of the redundancy packets. Any
combination of tc = ⌊(n −k)/2⌋erroneous packets out of n can be recovered
[15].
We use RS code at each link. Each node receives the RS blocks from
its upstream nodes. The receiving node decodes the RS blocks and then re-
© 2014 by Taylor & Francis Group, LLC

176
Optimal Resource Allocation for Distributed Video Communications
encodes them before transmitting the RS codes to its downstream nodes. We
apply Real-time Transport Protocol/Real-time Transport Control Protocol
(RTP/RTCP) [24] at each node. Thus, each node can estimate the PLRs at
its outgoing links. The packets are RS encoded adaptively according to the
estimated PLR values.
We use two-state Markov chain to model the transmission channel, and we
assume that the channel error at each link is independent from the amount
of the traﬃc. RS coding is applied at each link. At link l, the packet loss
rate is pp
l , the information bit rate is xhl, and the RS code bit rate is de-
noted by zhl. The packet length is G bits/packet. Thus, the information rate
in packets is ⌈xhl/G⌉packets/second, and the rate of the RS code is ⌈zhl/G⌉
packets/second. In order to correct the erroneous packets, the number of er-
roneous packets needs to be less than or equal to the correction capacity of
the RS code, which is expressed by
pp
l ⌈zhl/G⌉≤⌊⌈zhl/G⌉−⌈xhl/G⌉
2
⌋.
(6.30)
We deﬁne a slack factor κ(κ > 1). The bit rate of the RS code at link l is then
given by zhl = xhl/(1 −2κpp
l ). The slack factor is a given system parameter.
A larger κ means a stronger protection for the information bits.
We use the power consumption model of RS codec proposed in [25]. The
power consumption cost in RS encoding is cRSE, and the power consumption
cost in RS decoding is cRSD. The power consumed by RS encoding at node i
is given by
pRSE
i
= cRSE X
l∈L
(a+
il
X
h∈V
xhl), ∀i ∈N.
(6.31)
The power consumed by RS decoding at node i is given by
pRSD
i
= cRSD X
l∈L
(a−
il
X
h∈V
xhl), ∀i ∈N.
(6.32)
The total power consumption at node i consists of video encoding power
consumption, RS encoding power consumption, transmission power consump-
tion, RS decoding power consumption, and reception power consumption, such
that
Pi
= Psi + P RSE
i
+ Pti + P RSD
i
+ Pri
= Psi + cRSE P
l∈L(a+
il
P
h∈V xhl) + P
l∈L a+
il(cs
l
P
h∈V zhl)+
cRSD P
l∈L(a−
il
P
h∈V xhl) + cr P
l∈L(a−
il
P
h∈V zhl)
= Psi + cRSE P
l∈L(a+
il
P
h∈V xhl) + P
l∈L a+
il(cs
l
P
h∈V
xhl
1−2κpp
l )+
cRSD P
l∈L(a−
il
P
h∈V xhl) + cr P
l∈L(a−
il
P
h∈V
xhl
1−2κpp
l ).
(6.33)
The network lifetime maximization problem with RS code for small-delay
WVSN applications is then modiﬁed from the optimization problem (6.15)
into:
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
177
minimize
(s,x,Ps,q)
P
i∈N q2
i + P
h∈V
P
l∈L δx2
hl + P
h∈V δs2
h
subject to
P
l∈L ailxhl = ηhi,
∀h ∈V, ∀i ∈N,
log(σ2/Dh)/(γP 2/3
sh ) ≤sh,
∀h ∈V,
Psi + cRSE P
l∈L(a+
il
P
h∈V xhl)+
P
l∈L a+
il(cs
l
P
h∈V
xhl
1−2κpp
l )+
cRSD P
l∈L(a−
il
P
h∈V xhl)+
cr P
l∈L(a−
il
P
h∈V
xhl
1−2κpp
l ) ≤qiBi,
∀i ∈N,
P
i∈N ailqi = 0,
∀l ∈L,
xhl ≥0,
∀h ∈V, ∀l ∈L,
qi > 0,
∀i ∈N,
sh ≥0,
∀h ∈V,
Psh ≥0,
∀h ∈V.
(6.34)
The network lifetime maximization problem with RS code in (6.34) repre-
sents a convex problem which can be solved using a fully distributed algorithm
via dual decomposition. The simulation results are presented below.
6.5.1.2
Simulation Results
We use the same model parameters shown in Table 6.1 and the error scenarios
described in Section 6.4.2. The RS encoding power consumption cost is cRSE =
8 × 10−5J/Mb, and the RS decoding power consumption cost is cRSD =
2.1 × 10−4J/Mb. The slack factor κ is set to 1.1.
Figure 6.6 shows the reduction of network lifetime due to the extra power
consumption at the RS coding and decoding. At the encoding distortion re-
quirement of 100, the maximum network lifetime in the lossless transmission
is 9.41 × 106 s. It is reduced by 9.6% at the average PLR of 7.2%, and 33.0%
at the average PLR of 26.4%.
In the lossy scenarios with FEC, the proposed optimized scheme performs
better than both the SOS and ROS. The comparison is demonstrated in Fig-
ure 6.7. The proposed scheme improves the network lifetime by 6.5%-7.7%
over the SOS, and 14.8% -15.1% over the ROS, when the encoding distortion
requirement is varied from 10 to 300. In Figure 6.7(b), we vary the PLR from
0 to 26.4%, the proposed scheme prolongs the network lifetime by 3.1%-25.1%
over the SOS, and 13.1%-16.1% over the ROS. The improvement comes from
the optimal power allocation in the source encoding, the RS encoding and
decoding, the transmission and the reception.
6.5.2
Without FEC
For small-delay WVSN applications, if no FEC is used, transmission errors will
cause decoding errors for the reconstructed video. This error may propagate
over subsequent video frames due to drifting error, which exists in popular
© 2014 by Taylor & Francis Group, LLC

178
Optimal Resource Allocation for Distributed Video Communications
0
50
100
150
200
250
300
4
5
6
7
8
9
10
11
12 x 10
6
Encoding distortion requirement
Maximum network lifetime [s]
Average PLR=0
Average PLR=0.072
Average PLR=0.134
Average PLR=0.264
FIGURE 6.6
Reduction of maximum network lifetime in small-delay WVSN applications
with FEC
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
179
0
50
100
150
200
250
300
5
5.5
6
6.5
7
7.5
8
8.5
9
9.5
10x10
6
Encodingdistortionrequirement
Maximumnetwork lifetime [s]
Source-and-RoutingOptimized (proposed)
Source-Optimized Scheme(SOS)
Routing-Optimized Scheme (ROS)
(a)
0
0.05
0.1
0.15
0.2
0.25
0.3
5
5.5
6
6.5
7
7.5
8
8.5
9
9.5x 10
6
Averagepacket loss rate
Maximumnetwork lifetime[s]
Source-and-Routing Optimized (proposed)
Source-Optimized Scheme (SOS)
Routing-OptimizedScheme (ROS)
(b)
FIGURE 6.7
Comparison of maximum network lifetime in small-delay WVSN applications
with FEC: (a) with diﬀerent encoding distortion requirement, and (b) with
diﬀerent average PLR
© 2014 by Taylor & Francis Group, LLC

180
Optimal Resource Allocation for Distributed Video Communications
video coding techniques using block-based motion compensation. The video
distortion caused by the transmission errors is called transmission distortion.
6.5.2.1
Transmission Distortion
The transmission distortion of each session depends on the end-to-end PLR.
First we formulate the end-to-end PLR for each session, based on the Markov
channel error model described in Section 6.2.2.
For session h, suppose there are Jh paths, labeled with jh = 1, ..., Jh, from
the video sensor h to the sink. Let F(jh) denote the set of the links in path jh.
Path jh transports a normalized portion bjh of the source traﬃc sh originating
from the video sensor h, Hence, b1 + b2+, ..., +bJh = 1. We deﬁne a binary
variable for each link l:
Qjh
l
=

1,
if l ∈F(jh),
0,
otherwise.
(6.35)
For path jh, the end-to-end PLR can be computed as
pE
jh = 1 −
Y
l∈L
(1 −Qjh
l pp
l ).
(6.36)
Typically, the PLR pp
l at each link is very small (e.g. pp
l ≪1). Thus, the end-
to-end packet loss rate at path jh can be approximated as pE
jh ≈P
l∈L(Qjh
l pp
l )
[26].
With multi-path routing, the traﬃc of session h is disseminated over Jh
paths. Therefore, the end-to-end PLR for session h is given by
pE
h =
X
jh
bjhpE
jh ≈
X
jh
bjh
X
l∈L
(Qjh
l pp
l ) =
X
l∈L
pp
l
X
jh
(bjhQjh
l ) = 1
sh
X
l∈L
pp
l xhl.
(6.37)
We use the transmission distortion model presented in [27]. The transmis-
sion distortion dth of session h is given by
dth = ψh
pE
h
1 −pE
h
Fh = ψh
1
sh
P
l∈L pp
l xhl
1 −
1
sh
P
l∈L pp
l xhl
Fh = ψhFh
P
l∈L pp
l xhl
sh −P
l∈L pp
l xhl
,
(6.38)
where ψh is the model parameter, and Fh is the time average of the frame
diﬀerence [27].
The total video distortion dh of session h consists of the encoding dis-
tortion dsh and the transmission distortion dth. The former study concluded
that the encoding distortion and transmission distortion are uncorrelated [27].
Therefore dh = dsh + dth, where dsh is given by Equation (6.8), and dth is
given by Equation (6.38).
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
181
7
8
9
10
11
12
x 10
6
0
50
100
150
200
250
300
350
400
450
500
Maximum network lifetime [s]
Average distortion
Average PLR=0
Average PLR=0.072
Average PLR=0.134
Average PLR=0.264
FIGURE 6.8
Tradeoﬀbetween the maximum network lifetime and the distortion in the
lossy transmission
6.5.2.2
Tradeoﬀbetween Maximum Network Lifetime and Video
Quality
We apply the distributed algorithm presented in Section 6.3 to the WVSN with
transmission errors. The total distortion consists of the encoding distortion
and the transmission distortion. Therefore, for the same network lifetime, the
total video distortion with transmission errors is larger than that without
transmission errors.
We present a simulation to evaluate the tradeoﬀs between the maximum
network lifetime and the video distortion. The same model parameters in Ta-
ble 6.1 are used in this simulation. The parameters of transmission distortion
model are set as: ψh = 0.8 and Fh = 200. As illustrated in Figure 6.8, the
maximum network lifetime is increased at the price of the video distortion. At
the same maximum lifetime, the packet errors introduce transmission distor-
tion causing a larger average distortion compared to the lossless case. At the
network lifetime of 9.41 × 106 s, we can receive a video at the distortion of
100 if there is no transmission error. The packet loss introduces transmission
distortion, which degrades the received video quality. If the PLR is 7.2%, the
distortion of the received video will be 123.8 under the same network lifetime
9.41 × 106 s. The distortion is increased to 263.4 if the PLR is increased to
26.4%.
© 2014 by Taylor & Francis Group, LLC

182
Optimal Resource Allocation for Distributed Video Communications
6
7
8
9
10
11
12
x 10
6
50
100
150
200
250
300
350
400
Maximum network lifetime [s]
Average distortion
Source−and−Routing Optimized
Source−Optimized Scheme (SOS)
Routing−Optimized Scheme (ROS)
FIGURE 6.9
Comparison of three schemes in the lossy transmission
In Figure 6.9, we compare the tradeoﬀbetween the network lifetime and
the distortion among the proposed scheme, the SOS, and the ROS. We can
observe that the tradeoﬀtrace in the proposed scheme is lower than those
in the SOS and ROS. For the same network lifetime, the proposed scheme
enables the sink to collect the video at a higher quality. In other words, the
proposed scheme extends the network lifetime subject to the same distortion
requirement.
6.6
Chapter Summary
In this chapter, we have studied the network lifetime maximization problem
in wireless visual sensor networks. First, we investigated the achievable maxi-
mum network lifetime in WVSN without transmission errors. Then, we further
examined the maximum network lifetime considering transmission errors. We
investigated the error remedy techniques in both large-delay WVSN appli-
cations and small-delay WVSN applications, and studied their impacts on
maximum network lifetime. We have derived distributed algorithms by using
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
183
dual decomposition to maximize the network lifetime by jointly optimizing
the source rates, the encoding powers, and the routing scheme.
Bibliography
[1] I. Akyildiz, W. Su, Y. Sankarasubramaniam, and E. Cayirci, “A survey
on sensor networks,” IEEE Communication Magazine, no. 8, pp. 102-114,
Aug. 2002.
[2] Z. He and D. Wu, “Resource allocation and performance analysis of wire-
less video sensors,” IEEE Transactions on Circuits and Systems for Video
Technology, vol. 16, no. 5, pp. 590-599, May 2006.
[3] J. H. Chang and L. Tassiulas, “Maximum lifetime routing in wireless sensor
networks,” IEEE/ACM Transactions on Networking, vol. 12, no. 4, pp.
609-619, Aug. 2004.
[4] R. Madan, S. Lall, “Distributed algorithms for maximum lifetime routing
in wireless sensor networks,” IEEE Transactions on Wireless Communi-
cations, vol. 5, no. 8, pp. 2185-2193, Aug. 2006.
[5] R. Madan, S. Cui, S. Lall, and A. Goldsmith, “Cross-layer design for life-
time maximization in interference-limited wireless sensor networks,” in
Proc. of IEEE INFOCOM, vol. 3, pp. 1964-1975, Mar. 2005.
[6] J. Zhu, K. Hung, B. Bensaou, and F. Abdesselam, “Tradeoﬀbetween net-
work lifetime and fair rate allocation in wireless sensor networks with
multi-path routing,” in Proc. of ACM MSWiM, pp. 301-308, Oct. 2006.
[7] H. Nama, M. Chiang, and N. Mandayam, “Utility-lifetime trade-oﬀin
self-regulating wireless sensor networks: A cross-layer design approach,”
in Proc. of IEEE ICC, vol. 8, pp. 3511-3516, Jun. 2006.
[8] Z. He and D. Wu, “Accumulative visual information in wireless video sen-
sor network: deﬁnition and analysis,” in Proc. of IEEE ICC, vol. 2, pp.
1205-1208, May 2005.
[9] Z. He and C. W. Chen, “From rate-distortion analysis to resource-
distortion analysis,” in Proc. of IEEE WIRELESSCOM, vol. 2, pp. 1527-
1532, Jun. 2005.
[10] S. W. Kim, “Cooperative relaying architecture for wireless video sensor
networks,” in Proc. of IEEE GLOBECOM, vol. 5, pp. 3053-3057, Nov.
2005.
© 2014 by Taylor & Francis Group, LLC

184
Optimal Resource Allocation for Distributed Video Communications
[11] M. Perillo and W. Heinzelman, “DAPR: a protocol for wireless sensor
networks utilizing an application-based routing cost,” in Proc. of IEEE
WCNC, vol. 3, pp. 1540-1545, Mar. 2004.
[12] S. Soro and W. Heinzelman, “On the coverage problem in video-based
wireless sensor networks,” in Proc. of International Conference on Broad-
band Networks, vol. 2, pp. 932-939, Oct. 2005.
[13] E. Gilbert, “Capacity of a burst-noise channel,” Bell Systems Technical
Journal, vol. 39, no. 9, pp. 1253-1265, Sep. 1960.
[14] S. Mao, Y. T. Hou, X. Cheng, H. D. Sherali, and S. F. Midkiﬀ, “Multipath
routing for multiple description video over wireless ad hoc networks,” in
Proc. of IEEE INFOCOM, pp. 740-750, Mar. 2005.
[15] H. Wu and A. Abouzeid, “Error robust image transmission in wireless
sensor networks,” in Proc. of the 5th Workshop on ASWN, Jun. 2005.
[16] Z. He, Y. Liang, L. Chen, I. Ahmad, and D.Wu, “Power-rate-distortion
analysis for wireless video communication under energy constraint,” IEEE
Transactions on Circuits and Systems for Video Technology, vol. 15, no.
5, pp. 645-658, May 2005.
[17] W. Heinzelman, A. Chandrakasan, and H. Balakrishnan, “An application-
speciﬁc protocol architecture for wireless microsensor networks,” IEEE
Transactions on Wireless Communications, vol. 1, no. 4, pp. 660-670, Oct.
2002.
[18] T. S. Rappaport, Wireless Communications: Principles and Practice, 2nd
edition, Prentice Hall, 2002.
[19] S. Boyd and L. Vandenberghe, Convex Optimization, Cambridge Univer-
sity Press, 2004.
[20] D. Palomar and M. Chiang, “A tutorial on decomposition methods and
distributed network resource allocation,” IEEE Journal on Selected Areas
in Communications, vol. 24, no. 8, pp. 1439-1451, Aug. 2006.
[21] D. P. Bertsekas, A. Nedic, and A. E. Ozdaglar, Convex Analysis and
Optimization, Athena Scientiﬁc, 2003.
[22] M. Busse, T. Haenselmann, T. King, and W. Eﬀelsberg, “The impact of
forward error correction on wireless sensor network performance,” in Proc.
of ACM RealWSN, May 2006.
[23] I. Reed and G. Solomon, “Polynomial codes over certain ﬁnite ﬁelds,”
SIAM Journal on Applied Mathematics, vol. 8, no. 2, pp. 300-304, 1960.
[24] H. Schulzrinne, S. Casner, R. Frederick, and V. Jacobson, “RTP: a trans-
port protocol for real-time applications,” RFC 3550, Internet Engineering
Task Force, Jul. 2003.
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Optimal Resource Allocation for Wireless Visual Sensor Networks
185
[25] S. Appadwedula, M. Goel, N. R. Shanbhag, D. L. Jones, and K. Ramchan-
dran, “Total system energy minimization for wireless image transmission,”
Journal of VLSI Signal Processing Systems, vol. 27, no. 1, pp. 99-117, Feb.
2001.
[26] Y. He, I. Lee, and L. Guan, “Optimized multi-path routing using dual
decomposition for wireless video streaming,” in Proc. of IEEE ISCAS, pp.
977-980, May 2007.
[27] Z. He, J. Cai, and C. W. Chen, “Joint source channel rate-distortion anal-
ysis for adaptive mode selection and rate control in wireless video coding,”
IEEE Transactions on Circuits and Systems for Video Technology, vol. 12,
no. 6, pp. 511-523, Jun. 2002.
[28] Y. He, I. Lee, and L. Guan, “Distributed algorithms for network lifetime
maximization in wireless visual sensor networks,” IEEE Transactions on
Circuits and Systems for Video Technology, vol. 19, no. 5, pp. 704-718,
May 2009.
© 2014 by Taylor & Francis Group, LLC

© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Index
A
Active channel-aware bandwidth
allocation approach (ACA),
6, 73
Automatic repeat request (ARQ),
139, 175
Automatic retransmission request
(ARQ), 25
base layer (BL), protection
levels, 31
bit rate, 33
delay-constrained, 26, 28
hybrid delay-constrained, 28–29,
30–31, 34
B
Base layer (BL), 17, 20, 21, 28, 33
Block of packets (BOP), 23
C
CDMA wireless ad hoc networks,
videocasting over
aggregate throughput,
maximizing, 140
distributed algorithms, 141–142
ﬁrst-layer variables, 142
overview, 139–140
second-layer decomposition,
142–145
simulation problem, 140–141
simulation results, 145, 150
Code division multiple access
(CDMA), 12, 36, 124
Common intermediate format (CIF),
61, 116, 167
Content delivery network (CDN)
startup delays, shortened, 51
video streaming, approach to,
50–51
D
Diﬀerentiated service (DiﬀServ), 18
Digital video
dominance of, 1
growth in use, 1
YouTube use, 1–2
Distortion and rate, relationship
between, 35
Distributed hash table (DHT), 91
Download bandwidth constraint, 7
E
Enhancement layers (ELs), 17, 20, 22
channel distortion, 32
error protections, 29
power consumption, 34
receiving power, 33
Error resilient entropy code (EREC)
bandwidth utilization, 23
ﬁxed-length packetization, 24
frame structure, 23–24
F
FDMA wireless ad hoc networks,
videocasting over
applications, 132
bandwidth eﬃciency, 132–133
Gaussian noise, 133
multicast link length, 136
simulation problem, 133–134
simulation solution, 134–135,
136, 138
Fine granularity scalable (FGS), 20
Flajolet-Martin (FM) sketch, 95–97
187
© 2014 by Taylor & Francis Group, LLC

188
Index
Foreman common intermediate
format, 167
Foreman QCIF sequencing, 138, 150
Forward error correction (FEC), 17,
21, 31, 163, 175, 177–179
bit rate, 33
hybrid, 25
real-time communications, 27
usage, 20–21
Frequency division multiple access
(FDMA), 12, 124, 132–134
G
Genetic algorithm (GA), 9, 10, 127
Guided seek, 7
H
Hybrid sketches, 92, 95–96
I
Independent and identically
distributed (IID) random
bit error channel, 160
Internet, 3
audiovisual streaming over, 18
congestion, 18–19
J
Joint optimization of source rate,
routing and power
(JOSRP), 140, 141
Joint source-channel coding (JSCC),
26, 35–36, 38
L
Lagrange dual function, 129, 134,
135, 141, 143
Lagrangian decomposition, 10
Lagrangian relaxation, 129
Linear programming (LP), 58, 62,
77, 78, 101, 128, 134
Link-forwarding constraint, 7
M
Markov chains, 125, 176
Mean absolute error (MAE), 106
Mean squared error (MSE), 37, 163
Medium access control (MAC), 160
Mobile data traﬃc, growth in, 2
Mobile station (MS), 35, 36, 38
Motion estimation (ME), 37, 38
Multimedia data
growth in use of, 1
types, 1
Multimedia Streaming TCP-friendly
Protocol (MSTFP), 19–20
Multiple Description Coding (MDC),
8–9, 139
Multiple-tree routing algorithms, 9
N
Naive bandwidth allocation approach
(NBA), 6, 73
Napster, 2
Network-aware power consumption
optimizer (NAPCO), 36
bit allocation, 37
power consumption, monitoring
and analysis of, 37
O
Optimal resource allocation. See
resource allocation, optimal
P
Packet drop probability (PDP), 8
Passive channel-aware bandwidth
allocation approach (PCA),
6, 73
Peak signal-to-noise ratio (PSNR),
62, 116, 130, 132, 136, 138,
150, 167
Peer-to-peer (P2P) networks
applications, 2
distortion-optimized
retransmission requests, 5
dynamics, peer, 52
growth in, 2
live, 4, 5–6, 50, 51–52
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Index
189
optimal resource allocation for,
4, 5–6, 6–8
origins, 2
tree-based, 51–52
video on demand; See video on
demand, peer-to-peer (P2P)
networks
video streaming, 3, 50, 51
view-upload decoupling (VUD),
6, 73
Personal digital assistants (PDAs), 3,
127, 132
Power control, 35, 36
Power-minimized rate allocation,
37–39
Power-rate relationships, 37–39
Power–rate–distortion (P–R–D)
analytical model, 161
Probabilistic counting with
stochastic averaging
(PCSA), 96
Probability density function (PDF),
7, 92
Progressive ﬁne granularity scalable
(PFGS), 20
decoder performance, 24
packetization, 23
residual loss probabilities of
layers, 22
Q
Quality of Experience (QoE), 18
Quality of Service (QoS), 17–18
distortion, requirement
regarding, 40
enforcement, 178
JSCC, relationship between, 35
power control, role of, 35
video bit streams, 25
R
Rate and distortion, relationship
between, 35
Rate compatible punctured
convolutional (RCPC), 26
Rate–Distortion (R–D) function, 20
Real-time transport
protocol/real-time
transport control protocol
(RTP/RTCP), 176
Reed–Solomon (RS) FEC code, 20
Regularization factor, 77
Remote control unit (RCU), 3
Resource allocation, optimal
distortion minimization, 30–32
overview, 4
P2P streaming, for, 4, 5–6, 6–8
video streaming over wireless ad
hoc networks, 8–10
wireless visual sensor networks,
for, 10–11
Resource allocation,
power-minimized, 32–34
Resource Reservation Protocol
(RSVP), 18
RINDY, 91
Round trip time (RTT), 19, 139
Routing optimized scheme (ROS),
167, 170, 172, 175
S
Scalable video coding (SVC), 17, 25
Signal-to-interference ratio (SIR), 36,
40
Signal-to-interference-and-noise ratio
(SINR), 125
Source rate constraint, 7
Steiner tree problems, 139
Substream allocation, layered P2P
multi-ﬁle system, 114–115
overview, 112
peer population, 115
simulation example, 116, 118
single-ﬁle system, 112–114
video quality, 115
T
TCP (transmission control protocol),
18
© 2014 by Taylor & Francis Group, LLC

190
Index
multimedia streams, relationship
between, 19
Third generation (3G) wireless, 24
network performance,
measurement of, 29
video transmission over, 25
U
Unequal Error Protection (UEP), 20
channel encoder, 36
dependency between layers, 32
hybrid, 26, 28–29
scalable video coding, 25
V
Video compression, 17
Video-on-demand (VoD), growth in,
2
Video-on-demand, peer-to-peer
(P2P) networks
bandwidth, 7, 51
buﬀer-forwarding distributed, 69
buﬀer-forwarding proportional,
69
buﬀered content, 53, 55–56
correlated channel systems, 72,
77–78, 79–80, 82–83
cross-channel resource sharing,
73
data stream, 95
destination segments, 110–111
distributed throughput
maximization, 54–56,
58–60, 61–62
forwarding approaches, 52–53,
55, 72
hybrid sketches; See hybrid
sketches
hybrid-forwarding centralized,
69
hybrid-forwarding distributed,
69
hybrid-forwarding systems,
65–66, 66–69
independent channels, streaming
capacity of, 74–77
live streaming, versus, 8, 51
optimized server upload scheme,
80
organization, 6
overview, 50–51
packet delivery, 55–56
packet transmission, 67
peak signal-to-noise ratio
(PSNR), 62, 116, 160, 167
peer dynamics, role of, 80, 111
prefetching optimization,
100–101
prefetching scheme, 99–101, 106,
109–110, 111
resource allocation, optimal, 4
RINDY; See RINDY
seeking delays, 100, 109–110
seeking pattern, 7
seeking, statistics aggregation
of, 93, 95, 97, 102–103,
103–104, 106
seeks, frequent, 90–91
seeks, guided, 92
seeks, random, 91
segment access probability, 97,
99
source rate, 6, 58
storage-forwarding constraints,
68
storage-forwarding distributed,
69
streaming capacity,
multi-channel systems,
72–73
substream allocation; See
substream allocation,
layered P2P
transmission sliding window, 56
video quality, 4
Video transmission, 17
Video, digital. See digital video
View-upload decoupling (VUD), 6,
73
© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

Index
191
W
Wide area network (WAN), 50
traﬃc, 51
Wideband Code Division Multiple
Access (W-CDMA), 36, 39
Wireless ad hoc networks
code division multiple access
(CDMA); See CDMA
wireless ad hoc networks,
videocasting over
description, 2–3, 123
frequency division multiple
access (FDMA); See FDMA
wireless ad hoc networks,
videocasting over
multicast video streaming over,
optimal, 9–10
network model, 125
packet loss model, 125–127
simulated, 130, 132
transmission error rates, 3
video distortion model, 124–125
video streaming over, optimal,
8–10
video unicasting, optimized,
127–130
Wireless Sensor Networks (WSNs), 2
accumulative visual information,
158–159
channel error models, 160–161
description, 3
distortion, 182
energy consumption, 158
large-delay applications,
171–172, 173
network graph models, 159–160
network lifetime maximization,
157, 158, 162–163, 163–165,
165–166, 167, 170
nodes, 159, 160
overview, 158
power consumptions models,
161–162
power–rate–distortion (P–R–D)
analytical model, 161
small-delay applications,
175–177, 180, 181–182
video quality, 181–182
video sensors, 158
Wireless visual sensor networks
(WVSNs)
constraints, 3–4
deﬁnition, 3
goals of, 11
optimal resource allocation for,
10–11
power consumption, 11
Y
YouTube, 1–2
© 2014 by Taylor & Francis Group, LLC

© 2014 by Taylor & Francis Group, LLC
www.ebook3000.com

