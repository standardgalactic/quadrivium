advertise-inactive

605
Chapter 34
Summary of BGP Configuration
Statements
The following sections explain each of the Border Gateway Protocol (BGP)
configuration statements. The statements are organized alphabetically.
advertise-inactive
Syntax
advertise-inactive;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Have BGP advertise the best route even if the routing table did not select it to be an
active route.
Usage Guidelines
See “Setting BGP to Advertise Inactive Routes” on page 595.
Required Privilege
Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
606

advertise-peer-as
advertise-peer-as
Syntax
advertise-peer-as;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Disable the default behavior of suppressing AS routes.
Usage Guidelines
See “Disabling Suppression of Route Advertisements” on page 596.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
aggregate-label
Syntax
aggregate-label {
community community-name;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name protocols bgp family inet-vpn labeled-unicast],
[edit protocols bgp family inet labeled-unicast],
[edit protocols bgp family inet-vpn labeled-unicast]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enables aggregate labels for VPN traffic.
Options
community community-name—Specify the name of the community to which to apply
the aggregate label.
Usage Guidelines
See “Configuring Aggregate Labels for VPNs” on page 560.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

allow

607
Chapter 34: Summary of BGP Configuration Statements
allow
Syntax
allow ([ network/mask-length ] | all);
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Implicitly configure BGP peers, allowing peer connections from any of the specified
networks or hosts. To configure multiple BGP peers, configure one or more
networks and hosts within a single allow statement or include multiple allow
statements.
Options
network/mask-length—IPv6 or IPv4 network number of a single address or a range
of allowable addresses for BGP peers, followed by the number of significant bits
in the subnet mask.
all—Allow all addresses, which is equivalent to 0.0.0.0/0 (or ::/0).
Usage Guidelines
See “Minimum BGP Configuration” on page 543 and “Defining BGP Groups and
Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
neighbor on page 640

JUNOS 8.2 Routing Protocols Configuration Guide
608

as-override
as-override
Syntax
as-override;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Compare the AS path of an incoming advertised route with the AS number of the
BGP peer under the group and replace all occurrences of the peer AS number in the
AS path with its own AS number before advertising the route to the peer.
Enabling the AS override feature allows routes originating from an AS to be
accepted by a router residing in the same AS. Without AS override enabled, the
router refuses the route advertisement once the AS path shows that the route
originated from its own AS. This is done by default to prevent route loops. The
as-override statement overrides this default behavior.
Note that enabling the AS override feature may result in routing loops. Use this
feature only for specific applications that require this type of behavior, and in
situations with strict network control. One application is the IGP protocol between
the provider edge router and the customer edge router in a virtual private network.
For more information, see the JUNOS MPLS Applications Configuration Guide.
Usage Guidelines
See “Defining BGP Groups and Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
NOTE: The as-override statement is specific to a particular BGP group. This
statement does not affect peers from the same remote AS configured in different
groups.

authentication-algorithm

609
Chapter 34: Summary of BGP Configuration Statements
authentication-algorithm
Syntax
authentication-algorithm algorithm;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced in JUNOS Release 8.0.
Description
Configure an MD5 authentication algorithm type.
Options
algorithm—Type of authentication algorithm. Specify either md5 or hmac-sha-1-96 as
the algorithm type.
Usage Guidelines
See “Configuring Authentication” on page 560.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
610

authentication-key
authentication-key
Syntax
authentication-key key;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure an MD5 authentication key (password). Neighboring routers use the same
password to verify the authenticity of BGP packets sent from this system.
Options
key—Authentication password. It can be up to 126 characters. Characters can
include any ASCII strings. If you include spaces, enclose all characters in
quotation marks (" ").
Usage Guidelines
See “Configuring Authentication” on page 560.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

authentication-key-chain

611
Chapter 34: Summary of BGP Configuration Statements
authentication-key-chain
Syntax
authentication-key-chain key-chain;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced in JUNOS Release 8.0.
Description
Apply and enable an authentication key chain to the router.
Options
key-chain—Authentication key chain name. It can be up to 126 characters.
Characters can include any ASCII strings. If you include spaces, enclose all
characters in quotation marks (" ").
Usage Guidelines
See “Configuring Authentication” on page 560.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
612

authentication-key-chains
authentication-key-chains
Syntax
authentication-key-chains {
key-chain key-chain-name {
key key {
secret secret-data;
start-time yyyy-mm-dd.hh:mm:ss;
}
}
}
Hierarchy Level
[edit security]
Release Information
Statement introduced in JUNOS Release 7.6.
Description
Configure authentication key updates for the Border Gateway Protocol
(BGP) and Label Distribution Protocol (LDP) routing protocols. When an
authentication-key-chain statement is configured at the [edit security] hierarchy level,
and associated with the BGP and LDP protocols at the [edit protocols] hierarchy
level, authentication key updates can occur without interrupting routing and
signaling protocols such as Open Shortest Path First (OSPF), and Resource
Reservation Setup Protocol (RSVP).
Options
key-chain—Key chain name. This name is also configured at the [edit protocols bgp]
or the [edit protocols ldp] hierarchy level to associate unique authentication key-chain
attributes with each protocol as specified using the following options:

key—Each key within a key chain is identified by a unique integer value.
Range: 0 through 255

secret—Each key must specify a secret in encrypted text or plain text
format. The secret always appears in encrypted format.

start-time—Start times are specified in UTC (Coordinated Universal
Time), and must be unique within the key chain.
Usage Guidelines
See “Configuring Authentication” on page 560.
Required Privilege Level
admin—To view this statement in the configuration.
admin-control—To add this statement to the configuration.

bfd-liveness-detection

613
Chapter 34: Summary of BGP Configuration Statements
bfd-liveness-detection
Syntax
bfd-liveness-detection {
detection-time {
threshold milliseconds;
}
minimum-interval milliseconds;
minimum-receive-interval milliseconds;
transmit-interval {
threshold milliseconds;
minimum-interval milliseconds;
}
multiplier number;
version (1 | automatic);
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name neighbor
neighbor-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor neighbor-name],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor neighbor-name],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name neighbor
neighbor-name]
Release Information
Statement introduced in JUNOS Release 8.1.
Description
Configure bidirectional failure detection timers.
Options
detection-time threshold milliseconds—Configure a threshold. When the BFD session
detection time adapts to a value greater than the threshold, a single trap and a
single syslog message are sent.
minimum-interval milliseconds—Configure the minimum transmit and receive
interval.
Range: 1 through 255,000
minimum-receive-interval milliseconds—Configure only the minimum receive interval.
Range: 1 through 255,000
minimum-interval milliseconds—Configure the minimum transmit interval.
Range: 1 through 255,000
multiplier number—Configure the detection time multiplier.
Range: 1 through 255
Default: 3
transmit-interval threshold milliseconds—Configure a threshold. When the BFD
session transmit interval adapts to a value greater than the threshold, a single
trap and a single syslog message are sent. The interval threshold must be
greater than the minimum transmit interval.
Range: 0 through 4,294,967,295

JUNOS 8.2 Routing Protocols Configuration Guide
614

bgp
transmit-interval minimum-interval milliseconds—Configure the minimum transmit
interval.
Range: 1 through 255,000
version—Configure the BFD version to detect.
Range: 0 (BFD version 0), 1 (BFD version 1), or automatic (autodetection)
Default: automatic
Usage Guidelines
See “Configuring the BFD Protocol” on page 275.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
bgp
Syntax
bgp { ... }
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit protocols],
[edit routing-instances routing-instance-name protocols]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enable BGP on the router or for a routing instance.
Default
BGP is disabled.
Usage Guidelines
See “Enabling BGP” on page 544.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

cluster

615
Chapter 34: Summary of BGP Configuration Statements
cluster
Syntax
cluster cluster-identifier;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the cluster identifier to be used by the route reflector cluster in an internal
BGP group.
Options
cluster-identifier—IPv6 or IPv4 address to use as the cluster identifier.
Usage Guidelines
See “Configuring Route Reflection” on page 575.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
no-client-reflect on page 643

JUNOS 8.2 Routing Protocols Configuration Guide
616

damping
damping
Syntax
damping;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enable route flap damping.
Default
Flap damping is disabled on the router.
Usage Guidelines
See “Enabling Route Flap Damping” on page 581 and the JUNOS Policy Framework
Configuration Guide.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

description

617
Chapter 34: Summary of BGP Configuration Statements
description
Syntax
description text-description;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Text description of the global, group, or neighbor configuration.
Options
text-description—Text description of the configuration. Limited to 126 characters.
Usage Guidelines
See “Defining BGP Global Properties” on page 545, “Defining Group Properties” on
page 550, and “Defining Peer Properties” on page 552.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
disable
Syntax
disable;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit protocols bgp],
[edit routing-instances routing-instance-name protocols bgp]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Disable BGP on the system.
Usage Guidelines
See “Defining BGP Global Properties” on page 545.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
618

explicit-null
explicit-null
Syntax
explicit-null;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name family inet
labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit protocols bgp family inet labeled-unicast],
[edit protocols bgp group group-name family inet labeled-unicast],
[edit protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name family
inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family inet labeled-unicast]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Advertise label 0 to the egress router of an LSP.
Default
If you do not include the explicit-null statement in the configuration, label 3 (implicit
null) is advertised.
Usage Guidelines
See “Advertising an Explicit Null Label” on page 559.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

export

619
Chapter 34: Summary of BGP Configuration Statements
export
Syntax
export [ policy--names ];
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Apply one or more policies to routes being exported from the routing table into BGP.
Options
policy--names—Name of one or more policies.
Usage Guidelines
See “Configuring BGP Routing Policy” on page 594 and the JUNOS Policy Framework
Configuration Guide.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
import on page 627 and the JUNOS Policy Framework Configuration Guide.

JUNOS 8.2 Routing Protocols Configuration Guide
620

family
family
Syntax
family {
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn) {
(any | multicast | unicast | signaling) {
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
rib-group group-name;
}
flow {
no-validate policy-name;
}
labeled-unicast {
aggregate-label {
community community-name;
}
explicit-null {
connected-only;
}
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
resolve-vpn;
rib inet.3;
rib-group group-name;
}
}
route-target {
advertise-default;
external-paths number;
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
}
}

family

621
Chapter 34: Summary of BGP Configuration Statements
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enable multiprotocol BGP (MBGP) by configuring BGP to carry network layer
reachability information (NLRI) for address families other than unicast IPv4, to
specify MBGP to carry NLRI for the IPv6 address family, or to carry NLRI for VPNs.
Options
any—Configure the family type to be both unicast and multicast.
labeled-unicast—Configure the family type to be labeled-unicast. This means that
the BGP peers are being used only to carry the unicast routes that are being
used by labeled-unicast for resolving the labeled-unicast routes.
multicast—Configure the family type to be multicast. This means that the BGP peers
are being used only to carry the unicast routes that are being used by multicast
for resolving the multicast routes.
unicast—Configure the family type to be unicast. This means that the BGP peers
only carry the unicast routes that are being used for unicast forwarding
purposes.
Default: unicast
The remaining statements are explained separately.
Usage Guidelines
See “Enabling Multiprotocol BGP” on page 581.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
622

flow
flow
Syntax
flow {
no-validate policy-name;
}
Hierarchy Level
[edit protocols bgp group group-name family (inet | inet-vpn)],
[edit protocols bgp group group-name neighbor address
family (inet | inet-vpn)],
[edit routing-instances routing-instance-name protocols bgp group group-name family
(inet | inet-vpn)],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family (inet | inet-vpn)]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enables BGP to support flow routes.
Options
The statements are explained separately.
Usage Guidelines
See “Enabling BGP to Carry Flow-Specific Routes” on page 585.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
NOTE: This statement is supported for the default instance, VRF instance, and
virtual-router instance only. It is configured with the instance-type statement at the
[edit routing-instance instance-name hierarchy level. For VPNs, this statement is
supported for the default instance only.

graceful-restart

623
Chapter 34: Summary of BGP Configuration Statements
graceful-restart
Syntax
graceful-restart {
disable;
restart-time seconds;
stale-routes-time seconds;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure graceful restart for BGP.
Options
disable—Disables graceful restart for BGP.
seconds—Time period when the restart is expected to be complete.
Range: 1 through 600 seconds
seconds—Maximum time that stale routes are kept during restart.
Range: 1 through 600 seconds
Usage Guidelines
See “Configuring Graceful Restart” on page 114 and “Configuring Graceful Restart”
on page 559.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
624

group
group
Syntax
group group-name {
advertise-inactive;
 [ network/mask-length ];
authentication-key key;
cluster cluster-identifier;
damping;
description text-description;
export [ policy-names ];
family {
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn) {
(any | multicast | unicast | signaling) {
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
rib-group group-name;
}
flow {
no-validate policy-name;
}
labeled-unicast {
explicit-null {
connected-only;
}
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
resolve-vpn;
rib inet.3;
rib-group group-name;
}
}
route-target {
advertise-default;
external-paths number;
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
}
}
hold-time seconds;
import [ policy-names ];
ipsec-sa ipsec-sa;
keep (all | none);
local-address address;
local-as autonomous-system <private>;
local-preference local-preference;
log-updown;
metric-out metric;
multihop <ttl-value>;

group

625
Chapter 34: Summary of BGP Configuration Statements
multipath {
multiple-as;
}
no-aggregator-id;
no-client-reflect;
out-delay seconds;
passive;
peer-as autonomous-system;
preference preference;
protocol protocol;
remove-private;
tcp-mss segment-size;
traceoptions {
file name <replace> <size size> <files number> <no-stamp>
<(world-readable | no-world-readable)>;
flag flag <flag-modifier> <disable>;
}
type type;
neighbor address {
numerous peer-specific options;
}
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit protocols bgp],
[edit routing-instances routing-instance-name protocols bgp]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Define a BGP peer group. BGP peer groups share a common type, peer autonomous
system (AS) number, and cluster ID, if present. To configure multiple BGP groups,
include multiple group statements.
By default, the group’s options are identical to the global BGP options. To override
the global options, include group-specific options within the group statement.
The group statement is one of the statements you must include in the configuration
to run BGP on the router. See “Minimum BGP Configuration” on page 543.
Options
group-name—Name of the BGP group.
The remaining statements within the group statement are explained separately.
Usage Guidelines
See “Defining BGP Groups and Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
626

hold-time
hold-time
Syntax
hold-time seconds;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Hold-time value to use when negotiating a connection with the peer. The hold-time
value is advertised in open packets and indicates to the peer the length of time that
it should consider the sender valid. If the peer does not receive a keepalive, update,
or notification message within the specified hold time, the BGP connection to the
peer is closed and routers through that peer become unavailable.
The hold time is three times the interval at which keepalive messages are sent.
Options
seconds—Hold time.
Range: 20 through 65,535 seconds
Default: 90 seconds
Usage Guidelines
See “Modifying the Hold-Time Value” on page 558.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

import

627
Chapter 34: Summary of BGP Configuration Statements
import
Syntax
import [ policy--names ];
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Apply one or more routing policies to routes being imported into the JUNOS routing
table from BGP.
Options
policy-names—Name of one or more policies.
Usage Guidelines
See “Configuring BGP Routing Policy” on page 594 and the JUNOS Policy Framework
Configuration Guide.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
export on page 619 and the JUNOS Policy Framework Configuration Guide
include-mp-next-hop
Syntax
include-mp-next-hop;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit protocols bgp]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enable multiprotocol updates to contain next-hop reachability information.
Usage Guidelines
See “Enabling Next-Hop Reachability Information” on page 600.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
628

ipsec-sa
ipsec-sa
Syntax
ipsec-sa ipsec-sa;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Apply a security association to BGP peers. You can apply the security association
globally for all BGP peers, to a group of peers, or to an individual peer.
Options
ipsec-sa—Security association name.
Usage Guidelines
See “Applying IPSec Security Association” on page 562.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

iso-vpn

629
Chapter 34: Summary of BGP Configuration Statements
iso-vpn
Syntax
iso-vpn {
unicast }
prefix-limit number;
rib-group group-name;
}
}
Hierarchy Level
[edit protocols bgp family],
[edit protocols bgp group group-name family],
[edit protocols bgp group group-name neighbor address family],
[edit routing-instances routing-instance-name protocols bgp family],
[edit routing-instances routing-instance-name protocols bgp group group-name family],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Enable BGP to carry ISO VPN NLRI messages between PE routes connecting a VPN.
Options
The statements are explained separately in this chapter.
Default
Disabled.
Usage Guidelines
See “Enabling BGP to Carry Connectionless Network Services Routes” on page 586
and the J-series Services Router Advanced WAN Access Configuration Guide.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
NOTE: CLNS is supported for the J-series Services Router only.

JUNOS 8.2 Routing Protocols Configuration Guide
630

keep
keep
Syntax
keep (all | none);
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify whether routes learned from a BGP peer are retained in the routing table
even if they contain an AS number that was exported from the local AS.
Default
If you do not include this statement, most routes are retained in the routing table.
Options
all—Retain all routes.
none—Retain none of the routes. When keep none is configured for the BGP session
and the inbound policy changes, the JUNOS software forces readvertisement of
the full set of routes advertised by the peer.
Usage Guidelines
See “Configuring How Often BGP Exchanges Routes with the Routing Table” on
page 595.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

labeled-unicast

631
Chapter 34: Summary of BGP Configuration Statements
labeled-unicast
Syntax
labeled-unicast {
aggregate-label {
community community-name;
}
explicit-null {
connected-only;
}
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | timeout-in-minutes)>;
}
resolve-vpn;
rib inet.3;
rib-group group-name;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit logical-routers logical-router-name protocols bgp group group-name family
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address
family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit protocols bgp family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit protocols bgp group group-name family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit protocols bgp group group-name neighbor address
family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit routing-instances routing-instance-name protocols bgp family
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit routing-instances routing-instance-name protocols bgp group group-name family
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family (inet | inet6 | inet-vpn | inet6-vpn | l2-vpn)]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure the family type to be labeled-unicast.
Options
The statements are explained separately.
Usage Guidelines
See “Enabling Multiprotocol BGP” on page 581.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
632

local-address
local-address
Syntax
local-address address;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the address of the local end of a BGP session. This address is used to accept
incoming connections to the peer and to establish connections to the remote peer.
When none of the operational interfaces are configured with the specified local
address, a session with a BGP peer is placed in the idle state.
Default
If you do not configure a local address, BGP uses the router’s source address
selection rules to set the local address. For more information, see the JUNOS
Network Interfaces Configuration Guide.
Options
address—IPv6 or IPv4 address of the local end of the connection.
Usage Guidelines
See “Assigning a BGP Identifier” on page 545.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
router-id on page 176

local-as

633
Chapter 34: Summary of BGP Configuration Statements
local-as
Syntax
local-as autonomous-system <private>;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Set the local AS number.
Options
autonomous-system—AS number.
private—(Optional) Hide the local AS in paths learned from this peering.
Usage Guidelines
See “Configuring a Local AS” on page 571.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
local-interface
Syntax
local-interface interface-name;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor ipv6-link-local-address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor ipv6-link-local-address],
[edit protocols bgp group group-name neighbor ipv6-link-local-address],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor ipv6-link-local-address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the interface name of the peer for IPv6 peering using link-local addresses.
This peer is link-local in scope.
Options
interface-name—Interface name of the EBGP IPv6 peer.
Usage Guidelines
See “Configuring EBGP Peering Using IPv6 Link-local Address” on page 597.

JUNOS 8.2 Routing Protocols Configuration Guide
634

local-preference
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
local-preference
Syntax
local-preference local-preference;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Modify the value of the LOCAL_PREF path attribute, which is a metric used by
internal BGP sessions to indicate the degree of preference for an external route. The
route with the highest local preference value is preferred.
The LOCAL_PREF path attribute always is advertised to internal BGP peers and to
neighboring confederations. It is never advertised to external BGP peers.
Default
If you omit this statement, the LOCAL_PREF path attribute, if present, is not
modified.
Options
local-preference—Preference to assign to routes learned from BGP or from the group
or peer.
Range: 0 through 4,294,967,295 (232 –1)
Default: If the LOCAL_PREF path attribute is present, do not modify its value. If a
BGP route is received without a LOCAL_PREF attribute, the route is handled
locally (it is stored in the routing table and advertised by BGP) as if it were
received with a LOCAL_PREF value of 100. By default, non-BGP routes that are
advertised by BGP are advertised with a LOCAL_PREF value of 100.
Usage Guidelines
See “Configuring the BGP Local Preference” on page 567.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
preference on page 649

log-updown

635
Chapter 34: Summary of BGP Configuration Statements
log-updown
Syntax
log-updown;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Log a message whenever a BGP peer makes a state transition. Messages are logged
using the system logging mechanism located at the [edit system syslog] hierarchy
level.
Usage Guidelines
See “Configuring BGP to Log System Log Messages” on page 599 and the JUNOS
System Basics Configuration Guide.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
traceoptions on page 658

JUNOS 8.2 Routing Protocols Configuration Guide
636

metric-out
metric-out
Syntax
metric-out (metric | minimum-igp <offset>| igp <offset>);
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Metric for all routes sent using the multiple exit discriminator (MED, or
MULTI_EXIT_DISC) path attribute in update messages. This path attribute is used to
discriminate among multiple exit points to a neighboring AS. If all other factors are
equal, the exit point with the lowest metric is preferred.
You can specify a constant metric value by including the metric option. For
configurations in which a BGP peer sends third-party next hops that require the
local system to perform next-hop resolution—IBGP configurations, configurations
within confederation peers, or EBGP configurations that include the multihop
command—you can specify a variable metric by including the minimum-igp or igp
option.
You can increase or decrease the variable metric calculated from the IGP metric
(either from the igp or igp-minimum statement) by specifying a value for <offset>.
The metric is increased by specifying a positive value for <offset>, and decreased by
specifying a negative value for <offset>.
Options
igp—Set the metric to the most recent metric value calculated in the IGP to get to
the BGP next hop.
metric—Primary metric on all routes sent to peers.
Range: 0 through 4,294,967,295 (232 –1)
Default: No metric is sent.
minimum-igp—Set the metric to the minimum metric value calculated in the IGP to
get to the BGP next hop. If a newly calculated metric is greater than the
minimum metric value, the metric value remains unchanged. If a newly
calculated metric is lower, the metric value is lowered to that value.

mtu-discovery

637
Chapter 34: Summary of BGP Configuration Statements
offset—(Optional) Increases or decreases the metric by this value.
Range: –231 through 231 –1
Default: No default.
Usage Guidelines
See “Configuring the Multiple Exit Discriminator Metric” on page 563.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
mtu-discovery
Syntax
mtu-discovery;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure TCP path MTU discovery. MTU discovery improves convergence times for
internal BGP sessions.
Usage Guidelines
See “Configuring MTU Discovery” on page 558.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
638

multihop
multihop
Syntax
multihop {
<ttl-value>;
no-nexthop-change;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure an EBGP multihop session.
External confederation peering is a special case that allows unconnected third-party
next hops. You do not need to configure multihop sessions explicitly in this
particular case; multihop behavior is implied.
If you have confederation external BGP peer-to-loopback addresses, you still need
the multihop configuration.
Default
If you omit this statement, all EBGP peers are assumed to be directly connected
(that is, you are establishing a nonmultihop, or “regular”, BGP session), and the
default time-to-live (TTL) value is 1.
Options
ttl-value—Configure the maximum TTL value for the TTL in the IP header of BGP
packets.
Range: 1 through 255
Default: 64 (for multihop EBGP sessions, confederations, and internal BGP sessions)
no-nexthop-change—Specify not to change the BGP next-hop value; for route
advertisements, specify the no-nexthop-self option.
Usage Guidelines
See “Configuring an EBGP Multihop Session” on page 567.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

multipath

639
Chapter 34: Summary of BGP Configuration Statements
multipath
Syntax
multipath {
multiple-as;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Allow load sharing among multiple EBGP paths and multiple IBGP paths.
Options
multiple-as—Disable the default check requiring that paths accepted by BGP
multipath must have the same neighboring AS.
Usage Guidelines
See “Configuring BGP to Select Multiple BGP Paths” on page 571.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
640

neighbor
neighbor
Syntax
neighbor address {
advertise-inactive;
authentication-key key;
cluster cluster-identifier;
damping;
description text-description;
export [ policy-names ];
family {
(inet | inet6 | inet-vpn | inet6-vpn | l2-vpn) {
(any | multicast | unicast | signaling) {
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
rib-group routing-table-group-name;
}
flow {
no-validate policy-name;
}
labeled-unicast {
explicit-null {
connected-only;
}
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
resolve-vpn;
rib inet.3;
rib-group routing-table-group-name;
}
}
route-target {
advertise-default;
external-paths number;
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
}
}
hold-time seconds;
import [ policy-names ];
ipsec-sa ipsec-sa;
keep (all | none);
local-address address;
local-as autonomous-system <private>;
local-interface interface-name;
local-preference preference;
log-updown;
metric-out metric;
multihop <ttl-value>;

neighbor

641
Chapter 34: Summary of BGP Configuration Statements
multipath {
multiple-as;
}
no-aggregator-id;
no-client-reflect;
out-delay seconds;
passive;
peer-as autonomous-system;
preference preference;
tcp-mss segment-size;
traceoptions {
file name <replace> <size size> <files number> <no-stamp>
<(world-readable | no-world-readable)>;
flag flag <flag-modifier> <disable>;
}
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Explicitly configure a neighbor (peer). To configure multiple BGP peers, include
multiple neighbor statements.
By default, the peer’s options are identical to those of the group. You can override
these options by including peer-specific option statements within the neighbor
statement.
The neighbor statement is one of the statements you can include in the
configuration to define a minimal BGP configuration on the router. (You can include
an allow all statement in place of a neighbor statement.)
Options
address—IPv6 or IPv4 address of a single peer.
The remaining statements are explained separately.
Usage Guidelines
See “Minimum BGP Configuration” on page 543 and “Defining BGP Groups and
Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
642

no-advertise-peer-as
no-advertise-peer-as
See
advertise-peer-as on page 606
no-aggregator-id
Syntax
no-aggregator-id;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Set the router ID in the BGP aggregator path attribute to zero. (This is one of the
path attributes included in BGP update messages.) Doing this prevents different
routers within an AS from creating aggregate routes that contain different AS paths.
Default
If you omit this statement, the router ID is included in the BGP aggregator path
attribute.
Usage Guidelines
See “Update Messages” on page 540 and “Controlling the Aggregator Path
Attribute” on page 566.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

no-client-reflect

643
Chapter 34: Summary of BGP Configuration Statements
no-client-reflect
Syntax
no-client-reflect;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Disable intracluster route redistribution by the system acting as the route reflector.
Include this statement when the client cluster is fully meshed to prevent the
sending of redundant route advertisements.
Usage Guidelines
See “Configuring Route Reflection” on page 575.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
cluster on page 615

JUNOS 8.2 Routing Protocols Configuration Guide
644

no-validate
no-validate
Syntax
no-validate policy-name;
Hierarchy Level
[edit protocols bgp group group-name family (inet | inetflow)],
[edit protocols bgp group group-name neighbor address
family (inet | inetflow)],
[edit routing-instances routing-instance-name protocols bgp group group-name family
 (inet | inetflow)],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family (inet | inetflow)]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Allows you to skip the flow route validation procedure after packets are accepted by
a policy.
Options
policy-name—Import policy to match NLRI messages.
Usage Guidelines
See “Enabling BGP to Carry Flow-Specific Routes” on page 585.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

out-delay

645
Chapter 34: Summary of BGP Configuration Statements
out-delay
Syntax
out-delay seconds;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify how long a route must be present in the JUNOS routing table before it is
exported to BGP. Use this time delay to help bundle routing updates.
Default
If you omit this statement, routes are exported to BGP immediately after they have
been added to the routing table.
Options
seconds—Output delay time.
Range: 0 through 65,535 seconds
Default: 0 seconds
Usage Guidelines
See “Configuring How Often BGP Exchanges Routes with the Routing Table” on
page 595.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
646

passive
passive
Syntax
passive;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Do not send active open messages to the peer. Rather, wait for the peer to issue an
open request.
Default
If you omit this statement, all explicitly configured peers are active, and each peer
periodically sends open requests until its peer responds.
Usage Guidelines
See “Opening a Peer Connection Passively” on page 562.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

path-selection

647
Chapter 34: Summary of BGP Configuration Statements
path-selection
Syntax
path-selection {
(cisco-non-deterministic | always-compare-med | external-router-id);
med-plus-igp {
igp-multiplier number;
med-multiplier number;
}
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit protocols bgp],
[edit routing-instances routing-instance-name protocols bgp]
Release Information
Statement introduced before JUNOS Release 7.4.
med-plus-igp option introduced in JUNOS Release 8.1.
Description
Configure BGP path selection.
Default
If the path-selection statement is not included in the configuration, only the MEDs of
routes that have the same peer ASs are compared.
Options
cisco-non-deterministic—Configure routing table path selection so that it is
performed using the same nondeterministic behavior as the Cisco IOS
software. The active path is always first. All inactive, but eligible, paths follow
the active path and are maintained in the order in which they were received,
with the most recent path first. Ineligible paths remain at the end of the list.
always-compare-med—Always compare MEDs whether or not the peer ASs of the
compared routes are the same.
external-router-id—Compare the router ID between external BGP paths to determine
the active path.
med-plus-igp—Add the IGP cost to the next-hop destination to the MED before
comparing MED values for path selection.
igp-multiplier number—The multiplier value for the IGP cost to a next-hop address.
Range: 1 through 1000
Default: None
med-multiplier number—The multiplier value for the MED calculation.
Range: 1 through 1000
Default: None
Usage Guidelines
See “Configuring Routing Table Path Selection” on page 569.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
NOTE: We recommend that you configure the always-compare-med option.

JUNOS 8.2 Routing Protocols Configuration Guide
648

peer-as
peer-as
Syntax
peer-as autonomous-system;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the neighbor (peer) AS number.
Options
autonomous-system—AS number.
Usage Guidelines
See “Defining BGP Groups and Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

preference

649
Chapter 34: Summary of BGP Configuration Statements
preference
Syntax
preference preference;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the preference for routes learned from BGP.
At the BGP global level, the preference statement sets the preference for routes
learned from BGP. You can override this preference in a BGP group or peer
preference statement.
At the group or peer level, the preference statement sets the preference for routes
learned from the group or peer. Use this statement to override the preference set in
the BGP global preference statement when you want to favor routes from one group
or peer over those of another.
Options
preference—Preference to assign to routes learned from BGP or from the group or
peer.
Range: 0 through 4,294,967,295 (232 –1)
Default: 170 for the primary preference
Usage Guidelines
See “Controlling Route Preference” on page 568.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
local-preference on page 634

JUNOS 8.2 Routing Protocols Configuration Guide
650

prefix-limit
prefix-limit
Syntax
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | timeout-in-minutes)>;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet
(any | labeled-unicast | multicast | unicast)],
[edit logical-routers logical-router-name protocols bgp group group-name family
inet (any | labeled-unicast | multicast | unicast)],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family inet (any | labeled-unicast | multicast | unicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family inet (any | labeled-unicast | multicast | unicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family inet
(any | labeled-unicast | multicast | unicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address
family inet (any | labeled-unicast | multicast | unicast)],
[edit protocols bgp family inet (any | labeled-unicast | multicast | unicast)],
[edit protocols bgp group group-name family inet
(any | labeled-unicast | multicast | unicast)],
[edit protocols bgp group group-name neighbor address
family inet (any | labeled-unicast | multicast | unicast)],
[edit routing-instances routing-instance-name protocols bgp family inet
(any | labeled-unicast | multicast | unicast)],
[edit routing-instances routing-instance-name protocols bgp group group-name family
inet (any | labeled-unicast | multicast | unicast)],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family inet (any | labeled-unicast | multicast | unicast)]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Limit the number of prefixes received on a BGP peering and a rate-limit logging
when injected prefixes exceed a set limit.
Options
maximum number—When you set the maximum number of prefixes, a message is
logged when that number is reached.
Range: 1 through 4,294,967,295
teardown <percentage>—If you include the teardown statement, the session is torn
down when the maximum number of prefixes is reached. If you specify a
percentage, messages are logged when the number of prefixes reaches that
percentage. Once the session is torn down, it will reestablish in a short time
unless you include the idle-timeout statement. Then the session can be kept
down for a specified amount of time, or forever. If you specify forever, the
session is reestablished only after you issue a clear bgp neighbor command.
Range: 0 through 100

protocol

651
Chapter 34: Summary of BGP Configuration Statements
idle-timeout (forever | timeout-in-minutes)—If you include the idle-timeout statement,
the session is torn down for a specified amount of time, or forever. If you
specify a period of time, the session is allowed to reestablish after this timeout
period. If you specify forever, the session is reestablished only after you
intervene with a clear bgp neighbor command.
Range: 0 through 2400
Usage Guidelines
See “Enabling Multiprotocol BGP” on page 581.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
protocol
Syntax
protocol protocol;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the interior gateway protocol (IGP) that BGP should use to resolve the next
hop for BGP routes.
Default
If you do not include this statement, BGP uses all active routes when resolving next
hops.
Options
protocol—Protocol name. It can be isis or ospf.
Usage Guidelines
See “Choosing the Protocol Used to Determine the Next Hop” on page 567.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
652

remove-private
remove-private
Syntax
remove-private;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
When advertising AS paths to remote systems, have the local system strip private
AS numbers from the AS path. The numbers are stripped from the AS path starting
at the left end of the AS path (the end where AS paths have been most recently
added). The router stops searching for private ASs when it finds the first non-private
AS. This operation takes place after any confederation member ASs have already
been removed from the AS path, if applicable.
The software recognizes the set of AS numbers that is considered private, a range
that is defined in the Internet Assigned Numbers Authority (IANA) assigned
numbers document.
The set of reserved AS numbers is in the range from 64,512 through 65,535.
Usage Guidelines
See “Removing Private AS Numbers from AS Paths” on page 574.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

resolve-vpn

653
Chapter 34: Summary of BGP Configuration Statements
resolve-vpn
Syntax
resolve-vpn;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name family inet
labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit protocols bgp family inet labeled-unicast],
[edit protocols bgp group group-name family inet labeled-unicast],
[edit protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name family
inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family inet labeled-unicast]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Allow labeled routes to be placed in the inet.3 routing table for route resolution.
These routes are then resolved for PE router connections where the remote PE is
located across another AS. For a PE router to install a route in the VRF, the next hop
must resolve to a route stored within the inet.3 table.
Usage Guidelines
See “Enabling Multiprotocol BGP” on page 581.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
654

rib
rib
Syntax
rib inet.3;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name family inet
labeled-unicast],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family inet labeled-unicast],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit protocols bgp family inet labeled-unicast],
[edit protocols bgp group group-name family inet labeled-unicast],
[edit protocols bgp group group-name neighbor address family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp family inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name family
inet labeled-unicast],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family inet labeled-unicast]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
You can allow both labeled and unlabeled routes to be exchanged in a single
session. The labeled routes are placed in the inet.3 routing table, and both labeled
and unlabeled unicast routes can be sent or received by the router.
Options
inet.3—Name of the routing table.
Usage Guidelines
See “Enabling Multiprotocol BGP” on page 581.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

rib-group

655
Chapter 34: Summary of BGP Configuration Statements
rib-group
Syntax
rib-group group-name;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp family inet
(any | labeled-unicast | unicast |multicast)],
[edit logical-routers logical-router-name protocols bgp group group-name family inet
( any | labeled-unicast | unicast | multicast)],
[edit logical-routers logical-router-name protocols bgp group group-name neighbor
address family inet ( any | labeled-unicast | unicast | multicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp family inet (any | labeled-unicast | unicast | multicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family inet ( any | labeled-unicast |
unicast | multicast)],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address family inet
( any | labeled-unicast | unicast | multicast)],
[edit protocols bgp family inet (any | labeled-unicast | unicast | multicast)],
[edit protocols bgp group group-name family inet ( any | labeled-unicast | unicast |
multicast)],
[edit protocols bgp group group-name neighbor address
family inet ( any | labeled-unicast | unicast | multicast)],
[edit routing-instances routing-instance-name protocols bgp family inet
(any | labeled-unicast | unicast | multicast)],
[edit routing-instances routing-instance-name protocols bgp group group-name family
inet ( any | labeled-unicast | unicast | multicast)],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family inet ( any | labeled-unicast | unicast | multicast)]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Add unicast prefixes to unicast and multicast tables.
Options
group-name—Name of the routing table group. The name must start with a letter
and can include letters, numbers, and hyphens. You generally specify only one
routing table group.
Usage Guidelines
See “Creating Routing Table Groups” on page 104, “Configuring How Interface
Routes Are Imported into Routing Tables” on page 105, and “Configuring BGP
Routing Table Groups” on page 584.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
See Also
interface-routes on page 154, rib-group on page 173

JUNOS 8.2 Routing Protocols Configuration Guide
656

route-target
route-target
Syntax
route-target {
advertise-default;
external-paths number;
prefix-limit {
maximum number;
teardown <percentage> <idle-timeout (forever | time-in-minutes)>;
}
}
Hierarchy Level
[edit logical router logical-router-name protocols bgp family],
[edit logical-routers logical-router-name protocols bgp group group-name family],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address family],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name family],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address family],
[edit protocols bgp family],
[edit protocols bgp group group-name family],
[edit protocols bgp group group-name neighbor address family],
[edit routing-instances routing-instance-name protocols bgp group group-name family],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address family]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Limit the number of prefixes advertised on BGP peerings specifically to the peers
that need the updates.
Options
advertise-default—Advertise default routes and suppress more specific routes.
external-paths number—Number of external paths accepted for route filtering.
Range: 1 through 16 paths
Default: 1 path
The remaining statements are explained separately.
Usage Guidelines
See “Enabling Route Target Filtering” on page 592.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

tcp-mss

657
Chapter 34: Summary of BGP Configuration Statements
tcp-mss
Syntax
tcp-mss segment-size;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group
group-name],
[edit logical-routers logical-router-name protocols bgp group
group-name neighbor neighbor-name],
[edit logical-routers logical-router-name routing-instances
routing-instance-name protocols bgp],
[edit logical-routers logical-router-name routing-instances
routing-instance-name protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances
routing-instance-name protocols bgp group group-name neighbor
neighbor-name],
[edit protocols bgp],
[edit protocol bgp group group-name],
[edit protocols bgp group group-name neighbor neighbor-name],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group
group-name],
[edit routing-instances routing-instance-name protocols bgp group
group-name neighbor neighbor-name]
Release Information
Statement introduced in JUNOS Release 8.1.
Description
Configure the maximum segment size (MSS) for the TCP connection for BGP
neighbors.
Usage Guidelines
See“Configuring the Segment Size for TCP” on page 602.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
658

traceoptions
traceoptions
Syntax
traceoptions {
file name <replace> <size size> <files number> <no-stamp>
<(world-readable | no-world-readable)>;
flag flag <flag-modifier> <disable>;
}
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address],
[edit routing-instances routing-instance-name protocols bgp],
[edit routing-instances routing-instance-name protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name
neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Configure BGP protocol-level tracing options.
To specify more than one tracing operation, include multiple flag statements.
Default
The default BGP protocol-level tracing options are inherited from the routing
protocols traceoptions statement included at the [edit routing-options] hierarchy
level. The default group-level trace options are inherited from the BGP protocol-level
traceoptions statement. The default peer-level trace options are inherited from the
group-level traceoptions statement.
Options
disable—(Optional) Disable the tracing operation. You can use this option is to
disable a single operation when you have defined a broad group of tracing
operations, such as all.
file name—Name of the file to receive the output of the tracing operation. Enclose
the name within quotation marks. All files are placed in the directory /var/log.
We recommend that you place BGP tracing output in the file bgp-log.
files number—(Optional) Maximum number of trace files. When a trace file named
trace-file reaches its maximum size, it is renamed trace-file.0, then trace-file.1,
and so on, until the maximum number of trace files is reached. Then, the
oldest trace file is overwritten.
If you specify a maximum number of files, you must also specify a maximum
file size with the size option.
Range: 2 through 1000 files
Default: 10 files

traceoptions

659
Chapter 34: Summary of BGP Configuration Statements
flag—Tracing operation to perform. To specify more than one tracing operation,
include multiple flag statements.
BGP Tracing Flags

as-path—AS path regular expression operations.

damping—Damping operations.

keepalive—BGP keepalive messages.

open—Open packets. These packets are sent between peers when they are
establishing a connection.

packets—All BGP protocol packets.

update—Update packets. These packets provide routing updates to BGP
systems.
Global Tracing Flags

all—All tracing operations.

general—A combination of the normal and route trace operations.

normal—All normal operations.
Default: If you do not specify this option, only unusual or abnormal
operations are traced.

policy—Policy operations and actions.

route—Routing table changes.

state—State transitions.

task—Interface transactions and processing.

timer—Timer usage.
flag-modifier—(Optional) Modifier for the tracing flag. You can specify one or more
of these modifiers:

detail—Provide detailed trace information.

filter—Filter trace information. Applies only for route and damping tracing
flags.

receive—Packets being received.

send—Packets being transmitted.
no-stamp—(Optional) Do not place timestamp information at the beginning of each
line in the trace file.
Default: If you omit this option, timestamp information is placed at the
beginning of each line of the tracing output.

JUNOS 8.2 Routing Protocols Configuration Guide
660

traceoptions
no-world-readable—(Optional) Disallow any user to read the log file.
replace—(Optional) Replace an existing trace file if there is one.
Default: If you do not include this option, tracing output is appended to an
existing trace file.
size size—(Optional) Maximum size of each trace file, in kilobytes (KB), megabytes
(MB), or gigabytes (GB). When a trace file named trace-file reaches this size, it is
renamed trace-file.0. When the trace-file again reaches its maximum size,
trace-file.0 is renamed trace-file.1 and trace-file is renamed trace-file.0. This
renaming scheme continues until the maximum number of trace files is
reached. Then, the oldest trace file is overwritten.
If you specify a maximum file size, you also must specify a maximum number
of trace files with the files option.
Syntax: xk to specify KB, xm to specify MB, or xg to specify GB
Range: 10 KB through the maximum file size supported on your system
Default: 128 KB
world-readable—(Optional) Allow any user to read the log file.
Usage Guidelines
See “Tracing BGP Protocol Traffic” on page 602.
Required Privilege Level
routing and trace—To view this statement in the configuration.
routing-control and trace-control—To add this statement to the configuration.
See Also
log-updown on page 635

type

661
Chapter 34: Summary of BGP Configuration Statements
type
Syntax
type type;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name routing-instances routing-instance-name
protocols bgp group group-name],
[edit protocols bgp group group-name],
[edit routing-instances routing-instance-name protocols bgp group group-name]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Specify the type of BGP peer group.
Options
type—Type of group:

internal—Internal group

external—External group
Usage Guidelines
See “Defining BGP Groups and Peers” on page 547.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.
vpn-apply-export
Syntax
vpn-apply-export;
Hierarchy Level
[edit logical-routers logical-router-name protocols bgp],
[edit logical-routers logical-router-name protocols bgp group group-name],
[edit logical-routers logical-router-name protocols bgp group group-name
neighbor address],
[edit protocols bgp],
[edit protocols bgp group group-name],
[edit protocols bgp group group-name neighbor address]
Release Information
Statement introduced before JUNOS Release 7.4.
Description
Apply a BGP export policy in addition to a VPN routing and forwarding (VRF) export
policy to routes.
Default
The default action is to accept.
Usage Guidelines
See “Applying BGP Export Policy to VRF Routes” on page 600.
Required Privilege Level
routing—To view this statement in the configuration.
routing-control—To add this statement to the configuration.

JUNOS 8.2 Routing Protocols Configuration Guide
662

vpn-apply-export

